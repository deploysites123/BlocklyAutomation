var rT=Object.defineProperty,oT=Object.defineProperties,sT=Object.getOwnPropertyDescriptors,Jb=Object.getOwnPropertySymbols,aT=Object.prototype.hasOwnProperty,lT=Object.prototype.propertyIsEnumerable,Zb=(V,Z,g)=>Z in V?rT(V,Z,{enumerable:!0,configurable:!0,writable:!0,value:g}):V[Z]=g,Fm=(V,Z)=>{for(var g in Z||(Z={}))aT.call(Z,g)&&Zb(V,g,Z[g]);if(Jb)for(var g of Jb(Z))lT.call(Z,g)&&Zb(V,g,Z[g]);return V},Bm=(V,Z)=>oT(V,sT(Z));(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{91677:(V,Z,g)=>{"use strict";var E=g(22313),m=g(5e3),t=g(93075),e=g(91083),n=g(15861),a=g(47423),d=g(63874),C=g(53251),D=g(69808);const B=["vcr"];function z(k,U){if(1&k&&(m.TgZ(0,"mat-icon",9),m._uU(1),m.qZA()),2&k){const v=m.oxw(2).$implicit;m.xp6(1),m.hij(" filter_",v+1,"")}}function oe(k,U){1&k&&(m.TgZ(0,"span"),m._uU(1,"W:{{number+1}"),m.qZA())}function be(k,U){if(1&k&&(m.YNc(0,z,2,1,"mat-icon",7),m.YNc(1,oe,2,0,"span",8)),2&k){const v=m.oxw().$implicit;m.Q6J("ngIf",v<10),m.xp6(1),m.Q6J("ngIf",v>9)}}function se(k,U){}function Ie(k,U){1&k&&(m.TgZ(0,"mat-tab",4),m.YNc(1,be,2,2,"ng-template",5),m.YNc(2,se,0,0,"ng-template",null,6,m.W1O),m.qZA()),2&k&&m.Q6J("label","W:"+(U.$implicit+1))}let Ge=(()=>{class k{constructor(v,O){this.fooInjector=v,this.resolver=O,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(v){this.data.filter(O=>O==v).length>0||(this.data.push(v),this.loadBar(v).then(O=>{}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(v=>{})}loadBar(v){var O=this;return(0,n.Z)(function*(){var q;try{const Kt=yield Promise.resolve().then(g.bind(g,57387)),xi=O.resolver.resolveComponentFactory(Kt.DisplayBlocklyComponent);var Ne=null===(q=O.components)||void 0===q?void 0:q.get(v);null!=Ne&&Ne.createComponent(xi)}catch(Kt){console.error("loading"+v,Kt)}return v})()}ngOnInit(){}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.zs3),m.Y36(m._Vd))},k.\u0275cmp=m.Xpm({type:k,selectors:[["app-blockly-studio"]],viewQuery:function(v,O){if(1&v&&m.Gf(B,5,m.s_b),2&v){let q;m.iGM(q=m.CRH())&&(O.components=q)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(v,O){1&v&&(m.TgZ(0,"button",0),m.NdJ("click",function(){return O.addTab()}),m.TgZ(1,"mat-icon"),m._uU(2,"add_circle"),m.qZA(),m.qZA(),m.TgZ(3,"mat-tab-group",1),m.NdJ("selectedIndexChange",function(Ne){return O.changeSelected(Ne)}),m.YNc(4,Ie,4,1,"mat-tab",2),m.qZA(),m.TgZ(5,"button",3),m.NdJ("click",function(){return O.addTab()}),m._uU(6,"Add"),m.qZA()),2&v&&(m.xp6(3),m.Q6J("selectedIndex",O.selectedTabIndex),m.xp6(1),m.Q6J("ngForOf",O.numbers))},directives:[a.lW,d.Hw,C.SP,D.sg,C.uX,C.uD,D.O5],styles:[""]}),k})();var _e=g(57387);const Le=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:_e.DisplayBlocklyComponent},{path:"automation/studio",component:Ge},{path:"automation/loadexample/:demoblock",component:_e.DisplayBlocklyComponent},{path:"**",component:_e.DisplayBlocklyComponent}];let We=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[e.Bz.forRoot(Le)],e.Bz]}),k})();var $e=g(95240),Te=g(95113),ye=g(54004),ne=g(77579),ge=g(26063);class ae extends ne.x{constructor(U=1/0,v=1/0,O=ge.l){super(),this._bufferSize=U,this._windowTime=v,this._timestampProvider=O,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=v===1/0,this._bufferSize=Math.max(1,U),this._windowTime=Math.max(1,v)}next(U){const{isStopped:v,_buffer:O,_infiniteTimeWindow:q,_timestampProvider:Ne,_windowTime:Kt}=this;v||(O.push(U),!q&&O.push(Ne.now()+Kt)),this._trimBuffer(),super.next(U)}_subscribe(U){this._throwIfClosed(),this._trimBuffer();const v=this._innerSubscribe(U),{_infiniteTimeWindow:O,_buffer:q}=this,Ne=q.slice();for(let Kt=0;Kt<Ne.length&&!U.closed;Kt+=O?1:2)U.next(Ne[Kt]);return this._checkFinalizedStatuses(U),v}_trimBuffer(){const{_bufferSize:U,_timestampProvider:v,_buffer:O,_infiniteTimeWindow:q}=this,Ne=(q?1:2)*U;if(U<1/0&&Ne<O.length&&O.splice(0,O.length-Ne),!q){const Kt=v.now();let xi=0;for(let en=1;en<O.length&&O[en]<=Kt;en+=2)xi=en;xi&&O.splice(0,xi+1)}}}var He=g(13099);let Ee=(()=>{class k{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[],this.latestVersion="",this.localAPI=""}}return k.version="2021.12.30.1600",k})();var ue=g(20549),ie=g(70925),ht=g(30495),Oe=g(90508),ke=g(63191),dt=g(91159),vt=g(54968),lt=g(56451),Bt=g(39300),Pt=g(69718),Zt=g(82722),Di=g(71884),ii=g(95698),Ct=g(68675),gi=g(78372),Be=g(41777),Tt=g(76360),Je=g(15664),_t=g(50226);const xe=["*"];function pt(k,U){if(1&k){const v=m.EpF();m.TgZ(0,"div",2),m.NdJ("click",function(){return m.CHM(v),m.oxw()._onBackdropClicked()}),m.qZA()}if(2&k){const v=m.oxw();m.ekj("mat-drawer-shown",v._isShowingBackdrop())}}function jt(k,U){1&k&&(m.TgZ(0,"mat-drawer-content"),m.Hsn(1,2),m.qZA())}const di=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Rt=["mat-drawer","mat-drawer-content","*"];function et(k,U){if(1&k){const v=m.EpF();m.TgZ(0,"div",2),m.NdJ("click",function(){return m.CHM(v),m.oxw()._onBackdropClicked()}),m.qZA()}if(2&k){const v=m.oxw();m.ekj("mat-drawer-shown",v._isShowingBackdrop())}}function tt(k,U){1&k&&(m.TgZ(0,"mat-sidenav-content",3),m.Hsn(1,2),m.qZA())}const Lt=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],nt=["mat-sidenav","mat-sidenav-content","*"],yt={transformDrawer:(0,Be.X$)("transform",[(0,Be.SB)("open, open-instant",(0,Be.oB)({transform:"none",visibility:"visible"})),(0,Be.SB)("void",(0,Be.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Be.eR)("void => open-instant",(0,Be.jt)("0ms")),(0,Be.eR)("void <=> open, open-instant => void",(0,Be.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},ut=new m.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),ei=new m.OlP("MAT_DRAWER_CONTAINER");let Ni=(()=>{class k extends ht.PQ{constructor(v,O,q,Ne,Kt){super(q,Ne,Kt),this._changeDetectorRef=v,this._container=O}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.sBO),m.Y36((0,m.Gpc)(()=>yi)),m.Y36(m.SBq),m.Y36(ht.mF),m.Y36(m.R0b))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(v,O){2&v&&m.Udp("margin-left",O._container._contentMargins.left,"px")("margin-right",O._container._contentMargins.right,"px")},features:[m.qOj],ngContentSelectors:xe,decls:1,vars:0,template:function(v,O){1&v&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),k})(),wi=(()=>{class k{constructor(v,O,q,Ne,Kt,xi,en,Nn){this._elementRef=v,this._focusTrapFactory=O,this._focusMonitor=q,this._platform=Ne,this._ngZone=Kt,this._interactivityChecker=xi,this._doc=en,this._container=Nn,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ne.x,this._animationEnd=new ne.x,this._animationState="void",this.openedChange=new m.vpe(!0),this._openedStream=this.openedChange.pipe((0,Bt.h)(dn=>dn),(0,ye.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Bt.h)(dn=>dn.fromState!==dn.toState&&0===dn.toState.indexOf("open")),(0,Pt.h)(void 0)),this._closedStream=this.openedChange.pipe((0,Bt.h)(dn=>!dn),(0,ye.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Bt.h)(dn=>dn.fromState!==dn.toState&&"void"===dn.toState),(0,Pt.h)(void 0)),this._destroyed=new ne.x,this.onPositionChanged=new m.vpe,this._modeChanged=new ne.x,this.openedChange.subscribe(dn=>{dn?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,vt.R)(this._elementRef.nativeElement,"keydown").pipe((0,Bt.h)(dn=>dn.keyCode===dt.hY&&!this.disableClose&&!(0,dt.Vb)(dn)),(0,Zt.R)(this._destroyed)).subscribe(dn=>this._ngZone.run(()=>{this.close(),dn.stopPropagation(),dn.preventDefault()}))}),this._animationEnd.pipe((0,Di.x)((dn,gr)=>dn.fromState===gr.fromState&&dn.toState===gr.toState)).subscribe(dn=>{const{fromState:gr,toState:io}=dn;(0===io.indexOf("open")&&"void"===gr||"void"===io&&0===gr.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(v){(v="end"===v?"end":"start")!=this._position&&(this._position=v,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(v){this._mode=v,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(v){this._disableClose=(0,ke.Ig)(v)}get autoFocus(){const v=this._autoFocus;return null==v?"side"===this.mode?"dialog":"first-tabbable":v}set autoFocus(v){("true"===v||"false"===v||null==v)&&(v=(0,ke.Ig)(v)),this._autoFocus=v}get opened(){return this._opened}set opened(v){this.toggle((0,ke.Ig)(v))}_forceFocus(v,O){this._interactivityChecker.isFocusable(v)||(v.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{v.addEventListener("blur",()=>v.removeAttribute("tabindex")),v.addEventListener("mousedown",()=>v.removeAttribute("tabindex"))})),v.focus(O)}_focusByCssSelector(v,O){let q=this._elementRef.nativeElement.querySelector(v);q&&this._forceFocus(q,O)}_takeFocus(){if(!this._focusTrap)return;const v=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(O=>{!O&&"function"==typeof this._elementRef.nativeElement.focus&&v.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(v){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,v):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var v;const O=null===(v=this._doc)||void 0===v?void 0:v.activeElement;return!!O&&this._elementRef.nativeElement.contains(O)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(v){return this.toggle(!0,v)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(v=!this.opened,O){v&&O&&(this._openedVia=O);const q=this._setOpen(v,!v&&this._isFocusWithinDrawer(),this._openedVia||"program");return v||(this._openedVia=null),q}_setOpen(v,O,q){return this._opened=v,v?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",O&&this._restoreFocus(q)),this._updateFocusTrapState(),new Promise(Ne=>{this.openedChange.pipe((0,ii.q)(1)).subscribe(Kt=>Ne(Kt?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.SBq),m.Y36(Je.qV),m.Y36(Je.tE),m.Y36(ie.t4),m.Y36(m.R0b),m.Y36(Je.ic),m.Y36(D.K0,8),m.Y36(ei,8))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(v,O){1&v&&m.WFA("@transform.start",function(Ne){return O._animationStarted.next(Ne)})("@transform.done",function(Ne){return O._animationEnd.next(Ne)}),2&v&&(m.uIk("align",null),m.d8E("@transform",O._animationState),m.ekj("mat-drawer-end","end"===O.position)("mat-drawer-over","over"===O.mode)("mat-drawer-push","push"===O.mode)("mat-drawer-side","side"===O.mode)("mat-drawer-opened",O.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:xe,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(v,O){1&v&&(m.F$t(),m.TgZ(0,"div",0),m.Hsn(1),m.qZA())},directives:[ht.PQ],encapsulation:2,data:{animation:[yt.transformDrawer]},changeDetection:0}),k})(),yi=(()=>{class k{constructor(v,O,q,Ne,Kt,xi=!1,en){this._dir=v,this._element=O,this._ngZone=q,this._changeDetectorRef=Ne,this._animationMode=en,this._drawers=new m.n_E,this.backdropClick=new m.vpe,this._destroyed=new ne.x,this._doCheckSubject=new ne.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ne.x,v&&v.change.pipe((0,Zt.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),Kt.change().pipe((0,Zt.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=xi}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(v){this._autosize=(0,ke.Ig)(v)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(v){this._backdropOverride=null==v?null:(0,ke.Ig)(v)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Ct.O)(this._allDrawers),(0,Zt.R)(this._destroyed)).subscribe(v=>{this._drawers.reset(v.filter(O=>!O._container||O._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Ct.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(v=>{this._watchDrawerToggle(v),this._watchDrawerPosition(v),this._watchDrawerMode(v)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,gi.b)(10),(0,Zt.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(v=>v.open())}close(){this._drawers.forEach(v=>v.close())}updateContentMargins(){let v=0,O=0;if(this._left&&this._left.opened)if("side"==this._left.mode)v+=this._left._getWidth();else if("push"==this._left.mode){const q=this._left._getWidth();v+=q,O-=q}if(this._right&&this._right.opened)if("side"==this._right.mode)O+=this._right._getWidth();else if("push"==this._right.mode){const q=this._right._getWidth();O+=q,v-=q}v=v||null,O=O||null,(v!==this._contentMargins.left||O!==this._contentMargins.right)&&(this._contentMargins={left:v,right:O},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(v){v._animationStarted.pipe((0,Bt.h)(O=>O.fromState!==O.toState),(0,Zt.R)(this._drawers.changes)).subscribe(O=>{"open-instant"!==O.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==v.mode&&v.openedChange.pipe((0,Zt.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(v.opened))}_watchDrawerPosition(v){!v||v.onPositionChanged.pipe((0,Zt.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,ii.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(v){v&&v._modeChanged.pipe((0,Zt.R)((0,lt.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(v){const O=this._element.nativeElement.classList,q="mat-drawer-container-has-open";v?O.add(q):O.remove(q)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(v=>{"end"==v.position?this._end=v:this._start=v}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(v=>v&&!v.disableClose&&this._canHaveBackdrop(v)).forEach(v=>v._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(v){return"side"!==v.mode||!!this._backdropOverride}_isDrawerOpen(v){return null!=v&&v.opened}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(_t.Is,8),m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(m.sBO),m.Y36(ht.rL),m.Y36(ut),m.Y36(Tt.Qb,8))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-drawer-container"]],contentQueries:function(v,O,q){if(1&v&&(m.Suo(q,Ni,5),m.Suo(q,wi,5)),2&v){let Ne;m.iGM(Ne=m.CRH())&&(O._content=Ne.first),m.iGM(Ne=m.CRH())&&(O._allDrawers=Ne)}},viewQuery:function(v,O){if(1&v&&m.Gf(Ni,5),2&v){let q;m.iGM(q=m.CRH())&&(O._userContent=q.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(v,O){2&v&&m.ekj("mat-drawer-container-explicit-backdrop",O._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[m._Bn([{provide:ei,useExisting:k}])],ngContentSelectors:Rt,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(v,O){1&v&&(m.F$t(di),m.YNc(0,pt,1,2,"div",0),m.Hsn(1),m.Hsn(2,1),m.YNc(3,jt,2,0,"mat-drawer-content",1)),2&v&&(m.Q6J("ngIf",O.hasBackdrop),m.xp6(3),m.Q6J("ngIf",!O._content))},directives:[D.O5,Ni],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),k})(),pn=(()=>{class k extends Ni{constructor(v,O,q,Ne,Kt){super(v,O,q,Ne,Kt)}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.sBO),m.Y36((0,m.Gpc)(()=>Ji)),m.Y36(m.SBq),m.Y36(ht.mF),m.Y36(m.R0b))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(v,O){2&v&&m.Udp("margin-left",O._container._contentMargins.left,"px")("margin-right",O._container._contentMargins.right,"px")},features:[m.qOj],ngContentSelectors:xe,decls:1,vars:0,template:function(v,O){1&v&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),k})(),mi=(()=>{class k extends wi{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(v){this._fixedInViewport=(0,ke.Ig)(v)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(v){this._fixedTopGap=(0,ke.su)(v)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(v){this._fixedBottomGap=(0,ke.su)(v)}}return k.\u0275fac=function(){let U;return function(O){return(U||(U=m.n5z(k)))(O||k)}}(),k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(v,O){2&v&&(m.uIk("align",null),m.Udp("top",O.fixedInViewport?O.fixedTopGap:null,"px")("bottom",O.fixedInViewport?O.fixedBottomGap:null,"px"),m.ekj("mat-drawer-end","end"===O.position)("mat-drawer-over","over"===O.mode)("mat-drawer-push","push"===O.mode)("mat-drawer-side","side"===O.mode)("mat-drawer-opened",O.opened)("mat-sidenav-fixed",O.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[m.qOj],ngContentSelectors:xe,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(v,O){1&v&&(m.F$t(),m.TgZ(0,"div",0),m.Hsn(1),m.qZA())},directives:[ht.PQ],encapsulation:2,data:{animation:[yt.transformDrawer]},changeDetection:0}),k})(),Ji=(()=>{class k extends yi{}return k.\u0275fac=function(){let U;return function(O){return(U||(U=m.n5z(k)))(O||k)}}(),k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-sidenav-container"]],contentQueries:function(v,O,q){if(1&v&&(m.Suo(q,pn,5),m.Suo(q,mi,5)),2&v){let Ne;m.iGM(Ne=m.CRH())&&(O._content=Ne.first),m.iGM(Ne=m.CRH())&&(O._allDrawers=Ne)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(v,O){2&v&&m.ekj("mat-drawer-container-explicit-backdrop",O._backdropOverride)},exportAs:["matSidenavContainer"],features:[m._Bn([{provide:ei,useExisting:k}]),m.qOj],ngContentSelectors:nt,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(v,O){1&v&&(m.F$t(Lt),m.YNc(0,et,1,2,"div",0),m.Hsn(1),m.Hsn(2,1),m.YNc(3,tt,2,0,"mat-sidenav-content",1)),2&v&&(m.Q6J("ngIf",O.hasBackdrop),m.xp6(3),m.Q6J("ngIf",!O._content))},directives:[D.O5,pn,ht.PQ],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),k})(),wt=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[D.ez,Oe.BQ,ie.ud,ht.ZD],ht.ZD,Oe.BQ]}),k})();const Ot=["*",[["mat-toolbar-row"]]],Ci=["*","mat-toolbar-row"],zt=(0,Oe.pj)(class{constructor(k){this._elementRef=k}});let Mi=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275dir=m.lG2({type:k,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),k})(),_i=(()=>{class k extends zt{constructor(v,O,q){super(v),this._platform=O,this._document=q}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.SBq),m.Y36(ie.t4),m.Y36(D.K0))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-toolbar"]],contentQueries:function(v,O,q){if(1&v&&m.Suo(q,Mi,5),2&v){let Ne;m.iGM(Ne=m.CRH())&&(O._toolbarRows=Ne)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(v,O){2&v&&m.ekj("mat-toolbar-multiple-rows",O._toolbarRows.length>0)("mat-toolbar-single-row",0===O._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[m.qOj],ngContentSelectors:Ci,decls:2,vars:0,template:function(v,O){1&v&&(m.F$t(Ot),m.Hsn(0),m.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),k})(),Jt=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.BQ],Oe.BQ]}),k})(),Zi=(()=>{class k{constructor(){this._listeners=[]}notify(v,O){for(let q of this._listeners)q(v,O)}listen(v){return this._listeners.push(v),()=>{this._listeners=this._listeners.filter(O=>v!==O)}}ngOnDestroy(){this._listeners=[]}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();var nr=g(4834);const li=["*"],kt=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],ui=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Tr=(0,Oe.Id)((0,Oe.Kr)(class{})),eo=(0,Oe.Kr)(class{}),no=new m.OlP("MatList"),mo=new m.OlP("MatNavList");let Lr=(()=>{class k extends Tr{constructor(){super(...arguments),this._stateChanges=new ne.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return k.\u0275fac=function(){let U;return function(O){return(U||(U=m.n5z(k)))(O||k)}}(),k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[m._Bn([{provide:mo,useExisting:k}]),m.qOj,m.TTD],ngContentSelectors:li,decls:1,vars:0,template:function(v,O){1&v&&(m.F$t(),m.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),k})(),Ro=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275dir=m.lG2({type:k,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),k})(),cr=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275dir=m.lG2({type:k,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),k})(),Gn=(()=>{class k extends eo{constructor(v,O,q,Ne){super(),this._element=v,this._isInteractiveList=!1,this._destroyed=new ne.x,this._disabled=!1,this._isInteractiveList=!!(q||Ne&&"action-list"===Ne._getListType()),this._list=q||Ne;const Kt=this._getHostElement();"button"===Kt.nodeName.toLowerCase()&&!Kt.hasAttribute("type")&&Kt.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,Zt.R)(this._destroyed)).subscribe(()=>{O.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(v){this._disabled=(0,ke.Ig)(v)}ngAfterContentInit(){(0,Oe.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.SBq),m.Y36(m.sBO),m.Y36(mo,8),m.Y36(no,8))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(v,O,q){if(1&v&&(m.Suo(q,Ro,5),m.Suo(q,cr,5),m.Suo(q,Oe.X2,5)),2&v){let Ne;m.iGM(Ne=m.CRH())&&(O._avatar=Ne.first),m.iGM(Ne=m.CRH())&&(O._icon=Ne.first),m.iGM(Ne=m.CRH())&&(O._lines=Ne)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(v,O){2&v&&m.ekj("mat-list-item-disabled",O.disabled)("mat-list-item-avatar",O._avatar||O._icon)("mat-list-item-with-avatar",O._avatar||O._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[m.qOj],ngContentSelectors:ui,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(v,O){1&v&&(m.F$t(kt),m.TgZ(0,"div",0),m._UZ(1,"div",1),m.Hsn(2),m.TgZ(3,"div",2),m.Hsn(4,1),m.qZA(),m.Hsn(5,2),m.qZA()),2&v&&(m.xp6(1),m.Q6J("matRippleTrigger",O._getHostElement())("matRippleDisabled",O._isRippleDisabled()))},directives:[Oe.wG],encapsulation:2,changeDetection:0}),k})(),Vi=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.uc,Oe.si,Oe.BQ,Oe.us,D.ez],Oe.uc,Oe.BQ,Oe.us,nr.t]}),k})();var Dn=g(50727);const ot=new m.OlP("CdkAccordion");let Ai=0,Ki=(()=>{class k{constructor(v,O,q){this.accordion=v,this._changeDetectorRef=O,this._expansionDispatcher=q,this._openCloseAllSubscription=Dn.w0.EMPTY,this.closed=new m.vpe,this.opened=new m.vpe,this.destroyed=new m.vpe,this.expandedChange=new m.vpe,this.id="cdk-accordion-child-"+Ai++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=q.listen((Ne,Kt)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===Kt&&this.id!==Ne&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(v){v=(0,ke.Ig)(v),this._expanded!==v&&(this._expanded=v,this.expandedChange.emit(v),v?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(v){this._disabled=(0,ke.Ig)(v)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(v=>{this.disabled||(this.expanded=v)})}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(ot,12),m.Y36(m.sBO),m.Y36(Zi))},k.\u0275dir=m.lG2({type:k,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[m._Bn([{provide:ot,useValue:void 0}])]}),k})(),zi=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({}),k})();var Zn=g(47429),Yn=g(60515);const sr=["body"];function Bn(k,U){}const Ao=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Yo=["mat-expansion-panel-header","*","mat-action-row"];function ro(k,U){if(1&k&&m._UZ(0,"span",2),2&k){const v=m.oxw();m.Q6J("@indicatorRotate",v._getExpandedState())}}const _o=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Qs=["mat-panel-title","mat-panel-description","*"],dr=new m.OlP("MAT_ACCORDION"),Xo="225ms cubic-bezier(0.4,0.0,0.2,1)",$r={indicatorRotate:(0,Be.X$)("indicatorRotate",[(0,Be.SB)("collapsed, void",(0,Be.oB)({transform:"rotate(0deg)"})),(0,Be.SB)("expanded",(0,Be.oB)({transform:"rotate(180deg)"})),(0,Be.eR)("expanded <=> collapsed, void => collapsed",(0,Be.jt)(Xo))]),bodyExpansion:(0,Be.X$)("bodyExpansion",[(0,Be.SB)("collapsed, void",(0,Be.oB)({height:"0px",visibility:"hidden"})),(0,Be.SB)("expanded",(0,Be.oB)({height:"*",visibility:"visible"})),(0,Be.eR)("expanded <=> collapsed, void => collapsed",(0,Be.jt)(Xo))])};let ws=(()=>{class k{constructor(v){this._template=v}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(m.Rgc))},k.\u0275dir=m.lG2({type:k,selectors:[["ng-template","matExpansionPanelContent",""]]}),k})(),Ss=0;const Bo=new m.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Do=(()=>{class k extends Ki{constructor(v,O,q,Ne,Kt,xi,en){super(v,O,q),this._viewContainerRef=Ne,this._animationMode=xi,this._hideToggle=!1,this.afterExpand=new m.vpe,this.afterCollapse=new m.vpe,this._inputChanges=new ne.x,this._headerId="mat-expansion-panel-header-"+Ss++,this._bodyAnimationDone=new ne.x,this.accordion=v,this._document=Kt,this._bodyAnimationDone.pipe((0,Di.x)((Nn,dn)=>Nn.fromState===dn.fromState&&Nn.toState===dn.toState)).subscribe(Nn=>{"void"!==Nn.fromState&&("expanded"===Nn.toState?this.afterExpand.emit():"collapsed"===Nn.toState&&this.afterCollapse.emit())}),en&&(this.hideToggle=en.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(v){this._hideToggle=(0,ke.Ig)(v)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(v){this._togglePosition=v}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,Ct.O)(null),(0,Bt.h)(()=>this.expanded&&!this._portal),(0,ii.q)(1)).subscribe(()=>{this._portal=new Zn.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(v){this._inputChanges.next(v)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const v=this._document.activeElement,O=this._body.nativeElement;return v===O||O.contains(v)}return!1}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(dr,12),m.Y36(m.sBO),m.Y36(Zi),m.Y36(m.s_b),m.Y36(D.K0),m.Y36(Tt.Qb,8),m.Y36(Bo,8))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-expansion-panel"]],contentQueries:function(v,O,q){if(1&v&&m.Suo(q,ws,5),2&v){let Ne;m.iGM(Ne=m.CRH())&&(O._lazyContent=Ne.first)}},viewQuery:function(v,O){if(1&v&&m.Gf(sr,5),2&v){let q;m.iGM(q=m.CRH())&&(O._body=q.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(v,O){2&v&&m.ekj("mat-expanded",O.expanded)("_mat-animation-noopable","NoopAnimations"===O._animationMode)("mat-expansion-panel-spacing",O._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[m._Bn([{provide:dr,useValue:void 0}]),m.qOj,m.TTD],ngContentSelectors:Yo,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(v,O){1&v&&(m.F$t(Ao),m.Hsn(0),m.TgZ(1,"div",0,1),m.NdJ("@bodyExpansion.done",function(Ne){return O._bodyAnimationDone.next(Ne)}),m.TgZ(3,"div",2),m.Hsn(4,1),m.YNc(5,Bn,0,0,"ng-template",3),m.qZA(),m.Hsn(6,2),m.qZA()),2&v&&(m.xp6(1),m.Q6J("@bodyExpansion",O._getExpandedState())("id",O.id),m.uIk("aria-labelledby",O._headerId),m.xp6(4),m.Q6J("cdkPortalOutlet",O._portal))},directives:[Zn.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[$r.bodyExpansion]},changeDetection:0}),k})();class Ho{}const Xa=(0,Oe.sb)(Ho);let Ka=(()=>{class k extends Xa{constructor(v,O,q,Ne,Kt,xi,en){super(),this.panel=v,this._element=O,this._focusMonitor=q,this._changeDetectorRef=Ne,this._animationMode=xi,this._parentChangeSubscription=Dn.w0.EMPTY;const Nn=v.accordion?v.accordion._stateChanges.pipe((0,Bt.h)(dn=>!(!dn.hideToggle&&!dn.togglePosition))):Yn.E;this.tabIndex=parseInt(en||"")||0,this._parentChangeSubscription=(0,lt.T)(v.opened,v.closed,Nn,v._inputChanges.pipe((0,Bt.h)(dn=>!!(dn.hideToggle||dn.disabled||dn.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),v.closed.pipe((0,Bt.h)(()=>v._containsFocus())).subscribe(()=>q.focusVia(O,"program")),Kt&&(this.expandedHeight=Kt.expandedHeight,this.collapsedHeight=Kt.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const v=this._isExpanded();return v&&this.expandedHeight?this.expandedHeight:!v&&this.collapsedHeight?this.collapsedHeight:null}_keydown(v){switch(v.keyCode){case dt.L_:case dt.K5:(0,dt.Vb)(v)||(v.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(v))}}focus(v,O){v?this._focusMonitor.focusVia(this._element,v,O):this._element.nativeElement.focus(O)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(v=>{v&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(Do,1),m.Y36(m.SBq),m.Y36(Je.tE),m.Y36(m.sBO),m.Y36(Bo,8),m.Y36(Tt.Qb,8),m.$8M("tabindex"))},k.\u0275cmp=m.Xpm({type:k,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(v,O){1&v&&m.NdJ("click",function(){return O._toggle()})("keydown",function(Ne){return O._keydown(Ne)}),2&v&&(m.uIk("id",O.panel._headerId)("tabindex",O.tabIndex)("aria-controls",O._getPanelId())("aria-expanded",O._isExpanded())("aria-disabled",O.panel.disabled),m.Udp("height",O._getHeaderHeight()),m.ekj("mat-expanded",O._isExpanded())("mat-expansion-toggle-indicator-after","after"===O._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===O._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===O._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[m.qOj],ngContentSelectors:Qs,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(v,O){1&v&&(m.F$t(_o),m.TgZ(0,"span",0),m.Hsn(1),m.Hsn(2,1),m.Hsn(3,2),m.qZA(),m.YNc(4,ro,1,1,"span",1)),2&v&&(m.xp6(4),m.Q6J("ngIf",O._showToggle()))},directives:[D.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[$r.indicatorRotate]},changeDetection:0}),k})(),qo=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275dir=m.lG2({type:k,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),k})(),vl=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[D.ez,Oe.BQ,zi,Zn.eL]]}),k})();var Bs=g(92181);const Fa=function(k){return["/","automation","loadexample",k]};function Hs(k,U){if(1&k&&(m.TgZ(0,"a",24),m.TgZ(1,"mat-icon"),m._uU(2," https "),m.qZA(),m._uU(3),m.qZA()),2&k){const v=U.index,O=U.$implicit;m.Q6J("routerLink",m.VKq(3,Fa,O.id)),m.xp6(3),m.AsE(" ",v+1," ",O.description,"")}}function fs(k,U){if(1&k){const v=m.EpF();m.TgZ(0,"button",26),m.NdJ("click",function(){return m.CHM(v),m.oxw(),m.MAs(2).toggle()}),m.TgZ(1,"mat-icon",27),m._uU(2,"menu"),m.qZA(),m.qZA()}}function ll(k,U){if(1&k&&(m.TgZ(0,"span",28),m._uU(1),m.qZA()),2&k){const v=m.oxw();m.xp6(1),m.AsE(" ",v.version," => ",v.latestVersion," ")}}const _a=function(){return["/","automation","studio"]},qs=function(){return["/","automation","main"]};let Io=(()=>{class k{constructor(v,O,q){this.breakpointObserver=v,this.details=O,this.ta=q,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(Te.u3.Handset).pipe((0,ye.U)(Ne=>Ne.matches||!0),function(k,U,v){let Ne,Kt=!1;return Ne=1/0,(0,He.B)({connector:()=>new ae(Ne,U,v),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Kt})}()),this.version=Ee.version,this.latestVersion="",this.title="Blockly Automation",this.footer="",this.standalone=!1}ngOnInit(){var v,O,q,Ne,Kt;this.latestVersion=null===(v=this.details.settings)||void 0===v?void 0:v.latestVersion,this.demoBlocks=this.details.demoBlocks.sort((xi,en)=>xi.description.localeCompare(en.description)),this.title=(null===(q=null===(O=this.details)||void 0===O?void 0:O.settings)||void 0===q?void 0:q.title)||"Blockly Automation",this.footer=(null===(Kt=null===(Ne=this.details)||void 0===Ne?void 0:Ne.settings)||void 0===Kt?void 0:Kt.footer)||"",(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&(this.standalone=!0)}executeOnDisplayBlockly(v){this.ta.sendDataToServer("DisplayBlocklyComponent",v)}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(Te.Yg),m.Y36($e.d),m.Y36(ue.v))},k.\u0275cmp=m.Xpm({type:k,selectors:[["app-primary-navig"]],decls:84,vars:27,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","",4,"ngIf"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip/","target","_blank"],["mat-list-item","","href","http://ba.serviciipeweb.ro/","target","_blank"],["mat-list-item","","href","https://www.microsoft.com/en-us/p/blocklyautomation/9mxnwjt6zpd0","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item",""]],template:function(v,O){if(1&v&&(m.TgZ(0,"mat-sidenav-container",0),m.TgZ(1,"mat-sidenav",1,2),m.ALo(3,"async"),m.ALo(4,"async"),m.ALo(5,"async"),m.TgZ(6,"mat-toolbar"),m.TgZ(7,"a",3),m._uU(8,"Menu"),m.qZA(),m.qZA(),m.TgZ(9,"mat-nav-list"),m.TgZ(10,"a",4),m.TgZ(11,"mat-icon"),m._uU(12," source "),m.qZA(),m._uU(13," Github"),m.qZA(),m._UZ(14,"mat-divider"),m.TgZ(15,"a",5),m.TgZ(16,"mat-icon"),m._uU(17," https "),m.qZA(),m._uU(18," Demo online"),m.qZA(),m._UZ(19,"mat-divider"),m.TgZ(20,"mat-expansion-panel"),m.TgZ(21,"mat-expansion-panel-header"),m.TgZ(22,"mat-panel-title"),m._uU(23),m.qZA(),m.qZA(),m.YNc(24,Hs,4,5,"a",6),m.qZA(),m.qZA(),m.qZA(),m.TgZ(25,"mat-sidenav-content"),m.TgZ(26,"mat-toolbar",7),m.YNc(27,fs,3,0,"button",8),m.ALo(28,"async"),m.TgZ(29,"span",9),m._uU(30),m.qZA(),m._UZ(31,"span",10),m.TgZ(32,"button",11),m.NdJ("click",function(){return O.executeOnDisplayBlockly("createIntro")}),m.TgZ(33,"mat-icon"),m._uU(34," help_outline "),m.qZA(),m.qZA(),m.TgZ(35,"button",12),m.TgZ(36,"mat-icon"),m._uU(37," file_download "),m.qZA(),m.qZA(),m.TgZ(38,"mat-menu",null,13),m.YNc(40,ll,2,2,"span",14),m.TgZ(41,"a",15),m._uU(42," Download HTML"),m.qZA(),m.TgZ(43,"a",16),m._uU(44," Download Linux"),m.qZA(),m.TgZ(45,"a",17),m._uU(46," Download Windows"),m.qZA(),m.TgZ(47,"a",18),m._uU(48," Download IIS"),m.qZA(),m.TgZ(49,"a",19),m._uU(50," Download LocalAPI"),m.qZA(),m.TgZ(51,"a",20),m._uU(52," Download WPF"),m.qZA(),m.TgZ(53,"a",21),m._uU(54," Store"),m.qZA(),m.qZA(),m.TgZ(55,"button",22),m.TgZ(56,"mat-icon"),m._uU(57," source "),m.qZA(),m.qZA(),m.TgZ(58,"mat-menu",null,23),m.TgZ(60,"a",24),m.TgZ(61,"mat-icon"),m._uU(62," star "),m.qZA(),m._uU(63,"Studio "),m.qZA(),m.TgZ(64,"a",24),m.TgZ(65,"mat-icon"),m._uU(66," star_half "),m.qZA(),m._uU(67,"Single "),m.qZA(),m.TgZ(68,"a",4),m.TgZ(69,"mat-icon"),m._uU(70," source "),m.qZA(),m._uU(71," Github"),m.qZA(),m._UZ(72,"mat-divider"),m.TgZ(73,"a",5),m.TgZ(74,"mat-icon"),m._uU(75," https "),m.qZA(),m._uU(76," Demo online"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(77,"div",25),m._UZ(78,"router-outlet"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(79,"footer"),m.TgZ(80,"small"),m._uU(81),m.qZA(),m.TgZ(82,"small"),m._uU(83),m.qZA(),m.qZA()),2&v){const q=m.MAs(39),Ne=m.MAs(59);m.xp6(1),m.Q6J("mode",m.lcZ(4,19,O.isHandset$)?"over":"side")("opened",!1===m.lcZ(5,21,O.isHandset$)),m.uIk("role",m.lcZ(3,17,O.isHandset$)?"dialog":"navigation"),m.xp6(22),m.hij(" Demos ",O.demoBlocks.length," "),m.xp6(1),m.Q6J("ngForOf",O.demoBlocks),m.xp6(3),m.Q6J("ngIf",m.lcZ(28,23,O.isHandset$)),m.xp6(2),m.s9C("title",O.version),m.xp6(1),m.Oqu(O.title),m.xp6(5),m.Q6J("matMenuTriggerFor",q),m.xp6(5),m.Q6J("ngIf",O.version!=O.latestVersion),m.xp6(15),m.Q6J("matMenuTriggerFor",Ne),m.xp6(5),m.Q6J("routerLink",m.DdM(25,_a)),m.xp6(4),m.Q6J("routerLink",m.DdM(26,qs)),m.xp6(17),m.Oqu(O.footer),m.xp6(2),m.lnq("",O.standalone?"standalone":"browser"," ",O.version," -> ",O.latestVersion,"")}},directives:[Ji,mi,_i,Gn,e.yS,Lr,d.Hw,nr.d,Do,Ka,qo,D.sg,pn,D.O5,a.lW,Bs.p6,Bs.VK,e.lC],pipes:[D.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),k})(),jr=(()=>{class k{constructor(v,O){var q,Ne;this.titleService=v,this.title="AutoBlocklyApp",console.log(null===(q=O.settings)||void 0===q?void 0:q.title),this.titleService.setTitle((null===(Ne=O.settings)||void 0===Ne?void 0:Ne.title)||"")}}return k.\u0275fac=function(v){return new(v||k)(m.Y36(E.Dx),m.Y36($e.d))},k.\u0275cmp=m.Xpm({type:k,selectors:[["app-root"]],decls:1,vars:0,template:function(v,O){1&v&&m._UZ(0,"app-primary-navig")},directives:[Io],styles:[""]}),k})();var ao=g(40520),yo=g(91079);let Oo=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Je.rt,Oe.BQ],Oe.BQ]}),k})();var Eo=g(91314);let zr=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Eo.U8,Oe.BQ,Zn.eL],Oe.BQ]}),k})(),Ft=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.BQ,Oe.si],Oe.BQ]}),k})(),fe=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.BQ],Oe.BQ]}),k})();var Qe=g(17144);let Yr=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({}),k})(),oo=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.si,Oe.BQ,Qe.Q8,Yr],Oe.BQ,Yr]}),k})();var ko=g(67322);const xn=new m.OlP("mat-chips-default-options");let To=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[Oe.rD,{provide:xn,useValue:{separatorKeyCodes:[dt.K5]}}],imports:[[Oe.BQ]]}),k})(),ia=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[_t.vT]]}),k})(),te=(()=>{class k{constructor(){this.changes=new ne.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const De={provide:te,deps:[[new m.FiY,new m.tp0,te]],useFactory:function(k){return k||new te}};let ya=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[De,Oe.rD],imports:[[Oe.BQ,D.ez,Zn.eL,a.ot,ia,d.Ps,Oe.si],Oe.BQ]}),k})();var Vo=g(77531);let Ir=(()=>{class k{constructor(){this.changes=new ne.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(v,O){return`${v} \u2013 ${O}`}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Tc={provide:new m.OlP("mat-datepicker-scroll-strategy"),deps:[Eo.aV],useFactory:function(k){return()=>k.scrollStrategies.reposition()}};let Dc=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[Ir,Tc],imports:[[D.ez,a.ot,Eo.U8,Je.rt,Zn.eL,Oe.BQ],ht.ZD]}),k})();var wa=g(48966),so=g(43954);const as={provide:new m.OlP("mat-select-scroll-strategy"),deps:[Eo.aV],useFactory:function(k){return()=>k.scrollStrategies.reposition()}};let hi=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[as],imports:[[D.ez,Eo.U8,Oe.Ng,Oe.BQ],ht.ZD,ko.lN,Oe.Ng,Oe.BQ]}),k})();const Mo={provide:new m.OlP("mat-tooltip-scroll-strategy"),deps:[Eo.aV],useFactory:function(k){return()=>k.scrollStrategies.reposition({scrollThrottle:20})}};let hs=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[Mo],imports:[[Je.rt,D.ez,Eo.U8,Oe.BQ],Oe.BQ,ht.ZD]}),k})(),Rc=(()=>{class k{constructor(){this.changes=new ne.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(v,O,q)=>{if(0==q||0==O)return`0 of ${q}`;const Ne=v*O;return`${Ne+1} \u2013 ${Ne<(q=Math.max(q,0))?Math.min(Ne+O,q):Ne+O} of ${q}`}}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Iu={provide:Rc,deps:[[new m.FiY,new m.tp0,Rc]],useFactory:function(k){return k||new Rc}};let Xc=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[Iu],imports:[[D.ez,a.ot,hi,hs,Oe.BQ]]}),k})(),Ku=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[D.ez,Oe.BQ],Oe.BQ]}),k})();var hd=g(20773);let du=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Oe.si,Oe.BQ],Oe.BQ]}),k})(),Zl=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[D.ez,Oe.BQ],Oe.BQ]}),k})(),h=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({}),k})(),y=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[h,Oe.si,Oe.BQ,Qe.Q8],h,Oe.BQ]}),k})();var x=g(57261);let fi=(()=>{class k{constructor(){this.changes=new ne.x}}return k.\u0275fac=function(v){return new(v||k)},k.\u0275prov=m.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Pi={provide:fi,deps:[[new m.FiY,new m.tp0,fi]],useFactory:function(k){return k||new fi}};let Jn=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({providers:[Pi],imports:[[D.ez,Oe.BQ]]}),k})();g(32076),g(61135),g(68306),g(30576),g(39646);let Kd=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[ht.Cl]]}),k})(),Bp=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Kd,Oe.BQ],Oe.BQ]}),k})(),Vu=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({}),k})(),bh=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k}),k.\u0275inj=m.cJS({imports:[[Vu,Oe.BQ],Oe.BQ]}),k})();var cp=g(33);class Lh extends e.sz{parse(U){return super.parse(U.toLowerCase())}}let Ph=(()=>{class k{}return k.\u0275fac=function(v){return new(v||k)},k.\u0275mod=m.oAB({type:k,bootstrap:[jr]}),k.\u0275inj=m.cJS({providers:[$e.d,ue.v,{provide:m.ip1,useFactory:yh,deps:[$e.d],multi:!0},{provide:e.Hx,useClass:Lh}],imports:[[E.b2,cp.k,We,t.u5,t.UX,Tt.PW,Zl,a.ot,ao.JF,yo.Bb,Oo,zr,a.ot,Ft,fe,oo,To,ya,Dc,wa.Is,nr.t,vl,so.N6,d.Ps,Vo.c,Vi,Bs.Tx,Oe.XK,Xc,Ku,hd.Cq,du,Oe.si,hi,wt,Zl,y,x.ZX,Jn,Bp,C.Nh,Jt,hs,bh,Jt,a.ot,wt,d.Ps,Vi]]}),k})();function yh(k){return()=>k.Init()}(0,m.G48)(),E.q6().bootstrapModule(Ph).catch(k=>console.error(k))},51707:(V,Z,g)=>{"use strict";g.d(Z,{L:()=>t});var E=g(15861),m=g(76279);class t{constructor(n){this.swaggerUrl=n,this.GenerateBlocks=[],this.GenerateFunctions=[],this.fieldXMLObjects=[],this.fieldXMLFunctions=[],this.hasError=!0,this.paths=[],this.name="",this.operations=[],this.basePath="",this.tagsSwagger=[],this.openApiDocument=null,this.cacheCategSwaggerFromPaths=[]}ParseSwagger(){var n=this;return(0,E.Z)(function*(){var a,d=n;d.fieldXMLObjects.push(`<label text="${d.swaggerUrl}"></label>`),d.fieldXMLFunctions.push({id:"",gui:`<label text="${d.swaggerUrl}"></label>`,methodAPI:null});var C=null;try{var D=yield g(10695).default(n.swaggerUrl);C=D.spec}catch(oe){return console.error(`parseSwagger ${n.swaggerUrl}`,oe),d.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=C.basePath||"",0==n.basePath.length&&C.servers&&C.servers.length>0&&(n.basePath=C.servers[0].url);var B=null===(a=C.components)||void 0===a?void 0:a.schemas;return(null==B||null==B)&&(B=C.definitions),B?Object.keys(B).sort().forEach(function(oe){var be=B[oe],se=d.findProperties(be),Ie=`<block type="${oe}">`;se.forEach(function(Ge){if(Ge.value&&Ge.value.type){var _e=d.GenerateShadowField(Ge.value.type,Ge.key,null);_e.length>0&&(Ie+=`<value name="val_${Ge.key}">${_e}</value>`)}}),d.fieldXMLObjects.push(Ie+="</block>"),d.GenerateBlocks.push(d.GenerateBlock(be,oe))}):console.log("_A",C),C.paths&&Object.keys(C.paths).forEach(function(oe){var be=C.paths[oe];d.paths.push({id:oe,nrOps:Object.keys(be).length}),Object.keys(be).forEach(function(se){d.GenerateFunctions.push(d.GenerateFunction(be,oe,be[se],se))})}),d.openApiDocument=C,d})()}categSwagger(){var n=this.findHostNameRegular();(n=n.split(".").join("")).length>5&&n.substring(0,5);var C=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+C+'"></category><category name="AllApi" custom="AllApi_'+C+'"></category>'}GenerateBlock(n,a){var d=this,C=a,B=d.findProperties(n);return function(z,oe,be){m.getMainWorkspace()||(console.log("fix for #38 set mainWorkspace"),m.mainWorkspace=be,console.log("fix for #38  after focus",m.getMainWorkspace())),z[C]={init:function(){var se=!1,Ie=[];n.enum&&(se=!0,Ie=Object.keys(n.enum).map(n["x-enumNames"]?Le=>[n["x-enumNames"][Le],Le]:Le=>[n.enum[Le],Le]));var _e=this.appendDummyInput().appendField(a);se?(Ie=Ie.map(Le=>{var We,$e;return[null===(We=Le[0])||void 0===We?void 0:We.toString(),null===($e=Le[1])||void 0===$e?void 0:$e.toString()]}),_e.appendField(new m.FieldDropdown(Ie),`val_${a}`)):B.forEach(Le=>{var We,$e=Le.key;if(Le.value.nullable&&0==Le.value.nullable&&($e+="*"),null===(We=Le.value)||void 0===We?void 0:We.type){var Te=Le.value.type||"";if("object"==Te){var ye=Le.value.$$ref||"";ye.length>0&&(Te=ye.substring(ye.lastIndexOf("/")+1))}$e+=":"+Te}Le.value.$ref&&($e+="->"+Le.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${Le.key}`).appendField(`${$e}`)}),this.setOutput(!0,C)}},oe[C]=function(se){{var Ie=!1;n.enum&&(Ie=!0);var Ge=d.findProperties(n);const $e=99,Te=0;var _e="",Le=[];return Ge.forEach(ye=>{let ne=oe.valueToCode(se,`val_${ye.key}`,Te);""===ne&&(ne="null"),null==ne&&(ne="null"),Le.push(`"${ye.key}":${ne}`)}),_e="{ "+Le.join(",")+" }",Ie&&(_e=se.getFieldValue(`val_${a}`)),[_e,$e]}}}}findRootSite(){var n,a,d="";if((null===(a=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===a?void 0:a.length)>0){var C=this.openApiDocument.host;if(Array.isArray(C))d=this.openApiDocument.schemes[0]+"://"+C[0];else if(Array.isArray(this.openApiDocument.schemes))d=this.openApiDocument.schemes[0]+"://"+C;else try{const z=new URL(this.swaggerUrl);d=z.protocol+"//"+z.host}catch(z){d="/"}}else d=this.swaggerUrl;var D="";if(d.startsWith("http://")||d.startsWith("https://")){var B=new URL(d);D=B.protocol+"//"+B.hostname,B.port.length>0&&(D+=":"+B.port)}return D}GenerateShadowField(n,a,d){switch(n){case"integer":case"number":return`<block type='math_number'><field name='NUM'>${d||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${d||`please enter ${a}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${d||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateNameFunction(n,a,d,C){return C+"_"+a.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateFunction(n,a,d,C){var D=this,B=D.GenerateNameFunction(n,a,d,C),oe=d,be=`<block type="text_print"> <value name="TEXT"><block type="${B}">`;oe.parameters&&oe.parameters.forEach(We=>{if(We.type)($e=D.GenerateShadowField(We.type,We.name,null)).length>0&&(be+=`<value name="val_${We.name}">${$e}</value>`);else if(We.schema&&We.schema.type){var $e;($e=D.GenerateShadowField(We.schema.type,We.name,null)).length>0&&(be+=`<value name="val_${We.name}">${$e}</value>`)}});var se="",Ie="";try{var Ge=D.findRootSite();if((Ge||"").length>0){var _e=new URL(Ge);se=_e.hostname,Ie=_e.port}}catch(We){console.log("find root error",We)}var Le=D.GenerateShadowField("string","override_host",se=se||" ");return be+=`<value name="override_Host">${Le}</value>`,Le=D.GenerateShadowField("integer","override_port",Ie=Ie||"0"),be+=`<value name="override_Port">${Le}</value>`,be+="</block></value>",D.fieldXMLFunctions.push({id:a,gui:be+="</block>",methodAPI:C}),function(We,$e){We[B]={init:function(){var Te=C;switch(C.toString().toLowerCase()){case"get":Te="",this.setColour(210);break;case"post":Te="",this.setColour(165);break;case"put":Te="",this.setColour(40);break;case"delete":Te="",this.setColour(10);break;default:console.log(`not found ${C}`),this.setColour(10)}for(var ye=a,ne="",ge=D.findCategSwaggerFromPaths(),ae=0;ae<ge.length;ae++){var He="/"+ge[ae]+"/",Se=a.indexOf(He);if(Se>-1){ne=ge[ae];var Ee=a.substring(Se+He.length);Ee.length<ye.length&&(ye=Ee)}}ne.length>5&&(ne=ne.substring(0,5)+"..."),ye.length>25&&(ye=ye.substring(0,25)+"..."),this.appendDummyInput().appendField(new m.FieldImage(`assets/httpImages/${C}.png`,90,20,C)).appendField(`${ne} ${Te} ${ye}`);var ue=D.findRootSite();if(oe.parameters&&oe.parameters.forEach(ke=>{var dt=ke.name;if(ke.required&&(dt+="*"),ke.type)dt+=":"+ke.type;else if(ke.schema)if(ke.schema.enum&&"$$ref"in ke.schema){var vt=ke.schema.$$ref.split("/");dt+="=>"+vt[vt.length-1]}else if(ke.schema.type)if("object"==ke.schema.type){var lt=ke.schema.$$ref||"";lt.length>0&&(dt+=":"+(lt=lt.substring(lt.lastIndexOf("/")+1)))}else dt+=":"+ke.schema.type;this.appendValueInput(`val_${ke.name}`).appendField(dt)}),oe.requestBody){var ie="";if(oe.requestBody.content){var ht=oe.requestBody.content["application/json"];if(ht&&ht.schema){var Oe=ht.schema.$$ref;Oe&&(ie="=>"+Oe.substring(Oe.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+ie).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${C} ${ue}${a}`),this.setOutput(!0,"")}},$e[B]=function(Te){var ae=D.openApiDocument.paths[a][C],He=[];"parameters"in ae&&(He=ae.parameters);var Se=!1,Ee=He.filter(Ct=>"body"==Ct.in).length>0;(Ee||"requestBody"in ae)&&(Se=!0);var ue={},ie={};Se&&(ue.val_values=$e.valueToCode(Te,"val_values",0),ie.val_values=ue.val_values),He.forEach(Ct=>{ue[`val_${Ct.name}`]=$e.valueToCode(Te,`val_${Ct.name}`,0)});var ht=He.map(Ct=>Ct.name);Se&&!Ee&&ht.push("values"),ht.push("extraData"),He.map(Ct=>`\${obj['val_${Ct.name}']},`);var ke="function(";ke+=ht.join(","),ke+="){\n",ke+='var rootSite="'+D.findRootSite()+'";\n',ke+="if(extraData){\n",ke+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",ke+="rootSite =  changeHost(rootSite, extraData.url.host);\n",ke+="};\n",ke+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",ke+="rootSite  =changePort(rootSite , extraData.url.port);\n",ke+="};\n",ke+="};\n";var dt=D.basePath+a;dt.startsWith("//")&&(dt=dt.replace("//","/")),ke+='var strUrl =rootSite +"'+dt+'";\n';var vt=He.filter(Ct=>"query"==Ct.in);if(vt.length>0){ke+='strUrl+="?";\n;';var lt=vt.map(Ct=>`${Ct.name}={`+Ct.name+"}").join("&");ke+='strUrl += "'+lt+'";\n;'}var Bt=He.filter(Ct=>"path"==Ct.in||"query"==Ct.in).map(Ct=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${Ct.name}}",${Ct.name});\n          {\n            var replaceFInd = "{${Ct.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${Ct.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(ke+=Bt.join("\n"),ke+=`\n{var res= ${C}Xhr(strUrl`,Se){var Pt="values";Ee&&(Pt=He.filter(Ct=>"body"==Ct.in)[0].name),ke+=`,JSON.stringify(${Pt})`}ke+=");\n",ke+="var resJS=JSON.parse(res);\n",ke+="if(resJS.statusOK) return resJS.text;\n",ke+="errHandler(res);\n}\n",ke+="}",ke+="(",He.forEach(Ct=>{ke+=ue[`val_${Ct.name}`]+","}),Se&&!Ee&&(ke+=ie.val_values+",");var Zt="url:{notImportant:1",Di=$e.valueToCode(Te,"override_Host",0);(Di=Di||"").length>0&&(Zt+=`,host:${Di}`);var ii=$e.valueToCode(Te,"override_Port",0);return(ii=ii||"").length>0&&(Zt+=`,port:${ii}`),ke+=`{${Zt+="}"}}\n`,[ke+=")",99]}}}findProperties(n){var a=[];return n.properties&&Object.keys(n.properties).forEach(d=>{a.push({key:d,value:n.properties[d]})}),a}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}findHostNameRegular(){var n,a,d,C="";if((null===(a=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===a?void 0:a.length)>0){var D=this.openApiDocument.host;if(Array.isArray(D))C=this.openApiDocument.schemes[0]+"://"+D[0];else if(Array.isArray(this.openApiDocument.schemes))C=this.openApiDocument.schemes[0]+"://"+D;else try{const be=new URL(this.swaggerUrl);C=be.protocol+"//"+be.host}catch(be){C="/"}}else C=this.swaggerUrl;var B="(localSite)";if(C.startsWith("http://")||C.startsWith("https://")){var z=new URL(C),oe=null!==(d=z.port)&&void 0!==d?d:80;B=z.hostname+oe}return B.split(".").join("")}metaBlocks(){var n=this;return function(a,d){var C;a[C=`meta_swagger_controllers_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},d[C]=function(D){var z=n.findCategSwaggerFromPaths().map(se=>({name:se}));return[JSON.stringify({name:n.name,categories:z}),d.ORDER_NONE]},a[C=`meta_swagger_controllers_actions_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},d[C]=function(D){var z=n.findCategSwaggerFromPaths().map(se=>({name:se,ops:n.findfieldXMLFunctions(se).filter(Ie=>Ie.id.length>0)}));return[JSON.stringify({name:n.name,categories:z}),d.ORDER_NONE]}}}findCategsFromTags(){var n=this.openApiDocument.paths;console.log("x",this.openApiDocument);var a=Object.keys(n),d=this;a.forEach(function(C){var D=n[C];D&&Object.keys(D).forEach(function(z){var oe=D[z].tags;oe&&oe.length>0&&oe.forEach(function(be){d.cacheCategSwaggerFromPaths.includes(be)||d.cacheCategSwaggerFromPaths.push(be),d.operations.push({controller:be,id:C})})})})}findCategSwaggerFromPaths(){if(this.findCategsFromTags(),this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var n=this.paths.filter(d=>d&&d.id&&d.id.length>0).map(d=>{for(var C=d.id.length,D=d.id.indexOf("{");D>0;){var B=d.id.indexOf("}",D);if(C-B<2){d.id=d.id.substring(0,D);break}D=d.id.indexOf("{",B)}return d}).map(d=>(d.id.lastIndexOf("/")!=d.id.length-1&&(d.id+="/"),d));this.operations=n.filter(d=>d.nrOps>1).map(d=>({arr:d.id.split("/").filter(D=>D.length>0),id:d.id})).map(d=>({controller:d.arr[d.arr.length-1],id:d.id}));var a=n.filter(d=>1==d.nrOps).map(d=>({arr:d.id.split("/").filter(C=>C.length>0),id:d.id})).map(d=>1==d.arr.length?{controller:d.arr[0],id:d.id}:{controller:d.arr[d.arr.length-2],id:d.id});return this.operations.push(...a),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(d=>d.controller))],this.cacheCategSwaggerFromPaths}findfieldXMLFunctions(n){var a=this.operations.filter(C=>C.controller==n);return this.fieldXMLFunctions.filter(C=>{if(""==C.id)return!0;var D=C.id+"/",B=!1;return a.forEach(z=>{D.startsWith(z.id)&&(B=!0)}),!!B||(a.forEach(z=>{var oe=z.id.substring(0,z.id.lastIndexOf("/"))+"{";D.startsWith(oe)&&(B=!0)}),B)})}}},95240:(V,Z,g)=>{"use strict";g.d(Z,{d:()=>ne});var E=g(68306),m=g(38421);const{isArray:t}=Array;var n=g(60515),a=g(25403),d=g(63269);var D=g(39646),B=g(4128),z=g(32076),oe=g(91005),be=g(18505),se=g(63900),Ie=g(70262),Ge=g(54004),_e=g(5533),Le=g(51707);class We{constructor(ae,He){this.urL=ae,this.http=He,this.WasAlive=!1}download(){window.location.href="https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip"}IsAlive(){this.WasAlive=!1;var ae=this,He=(new Date).toISOString();return this.http.get(this.urL+`api/v1/Management/CurrentDate?${He}`,{responseType:"text"}).pipe((0,Ie.K)(Se=>(0,D.of)("")),(0,Ge.U)(Se=>(null==Se?void 0:Se.length)>0&&(Date.parse(Se),ae.WasAlive=!0,!0)))}LoadBlockContent(ae){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocksContent",{id:ae},{responseType:"text"}).pipe((0,Ge.U)(Se=>null==Se?void 0:Se.toString()))}LoadBlocks(){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocks",null).pipe((0,Ge.U)(He=>He.map(Ee=>{var ue=new _e.q(Ee);return ue.Source="LocalAPI",ue})))}SaveBlock(ae,He){return this.http.post(this.urL+"api/v1/BASave/SaveNewBlock",{b:ae,content:He},{responseType:"text"}).pipe((0,Ge.U)(Se=>Number.parseInt(null==Se?void 0:Se.toString(),10)))}}var $e=g(5e3),Te=g(40520),ye=g(5137);let ne=(()=>{class ge{constructor(He,Se){this.http=He,this.loadShowUsageService=Se,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.LocalAPI=null,this.Init()}CreateLocalApis(He,Se){return new We(Se,He)}Init(){return function(...ge){const ae=(0,d.jO)(ge),He=function(ge){return 1===ge.length&&t(ge[0])?ge[0]:ge}(ge);return He.length?new E.y(Se=>{let Ee=He.map(()=>[]),ue=He.map(()=>!1);Se.add(()=>{Ee=ue=null});for(let ie=0;!Se.closed&&ie<He.length;ie++)(0,m.Xf)(He[ie]).subscribe(new a.Q(Se,ht=>{if(Ee[ie].push(ht),Ee.every(Oe=>Oe.length)){const Oe=Ee.map(ke=>ke.shift());Se.next(ae?ae(...Oe):Oe),Ee.some((ke,dt)=>!ke.length&&ue[dt])&&Se.complete()}},()=>{ue[ie]=!0,!Ee[ie].length&&Se.complete()}));return()=>{Ee=ue=null}}):n.E}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories(),this.getLatestVersion()).pipe((0,oe.g)(1e3),(0,be.b)(([He,Se,Ee,ue,ie])=>{this.settings=He,this.settings.latestVersion=ie,this.linksSwagger=Se,this.demoBlocks=Ee.map(ht=>{var Oe=new _e.q(ht);return Oe.Source="Demos",Oe}),this.customCategories=ue,this.LocalAPI=this.CreateLocalApis(this.http,this.settings.localAPI),this.LocalAPI.IsAlive().subscribe(ht=>{console.log("LocalAPI is alive",ht)})}),(0,se.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,se.w)(()=>(0,D.of)("")))}obtainSwaggers(He){var Se=He.map(ue=>this.LoadSwaggersFromUrl(ue));return(0,B.D)(Se)}LoadSwaggersFromUrl(He){var Se=He.link,Ee=He.id||He.link,ue=new Le.L(Se);return(0,z.D)(ue.ParseSwagger()).pipe((0,be.b)(ht=>{console.log("swagger loaded:"+Se,ht),ht.name=Ee,this.swaggersDict.set(Se,ht)},ht=>{console.error("swagger error:"+Se,ht)}))}getLatestVersion(){return this.http.get("https://ignatandrei.github.io/BlocklyAutomation/version.txt",{responseType:"text"}).pipe((0,Ie.K)(He=>(console.error("error getting latest version",He),(0,D.of)("vcannot get latest version"))),(0,Ge.U)(He=>He.toString().trim().substr(1)))}getSettings(){var He=(new Date).toISOString();return this.http.get(`assets/settings.json?${He}`,{responseType:"text"}).pipe((0,Ge.U)(Se=>JSON.parse(Se)))}}return ge.\u0275fac=function(He){return new(He||ge)($e.LFG(Te.eN),$e.LFG(ye.F))},ge.\u0275prov=$e.Yz7({token:ge,factory:ge.\u0275fac}),ge})()},5533:(V,Z,g)=>{"use strict";g.d(Z,{q:()=>E});class E{constructor(t={}){this.id="",this.description="",this.categories="",this.blocks="",this.Source="None",Object.assign(this,t)}}},20549:(V,Z,g)=>{"use strict";g.d(Z,{v:()=>t});var E=g(77579),m=g(5e3);let t=(()=>{class e{constructor(){this.sendData=new E.x}receiveData(){return this.sendData.asObservable()}sendDataToServer(a,d){this.sendData.next([a,d])}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac}),e})()},57387:(V,Z,g)=>{"use strict";g.r(Z),g.d(Z,{DisplayBlocklyComponent:()=>bp});var E=g(15861),t=(g(64166),g(76279)),e=g(30069);const n=[t.Events.VIEWPORT_CHANGE,t.Events.BLOCK_MOVE,t.Events.BLOCK_DELETE];class C{constructor(s){this.workspace_=s,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(s){s=Number(s),this.padding_=isNaN(s)?10:s,this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"contentAreaHighlight"},null);const r=String(Math.random()).substring(2),o=t.utils.dom.createSvgElement(new t.utils.Svg("mask"),{id:"contentAreaHighlightMask"+r},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},o),this.rect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH,fill:"black"},o),this.background_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+r+")"},this.svgGroup_),this.applyColor_();const l=this.workspace_.getMetricsManager();this.cachedContentMetrics_=l.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const p=l.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,p),this.svgGroup_.style.transition="opacity 0.25s";const b=this.workspace_.getParentSvg();b.firstChild?b.insertBefore(this.svgGroup_,b.firstChild):b.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&t.unbindEvent_(this.onChangeWrapper_)}onChange_(s){if(s.type===t.Events.THEME_CHANGE)this.applyColor_();else if(-1!==n.indexOf(s.type)){const r=this.workspace_.getMetricsManager();s.type!==t.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=r.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const o=r.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,o)}else s.type===t.Events.BLOCK_DRAG&&this.handleBlockDrag_(s)}handleBlockDrag_(s){this.svgGroup_.setAttribute("opacity",s.isStart?"0":"1")}applyColor_(){const r=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",o=t.utils.colour.blend("#000",r,.1),l=t.utils.colour.blend("#fff",r,.1);this.background_.setAttribute("fill","#ffffff"===r||"#fff"===r?o:l)}resize_(s){const r=s.width?s.width+2*this.padding_:0,o=s.height?s.height+2*this.padding_:0;r!==this.width_&&(this.width_=r,this.rect_.setAttribute("width",r)),o!==this.height_&&(this.height_=o,this.rect_.setAttribute("height",o))}position_(s,r){const p=this.workspace_.scale,b=r.top+s.top*p- -this.workspace_.scrollY-this.padding_*p,S=r.left+s.left*p- -this.workspace_.scrollX-this.padding_*p;(b!==this.top_||S!==this.left_||this.lastScale_!==p)&&(this.top_=b,this.left_=S,this.lastScale_=p,this.rect_.setAttribute("transform","translate("+S+","+b+") scale("+p+")"))}}var D=g(5533),B=g(51707),z=g(70697);const be="undefined"==typeof window?function(f){return f()}:window.requestAnimationFrame;function se(f,s,r){const o=r||(b=>Array.prototype.slice.call(b));let l=!1,p=[];return function(...b){p=o(b),l||(l=!0,be.call(window,()=>{l=!1,f.apply(s,p)}))}}const Ge=f=>"start"===f?"left":"end"===f?"right":"center",_e=(f,s,r)=>"start"===f?s:"end"===f?r:(s+r)/2;function We(){}const $e=function(){let f=0;return function(){return f++}}();function Te(f){return null==f}function ye(f){if(Array.isArray&&Array.isArray(f))return!0;const s=Object.prototype.toString.call(f);return"[object"===s.substr(0,7)&&"Array]"===s.substr(-6)}function ne(f){return null!==f&&"[object Object]"===Object.prototype.toString.call(f)}const ge=f=>("number"==typeof f||f instanceof Number)&&isFinite(+f);function ae(f,s){return ge(f)?f:s}function He(f,s){return void 0===f?s:f}const Ee=(f,s)=>"string"==typeof f&&f.endsWith("%")?parseFloat(f)/100*s:+f;function ue(f,s,r){if(f&&"function"==typeof f.call)return f.apply(r,s)}function ie(f,s,r,o){let l,p,b;if(ye(f))if(p=f.length,o)for(l=p-1;l>=0;l--)s.call(r,f[l],l);else for(l=0;l<p;l++)s.call(r,f[l],l);else if(ne(f))for(b=Object.keys(f),p=b.length,l=0;l<p;l++)s.call(r,f[b[l]],b[l])}function ht(f,s){let r,o,l,p;if(!f||!s||f.length!==s.length)return!1;for(r=0,o=f.length;r<o;++r)if(l=f[r],p=s[r],l.datasetIndex!==p.datasetIndex||l.index!==p.index)return!1;return!0}function Oe(f){if(ye(f))return f.map(Oe);if(ne(f)){const s=Object.create(null),r=Object.keys(f),o=r.length;let l=0;for(;l<o;++l)s[r[l]]=Oe(f[r[l]]);return s}return f}function ke(f){return-1===["__proto__","prototype","constructor"].indexOf(f)}function dt(f,s,r,o){if(!ke(f))return;const l=s[f],p=r[f];ne(l)&&ne(p)?vt(l,p,o):s[f]=Oe(p)}function vt(f,s,r){const o=ye(s)?s:[s],l=o.length;if(!ne(f))return f;const p=(r=r||{}).merger||dt;for(let b=0;b<l;++b){if(!ne(s=o[b]))continue;const S=Object.keys(s);for(let I=0,N=S.length;I<N;++I)p(S[I],f,s,r)}return f}function lt(f,s){return vt(f,s,{merger:Bt})}function Bt(f,s,r){if(!ke(f))return;const o=s[f],l=r[f];ne(o)&&ne(l)?lt(o,l):Object.prototype.hasOwnProperty.call(s,f)||(s[f]=Oe(l))}function ii(f,s){const r=f.indexOf(".",s);return-1===r?f.length:r}function Ct(f,s){if(""===s)return f;let r=0,o=ii(s,r);for(;f&&o>r;)f=f[s.substr(r,o-r)],r=o+1,o=ii(s,r);return f}function gi(f){return f.charAt(0).toUpperCase()+f.slice(1)}const Be=f=>void 0!==f,Tt=f=>"function"==typeof f,Je=(f,s)=>{if(f.size!==s.size)return!1;for(const r of f)if(!s.has(r))return!1;return!0},xe=Math.PI,pt=2*xe,jt=pt+xe,di=Number.POSITIVE_INFINITY,Rt=xe/180,et=xe/2,tt=xe/4,Lt=2*xe/3,nt=Math.log10,mt=Math.sign;function yt(f){const s=Math.round(f);f=ei(f,s,f/1e3)?s:f;const r=Math.pow(10,Math.floor(nt(f))),o=f/r;return(o<=1?1:o<=2?2:o<=5?5:10)*r}function ut(f){return!isNaN(parseFloat(f))&&isFinite(f)}function ei(f,s,r){return Math.abs(f-s)<r}function Ni(f,s,r){let o,l,p;for(o=0,l=f.length;o<l;o++)p=f[o][r],isNaN(p)||(s.min=Math.min(s.min,p),s.max=Math.max(s.max,p))}function wi(f){return f*(xe/180)}function yi(f){return f*(180/xe)}function pn(f){if(!ge(f))return;let s=1,r=0;for(;Math.round(f*s)/s!==f;)s*=10,r++;return r}function mi(f,s){const r=s.x-f.x,o=s.y-f.y,l=Math.sqrt(r*r+o*o);let p=Math.atan2(o,r);return p<-.5*xe&&(p+=pt),{angle:p,distance:l}}function Ji(f,s){return Math.sqrt(Math.pow(s.x-f.x,2)+Math.pow(s.y-f.y,2))}function wt(f,s){return(f-s+jt)%pt-xe}function Ot(f){return(f%pt+pt)%pt}function Ci(f,s,r,o){const l=Ot(f),p=Ot(s),b=Ot(r),S=Ot(p-l),I=Ot(b-l),N=Ot(l-p),$=Ot(l-b);return l===p||l===b||o&&p===b||S>I&&N<$}function zt(f,s,r){return Math.max(s,Math.min(r,f))}function _i(f,s,r,o=1e-6){return f>=Math.min(s,r)-o&&f<=Math.max(s,r)+o}const Bi=f=>0===f||1===f,Jt=(f,s,r)=>-Math.pow(2,10*(f-=1))*Math.sin((f-s)*pt/r),ft=(f,s,r)=>Math.pow(2,-10*f)*Math.sin((f-s)*pt/r)+1,Ae={linear:f=>f,easeInQuad:f=>f*f,easeOutQuad:f=>-f*(f-2),easeInOutQuad:f=>(f/=.5)<1?.5*f*f:-.5*(--f*(f-2)-1),easeInCubic:f=>f*f*f,easeOutCubic:f=>(f-=1)*f*f+1,easeInOutCubic:f=>(f/=.5)<1?.5*f*f*f:.5*((f-=2)*f*f+2),easeInQuart:f=>f*f*f*f,easeOutQuart:f=>-((f-=1)*f*f*f-1),easeInOutQuart:f=>(f/=.5)<1?.5*f*f*f*f:-.5*((f-=2)*f*f*f-2),easeInQuint:f=>f*f*f*f*f,easeOutQuint:f=>(f-=1)*f*f*f*f+1,easeInOutQuint:f=>(f/=.5)<1?.5*f*f*f*f*f:.5*((f-=2)*f*f*f*f+2),easeInSine:f=>1-Math.cos(f*et),easeOutSine:f=>Math.sin(f*et),easeInOutSine:f=>-.5*(Math.cos(xe*f)-1),easeInExpo:f=>0===f?0:Math.pow(2,10*(f-1)),easeOutExpo:f=>1===f?1:1-Math.pow(2,-10*f),easeInOutExpo:f=>Bi(f)?f:f<.5?.5*Math.pow(2,10*(2*f-1)):.5*(2-Math.pow(2,-10*(2*f-1))),easeInCirc:f=>f>=1?f:-(Math.sqrt(1-f*f)-1),easeOutCirc:f=>Math.sqrt(1-(f-=1)*f),easeInOutCirc:f=>(f/=.5)<1?-.5*(Math.sqrt(1-f*f)-1):.5*(Math.sqrt(1-(f-=2)*f)+1),easeInElastic:f=>Bi(f)?f:Jt(f,.075,.3),easeOutElastic:f=>Bi(f)?f:ft(f,.075,.3),easeInOutElastic(f){const s=.1125;return Bi(f)?f:f<.5?.5*Jt(2*f,s,.45):.5+.5*ft(2*f-1,s,.45)},easeInBack(f){const s=1.70158;return f*f*((s+1)*f-s)},easeOutBack(f){const s=1.70158;return(f-=1)*f*((s+1)*f+s)+1},easeInOutBack(f){let s=1.70158;return(f/=.5)<1?f*f*((1+(s*=1.525))*f-s)*.5:.5*((f-=2)*f*((1+(s*=1.525))*f+s)+2)},easeInBounce:f=>1-Ae.easeOutBounce(1-f),easeOutBounce(f){const s=7.5625,r=2.75;return f<1/r?s*f*f:f<2/r?s*(f-=1.5/r)*f+.75:f<2.5/r?s*(f-=2.25/r)*f+.9375:s*(f-=2.625/r)*f+.984375},easeInOutBounce:f=>f<.5?.5*Ae.easeInBounce(2*f):.5*Ae.easeOutBounce(2*f-1)+.5},le={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Pe="0123456789ABCDEF",at=f=>Pe[15&f],It=f=>Pe[(240&f)>>4]+Pe[15&f],Gi=f=>(240&f)>>4==(15&f);function li(f){return f+.5|0}const $t=(f,s,r)=>Math.max(Math.min(f,r),s);function kt(f){return $t(li(2.55*f),0,255)}function ui(f){return $t(li(255*f),0,255)}function Oi(f){return $t(li(f/2.55)/100,0,1)}function fn(f){return $t(li(100*f),0,100)}const In=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,eo=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function no(f,s,r){const o=s*Math.min(r,1-r),l=(p,b=(p+f/30)%12)=>r-o*Math.max(Math.min(b-3,9-b,1),-1);return[l(0),l(8),l(4)]}function mo(f,s,r){const o=(l,p=(l+f/60)%6)=>r-r*s*Math.max(Math.min(p,4-p,1),0);return[o(5),o(3),o(1)]}function Lr(f,s,r){const o=no(f,1,.5);let l;for(s+r>1&&(l=1/(s+r),s*=l,r*=l),l=0;l<3;l++)o[l]*=1-s-r,o[l]+=s;return o}function pr(f){const r=f.r/255,o=f.g/255,l=f.b/255,p=Math.max(r,o,l),b=Math.min(r,o,l),S=(p+b)/2;let I,N,$;return p!==b&&($=p-b,N=S>.5?$/(2-p-b):$/(p+b),I=p===r?(o-l)/$+(o<l?6:0):p===o?(l-r)/$+2:(r-o)/$+4,I=60*I+.5),[0|I,N||0,S]}function Ro(f,s,r,o){return(Array.isArray(s)?f(s[0],s[1],s[2]):f(s,r,o)).map(ui)}function cr(f,s,r){return Ro(no,f,s,r)}function vr(f){return(f%360+360)%360}const Qr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Dn;function ot(f,s,r){if(f){let o=pr(f);o[s]=Math.max(0,Math.min(o[s]+o[s]*r,0===s?360:1)),o=cr(o),f.r=o[0],f.g=o[1],f.b=o[2]}}function Ht(f,s){return f&&Object.assign(s||{},f)}function Ai(f){var s={r:0,g:0,b:0,a:255};return Array.isArray(f)?f.length>=3&&(s={r:f[0],g:f[1],b:f[2],a:255},f.length>3&&(s.a=ui(f[3]))):(s=Ht(f,{r:0,g:0,b:0,a:1})).a=ui(s.a),s}function Ki(f){return"r"===f.charAt(0)?function(f){const s=In.exec(f);let o,l,p,r=255;if(s){if(s[7]!==o){const b=+s[7];r=255&(s[8]?kt(b):255*b)}return o=+s[1],l=+s[3],p=+s[5],o=255&(s[2]?kt(o):o),l=255&(s[4]?kt(l):l),p=255&(s[6]?kt(p):p),{r:o,g:l,b:p,a:r}}}(f):function(f){const s=eo.exec(f);let o,r=255;if(!s)return;s[5]!==o&&(r=s[6]?kt(+s[5]):ui(+s[5]));const l=vr(+s[2]),p=+s[3]/100,b=+s[4]/100;return o="hwb"===s[1]?function(f,s,r){return Ro(Lr,f,s,r)}(l,p,b):"hsv"===s[1]?function(f,s,r){return Ro(mo,f,s,r)}(l,p,b):cr(l,p,b),{r:o[0],g:o[1],b:o[2],a:r}}(f)}class zi{constructor(s){if(s instanceof zi)return s;const r=typeof s;let o;"object"===r?o=Ai(s):"string"===r&&(o=function(f){var r,s=f.length;return"#"===f[0]&&(4===s||5===s?r={r:255&17*le[f[1]],g:255&17*le[f[2]],b:255&17*le[f[3]],a:5===s?17*le[f[4]]:255}:(7===s||9===s)&&(r={r:le[f[1]]<<4|le[f[2]],g:le[f[3]]<<4|le[f[4]],b:le[f[5]]<<4|le[f[6]],a:9===s?le[f[7]]<<4|le[f[8]]:255})),r}(s)||function(f){Dn||(Dn=function(){const f={},s=Object.keys(Rr),r=Object.keys(Qr);let o,l,p,b,S;for(o=0;o<s.length;o++){for(b=S=s[o],l=0;l<r.length;l++)p=r[l],S=S.replace(p,Qr[p]);p=parseInt(Rr[b],16),f[S]=[p>>16&255,p>>8&255,255&p]}return f}(),Dn.transparent=[0,0,0,0]);const s=Dn[f.toLowerCase()];return s&&{r:s[0],g:s[1],b:s[2],a:4===s.length?s[3]:255}}(s)||Ki(s)),this._rgb=o,this._valid=!!o}get valid(){return this._valid}get rgb(){var s=Ht(this._rgb);return s&&(s.a=Oi(s.a)),s}set rgb(s){this._rgb=Ai(s)}rgbString(){return this._valid?(f=this._rgb)&&(f.a<255?`rgba(${f.r}, ${f.g}, ${f.b}, ${Oi(f.a)})`:`rgb(${f.r}, ${f.g}, ${f.b})`):this._rgb;var f}hexString(){return this._valid?(s=function(f){return Gi(f.r)&&Gi(f.g)&&Gi(f.b)&&Gi(f.a)}(f=this._rgb)?at:It,f&&"#"+s(f.r)+s(f.g)+s(f.b)+(f.a<255?s(f.a):"")):this._rgb;var f,s}hslString(){return this._valid?function(f){if(!f)return;const s=pr(f),r=s[0],o=fn(s[1]),l=fn(s[2]);return f.a<255?`hsla(${r}, ${o}%, ${l}%, ${Oi(f.a)})`:`hsl(${r}, ${o}%, ${l}%)`}(this._rgb):this._rgb}mix(s,r){const o=this;if(s){const l=o.rgb,p=s.rgb;let b;const S=r===b?.5:r,I=2*S-1,N=l.a-p.a,$=((I*N==-1?I:(I+N)/(1+I*N))+1)/2;b=1-$,l.r=255&$*l.r+b*p.r+.5,l.g=255&$*l.g+b*p.g+.5,l.b=255&$*l.b+b*p.b+.5,l.a=S*l.a+(1-S)*p.a,o.rgb=l}return o}clone(){return new zi(this.rgb)}alpha(s){return this._rgb.a=ui(s),this}clearer(s){return this._rgb.a*=1-s,this}greyscale(){const s=this._rgb,r=li(.3*s.r+.59*s.g+.11*s.b);return s.r=s.g=s.b=r,this}opaquer(s){return this._rgb.a*=1+s,this}negate(){const s=this._rgb;return s.r=255-s.r,s.g=255-s.g,s.b=255-s.b,this}lighten(s){return ot(this._rgb,2,s),this}darken(s){return ot(this._rgb,2,-s),this}saturate(s){return ot(this._rgb,1,s),this}desaturate(s){return ot(this._rgb,1,-s),this}rotate(s){return function(f,s){var r=pr(f);r[0]=vr(r[0]+s),r=cr(r),f.r=r[0],f.g=r[1],f.b=r[2]}(this._rgb,s),this}}function Zn(f){return new zi(f)}const Yn=f=>f instanceof CanvasGradient||f instanceof CanvasPattern;function sr(f){return Yn(f)?f:Zn(f)}function Bn(f){return Yn(f)?f:Zn(f).saturate(.5).darken(.1).hexString()}const Ao=Object.create(null),Yo=Object.create(null);function ro(f,s){if(!s)return f;const r=s.split(".");for(let o=0,l=r.length;o<l;++o){const p=r[o];f=f[p]||(f[p]=Object.create(null))}return f}function _o(f,s,r){return"string"==typeof s?vt(ro(f,s),r):vt(ro(f,""),s)}var dr=new class{constructor(s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,o)=>Bn(o.backgroundColor),this.hoverBorderColor=(r,o)=>Bn(o.borderColor),this.hoverColor=(r,o)=>Bn(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(s)}set(s,r){return _o(this,s,r)}get(s){return ro(this,s)}describe(s,r){return _o(Yo,s,r)}override(s,r){return _o(Ao,s,r)}route(s,r,o,l){const p=ro(this,s),b=ro(this,o),S="_"+r;Object.defineProperties(p,{[S]:{value:p[r],writable:!0},[r]:{enumerable:!0,get(){const I=this[S],N=b[l];return ne(I)?Object.assign({},N,I):He(I,N)},set(I){this[S]=I}}})}}({_scriptable:f=>!f.startsWith("on"),_indexable:f=>"events"!==f,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function $r(f,s,r,o,l){let p=s[l];return p||(p=s[l]=f.measureText(l).width,r.push(l)),p>o&&(o=p),o}function ws(f,s,r,o){let l=(o=o||{}).data=o.data||{},p=o.garbageCollect=o.garbageCollect||[];o.font!==s&&(l=o.data={},p=o.garbageCollect=[],o.font=s),f.save(),f.font=s;let b=0;const S=r.length;let I,N,$,de,Fe;for(I=0;I<S;I++)if(de=r[I],null!=de&&!0!==ye(de))b=$r(f,l,p,b,de);else if(ye(de))for(N=0,$=de.length;N<$;N++)Fe=de[N],null!=Fe&&!ye(Fe)&&(b=$r(f,l,p,b,Fe));f.restore();const qe=p.length/2;if(qe>r.length){for(I=0;I<qe;I++)delete l[p[I]];p.splice(0,qe)}return b}function Ss(f,s,r){const o=f.currentDevicePixelRatio,l=0!==r?Math.max(r/2,.5):0;return Math.round((s-l)*o)/o+l}function Bo(f,s){(s=s||f.getContext("2d")).save(),s.resetTransform(),s.clearRect(0,0,f.width,f.height),s.restore()}function Do(f,s,r,o){let l,p,b,S,I;const N=s.pointStyle,$=s.rotation,de=s.radius;let Fe=($||0)*Rt;if(N&&"object"==typeof N&&(l=N.toString(),"[object HTMLImageElement]"===l||"[object HTMLCanvasElement]"===l))return f.save(),f.translate(r,o),f.rotate(Fe),f.drawImage(N,-N.width/2,-N.height/2,N.width,N.height),void f.restore();if(!(isNaN(de)||de<=0)){switch(f.beginPath(),N){default:f.arc(r,o,de,0,pt),f.closePath();break;case"triangle":f.moveTo(r+Math.sin(Fe)*de,o-Math.cos(Fe)*de),Fe+=Lt,f.lineTo(r+Math.sin(Fe)*de,o-Math.cos(Fe)*de),Fe+=Lt,f.lineTo(r+Math.sin(Fe)*de,o-Math.cos(Fe)*de),f.closePath();break;case"rectRounded":I=.516*de,S=de-I,p=Math.cos(Fe+tt)*S,b=Math.sin(Fe+tt)*S,f.arc(r-p,o-b,I,Fe-xe,Fe-et),f.arc(r+b,o-p,I,Fe-et,Fe),f.arc(r+p,o+b,I,Fe,Fe+et),f.arc(r-b,o+p,I,Fe+et,Fe+xe),f.closePath();break;case"rect":if(!$){S=Math.SQRT1_2*de,f.rect(r-S,o-S,2*S,2*S);break}Fe+=tt;case"rectRot":p=Math.cos(Fe)*de,b=Math.sin(Fe)*de,f.moveTo(r-p,o-b),f.lineTo(r+b,o-p),f.lineTo(r+p,o+b),f.lineTo(r-b,o+p),f.closePath();break;case"crossRot":Fe+=tt;case"cross":p=Math.cos(Fe)*de,b=Math.sin(Fe)*de,f.moveTo(r-p,o-b),f.lineTo(r+p,o+b),f.moveTo(r+b,o-p),f.lineTo(r-b,o+p);break;case"star":p=Math.cos(Fe)*de,b=Math.sin(Fe)*de,f.moveTo(r-p,o-b),f.lineTo(r+p,o+b),f.moveTo(r+b,o-p),f.lineTo(r-b,o+p),Fe+=tt,p=Math.cos(Fe)*de,b=Math.sin(Fe)*de,f.moveTo(r-p,o-b),f.lineTo(r+p,o+b),f.moveTo(r+b,o-p),f.lineTo(r-b,o+p);break;case"line":p=Math.cos(Fe)*de,b=Math.sin(Fe)*de,f.moveTo(r-p,o-b),f.lineTo(r+p,o+b);break;case"dash":f.moveTo(r,o),f.lineTo(r+Math.cos(Fe)*de,o+Math.sin(Fe)*de)}f.fill(),s.borderWidth>0&&f.stroke()}}function rs(f,s,r){return r=r||.5,!s||f&&f.x>s.left-r&&f.x<s.right+r&&f.y>s.top-r&&f.y<s.bottom+r}function Ho(f,s){f.save(),f.beginPath(),f.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),f.clip()}function Xa(f){f.restore()}function Ka(f,s,r,o,l){if(!s)return f.lineTo(r.x,r.y);if("middle"===l){const p=(s.x+r.x)/2;f.lineTo(p,s.y),f.lineTo(p,r.y)}else"after"===l!=!!o?f.lineTo(s.x,r.y):f.lineTo(r.x,s.y);f.lineTo(r.x,r.y)}function $a(f,s,r,o){if(!s)return f.lineTo(r.x,r.y);f.bezierCurveTo(o?s.cp1x:s.cp2x,o?s.cp1y:s.cp2y,o?r.cp2x:r.cp1x,o?r.cp2y:r.cp1y,r.x,r.y)}function qo(f,s,r,o,l,p={}){const b=ye(s)?s:[s],S=p.strokeWidth>0&&""!==p.strokeColor;let I,N;for(f.save(),f.font=l.string,function(f,s){s.translation&&f.translate(s.translation[0],s.translation[1]),Te(s.rotation)||f.rotate(s.rotation),s.color&&(f.fillStyle=s.color),s.textAlign&&(f.textAlign=s.textAlign),s.textBaseline&&(f.textBaseline=s.textBaseline)}(f,p),I=0;I<b.length;++I)N=b[I],S&&(p.strokeColor&&(f.strokeStyle=p.strokeColor),Te(p.strokeWidth)||(f.lineWidth=p.strokeWidth),f.strokeText(N,r,o,p.maxWidth)),f.fillText(N,r,o,p.maxWidth),vl(f,r,o,N,p),o+=l.lineHeight;f.restore()}function vl(f,s,r,o,l){if(l.strikethrough||l.underline){const p=f.measureText(o),b=s-p.actualBoundingBoxLeft,S=s+p.actualBoundingBoxRight,I=r-p.actualBoundingBoxAscent,N=r+p.actualBoundingBoxDescent,$=l.strikethrough?(I+N)/2:N;f.strokeStyle=f.fillStyle,f.beginPath(),f.lineWidth=l.decorationWidth||2,f.moveTo(b,$),f.lineTo(S,$),f.stroke()}}function Bs(f,s){const{x:r,y:o,w:l,h:p,radius:b}=s;f.arc(r+b.topLeft,o+b.topLeft,b.topLeft,-et,xe,!0),f.lineTo(r,o+p-b.bottomLeft),f.arc(r+b.bottomLeft,o+p-b.bottomLeft,b.bottomLeft,xe,et,!0),f.lineTo(r+l-b.bottomRight,o+p),f.arc(r+l-b.bottomRight,o+p-b.bottomRight,b.bottomRight,et,0,!0),f.lineTo(r+l,o+b.topRight),f.arc(r+l-b.topRight,o+b.topRight,b.topRight,0,-et,!0),f.lineTo(r+b.topLeft,o)}const Fa=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Hs=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function fs(f,s){const r=(""+f).match(Fa);if(!r||"normal"===r[1])return 1.2*s;switch(f=+r[2],r[3]){case"px":return f;case"%":f/=100}return s*f}const ll=f=>+f||0;function _a(f,s){const r={},o=ne(s),l=o?Object.keys(s):s,p=ne(f)?o?b=>He(f[b],f[s[b]]):b=>f[b]:()=>f;for(const b of l)r[b]=ll(p(b));return r}function qs(f){return _a(f,{top:"y",right:"x",bottom:"y",left:"x"})}function Io(f){return _a(f,["topLeft","topRight","bottomLeft","bottomRight"])}function jr(f){const s=qs(f);return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function ao(f,s){let r=He((f=f||{}).size,(s=s||dr.font).size);"string"==typeof r&&(r=parseInt(r,10));let o=He(f.style,s.style);o&&!(""+o).match(Hs)&&(console.warn('Invalid font style specified: "'+o+'"'),o="");const l={family:He(f.family,s.family),lineHeight:fs(He(f.lineHeight,s.lineHeight),r),size:r,style:o,weight:He(f.weight,s.weight),string:""};return l.string=function(f){return!f||Te(f.size)||Te(f.family)?null:(f.style?f.style+" ":"")+(f.weight?f.weight+" ":"")+f.size+"px "+f.family}(l),l}function yo(f,s,r,o){let p,b,S,l=!0;for(p=0,b=f.length;p<b;++p)if(S=f[p],void 0!==S&&(void 0!==s&&"function"==typeof S&&(S=S(s),l=!1),void 0!==r&&ye(S)&&(S=S[r%S.length],l=!1),void 0!==S))return o&&!l&&(o.cacheable=!1),S}function Ko(f,s){return Object.assign(Object.create(f),s)}function Ds(f,s,r){r=r||(b=>f[b]<s);let p,o=f.length-1,l=0;for(;o-l>1;)p=l+o>>1,r(p)?l=p:o=p;return{lo:l,hi:o}}const zo=(f,s,r)=>Ds(f,r,o=>f[o][s]<r),Oo=(f,s,r)=>Ds(f,r,o=>f[o][s]>=r),Ms=["push","pop","shift","splice","unshift"];function gs(f,s){const r=f._chartjs;if(!r)return;const o=r.listeners,l=o.indexOf(s);-1!==l&&o.splice(l,1),!(o.length>0)&&(Ms.forEach(p=>{delete f[p]}),delete f._chartjs)}function Pr(f){const s=new Set;let r,o;for(r=0,o=f.length;r<o;++r)s.add(f[r]);return s.size===o?f:Array.from(s)}function la(f,s=[""],r=f,o,l=(()=>f[0])){Be(o)||(o=Ft("_fallback",f));const p={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:f,_rootScopes:r,_fallback:o,_getTarget:l,override:b=>la([b,...f],s,r,o)};return new Proxy(p,{deleteProperty:(b,S)=>(delete b[S],delete b._keys,delete f[0][S],!0),get:(b,S)=>$o(b,S,()=>function(f,s,r,o){let l;for(const p of s)if(l=Ft(bl(p,f),r),Be(l))return us(f,l)?J(r,o,f,l):l}(S,s,f,b)),getOwnPropertyDescriptor:(b,S)=>Reflect.getOwnPropertyDescriptor(b._scopes[0],S),getPrototypeOf:()=>Reflect.getPrototypeOf(f[0]),has:(b,S)=>bi(b).includes(S),ownKeys:b=>bi(b),set(b,S,I){const N=b._storage||(b._storage=l());return b[S]=N[S]=I,delete b._keys,!0}})}function zr(f,s,r,o){const l={_cacheable:!1,_proxy:f,_context:s,_subProxy:r,_stack:new Set,_descriptors:ca(f,o),setContext:p=>zr(f,p,r,o),override:p=>zr(f.override(p),s,r,o)};return new Proxy(l,{deleteProperty:(p,b)=>(delete p[b],delete f[b],!0),get:(p,b,S)=>$o(p,b,()=>function(f,s,r){const{_proxy:o,_context:l,_subProxy:p,_descriptors:b}=f;let S=o[s];return Tt(S)&&b.isScriptable(s)&&(S=function(f,s,r,o){const{_proxy:l,_context:p,_subProxy:b,_stack:S}=r;if(S.has(f))throw new Error("Recursion detected: "+Array.from(S).join("->")+"->"+f);return S.add(f),s=s(p,b||o),S.delete(f),us(f,s)&&(s=J(l._scopes,l,f,s)),s}(s,S,f,r)),ye(S)&&S.length&&(S=function(f,s,r,o){const{_proxy:l,_context:p,_subProxy:b,_descriptors:S}=r;if(Be(p.index)&&o(f))s=s[p.index%s.length];else if(ne(s[0])){const I=s,N=l._scopes.filter($=>$!==I);s=[];for(const $ of I){const de=J(N,l,f,$);s.push(zr(de,p,b&&b[f],S))}}return s}(s,S,f,b.isIndexable)),us(s,S)&&(S=zr(S,l,p&&p[s],b)),S}(p,b,S)),getOwnPropertyDescriptor:(p,b)=>p._descriptors.allKeys?Reflect.has(f,b)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(f,b),getPrototypeOf:()=>Reflect.getPrototypeOf(f),has:(p,b)=>Reflect.has(f,b),ownKeys:()=>Reflect.ownKeys(f),set:(p,b,S)=>(f[b]=S,delete p[b],!0)})}function ca(f,s={scriptable:!0,indexable:!0}){const{_scriptable:r=s.scriptable,_indexable:o=s.indexable,_allKeys:l=s.allKeys}=f;return{allKeys:l,scriptable:r,indexable:o,isScriptable:Tt(r)?r:()=>r,isIndexable:Tt(o)?o:()=>o}}const bl=(f,s)=>f?f+gi(s):s,us=(f,s)=>ne(s)&&"adapters"!==f&&(null===Object.getPrototypeOf(s)||s.constructor===Object);function $o(f,s,r){if(Object.prototype.hasOwnProperty.call(f,s))return f[s];const o=r();return f[s]=o,o}function kn(f,s,r){return Tt(f)?f(s,r):f}const va=(f,s)=>!0===f?s:"string"==typeof f?Ct(s,f):void 0;function Re(f,s,r,o,l){for(const p of s){const b=va(r,p);if(b){f.add(b);const S=kn(b._fallback,r,l);if(Be(S)&&S!==r&&S!==o)return S}else if(!1===b&&Be(o)&&r!==o)return null}return!1}function J(f,s,r,o){const l=s._rootScopes,p=kn(s._fallback,r,o),b=[...f,...l],S=new Set;S.add(o);let I=H(S,b,r,p||r,o);return!(null===I||Be(p)&&p!==r&&(I=H(S,b,p,I,o),null===I))&&la(Array.from(S),[""],l,p,()=>function(f,s,r){const o=f._getTarget();s in o||(o[s]={});const l=o[s];return ye(l)&&ne(r)?r:l}(s,r,o))}function H(f,s,r,o,l){for(;r;)r=Re(f,s,r,o,l);return r}function Ft(f,s){for(const r of s){if(!r)continue;const o=r[f];if(Be(o))return o}}function bi(f){let s=f._keys;return s||(s=f._keys=function(f){const s=new Set;for(const r of f)for(const o of Object.keys(r).filter(l=>!l.startsWith("_")))s.add(o);return Array.from(s)}(f._scopes)),s}const Xn=Number.EPSILON||1e-14,wr=(f,s)=>s<f.length&&!f[s].skip&&f[s],Vr=f=>"x"===f?"y":"x";function Fr(f,s,r,o){const l=f.skip?s:f,p=s,b=r.skip?s:r,S=Ji(p,l),I=Ji(b,p);let N=S/(S+I),$=I/(S+I);N=isNaN(N)?0:N,$=isNaN($)?0:$;const de=o*N,Fe=o*$;return{previous:{x:p.x-de*(b.x-l.x),y:p.y-de*(b.y-l.y)},next:{x:p.x+Fe*(b.x-l.x),y:p.y+Fe*(b.y-l.y)}}}function Vn(f,s,r){return Math.max(Math.min(f,r),s)}function Ba(f,s,r,o,l){let p,b,S,I;if(s.spanGaps&&(f=f.filter(N=>!N.skip)),"monotone"===s.cubicInterpolationMode)!function(f,s="x"){const r=Vr(s),o=f.length,l=Array(o).fill(0),p=Array(o);let b,S,I,N=wr(f,0);for(b=0;b<o;++b)if(S=I,I=N,N=wr(f,b+1),I){if(N){const $=N[s]-I[s];l[b]=0!==$?(N[r]-I[r])/$:0}p[b]=S?N?mt(l[b-1])!==mt(l[b])?0:(l[b-1]+l[b])/2:l[b-1]:l[b]}(function(f,s,r){const o=f.length;let l,p,b,S,I,N=wr(f,0);for(let $=0;$<o-1;++$)if(I=N,N=wr(f,$+1),I&&N){if(ei(s[$],0,Xn)){r[$]=r[$+1]=0;continue}l=r[$]/s[$],p=r[$+1]/s[$],S=Math.pow(l,2)+Math.pow(p,2),!(S<=9)&&(b=3/Math.sqrt(S),r[$]=l*b*s[$],r[$+1]=p*b*s[$])}})(f,l,p),function(f,s,r="x"){const o=Vr(r),l=f.length;let p,b,S,I=wr(f,0);for(let N=0;N<l;++N){if(b=S,S=I,I=wr(f,N+1),!S)continue;const $=S[r],de=S[o];b&&(p=($-b[r])/3,S[`cp1${r}`]=$-p,S[`cp1${o}`]=de-p*s[N]),I&&(p=(I[r]-$)/3,S[`cp2${r}`]=$+p,S[`cp2${o}`]=de+p*s[N])}}(f,p,s)}(f,l);else{let N=o?f[f.length-1]:f[0];for(p=0,b=f.length;p<b;++p)S=f[p],I=Fr(N,S,f[Math.min(p+1,b-(o?0:1))%b],s.tension),S.cp1x=I.previous.x,S.cp1y=I.previous.y,S.cp2x=I.next.x,S.cp2y=I.next.y,N=S}s.capBezierPoints&&function(f,s){let r,o,l,p,b,S=rs(f[0],s);for(r=0,o=f.length;r<o;++r)b=p,p=S,S=r<o-1&&rs(f[r+1],s),p&&(l=f[r],b&&(l.cp1x=Vn(l.cp1x,s.left,s.right),l.cp1y=Vn(l.cp1y,s.top,s.bottom)),S&&(l.cp2x=Vn(l.cp2x,s.left,s.right),l.cp2y=Vn(l.cp2y,s.top,s.bottom)))}(f,r)}function ts(){return"undefined"!=typeof window&&"undefined"!=typeof document}function cl(f){let s=f.parentNode;return s&&"[object ShadowRoot]"===s.toString()&&(s=s.host),s}function Gs(f,s,r){let o;return"string"==typeof f?(o=parseInt(f,10),-1!==f.indexOf("%")&&(o=o/100*s.parentNode[r])):o=f,o}const ea=f=>window.getComputedStyle(f,null),Ue=["top","right","bottom","left"];function G(f,s,r){const o={};r=r?"-"+r:"";for(let l=0;l<4;l++){const p=Ue[l];o[p]=parseFloat(f[s+"-"+p+r])||0}return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function Qe(f,s){const{canvas:r,currentDevicePixelRatio:o}=s,l=ea(r),p="border-box"===l.boxSizing,b=G(l,"padding"),S=G(l,"border","width"),{x:I,y:N,box:$}=function(f,s){const r=f.native||f,o=r.touches,l=o&&o.length?o[0]:r,{offsetX:p,offsetY:b}=l;let I,N,S=!1;if(((f,s,r)=>(f>0||s>0)&&(!r||!r.shadowRoot))(p,b,r.target))I=p,N=b;else{const $=s.getBoundingClientRect();I=l.clientX-$.left,N=l.clientY-$.top,S=!0}return{x:I,y:N,box:S}}(f,r),de=b.left+($&&S.left),Fe=b.top+($&&S.top);let{width:qe,height:Et}=s;return p&&(qe-=b.width+S.width,Et-=b.height+S.height),{x:Math.round((I-de)/qe*r.width/o),y:Math.round((N-Fe)/Et*r.height/o)}}const Yt=f=>Math.round(10*f)/10;function vi(f,s,r){const o=s||1,l=Math.floor(f.height*o),p=Math.floor(f.width*o);f.height=l/o,f.width=p/o;const b=f.canvas;return b.style&&(r||!b.style.height&&!b.style.width)&&(b.style.height=`${f.height}px`,b.style.width=`${f.width}px`),(f.currentDevicePixelRatio!==o||b.height!==l||b.width!==p)&&(f.currentDevicePixelRatio=o,b.height=l,b.width=p,f.ctx.setTransform(o,0,0,o,0,0),!0)}const Fi=function(){let f=!1;try{const s={get passive(){return f=!0,!1}};window.addEventListener("test",null,s),window.removeEventListener("test",null,s)}catch(s){}return f}();function un(f,s){const r=function(f,s){return ea(f).getPropertyValue(s)}(f,s),o=r&&r.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:void 0}function Cn(f,s,r,o){return{x:f.x+r*(s.x-f.x),y:f.y+r*(s.y-f.y)}}function er(f,s,r,o){return{x:f.x+r*(s.x-f.x),y:"middle"===o?r<.5?f.y:s.y:"after"===o?r<1?f.y:s.y:r>0?s.y:f.y}}function tr(f,s,r,o){const l={x:f.cp2x,y:f.cp2y},p={x:s.cp1x,y:s.cp1y},b=Cn(f,l,r),S=Cn(l,p,r),I=Cn(p,s,r),N=Cn(b,S,r),$=Cn(S,I,r);return Cn(N,$,r)}const Pn=new Map;function ar(f,s,r){return function(f,s){s=s||{};const r=f+JSON.stringify(s);let o=Pn.get(r);return o||(o=new Intl.NumberFormat(f,s),Pn.set(r,o)),o}(s,r).format(f)}function oo(f,s,r){return f?function(f,s){return{x:r=>f+f+s-r,setWidth(r){s=r},textAlign:r=>"center"===r?r:"right"===r?"left":"right",xPlus:(r,o)=>r-o,leftForLtr:(r,o)=>r-o}}(s,r):{x:f=>f,setWidth(f){},textAlign:f=>f,xPlus:(f,s)=>f+s,leftForLtr:(f,s)=>f}}function ko(f,s){let r,o;("ltr"===s||"rtl"===s)&&(r=f.canvas.style,o=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",s,"important"),f.prevTextDirection=o)}function Ha(f,s){void 0!==s&&(delete f.prevTextDirection,f.canvas.style.setProperty("direction",s[0],s[1]))}function Ws(f){return"angle"===f?{between:Ci,compare:wt,normalize:Ot}:{between:_i,compare:(s,r)=>s-r,normalize:s=>s}}function Co({start:f,end:s,count:r,loop:o,style:l}){return{start:f%r,end:s%r,loop:o&&(s-f+1)%r==0,style:l}}function os(f,s,r){if(!r)return[f];const{property:o,start:l,end:p}=r,b=s.length,{compare:S,between:I,normalize:N}=Ws(o),{start:$,end:de,loop:Fe,style:qe}=function(f,s,r){const{property:o,start:l,end:p}=r,{between:b,normalize:S}=Ws(o),I=s.length;let Fe,qe,{start:N,end:$,loop:de}=f;if(de){for(N+=I,$+=I,Fe=0,qe=I;Fe<qe&&b(S(s[N%I][o]),l,p);++Fe)N--,$--;N%=I,$%=I}return $<N&&($+=I),{start:N,end:$,loop:de,style:f.style}}(f,s,r),Et=[];let Wt,Ti,an,xt=!1,Gt=null;for(let Mn=$,Fn=$;Mn<=de;++Mn)Ti=s[Mn%b],!Ti.skip&&(Wt=N(Ti[o]),Wt!==an&&(xt=I(Wt,l,p),null===Gt&&(xt||I(l,an,Wt)&&0!==S(l,an))&&(Gt=0===S(Wt,l)?Mn:Fn),null!==Gt&&(!xt||0===S(p,Wt)||I(p,an,Wt))&&(Et.push(Co({start:Gt,end:Mn,loop:Fe,count:b,style:qe})),Gt=null),Fn=Mn,an=Wt));return null!==Gt&&Et.push(Co({start:Gt,end:de,loop:Fe,count:b,style:qe})),Et}function Rs(f,s){const r=[],o=f.segments;for(let l=0;l<o.length;l++){const p=os(o[l],f.points,s);p.length&&r.push(...p)}return r}function xn(f){return{backgroundColor:f.backgroundColor,borderCapStyle:f.borderCapStyle,borderDash:f.borderDash,borderDashOffset:f.borderDashOffset,borderJoinStyle:f.borderJoinStyle,borderWidth:f.borderWidth,borderColor:f.borderColor}}function On(f,s){return s&&JSON.stringify(f)!==JSON.stringify(s)}var hr=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(s,r,o,l){const b=r.duration;r.listeners[l].forEach(S=>S({chart:s,initial:r.initial,numSteps:b,currentStep:Math.min(o-r.start,b)}))}_refresh(){this._request||(this._running=!0,this._request=be.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(s=Date.now()){let r=0;this._charts.forEach((o,l)=>{if(!o.running||!o.items.length)return;const p=o.items;let I,b=p.length-1,S=!1;for(;b>=0;--b)I=p[b],I._active?(I._total>o.duration&&(o.duration=I._total),I.tick(s),S=!0):(p[b]=p[p.length-1],p.pop());S&&(l.draw(),this._notify(l,o,s,"progress")),p.length||(o.running=!1,this._notify(l,o,s,"complete"),o.initial=!1),r+=p.length}),this._lastDate=s,0===r&&(this._running=!1)}_getAnims(s){const r=this._charts;let o=r.get(s);return o||(o={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(s,o)),o}listen(s,r,o){this._getAnims(s).listeners[r].push(o)}add(s,r){!r||!r.length||this._getAnims(s).items.push(...r)}has(s){return this._getAnims(s).items.length>0}start(s){const r=this._charts.get(s);!r||(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((o,l)=>Math.max(o,l._duration),0),this._refresh())}running(s){if(!this._running)return!1;const r=this._charts.get(s);return!(!r||!r.running||!r.items.length)}stop(s){const r=this._charts.get(s);if(!r||!r.items.length)return;const o=r.items;let l=o.length-1;for(;l>=0;--l)o[l].cancel();r.items=[],this._notify(s,r,Date.now(),"complete")}remove(s){return this._charts.delete(s)}};const Cr="transparent",is={boolean:(f,s,r)=>r>.5?s:f,color(f,s,r){const o=sr(f||Cr),l=o.valid&&sr(s||Cr);return l&&l.valid?l.mix(o,r).hexString():s},number:(f,s,r)=>f+(s-f)*r};class Ar{constructor(s,r,o,l){const p=r[o];l=yo([s.to,l,p,s.from]);const b=yo([s.from,p,l]);this._active=!0,this._fn=s.fn||is[s.type||typeof b],this._easing=Ae[s.easing]||Ae.linear,this._start=Math.floor(Date.now()+(s.delay||0)),this._duration=this._total=Math.floor(s.duration),this._loop=!!s.loop,this._target=r,this._prop=o,this._from=b,this._to=l,this._promises=void 0}active(){return this._active}update(s,r,o){if(this._active){this._notify(!1);const l=this._target[this._prop],p=o-this._start,b=this._duration-p;this._start=o,this._duration=Math.floor(Math.max(b,s.duration)),this._total+=p,this._loop=!!s.loop,this._to=yo([s.to,r,l,s.from]),this._from=yo([s.from,l,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(s){const r=s-this._start,o=this._duration,l=this._prop,p=this._from,b=this._loop,S=this._to;let I;if(this._active=p!==S&&(b||r<o),!this._active)return this._target[l]=S,void this._notify(!0);r<0?this._target[l]=p:(I=r/o%2,I=b&&I>1?2-I:I,I=this._easing(Math.min(1,Math.max(0,I))),this._target[l]=this._fn(p,S,I))}wait(){const s=this._promises||(this._promises=[]);return new Promise((r,o)=>{s.push({res:r,rej:o})})}_notify(s){const r=s?"res":"rej",o=this._promises||[];for(let l=0;l<o.length;l++)o[l][r]()}}dr.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const El=Object.keys(dr.animation);dr.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:f=>"onProgress"!==f&&"onComplete"!==f&&"fn"!==f}),dr.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),dr.describe("animations",{_fallback:"animation"}),dr.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:f=>0|f}}}});class Za{constructor(s,r){this._chart=s,this._properties=new Map,this.configure(r)}configure(s){if(!ne(s))return;const r=this._properties;Object.getOwnPropertyNames(s).forEach(o=>{const l=s[o];if(!ne(l))return;const p={};for(const b of El)p[b]=l[b];(ye(l.properties)&&l.properties||[o]).forEach(b=>{(b===o||!r.has(b))&&r.set(b,p)})})}_animateOptions(s,r){const o=r.options,l=function(f,s){if(!s)return;let r=f.options;if(r)return r.$shared&&(f.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r;f.options=s}(s,o);if(!l)return[];const p=this._createAnimations(l,o);return o.$shared&&function(f,s){const r=[],o=Object.keys(s);for(let l=0;l<o.length;l++){const p=f[o[l]];p&&p.active()&&r.push(p.wait())}return Promise.all(r)}(s.options.$animations,o).then(()=>{s.options=o},()=>{}),p}_createAnimations(s,r){const o=this._properties,l=[],p=s.$animations||(s.$animations={}),b=Object.keys(r),S=Date.now();let I;for(I=b.length-1;I>=0;--I){const N=b[I];if("$"===N.charAt(0))continue;if("options"===N){l.push(...this._animateOptions(s,r));continue}const $=r[N];let de=p[N];const Fe=o.get(N);if(de){if(Fe&&de.active()){de.update(Fe,$,S);continue}de.cancel()}Fe&&Fe.duration?(p[N]=de=new Ar(Fe,s,N,$),l.push(de)):s[N]=$}return l}update(s,r){if(0===this._properties.size)return void Object.assign(s,r);const o=this._createAnimations(s,r);return o.length?(hr.add(this._chart,o),!0):void 0}}function _s(f,s){const r=f&&f.options||{},o=r.reverse,l=void 0===r.min?s:0,p=void 0===r.max?s:0;return{start:o?p:l,end:o?l:p}}function ba(f,s){const r=[],o=f._getSortedDatasetMetas(s);let l,p;for(l=0,p=o.length;l<p;++l)r.push(o[l].index);return r}function Ol(f,s,r,o={}){const l=f.keys,p="single"===o.mode;let b,S,I,N;if(null!==s){for(b=0,S=l.length;b<S;++b){if(I=+l[b],I===r){if(o.all)continue;break}N=f.values[I],ge(N)&&(p||0===s||mt(s)===mt(N))&&(s+=N)}return s}}function vs(f,s){const r=f&&f.options.stacked;return r||void 0===r&&void 0!==s.stack}function Qa(f,s,r){const o=f[s]||(f[s]={});return o[r]||(o[r]={})}function Ra(f,s,r,o){for(const l of s.getMatchingVisibleMetas(o).reverse()){const p=f[l.index];if(r&&p>0||!r&&p<0)return l.index}return null}function Ql(f,s){const{chart:r,_cachedMeta:o}=f,l=r._stacks||(r._stacks={}),{iScale:p,vScale:b,index:S}=o,I=p.axis,N=b.axis,$=function(f,s,r){return`${f.id}.${s.id}.${r.stack||r.type}`}(p,b,o),de=s.length;let Fe;for(let qe=0;qe<de;++qe){const Et=s[qe],{[I]:xt,[N]:Gt}=Et;Fe=(Et._stacks||(Et._stacks={}))[N]=Qa(l,$,xt),Fe[S]=Gt,Fe._top=Ra(Fe,b,!0,o.type),Fe._bottom=Ra(Fe,b,!1,o.type)}}function Aa(f,s){const r=f.scales;return Object.keys(r).filter(o=>r[o].axis===s).shift()}function Va(f,s){const r=f.controller.index,o=f.vScale&&f.vScale.axis;if(o){s=s||f._parsed;for(const l of s){const p=l._stacks;if(!p||void 0===p[o]||void 0===p[o][r])return;delete p[o][r]}}}const qa=f=>"reset"===f||"none"===f,_c=(f,s)=>s?f:Object.assign({},f);let da=(()=>{class f{constructor(r,o){this.chart=r,this._ctx=r.ctx,this.index=o,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const r=this._cachedMeta;this.configure(),this.linkScales(),r._stacked=vs(r.vScale,r),this.addElements()}updateIndex(r){this.index!==r&&Va(this._cachedMeta),this.index=r}linkScales(){const r=this.chart,o=this._cachedMeta,l=this.getDataset(),p=(Fe,qe,Et,xt)=>"x"===Fe?qe:"r"===Fe?xt:Et,b=o.xAxisID=He(l.xAxisID,Aa(r,"x")),S=o.yAxisID=He(l.yAxisID,Aa(r,"y")),I=o.rAxisID=He(l.rAxisID,Aa(r,"r")),N=o.indexAxis,$=o.iAxisID=p(N,b,S,I),de=o.vAxisID=p(N,S,b,I);o.xScale=this.getScaleForId(b),o.yScale=this.getScaleForId(S),o.rScale=this.getScaleForId(I),o.iScale=this.getScaleForId($),o.vScale=this.getScaleForId(de)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(r){return this.chart.scales[r]}_getOtherScale(r){const o=this._cachedMeta;return r===o.iScale?o.vScale:o.iScale}reset(){this._update("reset")}_destroy(){const r=this._cachedMeta;this._data&&gs(this._data,this),r._stacked&&Va(r)}_dataCheck(){const r=this.getDataset(),o=r.data||(r.data=[]),l=this._data;if(ne(o))this._data=function(f){const s=Object.keys(f),r=new Array(s.length);let o,l,p;for(o=0,l=s.length;o<l;++o)p=s[o],r[o]={x:p,y:f[p]};return r}(o);else if(l!==o){if(l){gs(l,this);const p=this._cachedMeta;Va(p),p._parsed=[]}o&&Object.isExtensible(o)&&function(f,s){f._chartjs?f._chartjs.listeners.push(s):(Object.defineProperty(f,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),Ms.forEach(r=>{const o="_onData"+gi(r),l=f[r];Object.defineProperty(f,r,{configurable:!0,enumerable:!1,value(...p){const b=l.apply(this,p);return f._chartjs.listeners.forEach(S=>{"function"==typeof S[o]&&S[o](...p)}),b}})}))}(o,this),this._syncList=[],this._data=o}}addElements(){const r=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(r.dataset=new this.datasetElementType)}buildOrUpdateElements(r){const o=this._cachedMeta,l=this.getDataset();let p=!1;this._dataCheck();const b=o._stacked;o._stacked=vs(o.vScale,o),o.stack!==l.stack&&(p=!0,Va(o),o.stack=l.stack),this._resyncElements(r),(p||b!==o._stacked)&&Ql(this,o._parsed)}configure(){const r=this.chart.config,o=r.datasetScopeKeys(this._type),l=r.getOptionScopes(this.getDataset(),o,!0);this.options=r.createResolver(l,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(r,o){const{_cachedMeta:l,_data:p}=this,{iScale:b,_stacked:S}=l,I=b.axis;let de,Fe,qe,N=0===r&&o===p.length||l._sorted,$=r>0&&l._parsed[r-1];if(!1===this._parsing)l._parsed=p,l._sorted=!0,qe=p;else{qe=ye(p[r])?this.parseArrayData(l,p,r,o):ne(p[r])?this.parseObjectData(l,p,r,o):this.parsePrimitiveData(l,p,r,o);const Et=()=>null===Fe[I]||$&&Fe[I]<$[I];for(de=0;de<o;++de)l._parsed[de+r]=Fe=qe[de],N&&(Et()&&(N=!1),$=Fe);l._sorted=N}S&&Ql(this,qe)}parsePrimitiveData(r,o,l,p){const{iScale:b,vScale:S}=r,I=b.axis,N=S.axis,$=b.getLabels(),de=b===S,Fe=new Array(p);let qe,Et,xt;for(qe=0,Et=p;qe<Et;++qe)xt=qe+l,Fe[qe]={[I]:de||b.parse($[xt],xt),[N]:S.parse(o[xt],xt)};return Fe}parseArrayData(r,o,l,p){const{xScale:b,yScale:S}=r,I=new Array(p);let N,$,de,Fe;for(N=0,$=p;N<$;++N)de=N+l,Fe=o[de],I[N]={x:b.parse(Fe[0],de),y:S.parse(Fe[1],de)};return I}parseObjectData(r,o,l,p){const{xScale:b,yScale:S}=r,{xAxisKey:I="x",yAxisKey:N="y"}=this._parsing,$=new Array(p);let de,Fe,qe,Et;for(de=0,Fe=p;de<Fe;++de)qe=de+l,Et=o[qe],$[de]={x:b.parse(Ct(Et,I),qe),y:S.parse(Ct(Et,N),qe)};return $}getParsed(r){return this._cachedMeta._parsed[r]}getDataElement(r){return this._cachedMeta.data[r]}applyStack(r,o,l){const b=this._cachedMeta,S=o[r.axis];return Ol({keys:ba(this.chart,!0),values:o._stacks[r.axis]},S,b.index,{mode:l})}updateRangeFromParsed(r,o,l,p){const b=l[o.axis];let S=null===b?NaN:b;const I=p&&l._stacks[o.axis];p&&I&&(p.values=I,S=Ol(p,b,this._cachedMeta.index)),r.min=Math.min(r.min,S),r.max=Math.max(r.max,S)}getMinMax(r,o){const l=this._cachedMeta,p=l._parsed,b=l._sorted&&r===l.iScale,S=p.length,I=this._getOtherScale(r),N=((f,s,r)=>f&&!s.hidden&&s._stacked&&{keys:ba(this.chart,!0),values:null})(o,l),$={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:de,max:Fe}=function(f){const{min:s,max:r,minDefined:o,maxDefined:l}=f.getUserBounds();return{min:o?s:Number.NEGATIVE_INFINITY,max:l?r:Number.POSITIVE_INFINITY}}(I);let qe,Et;function xt(){Et=p[qe];const Gt=Et[I.axis];return!ge(Et[r.axis])||de>Gt||Fe<Gt}for(qe=0;qe<S&&(xt()||(this.updateRangeFromParsed($,r,Et,N),!b));++qe);if(b)for(qe=S-1;qe>=0;--qe)if(!xt()){this.updateRangeFromParsed($,r,Et,N);break}return $}getAllParsedValues(r){const o=this._cachedMeta._parsed,l=[];let p,b,S;for(p=0,b=o.length;p<b;++p)S=o[p][r.axis],ge(S)&&l.push(S);return l}getMaxOverflow(){return!1}getLabelAndValue(r){const o=this._cachedMeta,l=o.iScale,p=o.vScale,b=this.getParsed(r);return{label:l?""+l.getLabelForValue(b[l.axis]):"",value:p?""+p.getLabelForValue(b[p.axis]):""}}_update(r){const o=this._cachedMeta;this.update(r||"default"),o._clip=function(f){let s,r,o,l;return ne(f)?(s=f.top,r=f.right,o=f.bottom,l=f.left):s=r=o=l=f,{top:s,right:r,bottom:o,left:l,disabled:!1===f}}(He(this.options.clip,function(f,s,r){if(!1===r)return!1;const o=_s(f,r),l=_s(s,r);return{top:l.end,right:o.end,bottom:l.start,left:o.start}}(o.xScale,o.yScale,this.getMaxOverflow())))}update(r){}draw(){const r=this._ctx,l=this._cachedMeta,p=l.data||[],b=this.chart.chartArea,S=[],I=this._drawStart||0,N=this._drawCount||p.length-I,$=this.options.drawActiveElementsOnTop;let de;for(l.dataset&&l.dataset.draw(r,b,I,N),de=I;de<I+N;++de){const Fe=p[de];Fe.hidden||(Fe.active&&$?S.push(Fe):Fe.draw(r,b))}for(de=0;de<S.length;++de)S[de].draw(r,b)}getStyle(r,o){const l=o?"active":"default";return void 0===r&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(l):this.resolveDataElementOptions(r||0,l)}getContext(r,o,l){const p=this.getDataset();let b;if(r>=0&&r<this._cachedMeta.data.length){const S=this._cachedMeta.data[r];b=S.$context||(S.$context=function(f,s,r){return Ko(f,{active:!1,dataIndex:s,parsed:void 0,raw:void 0,element:r,index:s,mode:"default",type:"data"})}(this.getContext(),r,S)),b.parsed=this.getParsed(r),b.raw=p.data[r],b.index=b.dataIndex=r}else b=this.$context||(this.$context=function(f,s){return Ko(f,{active:!1,dataset:void 0,datasetIndex:s,index:s,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),b.dataset=p,b.index=b.datasetIndex=this.index;return b.active=!!o,b.mode=l,b}resolveDatasetElementOptions(r){return this._resolveElementOptions(this.datasetElementType.id,r)}resolveDataElementOptions(r,o){return this._resolveElementOptions(this.dataElementType.id,o,r)}_resolveElementOptions(r,o="default",l){const p="active"===o,b=this._cachedDataOpts,S=r+"-"+o,I=b[S],N=this.enableOptionSharing&&Be(l);if(I)return _c(I,N);const $=this.chart.config,de=$.datasetElementScopeKeys(this._type,r),Fe=p?[`${r}Hover`,"hover",r,""]:[r,""],qe=$.getOptionScopes(this.getDataset(),de),Et=Object.keys(dr.elements[r]),Gt=$.resolveNamedOptions(qe,Et,()=>this.getContext(l,p),Fe);return Gt.$shared&&(Gt.$shared=N,b[S]=Object.freeze(_c(Gt,N))),Gt}_resolveAnimations(r,o,l){const p=this.chart,b=this._cachedDataOpts,S=`animation-${o}`,I=b[S];if(I)return I;let N;if(!1!==p.options.animation){const de=this.chart.config,Fe=de.datasetAnimationScopeKeys(this._type,o),qe=de.getOptionScopes(this.getDataset(),Fe);N=de.createResolver(qe,this.getContext(r,l,o))}const $=new Za(p,N&&N.animations);return N&&N._cacheable&&(b[S]=Object.freeze($)),$}getSharedOptions(r){if(r.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},r))}includeOptions(r,o){return!o||qa(r)||this.chart._animationsDisabled}updateElement(r,o,l,p){qa(p)?Object.assign(r,l):this._resolveAnimations(o,p).update(r,l)}updateSharedOptions(r,o,l){r&&!qa(o)&&this._resolveAnimations(void 0,o).update(r,l)}_setStyle(r,o,l,p){r.active=p;const b=this.getStyle(o,p);this._resolveAnimations(o,l,p).update(r,{options:!p&&this.getSharedOptions(b)||b})}removeHoverStyle(r,o,l){this._setStyle(r,l,"active",!1)}setHoverStyle(r,o,l){this._setStyle(r,l,"active",!0)}_removeDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!1)}_setDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!0)}_resyncElements(r){const o=this._data,l=this._cachedMeta.data;for(const[I,N,$]of this._syncList)this[I](N,$);this._syncList=[];const p=l.length,b=o.length,S=Math.min(b,p);S&&this.parse(0,S),b>p?this._insertElements(p,b-p,r):b<p&&this._removeElements(b,p-b)}_insertElements(r,o,l=!0){const p=this._cachedMeta,b=p.data,S=r+o;let I;const N=$=>{for($.length+=o,I=$.length-1;I>=S;I--)$[I]=$[I-o]};for(N(b),I=r;I<S;++I)b[I]=new this.dataElementType;this._parsing&&N(p._parsed),this.parse(r,o),l&&this.updateElements(b,r,o,"reset")}updateElements(r,o,l,p){}_removeElements(r,o){const l=this._cachedMeta;if(this._parsing){const p=l._parsed.splice(r,o);l._stacked&&Va(l,p)}l.data.splice(r,o)}_sync(r){if(this._parsing)this._syncList.push(r);else{const[o,l,p]=r;this[o](l,p)}this.chart._dataChanges.push([this.index,...r])}_onDataPush(){const r=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-r,r])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(r,o){o&&this._sync(["_removeElements",r,o]);const l=arguments.length-2;l&&this._sync(["_insertElements",r,l])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return f.defaults={},f})();function Ys(f){const s=f.iScale,r=function(f,s){if(!f._cache.$bar){const r=f.getMatchingVisibleMetas(s);let o=[];for(let l=0,p=r.length;l<p;l++)o=o.concat(r[l].controller.getAllParsedValues(f));f._cache.$bar=Pr(o.sort((l,p)=>l-p))}return f._cache.$bar}(s,f.type);let l,p,b,S,o=s._length;const I=()=>{32767===b||-32768===b||(Be(S)&&(o=Math.min(o,Math.abs(b-S)||o)),S=b)};for(l=0,p=r.length;l<p;++l)b=s.getPixelForValue(r[l]),I();for(S=void 0,l=0,p=s.ticks.length;l<p;++l)b=s.getPixelForTick(l),I();return o}function Cl(f,s,r,o){return ye(f)?function(f,s,r,o){const l=r.parse(f[0],o),p=r.parse(f[1],o),b=Math.min(l,p),S=Math.max(l,p);let I=b,N=S;Math.abs(b)>Math.abs(S)&&(I=S,N=b),s[r.axis]=N,s._custom={barStart:I,barEnd:N,start:l,end:p,min:b,max:S}}(f,s,r,o):s[r.axis]=r.parse(f,o),s}function ql(f,s,r,o){const l=f.iScale,p=f.vScale,b=l.getLabels(),S=l===p,I=[];let N,$,de,Fe;for(N=r,$=r+o;N<$;++N)Fe=s[N],de={},de[l.axis]=S||l.parse(b[N],N),I.push(Cl(Fe,de,p,N));return I}function Ll(f){return f&&void 0!==f.barStart&&void 0!==f.barEnd}function he(f,s,r,o){let l=s.borderSkipped;const p={};if(!l)return void(f.borderSkipped=p);const{start:b,end:S,reverse:I,top:N,bottom:$}=function(f){let s,r,o,l,p;return f.horizontal?(s=f.base>f.x,r="left",o="right"):(s=f.base<f.y,r="bottom",o="top"),s?(l="end",p="start"):(l="start",p="end"),{start:r,end:o,reverse:s,top:l,bottom:p}}(f);"middle"===l&&r&&(f.enableBorderRadius=!0,(r._top||0)===o?l=N:(r._bottom||0)===o?l=$:(p[te($,b,S,I)]=!0,l=N)),p[te(l,b,S,I)]=!0,f.borderSkipped=p}function te(f,s,r,o){return o?(f=function(f,s,r){return f===s?r:f===r?s:f}(f,s,r),f=De(f,r,s)):f=De(f,s,r),f}function De(f,s,r){return"start"===f?s:"end"===f?r:f}function je(f,{inflateAmount:s},r){f.inflateAmount="auto"===s?1===r?.33:0:s}da.prototype.datasetElementType=null,da.prototype.dataElementType=null;let gt=(()=>{class f extends da{parsePrimitiveData(r,o,l,p){return ql(r,o,l,p)}parseArrayData(r,o,l,p){return ql(r,o,l,p)}parseObjectData(r,o,l,p){const{iScale:b,vScale:S}=r,{xAxisKey:I="x",yAxisKey:N="y"}=this._parsing,$="x"===b.axis?I:N,de="x"===S.axis?I:N,Fe=[];let qe,Et,xt,Gt;for(qe=l,Et=l+p;qe<Et;++qe)Gt=o[qe],xt={},xt[b.axis]=b.parse(Ct(Gt,$),qe),Fe.push(Cl(Ct(Gt,de),xt,S,qe));return Fe}updateRangeFromParsed(r,o,l,p){super.updateRangeFromParsed(r,o,l,p);const b=l._custom;b&&o===this._cachedMeta.vScale&&(r.min=Math.min(r.min,b.min),r.max=Math.max(r.max,b.max))}getMaxOverflow(){return 0}getLabelAndValue(r){const o=this._cachedMeta,{iScale:l,vScale:p}=o,b=this.getParsed(r),S=b._custom,I=Ll(S)?"["+S.start+", "+S.end+"]":""+p.getLabelForValue(b[p.axis]);return{label:""+l.getLabelForValue(b[l.axis]),value:I}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(r){const o=this._cachedMeta;this.updateElements(o.data,0,o.data.length,r)}updateElements(r,o,l,p){const b="reset"===p,{index:S,_cachedMeta:{vScale:I}}=this,N=I.getBasePixel(),$=I.isHorizontal(),de=this._getRuler(),Fe=this.resolveDataElementOptions(o,p),qe=this.getSharedOptions(Fe),Et=this.includeOptions(p,qe);this.updateSharedOptions(qe,p,Fe);for(let xt=o;xt<o+l;xt++){const Gt=this.getParsed(xt),Wt=b||Te(Gt[I.axis])?{base:N,head:N}:this._calculateBarValuePixels(xt),Ti=this._calculateBarIndexPixels(xt,de),an=(Gt._stacks||{})[I.axis],Ui={horizontal:$,base:Wt.base,enableBorderRadius:!an||Ll(Gt._custom)||S===an._top||S===an._bottom,x:$?Wt.head:Ti.center,y:$?Ti.center:Wt.head,height:$?Ti.size:Math.abs(Wt.size),width:$?Math.abs(Wt.size):Ti.size};Et&&(Ui.options=qe||this.resolveDataElementOptions(xt,r[xt].active?"active":p));const Yi=Ui.options||r[xt].options;he(Ui,Yi,an,S),je(Ui,Yi,de.ratio),this.updateElement(r[xt],xt,Ui,p)}}_getStacks(r,o){const p=this._cachedMeta.iScale,b=p.getMatchingVisibleMetas(this._type),S=p.options.stacked,I=b.length,N=[];let $,de;for($=0;$<I;++$)if(de=b[$],de.controller.options.grouped){if(void 0!==o){const Fe=de.controller.getParsed(o)[de.controller._cachedMeta.vScale.axis];if(Te(Fe)||isNaN(Fe))continue}if((!1===S||-1===N.indexOf(de.stack)||void 0===S&&void 0===de.stack)&&N.push(de.stack),de.index===r)break}return N.length||N.push(void 0),N}_getStackCount(r){return this._getStacks(void 0,r).length}_getStackIndex(r,o,l){const p=this._getStacks(r,l),b=void 0!==o?p.indexOf(o):-1;return-1===b?p.length-1:b}_getRuler(){const r=this.options,o=this._cachedMeta,l=o.iScale,p=[];let b,S;for(b=0,S=o.data.length;b<S;++b)p.push(l.getPixelForValue(this.getParsed(b)[l.axis],b));const I=r.barThickness;return{min:I||Ys(o),pixels:p,start:l._startPixel,end:l._endPixel,stackCount:this._getStackCount(),scale:l,grouped:r.grouped,ratio:I?1:r.categoryPercentage*r.barPercentage}}_calculateBarValuePixels(r){const{_cachedMeta:{vScale:o,_stacked:l},options:{base:p,minBarLength:b}}=this,S=p||0,I=this.getParsed(r),N=I._custom,$=Ll(N);let Et,xt,de=I[o.axis],Fe=0,qe=l?this.applyStack(o,I,l):de;qe!==de&&(Fe=qe-de,qe=de),$&&(de=N.barStart,qe=N.barEnd-N.barStart,0!==de&&mt(de)!==mt(N.barEnd)&&(Fe=0),Fe+=de);const Gt=Te(p)||$?Fe:p;let Wt=o.getPixelForValue(Gt);if(Et=this.chart.getDataVisibility(r)?o.getPixelForValue(Fe+qe):Wt,xt=Et-Wt,Math.abs(xt)<b&&(xt=function(f,s,r){return 0!==f?mt(f):(s.isHorizontal()?1:-1)*(s.min>=r?1:-1)}(xt,o,S)*b,de===S&&(Wt-=xt/2),Et=Wt+xt),Wt===o.getPixelForValue(S)){const Ti=mt(xt)*o.getLineWidthForValue(S)/2;Wt+=Ti,xt-=Ti}return{size:xt,base:Wt,head:Et,center:Et+xt/2}}_calculateBarIndexPixels(r,o){const l=o.scale,p=this.options,b=p.skipNull,S=He(p.maxBarThickness,1/0);let I,N;if(o.grouped){const $=b?this._getStackCount(r):o.stackCount,de="flex"===p.barThickness?function(f,s,r,o){const l=s.pixels,p=l[f];let b=f>0?l[f-1]:null,S=f<l.length-1?l[f+1]:null;const I=r.categoryPercentage;null===b&&(b=p-(null===S?s.end-s.start:S-p)),null===S&&(S=p+p-b);const N=p-(p-Math.min(b,S))/2*I;return{chunk:Math.abs(S-b)/2*I/o,ratio:r.barPercentage,start:N}}(r,o,p,$):function(f,s,r,o){const l=r.barThickness;let p,b;return Te(l)?(p=s.min*r.categoryPercentage,b=r.barPercentage):(p=l*o,b=1),{chunk:p/o,ratio:b,start:s.pixels[f]-p/2}}(r,o,p,$),Fe=this._getStackIndex(this.index,this._cachedMeta.stack,b?r:void 0);I=de.start+de.chunk*Fe+de.chunk/2,N=Math.min(S,de.chunk*de.ratio)}else I=l.getPixelForValue(this.getParsed(r)[l.axis],r),N=Math.min(S,o.min*o.ratio);return{base:I-N/2,head:I+N/2,center:I,size:N}}draw(){const r=this._cachedMeta,o=r.vScale,l=r.data,p=l.length;let b=0;for(;b<p;++b)null!==this.getParsed(b)[o.axis]&&l[b].draw(this._ctx)}}return f.id="bar",f.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},f.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},f})(),Ut=(()=>{class f extends da{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(r,o,l,p){const b=super.parsePrimitiveData(r,o,l,p);for(let S=0;S<b.length;S++)b[S]._custom=this.resolveDataElementOptions(S+l).radius;return b}parseArrayData(r,o,l,p){const b=super.parseArrayData(r,o,l,p);for(let S=0;S<b.length;S++)b[S]._custom=He(o[l+S][2],this.resolveDataElementOptions(S+l).radius);return b}parseObjectData(r,o,l,p){const b=super.parseObjectData(r,o,l,p);for(let S=0;S<b.length;S++){const I=o[l+S];b[S]._custom=He(I&&I.r&&+I.r,this.resolveDataElementOptions(S+l).radius)}return b}getMaxOverflow(){const r=this._cachedMeta.data;let o=0;for(let l=r.length-1;l>=0;--l)o=Math.max(o,r[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}getLabelAndValue(r){const o=this._cachedMeta,{xScale:l,yScale:p}=o,b=this.getParsed(r),S=l.getLabelForValue(b.x),I=p.getLabelForValue(b.y),N=b._custom;return{label:o.label,value:"("+S+", "+I+(N?", "+N:"")+")"}}update(r){const o=this._cachedMeta.data;this.updateElements(o,0,o.length,r)}updateElements(r,o,l,p){const b="reset"===p,{iScale:S,vScale:I}=this._cachedMeta,N=this.resolveDataElementOptions(o,p),$=this.getSharedOptions(N),de=this.includeOptions(p,$),Fe=S.axis,qe=I.axis;for(let Et=o;Et<o+l;Et++){const xt=r[Et],Gt=!b&&this.getParsed(Et),Wt={},Ti=Wt[Fe]=b?S.getPixelForDecimal(.5):S.getPixelForValue(Gt[Fe]),an=Wt[qe]=b?I.getBasePixel():I.getPixelForValue(Gt[qe]);Wt.skip=isNaN(Ti)||isNaN(an),de&&(Wt.options=this.resolveDataElementOptions(Et,xt.active?"active":p),b&&(Wt.options.radius=0)),this.updateElement(xt,Et,Wt,p)}this.updateSharedOptions($,p,N)}resolveDataElementOptions(r,o){const l=this.getParsed(r);let p=super.resolveDataElementOptions(r,o);p.$shared&&(p=Object.assign({},p,{$shared:!1}));const b=p.radius;return"active"!==o&&(p.radius=0),p.radius+=He(l&&l._custom,b),p}}return f.id="bubble",f.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},f.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},f})(),Li=(()=>{class f extends da{constructor(r,o){super(r,o),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(r,o){const l=this.getDataset().data,p=this._cachedMeta;if(!1===this._parsing)p._parsed=l;else{let S,I,b=N=>+l[N];if(ne(l[r])){const{key:N="value"}=this._parsing;b=$=>+Ct(l[$],N)}for(S=r,I=r+o;S<I;++S)p._parsed[S]=b(S)}}_getRotation(){return wi(this.options.rotation-90)}_getCircumference(){return wi(this.options.circumference)}_getRotationExtents(){let r=pt,o=-pt;for(let l=0;l<this.chart.data.datasets.length;++l)if(this.chart.isDatasetVisible(l)){const p=this.chart.getDatasetMeta(l).controller,b=p._getRotation(),S=p._getCircumference();r=Math.min(r,b),o=Math.max(o,b+S)}return{rotation:r,circumference:o-r}}update(r){const o=this.chart,{chartArea:l}=o,p=this._cachedMeta,b=p.data,S=this.getMaxBorderWidth()+this.getMaxOffset(b)+this.options.spacing,I=Math.max((Math.min(l.width,l.height)-S)/2,0),N=Math.min(((f,s)=>"string"==typeof f&&f.endsWith("%")?parseFloat(f)/100:f/s)(this.options.cutout,I),1),$=this._getRingWeight(this.index),{circumference:de,rotation:Fe}=this._getRotationExtents(),{ratioX:qe,ratioY:Et,offsetX:xt,offsetY:Gt}=function(f,s,r){let o=1,l=1,p=0,b=0;if(s<pt){const S=f,I=S+s,N=Math.cos(S),$=Math.sin(S),de=Math.cos(I),Fe=Math.sin(I),qe=(an,Ui,Yi)=>Ci(an,S,I,!0)?1:Math.max(Ui,Ui*r,Yi,Yi*r),Et=(an,Ui,Yi)=>Ci(an,S,I,!0)?-1:Math.min(Ui,Ui*r,Yi,Yi*r),xt=qe(0,N,de),Gt=qe(et,$,Fe),Wt=Et(xe,N,de),Ti=Et(xe+et,$,Fe);o=(xt-Wt)/2,l=(Gt-Ti)/2,p=-(xt+Wt)/2,b=-(Gt+Ti)/2}return{ratioX:o,ratioY:l,offsetX:p,offsetY:b}}(Fe,de,N),an=Math.max(Math.min((l.width-S)/qe,(l.height-S)/Et)/2,0),Ui=Ee(this.options.radius,an),gn=(Ui-Math.max(Ui*N,0))/this._getVisibleDatasetWeightTotal();this.offsetX=xt*Ui,this.offsetY=Gt*Ui,p.total=this.calculateTotal(),this.outerRadius=Ui-gn*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-gn*$,0),this.updateElements(b,0,b.length,r)}_circumference(r,o){const l=this.options,p=this._cachedMeta,b=this._getCircumference();return o&&l.animation.animateRotate||!this.chart.getDataVisibility(r)||null===p._parsed[r]||p.data[r].hidden?0:this.calculateCircumference(p._parsed[r]*b/pt)}updateElements(r,o,l,p){const b="reset"===p,S=this.chart,I=S.chartArea,de=(I.left+I.right)/2,Fe=(I.top+I.bottom)/2,qe=b&&S.options.animation.animateScale,Et=qe?0:this.innerRadius,xt=qe?0:this.outerRadius,Gt=this.resolveDataElementOptions(o,p),Wt=this.getSharedOptions(Gt),Ti=this.includeOptions(p,Wt);let Ui,an=this._getRotation();for(Ui=0;Ui<o;++Ui)an+=this._circumference(Ui,b);for(Ui=o;Ui<o+l;++Ui){const Yi=this._circumference(Ui,b),gn=r[Ui],vn={x:de+this.offsetX,y:Fe+this.offsetY,startAngle:an,endAngle:an+Yi,circumference:Yi,outerRadius:xt,innerRadius:Et};Ti&&(vn.options=Wt||this.resolveDataElementOptions(Ui,gn.active?"active":p)),an+=Yi,this.updateElement(gn,Ui,vn,p)}this.updateSharedOptions(Wt,p,Gt)}calculateTotal(){const r=this._cachedMeta,o=r.data;let p,l=0;for(p=0;p<o.length;p++){const b=r._parsed[p];null!==b&&!isNaN(b)&&this.chart.getDataVisibility(p)&&!o[p].hidden&&(l+=Math.abs(b))}return l}calculateCircumference(r){const o=this._cachedMeta.total;return o>0&&!isNaN(r)?pt*(Math.abs(r)/o):0}getLabelAndValue(r){const l=this.chart,p=l.data.labels||[],b=ar(this._cachedMeta._parsed[r],l.options.locale);return{label:p[r]||"",value:b}}getMaxBorderWidth(r){let o=0;const l=this.chart;let p,b,S,I,N;if(!r)for(p=0,b=l.data.datasets.length;p<b;++p)if(l.isDatasetVisible(p)){S=l.getDatasetMeta(p),r=S.data,I=S.controller;break}if(!r)return 0;for(p=0,b=r.length;p<b;++p)N=I.resolveDataElementOptions(p),"inner"!==N.borderAlign&&(o=Math.max(o,N.borderWidth||0,N.hoverBorderWidth||0));return o}getMaxOffset(r){let o=0;for(let l=0,p=r.length;l<p;++l){const b=this.resolveDataElementOptions(l);o=Math.max(o,b.offset||0,b.hoverOffset||0)}return o}_getRingWeightOffset(r){let o=0;for(let l=0;l<r;++l)this.chart.isDatasetVisible(l)&&(o+=this._getRingWeight(l));return o}_getRingWeight(r){return Math.max(He(this.chart.data.datasets[r].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return f.id="doughnut",f.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},f.descriptors={_scriptable:s=>"spacing"!==s,_indexable:s=>"spacing"!==s},f.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(s){const r=s.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:o}}=s.legend.options;return r.labels.map((l,p)=>{const S=s.getDatasetMeta(0).controller.getStyle(p);return{text:l,fillStyle:S.backgroundColor,strokeStyle:S.borderColor,lineWidth:S.borderWidth,pointStyle:o,hidden:!s.getDataVisibility(p),index:p}})}return[]}},onClick(s,r,o){o.chart.toggleDataVisibility(r.index),o.chart.update()}},tooltip:{callbacks:{title:()=>"",label(s){let r=s.label;const o=": "+s.formattedValue;return ye(r)?(r=r.slice(),r[0]+=o):r+=o,r}}}}},f})(),wn=(()=>{class f extends da{initialize(){this.enableOptionSharing=!0,super.initialize()}update(r){const o=this._cachedMeta,{dataset:l,data:p=[],_dataset:b}=o,S=this.chart._animationsDisabled;let{start:I,count:N}=function(f,s,r){const o=s.length;let l=0,p=o;if(f._sorted){const{iScale:b,_parsed:S}=f,I=b.axis,{min:N,max:$,minDefined:de,maxDefined:Fe}=b.getUserBounds();de&&(l=zt(Math.min(zo(S,b.axis,N).lo,r?o:zo(s,I,b.getPixelForValue(N)).lo),0,o-1)),p=Fe?zt(Math.max(zo(S,b.axis,$).hi+1,r?0:zo(s,I,b.getPixelForValue($)).hi+1),l,o)-l:o-l}return{start:l,count:p}}(o,p,S);this._drawStart=I,this._drawCount=N,function(f){const{xScale:s,yScale:r,_scaleRanges:o}=f,l={xmin:s.min,xmax:s.max,ymin:r.min,ymax:r.max};if(!o)return f._scaleRanges=l,!0;const p=o.xmin!==s.min||o.xmax!==s.max||o.ymin!==r.min||o.ymax!==r.max;return Object.assign(o,l),p}(o)&&(I=0,N=p.length),l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!b._decimated,l.points=p;const $=this.resolveDatasetElementOptions(r);this.options.showLine||($.borderWidth=0),$.segment=this.options.segment,this.updateElement(l,void 0,{animated:!S,options:$},r),this.updateElements(p,I,N,r)}updateElements(r,o,l,p){const b="reset"===p,{iScale:S,vScale:I,_stacked:N,_dataset:$}=this._cachedMeta,de=this.resolveDataElementOptions(o,p),Fe=this.getSharedOptions(de),qe=this.includeOptions(p,Fe),Et=S.axis,xt=I.axis,{spanGaps:Gt,segment:Wt}=this.options,Ti=ut(Gt)?Gt:Number.POSITIVE_INFINITY,an=this.chart._animationsDisabled||b||"none"===p;let Ui=o>0&&this.getParsed(o-1);for(let Yi=o;Yi<o+l;++Yi){const gn=r[Yi],vn=this.getParsed(Yi),Mn=an?gn:{},Fn=Te(vn[xt]),yn=Mn[Et]=S.getPixelForValue(vn[Et],Yi),qi=Mn[xt]=b||Fn?I.getBasePixel():I.getPixelForValue(N?this.applyStack(I,vn,N):vn[xt],Yi);Mn.skip=isNaN(yn)||isNaN(qi)||Fn,Mn.stop=Yi>0&&vn[Et]-Ui[Et]>Ti,Wt&&(Mn.parsed=vn,Mn.raw=$.data[Yi]),qe&&(Mn.options=Fe||this.resolveDataElementOptions(Yi,gn.active?"active":p)),an||this.updateElement(gn,Yi,Mn,p),Ui=vn}this.updateSharedOptions(Fe,p,de)}getMaxOverflow(){const r=this._cachedMeta,o=r.dataset,l=o.options&&o.options.borderWidth||0,p=r.data||[];if(!p.length)return l;const b=p[0].size(this.resolveDataElementOptions(0)),S=p[p.length-1].size(this.resolveDataElementOptions(p.length-1));return Math.max(l,b,S)/2}draw(){const r=this._cachedMeta;r.dataset.updateControlPoints(this.chart.chartArea,r.iScale.axis),super.draw()}}return f.id="line",f.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},f.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},f})();var ya=Object.freeze({__proto__:null,BarController:gt,BubbleController:Ut,DoughnutController:Li,LineController:wn,PolarAreaController:(()=>{class f extends da{constructor(r,o){super(r,o),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(r){const l=this.chart,p=l.data.labels||[],b=ar(this._cachedMeta._parsed[r].r,l.options.locale);return{label:p[r]||"",value:b}}update(r){const o=this._cachedMeta.data;this._updateRadius(),this.updateElements(o,0,o.length,r)}_updateRadius(){const r=this.chart,o=r.chartArea,l=r.options,p=Math.min(o.right-o.left,o.bottom-o.top),b=Math.max(p/2,0),I=(b-Math.max(l.cutoutPercentage?b/100*l.cutoutPercentage:1,0))/r.getVisibleDatasetCount();this.outerRadius=b-I*this.index,this.innerRadius=this.outerRadius-I}updateElements(r,o,l,p){const b="reset"===p,S=this.chart,I=this.getDataset(),$=S.options.animation,de=this._cachedMeta.rScale,Fe=de.xCenter,qe=de.yCenter,Et=de.getIndexAngle(0)-.5*xe;let Gt,xt=Et;const Wt=360/this.countVisibleElements();for(Gt=0;Gt<o;++Gt)xt+=this._computeAngle(Gt,p,Wt);for(Gt=o;Gt<o+l;Gt++){const Ti=r[Gt];let an=xt,Ui=xt+this._computeAngle(Gt,p,Wt),Yi=S.getDataVisibility(Gt)?de.getDistanceFromCenterForValue(I.data[Gt]):0;xt=Ui,b&&($.animateScale&&(Yi=0),$.animateRotate&&(an=Ui=Et));const gn={x:Fe,y:qe,innerRadius:0,outerRadius:Yi,startAngle:an,endAngle:Ui,options:this.resolveDataElementOptions(Gt,Ti.active?"active":p)};this.updateElement(Ti,Gt,gn,p)}}countVisibleElements(){const r=this.getDataset();let l=0;return this._cachedMeta.data.forEach((p,b)=>{!isNaN(r.data[b])&&this.chart.getDataVisibility(b)&&l++}),l}_computeAngle(r,o,l){return this.chart.getDataVisibility(r)?wi(this.resolveDataElementOptions(r,o).angle||l):0}}return f.id="polarArea",f.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},f.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(s){const r=s.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:o}}=s.legend.options;return r.labels.map((l,p)=>{const S=s.getDatasetMeta(0).controller.getStyle(p);return{text:l,fillStyle:S.backgroundColor,strokeStyle:S.borderColor,lineWidth:S.borderWidth,pointStyle:o,hidden:!s.getDataVisibility(p),index:p}})}return[]}},onClick(s,r,o){o.chart.toggleDataVisibility(r.index),o.chart.update()}},tooltip:{callbacks:{title:()=>"",label:s=>s.chart.data.labels[s.dataIndex]+": "+s.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},f})(),PieController:(()=>{class f extends Li{}return f.id="pie",f.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},f})(),RadarController:(()=>{class f extends da{getLabelAndValue(r){const o=this._cachedMeta.vScale,l=this.getParsed(r);return{label:o.getLabels()[r],value:""+o.getLabelForValue(l[o.axis])}}update(r){const o=this._cachedMeta,l=o.dataset,p=o.data||[],b=o.iScale.getLabels();if(l.points=p,"resize"!==r){const S=this.resolveDatasetElementOptions(r);this.options.showLine||(S.borderWidth=0),this.updateElement(l,void 0,{_loop:!0,_fullLoop:b.length===p.length,options:S},r)}this.updateElements(p,0,p.length,r)}updateElements(r,o,l,p){const b=this.getDataset(),S=this._cachedMeta.rScale,I="reset"===p;for(let N=o;N<o+l;N++){const $=r[N],de=this.resolveDataElementOptions(N,$.active?"active":p),Fe=S.getPointPositionForValue(N,b.data[N]),qe=I?S.xCenter:Fe.x,Et=I?S.yCenter:Fe.y,xt={x:qe,y:Et,angle:Fe.angle,skip:isNaN(qe)||isNaN(Et),options:de};this.updateElement($,N,xt,p)}}}return f.id="radar",f.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},f.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},f})(),ScatterController:(()=>{class f extends wn{}return f.id="scatter",f.defaults={showLine:!1,fill:!1},f.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:s=>"("+s.label+", "+s.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},f})()});function Vo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Ks={_date:(()=>{class f{constructor(r){this.options=r||{}}formats(){return Vo()}parse(r,o){return Vo()}format(r,o){return Vo()}add(r,o,l){return Vo()}diff(r,o,l){return Vo()}startOf(r,o,l){return Vo()}endOf(r,o){return Vo()}}return f.override=function(s){Object.assign(f.prototype,s)},f})()};function Ea(f,s){return"native"in f?{x:f.x,y:f.y}:Qe(f,s)}function Cu(f,s,r,o){const{controller:l,data:p,_sorted:b}=f,S=l._cachedMeta.iScale;if(S&&s===S.axis&&"r"!==s&&b&&p.length){const I=S._reversePixels?Oo:zo;if(!o)return I(p,s,r);if(l._sharedOptions){const N=p[0],$="function"==typeof N.getRange&&N.getRange(s);if($){const de=I(p,s,r-$),Fe=I(p,s,r+$);return{lo:de.lo,hi:Fe.hi}}}}return{lo:0,hi:p.length-1}}function $s(f,s,r,o,l){const p=f.getSortedVisibleDatasetMetas(),b=r[s];for(let S=0,I=p.length;S<I;++S){const{index:N,data:$}=p[S],{lo:de,hi:Fe}=Cu(p[S],s,b,l);for(let qe=de;qe<=Fe;++qe){const Et=$[qe];Et.skip||o(Et,N,qe)}}}function ds(f,s,r,o){const l=[];return rs(s,f.chartArea,f._minPadding)&&$s(f,r,s,function(b,S,I){b.inRange(s.x,s.y,o)&&l.push({element:b,datasetIndex:S,index:I})},!0),l}function qr(f,s,r,o,l){return rs(s,f.chartArea,f._minPadding)?"r"!==r||o?function(f,s,r,o,l){let p=[];const b=function(f){const s=-1!==f.indexOf("x"),r=-1!==f.indexOf("y");return function(o,l){const p=s?Math.abs(o.x-l.x):0,b=r?Math.abs(o.y-l.y):0;return Math.sqrt(Math.pow(p,2)+Math.pow(b,2))}}(r);let S=Number.POSITIVE_INFINITY;return $s(f,r,s,function(N,$,de){const Fe=N.inRange(s.x,s.y,l);if(o&&!Fe)return;const qe=N.getCenterPoint(l);if(!rs(qe,f.chartArea,f._minPadding)&&!Fe)return;const xt=b(s,qe);xt<S?(p=[{element:N,datasetIndex:$,index:de}],S=xt):xt===S&&p.push({element:N,datasetIndex:$,index:de})}),p}(f,s,r,o,l):function(f,s,r,o){let l=[];return $s(f,r,s,function(b,S,I){const{startAngle:N,endAngle:$}=b.getProps(["startAngle","endAngle"],o),{angle:de}=mi(b,{x:s.x,y:s.y});Ci(de,N,$)&&l.push({element:b,datasetIndex:S,index:I})}),l}(f,s,r,l):[]}function tc(f,s,r,o){const l=Ea(s,f),p=[],b=r.axis,S="x"===b?"inXRange":"inYRange";let I=!1;return function(f,s){const r=f.getSortedVisibleDatasetMetas();let o,l,p;for(let b=0,S=r.length;b<S;++b){({index:o,data:l}=r[b]);for(let I=0,N=l.length;I<N;++I)p=l[I],p.skip||s(p,o,I)}}(f,(N,$,de)=>{N[S](l[b],o)&&p.push({element:N,datasetIndex:$,index:de}),N.inRange(l.x,l.y,o)&&(I=!0)}),r.intersect&&!I?[]:p}var Tu={modes:{index(f,s,r,o){const l=Ea(s,f),p=r.axis||"x",b=r.intersect?ds(f,l,p,o):qr(f,l,p,!1,o),S=[];return b.length?(f.getSortedVisibleDatasetMetas().forEach(I=>{const N=b[0].index,$=I.data[N];$&&!$.skip&&S.push({element:$,datasetIndex:I.index,index:N})}),S):[]},dataset(f,s,r,o){const l=Ea(s,f),p=r.axis||"xy";let b=r.intersect?ds(f,l,p,o):qr(f,l,p,!1,o);if(b.length>0){const S=b[0].datasetIndex,I=f.getDatasetMeta(S).data;b=[];for(let N=0;N<I.length;++N)b.push({element:I[N],datasetIndex:S,index:N})}return b},point:(f,s,r,o)=>ds(f,Ea(s,f),r.axis||"xy",o),nearest:(f,s,r,o)=>qr(f,Ea(s,f),r.axis||"xy",r.intersect,o),x:(f,s,r,o)=>tc(f,s,{axis:"x",intersect:r.intersect},o),y:(f,s,r,o)=>tc(f,s,{axis:"y",intersect:r.intersect},o)}};const Uo=["left","top","right","bottom"];function Uc(f,s){return f.filter(r=>r.pos===s)}function wu(f,s){return f.filter(r=>-1===Uo.indexOf(r.pos)&&r.box.axis===s)}function ic(f,s){return f.sort((r,o)=>{const l=s?o:r,p=s?r:o;return l.weight===p.weight?l.index-p.index:l.weight-p.weight})}function Yl(f,s,r,o){return Math.max(f[r],s[r])+Math.max(f[o],s[o])}function tu(f,s){f.top=Math.max(f.top,s.top),f.left=Math.max(f.left,s.left),f.bottom=Math.max(f.bottom,s.bottom),f.right=Math.max(f.right,s.right)}function ss(f,s,r,o){const{pos:l,box:p}=r,b=f.maxPadding;if(!ne(l)){r.size&&(f[l]-=r.size);const de=o[r.stack]||{size:0,count:1};de.size=Math.max(de.size,r.horizontal?p.height:p.width),r.size=de.size/de.count,f[l]+=r.size}p.getPadding&&tu(b,p.getPadding());const S=Math.max(0,s.outerWidth-Yl(b,f,"left","right")),I=Math.max(0,s.outerHeight-Yl(b,f,"top","bottom")),N=S!==f.w,$=I!==f.h;return f.w=S,f.h=I,r.horizontal?{same:N,other:$}:{same:$,other:N}}function nc(f,s){const r=s.maxPadding;return function(l){const p={left:0,top:0,right:0,bottom:0};return l.forEach(b=>{p[b]=Math.max(s[b],r[b])}),p}(f?["left","right"]:["top","bottom"])}function Pl(f,s,r,o){const l=[];let p,b,S,I,N,$;for(p=0,b=f.length,N=0;p<b;++p){S=f[p],I=S.box,I.update(S.width||s.w,S.height||s.h,nc(S.horizontal,s));const{same:de,other:Fe}=ss(s,r,S,o);N|=de&&l.length,$=$||Fe,I.fullSize||l.push(S)}return N&&Pl(l,s,r,o)||$}function Ca(f,s,r,o,l){f.top=r,f.left=s,f.right=s+o,f.bottom=r+l,f.width=o,f.height=l}function ha(f,s,r,o){const l=r.padding;let{x:p,y:b}=s;for(const S of f){const I=S.box,N=o[S.stack]||{count:1,placed:0,weight:1},$=S.stackWeight/N.weight||1;if(S.horizontal){const de=s.w*$,Fe=N.size||I.height;Be(N.start)&&(b=N.start),I.fullSize?Ca(I,l.left,b,r.outerWidth-l.right-l.left,Fe):Ca(I,s.left+N.placed,b,de,Fe),N.start=b,N.placed+=de,b=I.bottom}else{const de=s.h*$,Fe=N.size||I.width;Be(N.start)&&(p=N.start),I.fullSize?Ca(I,p,l.top,Fe,r.outerHeight-l.bottom-l.top):Ca(I,p,s.top+N.placed,Fe,de),N.start=p,N.placed+=de,p=I.right}}s.x=p,s.y=b}dr.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var wo={addBox(f,s){f.boxes||(f.boxes=[]),s.fullSize=s.fullSize||!1,s.position=s.position||"top",s.weight=s.weight||0,s._layers=s._layers||function(){return[{z:0,draw(r){s.draw(r)}}]},f.boxes.push(s)},removeBox(f,s){const r=f.boxes?f.boxes.indexOf(s):-1;-1!==r&&f.boxes.splice(r,1)},configure(f,s,r){s.fullSize=r.fullSize,s.position=r.position,s.weight=r.weight},update(f,s,r,o){if(!f)return;const l=jr(f.options.layout.padding),p=Math.max(s-l.width,0),b=Math.max(r-l.height,0),S=function(f){const s=function(f){const s=[];let r,o,l,p,b,S;for(r=0,o=(f||[]).length;r<o;++r)l=f[r],({position:p,options:{stack:b,stackWeight:S=1}}=l),s.push({index:r,box:l,pos:p,horizontal:l.isHorizontal(),weight:l.weight,stack:b&&p+b,stackWeight:S});return s}(f),r=ic(s.filter(N=>N.box.fullSize),!0),o=ic(Uc(s,"left"),!0),l=ic(Uc(s,"right")),p=ic(Uc(s,"top"),!0),b=ic(Uc(s,"bottom")),S=wu(s,"x"),I=wu(s,"y");return{fullSize:r,leftAndTop:o.concat(p),rightAndBottom:l.concat(I).concat(b).concat(S),chartArea:Uc(s,"chartArea"),vertical:o.concat(l).concat(I),horizontal:p.concat(b).concat(S)}}(f.boxes),I=S.vertical,N=S.horizontal;ie(f.boxes,xt=>{"function"==typeof xt.beforeLayout&&xt.beforeLayout()});const $=I.reduce((xt,Gt)=>Gt.box.options&&!1===Gt.box.options.display?xt:xt+1,0)||1,de=Object.freeze({outerWidth:s,outerHeight:r,padding:l,availableWidth:p,availableHeight:b,vBoxMaxWidth:p/2/$,hBoxMaxHeight:b/2}),Fe=Object.assign({},l);tu(Fe,jr(o));const qe=Object.assign({maxPadding:Fe,w:p,h:b,x:l.left,y:l.top},l),Et=function(f,s){const r=function(f){const s={};for(const r of f){const{stack:o,pos:l,stackWeight:p}=r;if(!o||!Uo.includes(l))continue;const b=s[o]||(s[o]={count:0,placed:0,weight:0,size:0});b.count++,b.weight+=p}return s}(f),{vBoxMaxWidth:o,hBoxMaxHeight:l}=s;let p,b,S;for(p=0,b=f.length;p<b;++p){S=f[p];const{fullSize:I}=S.box,N=r[S.stack],$=N&&S.stackWeight/N.weight;S.horizontal?(S.width=$?$*o:I&&s.availableWidth,S.height=l):(S.width=o,S.height=$?$*l:I&&s.availableHeight)}return r}(I.concat(N),de);Pl(S.fullSize,qe,de,Et),Pl(I,qe,de,Et),Pl(N,qe,de,Et)&&Pl(I,qe,de,Et),function(f){const s=f.maxPadding;function r(o){const l=Math.max(s[o]-f[o],0);return f[o]+=l,l}f.y+=r("top"),f.x+=r("left"),r("right"),r("bottom")}(qe),ha(S.leftAndTop,qe,de,Et),qe.x+=qe.w,qe.y+=qe.h,ha(S.rightAndBottom,qe,de,Et),f.chartArea={left:qe.left,top:qe.top,right:qe.left+qe.w,bottom:qe.top+qe.h,height:qe.h,width:qe.w},ie(S.chartArea,xt=>{const Gt=xt.box;Object.assign(Gt,f.chartArea),Gt.update(qe.w,qe.h,{left:0,top:0,right:0,bottom:0})})}};class ka{acquireContext(s,r){}releaseContext(s){return!1}addEventListener(s,r,o){}removeEventListener(s,r,o){}getDevicePixelRatio(){return 1}getMaximumSize(s,r,o,l){return r=Math.max(0,r||s.width),o=o||s.height,{width:r,height:Math.max(0,l?Math.floor(r/l):o)}}isAttached(s){return!0}updateConfig(s){}}class Wa extends ka{acquireContext(s){return s&&s.getContext&&s.getContext("2d")||null}updateConfig(s){s.options.animation=!1}}const Nl="$chartjs",iu={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},na=f=>null===f||""===f,Ta=!!Fi&&{passive:!0};function Fl(f,s,r){f.canvas.removeEventListener(s,r,Ta)}function tl(f,s){for(const r of f)if(r===s||r.contains(s))return!0}function oc(f,s,r){const o=f.canvas,l=new MutationObserver(p=>{let b=!1;for(const S of p)b=b||tl(S.addedNodes,o),b=b&&!tl(S.removedNodes,o);b&&r()});return l.observe(document,{childList:!0,subtree:!0}),l}function Cd(f,s,r){const o=f.canvas,l=new MutationObserver(p=>{let b=!1;for(const S of p)b=b||tl(S.removedNodes,o),b=b&&!tl(S.addedNodes,o);b&&r()});return l.observe(document,{childList:!0,subtree:!0}),l}const La=new Map;let Bl=0;function sc(){const f=window.devicePixelRatio;f!==Bl&&(Bl=f,La.forEach((s,r)=>{r.currentDevicePixelRatio!==f&&s()}))}function Ir(f,s,r){const o=f.canvas,l=o&&cl(o);if(!l)return;const p=se((S,I)=>{const N=l.clientWidth;r(S,I),N<l.clientWidth&&r()},window),b=new ResizeObserver(S=>{const I=S[0],N=I.contentRect.width,$=I.contentRect.height;0===N&&0===$||p(N,$)});return b.observe(l),function(f,s){La.size||window.addEventListener("resize",sc),La.set(f,s)}(f,p),b}function ac(f,s,r){r&&r.disconnect(),"resize"===s&&function(f){La.delete(f),La.size||window.removeEventListener("resize",sc)}(f)}function lc(f,s,r){const o=f.canvas,l=se(p=>{null!==f.ctx&&r(function(f,s){const r=iu[f.type]||f.type,{x:o,y:l}=Qe(f,s);return{type:r,chart:s,native:f,x:void 0!==o?o:null,y:void 0!==l?l:null}}(p,f))},f,p=>{const b=p[0];return[b,b.offsetX,b.offsetY]});return function(f,s,r){f.addEventListener(s,r,Ta)}(o,s,l),l}class Ec extends ka{acquireContext(s,r){const o=s&&s.getContext&&s.getContext("2d");return o&&o.canvas===s?(function(f,s){const r=f.style,o=f.getAttribute("height"),l=f.getAttribute("width");if(f[Nl]={initial:{height:o,width:l,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",na(l)){const p=un(f,"width");void 0!==p&&(f.width=p)}if(na(o))if(""===f.style.height)f.height=f.width/(s||2);else{const p=un(f,"height");void 0!==p&&(f.height=p)}}(s,r),o):null}releaseContext(s){const r=s.canvas;if(!r[Nl])return!1;const o=r[Nl].initial;["height","width"].forEach(p=>{const b=o[p];Te(b)?r.removeAttribute(p):r.setAttribute(p,b)});const l=o.style||{};return Object.keys(l).forEach(p=>{r.style[p]=l[p]}),r.width=r.width,delete r[Nl],!0}addEventListener(s,r,o){this.removeEventListener(s,r),(s.$proxies||(s.$proxies={}))[r]=({attach:oc,detach:Cd,resize:Ir}[r]||lc)(s,r,o)}removeEventListener(s,r){const o=s.$proxies||(s.$proxies={}),l=o[r];l&&(({attach:ac,detach:ac,resize:ac}[r]||Fl)(s,r,l),o[r]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(s,r,o,l){return function(f,s,r,o){const l=ea(f),p=G(l,"margin"),b=Gs(l.maxWidth,f,"clientWidth")||di,S=Gs(l.maxHeight,f,"clientHeight")||di,I=function(f,s,r){let o,l;if(void 0===s||void 0===r){const p=cl(f);if(p){const b=p.getBoundingClientRect(),S=ea(p),I=G(S,"border","width"),N=G(S,"padding");s=b.width-N.width-I.width,r=b.height-N.height-I.height,o=Gs(S.maxWidth,p,"clientWidth"),l=Gs(S.maxHeight,p,"clientHeight")}else s=f.clientWidth,r=f.clientHeight}return{width:s,height:r,maxWidth:o||di,maxHeight:l||di}}(f,s,r);let{width:N,height:$}=I;if("content-box"===l.boxSizing){const de=G(l,"border","width"),Fe=G(l,"padding");N-=Fe.width+de.width,$-=Fe.height+de.height}return N=Math.max(0,N-p.width),$=Math.max(0,o?Math.floor(N/o):$-p.height),N=Yt(Math.min(N,b,I.maxWidth)),$=Yt(Math.min($,S,I.maxHeight)),N&&!$&&($=Yt(N/2)),{width:N,height:$}}(s,r,o,l)}isAttached(s){const r=cl(s);return!(!r||!r.isConnected)}}class ra{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(s){const{x:r,y:o}=this.getProps(["x","y"],s);return{x:r,y:o}}hasValue(){return ut(this.x)&&ut(this.y)}getProps(s,r){const o=this.$animations;if(!r||!o)return this;const l={};return s.forEach(p=>{l[p]=o[p]&&o[p].active()?o[p]._to:this[p]}),l}}ra.defaults={},ra.defaultRoutes=void 0;const Cc={values:f=>ye(f)?f:""+f,numeric(f,s,r){if(0===f)return"0";const o=this.chart.options.locale;let l,p=f;if(r.length>1){const N=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(N<1e-4||N>1e15)&&(l="scientific"),p=function(f,s){let r=s.length>3?s[2].value-s[1].value:s[1].value-s[0].value;return Math.abs(r)>=1&&f!==Math.floor(f)&&(r=f-Math.floor(f)),r}(f,r)}const b=nt(Math.abs(p)),S=Math.max(Math.min(-1*Math.floor(b),20),0),I={notation:l,minimumFractionDigits:S,maximumFractionDigits:S};return Object.assign(I,this.options.ticks.format),ar(f,o,I)},logarithmic(f,s,r){if(0===f)return"0";const o=f/Math.pow(10,Math.floor(nt(f)));return 1===o||2===o||5===o?Cc.numeric.call(this,f,s,r):""}};var Tc={formatters:Cc};function dc(f,s,r,o,l){const p=He(o,0),b=Math.min(He(l,f.length),f.length);let I,N,$,S=0;for(r=Math.ceil(r),l&&(I=l-o,r=I/Math.floor(I/r)),$=p;$<0;)S++,$=Math.round(p+S*r);for(N=Math.max(p,0);N<b;N++)N===$&&(s.push(f[N]),S++,$=Math.round(p+S*r))}dr.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(f,s)=>s.lineWidth,tickColor:(f,s)=>s.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Tc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),dr.route("scale.ticks","color","","color"),dr.route("scale.grid","color","","borderColor"),dr.route("scale.grid","borderColor","","borderColor"),dr.route("scale.title","color","","color"),dr.describe("scale",{_fallback:!1,_scriptable:f=>!f.startsWith("before")&&!f.startsWith("after")&&"callback"!==f&&"parser"!==f,_indexable:f=>"borderDash"!==f&&"tickBorderDash"!==f}),dr.describe("scales",{_fallback:"scale"}),dr.describe("scale.ticks",{_scriptable:f=>"backdropPadding"!==f&&"callback"!==f,_indexable:f=>"backdropPadding"!==f});const fl=(f,s,r)=>"top"===s||"left"===s?f[s]+r:f[s]-r;function il(f,s){const r=[],o=f.length/s,l=f.length;let p=0;for(;p<l;p+=o)r.push(f[Math.floor(p)]);return r}function hc(f,s,r){const o=f.ticks.length,l=Math.min(s,o-1),p=f._startPixel,b=f._endPixel,S=1e-6;let N,I=f.getPixelForTick(l);if(!(r&&(N=1===o?Math.max(I-p,b-I):0===s?(f.getPixelForTick(1)-I)/2:(I-f.getPixelForTick(l-1))/2,I+=l<s?N:-N,I<p-S||I>b+S)))return I}function Wc(f){return f.drawTicks?f.tickLength:0}function ru(f,s){if(!f.display)return 0;const r=ao(f.font,s),o=jr(f.padding);return(ye(f.text)?f.text.length:1)*r.lineHeight+o.height}function Xl(f,s,r){let o=Ge(f);return(r&&"right"!==s||!r&&"right"===s)&&(o=(f=>"left"===f?"right":"right"===f?"left":f)(o)),o}class pa extends ra{constructor(s){super(),this.id=s.id,this.type=s.type,this.options=void 0,this.ctx=s.ctx,this.chart=s.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(s){this.options=s.setContext(this.getContext()),this.axis=s.axis,this._userMin=this.parse(s.min),this._userMax=this.parse(s.max),this._suggestedMin=this.parse(s.suggestedMin),this._suggestedMax=this.parse(s.suggestedMax)}parse(s,r){return s}getUserBounds(){let{_userMin:s,_userMax:r,_suggestedMin:o,_suggestedMax:l}=this;return s=ae(s,Number.POSITIVE_INFINITY),r=ae(r,Number.NEGATIVE_INFINITY),o=ae(o,Number.POSITIVE_INFINITY),l=ae(l,Number.NEGATIVE_INFINITY),{min:ae(s,o),max:ae(r,l),minDefined:ge(s),maxDefined:ge(r)}}getMinMax(s){let b,{min:r,max:o,minDefined:l,maxDefined:p}=this.getUserBounds();if(l&&p)return{min:r,max:o};const S=this.getMatchingVisibleMetas();for(let I=0,N=S.length;I<N;++I)b=S[I].controller.getMinMax(this,s),l||(r=Math.min(r,b.min)),p||(o=Math.max(o,b.max));return r=p&&r>o?o:r,o=l&&r>o?r:o,{min:ae(r,ae(o,r)),max:ae(o,ae(r,o))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const s=this.chart.data;return this.options.labels||(this.isHorizontal()?s.xLabels:s.yLabels)||s.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ue(this.options.beforeUpdate,[this])}update(s,r,o){const{beginAtZero:l,grace:p,ticks:b}=this.options,S=b.sampleSize;this.beforeUpdate(),this.maxWidth=s,this.maxHeight=r,this._margins=o=Object.assign({left:0,right:0,top:0,bottom:0},o),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+o.left+o.right:this.height+o.top+o.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(f,s,r){const{min:o,max:l}=f,p=Ee(s,(l-o)/2),b=(S,I)=>r&&0===S?0:S+I;return{min:b(o,-Math.abs(p)),max:b(l,p)}}(this,p,l),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const I=S<this.ticks.length;this._convertTicksToLabels(I?il(this.ticks,S):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),b.display&&(b.autoSkip||"auto"===b.source)&&(this.ticks=function(f,s){const r=f.options.ticks,o=r.maxTicksLimit||function(f){const s=f.options.offset,r=f._tickSize();return Math.floor(Math.min(f._length/r+(s?0:1),f._maxLength/r))}(f),l=r.major.enabled?function(f){const s=[];let r,o;for(r=0,o=f.length;r<o;r++)f[r].major&&s.push(r);return s}(s):[],p=l.length,b=l[0],S=l[p-1],I=[];if(p>o)return function(f,s,r,o){let b,l=0,p=r[0];for(o=Math.ceil(o),b=0;b<f.length;b++)b===p&&(s.push(f[b]),l++,p=r[l*o])}(s,I,l,p/o),I;const N=function(f,s,r){const o=function(f){const s=f.length;let r,o;if(s<2)return!1;for(o=f[0],r=1;r<s;++r)if(f[r]-f[r-1]!==o)return!1;return o}(f),l=s.length/r;if(!o)return Math.max(l,1);const p=function(f){const s=[],r=Math.sqrt(f);let o;for(o=1;o<r;o++)f%o==0&&(s.push(o),s.push(f/o));return r===(0|r)&&s.push(r),s.sort((l,p)=>l-p).pop(),s}(o);for(let b=0,S=p.length-1;b<S;b++){const I=p[b];if(I>l)return I}return Math.max(l,1)}(l,s,o);if(p>0){let $,de;const Fe=p>1?Math.round((S-b)/(p-1)):null;for(dc(s,I,N,Te(Fe)?0:b-Fe,b),$=0,de=p-1;$<de;$++)dc(s,I,N,l[$],l[$+1]);return dc(s,I,N,S,Te(Fe)?s.length:S+Fe),I}return dc(s,I,N),I}(this,this.ticks),this._labelSizes=null),I&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let r,o,s=this.options.reverse;this.isHorizontal()?(r=this.left,o=this.right):(r=this.top,o=this.bottom,s=!s),this._startPixel=r,this._endPixel=o,this._reversePixels=s,this._length=o-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ue(this.options.afterUpdate,[this])}beforeSetDimensions(){ue(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ue(this.options.afterSetDimensions,[this])}_callHooks(s){this.chart.notifyPlugins(s,this.getContext()),ue(this.options[s],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ue(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(s){const r=this.options.ticks;let o,l,p;for(o=0,l=s.length;o<l;o++)p=s[o],p.label=ue(r.callback,[p.value,o,s],this)}afterTickToLabelConversion(){ue(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ue(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const s=this.options,r=s.ticks,o=this.ticks.length,l=r.minRotation||0,p=r.maxRotation;let S,I,N,b=l;if(!this._isVisible()||!r.display||l>=p||o<=1||!this.isHorizontal())return void(this.labelRotation=l);const $=this._getLabelSizes(),de=$.widest.width,Fe=$.highest.height,qe=zt(this.chart.width-de,0,this.maxWidth);S=s.offset?this.maxWidth/o:qe/(o-1),de+6>S&&(S=qe/(o-(s.offset?.5:1)),I=this.maxHeight-Wc(s.grid)-r.padding-ru(s.title,this.chart.options.font),N=Math.sqrt(de*de+Fe*Fe),b=yi(Math.min(Math.asin(zt(($.highest.height+6)/S,-1,1)),Math.asin(zt(I/N,-1,1))-Math.asin(zt(Fe/N,-1,1)))),b=Math.max(l,Math.min(p,b))),this.labelRotation=b}afterCalculateLabelRotation(){ue(this.options.afterCalculateLabelRotation,[this])}beforeFit(){ue(this.options.beforeFit,[this])}fit(){const s={width:0,height:0},{chart:r,options:{ticks:o,title:l,grid:p}}=this,b=this._isVisible(),S=this.isHorizontal();if(b){const I=ru(l,r.options.font);if(S?(s.width=this.maxWidth,s.height=Wc(p)+I):(s.height=this.maxHeight,s.width=Wc(p)+I),o.display&&this.ticks.length){const{first:N,last:$,widest:de,highest:Fe}=this._getLabelSizes(),qe=2*o.padding,Et=wi(this.labelRotation),xt=Math.cos(Et),Gt=Math.sin(Et);S?s.height=Math.min(this.maxHeight,s.height+(o.mirror?0:Gt*de.width+xt*Fe.height)+qe):s.width=Math.min(this.maxWidth,s.width+(o.mirror?0:xt*de.width+Gt*Fe.height)+qe),this._calculatePadding(N,$,Gt,xt)}}this._handleMargins(),S?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=s.height):(this.width=s.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(s,r,o,l){const{ticks:{align:p,padding:b},position:S}=this.options,I=0!==this.labelRotation,N="top"!==S&&"x"===this.axis;if(this.isHorizontal()){const $=this.getPixelForTick(0)-this.left,de=this.right-this.getPixelForTick(this.ticks.length-1);let Fe=0,qe=0;I?N?(Fe=l*s.width,qe=o*r.height):(Fe=o*s.height,qe=l*r.width):"start"===p?qe=r.width:"end"===p?Fe=s.width:(Fe=s.width/2,qe=r.width/2),this.paddingLeft=Math.max((Fe-$+b)*this.width/(this.width-$),0),this.paddingRight=Math.max((qe-de+b)*this.width/(this.width-de),0)}else{let $=r.height/2,de=s.height/2;"start"===p?($=0,de=s.height):"end"===p&&($=r.height,de=0),this.paddingTop=$+b,this.paddingBottom=de+b}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ue(this.options.afterFit,[this])}isHorizontal(){const{axis:s,position:r}=this.options;return"top"===r||"bottom"===r||"x"===s}isFullSize(){return this.options.fullSize}_convertTicksToLabels(s){let r,o;for(this.beforeTickToLabelConversion(),this.generateTickLabels(s),r=0,o=s.length;r<o;r++)Te(s[r].label)&&(s.splice(r,1),o--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let s=this._labelSizes;if(!s){const r=this.options.ticks.sampleSize;let o=this.ticks;r<o.length&&(o=il(o,r)),this._labelSizes=s=this._computeLabelSizes(o,o.length)}return s}_computeLabelSizes(s,r){const{ctx:o,_longestTextCache:l}=this,p=[],b=[];let N,$,de,Fe,qe,Et,xt,Gt,Wt,Ti,an,S=0,I=0;for(N=0;N<r;++N){if(Fe=s[N].label,qe=this._resolveTickFontOptions(N),o.font=Et=qe.string,xt=l[Et]=l[Et]||{data:{},gc:[]},Gt=qe.lineHeight,Wt=Ti=0,Te(Fe)||ye(Fe)){if(ye(Fe))for($=0,de=Fe.length;$<de;++$)an=Fe[$],!Te(an)&&!ye(an)&&(Wt=$r(o,xt.data,xt.gc,Wt,an),Ti+=Gt)}else Wt=$r(o,xt.data,xt.gc,Wt,Fe),Ti=Gt;p.push(Wt),b.push(Ti),S=Math.max(Wt,S),I=Math.max(Ti,I)}!function(f,s){ie(f,r=>{const o=r.gc,l=o.length/2;let p;if(l>s){for(p=0;p<l;++p)delete r.data[o[p]];o.splice(0,l)}})}(l,r);const Ui=p.indexOf(S),Yi=b.indexOf(I),gn=vn=>({width:p[vn]||0,height:b[vn]||0});return{first:gn(0),last:gn(r-1),widest:gn(Ui),highest:gn(Yi),widths:p,heights:b}}getLabelForValue(s){return s}getPixelForValue(s,r){return NaN}getValueForPixel(s){}getPixelForTick(s){const r=this.ticks;return s<0||s>r.length-1?null:this.getPixelForValue(r[s].value)}getPixelForDecimal(s){this._reversePixels&&(s=1-s);const r=this._startPixel+s*this._length;return zt(this._alignToPixels?Ss(this.chart,r,0):r,-32768,32767)}getDecimalForPixel(s){const r=(s-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:s,max:r}=this;return s<0&&r<0?r:s>0&&r>0?s:0}getContext(s){const r=this.ticks||[];if(s>=0&&s<r.length){const o=r[s];return o.$context||(o.$context=function(f,s,r){return Ko(f,{tick:r,index:s,type:"tick"})}(this.getContext(),s,o))}return this.$context||(this.$context=function(f,s){return Ko(f,{scale:s,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const s=this.options.ticks,r=wi(this.labelRotation),o=Math.abs(Math.cos(r)),l=Math.abs(Math.sin(r)),p=this._getLabelSizes(),b=s.autoSkipPadding||0,S=p?p.widest.width+b:0,I=p?p.highest.height+b:0;return this.isHorizontal()?I*o>S*l?S/o:I/l:I*l<S*o?I/o:S/l}_isVisible(){const s=this.options.display;return"auto"!==s?!!s:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(s){const r=this.axis,o=this.chart,l=this.options,{grid:p,position:b}=l,S=p.offset,I=this.isHorizontal(),$=this.ticks.length+(S?1:0),de=Wc(p),Fe=[],qe=p.setContext(this.getContext()),Et=qe.drawBorder?qe.borderWidth:0,xt=Et/2,Gt=function(Tn){return Ss(o,Tn,Et)};let Wt,Ti,an,Ui,Yi,gn,vn,Mn,Fn,yn,qi,Hn;if("top"===b)Wt=Gt(this.bottom),gn=this.bottom-de,Mn=Wt-xt,yn=Gt(s.top)+xt,Hn=s.bottom;else if("bottom"===b)Wt=Gt(this.top),yn=s.top,Hn=Gt(s.bottom)-xt,gn=Wt+xt,Mn=this.top+de;else if("left"===b)Wt=Gt(this.right),Yi=this.right-de,vn=Wt-xt,Fn=Gt(s.left)+xt,qi=s.right;else if("right"===b)Wt=Gt(this.left),Fn=s.left,qi=Gt(s.right)-xt,Yi=Wt+xt,vn=this.left+de;else if("x"===r){if("center"===b)Wt=Gt((s.top+s.bottom)/2+.5);else if(ne(b)){const Tn=Object.keys(b)[0];Wt=Gt(this.chart.scales[Tn].getPixelForValue(b[Tn]))}yn=s.top,Hn=s.bottom,gn=Wt+xt,Mn=gn+de}else if("y"===r){if("center"===b)Wt=Gt((s.left+s.right)/2);else if(ne(b)){const Tn=Object.keys(b)[0];Wt=Gt(this.chart.scales[Tn].getPixelForValue(b[Tn]))}Yi=Wt-xt,vn=Yi-de,Fn=s.left,qi=s.right}const mr=He(l.ticks.maxTicksLimit,$),mn=Math.max(1,Math.ceil($/mr));for(Ti=0;Ti<$;Ti+=mn){const Tn=p.setContext(this.getContext(Ti)),Hi=Tn.lineWidth,ln=Tn.color,zn=p.borderDash||[],or=Tn.borderDashOffset,Fs=Tn.tickWidth,Qi=Tn.tickColor,Kn=Tn.tickBorderDash||[],jo=Tn.tickBorderDashOffset;an=hc(this,Ti,S),void 0!==an&&(Ui=Ss(o,an,Hi),I?Yi=vn=Fn=qi=Ui:gn=Mn=yn=Hn=Ui,Fe.push({tx1:Yi,ty1:gn,tx2:vn,ty2:Mn,x1:Fn,y1:yn,x2:qi,y2:Hn,width:Hi,color:ln,borderDash:zn,borderDashOffset:or,tickWidth:Fs,tickColor:Qi,tickBorderDash:Kn,tickBorderDashOffset:jo}))}return this._ticksLength=$,this._borderValue=Wt,Fe}_computeLabelItems(s){const r=this.axis,o=this.options,{position:l,ticks:p}=o,b=this.isHorizontal(),S=this.ticks,{align:I,crossAlign:N,padding:$,mirror:de}=p,Fe=Wc(o.grid),qe=Fe+$,Et=de?-$:qe,xt=-wi(this.labelRotation),Gt=[];let Wt,Ti,an,Ui,Yi,gn,vn,Mn,Fn,yn,qi,Hn,mr="middle";if("top"===l)gn=this.bottom-Et,vn=this._getXAxisLabelAlignment();else if("bottom"===l)gn=this.top+Et,vn=this._getXAxisLabelAlignment();else if("left"===l){const Tn=this._getYAxisLabelAlignment(Fe);vn=Tn.textAlign,Yi=Tn.x}else if("right"===l){const Tn=this._getYAxisLabelAlignment(Fe);vn=Tn.textAlign,Yi=Tn.x}else if("x"===r){if("center"===l)gn=(s.top+s.bottom)/2+qe;else if(ne(l)){const Tn=Object.keys(l)[0];gn=this.chart.scales[Tn].getPixelForValue(l[Tn])+qe}vn=this._getXAxisLabelAlignment()}else if("y"===r){if("center"===l)Yi=(s.left+s.right)/2-qe;else if(ne(l)){const Tn=Object.keys(l)[0];Yi=this.chart.scales[Tn].getPixelForValue(l[Tn])}vn=this._getYAxisLabelAlignment(Fe).textAlign}"y"===r&&("start"===I?mr="top":"end"===I&&(mr="bottom"));const mn=this._getLabelSizes();for(Wt=0,Ti=S.length;Wt<Ti;++Wt){an=S[Wt],Ui=an.label;const Tn=p.setContext(this.getContext(Wt));Mn=this.getPixelForTick(Wt)+p.labelOffset,Fn=this._resolveTickFontOptions(Wt),yn=Fn.lineHeight,qi=ye(Ui)?Ui.length:1;const Hi=qi/2,ln=Tn.color,zn=Tn.textStrokeColor,or=Tn.textStrokeWidth;let Fs;if(b?(Yi=Mn,Hn="top"===l?"near"===N||0!==xt?-qi*yn+yn/2:"center"===N?-mn.highest.height/2-Hi*yn+yn:yn/2-mn.highest.height:"near"===N||0!==xt?yn/2:"center"===N?mn.highest.height/2-Hi*yn:mn.highest.height-qi*yn,de&&(Hn*=-1)):(gn=Mn,Hn=(1-qi)*yn/2),Tn.showLabelBackdrop){const Qi=jr(Tn.backdropPadding),Kn=mn.heights[Wt],jo=mn.widths[Wt];let al=gn+Hn-Qi.top,id=Yi-Qi.left;switch(mr){case"middle":al-=Kn/2;break;case"bottom":al-=Kn}switch(vn){case"center":id-=jo/2;break;case"right":id-=jo}Fs={left:id,top:al,width:jo+Qi.width,height:Kn+Qi.height,color:Tn.backdropColor}}Gt.push({rotation:xt,label:Ui,font:Fn,color:ln,strokeColor:zn,strokeWidth:or,textOffset:Hn,textAlign:vn,textBaseline:mr,translation:[Yi,gn],backdrop:Fs})}return Gt}_getXAxisLabelAlignment(){const{position:s,ticks:r}=this.options;if(-wi(this.labelRotation))return"top"===s?"left":"right";let l="center";return"start"===r.align?l="left":"end"===r.align&&(l="right"),l}_getYAxisLabelAlignment(s){const{position:r,ticks:{crossAlign:o,mirror:l,padding:p}}=this.options,S=s+p,I=this._getLabelSizes().widest.width;let N,$;return"left"===r?l?($=this.right+p,"near"===o?N="left":"center"===o?(N="center",$+=I/2):(N="right",$+=I)):($=this.right-S,"near"===o?N="right":"center"===o?(N="center",$-=I/2):(N="left",$=this.left)):"right"===r?l?($=this.left+p,"near"===o?N="right":"center"===o?(N="center",$-=I/2):(N="left",$-=I)):($=this.left+S,"near"===o?N="left":"center"===o?(N="center",$+=I/2):(N="right",$=this.right)):N="right",{textAlign:N,x:$}}_computeLabelArea(){if(this.options.ticks.mirror)return;const s=this.chart,r=this.options.position;return"left"===r||"right"===r?{top:0,left:this.left,bottom:s.height,right:this.right}:"top"===r||"bottom"===r?{top:this.top,left:0,bottom:this.bottom,right:s.width}:void 0}drawBackground(){const{ctx:s,options:{backgroundColor:r},left:o,top:l,width:p,height:b}=this;r&&(s.save(),s.fillStyle=r,s.fillRect(o,l,p,b),s.restore())}getLineWidthForValue(s){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const l=this.ticks.findIndex(p=>p.value===s);return l>=0?r.setContext(this.getContext(l)).lineWidth:0}drawGrid(s){const r=this.options.grid,o=this.ctx,l=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(s));let p,b;const S=(I,N,$)=>{!$.width||!$.color||(o.save(),o.lineWidth=$.width,o.strokeStyle=$.color,o.setLineDash($.borderDash||[]),o.lineDashOffset=$.borderDashOffset,o.beginPath(),o.moveTo(I.x,I.y),o.lineTo(N.x,N.y),o.stroke(),o.restore())};if(r.display)for(p=0,b=l.length;p<b;++p){const I=l[p];r.drawOnChartArea&&S({x:I.x1,y:I.y1},{x:I.x2,y:I.y2},I),r.drawTicks&&S({x:I.tx1,y:I.ty1},{x:I.tx2,y:I.ty2},{color:I.tickColor,width:I.tickWidth,borderDash:I.tickBorderDash,borderDashOffset:I.tickBorderDashOffset})}}drawBorder(){const{chart:s,ctx:r,options:{grid:o}}=this,l=o.setContext(this.getContext()),p=o.drawBorder?l.borderWidth:0;if(!p)return;const b=o.setContext(this.getContext(0)).lineWidth,S=this._borderValue;let I,N,$,de;this.isHorizontal()?(I=Ss(s,this.left,p)-p/2,N=Ss(s,this.right,b)+b/2,$=de=S):($=Ss(s,this.top,p)-p/2,de=Ss(s,this.bottom,b)+b/2,I=N=S),r.save(),r.lineWidth=l.borderWidth,r.strokeStyle=l.borderColor,r.beginPath(),r.moveTo(I,$),r.lineTo(N,de),r.stroke(),r.restore()}drawLabels(s){if(!this.options.ticks.display)return;const o=this.ctx,l=this._computeLabelArea();l&&Ho(o,l);const p=this._labelItems||(this._labelItems=this._computeLabelItems(s));let b,S;for(b=0,S=p.length;b<S;++b){const I=p[b],N=I.font,$=I.label;I.backdrop&&(o.fillStyle=I.backdrop.color,o.fillRect(I.backdrop.left,I.backdrop.top,I.backdrop.width,I.backdrop.height)),qo(o,$,0,I.textOffset,N,I)}l&&Xa(o)}drawTitle(){const{ctx:s,options:{position:r,title:o,reverse:l}}=this;if(!o.display)return;const p=ao(o.font),b=jr(o.padding),S=o.align;let I=p.lineHeight/2;"bottom"===r||"center"===r||ne(r)?(I+=b.bottom,ye(o.text)&&(I+=p.lineHeight*(o.text.length-1))):I+=b.top;const{titleX:N,titleY:$,maxWidth:de,rotation:Fe}=function(f,s,r,o){const{top:l,left:p,bottom:b,right:S,chart:I}=f,{chartArea:N,scales:$}=I;let Fe,qe,Et,de=0;const xt=b-l,Gt=S-p;if(f.isHorizontal()){if(qe=_e(o,p,S),ne(r)){const Wt=Object.keys(r)[0];Et=$[Wt].getPixelForValue(r[Wt])+xt-s}else Et="center"===r?(N.bottom+N.top)/2+xt-s:fl(f,r,s);Fe=S-p}else{if(ne(r)){const Wt=Object.keys(r)[0];qe=$[Wt].getPixelForValue(r[Wt])-Gt+s}else qe="center"===r?(N.left+N.right)/2-Gt+s:fl(f,r,s);Et=_e(o,b,l),de="left"===r?-et:et}return{titleX:qe,titleY:Et,maxWidth:Fe,rotation:de}}(this,I,r,S);qo(s,o.text,0,0,p,{color:o.color,maxWidth:de,rotation:Fe,textAlign:Xl(S,r,l),textBaseline:"middle",translation:[N,$]})}draw(s){!this._isVisible()||(this.drawBackground(),this.drawGrid(s),this.drawBorder(),this.drawTitle(),this.drawLabels(s))}_layers(){const s=this.options,r=s.ticks&&s.ticks.z||0,o=He(s.grid&&s.grid.z,-1);return this._isVisible()&&this.draw===pa.prototype.draw?[{z:o,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:o+1,draw:()=>{this.drawBorder()}},{z:r,draw:l=>{this.drawLabels(l)}}]:[{z:r,draw:l=>{this.draw(l)}}]}getMatchingVisibleMetas(s){const r=this.chart.getSortedVisibleDatasetMetas(),o=this.axis+"AxisID",l=[];let p,b;for(p=0,b=r.length;p<b;++p){const S=r[p];S[o]===this.id&&(!s||S.type===s)&&l.push(S)}return l}_resolveTickFontOptions(s){return ao(this.options.ticks.setContext(this.getContext(s)).font)}_maxDigits(){const s=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/s}}class nl{constructor(s,r,o){this.type=s,this.scope=r,this.override=o,this.items=Object.create(null)}isForType(s){return Object.prototype.isPrototypeOf.call(this.type.prototype,s.prototype)}register(s){const r=Object.getPrototypeOf(s);let o;var f;"id"in(f=r)&&"defaults"in f&&(o=this.register(r));const l=this.items,p=s.id,b=this.scope+"."+p;if(!p)throw new Error("class does not have id: "+s);return p in l||(l[p]=s,function(f,s,r){const o=vt(Object.create(null),[r?dr.get(r):{},dr.get(s),f.defaults]);dr.set(s,o),f.defaultRoutes&&function(f,s){Object.keys(s).forEach(r=>{const o=r.split("."),l=o.pop(),p=[f].concat(o).join("."),b=s[r].split("."),S=b.pop(),I=b.join(".");dr.route(p,l,I,S)})}(s,f.defaultRoutes),f.descriptors&&dr.describe(s,f.descriptors)}(s,b,o),this.override&&dr.override(s.id,s.overrides)),b}get(s){return this.items[s]}unregister(s){const r=this.items,o=s.id,l=this.scope;o in r&&delete r[o],l&&o in dr[l]&&(delete dr[l][o],this.override&&delete Ao[o])}}var wa=new class{constructor(){this.controllers=new nl(da,"datasets",!0),this.elements=new nl(ra,"elements"),this.plugins=new nl(Object,"plugins"),this.scales=new nl(pa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...s){this._each("register",s)}remove(...s){this._each("unregister",s)}addControllers(...s){this._each("register",s,this.controllers)}addElements(...s){this._each("register",s,this.elements)}addPlugins(...s){this._each("register",s,this.plugins)}addScales(...s){this._each("register",s,this.scales)}getController(s){return this._get(s,this.controllers,"controller")}getElement(s){return this._get(s,this.elements,"element")}getPlugin(s){return this._get(s,this.plugins,"plugin")}getScale(s){return this._get(s,this.scales,"scale")}removeControllers(...s){this._each("unregister",s,this.controllers)}removeElements(...s){this._each("unregister",s,this.elements)}removePlugins(...s){this._each("unregister",s,this.plugins)}removeScales(...s){this._each("unregister",s,this.scales)}_each(s,r,o){[...r].forEach(l=>{const p=o||this._getRegistryForType(l);o||p.isForType(l)||p===this.plugins&&l.id?this._exec(s,p,l):ie(l,b=>{const S=o||this._getRegistryForType(b);this._exec(s,S,b)})})}_exec(s,r,o){const l=gi(s);ue(o["before"+l],[],o),r[s](o),ue(o["after"+l],[],o)}_getRegistryForType(s){for(let r=0;r<this._typedRegistries.length;r++){const o=this._typedRegistries[r];if(o.isForType(s))return o}return this.plugins}_get(s,r,o){const l=r.get(s);if(void 0===l)throw new Error('"'+s+'" is not a registered '+o+".");return l}};class so{constructor(){this._init=[]}notify(s,r,o,l){"beforeInit"===r&&(this._init=this._createDescriptors(s,!0),this._notify(this._init,s,"install"));const p=l?this._descriptors(s).filter(l):this._descriptors(s),b=this._notify(p,s,r,o);return"afterDestroy"===r&&(this._notify(p,s,"stop"),this._notify(this._init,s,"uninstall")),b}_notify(s,r,o,l){l=l||{};for(const p of s){const b=p.plugin;if(!1===ue(b[o],[r,l,p.options],b)&&l.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(s){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(s);return this._notifyStateChanges(s),r}_createDescriptors(s,r){const o=s&&s.config,l=He(o.options&&o.options.plugins,{}),p=function(f){const s=[],r=Object.keys(wa.plugins.items);for(let l=0;l<r.length;l++)s.push(wa.getPlugin(r[l]));const o=f.plugins||[];for(let l=0;l<o.length;l++){const p=o[l];-1===s.indexOf(p)&&s.push(p)}return s}(o);return!1!==l||r?function(f,s,r,o){const l=[],p=f.getContext();for(let b=0;b<s.length;b++){const S=s[b],N=Kl(r[S.id],o);null!==N&&l.push({plugin:S,options:Su(f.config,S,N,p)})}return l}(s,p,l,r):[]}_notifyStateChanges(s){const r=this._oldCache||[],o=this._cache,l=(p,b)=>p.filter(S=>!b.some(I=>S.plugin.id===I.plugin.id));this._notify(l(r,o),s,"stop"),this._notify(l(o,r),s,"start")}}function Kl(f,s){return s||!1!==f?!0===f?{}:f:null}function Su(f,s,r,o){const l=f.pluginScopeKeys(s),p=f.getOptionScopes(r,l);return f.createResolver(p,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gl(f,s){return((s.datasets||{})[f]||{}).indexAxis||s.indexAxis||(dr.datasets[f]||{}).indexAxis||"x"}function fc(f,s){return"x"===f||"y"===f?f:s.axis||function(f){return"top"===f||"bottom"===f?"x":"left"===f||"right"===f?"y":void 0}(s.position)||f.charAt(0).toLowerCase()}function wl(f){const s=f.options||(f.options={});s.plugins=He(s.plugins,{}),s.scales=function(f,s){const r=Ao[f.type]||{scales:{}},o=s.scales||{},l=gl(f.type,s),p=Object.create(null),b=Object.create(null);return Object.keys(o).forEach(S=>{const I=o[S];if(!ne(I))return console.error(`Invalid scale configuration for scale: ${S}`);if(I._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${S}`);const N=fc(S,I),$=function(f,s){return f===s?"_index_":"_value_"}(N,l),de=r.scales||{};p[N]=p[N]||S,b[S]=lt(Object.create(null),[{axis:N},I,de[N],de[$]])}),f.data.datasets.forEach(S=>{const I=S.type||f.type,N=S.indexAxis||gl(I,s),de=(Ao[I]||{}).scales||{};Object.keys(de).forEach(Fe=>{const qe=function(f,s){let r=f;return"_index_"===f?r=s:"_value_"===f&&(r="x"===s?"y":"x"),r}(Fe,N),Et=S[qe+"AxisID"]||p[qe]||qe;b[Et]=b[Et]||Object.create(null),lt(b[Et],[{axis:qe},o[Et],de[Fe]])})}),Object.keys(b).forEach(S=>{const I=b[S];lt(I,[dr.scales[I.type],dr.scale])}),b}(f,s)}function Sl(f){return(f=f||{}).datasets=f.datasets||[],f.labels=f.labels||[],f}const Wu=new Map,xu=new Set;function za(f,s){let r=Wu.get(f);return r||(r=s(),Wu.set(f,r),xu.add(r)),r}const Sa=(f,s,r)=>{const o=Ct(s,r);void 0!==o&&f.add(o)};class rl{constructor(s){var f;this._config=((f=(f=s)||{}).data=Sl(f.data),wl(f),f),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(s){this._config.type=s}get data(){return this._config.data}set data(s){this._config.data=Sl(s)}get options(){return this._config.options}set options(s){this._config.options=s}get plugins(){return this._config.plugins}update(){const s=this._config;this.clearCache(),wl(s)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(s){return za(s,()=>[[`datasets.${s}`,""]])}datasetAnimationScopeKeys(s,r){return za(`${s}.transition.${r}`,()=>[[`datasets.${s}.transitions.${r}`,`transitions.${r}`],[`datasets.${s}`,""]])}datasetElementScopeKeys(s,r){return za(`${s}-${r}`,()=>[[`datasets.${s}.elements.${r}`,`datasets.${s}`,`elements.${r}`,""]])}pluginScopeKeys(s){const r=s.id;return za(`${this.type}-plugin-${r}`,()=>[[`plugins.${r}`,...s.additionalOptionScopes||[]]])}_cachedScopes(s,r){const o=this._scopeCache;let l=o.get(s);return(!l||r)&&(l=new Map,o.set(s,l)),l}getOptionScopes(s,r,o){const{options:l,type:p}=this,b=this._cachedScopes(s,o),S=b.get(r);if(S)return S;const I=new Set;r.forEach($=>{s&&(I.add(s),$.forEach(de=>Sa(I,s,de))),$.forEach(de=>Sa(I,l,de)),$.forEach(de=>Sa(I,Ao[p]||{},de)),$.forEach(de=>Sa(I,dr,de)),$.forEach(de=>Sa(I,Yo,de))});const N=Array.from(I);return 0===N.length&&N.push(Object.create(null)),xu.has(r)&&b.set(r,N),N}chartOptionScopes(){const{options:s,type:r}=this;return[s,Ao[r]||{},dr.datasets[r]||{},{type:r},dr,Yo]}resolveNamedOptions(s,r,o,l=[""]){const p={$shared:!0},{resolver:b,subPrefixes:S}=Jl(this._resolverCache,s,l);let I=b;(function(f,s){const{isScriptable:r,isIndexable:o}=ca(f);for(const l of s){const p=r(l),b=o(l),S=(b||p)&&f[l];if(p&&(Tt(S)||fa(S))||b&&ye(S))return!0}return!1})(b,r)&&(p.$shared=!1,I=zr(b,o=Tt(o)?o():o,this.createResolver(s,o,S)));for(const N of r)p[N]=I[N];return p}createResolver(s,r,o=[""],l){const{resolver:p}=Jl(this._resolverCache,s,o);return ne(r)?zr(p,r,void 0,l):p}}function Jl(f,s,r){let o=f.get(s);o||(o=new Map,f.set(s,o));const l=r.join();let p=o.get(l);return p||(p={resolver:la(s,r),subPrefixes:r.filter(S=>!S.toLowerCase().includes("hover"))},o.set(l,p)),p}const fa=f=>ne(f)&&Object.getOwnPropertyNames(f).reduce((s,r)=>s||Tt(f[r]),!1),ld=["top","bottom","left","right","chartArea"];function as(f,s){return"top"===f||"bottom"===f||-1===ld.indexOf(f)&&"x"===s}function xc(f,s){return function(r,o){return r[f]===o[f]?r[s]-o[s]:r[f]-o[f]}}function me(f){const s=f.chart,r=s.options.animation;s.notifyPlugins("afterRender"),ue(r&&r.onComplete,[f],s)}function we(f){const s=f.chart,r=s.options.animation;ue(r&&r.onProgress,[f],s)}function it(f){return ts()&&"string"==typeof f?f=document.getElementById(f):f&&f.length&&(f=f[0]),f&&f.canvas&&(f=f.canvas),f}const Dt={},Vt=f=>{const s=it(f);return Object.values(Dt).filter(r=>r.canvas===s).pop()};function hi(f,s,r){const o=Object.keys(f);for(const l of o){const p=+l;if(p>=s){const b=f[l];delete f[l],(r>0||p>s)&&(f[p+r]=b)}}}class si{constructor(s,r){const o=this.config=new rl(r),l=it(s),p=Vt(l);if(p)throw new Error("Canvas is already in use. Chart with ID '"+p.id+"' must be destroyed before the canvas can be reused.");const b=o.createResolver(o.chartOptionScopes(),this.getContext());var f;this.platform=new(o.platform||(f=l,!ts()||"undefined"!=typeof OffscreenCanvas&&f instanceof OffscreenCanvas?Wa:Ec)),this.platform.updateConfig(o);const S=this.platform.acquireContext(l,b.aspectRatio),I=S&&S.canvas,N=I&&I.height,$=I&&I.width;this.id=$e(),this.ctx=S,this.canvas=I,this.width=$,this.height=N,this._options=b,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new so,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(f,s){let r;return function(...o){return s?(clearTimeout(r),r=setTimeout(f,s,o)):f.apply(this,o),s}}(de=>this.update(de),b.resizeDelay||0),this._dataChanges=[],Dt[this.id]=this,S&&I?(hr.listen(this,"complete",me),hr.listen(this,"progress",we),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:s,maintainAspectRatio:r},width:o,height:l,_aspectRatio:p}=this;return Te(s)?r&&p?p:l?o/l:null:s}get data(){return this.config.data}set data(s){this.config.data=s}get options(){return this._options}set options(s){this.config.options=s}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bo(this.canvas,this.ctx),this}stop(){return hr.stop(this),this}resize(s,r){hr.running(this)?this._resizeBeforeDraw={width:s,height:r}:this._resize(s,r)}_resize(s,r){const o=this.options,b=this.platform.getMaximumSize(this.canvas,s,r,o.maintainAspectRatio&&this.aspectRatio),S=o.devicePixelRatio||this.platform.getDevicePixelRatio(),I=this.width?"resize":"attach";this.width=b.width,this.height=b.height,this._aspectRatio=this.aspectRatio,vi(this,S,!0)&&(this.notifyPlugins("resize",{size:b}),ue(o.onResize,[this,b],this),this.attached&&this._doResize(I)&&this.render())}ensureScalesHaveIDs(){ie(this.options.scales||{},(o,l)=>{o.id=l})}buildOrUpdateScales(){const s=this.options,r=s.scales,o=this.scales,l=Object.keys(o).reduce((b,S)=>(b[S]=!1,b),{});let p=[];r&&(p=p.concat(Object.keys(r).map(b=>{const S=r[b],I=fc(b,S),N="r"===I,$="x"===I;return{options:S,dposition:N?"chartArea":$?"bottom":"left",dtype:N?"radialLinear":$?"category":"linear"}}))),ie(p,b=>{const S=b.options,I=S.id,N=fc(I,S),$=He(S.type,b.dtype);(void 0===S.position||as(S.position,N)!==as(b.dposition))&&(S.position=b.dposition),l[I]=!0;let de=null;I in o&&o[I].type===$?de=o[I]:(de=new(wa.getScale($))({id:I,type:$,ctx:this.ctx,chart:this}),o[de.id]=de),de.init(S,s)}),ie(l,(b,S)=>{b||delete o[S]}),ie(o,b=>{wo.configure(this,b,b.options),wo.addBox(this,b)})}_updateMetasets(){const s=this._metasets,r=this.data.datasets.length,o=s.length;if(s.sort((l,p)=>l.index-p.index),o>r){for(let l=r;l<o;++l)this._destroyDatasetMeta(l);s.splice(r,o-r)}this._sortedMetasets=s.slice(0).sort(xc("order","index"))}_removeUnreferencedMetasets(){const{_metasets:s,data:{datasets:r}}=this;s.length>r.length&&delete this._stacks,s.forEach((o,l)=>{0===r.filter(p=>p===o._dataset).length&&this._destroyDatasetMeta(l)})}buildOrUpdateControllers(){const s=[],r=this.data.datasets;let o,l;for(this._removeUnreferencedMetasets(),o=0,l=r.length;o<l;o++){const p=r[o];let b=this.getDatasetMeta(o);const S=p.type||this.config.type;if(b.type&&b.type!==S&&(this._destroyDatasetMeta(o),b=this.getDatasetMeta(o)),b.type=S,b.indexAxis=p.indexAxis||gl(S,this.options),b.order=p.order||0,b.index=o,b.label=""+p.label,b.visible=this.isDatasetVisible(o),b.controller)b.controller.updateIndex(o),b.controller.linkScales();else{const I=wa.getController(S),{datasetElementType:N,dataElementType:$}=dr.datasets[S];Object.assign(I.prototype,{dataElementType:wa.getElement($),datasetElementType:N&&wa.getElement(N)}),b.controller=new I(this,o),s.push(b.controller)}}return this._updateMetasets(),s}_resetElements(){ie(this.data.datasets,(s,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(s){const r=this.config;r.update();const o=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),l=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:s,cancelable:!0}))return;const p=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let b=0;for(let N=0,$=this.data.datasets.length;N<$;N++){const{controller:de}=this.getDatasetMeta(N),Fe=!l&&-1===p.indexOf(de);de.buildOrUpdateElements(Fe),b=Math.max(+de.getMaxOverflow(),b)}b=this._minPadding=o.layout.autoPadding?b:0,this._updateLayout(b),l||ie(p,N=>{N.reset()}),this._updateDatasets(s),this.notifyPlugins("afterUpdate",{mode:s}),this._layers.sort(xc("z","_idx"));const{_active:S,_lastEvent:I}=this;I?this._eventHandler(I,!0):S.length&&this._updateHoverStyles(S,S,!0),this.render()}_updateScales(){ie(this.scales,s=>{wo.removeBox(this,s)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const s=this.options,r=new Set(Object.keys(this._listeners)),o=new Set(s.events);(!Je(r,o)||!!this._responsiveListeners!==s.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:s}=this,r=this._getUniformDataChanges()||[];for(const{method:o,start:l,count:p}of r)hi(s,l,"_removeElements"===o?-p:p)}_getUniformDataChanges(){const s=this._dataChanges;if(!s||!s.length)return;this._dataChanges=[];const r=this.data.datasets.length,o=p=>new Set(s.filter(b=>b[0]===p).map((b,S)=>S+","+b.splice(1).join(","))),l=o(0);for(let p=1;p<r;p++)if(!Je(l,o(p)))return;return Array.from(l).map(p=>p.split(",")).map(p=>({method:p[1],start:+p[2],count:+p[3]}))}_updateLayout(s){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;wo.update(this,this.width,this.height,s);const r=this.chartArea,o=r.width<=0||r.height<=0;this._layers=[],ie(this.boxes,l=>{o&&"chartArea"===l.position||(l.configure&&l.configure(),this._layers.push(...l._layers()))},this),this._layers.forEach((l,p)=>{l._idx=p}),this.notifyPlugins("afterLayout")}_updateDatasets(s){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:s,cancelable:!0})){for(let r=0,o=this.data.datasets.length;r<o;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,o=this.data.datasets.length;r<o;++r)this._updateDataset(r,Tt(s)?s({datasetIndex:r}):s);this.notifyPlugins("afterDatasetsUpdate",{mode:s})}}_updateDataset(s,r){const o=this.getDatasetMeta(s),l={meta:o,index:s,mode:r,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",l)&&(o.controller._update(r),l.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",l))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(hr.has(this)?this.attached&&!hr.running(this)&&hr.start(this):(this.draw(),me({chart:this})))}draw(){let s;if(this._resizeBeforeDraw){const{width:o,height:l}=this._resizeBeforeDraw;this._resize(o,l),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const r=this._layers;for(s=0;s<r.length&&r[s].z<=0;++s)r[s].draw(this.chartArea);for(this._drawDatasets();s<r.length;++s)r[s].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(s){const r=this._sortedMetasets,o=[];let l,p;for(l=0,p=r.length;l<p;++l){const b=r[l];(!s||b.visible)&&o.push(b)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const s=this.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r)this._drawDataset(s[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(s){const r=this.ctx,o=s._clip,l=!o.disabled,p=this.chartArea,b={meta:s,index:s.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",b)&&(l&&Ho(r,{left:!1===o.left?0:p.left-o.left,right:!1===o.right?this.width:p.right+o.right,top:!1===o.top?0:p.top-o.top,bottom:!1===o.bottom?this.height:p.bottom+o.bottom}),s.controller.draw(),l&&Xa(r),b.cancelable=!1,this.notifyPlugins("afterDatasetDraw",b))}getElementsAtEventForMode(s,r,o,l){const p=Tu.modes[r];return"function"==typeof p?p(this,s,o,l):[]}getDatasetMeta(s){const r=this.data.datasets[s],o=this._metasets;let l=o.filter(p=>p&&p._dataset===r).pop();return l||(l={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:s,_dataset:r,_parsed:[],_sorted:!1},o.push(l)),l}getContext(){return this.$context||(this.$context=Ko(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(s){const r=this.data.datasets[s];if(!r)return!1;const o=this.getDatasetMeta(s);return"boolean"==typeof o.hidden?!o.hidden:!r.hidden}setDatasetVisibility(s,r){this.getDatasetMeta(s).hidden=!r}toggleDataVisibility(s){this._hiddenIndices[s]=!this._hiddenIndices[s]}getDataVisibility(s){return!this._hiddenIndices[s]}_updateVisibility(s,r,o){const l=o?"show":"hide",p=this.getDatasetMeta(s),b=p.controller._resolveAnimations(void 0,l);Be(r)?(p.data[r].hidden=!o,this.update()):(this.setDatasetVisibility(s,o),b.update(p,{visible:o}),this.update(S=>S.datasetIndex===s?l:void 0))}hide(s,r){this._updateVisibility(s,r,!1)}show(s,r){this._updateVisibility(s,r,!0)}_destroyDatasetMeta(s){const r=this._metasets[s];r&&r.controller&&r.controller._destroy(),delete this._metasets[s]}_stop(){let s,r;for(this.stop(),hr.remove(this),s=0,r=this.data.datasets.length;s<r;++s)this._destroyDatasetMeta(s)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:s,ctx:r}=this;this._stop(),this.config.clearCache(),s&&(this.unbindEvents(),Bo(s,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Dt[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...s){return this.canvas.toDataURL(...s)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const s=this._listeners,r=this.platform,o=(p,b)=>{r.addEventListener(this,p,b),s[p]=b},l=(p,b,S)=>{p.offsetX=b,p.offsetY=S,this._eventHandler(p)};ie(this.options.events,p=>o(p,l))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const s=this._responsiveListeners,r=this.platform,o=(I,N)=>{r.addEventListener(this,I,N),s[I]=N},l=(I,N)=>{s[I]&&(r.removeEventListener(this,I,N),delete s[I])},p=(I,N)=>{this.canvas&&this.resize(I,N)};let b;const S=()=>{l("attach",S),this.attached=!0,this.resize(),o("resize",p),o("detach",b)};b=()=>{this.attached=!1,l("resize",p),this._stop(),this._resize(0,0),o("attach",S)},r.isAttached(this.canvas)?S():b()}unbindEvents(){ie(this._listeners,(s,r)=>{this.platform.removeEventListener(this,r,s)}),this._listeners={},ie(this._responsiveListeners,(s,r)=>{this.platform.removeEventListener(this,r,s)}),this._responsiveListeners=void 0}updateHoverStyle(s,r,o){const l=o?"set":"remove";let p,b,S,I;for("dataset"===r&&(p=this.getDatasetMeta(s[0].datasetIndex),p.controller["_"+l+"DatasetHoverStyle"]()),S=0,I=s.length;S<I;++S){b=s[S];const N=b&&this.getDatasetMeta(b.datasetIndex).controller;N&&N[l+"HoverStyle"](b.element,b.datasetIndex,b.index)}}getActiveElements(){return this._active||[]}setActiveElements(s){const r=this._active||[],o=s.map(({datasetIndex:p,index:b})=>{const S=this.getDatasetMeta(p);if(!S)throw new Error("No dataset found at index "+p);return{datasetIndex:p,element:S.data[b],index:b}});!ht(o,r)&&(this._active=o,this._lastEvent=null,this._updateHoverStyles(o,r))}notifyPlugins(s,r,o){return this._plugins.notify(this,s,r,o)}_updateHoverStyles(s,r,o){const l=this.options.hover,p=(I,N)=>I.filter($=>!N.some(de=>$.datasetIndex===de.datasetIndex&&$.index===de.index)),b=p(r,s),S=o?s:p(s,r);b.length&&this.updateHoverStyle(b,l.mode,!1),S.length&&l.mode&&this.updateHoverStyle(S,l.mode,!0)}_eventHandler(s,r){const o={event:s,replay:r,cancelable:!0,inChartArea:rs(s,this.chartArea,this._minPadding)},l=b=>(b.options.events||this.options.events).includes(s.native.type);if(!1===this.notifyPlugins("beforeEvent",o,l))return;const p=this._handleEvent(s,r,o.inChartArea);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,l),(p||o.changed)&&this.render(),this}_handleEvent(s,r,o){const{_active:l=[],options:p}=this,S=this._getActiveElements(s,l,o,r),I="mouseup"===(f=s).type||"click"===f.type||"contextmenu"===f.type,N=function(f,s,r,o){return r&&"mouseout"!==f.type?o?s:f:null}(s,this._lastEvent,o,I);var f;o&&(this._lastEvent=null,ue(p.onHover,[s,S,this],this),I&&ue(p.onClick,[s,S,this],this));const $=!ht(S,l);return($||r)&&(this._active=S,this._updateHoverStyles(S,l,r)),this._lastEvent=N,$}_getActiveElements(s,r,o,l){if("mouseout"===s.type)return[];if(!o)return r;const p=this.options.hover;return this.getElementsAtEventForMode(s,p.mode,p,l)}}const ki=()=>ie(si.instances,f=>f._plugins.invalidate()),Ii=!0;function Wi(f,s,r){const{startAngle:o,pixelMargin:l,x:p,y:b,outerRadius:S,innerRadius:I}=s;let N=l/S;f.beginPath(),f.arc(p,b,S,o-N,r+N),I>l?(N=l/I,f.arc(p,b,I,r+N,o-N,!0)):f.arc(p,b,l,r+et,o-et),f.closePath(),f.clip()}function ir(f,s,r,o){return{x:r+f*Math.cos(s),y:o+f*Math.sin(s)}}function Zo(f,s,r,o,l){const{x:p,y:b,startAngle:S,pixelMargin:I,innerRadius:N}=s,$=Math.max(s.outerRadius+o+r-I,0),de=N>0?N+o+r+I:0;let Fe=0;const qe=l-S;if(o){const zn=((N>0?N-o:0)+($>0?$-o:0))/2;Fe=(qe-(0!==zn?qe*zn/(zn+o):qe))/2}const xt=(qe-Math.max(.001,qe*$-r/xe)/$)/2,Gt=S+xt+Fe,Wt=l-xt-Fe,{outerStart:Ti,outerEnd:an,innerStart:Ui,innerEnd:Yi}=function(f,s,r,o){const l=function(f){return _a(f,["outerStart","outerEnd","innerStart","innerEnd"])}(f.options.borderRadius),p=(r-s)/2,b=Math.min(p,o*s/2),S=I=>{const N=(r-Math.min(p,I))*o/2;return zt(I,0,Math.min(p,N))};return{outerStart:S(l.outerStart),outerEnd:S(l.outerEnd),innerStart:zt(l.innerStart,0,b),innerEnd:zt(l.innerEnd,0,b)}}(s,de,$,Wt-Gt),gn=$-Ti,vn=$-an,Mn=Gt+Ti/gn,Fn=Wt-an/vn,yn=de+Ui,qi=de+Yi,Hn=Gt+Ui/yn,mr=Wt-Yi/qi;if(f.beginPath(),f.arc(p,b,$,Mn,Fn),an>0){const Hi=ir(vn,Fn,p,b);f.arc(Hi.x,Hi.y,an,Fn,Wt+et)}const mn=ir(qi,Wt,p,b);if(f.lineTo(mn.x,mn.y),Yi>0){const Hi=ir(qi,mr,p,b);f.arc(Hi.x,Hi.y,Yi,Wt+et,mr+Math.PI)}if(f.arc(p,b,de,Wt-Yi/de,Gt+Ui/de,!0),Ui>0){const Hi=ir(yn,Hn,p,b);f.arc(Hi.x,Hi.y,Ui,Hn+Math.PI,Gt-et)}const Tn=ir(gn,Gt,p,b);if(f.lineTo(Tn.x,Tn.y),Ti>0){const Hi=ir(gn,Mn,p,b);f.arc(Hi.x,Hi.y,Ti,Gt-et,Mn)}f.closePath()}Object.defineProperties(si,{defaults:{enumerable:Ii,value:dr},instances:{enumerable:Ii,value:Dt},overrides:{enumerable:Ii,value:Ao},registry:{enumerable:Ii,value:wa},version:{enumerable:Ii,value:"3.7.0"},getChart:{enumerable:Ii,value:Vt},register:{enumerable:Ii,value:(...f)=>{wa.add(...f),ki()}},unregister:{enumerable:Ii,value:(...f)=>{wa.remove(...f),ki()}}});class Go extends ra{constructor(s){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,r,o){const l=this.getProps(["x","y"],o),{angle:p,distance:b}=mi(l,{x:s,y:r}),{startAngle:S,endAngle:I,innerRadius:N,outerRadius:$,circumference:de}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),Fe=this.options.spacing/2,Et=He(de,I-S)>=pt||Ci(p,S,I),xt=_i(b,N+Fe,$+Fe);return Et&&xt}getCenterPoint(s){const{x:r,y:o,startAngle:l,endAngle:p,innerRadius:b,outerRadius:S}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],s),{offset:I,spacing:N}=this.options,$=(l+p)/2,de=(b+S+N+I)/2;return{x:r+Math.cos($)*de,y:o+Math.sin($)*de}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:r,circumference:o}=this,l=(r.offset||0)/2,p=(r.spacing||0)/2;if(this.pixelMargin="inner"===r.borderAlign?.33:0,this.fullCircles=o>pt?Math.floor(o/pt):0,0===o||this.innerRadius<0||this.outerRadius<0)return;s.save();let b=0;if(l){b=l/2;const I=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(I)*b,Math.sin(I)*b),this.circumference>=xe&&(b=l)}s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor;const S=function(f,s,r,o){const{fullCircles:l,startAngle:p,circumference:b}=s;let S=s.endAngle;if(l){Zo(f,s,r,o,p+pt);for(let I=0;I<l;++I)f.fill();isNaN(b)||(S=p+b%pt,b%pt==0&&(S+=pt))}return Zo(f,s,r,o,S),f.fill(),S}(s,this,b,p);(function(f,s,r,o,l){const{options:p}=s,{borderWidth:b,borderJoinStyle:S}=p,I="inner"===p.borderAlign;!b||(I?(f.lineWidth=2*b,f.lineJoin=S||"round"):(f.lineWidth=b,f.lineJoin=S||"bevel"),s.fullCircles&&function(f,s,r){const{x:o,y:l,startAngle:p,pixelMargin:b,fullCircles:S}=s,I=Math.max(s.outerRadius-b,0),N=s.innerRadius+b;let $;for(r&&Wi(f,s,p+pt),f.beginPath(),f.arc(o,l,N,p+pt,p,!0),$=0;$<S;++$)f.stroke();for(f.beginPath(),f.arc(o,l,I,p,p+pt),$=0;$<S;++$)f.stroke()}(f,s,I),I&&Wi(f,s,l),Zo(f,s,r,o,l),f.stroke())})(s,this,b,p,S),s.restore()}}function po(f,s,r=s){f.lineCap=He(r.borderCapStyle,s.borderCapStyle),f.setLineDash(He(r.borderDash,s.borderDash)),f.lineDashOffset=He(r.borderDashOffset,s.borderDashOffset),f.lineJoin=He(r.borderJoinStyle,s.borderJoinStyle),f.lineWidth=He(r.borderWidth,s.borderWidth),f.strokeStyle=He(r.borderColor,s.borderColor)}function sa(f,s,r){f.lineTo(r.x,r.y)}function hs(f,s,r={}){const o=f.length,{start:l=0,end:p=o-1}=r,{start:b,end:S}=s,I=Math.max(l,b),N=Math.min(p,S);return{count:o,start:I,loop:s.loop,ilen:N<I&&!(l<b&&p<b||l>S&&p>S)?o+N-I:N-I}}function ml(f,s,r,o){const{points:l,options:p}=s,{count:b,start:S,loop:I,ilen:N}=hs(l,r,o),$=function(f){return f.stepped?Ka:f.tension||"monotone"===f.cubicInterpolationMode?$a:sa}(p);let qe,Et,xt,{move:de=!0,reverse:Fe}=o||{};for(qe=0;qe<=N;++qe)Et=l[(S+(Fe?N-qe:qe))%b],!Et.skip&&(de?(f.moveTo(Et.x,Et.y),de=!1):$(f,xt,Et,Fe,p.stepped),xt=Et);return I&&(Et=l[(S+(Fe?N:0))%b],$(f,xt,Et,Fe,p.stepped)),!!I}function ou(f,s,r,o){const l=s.points,{count:p,start:b,ilen:S}=hs(l,r,o),{move:I=!0,reverse:N}=o||{};let Fe,qe,Et,xt,Gt,Wt,$=0,de=0;const Ti=Ui=>(b+(N?S-Ui:Ui))%p,an=()=>{xt!==Gt&&(f.lineTo($,Gt),f.lineTo($,xt),f.lineTo($,Wt))};for(I&&(qe=l[Ti(0)],f.moveTo(qe.x,qe.y)),Fe=0;Fe<=S;++Fe){if(qe=l[Ti(Fe)],qe.skip)continue;const Ui=qe.x,Yi=qe.y,gn=0|Ui;gn===Et?(Yi<xt?xt=Yi:Yi>Gt&&(Gt=Yi),$=(de*$+Ui)/++de):(an(),f.lineTo(Ui,Yi),Et=gn,de=0,xt=Gt=Yi),Wt=Yi}an()}function cd(f){const s=f.options;return f._decimated||f._loop||s.tension||"monotone"===s.cubicInterpolationMode||s.stepped||s.borderDash&&s.borderDash.length?ml:ou}Go.id="arc",Go.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Go.defaultRoutes={backgroundColor:"backgroundColor"};const Rc="function"==typeof Path2D;let Iu=(()=>{class f extends ra{constructor(r){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,r&&Object.assign(this,r)}updateControlPoints(r,o){const l=this.options;!l.tension&&"monotone"!==l.cubicInterpolationMode||l.stepped||this._pointsUpdated||(Ba(this._points,l,r,l.spanGaps?this._loop:this._fullLoop,o),this._pointsUpdated=!0)}set points(r){this._points=r,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(f,s){const r=f.points,o=f.options.spanGaps,l=r.length;if(!l)return[];const p=!!f._loop,{start:b,end:S}=function(f,s,r,o){let l=0,p=s-1;if(r&&!o)for(;l<s&&!f[l].skip;)l++;for(;l<s&&f[l].skip;)l++;for(l%=s,r&&(p+=l);p>l&&f[p%s].skip;)p--;return p%=s,{start:l,end:p}}(r,l,p,o);return function(f,s,r,o){return o&&o.setContext&&r?function(f,s,r,o){const l=f._chart.getContext(),p=xn(f.options),{_datasetIndex:b,options:{spanGaps:S}}=f,I=r.length,N=[];let $=p,de=s[0].start,Fe=de;function qe(Et,xt,Gt,Wt){const Ti=S?-1:1;if(Et!==xt){for(Et+=I;r[Et%I].skip;)Et-=Ti;for(;r[xt%I].skip;)xt+=Ti;Et%I!=xt%I&&(N.push({start:Et%I,end:xt%I,loop:Gt,style:Wt}),$=Wt,de=xt%I)}}for(const Et of s){de=S?de:Et.start;let Gt,xt=r[de%I];for(Fe=de+1;Fe<=Et.end;Fe++){const Wt=r[Fe%I];Gt=xn(o.setContext(Ko(l,{type:"segment",p0:xt,p1:Wt,p0DataIndex:(Fe-1)%I,p1DataIndex:Fe%I,datasetIndex:b}))),On(Gt,$)&&qe(de,Fe-1,Et.loop,$),xt=Wt,$=Gt}de<Fe-1&&qe(de,Fe-1,Et.loop,$)}return N}(f,s,r,o):s}(f,!0===o?[{start:b,end:S,loop:p}]:function(f,s,r,o){const l=f.length,p=[];let I,b=s,S=f[s];for(I=s+1;I<=r;++I){const N=f[I%l];N.skip||N.stop?S.skip||(p.push({start:s%l,end:(I-1)%l,loop:o=!1}),s=b=N.stop?I:null):(b=I,S.skip&&(s=I)),S=N}return null!==b&&p.push({start:s%l,end:b%l,loop:o}),p}(r,b,S<b?S+l:S,!!f._fullLoop&&0===b&&S===l-1),r,s)}(this,this.options.segment))}first(){const r=this.segments;return r.length&&this.points[r[0].start]}last(){const r=this.segments,l=r.length;return l&&this.points[r[l-1].end]}interpolate(r,o){const l=this.options,p=r[o],b=this.points,S=Rs(this,{property:o,start:p,end:p});if(!S.length)return;const I=[],N=function(f){return f.stepped?er:f.tension||"monotone"===f.cubicInterpolationMode?tr:Cn}(l);let $,de;for($=0,de=S.length;$<de;++$){const{start:Fe,end:qe}=S[$],Et=b[Fe],xt=b[qe];if(Et===xt){I.push(Et);continue}const Wt=N(Et,xt,Math.abs((p-Et[o])/(xt[o]-Et[o])),l.stepped);Wt[o]=r[o],I.push(Wt)}return 1===I.length?I[0]:I}pathSegment(r,o,l){return cd(this)(r,this,o,l)}path(r,o,l){const p=this.segments,b=cd(this);let S=this._loop;o=o||0,l=l||this.points.length-o;for(const I of p)S&=b(r,this,I,{start:o,end:o+l-1});return!!S}draw(r,o,l,p){(this.points||[]).length&&(this.options||{}).borderWidth&&(r.save(),function(f,s,r,o){Rc&&!s.options.segment?function(f,s,r,o){let l=s._path;l||(l=s._path=new Path2D,s.path(l,r,o)&&l.closePath()),po(f,s.options),f.stroke(l)}(f,s,r,o):function(f,s,r,o){const{segments:l,options:p}=s,b=cd(s);for(const S of l)po(f,p,S.style),f.beginPath(),b(f,s,S,{start:r,end:r+o-1})&&f.closePath(),f.stroke()}(f,s,r,o)}(r,this,l,p),r.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return f.id="line",f.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},f.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},f.descriptors={_scriptable:!0,_indexable:s=>"borderDash"!==s&&"fill"!==s},f})();function zu(f,s,r,o){const l=f.options,{[r]:p}=f.getProps([r],o);return Math.abs(s-p)<l.radius+l.hitRadius}let Ou=(()=>{class f extends ra{constructor(r){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,o,l){const p=this.options,{x:b,y:S}=this.getProps(["x","y"],l);return Math.pow(r-b,2)+Math.pow(o-S,2)<Math.pow(p.hitRadius+p.radius,2)}inXRange(r,o){return zu(this,r,"x",o)}inYRange(r,o){return zu(this,r,"y",o)}getCenterPoint(r){const{x:o,y:l}=this.getProps(["x","y"],r);return{x:o,y:l}}size(r){let o=(r=r||this.options||{}).radius||0;return o=Math.max(o,o&&r.hoverRadius||0),2*(o+(o&&r.borderWidth||0))}draw(r,o){const l=this.options;this.skip||l.radius<.1||!rs(this,o,this.size(l)/2)||(r.strokeStyle=l.borderColor,r.lineWidth=l.borderWidth,r.fillStyle=l.backgroundColor,Do(r,l,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}return f.id="point",f.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},f.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},f})();function Yu(f,s){const{x:r,y:o,base:l,width:p,height:b}=f.getProps(["x","y","base","width","height"],s);let S,I,N,$,de;return f.horizontal?(de=b/2,S=Math.min(r,l),I=Math.max(r,l),N=o-de,$=o+de):(de=p/2,S=r-de,I=r+de,N=Math.min(o,l),$=Math.max(o,l)),{left:S,top:N,right:I,bottom:$}}function gc(f,s,r,o){return f?0:zt(s,r,o)}function ku(f,s,r,o){const l=null===s,p=null===r,S=f&&!(l&&p)&&Yu(f,o);return S&&(l||_i(s,S.left,S.right))&&(p||_i(r,S.top,S.bottom))}function Td(f,s){f.rect(s.x,s.y,s.w,s.h)}function Qo(f,s,r={}){const o=f.x!==r.x?-s:0,l=f.y!==r.y?-s:0;return{x:f.x+o,y:f.y+l,w:f.w+((f.x+f.w!==r.x+r.w?s:0)-o),h:f.h+((f.y+f.h!==r.y+r.h?s:0)-l),radius:f.radius}}class lu extends ra{constructor(s){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,s&&Object.assign(this,s)}draw(s){const{inflateAmount:r,options:{borderColor:o,backgroundColor:l}}=this,{inner:p,outer:b}=function(f){const s=Yu(f),r=s.right-s.left,o=s.bottom-s.top,l=function(f,s,r){const l=f.borderSkipped,p=qs(f.options.borderWidth);return{t:gc(l.top,p.top,0,r),r:gc(l.right,p.right,0,s),b:gc(l.bottom,p.bottom,0,r),l:gc(l.left,p.left,0,s)}}(f,r/2,o/2),p=function(f,s,r){const{enableBorderRadius:o}=f.getProps(["enableBorderRadius"]),l=f.options.borderRadius,p=Io(l),b=Math.min(s,r),S=f.borderSkipped,I=o||ne(l);return{topLeft:gc(!I||S.top||S.left,p.topLeft,0,b),topRight:gc(!I||S.top||S.right,p.topRight,0,b),bottomLeft:gc(!I||S.bottom||S.left,p.bottomLeft,0,b),bottomRight:gc(!I||S.bottom||S.right,p.bottomRight,0,b)}}(f,r/2,o/2);return{outer:{x:s.left,y:s.top,w:r,h:o,radius:p},inner:{x:s.left+l.l,y:s.top+l.t,w:r-l.l-l.r,h:o-l.t-l.b,radius:{topLeft:Math.max(0,p.topLeft-Math.max(l.t,l.l)),topRight:Math.max(0,p.topRight-Math.max(l.t,l.r)),bottomLeft:Math.max(0,p.bottomLeft-Math.max(l.b,l.l)),bottomRight:Math.max(0,p.bottomRight-Math.max(l.b,l.r))}}}}(this),S=(f=b.radius).topLeft||f.topRight||f.bottomLeft||f.bottomRight?Bs:Td;var f;s.save(),(b.w!==p.w||b.h!==p.h)&&(s.beginPath(),S(s,Qo(b,r,p)),s.clip(),S(s,Qo(p,-r,b)),s.fillStyle=o,s.fill("evenodd")),s.beginPath(),S(s,Qo(p,r)),s.fillStyle=l,s.fill(),s.restore()}inRange(s,r,o){return ku(this,s,r,o)}inXRange(s,r){return ku(this,s,null,r)}inYRange(s,r){return ku(this,null,s,r)}getCenterPoint(s){const{x:r,y:o,base:l,horizontal:p}=this.getProps(["x","y","base","horizontal"],s);return{x:p?(r+l)/2:r,y:p?o:(o+l)/2}}getRange(s){return"x"===s?this.width/2:this.height/2}}lu.id="bar",lu.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},lu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Lu=Object.freeze({__proto__:null,ArcElement:Go,LineElement:Iu,PointElement:Ou,BarElement:lu});function Ku(f){if(f._decimated){const s=f._data;delete f._decimated,delete f._data,Object.defineProperty(f,"data",{value:s})}}function hd(f){f.data.datasets.forEach(s=>{Ku(s)})}var Dd={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(f,s,r)=>{if(!r.enabled)return void hd(f);const o=f.width;f.data.datasets.forEach((l,p)=>{const{_data:b,indexAxis:S}=l,I=f.getDatasetMeta(p),N=b||l.data;if("y"===yo([S,f.options.indexAxis])||"line"!==I.type)return;const $=f.scales[I.xAxisID];if("linear"!==$.type&&"time"!==$.type||f.options.parsing)return;let Et,{start:de,count:Fe}=function(f,s){const r=s.length;let l,o=0;const{iScale:p}=f,{min:b,max:S,minDefined:I,maxDefined:N}=p.getUserBounds();return I&&(o=zt(zo(s,p.axis,b).lo,0,r-1)),l=N?zt(zo(s,p.axis,S).hi+1,o,r)-o:r-o,{start:o,count:l}}(I,N);if(Fe<=(r.threshold||4*o))Ku(l);else{switch(Te(b)&&(l._data=N,delete l.data,Object.defineProperty(l,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(xt){this._data=xt}})),r.algorithm){case"lttb":Et=function(f,s,r,o,l){const p=l.samples||o;if(p>=r)return f.slice(s,s+r);const b=[],S=(r-2)/(p-2);let I=0;const N=s+r-1;let de,Fe,qe,Et,xt,$=s;for(b[I++]=f[$],de=0;de<p-2;de++){let Ti,Gt=0,Wt=0;const an=Math.floor((de+1)*S)+1+s,Ui=Math.min(Math.floor((de+2)*S)+1,r)+s,Yi=Ui-an;for(Ti=an;Ti<Ui;Ti++)Gt+=f[Ti].x,Wt+=f[Ti].y;Gt/=Yi,Wt/=Yi;const gn=Math.floor(de*S)+1+s,vn=Math.min(Math.floor((de+1)*S)+1,r)+s,{x:Mn,y:Fn}=f[$];for(qe=Et=-1,Ti=gn;Ti<vn;Ti++)Et=.5*Math.abs((Mn-Gt)*(f[Ti].y-Fn)-(Mn-f[Ti].x)*(Wt-Fn)),Et>qe&&(qe=Et,Fe=f[Ti],xt=Ti);b[I++]=Fe,$=xt}return b[I++]=f[N],b}(N,de,Fe,o,r);break;case"min-max":Et=function(f,s,r,o){let b,S,I,N,$,de,Fe,qe,Et,xt,l=0,p=0;const Gt=[],Ti=f[s].x,Ui=f[s+r-1].x-Ti;for(b=s;b<s+r;++b){S=f[b],I=(S.x-Ti)/Ui*o,N=S.y;const Yi=0|I;if(Yi===$)N<Et?(Et=N,de=b):N>xt&&(xt=N,Fe=b),l=(p*l+S.x)/++p;else{const gn=b-1;if(!Te(de)&&!Te(Fe)){const vn=Math.min(de,Fe),Mn=Math.max(de,Fe);vn!==qe&&vn!==gn&&Gt.push(Bm(Fm({},f[vn]),{x:l})),Mn!==qe&&Mn!==gn&&Gt.push(Bm(Fm({},f[Mn]),{x:l}))}b>0&&gn!==qe&&Gt.push(f[gn]),Gt.push(S),$=Yi,p=0,Et=xt=N,de=Fe=qe=b}}return Gt}(N,de,Fe,o);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}l._decimated=Et}})},destroy(f){hd(f)}};function Md(f,s,r){const o=function(f){const s=f.options,r=s.fill;let o=He(r&&r.target,r);return void 0===o&&(o=!!s.backgroundColor),!1!==o&&null!==o&&(!0===o?"origin":o)}(f);if(ne(o))return!isNaN(o.value)&&o;let l=parseFloat(o);return ge(l)&&Math.floor(l)===l?(("-"===o[0]||"+"===o[0])&&(l=s+l),!(l===s||l<0||l>=r)&&l):["origin","start","end","stack","shape"].indexOf(o)>=0&&o}class ga{constructor(s){this.x=s.x,this.y=s.y,this.radius=s.radius}pathSegment(s,r,o){const{x:l,y:p,radius:b}=this;return s.arc(l,p,b,(r=r||{start:0,end:pt}).end,r.start,!0),!o.bounds}interpolate(s){const{x:r,y:o,radius:l}=this,p=s.angle;return{x:r+Math.cos(p)*l,y:o+Math.sin(p)*l,angle:p}}}function Ju(f,s,r){for(;s>f;s--){const o=r[s];if(!isNaN(o.x)&&!isNaN(o.y))break}return s}function uu(f,s,r){const o=[];for(let l=0;l<r.length;l++){const p=r[l],{first:b,last:S,point:I}=jd(p,s,"x");if(!(!I||b&&S))if(b)o.unshift(I);else if(f.push(I),!S)break}f.push(...o)}function jd(f,s,r){const o=f.interpolate(s,r);if(!o)return{};const l=o[r],p=f.segments,b=f.points;let S=!1,I=!1;for(let N=0;N<p.length;N++){const $=p[N],de=b[$.start][r],Fe=b[$.end][r];if(_i(l,de,Fe)){S=l===de,I=l===Fe;break}}return{first:S,last:I,point:o}}function du(f){const{chart:s,fill:r,line:o}=f;if(ge(r))return function(f,s){const r=f.getDatasetMeta(s);return r&&f.isDatasetVisible(s)?r.dataset:null}(s,r);if("stack"===r)return function(f){const{scale:s,index:r,line:o}=f,l=[],p=o.segments,b=o.points,S=function(f,s){const r=[],o=f.getMatchingVisibleMetas("line");for(let l=0;l<o.length;l++){const p=o[l];if(p.index===s)break;p.hidden||r.unshift(p.dataset)}return r}(s,r);S.push(pd({x:null,y:s.bottom},o));for(let I=0;I<p.length;I++){const N=p[I];for(let $=N.start;$<=N.end;$++)uu(l,b[$],S)}return new Iu({points:l,options:{}})}(f);if("shape"===r)return!0;const l=function(f){return(f.scale||{}).getPointPositionForValue?function(f){const{scale:s,fill:r}=f,o=s.options,l=s.getLabels().length,p=[],b=o.reverse?s.max:s.min;let I,N,$;if($="start"===r?b:"end"===r?o.reverse?s.min:s.max:ne(r)?r.value:s.getBaseValue(),o.grid.circular)return N=s.getPointPositionForValue(0,b),new ga({x:N.x,y:N.y,radius:s.getDistanceFromCenterForValue($)});for(I=0;I<l;++I)p.push(s.getPointPositionForValue(I,$));return p}(f):function(f){const{scale:s={},fill:r}=f;let l,o=null;return"start"===r?o=s.bottom:"end"===r?o=s.top:ne(r)?o=s.getPixelForValue(r.value):s.getBasePixel&&(o=s.getBasePixel()),ge(o)?(l=s.isHorizontal(),{x:l?o:null,y:l?null:o}):null}(f)}(f);return l instanceof ga?l:pd(l,o)}function pd(f,s){let r=[],o=!1;return ye(f)?(o=!0,r=f):r=function(f,s){const{x:r=null,y:o=null}=f||{},l=s.points,p=[];return s.segments.forEach(({start:b,end:S})=>{S=Ju(b,S,l);const I=l[b],N=l[S];null!==o?(p.push({x:I.x,y:o}),p.push({x:N.x,y:o})):null!==r&&(p.push({x:r,y:I.y}),p.push({x:r,y:N.y}))}),p}(f,s),r.length?new Iu({points:r,options:{tension:0},_loop:o,_fullLoop:o}):null}function Wr(f,s,r){let l=f[s].fill;const p=[s];let b;if(!r)return l;for(;!1!==l&&-1===p.indexOf(l);){if(!ge(l))return l;if(b=f[l],!b)return!1;if(b.visible)return l;p.push(l),l=b.fill}return!1}function fd(f,s,r){f.beginPath(),s.path(f),f.lineTo(s.last().x,r),f.lineTo(s.first().x,r),f.closePath(),f.clip()}function Jc(f,s,r,o){if(o)return;let l=s[f],p=r[f];return"angle"===f&&(l=Ot(l),p=Ot(p)),{property:f,start:l,end:p}}function Ic(f,s,r,o){return f&&s?o(f[r],s[r]):f?f[r]:s?s[r]:0}function hu(f,s,r){const{top:o,bottom:l}=s.chart.chartArea,{property:p,start:b,end:S}=r||{};"x"===p&&(f.beginPath(),f.rect(b,o,S-b,l-o),f.clip())}function Zc(f,s,r,o){const l=s.interpolate(r,o);l&&f.lineTo(l.x,l.y)}function Nu(f,s){const{line:r,target:o,property:l,color:p,scale:b}=s,S=function(f,s,r){const o=f.segments,l=f.points,p=s.points,b=[];for(const S of o){let{start:I,end:N}=S;N=Ju(I,N,l);const $=Jc(r,l[I],l[N],S.loop);if(!s.segments){b.push({source:S,target:$,start:l[I],end:l[N]});continue}const de=Rs(s,$);for(const Fe of de){const qe=Jc(r,p[Fe.start],p[Fe.end],Fe.loop),Et=os(S,l,qe);for(const xt of Et)b.push({source:xt,target:Fe,start:{[r]:Ic($,qe,"start",Math.max)},end:{[r]:Ic($,qe,"end",Math.min)}})}}return b}(r,o,l);for(const{source:I,target:N,start:$,end:de}of S){const{style:{backgroundColor:Fe=p}={}}=I,qe=!0!==o;f.save(),f.fillStyle=Fe,hu(f,b,qe&&Jc(l,$,de)),f.beginPath();const Et=!!r.pathSegment(f,I);let xt;if(qe){Et?f.closePath():Zc(f,o,de,l);const Gt=!!o.pathSegment(f,N,{move:Et,reverse:!0});xt=Et&&Gt,xt||Zc(f,o,$,l)}f.closePath(),f.fill(xt?"evenodd":"nonzero"),f.restore()}}function xl(f,s,r){const o=du(s),{line:l,scale:p,axis:b}=s,S=l.options,I=S.fill,N=S.backgroundColor,{above:$=N,below:de=N}=I||{};o&&l.points.length&&(Ho(f,r),function(f,s){const{line:r,target:o,above:l,below:p,area:b,scale:S}=s,I=r._loop?"angle":s.axis;f.save(),"x"===I&&p!==l&&(fd(f,o,b.top),Nu(f,{line:r,target:o,color:l,scale:S,property:I}),f.restore(),f.save(),fd(f,o,b.bottom)),Nu(f,{line:r,target:o,color:p,scale:S,property:I}),f.restore()}(f,{line:l,target:o,above:$,below:de,area:r,scale:p,axis:b}),Xa(f))}var pu={id:"filler",afterDatasetsUpdate(f,s,r){const o=(f.data.datasets||[]).length,l=[];let p,b,S,I;for(b=0;b<o;++b)p=f.getDatasetMeta(b),S=p.dataset,I=null,S&&S.options&&S instanceof Iu&&(I={visible:f.isDatasetVisible(b),index:b,fill:Md(S,b,o),chart:f,axis:p.controller.options.indexAxis,scale:p.vScale,line:S}),p.$filler=I,l.push(I);for(b=0;b<o;++b)I=l[b],I&&!1!==I.fill&&(I.fill=Wr(l,b,r.propagate))},beforeDraw(f,s,r){const o="beforeDraw"===r.drawTime,l=f.getSortedVisibleDatasetMetas(),p=f.chartArea;for(let b=l.length-1;b>=0;--b){const S=l[b].$filler;!S||(S.line.updateControlPoints(p,S.axis),o&&xl(f.ctx,S,p))}},beforeDatasetsDraw(f,s,r){if("beforeDatasetsDraw"!==r.drawTime)return;const o=f.getSortedVisibleDatasetMetas();for(let l=o.length-1;l>=0;--l){const p=o[l].$filler;p&&xl(f.ctx,p,f.chartArea)}},beforeDatasetDraw(f,s,r){const o=s.meta.$filler;!o||!1===o.fill||"beforeDatasetDraw"!==r.drawTime||xl(f.ctx,o,f.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Oc=(f,s)=>{let{boxHeight:r=s,boxWidth:o=s}=f;return f.usePointStyle&&(r=Math.min(r,s),o=Math.min(o,s)),{boxWidth:o,boxHeight:r,itemHeight:Math.max(s,r)}};class Zl extends ra{constructor(s){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,r,o){this.maxWidth=s,this.maxHeight=r,this._margins=o,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const s=this.options.labels||{};let r=ue(s.generateLabels,[this.chart],this)||[];s.filter&&(r=r.filter(o=>s.filter(o,this.chart.data))),s.sort&&(r=r.sort((o,l)=>s.sort(o,l,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:s,ctx:r}=this;if(!s.display)return void(this.width=this.height=0);const o=s.labels,l=ao(o.font),p=l.size,b=this._computeTitleHeight(),{boxWidth:S,itemHeight:I}=Oc(o,p);let N,$;r.font=l.string,this.isHorizontal()?(N=this.maxWidth,$=this._fitRows(b,p,S,I)+10):($=this.maxHeight,N=this._fitCols(b,p,S,I)+10),this.width=Math.min(N,s.maxWidth||this.maxWidth),this.height=Math.min($,s.maxHeight||this.maxHeight)}_fitRows(s,r,o,l){const{ctx:p,maxWidth:b,options:{labels:{padding:S}}}=this,I=this.legendHitBoxes=[],N=this.lineWidths=[0],$=l+S;let de=s;p.textAlign="left",p.textBaseline="middle";let Fe=-1,qe=-$;return this.legendItems.forEach((Et,xt)=>{const Gt=o+r/2+p.measureText(Et.text).width;(0===xt||N[N.length-1]+Gt+2*S>b)&&(de+=$,N[N.length-(xt>0?0:1)]=0,qe+=$,Fe++),I[xt]={left:0,top:qe,row:Fe,width:Gt,height:l},N[N.length-1]+=Gt+S}),de}_fitCols(s,r,o,l){const{ctx:p,maxHeight:b,options:{labels:{padding:S}}}=this,I=this.legendHitBoxes=[],N=this.columnSizes=[],$=b-s;let de=S,Fe=0,qe=0,Et=0,xt=0;return this.legendItems.forEach((Gt,Wt)=>{const Ti=o+r/2+p.measureText(Gt.text).width;Wt>0&&qe+l+2*S>$&&(de+=Fe+S,N.push({width:Fe,height:qe}),Et+=Fe+S,xt++,Fe=qe=0),I[Wt]={left:Et,top:qe,col:xt,width:Ti,height:l},Fe=Math.max(Fe,Ti),qe+=l+S}),de+=Fe,N.push({width:Fe,height:qe}),de}adjustHitBoxes(){if(!this.options.display)return;const s=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:o,labels:{padding:l},rtl:p}}=this,b=oo(p,this.left,this.width);if(this.isHorizontal()){let S=0,I=_e(o,this.left+l,this.right-this.lineWidths[S]);for(const N of r)S!==N.row&&(S=N.row,I=_e(o,this.left+l,this.right-this.lineWidths[S])),N.top+=this.top+s+l,N.left=b.leftForLtr(b.x(I),N.width),I+=N.width+l}else{let S=0,I=_e(o,this.top+s+l,this.bottom-this.columnSizes[S].height);for(const N of r)N.col!==S&&(S=N.col,I=_e(o,this.top+s+l,this.bottom-this.columnSizes[S].height)),N.top=I,N.left+=this.left+l,N.left=b.leftForLtr(b.x(N.left),N.width),I+=N.height+l}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const s=this.ctx;Ho(s,this),this._draw(),Xa(s)}}_draw(){const{options:s,columnSizes:r,lineWidths:o,ctx:l}=this,{align:p,labels:b}=s,S=dr.color,I=oo(s.rtl,this.left,this.width),N=ao(b.font),{color:$,padding:de}=b,Fe=N.size,qe=Fe/2;let Et;this.drawTitle(),l.textAlign=I.textAlign("left"),l.textBaseline="middle",l.lineWidth=.5,l.font=N.string;const{boxWidth:xt,boxHeight:Gt,itemHeight:Wt}=Oc(b,Fe),Ui=this.isHorizontal(),Yi=this._computeTitleHeight();Et=Ui?{x:_e(p,this.left+de,this.right-o[0]),y:this.top+de+Yi,line:0}:{x:this.left+de,y:_e(p,this.top+Yi+de,this.bottom-r[0].height),line:0},ko(this.ctx,s.textDirection);const gn=Wt+de;this.legendItems.forEach((vn,Mn)=>{l.strokeStyle=vn.fontColor||$,l.fillStyle=vn.fontColor||$;const Fn=l.measureText(vn.text).width,yn=I.textAlign(vn.textAlign||(vn.textAlign=b.textAlign)),qi=xt+qe+Fn;let Hn=Et.x,mr=Et.y;I.setWidth(this.width),Ui?Mn>0&&Hn+qi+de>this.right&&(mr=Et.y+=gn,Et.line++,Hn=Et.x=_e(p,this.left+de,this.right-o[Et.line])):Mn>0&&mr+gn>this.bottom&&(Hn=Et.x=Hn+r[Et.line].width+de,Et.line++,mr=Et.y=_e(p,this.top+Yi+de,this.bottom-r[Et.line].height)),function(vn,Mn,Fn){if(isNaN(xt)||xt<=0||isNaN(Gt)||Gt<0)return;l.save();const yn=He(Fn.lineWidth,1);if(l.fillStyle=He(Fn.fillStyle,S),l.lineCap=He(Fn.lineCap,"butt"),l.lineDashOffset=He(Fn.lineDashOffset,0),l.lineJoin=He(Fn.lineJoin,"miter"),l.lineWidth=yn,l.strokeStyle=He(Fn.strokeStyle,S),l.setLineDash(He(Fn.lineDash,[])),b.usePointStyle){const qi={radius:xt*Math.SQRT2/2,pointStyle:Fn.pointStyle,rotation:Fn.rotation,borderWidth:yn},Hn=I.xPlus(vn,xt/2);Do(l,qi,Hn,Mn+qe)}else{const qi=Mn+Math.max((Fe-Gt)/2,0),Hn=I.leftForLtr(vn,xt),mr=Io(Fn.borderRadius);l.beginPath(),Object.values(mr).some(mn=>0!==mn)?Bs(l,{x:Hn,y:qi,w:xt,h:Gt,radius:mr}):l.rect(Hn,qi,xt,Gt),l.fill(),0!==yn&&l.stroke()}l.restore()}(I.x(Hn),mr,vn),Hn=((f,s,r,o)=>f===(o?"left":"right")?r:"center"===f?(s+r)/2:s)(yn,Hn+xt+qe,Ui?Hn+qi:this.right,s.rtl),function(vn,Mn,Fn){qo(l,Fn.text,vn,Mn+Wt/2,N,{strikethrough:Fn.hidden,textAlign:I.textAlign(Fn.textAlign)})}(I.x(Hn),mr,vn),Ui?Et.x+=qi+de:Et.y+=gn}),Ha(this.ctx,s.textDirection)}drawTitle(){const s=this.options,r=s.title,o=ao(r.font),l=jr(r.padding);if(!r.display)return;const p=oo(s.rtl,this.left,this.width),b=this.ctx,S=r.position,N=l.top+o.size/2;let $,de=this.left,Fe=this.width;if(this.isHorizontal())Fe=Math.max(...this.lineWidths),$=this.top+N,de=_e(s.align,de,this.right-Fe);else{const Et=this.columnSizes.reduce((xt,Gt)=>Math.max(xt,Gt.height),0);$=N+_e(s.align,this.top,this.bottom-Et-s.labels.padding-this._computeTitleHeight())}const qe=_e(S,de,de+Fe);b.textAlign=p.textAlign(Ge(S)),b.textBaseline="middle",b.strokeStyle=r.color,b.fillStyle=r.color,b.font=o.string,qo(b,r.text,qe,$,o)}_computeTitleHeight(){const s=this.options.title,r=ao(s.font),o=jr(s.padding);return s.display?r.lineHeight+o.height:0}_getLegendItemAt(s,r){let o,l,p;if(_i(s,this.left,this.right)&&_i(r,this.top,this.bottom))for(p=this.legendHitBoxes,o=0;o<p.length;++o)if(l=p[o],_i(s,l.left,l.left+l.width)&&_i(r,l.top,l.top+l.height))return this.legendItems[o];return null}handleEvent(s){const r=this.options;if(!function(f,s){return!!("mousemove"===f&&(s.onHover||s.onLeave)||s.onClick&&("click"===f||"mouseup"===f))}(s.type,r))return;const o=this._getLegendItemAt(s.x,s.y);if("mousemove"===s.type){const l=this._hoveredItem,p=((f,s)=>null!==f&&null!==s&&f.datasetIndex===s.datasetIndex&&f.index===s.index)(l,o);l&&!p&&ue(r.onLeave,[s,l,this],this),this._hoveredItem=o,o&&!p&&ue(r.onHover,[s,o,this],this)}else o&&ue(r.onClick,[s,o,this],this)}}var So={id:"legend",_element:Zl,start(f,s,r){const o=f.legend=new Zl({ctx:f.ctx,options:r,chart:f});wo.configure(f,o,r),wo.addBox(f,o)},stop(f){wo.removeBox(f,f.legend),delete f.legend},beforeUpdate(f,s,r){const o=f.legend;wo.configure(f,o,r),o.options=r},afterUpdate(f){const s=f.legend;s.buildLabels(),s.adjustHitBoxes()},afterEvent(f,s){s.replay||f.legend.handleEvent(s.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(f,s,r){const o=s.datasetIndex,l=r.chart;l.isDatasetVisible(o)?(l.hide(o),s.hidden=!0):(l.show(o),s.hidden=!1)},onHover:null,onLeave:null,labels:{color:f=>f.chart.options.color,boxWidth:40,padding:10,generateLabels(f){const s=f.data.datasets,{labels:{usePointStyle:r,pointStyle:o,textAlign:l,color:p}}=f.legend.options;return f._getSortedDatasetMetas().map(b=>{const S=b.controller.getStyle(r?0:void 0),I=jr(S.borderWidth);return{text:s[b.index].label,fillStyle:S.backgroundColor,fontColor:p,hidden:!b.visible,lineCap:S.borderCapStyle,lineDash:S.borderDash,lineDashOffset:S.borderDashOffset,lineJoin:S.borderJoinStyle,lineWidth:(I.width+I.height)/4,strokeStyle:S.borderColor,pointStyle:o||S.pointStyle,rotation:S.rotation,textAlign:l||S.textAlign,borderRadius:0,datasetIndex:b.index}},this)}},title:{color:f=>f.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:f=>!f.startsWith("on"),labels:{_scriptable:f=>!["generateLabels","filter","sort"].includes(f)}}};class Zu extends ra{constructor(s){super(),this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,r){const o=this.options;if(this.left=0,this.top=0,!o.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=s,this.height=this.bottom=r;const l=ye(o.text)?o.text.length:1;this._padding=jr(o.padding);const p=l*ao(o.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=p:this.width=p}isHorizontal(){const s=this.options.position;return"top"===s||"bottom"===s}_drawArgs(s){const{top:r,left:o,bottom:l,right:p,options:b}=this,S=b.align;let N,$,de,I=0;return this.isHorizontal()?($=_e(S,o,p),de=r+s,N=p-o):("left"===b.position?($=o+s,de=_e(S,l,r),I=-.5*xe):($=p-s,de=_e(S,r,l),I=.5*xe),N=l-r),{titleX:$,titleY:de,maxWidth:N,rotation:I}}draw(){const s=this.ctx,r=this.options;if(!r.display)return;const o=ao(r.font),p=o.lineHeight/2+this._padding.top,{titleX:b,titleY:S,maxWidth:I,rotation:N}=this._drawArgs(p);qo(s,r.text,0,0,o,{color:r.color,maxWidth:I,rotation:N,textAlign:Ge(r.align),textBaseline:"middle",translation:[b,S]})}}var Qc={id:"title",_element:Zu,start(f,s,r){!function(f,s){const r=new Zu({ctx:f.ctx,options:s,chart:f});wo.configure(f,r,s),wo.addBox(f,r),f.titleBlock=r}(f,r)},stop(f){wo.removeBox(f,f.titleBlock),delete f.titleBlock},beforeUpdate(f,s,r){const o=f.titleBlock;wo.configure(f,o,r),o.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qc=new WeakMap;var Fu={id:"subtitle",start(f,s,r){const o=new Zu({ctx:f.ctx,options:r,chart:f});wo.configure(f,o,r),wo.addBox(f,o),qc.set(f,o)},stop(f){wo.removeBox(f,qc.get(f)),qc.delete(f)},beforeUpdate(f,s,r){const o=qc.get(f);wo.configure(f,o,r),o.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gu={average(f){if(!f.length)return!1;let s,r,o=0,l=0,p=0;for(s=0,r=f.length;s<r;++s){const b=f[s].element;if(b&&b.hasValue()){const S=b.tooltipPosition();o+=S.x,l+=S.y,++p}}return{x:o/p,y:l/p}},nearest(f,s){if(!f.length)return!1;let p,b,S,r=s.x,o=s.y,l=Number.POSITIVE_INFINITY;for(p=0,b=f.length;p<b;++p){const I=f[p].element;if(I&&I.hasValue()){const $=Ji(s,I.getCenterPoint());$<l&&(l=$,S=I)}}if(S){const I=S.tooltipPosition();r=I.x,o=I.y}return{x:r,y:o}}};function vo(f,s){return s&&(ye(s)?Array.prototype.push.apply(f,s):f.push(s)),f}function Wl(f){return("string"==typeof f||f instanceof String)&&f.indexOf("\n")>-1?f.split("\n"):f}function md(f,s){const{element:r,datasetIndex:o,index:l}=s,p=f.getDatasetMeta(o).controller,{label:b,value:S}=p.getLabelAndValue(l);return{chart:f,label:b,parsed:p.getParsed(l),raw:f.data.datasets[o].data[l],formattedValue:S,dataset:p.getDataset(),dataIndex:l,datasetIndex:o,element:r}}function _d(f,s){const r=f.chart.ctx,{body:o,footer:l,title:p}=f,{boxWidth:b,boxHeight:S}=s,I=ao(s.bodyFont),N=ao(s.titleFont),$=ao(s.footerFont),de=p.length,Fe=l.length,qe=o.length,Et=jr(s.padding);let xt=Et.height,Gt=0,Wt=o.reduce((Ui,Yi)=>Ui+Yi.before.length+Yi.lines.length+Yi.after.length,0);Wt+=f.beforeBody.length+f.afterBody.length,de&&(xt+=de*N.lineHeight+(de-1)*s.titleSpacing+s.titleMarginBottom),Wt&&(xt+=qe*(s.displayColors?Math.max(S,I.lineHeight):I.lineHeight)+(Wt-qe)*I.lineHeight+(Wt-1)*s.bodySpacing),Fe&&(xt+=s.footerMarginTop+Fe*$.lineHeight+(Fe-1)*s.footerSpacing);let Ti=0;const an=function(Ui){Gt=Math.max(Gt,r.measureText(Ui).width+Ti)};return r.save(),r.font=N.string,ie(f.title,an),r.font=I.string,ie(f.beforeBody.concat(f.afterBody),an),Ti=s.displayColors?b+2+s.boxPadding:0,ie(o,Ui=>{ie(Ui.before,an),ie(Ui.lines,an),ie(Ui.after,an)}),Ti=0,r.font=$.string,ie(f.footer,an),r.restore(),Gt+=Et.width,{width:Gt,height:xt}}function y(f,s,r,o){const{x:l,width:p}=r,{width:b,chartArea:{left:S,right:I}}=f;let N="center";return"center"===o?N=l<=(S+I)/2?"left":"right":l<=p/2?N="left":l>=b-p/2&&(N="right"),function(f,s,r,o){const{x:l,width:p}=o,b=r.caretSize+r.caretPadding;if("left"===f&&l+p+b>s.width||"right"===f&&l-p-b<0)return!0}(N,f,s,r)&&(N="center"),N}function x(f,s,r){const o=r.yAlign||s.yAlign||function(f,s){const{y:r,height:o}=s;return r<o/2?"top":r>f.height-o/2?"bottom":"center"}(f,r);return{xAlign:r.xAlign||s.xAlign||y(f,s,r,o),yAlign:o}}function Y(f,s,r,o){const{caretSize:l,caretPadding:p,cornerRadius:b}=f,{xAlign:S,yAlign:I}=r,N=l+p,{topLeft:$,topRight:de,bottomLeft:Fe,bottomRight:qe}=Io(b);let Et=function(f,s){let{x:r,width:o}=f;return"right"===s?r-=o:"center"===s&&(r-=o/2),r}(s,S);const xt=function(f,s,r){let{y:o,height:l}=f;return"top"===s?o+=r:o-="bottom"===s?l+r:l/2,o}(s,I,N);return"center"===I?"left"===S?Et+=N:"right"===S&&(Et-=N):"left"===S?Et-=Math.max($,Fe)+l:"right"===S&&(Et+=Math.max(de,qe)+l),{x:zt(Et,0,o.width-s.width),y:zt(xt,0,o.height-s.height)}}function ce(f,s,r){const o=jr(r.padding);return"center"===s?f.x+f.width/2:"right"===s?f.x+f.width-o.right:f.x+o.left}function Ce(f){return vo([],Wl(f))}function Ke(f,s){const r=s&&s.dataset&&s.dataset.tooltip&&s.dataset.tooltip.callbacks;return r?f.override(r):f}let At=(()=>{class f extends ra{constructor(r){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=r.chart||r._chart,this._chart=this.chart,this.options=r.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(r){this.options=r,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const r=this._cachedAnimations;if(r)return r;const o=this.chart,l=this.options.setContext(this.getContext()),p=l.enabled&&o.options.animation&&l.animations,b=new Za(this.chart,p);return p._cacheable&&(this._cachedAnimations=Object.freeze(b)),b}getContext(){return this.$context||(this.$context=function(f,s,r){return Ko(f,{tooltip:s,tooltipItems:r,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(r,o){const{callbacks:l}=o,p=l.beforeTitle.apply(this,[r]),b=l.title.apply(this,[r]),S=l.afterTitle.apply(this,[r]);let I=[];return I=vo(I,Wl(p)),I=vo(I,Wl(b)),I=vo(I,Wl(S)),I}getBeforeBody(r,o){return Ce(o.callbacks.beforeBody.apply(this,[r]))}getBody(r,o){const{callbacks:l}=o,p=[];return ie(r,b=>{const S={before:[],lines:[],after:[]},I=Ke(l,b);vo(S.before,Wl(I.beforeLabel.call(this,b))),vo(S.lines,I.label.call(this,b)),vo(S.after,Wl(I.afterLabel.call(this,b))),p.push(S)}),p}getAfterBody(r,o){return Ce(o.callbacks.afterBody.apply(this,[r]))}getFooter(r,o){const{callbacks:l}=o,p=l.beforeFooter.apply(this,[r]),b=l.footer.apply(this,[r]),S=l.afterFooter.apply(this,[r]);let I=[];return I=vo(I,Wl(p)),I=vo(I,Wl(b)),I=vo(I,Wl(S)),I}_createItems(r){const o=this._active,l=this.chart.data,p=[],b=[],S=[];let N,$,I=[];for(N=0,$=o.length;N<$;++N)I.push(md(this.chart,o[N]));return r.filter&&(I=I.filter((de,Fe,qe)=>r.filter(de,Fe,qe,l))),r.itemSort&&(I=I.sort((de,Fe)=>r.itemSort(de,Fe,l))),ie(I,de=>{const Fe=Ke(r.callbacks,de);p.push(Fe.labelColor.call(this,de)),b.push(Fe.labelPointStyle.call(this,de)),S.push(Fe.labelTextColor.call(this,de))}),this.labelColors=p,this.labelPointStyles=b,this.labelTextColors=S,this.dataPoints=I,I}update(r,o){const l=this.options.setContext(this.getContext()),p=this._active;let b,S=[];if(p.length){const I=gu[l.position].call(this,p,this._eventPosition);S=this._createItems(l),this.title=this.getTitle(S,l),this.beforeBody=this.getBeforeBody(S,l),this.body=this.getBody(S,l),this.afterBody=this.getAfterBody(S,l),this.footer=this.getFooter(S,l);const N=this._size=_d(this,l),$=Object.assign({},I,N),de=x(this.chart,l,$),Fe=Y(l,$,de,this.chart);this.xAlign=de.xAlign,this.yAlign=de.yAlign,b={opacity:1,x:Fe.x,y:Fe.y,width:N.width,height:N.height,caretX:I.x,caretY:I.y}}else 0!==this.opacity&&(b={opacity:0});this._tooltipItems=S,this.$context=void 0,b&&this._resolveAnimations().update(this,b),r&&l.external&&l.external.call(this,{chart:this.chart,tooltip:this,replay:o})}drawCaret(r,o,l,p){const b=this.getCaretPosition(r,l,p);o.lineTo(b.x1,b.y1),o.lineTo(b.x2,b.y2),o.lineTo(b.x3,b.y3)}getCaretPosition(r,o,l){const{xAlign:p,yAlign:b}=this,{caretSize:S,cornerRadius:I}=l,{topLeft:N,topRight:$,bottomLeft:de,bottomRight:Fe}=Io(I),{x:qe,y:Et}=r,{width:xt,height:Gt}=o;let Wt,Ti,an,Ui,Yi,gn;return"center"===b?(Yi=Et+Gt/2,"left"===p?(Wt=qe,Ti=Wt-S,Ui=Yi+S,gn=Yi-S):(Wt=qe+xt,Ti=Wt+S,Ui=Yi-S,gn=Yi+S),an=Wt):(Ti="left"===p?qe+Math.max(N,de)+S:"right"===p?qe+xt-Math.max($,Fe)-S:this.caretX,"top"===b?(Ui=Et,Yi=Ui-S,Wt=Ti-S,an=Ti+S):(Ui=Et+Gt,Yi=Ui+S,Wt=Ti+S,an=Ti-S),gn=Ui),{x1:Wt,x2:Ti,x3:an,y1:Ui,y2:Yi,y3:gn}}drawTitle(r,o,l){const p=this.title,b=p.length;let S,I,N;if(b){const $=oo(l.rtl,this.x,this.width);for(r.x=ce(this,l.titleAlign,l),o.textAlign=$.textAlign(l.titleAlign),o.textBaseline="middle",S=ao(l.titleFont),I=l.titleSpacing,o.fillStyle=l.titleColor,o.font=S.string,N=0;N<b;++N)o.fillText(p[N],$.x(r.x),r.y+S.lineHeight/2),r.y+=S.lineHeight+I,N+1===b&&(r.y+=l.titleMarginBottom-I)}}_drawColorBox(r,o,l,p,b){const S=this.labelColors[l],I=this.labelPointStyles[l],{boxHeight:N,boxWidth:$,boxPadding:de}=b,Fe=ao(b.bodyFont),qe=ce(this,"left",b),Et=p.x(qe),Gt=o.y+(N<Fe.lineHeight?(Fe.lineHeight-N)/2:0);if(b.usePointStyle){const Wt={radius:Math.min($,N)/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:1},Ti=p.leftForLtr(Et,$)+$/2,an=Gt+N/2;r.strokeStyle=b.multiKeyBackground,r.fillStyle=b.multiKeyBackground,Do(r,Wt,Ti,an),r.strokeStyle=S.borderColor,r.fillStyle=S.backgroundColor,Do(r,Wt,Ti,an)}else{r.lineWidth=S.borderWidth||1,r.strokeStyle=S.borderColor,r.setLineDash(S.borderDash||[]),r.lineDashOffset=S.borderDashOffset||0;const Wt=p.leftForLtr(Et,$-de),Ti=p.leftForLtr(p.xPlus(Et,1),$-de-2),an=Io(S.borderRadius);Object.values(an).some(Ui=>0!==Ui)?(r.beginPath(),r.fillStyle=b.multiKeyBackground,Bs(r,{x:Wt,y:Gt,w:$,h:N,radius:an}),r.fill(),r.stroke(),r.fillStyle=S.backgroundColor,r.beginPath(),Bs(r,{x:Ti,y:Gt+1,w:$-2,h:N-2,radius:an}),r.fill()):(r.fillStyle=b.multiKeyBackground,r.fillRect(Wt,Gt,$,N),r.strokeRect(Wt,Gt,$,N),r.fillStyle=S.backgroundColor,r.fillRect(Ti,Gt+1,$-2,N-2))}r.fillStyle=this.labelTextColors[l]}drawBody(r,o,l){const{body:p}=this,{bodySpacing:b,bodyAlign:S,displayColors:I,boxHeight:N,boxWidth:$,boxPadding:de}=l,Fe=ao(l.bodyFont);let qe=Fe.lineHeight,Et=0;const xt=oo(l.rtl,this.x,this.width),Gt=function(Fn){o.fillText(Fn,xt.x(r.x+Et),r.y+qe/2),r.y+=qe+b},Wt=xt.textAlign(S);let Ti,an,Ui,Yi,gn,vn,Mn;for(o.textAlign=S,o.textBaseline="middle",o.font=Fe.string,r.x=ce(this,Wt,l),o.fillStyle=l.bodyColor,ie(this.beforeBody,Gt),Et=I&&"right"!==Wt?"center"===S?$/2+de:$+2+de:0,Yi=0,vn=p.length;Yi<vn;++Yi){for(Ti=p[Yi],an=this.labelTextColors[Yi],o.fillStyle=an,ie(Ti.before,Gt),Ui=Ti.lines,I&&Ui.length&&(this._drawColorBox(o,r,Yi,xt,l),qe=Math.max(Fe.lineHeight,N)),gn=0,Mn=Ui.length;gn<Mn;++gn)Gt(Ui[gn]),qe=Fe.lineHeight;ie(Ti.after,Gt)}Et=0,qe=Fe.lineHeight,ie(this.afterBody,Gt),r.y-=b}drawFooter(r,o,l){const p=this.footer,b=p.length;let S,I;if(b){const N=oo(l.rtl,this.x,this.width);for(r.x=ce(this,l.footerAlign,l),r.y+=l.footerMarginTop,o.textAlign=N.textAlign(l.footerAlign),o.textBaseline="middle",S=ao(l.footerFont),o.fillStyle=l.footerColor,o.font=S.string,I=0;I<b;++I)o.fillText(p[I],N.x(r.x),r.y+S.lineHeight/2),r.y+=S.lineHeight+l.footerSpacing}}drawBackground(r,o,l,p){const{xAlign:b,yAlign:S}=this,{x:I,y:N}=r,{width:$,height:de}=l,{topLeft:Fe,topRight:qe,bottomLeft:Et,bottomRight:xt}=Io(p.cornerRadius);o.fillStyle=p.backgroundColor,o.strokeStyle=p.borderColor,o.lineWidth=p.borderWidth,o.beginPath(),o.moveTo(I+Fe,N),"top"===S&&this.drawCaret(r,o,l,p),o.lineTo(I+$-qe,N),o.quadraticCurveTo(I+$,N,I+$,N+qe),"center"===S&&"right"===b&&this.drawCaret(r,o,l,p),o.lineTo(I+$,N+de-xt),o.quadraticCurveTo(I+$,N+de,I+$-xt,N+de),"bottom"===S&&this.drawCaret(r,o,l,p),o.lineTo(I+Et,N+de),o.quadraticCurveTo(I,N+de,I,N+de-Et),"center"===S&&"left"===b&&this.drawCaret(r,o,l,p),o.lineTo(I,N+Fe),o.quadraticCurveTo(I,N,I+Fe,N),o.closePath(),o.fill(),p.borderWidth>0&&o.stroke()}_updateAnimationTarget(r){const o=this.chart,l=this.$animations,p=l&&l.x,b=l&&l.y;if(p||b){const S=gu[r.position].call(this,this._active,this._eventPosition);if(!S)return;const I=this._size=_d(this,r),N=Object.assign({},S,this._size),$=x(o,r,N),de=Y(r,N,$,o);(p._to!==de.x||b._to!==de.y)&&(this.xAlign=$.xAlign,this.yAlign=$.yAlign,this.width=I.width,this.height=I.height,this.caretX=S.x,this.caretY=S.y,this._resolveAnimations().update(this,de))}}draw(r){const o=this.options.setContext(this.getContext());let l=this.opacity;if(!l)return;this._updateAnimationTarget(o);const p={width:this.width,height:this.height},b={x:this.x,y:this.y};l=Math.abs(l)<.001?0:l;const S=jr(o.padding);o.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(r.save(),r.globalAlpha=l,this.drawBackground(b,r,p,o),ko(r,o.textDirection),b.y+=S.top,this.drawTitle(b,r,o),this.drawBody(b,r,o),this.drawFooter(b,r,o),Ha(r,o.textDirection),r.restore())}getActiveElements(){return this._active||[]}setActiveElements(r,o){const l=this._active,p=r.map(({datasetIndex:I,index:N})=>{const $=this.chart.getDatasetMeta(I);if(!$)throw new Error("Cannot find a dataset at index "+I);return{datasetIndex:I,element:$.data[N],index:N}}),b=!ht(l,p),S=this._positionChanged(p,o);(b||S)&&(this._active=p,this._eventPosition=o,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(r,o,l=!0){if(o&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const p=this.options,b=this._active||[],S=this._getActiveElements(r,b,o,l),I=this._positionChanged(S,r),N=o||!ht(S,b)||I;return N&&(this._active=S,(p.enabled||p.external)&&(this._eventPosition={x:r.x,y:r.y},this.update(!0,o))),N}_getActiveElements(r,o,l,p){const b=this.options;if("mouseout"===r.type)return[];if(!p)return o;const S=this.chart.getElementsAtEventForMode(r,b.mode,b,l);return b.reverse&&S.reverse(),S}_positionChanged(r,o){const{caretX:l,caretY:p,options:b}=this,S=gu[b.position].call(this,r,o);return!1!==S&&(l!==S.x||p!==S.y)}}return f.positioners=gu,f})();var fi=Object.freeze({__proto__:null,Decimation:Dd,Filler:pu,Legend:So,SubTitle:Fu,Title:Qc,Tooltip:{id:"tooltip",_element:At,positioners:gu,afterInit(f,s,r){r&&(f.tooltip=new At({chart:f,options:r}))},beforeUpdate(f,s,r){f.tooltip&&f.tooltip.initialize(r)},reset(f,s,r){f.tooltip&&f.tooltip.initialize(r)},afterDraw(f){const s=f.tooltip,r={tooltip:s};!1!==f.notifyPlugins("beforeTooltipDraw",r)&&(s&&s.draw(f.ctx),f.notifyPlugins("afterTooltipDraw",r))},afterEvent(f,s){f.tooltip&&f.tooltip.handleEvent(s.event,s.replay,s.inChartArea)&&(s.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(f,s)=>s.bodyFont.size,boxWidth:(f,s)=>s.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:We,title(f){if(f.length>0){const s=f[0],r=s.chart.data.labels,o=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return s.dataset.label||"";if(s.label)return s.label;if(o>0&&s.dataIndex<o)return r[s.dataIndex]}return""},afterTitle:We,beforeBody:We,beforeLabel:We,label(f){if(this&&this.options&&"dataset"===this.options.mode)return f.label+": "+f.formattedValue||f.formattedValue;let s=f.dataset.label||"";s&&(s+=": ");const r=f.formattedValue;return Te(r)||(s+=r),s},labelColor(f){const r=f.chart.getDatasetMeta(f.datasetIndex).controller.getStyle(f.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(f){const r=f.chart.getDatasetMeta(f.datasetIndex).controller.getStyle(f.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:We,afterBody:We,beforeFooter:We,footer:We,afterFooter:We}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:f=>"filter"!==f&&"itemSort"!==f&&"external"!==f,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class sn extends pa{constructor(s){super(s),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(s){const r=this._addedLabels;if(r.length){const o=this.getLabels();for(const{index:l,label:p}of r)o[l]===p&&o.splice(l,1);this._addedLabels=[]}super.init(s)}parse(s,r){if(Te(s))return null;const o=this.getLabels();return((f,s)=>null===f?null:zt(Math.round(f),0,s))(r=isFinite(r)&&o[r]===s?r:function(f,s,r,o){const l=f.indexOf(s);return-1===l?((f,s,r,o)=>("string"==typeof s?(r=f.push(s)-1,o.unshift({index:r,label:s})):isNaN(s)&&(r=null),r))(f,s,r,o):l!==f.lastIndexOf(s)?r:l}(o,s,He(r,s),this._addedLabels),o.length-1)}determineDataLimits(){const{minDefined:s,maxDefined:r}=this.getUserBounds();let{min:o,max:l}=this.getMinMax(!0);"ticks"===this.options.bounds&&(s||(o=0),r||(l=this.getLabels().length-1)),this.min=o,this.max=l}buildTicks(){const s=this.min,r=this.max,o=this.options.offset,l=[];let p=this.getLabels();p=0===s&&r===p.length-1?p:p.slice(s,r+1),this._valueRange=Math.max(p.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let b=s;b<=r;b++)l.push({value:b});return l}getLabelForValue(s){const r=this.getLabels();return s>=0&&s<r.length?r[s]:s}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(s){return"number"!=typeof s&&(s=this.parse(s)),null===s?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getPixelForTick(s){const r=this.ticks;return s<0||s>r.length-1?null:this.getPixelForValue(r[s].value)}getValueForPixel(s){return Math.round(this._startValue+this.getDecimalForPixel(s)*this._valueRange)}getBasePixel(){return this.bottom}}function Sn(f,s,{horizontal:r,minRotation:o}){const l=wi(o),p=(r?Math.sin(l):Math.cos(l))||.001;return Math.min(s/p,.75*s*(""+f).length)}sn.id="category",sn.defaults={ticks:{callback:sn.prototype.getLabelForValue}};class hn extends pa{constructor(s){super(s),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(s,r){return Te(s)||("number"==typeof s||s instanceof Number)&&!isFinite(+s)?null:+s}handleTickRangeOptions(){const{beginAtZero:s}=this.options,{minDefined:r,maxDefined:o}=this.getUserBounds();let{min:l,max:p}=this;const b=I=>l=r?l:I,S=I=>p=o?p:I;if(s){const I=mt(l),N=mt(p);I<0&&N<0?S(0):I>0&&N>0&&b(0)}if(l===p){let I=1;(p>=Number.MAX_SAFE_INTEGER||l<=Number.MIN_SAFE_INTEGER)&&(I=Math.abs(.05*p)),S(p+I),s||b(l-I)}this.min=l,this.max=p}getTickLimit(){const s=this.options.ticks;let l,{maxTicksLimit:r,stepSize:o}=s;return o?(l=Math.ceil(this.max/o)-Math.floor(this.min/o)+1,l>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${o} would result generating up to ${l} ticks. Limiting to 1000.`),l=1e3)):(l=this.computeTickLimit(),r=r||11),r&&(l=Math.min(r,l)),l}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const s=this.options,r=s.ticks;let o=this.getTickLimit();o=Math.max(2,o);const b=function(f,s){const r=[],{bounds:l,step:p,min:b,max:S,precision:I,count:N,maxTicks:$,maxDigits:de,includeBounds:Fe}=f,qe=p||1,Et=$-1,{min:xt,max:Gt}=s,Wt=!Te(b),Ti=!Te(S),an=!Te(N),Ui=(Gt-xt)/(de+1);let gn,vn,Mn,Fn,Yi=yt((Gt-xt)/Et/qe)*qe;if(Yi<1e-14&&!Wt&&!Ti)return[{value:xt},{value:Gt}];Fn=Math.ceil(Gt/Yi)-Math.floor(xt/Yi),Fn>Et&&(Yi=yt(Fn*Yi/Et/qe)*qe),Te(I)||(gn=Math.pow(10,I),Yi=Math.ceil(Yi*gn)/gn),"ticks"===l?(vn=Math.floor(xt/Yi)*Yi,Mn=Math.ceil(Gt/Yi)*Yi):(vn=xt,Mn=Gt),Wt&&Ti&&p&&function(f,s){const r=Math.round(f);return r-s<=f&&r+s>=f}((S-b)/p,Yi/1e3)?(Fn=Math.round(Math.min((S-b)/Yi,$)),Yi=(S-b)/Fn,vn=b,Mn=S):an?(vn=Wt?b:vn,Mn=Ti?S:Mn,Fn=N-1,Yi=(Mn-vn)/Fn):(Fn=(Mn-vn)/Yi,Fn=ei(Fn,Math.round(Fn),Yi/1e3)?Math.round(Fn):Math.ceil(Fn));const yn=Math.max(pn(Yi),pn(vn));gn=Math.pow(10,Te(I)?yn:I),vn=Math.round(vn*gn)/gn,Mn=Math.round(Mn*gn)/gn;let qi=0;for(Wt&&(Fe&&vn!==b?(r.push({value:b}),vn<b&&qi++,ei(Math.round((vn+qi*Yi)*gn)/gn,b,Sn(b,Ui,f))&&qi++):vn<b&&qi++);qi<Fn;++qi)r.push({value:Math.round((vn+qi*Yi)*gn)/gn});return Ti&&Fe&&Mn!==S?r.length&&ei(r[r.length-1].value,S,Sn(S,Ui,f))?r[r.length-1].value=S:r.push({value:S}):(!Ti||Mn===S)&&r.push({value:Mn}),r}({maxTicks:o,bounds:s.bounds,min:s.min,max:s.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:!1!==r.includeBounds},this._range||this);return"ticks"===s.bounds&&Ni(b,this,"value"),s.reverse?(b.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),b}configure(){const s=this.ticks;let r=this.min,o=this.max;if(super.configure(),this.options.offset&&s.length){const l=(o-r)/Math.max(s.length-1,1)/2;r-=l,o+=l}this._startValue=r,this._endValue=o,this._valueRange=o-r}getLabelForValue(s){return ar(s,this.chart.options.locale,this.options.ticks.format)}}class Rn extends hn{determineDataLimits(){const{min:s,max:r}=this.getMinMax(!0);this.min=ge(s)?s:0,this.max=ge(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const s=this.isHorizontal(),r=s?this.width:this.height,o=wi(this.options.ticks.minRotation),l=(s?Math.sin(o):Math.cos(o))||.001,p=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,p.lineHeight/l))}getPixelForValue(s){return null===s?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getValueForPixel(s){return this._startValue+this.getDecimalForPixel(s)*this._valueRange}}function Jn(f){return f/Math.pow(10,Math.floor(nt(f)))==1}Rn.id="linear",Rn.defaults={ticks:{callback:Tc.formatters.numeric}};class br extends pa{constructor(s){super(s),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(s,r){const o=hn.prototype.parse.apply(this,[s,r]);if(0!==o)return ge(o)&&o>0?o:null;this._zero=!0}determineDataLimits(){const{min:s,max:r}=this.getMinMax(!0);this.min=ge(s)?Math.max(0,s):null,this.max=ge(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:s,maxDefined:r}=this.getUserBounds();let o=this.min,l=this.max;const p=I=>o=s?o:I,b=I=>l=r?l:I,S=(I,N)=>Math.pow(10,Math.floor(nt(I))+N);o===l&&(o<=0?(p(1),b(10)):(p(S(o,-1)),b(S(l,1)))),o<=0&&p(S(l,-1)),l<=0&&b(S(o,1)),this._zero&&this.min!==this._suggestedMin&&o===S(this.min,0)&&p(S(o,-1)),this.min=o,this.max=l}buildTicks(){const s=this.options,o=function(f,s){const r=Math.floor(nt(s.max)),o=Math.ceil(s.max/Math.pow(10,r)),l=[];let p=ae(f.min,Math.pow(10,Math.floor(nt(s.min)))),b=Math.floor(nt(p)),S=Math.floor(p/Math.pow(10,b)),I=b<0?Math.pow(10,Math.abs(b)):1;do{l.push({value:p,major:Jn(p)}),++S,10===S&&(S=1,++b,I=b>=0?1:I),p=Math.round(S*Math.pow(10,b)*I)/I}while(b<r||b===r&&S<o);const N=ae(f.max,p);return l.push({value:N,major:Jn(p)}),l}({min:this._userMin,max:this._userMax},this);return"ticks"===s.bounds&&Ni(o,this,"value"),s.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}getLabelForValue(s){return void 0===s?"0":ar(s,this.chart.options.locale,this.options.ticks.format)}configure(){const s=this.min;super.configure(),this._startValue=nt(s),this._valueRange=nt(this.max)-nt(s)}getPixelForValue(s){return(void 0===s||0===s)&&(s=this.min),null===s||isNaN(s)?NaN:this.getPixelForDecimal(s===this.min?0:(nt(s)-this._startValue)/this._valueRange)}getValueForPixel(s){const r=this.getDecimalForPixel(s);return Math.pow(10,this._startValue+r*this._valueRange)}}function fo(f){const s=f.ticks;if(s.display&&f.display){const r=jr(s.backdropPadding);return He(s.font&&s.font.size,dr.font.size)+r.height}return 0}function Es(f,s,r){return r=ye(r)?r:[r],{w:ws(f,s.string,r),h:r.length*s.lineHeight}}function Wo(f,s,r,o,l){return f===o||f===l?{start:s-r/2,end:s+r/2}:f<o||f>l?{start:s-r,end:s}:{start:s,end:s+r}}function Pa(f,s,r,o,l){const p=Math.abs(Math.sin(r)),b=Math.abs(Math.cos(r));let S=0,I=0;o.start<s.l?(S=(s.l-o.start)/p,f.l=Math.min(f.l,s.l-S)):o.end>s.r&&(S=(o.end-s.r)/p,f.r=Math.max(f.r,s.r+S)),l.start<s.t?(I=(s.t-l.start)/b,f.t=Math.min(f.t,s.t-I)):l.end>s.b&&(I=(l.end-s.b)/b,f.b=Math.max(f.b,s.b+I))}function Xr(f){return 0===f||180===f?"center":f<180?"left":"right"}function ks(f,s,r){return"right"===r?f-=s:"center"===r&&(f-=s/2),f}function ls(f,s,r){return 90===r||270===r?f-=s/2:(r>270||r<90)&&(f-=s),f}function F(f,s,r,o){const{ctx:l}=f;if(r)l.arc(f.xCenter,f.yCenter,s,0,pt);else{let p=f.getPointPosition(0,s);l.moveTo(p.x,p.y);for(let b=1;b<o;b++)p=f.getPointPosition(b,s),l.lineTo(p.x,p.y)}}br.id="logarithmic",br.defaults={ticks:{callback:Tc.formatters.logarithmic,major:{enabled:!0}}};class pe extends hn{constructor(s){super(s),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const s=this._padding=jr(fo(this.options)/2),r=this.width=this.maxWidth-s.width,o=this.height=this.maxHeight-s.height;this.xCenter=Math.floor(this.left+r/2+s.left),this.yCenter=Math.floor(this.top+o/2+s.top),this.drawingArea=Math.floor(Math.min(r,o)/2)}determineDataLimits(){const{min:s,max:r}=this.getMinMax(!1);this.min=ge(s)&&!isNaN(s)?s:0,this.max=ge(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/fo(this.options))}generateTickLabels(s){hn.prototype.generateTickLabels.call(this,s),this._pointLabels=this.getLabels().map((r,o)=>{const l=ue(this.options.pointLabels.callback,[r,o],this);return l||0===l?l:""}).filter((r,o)=>this.chart.getDataVisibility(o))}fit(){const s=this.options;s.display&&s.pointLabels.display?function(f){const s={l:f.left+f._padding.left,r:f.right-f._padding.right,t:f.top+f._padding.top,b:f.bottom-f._padding.bottom},r=Object.assign({},s),o=[],l=[],p=f._pointLabels.length,b=f.options.pointLabels,S=b.centerPointLabels?xe/p:0;for(let I=0;I<p;I++){const N=b.setContext(f.getPointLabelContext(I));l[I]=N.padding;const $=f.getPointPosition(I,f.drawingArea+l[I],S),de=ao(N.font),Fe=Es(f.ctx,de,f._pointLabels[I]);o[I]=Fe;const qe=Ot(f.getIndexAngle(I)+S),Et=Math.round(yi(qe));Pa(r,s,qe,Wo(Et,$.x,Fe.w,0,180),Wo(Et,$.y,Fe.h,90,270))}f.setCenterPoint(s.l-r.l,r.r-s.r,s.t-r.t,r.b-s.b),f._pointLabelItems=function(f,s,r){const o=[],l=f._pointLabels.length,p=f.options,b=fo(p)/2,S=f.drawingArea,I=p.pointLabels.centerPointLabels?xe/l:0;for(let N=0;N<l;N++){const $=f.getPointPosition(N,S+b+r[N],I),de=Math.round(yi(Ot($.angle+et))),Fe=s[N],qe=ls($.y,Fe.h,de),Et=Xr(de),xt=ks($.x,Fe.w,Et);o.push({x:$.x,y:qe,textAlign:Et,left:xt,top:qe,right:xt+Fe.w,bottom:qe+Fe.h})}return o}(f,o,l)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(s,r,o,l){this.xCenter+=Math.floor((s-r)/2),this.yCenter+=Math.floor((o-l)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(s,r,o,l))}getIndexAngle(s){return Ot(s*(pt/(this._pointLabels.length||1))+wi(this.options.startAngle||0))}getDistanceFromCenterForValue(s){if(Te(s))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-s)*r:(s-this.min)*r}getValueForDistanceFromCenter(s){if(Te(s))return NaN;const r=s/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(s){const r=this._pointLabels||[];if(s>=0&&s<r.length){const o=r[s];return function(f,s,r){return Ko(f,{label:r,index:s,type:"pointLabel"})}(this.getContext(),s,o)}}getPointPosition(s,r,o=0){const l=this.getIndexAngle(s)-et+o;return{x:Math.cos(l)*r+this.xCenter,y:Math.sin(l)*r+this.yCenter,angle:l}}getPointPositionForValue(s,r){return this.getPointPosition(s,this.getDistanceFromCenterForValue(r))}getBasePosition(s){return this.getPointPositionForValue(s||0,this.getBaseValue())}getPointLabelPosition(s){const{left:r,top:o,right:l,bottom:p}=this._pointLabelItems[s];return{left:r,top:o,right:l,bottom:p}}drawBackground(){const{backgroundColor:s,grid:{circular:r}}=this.options;if(s){const o=this.ctx;o.save(),o.beginPath(),F(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),o.closePath(),o.fillStyle=s,o.fill(),o.restore()}}drawGrid(){const s=this.ctx,r=this.options,{angleLines:o,grid:l}=r,p=this._pointLabels.length;let b,S,I;if(r.pointLabels.display&&function(f,s){const{ctx:r,options:{pointLabels:o}}=f;for(let l=s-1;l>=0;l--){const p=o.setContext(f.getPointLabelContext(l)),b=ao(p.font),{x:S,y:I,textAlign:N,left:$,top:de,right:Fe,bottom:qe}=f._pointLabelItems[l],{backdropColor:Et}=p;if(!Te(Et)){const xt=jr(p.backdropPadding);r.fillStyle=Et,r.fillRect($-xt.left,de-xt.top,Fe-$+xt.width,qe-de+xt.height)}qo(r,f._pointLabels[l],S,I+b.lineHeight/2,b,{color:p.color,textAlign:N,textBaseline:"middle"})}}(this,p),l.display&&this.ticks.forEach((N,$)=>{0!==$&&(S=this.getDistanceFromCenterForValue(N.value),function(f,s,r,o){const l=f.ctx,p=s.circular,{color:b,lineWidth:S}=s;!p&&!o||!b||!S||r<0||(l.save(),l.strokeStyle=b,l.lineWidth=S,l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset,l.beginPath(),F(f,r,p,o),l.closePath(),l.stroke(),l.restore())}(this,l.setContext(this.getContext($-1)),S,p))}),o.display){for(s.save(),b=p-1;b>=0;b--){const N=o.setContext(this.getPointLabelContext(b)),{color:$,lineWidth:de}=N;!de||!$||(s.lineWidth=de,s.strokeStyle=$,s.setLineDash(N.borderDash),s.lineDashOffset=N.borderDashOffset,S=this.getDistanceFromCenterForValue(r.ticks.reverse?this.min:this.max),I=this.getPointPosition(b,S),s.beginPath(),s.moveTo(this.xCenter,this.yCenter),s.lineTo(I.x,I.y),s.stroke())}s.restore()}}drawBorder(){}drawLabels(){const s=this.ctx,r=this.options,o=r.ticks;if(!o.display)return;const l=this.getIndexAngle(0);let p,b;s.save(),s.translate(this.xCenter,this.yCenter),s.rotate(l),s.textAlign="center",s.textBaseline="middle",this.ticks.forEach((S,I)=>{if(0===I&&!r.reverse)return;const N=o.setContext(this.getContext(I)),$=ao(N.font);if(p=this.getDistanceFromCenterForValue(this.ticks[I].value),N.showLabelBackdrop){s.font=$.string,b=s.measureText(S.label).width,s.fillStyle=N.backdropColor;const de=jr(N.backdropPadding);s.fillRect(-b/2-de.left,-p-$.size/2-de.top,b+de.width,$.size+de.height)}qo(s,S.label,0,-p,$,{color:N.color})}),s.restore()}drawTitle(){}}pe.id="radialLinear",pe.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Tc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:f=>f,padding:5,centerPointLabels:!1}},pe.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},pe.descriptors={angleLines:{_fallback:"grid"}};const Ye={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ze=Object.keys(Ye);function rt(f,s){return f-s}function St(f,s){if(Te(s))return null;const r=f._adapter,{parser:o,round:l,isoWeekday:p}=f._parseOpts;let b=s;return"function"==typeof o&&(b=o(b)),ge(b)||(b="string"==typeof o?r.parse(b,o):r.parse(b)),null===b?null:(l&&(b="week"!==l||!ut(p)&&!0!==p?r.startOf(b,l):r.startOf(b,"isoWeek",p)),+b)}function Mt(f,s,r,o){const l=ze.length;for(let p=ze.indexOf(f);p<l-1;++p){const b=Ye[ze[p]],S=b.steps?b.steps:Number.MAX_SAFE_INTEGER;if(b.common&&Math.ceil((r-s)/(S*b.size))<=o)return ze[p]}return ze[l-1]}function pi(f,s,r){if(r){if(r.length){const{lo:o,hi:l}=Ds(r,s);f[r[o]>=s?r[o]:r[l]]=!0}}else f[s]=!0}function ji(f,s,r){const o=[],l={},p=s.length;let b,S;for(b=0;b<p;++b)S=s[b],l[S]=b,o.push({value:S,major:!1});return 0!==p&&r?function(f,s,r,o){const l=f._adapter,p=+l.startOf(s[0].value,o),b=s[s.length-1].value;let S,I;for(S=p;S<=b;S=+l.add(S,1,o))I=r[S],I>=0&&(s[I].major=!0);return s}(f,o,l,r):o}let tn=(()=>{class f extends pa{constructor(r){super(r),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(r,o){const l=r.time||(r.time={}),p=this._adapter=new Ks._date(r.adapters.date);lt(l.displayFormats,p.formats()),this._parseOpts={parser:l.parser,round:l.round,isoWeekday:l.isoWeekday},super.init(r),this._normalized=o.normalized}parse(r,o){return void 0===r?null:St(this,r)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const r=this.options,o=this._adapter,l=r.time.unit||"day";let{min:p,max:b,minDefined:S,maxDefined:I}=this.getUserBounds();function N($){!S&&!isNaN($.min)&&(p=Math.min(p,$.min)),!I&&!isNaN($.max)&&(b=Math.max(b,$.max))}(!S||!I)&&(N(this._getLabelBounds()),("ticks"!==r.bounds||"labels"!==r.ticks.source)&&N(this.getMinMax(!1))),p=ge(p)&&!isNaN(p)?p:+o.startOf(Date.now(),l),b=ge(b)&&!isNaN(b)?b:+o.endOf(Date.now(),l)+1,this.min=Math.min(p,b-1),this.max=Math.max(p+1,b)}_getLabelBounds(){const r=this.getLabelTimestamps();let o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;return r.length&&(o=r[0],l=r[r.length-1]),{min:o,max:l}}buildTicks(){const r=this.options,o=r.time,l=r.ticks,p="labels"===l.source?this.getLabelTimestamps():this._generate();"ticks"===r.bounds&&p.length&&(this.min=this._userMin||p[0],this.max=this._userMax||p[p.length-1]);const b=this.min,I=function(f,s,r){let o=0,l=f.length;for(;o<l&&f[o]<s;)o++;for(;l>o&&f[l-1]>r;)l--;return o>0||l<f.length?f.slice(o,l):f}(p,b,this.max);return this._unit=o.unit||(l.autoSkip?Mt(o.minUnit,this.min,this.max,this._getLabelCapacity(b)):function(f,s,r,o,l){for(let p=ze.length-1;p>=ze.indexOf(r);p--){const b=ze[p];if(Ye[b].common&&f._adapter.diff(l,o,b)>=s-1)return b}return ze[r?ze.indexOf(r):0]}(this,I.length,o.minUnit,this.min,this.max)),this._majorUnit=l.major.enabled&&"year"!==this._unit?function(f){for(let s=ze.indexOf(f)+1,r=ze.length;s<r;++s)if(Ye[ze[s]].common)return ze[s]}(this._unit):void 0,this.initOffsets(p),r.reverse&&I.reverse(),ji(this,I,this._majorUnit)}initOffsets(r){let p,b,o=0,l=0;this.options.offset&&r.length&&(p=this.getDecimalForValue(r[0]),o=1===r.length?1-p:(this.getDecimalForValue(r[1])-p)/2,b=this.getDecimalForValue(r[r.length-1]),l=1===r.length?b:(b-this.getDecimalForValue(r[r.length-2]))/2);const S=r.length<3?.5:.25;o=zt(o,0,S),l=zt(l,0,S),this._offsets={start:o,end:l,factor:1/(o+1+l)}}_generate(){const r=this._adapter,o=this.min,l=this.max,p=this.options,b=p.time,S=b.unit||Mt(b.minUnit,o,l,this._getLabelCapacity(o)),I=He(b.stepSize,1),N="week"===S&&b.isoWeekday,$=ut(N)||!0===N,de={};let qe,Et,Fe=o;if($&&(Fe=+r.startOf(Fe,"isoWeek",N)),Fe=+r.startOf(Fe,$?"day":S),r.diff(l,o,S)>1e5*I)throw new Error(o+" and "+l+" are too far apart with stepSize of "+I+" "+S);const xt="data"===p.ticks.source&&this.getDataTimestamps();for(qe=Fe,Et=0;qe<l;qe=+r.add(qe,I,S),Et++)pi(de,qe,xt);return(qe===l||"ticks"===p.bounds||1===Et)&&pi(de,qe,xt),Object.keys(de).sort((Gt,Wt)=>Gt-Wt).map(Gt=>+Gt)}getLabelForValue(r){const l=this.options.time;return this._adapter.format(r,l.tooltipFormat?l.tooltipFormat:l.displayFormats.datetime)}_tickFormatFunction(r,o,l,p){const b=this.options,S=b.time.displayFormats,I=this._unit,N=this._majorUnit,de=N&&S[N],Fe=l[o],Et=this._adapter.format(r,p||(N&&de&&Fe&&Fe.major?de:I&&S[I])),xt=b.ticks.callback;return xt?ue(xt,[Et,o,l],this):Et}generateTickLabels(r){let o,l,p;for(o=0,l=r.length;o<l;++o)p=r[o],p.label=this._tickFormatFunction(p.value,o,r)}getDecimalForValue(r){return null===r?NaN:(r-this.min)/(this.max-this.min)}getPixelForValue(r){const o=this._offsets,l=this.getDecimalForValue(r);return this.getPixelForDecimal((o.start+l)*o.factor)}getValueForPixel(r){const o=this._offsets,l=this.getDecimalForPixel(r)/o.factor-o.end;return this.min+l*(this.max-this.min)}_getLabelSize(r){const o=this.options.ticks,l=this.ctx.measureText(r).width,p=wi(this.isHorizontal()?o.maxRotation:o.minRotation),b=Math.cos(p),S=Math.sin(p),I=this._resolveTickFontOptions(0).size;return{w:l*b+I*S,h:l*S+I*b}}_getLabelCapacity(r){const o=this.options.time,l=o.displayFormats,p=l[o.unit]||l.millisecond,b=this._tickFormatFunction(r,0,ji(this,[r],this._majorUnit),p),S=this._getLabelSize(b),I=Math.floor(this.isHorizontal()?this.width/S.w:this.height/S.h)-1;return I>0?I:1}getDataTimestamps(){let o,l,r=this._cache.data||[];if(r.length)return r;const p=this.getMatchingVisibleMetas();if(this._normalized&&p.length)return this._cache.data=p[0].controller.getAllParsedValues(this);for(o=0,l=p.length;o<l;++o)r=r.concat(p[o].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const r=this._cache.labels||[];let o,l;if(r.length)return r;const p=this.getLabels();for(o=0,l=p.length;o<l;++o)r.push(St(this,p[o]));return this._cache.labels=this._normalized?r:this.normalize(r)}normalize(r){return Pr(r.sort(rt))}}return f.id="time",f.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},f})();function nn(f,s,r){let p,b,S,I,o=0,l=f.length-1;r?(s>=f[o].pos&&s<=f[l].pos&&({lo:o,hi:l}=zo(f,"pos",s)),({pos:p,time:S}=f[o]),({pos:b,time:I}=f[l])):(s>=f[o].time&&s<=f[l].time&&({lo:o,hi:l}=zo(f,"time",s)),({time:p,pos:S}=f[o]),({time:b,pos:I}=f[l]));const N=b-p;return N?S+(I-S)*(s-p)/N:S}class An extends tn{constructor(s){super(s),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const s=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(s);this._minPos=nn(r,this.min),this._tableRange=nn(r,this.max)-this._minPos,super.initOffsets(s)}buildLookupTable(s){const{min:r,max:o}=this,l=[],p=[];let b,S,I,N,$;for(b=0,S=s.length;b<S;++b)N=s[b],N>=r&&N<=o&&l.push(N);if(l.length<2)return[{time:r,pos:0},{time:o,pos:1}];for(b=0,S=l.length;b<S;++b)$=l[b+1],I=l[b-1],N=l[b],Math.round(($+I)/2)!==N&&p.push({time:N,pos:b/(S-1)});return p}_getTimestampsForTable(){let s=this._cache.all||[];if(s.length)return s;const r=this.getDataTimestamps(),o=this.getLabelTimestamps();return s=r.length&&o.length?this.normalize(r.concat(o)):r.length?r:o,s=this._cache.all=s,s}getDecimalForValue(s){return(nn(this._table,s)-this._minPos)/this._tableRange}getValueForPixel(s){const r=this._offsets,o=this.getDecimalForPixel(s)/r.factor-r.end;return nn(this._table,o*this._tableRange+this._minPos,!0)}}An.id="timeseries",An.defaults=tn.defaults,si.register(ya,Lu,fi,Object.freeze({__proto__:null,CategoryScale:sn,LinearScale:Rn,LogarithmicScale:br,RadialLinearScale:pe,TimeScale:tn,TimeSeriesScale:An}));const Kr=si;var cs=g(54968),go=g(70262),kr=g(93075),Fo=g(68675),Ma=g(54004),Ls=g(39841),st=g(5e3),Br=g(48966),Ps=g(95240),Zs=g(53251),kc=g(67322),Lc=g(77531),Hu=g(91079),Qu=g(69808),Ad=g(47423),Rl=g(63874),oh=g(90508);function xh(f,s){if(1&f&&(st.TgZ(0,"mat-option",14),st._uU(1),st.qZA()),2&f){const r=s.$implicit;st.Q6J("value",r),st.xp6(1),st.hij(" ",r," ")}}function Na(f,s){if(1&f&&(st.TgZ(0,"mat-option",14),st._uU(1),st.qZA()),2&f){const r=s.$implicit;st.Q6J("value",r),st.xp6(1),st.hij(" ",r," ")}}function qh(f,s){if(1&f){const r=st.EpF();st.TgZ(0,"tr"),st.TgZ(1,"td"),st._uU(2),st.qZA(),st.TgZ(3,"td"),st.TgZ(4,"button",15),st.NdJ("click",function(){const p=st.CHM(r).$implicit;return st.oxw().chooseDemo(p)}),st._uU(5),st.qZA(),st.qZA(),st.TgZ(6,"td"),st.TgZ(7,"b"),st._uU(8),st.qZA(),st._uU(9),st.qZA(),st.qZA()}if(2&f){const r=s.$implicit,o=s.index;let l,p;st.xp6(2),st.hij(" ",o+1," "),st.xp6(3),st.hij(" ",r.description," "),st.xp6(3),st.Oqu(null==r.categories||null==(l=r.categories.split(";"))?null:l.join(", ")),st.xp6(1),st.hij(" ",null==r.blocks||null==(p=r.blocks.split(";"))?null:p.join(", ")," ")}}function zd(f,s){if(1&f){const r=st.EpF();st.TgZ(0,"button",15),st.NdJ("click",function(){return st.CHM(r),st.oxw().Verify()}),st.TgZ(1,"mat-icon"),st._uU(2,"save"),st.qZA(),st._uU(3," Verify LocalAPI "),st.qZA()}}function Yd(f,s){if(1&f){const r=st.EpF();st.TgZ(0,"tr"),st.TgZ(1,"td"),st._uU(2),st.qZA(),st.TgZ(3,"td"),st.TgZ(4,"button",15),st.NdJ("click",function(){const p=st.CHM(r).$implicit;return st.oxw().chooseDemo(p)}),st._uU(5),st.qZA(),st.qZA(),st.TgZ(6,"td"),st.TgZ(7,"b"),st._uU(8),st.qZA(),st._uU(9),st.qZA(),st.qZA()}if(2&f){const r=s.$implicit,o=s.index;let l,p;st.xp6(2),st.hij(" ",o+1," "),st.xp6(3),st.hij(" ",r.description||r.id," "),st.xp6(3),st.Oqu(null==r.categories||null==(l=r.categories.split(";"))?null:l.join(", ")),st.xp6(1),st.hij(" ",null==r.blocks||null==(p=r.blocks.split(";"))?null:p.join(", ")," ")}}let Id=(()=>{class f{constructor(r,o){this.dialogRef=r,this.DetailsApp=o,this.BlocksLocal=[],this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.demosArray=null,this.myBlocks=new kr.NI,this.optionsBlocks=[],this.filteredOptionsBlocks=null,this.myCategories=new kr.NI,this.mySearchText=new kr.NI,this.optionsCategories=[],this.filteredOptionsCategories=null,this.InitiateDemos(),this.loadFromLocalAPI()}loadFromLocalAPI(){var r,o;(null===(r=this.DetailsApp.LocalAPI)||void 0===r?void 0:r.WasAlive)&&(null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.LoadBlocks().subscribe(l=>{this.BlocksLocal=l}))}Verify(){var r;null===(r=this.DetailsApp.LocalAPI)||void 0===r||r.IsAlive().subscribe(o=>{o&&this.loadFromLocalAPI()})}InitiateDemos(){var r=this.DetailsApp.demoBlocks;this.demos=r.sort((o,l)=>o.description.localeCompare(l.description)),this.optionsCategories=[...new Set(r.map(o=>o.categories).filter(o=>(null==o?void 0:o.length)>0).flatMap(o=>o.split(";")).filter(o=>(null==o?void 0:o.length)>0).sort((o,l)=>o.toLocaleLowerCase().localeCompare(l.toLocaleLowerCase())))],this.optionsBlocks=[...new Set(r.map(o=>o.blocks).filter(o=>(null==o?void 0:o.length)>0).flatMap(o=>o.split(";")).filter(o=>(null==o?void 0:o.length)>0).sort((o,l)=>o.toLowerCase().localeCompare(l.toLowerCase())))],this.filteredOptionsBlocks=this.myBlocks.valueChanges.pipe((0,Fo.O)(""),(0,Ma.U)(o=>{var l=(o||"").trim();return this._filter(l,this.optionsBlocks)})),this.filteredOptionsCategories=this.myCategories.valueChanges.pipe((0,Fo.O)(""),(0,Ma.U)(o=>{var l=(o||"").trim();return this._filter(l,this.optionsCategories)})),this.demosArray=(0,Ls.a)([this.myBlocks.valueChanges.pipe((0,Fo.O)("")),this.myCategories.valueChanges.pipe((0,Fo.O)("")),this.mySearchText.valueChanges.pipe((0,Fo.O)(""))]).pipe((0,Fo.O)(this.demos),(0,Ma.U)(([o,l,p])=>((Array.isArray(o)||"object"==typeof o)&&(o=""),(Array.isArray(l)||"object"==typeof l)&&(l=""),(Array.isArray(p)||"object"==typeof p)&&(p=""),o=(o||"").trim().toLowerCase(),l=(l||"").trim().toLowerCase(),p=(null==p?void 0:p.trim().toLowerCase())||"",this.demos.filter(S=>{var I,N,$,de,Fe,qe;return(0==o.length||(null===(I=S.blocks)||void 0===I?void 0:I.toLowerCase().indexOf(o))>-1)&&(0==l.length||(null===(N=S.categories)||void 0===N?void 0:N.toLowerCase().indexOf(l))>-1)&&(0==p.length||(null===($=S.description)||void 0===$?void 0:$.toLowerCase().indexOf(p))>-1||(null===(de=S.blocks)||void 0===de?void 0:de.toLowerCase().indexOf(p))>-1||(null===(Fe=S.categories)||void 0===Fe?void 0:Fe.toLowerCase().indexOf(p))>-1||(null===(qe=S.id)||void 0===qe?void 0:qe.toLowerCase().indexOf(p))>-1)}))))}ngOnInit(){}_filter(r,o){const l=r.toLowerCase();return 0==l.length?o:o.filter(p=>p.toLowerCase().includes(l))}chooseDemo(r){return this.dialogRef.close(r)}Close(){this.dialogRef.close()}}return f.\u0275fac=function(r){return new(r||f)(st.Y36(Br.so),st.Y36(Ps.d))},f.\u0275cmp=st.Xpm({type:f,selectors:[["app-find-saved-blocks"]],decls:52,vars:16,consts:[["label","Demos"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Categories","matInput","",3,"formControl","matAutocomplete"],["autoCategories","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Pick one","aria-label","Blocks","matInput","",3,"formControl","matAutocomplete"],["autoBlocks","matAutocomplete"],["type","text","placeholder","enter text to search","matInput","",3,"formControl"],[4,"ngFor","ngForOf"],["label","Saved on local"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","CLOUD","disabled","disabled"],["mat-raised-button","","id","blocks","color","accent",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,o){if(1&r&&(st.TgZ(0,"mat-tab-group"),st.TgZ(1,"mat-tab",0),st.TgZ(2,"form",1),st.TgZ(3,"mat-form-field",2),st.TgZ(4,"mat-label"),st._uU(5,"Categories"),st.qZA(),st._UZ(6,"input",3),st.TgZ(7,"mat-autocomplete",null,4),st.YNc(9,xh,2,2,"mat-option",5),st.ALo(10,"async"),st.qZA(),st.qZA(),st.TgZ(11,"mat-form-field",2),st.TgZ(12,"mat-label"),st._uU(13,"Blocks"),st.qZA(),st._UZ(14,"input",6),st.TgZ(15,"mat-autocomplete",null,7),st.YNc(17,Na,2,2,"mat-option",5),st.ALo(18,"async"),st.qZA(),st.qZA(),st.TgZ(19,"mat-form-field",2),st.TgZ(20,"mat-label"),st._uU(21,"Search"),st.qZA(),st._UZ(22,"input",8),st.qZA(),st.qZA(),st.TgZ(23,"table"),st.TgZ(24,"thead"),st.TgZ(25,"tr"),st.TgZ(26,"th"),st._uU(27,"Number"),st.qZA(),st.TgZ(28,"th"),st._uU(29,"Name"),st.qZA(),st.TgZ(30,"th"),st._uU(31,"Details"),st.qZA(),st.qZA(),st.qZA(),st.YNc(32,qh,10,4,"tr",9),st.ALo(33,"async"),st.qZA(),st.qZA(),st.TgZ(34,"mat-tab",10),st.YNc(35,zd,4,0,"button",11),st.TgZ(36,"table"),st.TgZ(37,"thead"),st.TgZ(38,"tr"),st.TgZ(39,"th"),st._uU(40,"Number"),st.qZA(),st.TgZ(41,"th"),st._uU(42,"Name"),st.qZA(),st.TgZ(43,"th"),st._uU(44,"Details"),st.qZA(),st.qZA(),st.qZA(),st.YNc(45,Yd,10,4,"tr",9),st.qZA(),st.qZA(),st.TgZ(46,"mat-tab",12),st._uU(47," Saved on Cloud "),st.qZA(),st.qZA(),st.TgZ(48,"button",13),st.NdJ("click",function(){return o.Close()}),st.TgZ(49,"mat-icon"),st._uU(50,"close"),st.qZA(),st._uU(51," Close\n"),st.qZA()),2&r){const l=st.MAs(8),p=st.MAs(16);st.xp6(6),st.Q6J("formControl",o.myCategories)("matAutocomplete",l),st.xp6(3),st.Q6J("ngForOf",st.lcZ(10,10,o.filteredOptionsCategories)),st.xp6(5),st.Q6J("formControl",o.myBlocks)("matAutocomplete",p),st.xp6(3),st.Q6J("ngForOf",st.lcZ(18,12,o.filteredOptionsBlocks)),st.xp6(5),st.Q6J("formControl",o.mySearchText),st.xp6(10),st.Q6J("ngForOf",st.lcZ(33,14,o.demosArray)),st.xp6(3),st.Q6J("ngIf",!(null!=o.DetailsApp.LocalAPI&&o.DetailsApp.LocalAPI.WasAlive)),st.xp6(10),st.Q6J("ngForOf",o.BlocksLocal)}},directives:[Zs.SP,Zs.uX,kr._Y,kr.JL,kr.F,kc.KE,kc.hX,Lc.Nt,kr.Fj,Hu.ZL,kr.JJ,kr.oH,Hu.XC,Qu.sg,Qu.O5,Ad.lW,Rl.Hw,oh.ey],pipes:[Qu.Ov],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid}table[_ngcontent-%COMP%]{width:100%;height:480px;margin:0 auto;display:block;overflow-x:auto;border-spacing:0}tbody[_ngcontent-%COMP%]{white-space:nowrap}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border-top-width:0;border-left-width:0}th[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;vertical-align:bottom}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right-width:0}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom-width:0}"]}),f})();class Xd{constructor(){}definitionBlocks(s,r){s.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},r.headersbeforehttp=function(p){var b=r.valueToCode(p,"HttpDomain",0)||"(localSite)",N="\n";return N+="{\n",N+="if(!("+b+" in headersForDomain))\n",N+="{\n",N+="headersForDomain["+b+"]=[];\n",N+="};\n",N+="var arr = headersForDomain["+b+"];\n",N+="arr.push({name:"+r.valueToCode(p,"HeaderName",0)+", value:"+r.valueToCode(p,"HeaderValue",0)+"});\n",N+='//alert("a" + JSON.stringify(arr)+"a");\n',(N+='//alert("a" + JSON.stringify(headersForDomain['+b+'])+"a");\n')+"};\n"},s.httprequest={init:function(){this.appendDummyInput().appendField(new t.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new t.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},r.httprequest=function(p){var b=p.getFieldValue("TypeOutput"),S=p.getFieldValue("TypeRequest"),I=r.valueToCode(p,"TheUrl",0),N=r.valueToCode(p,"Data",0),$="";switch(S.toString()){case"GET":$="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+I+") )";break;case"POST":$="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+I,N&&($+=","+N),$+=") )";break;case"DELETE":$="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+I,N&&($+=","+N),$+=") )";break;case"PUT":$="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+I,N&&($+=","+N),$+=") )";break;default:alert("Do not understand : "+S.toString())}var de=$;return"JSON"===b&&(de="JSON.parse("+de+")"),[de,99]}}fieldXML(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>  \n  }\n}\n'}}class Lp{fieldXML(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}}class Pp{definitionBlocks(s,r){s.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},r.trycatchfinally=function(p){var N="try {\n"+r.statementToCode(p,"TRY")+"}\n";return(N+="catch(err){\n "+r.statementToCode(p,"CATCH")+"\n}")+"finally{\n "+r.statementToCode(p,"FINALLY")+"\n}\n"}}fieldXML(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}}class Mr{definitionBlocks(s,r){s.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice").appendField(new t.FieldDropdown(this.generateOptions),"voiceSelected"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},generateOptions:function(){if(window.speechSynthesis){var l=window.speechSynthesis.getVoices().map((p,b)=>[p.name,"voice"+b]);if(l.length>0)return l}return[["no voice","NoVoice"]]}},r.ttsBlock=function(o){var l=o.getFieldValue("voiceSelected");return"NoVoice"==(l=l.replace("voice",""))&&(l="-1"),"speakDefault("+r.valueToCode(o,"NAME",r.ORDER_ATOMIC)+","+l+");\n"}}fieldXML(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}}class Od{definitionBlocks(s,r){s.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},r.pianoBlock=function(o){var l=r.valueToCode(o,"Note",r.ORDER_ATOMIC),I="";return"true"==(r.valueToCode(o,"Sharp",r.ORDER_ATOMIC)||!1)&&(I="#"),"playPiano("+l+I+","+r.valueToCode(o,"Octave",r.ORDER_ATOMIC)+","+(r.valueToCode(o,"Duration",r.ORDER_ATOMIC)||2)+");\n"},s.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.cmajor=function(o){return['["C","D","E","F","G","A","B"]',r.ORDER_NONE]}}fieldXML(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}}class sh{constructor(){this.definitionBlocks=function(s,r){s.concatList={init:function(){this.appendDummyInput().appendField("concatArray"),this.appendValueInput("LIST1").setCheck("Array"),this.appendValueInput("LIST2").setCheck("Array"),this.setInputsInline(!1),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.concatList=function(o){var b="";return b+="(function(a1,a2){ return [].concat(a1).concat(a2);})("+(r.valueToCode(o,"LIST1",r.ORDER_MEMBER)||"[]")+","+(r.valueToCode(o,"LIST2",r.ORDER_MEMBER)||"[]")+")",[b+="",r.ORDER_FUNCTION_CALL]},s.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.filterList=function(o){var l=r.valueToCode(o,"LIST",r.ORDER_MEMBER)||"[]",p=r.valueToCode(o,"Logic",r.ORDER_ATOMIC);"string"==typeof p&&(p=p.substr(1,p.length-2));var b="";return b+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).filter(function (item){ return "+p+";})",[b+="",r.ORDER_FUNCTION_CALL]},s.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.mapList=function(o){var l=r.valueToCode(o,"LIST",r.ORDER_MEMBER)||"[]",p=r.valueToCode(o,"Logic",r.ORDER_ATOMIC);"string"==typeof p&&(p=p.substr(1,p.length-2));var b="";return b+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).map(function (item){ return "+p+";})",[b+="",r.ORDER_FUNCTION_CALL]},s.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.reduceList=function(o){var l=r.valueToCode(o,"LIST",r.ORDER_MEMBER)||"[]",p="";try{p=r.valueToCode(o,"initValue",r.ORDER_ATOMIC)}catch(I){window.alert(I)}var b=r.valueToCode(o,"Logic",r.ORDER_ATOMIC);"string"==typeof b&&(b=b.substr(1,b.length-2));var S="";return S+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).reduce(function (acc,curVal,index,array){ "+b+";}",p&&p.toString().length>0&&(S+=","+p),S+=")",[S+="",r.ORDER_FUNCTION_CALL]}}}fieldXML(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="concatList"></block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}}class ep{definitionBlocks(s,r){s.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.auth0webapidata=function(p){var $='{"client_id":'+r.valueToCode(p,"client_id",0);return $+=',"client_secret":'+r.valueToCode(p,"client_secret",0),$+=',"audience":'+r.valueToCode(p,"audience",0),$+=',"grant_type":'+r.valueToCode(p,"grant_type",0),[$+="}",99]}}fieldXML(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}}class Kd{definitionBlocks(s,r){s.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},r.converttojson=function(p){return["JSON.parse("+r.valueToCode(p,"ValueToConvert",0)+")",99]},s.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},r.converttostring=function(p){return["JSON.stringify("+r.valueToCode(p,"ValueToConvert",0)+")",99]},s.convertcsv={init:function(){this.appendDummyInput().appendField("Convert To CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.convertcsv=function(p){return["convertToCSV("+r.valueToCode(p,"ArrayToConvert",r.ORDER_ATOMIC)+")",99]},s.convertToTable={init:function(){this.appendDummyInput().appendField("Convert To Table"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.convertToTable=function(p){return["convertArrToTable("+r.valueToCode(p,"ArrayToConvert",r.ORDER_ATOMIC)+")",99]}}fieldXML(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n <block type="convertToTable"></block>\n\n'}}class Pc{definitionBlocks(s,r){s.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new t.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};r.displayCurrentDate=p=>{let S="";switch(p.getFieldValue("dateFormat").toString()){case"human":S="displayDateFormatted('human')";break;case"iso":S="displayDateFormatted('iso')";break;case"unix":S="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[S,99]}}fieldXML(){return'<block type="displayCurrentDate"></block>'}}class Rh{definitionBlocks(s,r){s.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},r.DateFromText=l=>["Date.parse("+(r.valueToCode(l,"VALUE",r.ORDER_ATOMIC)||"")+")",99]}fieldXML(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}}class tp{definitionBlocks(s,r){s.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new t.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},r.sendinblue=function(l){var S='window.alert("SendInBlue");\n',I="api.sendinblue.com";return S=`(function(apiKey,email){if(!('${I}' in headersForDomain)){ headersForDomain['${I}']=[]; };\n`,S+=`headersForDomain['${I}'].push({"name":"api-key","value":apiKey});\n`,S+=`headersForDomain['${I}'].push({"name":"Content-Type","value":"application/json"});\n`,S+=`headersForDomain['${I}'].push({"name":"Accept","value":"application/json"});\n`,S+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',S+="\nwindow.alert(JSON.stringify(sendinblueData));\n",S+=`var res=JSON.parse(postXhr("https://${I}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[S+="})("+r.valueToCode(l,"APIKey",r.ORDER_ATOMIC)+","+r.valueToCode(l,"email",r.ORDER_ATOMIC)+")",r.ORDER_NONE]},r.blockemail=function(l){var p=r.valueToCode(l,"from",r.ORDER_ATOMIC),b=r.valueToCode(l,"to",r.ORDER_ATOMIC),S=r.valueToCode(l,"cc",r.ORDER_ATOMIC),I=r.valueToCode(l,"bcc",r.ORDER_ATOMIC),N=r.valueToCode(l,"subject",r.ORDER_ATOMIC),$=l.getFieldValue("NAME"),Fe="{";return Fe+='"from":'+p+",",Fe+='"to":'+b+",",Fe+='"cc":'+S+",",Fe+='"bcc":'+I+",",Fe+='"subject":'+N+",",Fe+='"body":'+r.valueToCode(l,"body",r.ORDER_ATOMIC)+",",Fe+='"typeEmail":"'+$+'"',[""+(Fe+="}"),r.ORDER_NONE]}}fieldXML(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}}class ah{definitionBlocks(s,r){s.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.exportfile=function(p){return"exportToFile("+r.valueToCode(p,"fileName",0)+","+r.valueToCode(p,"contentFile",0)+","+r.valueToCode(p,"convertToByte",0)+");\n"}}fieldXML(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class mu{constructor(){this.definitionBlocks=function(s,r){s.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},r.window_open=function(p){var b=r.valueToCode(p,"TEXT",99)||"''";return"if((typeof "+b+' == "object") && ("to" in '+b+')){open("mailto:'+b.to+'")}else{ open('+b+")};\n"},s.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},r.text_message=function(p){return"alert1("+(r.valueToCode(p,"TEXT",99)||"''")+");\n"},s.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.text_print_return=function(p){var b=r.valueToCode(p,"TEXT",0)||"''";return["(function(){window.alert("+b+");\n;return ("+b+");}())\n",99]},s.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.valuefromtext=function(p){return["getIDProp("+r.valueToCode(p,"IdOfText",0)+","+(r.valueToCode(p,"ValueToObtain",0)||'"value"')+")",99]}}}fieldXML(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}}class lh{definitionBlocks(s,r){s.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new t.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new t.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new t.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new t.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new t.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.chart_js=function(o){var l=o.getFieldValue("ChartTypeValue"),b=(r.valueToCode(o,"ChartTitleValue",r.ORDER_ATOMIC),r.valueToCode(o,"LabelsValue",r.ORDER_ATOMIC)),S=r.valueToCode(o,"DataSet1Label",r.ORDER_ATOMIC),I=r.valueToCode(o,"DataSet1Data",r.ORDER_ATOMIC),N="",$="x";switch(l){case"HBar":N="bar",$="y";break;case"VBar":N="bar";break;default:throw"Unknown chart type:"+l}return[`JSON.stringify({ 'type': '${N}', 'options':{ 'indexAxis':'${$}'},  'data': {  'labels': ${b}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${S}, 'data': ${I} }] } })`,r.ORDER_NONE]}}fieldXML(){return'<block type="chart_js"></block>'}}class ch{definitionBlocks(s,r){s.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new t.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},r.HTMLheaders=function(o){var l=o.getFieldValue("NAME");return[`'<${l}>'+ ${r.valueToCode(o,"NAME",r.ORDER_ATOMIC)} + '</${l}>'`,r.ORDER_NONE]},s.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new t.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},r.HTMLlist=function(o){var l=o.getFieldValue("listType");return r.valueToCode(o,"ListType",r.ORDER_ATOMIC),`window.alert('<${l}>');\n;${r.statementToCode(o,"Content")};\n;window.alert('</${l}>');\n`},s.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},r.HTMLli=function(o){return[`'<li>'+ ${r.valueToCode(o,"NAME",r.ORDER_ATOMIC)} + '</li>'`,r.ORDER_NONE]},s.HTMLliStart={init:function(){this.appendDummyInput().appendField("List").appendField(new t.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI start"),this.setHelpUrl("")}},r.HTMLliStart=function(o){return[`'<${o.getFieldValue("NAME")}>'`,r.ORDER_NONE]},s.HTMLliStop={init:function(){this.appendDummyInput().appendField("/List").appendField(new t.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI stop"),this.setHelpUrl("")}},r.HTMLliStop=function(o){return[`'</${o.getFieldValue("NAME")}>'`,r.ORDER_NONE]},s.HTMLlinkFromObject={init:function(){this.appendDummyInput().appendField("Object=>Link").appendField("target").appendField(new t.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("objectProp").setCheck(null).appendField("objectProp"),this.appendValueInput("textProp").setCheck(null).appendField("textProp"),this.appendValueInput("hrefProp").setCheck(null).appendField("hrefProp"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.HTMLlinkFromObject=function(o){var l=o.getFieldValue("targetDrop"),p=r.valueToCode(o,"hrefProp",r.ORDER_MEMBER),b=r.valueToCode(o,"textProp",r.ORDER_ATOMIC),I="(function(obj,text,href){\n";return I+="return '<a href=\"'+ obj[href] ",I+=`+ '" target="${l}"'`,I+="+ '>'+ obj[text] + '</a>' ",[I+="}("+r.valueToCode(o,"objectProp",r.ORDER_ATOMIC)+","+(b=b||p)+","+p+"))",r.ORDER_FUNCTION_CALL]},s.HTMLlink={init:function(){this.appendDummyInput().appendField("A").appendField("target").appendField(new t.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("HREF").setCheck(null).appendField("href"),this.appendValueInput("text").setCheck(null).appendField("text"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.HTMLlink=function(o){var l=o.getFieldValue("targetDrop"),p=r.valueToCode(o,"HREF",r.ORDER_ATOMIC),b=r.valueToCode(o,"text",r.ORDER_ATOMIC),S="'<a href=\"'+"+p;return S+=`+ '" target="${l}"'`,[S+="+ '>'+"+(b=b||p)+"+ '</a> '",r.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n</block>    \n</value>\n</block>\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStart"></block>\n</value>\n</block>    \n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStop"></block>\n\n</value>\n</block>    \n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlink">\n<value name="HREF">\n<shadow type="text">\n    <field name="TEXT">http://</field>\n</shadow>\n\n</value>\n<value name="text">\n<shadow type="text">\n    <field name="TEXT">My Text</field>\n</shadow>\n\n</value>\n\n</block>\n</value>\n</block>    \n\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlinkFromObject">\n<value name="hrefProp">\n<shadow type="text">\n    <field name="TEXT">prop</field>\n</shadow>\n\n</value>\n<value name="textProp">\n<shadow type="text">\n    <field name="TEXT">prop</field>\n</shadow>\n\n</value>\n\n</block>\n</value>\n</block>    \n\n'}}class $d{definitionBlocks(s,r){s.simpleHtmlparser={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Find ").appendField(new t.FieldDropdown([["Tables","table"],["Links","a"],["Images","img"],["List","ul,ol"],["Headers","h1,h2,h3,h4,h5,h6"]]),"To"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.simpleHtmlparser=function(o){var b="(function(value){ \n";return b+=`var doc  = parseDOMFromStringElements(value,"text/html","${o.getFieldValue("To")}");\n`,b+="return doc;\n",[b+="})("+r.valueToCode(o,"NAME",r.ORDER_ATOMIC)+")",r.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="simpleHtmlparser">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        '}}class Np{definitionBlocks(s,r){s.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new t.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.modifyproperty=function(S){return r.valueToCode(S,"ObjectToChange",0)+"["+r.valueToCode(S,"PropertyName",0)+"]="+r.valueToCode(S,"NewValue",0)+";"},s.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new t.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},r.getproperty=function(S){var I=r.valueToCode(S,"ObjectToChange",0);return["(function(t, val){   return findPropValue(val,t);})("+r.valueToCode(S,"PropertyName",0)+","+I+")",99]}}fieldXML(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}}class uh{definitionBlocks(s,r,o,l){r.object_from_json=function(yn){return[`JSON.parse(${r.valueToCode(yn,"JSON",0)})`,99]},r.object_to_json=function(yn){return[`JSON.stringify(${r.valueToCode(yn,"object",0)})`,99]},r.object_get=function(yn){const qi=yn.getFieldValue("field_name");return[`${r.valueToCode(yn,"object",0)}['${qi}']`,99]},r.object_set=function(yn){const qi=yn.getFieldValue("field_name");return`${r.valueToCode(yn,"object_field",0)}['${qi}'] = ${r.valueToCode(yn,"value_field",0)};\n`},r.object_create=function(yn){if(!yn.numFields)return["{}",99];let qi="";for(let mr=1;mr<=yn.numFields;mr++)qi+=`"${yn.getFieldValue("field"+mr)}": ${r.valueToCode(yn,"field_input"+mr,0)}, `;return[`{ ${qi} }`,99]};const Et="object_field",xt="object_create_mutator_top",Gt="#F99EA3",Wt=yn=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[yn]),Ti={type:"object_from_json",message0:Wt("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:Gt,tooltip:Wt("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};s.object_from_json={init:function(){this.jsonInit(Ti)}};const an={type:"object_to_json",message0:Wt("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:Gt,tooltip:Wt("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};s.object_to_json={init:function(){this.jsonInit(an)}};const Ui={type:"object_get",message0:Wt("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:Gt,tooltip:Wt("object_get_json_tooltip"),helpUrl:""};s.object_get={init:function(){this.jsonInit(Ui)}};const Yi={type:"object_set",message0:Wt("object_set_json"),args0:[{type:"field_input",name:"field_name",text:Wt("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Gt,tooltip:Wt("object_set_json_tooltip"),helpUrl:""};s.object_set={init:function(){this.jsonInit(Yi)}};const gn={type:"object_create",message0:Wt("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:Wt("object_create_tooltip"),helpUrl:""};s.object_create={init:function(){this.jsonInit(gn)}};const vn={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:Wt("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};s[Et]={init:function(){this.jsonInit(vn)}};const Mn={type:"object_create_mutator",message0:Wt("object_create"),nextStatement:null,colour:15,tooltip:Wt("object_create_tooltip"),helpUrl:""};s[xt]={init:function(){this.jsonInit(Mn)}};const Fn={numFields:0,fields:new Array,domToMutation:function(yn){this.fields=[];for(let Hn,qi=0;Hn=yn.childNodes[qi];qi++)"field"==Hn.nodeName.toLowerCase()&&this.fields.push(Hn.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const yn=document.createElement("mutation");yn.setAttribute("num_fields",""+this.numFields);for(let qi=0;qi<this.fields.length;qi++){const Hn=document.createElement("field");Hn.setAttribute("name",this.fields[qi]),yn.appendChild(Hn)}return yn},compose:function(yn){let qi=yn.nextConnection&&yn.nextConnection.targetBlock();this.numFields=0,this.fields=[];let Hn=[null];for(;qi;)this.fields.push(qi.getFieldValue("field_name")),this.numFields++,Hn.push(qi.savedConnection),qi=qi.nextConnection&&qi.nextConnection.targetBlock();this.updateShape();for(let mr=1;mr<=this.numFields;mr++)l.reconnect(Hn[mr],this,"field_input"+mr)},decompose:function(yn){const qi=yn.newBlock(xt);qi.initSvg();let Hn=qi.nextConnection;for(let mr=0;mr<this.fields.length;mr++){const mn=yn.newBlock(Et);mn.initSvg(),mn.setFieldValue(this.fields[mr],"field_name"),Hn.connect(mn.previousConnection),Hn=mn.nextConnection}return qi},saveConnections:function(yn){let qi=yn.nextConnection&&yn.nextConnection.targetBlock(),Hn=1;for(;qi;){const mr=this.getInput("field_input"+Hn);qi.savedConnection=mr&&mr.connection.targetConnection,qi.setFieldValue(this.getFieldValue("field"+Hn),"field_name"),Hn++,qi=qi.nextConnection&&qi.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let yn=1;for(;this.getInput("field_input"+yn);)this.removeInput("field_input"+yn),yn++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let qi=1;qi<=this.numFields;qi++){const Hn=this.fields[qi-1];this.appendValueInput("field_input"+qi).setCheck(null).setAlign(1).appendField(new t.FieldTextInput(Hn),"field"+qi)}}};try{o.registerMutator("controls_create_mutator",Fn,null,["object_field"])}catch(yn){}}fieldXML(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}}class ip{definitionBlocks(s,r){s.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},r.credsforhttp=function(p){return"withCredsForDomain["+(r.valueToCode(p,"HttpDomain",0)||"(localSite)")+"]="+r.valueToCode(p,"WithCreds",0)+";\n"}}fieldXML(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class Jd{definitionBlocks(s,r){s.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},r.wait=function(l){return"waitTime("+(r.valueToCode(l,"VALUE",r.ORDER_ATOMIC)||"")+");"},s.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},r.wait_until=function(l){return"waitTime(("+(r.valueToCode(l,"VALUE",0)||"")+"-new Date())/1000);"}}fieldXML(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}}class kd{definitionBlocks(s,r){s([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),r.wait_seconds=function(o){return"waitForSeconds("+Number(o.getFieldValue("SECONDS"))+");\n"}}fieldXML(){return'\n  <block type="wait_seconds"></block>\n'}}class dh{definitionBlocks(s,r){s.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.comment=function(l){return"/*\n"+(r.valueToCode(l,"TEXT",0)||"''")+"\n*/;\n"},s.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},r.debugger=function(l){return"startDebugger("+(r.valueToCode(l,"TEXT",0)||"''")+",'"+l.id+"',this);\n"}}fieldXML(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}}class hh{constructor(){this.xhrBlocks=new Xd,this.defaultBlocks=new Lp,this.trycatchFinBlock=new Pp,this.ttsBlock=new Mr,this.pianoBlock=new Od,this.filterBlocks=new sh,this.auth0Blocks=new ep,this.convertersBlocks=new Kd,this.currentDateBlock=new Pc,this.dateFromTextBlock=new Rh,this.emailBlocks=new tp,this.exportFileBlock=new ah,this.guiBlocks=new mu,this.chartBlock=new lh,this.htmlblocks=new ch,this.HTMLParserBlocks=new $d,this.propBlocks=new Np,this.createObjectBlocks=new uh,this.windowsCreds=new ip,this.waitBlocks1=new Jd,this.waitBlocks2=new kd,this.commentBlock=new dh}}var Zd=g(82734);class Fp{constructor(){}DownloadBlocks(s,r,o){var l=s.workspaceToDom(r,!0),p=s.domToPrettyText(l),b=new Blob([p],{type:"text/plain;charset=utf-16"});Zd.saveAs(b,o)}A(){return 1}LoadFile(s,r,o){r.clear();var l=s.textToDom(o);s.domToWorkspace(l,r)}formatInt(s){return s<10?"0"+s:s.toString(10)}formatDate(s){return`${this.formatInt(s.getFullYear())}${this.formatInt(s.getMonth()+1)}${this.formatInt(s.getDate())}${this.formatInt(s.getHours())}${this.formatInt(s.getMinutes())}${this.formatInt(s.getSeconds())}`}saveState(s,r,o){var l="BlocklyState"+(o||""),p=s.workspaceToDom(r,!0),b=s.domToPrettyText(p);window.localStorage.setItem(l,b)}restoreState(s,r,o){var p=window.localStorage.getItem("BlocklyState"+(o||""));if(((null==p?void 0:p.length)||0)>62){var b=s.textToDom(p);s.clearWorkspaceAndLoadFromXml(b,r)}return""}}const np=g(86942);class Ah{constructor(s,r){this.workspace=s,this.BlocklyJavaScript=r,this.latestCode="",this.step=0,this.highlightPause=!1,this.myInterpreter=null,this.runner=null}generateCodeAndLoadIntoInterpreter(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(this.workspace),this.resetStepUi(!0)}resetStepUi(s){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1}resetInterpreter(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)}findPropValue1(s,[r,...o]){return"string"==typeof s&&(s=JSON.parse(s)),s.a&&s.L&&s.O&&(s=s.a),o.length>0?this.findPropValue(s[r],o):s[r]}findPropValue(s,[r,...o]){return console.log("this is",s),o.length?this.findPropValue(s[r],o):s[r]}highlightBlock(s){this.workspace.highlightBlock(s),this.highlightPause=!0}nextStep(s,r){console.log("next step"),s.myInterpreter.step()?setTimeout((o,l)=>{o.nextStep(o,l)},10,s,r):(r?r():console.log("\n\n<< Program complete >>"),s.resetInterpreter(),s.resetStepUi(!1))}runCode(s,r,o,l){""==l&&(l=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var p=this;p.myInterpreter=s(l,(b,S)=>p.initApiJS(b,S,p,r,o)),1!=window.runOneByOne?setTimeout(function(){p.highlightPause=!1,p.runner=function(){p.myInterpreter&&(p.myInterpreter.run()?setTimeout(p.runner,10):(o?o():console.log("\n\n<< Program complete >>"),p.resetInterpreter(),p.resetStepUi(!1)))},p.runner&&p.runner()},100):this.nextStep(p,o)}initInterpreterWaitForSeconds(s,r){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var o=s.createAsyncFunction(function(l,p){setTimeout(p,1e3*l)});s.setProperty(r,"waitForSeconds",o)}getCreds(s,r,o){var l=s.pseudoToNative(r),p="(localSite)";(o.startsWith("http://")||o.startsWith("https://"))&&(p=new URL(o).hostname);var b=!1;return p in l?b=l[p]:"*"in l&&(b=l["*"]),b}getHeaders(s,r,o){var l=s.pseudoToNative(r),p="(localSite)";(o.startsWith("http://")||o.startsWith("https://"))&&(p=new URL(o).hostname);var b=[];return p in l?b=l[p]:"*"in l&&(b=l["*"]),b}doGet(s,r,o,l){let p=new XMLHttpRequest;p.open("GET",s,!0),this.generateDataAndCreds(p,o,l,!1),p.onreadystatechange=function(){if(4==p.readyState){if(p.status>=200&&p.status<300){var b=JSON.stringify({origHref:s,objectToSend:"",status:p.status,statusOK:!0,text:p.responseText});return r(b)}return b=JSON.stringify({origHref:s,objectToSend:"",status:p.status,statusOK:!1,text:p.responseText,headers:p.getAllResponseHeaders()}),r(b)}},p.send(null)}exportToFile(s,r,o){var l;return l=1==o?this.b64toBlob1(r,"",512):new Blob([r],{type:"text/plain;charset=utf-8"}),Zd.saveAs(l,s),s}b64toBlob1(s,r="",o=512){const l=atob(s),p=[];for(let S=0;S<l.length;S+=o){const I=l.slice(S,S+o),N=new Array(I.length);for(let de=0;de<I.length;de++)N[de]=I.charCodeAt(de);const $=new Uint8Array(N);p.push($)}return new Blob(p,{type:r})}displayDateCurrentAsHuman(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}displayDateCurrentAsIso(){return(new Date).toISOString()}displayDateCurrentAsUnix(){return Date.now()}displayDateFormatted(s){switch(s){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:return console.log("Date time format not suported"),""}}generateDataAndCreds(s,r,o,l){o&&(s.withCredentials=o);var p=!1;if(r&&r.length>0)for(var b=0;b<r.length;b++){var S=r[b];"Content-Type"==S.name&&(p=!0),s.setRequestHeader(S.name,S.value)}l&&!p&&s.setRequestHeader("Content-Type","application/json;charset=UTF-8")}doPut(s,r,o,l,p){let b=r,S=new XMLHttpRequest;S.open("PUT",s,!0),this.generateDataAndCreds(S,l,p,!!r),S.onreadystatechange=function(){if(4==S.readyState){if(S.status>=200&&S.status<300){var I=JSON.stringify({origHref:s,objectToSend:r,status:S.status,statusOK:!0,text:S.responseText});return o(I)}return I=JSON.stringify({origHref:s,objectToSend:r,status:S.status,statusOK:!1,text:S.responseText,headers:S.getAllResponseHeaders()}),o(I)}},S.send(b)}doDelete(s,r,o,l,p){let b=r;var S=new XMLHttpRequest;S.open("DELETE",s,!0),this.generateDataAndCreds(S,l,p,!!r),S.onreadystatechange=function(){if(4==S.readyState){if(S.status>=200&&S.status<300){var I=JSON.stringify({origHref:s,objectToSend:"",status:S.status,statusOK:!0,text:S.responseText});return o(I)}return I=JSON.stringify({origHref:s,status:S.status,statusOK:!1,text:S.responseText,objectToSend:r,headers:S.getAllResponseHeaders()}),o(I)}},S.send(b)}doPost(s,r,o,l,p){let b=r,S=new XMLHttpRequest;S.open("POST",s,!0),this.generateDataAndCreds(S,l,p,!!r),S.onreadystatechange=function(){if(4==S.readyState){if(S.status>=200&&S.status<300){var I=JSON.stringify({origHref:s,objectToSend:r,status:S.status,statusOK:!0,text:S.responseText});return o(I)}return I=JSON.stringify({origHref:s,objectToSend:r,status:S.status,statusOK:!1,text:S.responseText,headers:S.getAllResponseHeaders()}),o(I)}},S.send(b)}table2array(s){var r=s.rows,o=[];if(!r)return[];if(0==r.length)return[];for(var l=Array.from(r[0].children).map(N=>N.innerText),p=1;p<r.length;p++){for(var b=r[p].children,S={},I=0;I<b.length;I++)S[l[I]]=b[I].innerText;o.push(S)}return o}list2array(s){var r=s.getElementsByTagName("li"),o=[];if(0==r.length)return[];for(var l=0;l<r.length;l++)o.push({li:r[l].innerText});return o}parseDOMFromStringElements(s,r,o){var l,p=(new DOMParser).parseFromString(s,r),b=[];if(o.toString().indexOf(",")>-1)for(var S=o.split(","),I=0;I<S.length;I++)b=b.concat(Array.from(p.getElementsByTagName(S[I])));else b=(b=b.concat(p.getElementsByTagName(o)))[0];var N={};if(0==b.length)return N;switch(o){case"table":for(N={},I=0;I<b.length;I++)N["table"+I]=this.table2array(b[I]);break;case"a":N=[];var $=(null===(l=null==window?void 0:window.location)||void 0===l?void 0:l.host)||"";for($.length>0&&($=window.location.protocol+"//"+$),I=0;I<b.length;I++){var de=b[I].href;$.length>0&&de.startsWith($)&&(de=de.substring($.length)),N.push({href:de,text:b[I].innerText})}break;case"img":for(N=[],I=0;I<b.length;I++)N.push({src:b[I].src});break;case"ul,ol":for(N={},I=0;I<b.length;I++)N["list"+I]=this.list2array(b[I]);break;case"h1,h2,h3,h4,h5,h6":for(N=[],I=0;I<b.length;I++)N.push({header:b[I].innerText});break;default:throw new Error(`tag !${o}! not supported`)}return JSON.stringify(N)}consoleLog(s,r){return console.log(s,r)}initApiJS(s,r,o,l,p){var b=Hi=>{l?l("\n error --\n"+Hi+"\n error --"):console.log(Hi)};s.setProperty(r,"errHandler",s.createNativeFunction(b)),s.setProperty(r,"consoleLog",s.createNativeFunction(function(Hi,ln){return s.createPrimitive(o.consoleLog(Hi,ln))})),s.setProperty(r,"parseDOMFromStringElements",s.createNativeFunction(function(Hi,ln,zn){return Hi=Hi?Hi.toString():"",s.createPrimitive(o.parseDOMFromStringElements(Hi,ln,zn))})),s.setProperty(r,"parseDomNative",s.createNativeFunction(b));var N=s.nativeToPseudo({"(localSite)":!1});s.setProperty(r,"withCredsForDomain",N);var $=s.nativeToPseudo({"(localSite)":[]});s.setProperty(r,"headersForDomain",$),s.setProperty(r,"alert1",s.createNativeFunction(function(Hi){Hi=Hi?Hi.toString():"",window.alert(Hi)})),s.setProperty(r,"playPiano",s.createNativeFunction(function(Hi,ln,zn){np.Synth.createInstrument("piano").play(Hi,ln,zn)})),s.setProperty(r,"startDebugger",s.createNativeFunction(function(Hi,ln,zn){o.highlightBlock(ln),console.log(Hi,ln,zn)})),s.setProperty(r,"alert",s.createNativeFunction(function(Hi){Hi=Hi?Hi.toString():"",l?l(Hi):console.log(Hi)})),s.setProperty(r,"waitTime",s.createAsyncFunction((Hi,ln)=>{console.log(`waiting seconds ${Hi}`),setTimeout(ln,1e3*Hi)})),s.setProperty(r,"displayDateFormatted",s.createNativeFunction(Hi=>o.displayDateFormatted(Hi))),s.setProperty(r,"exportToFile",s.createNativeFunction((Hi,ln,zn)=>o.exportToFile(Hi,ln,zn))),s.setProperty(r,"convertToCSV",s.createNativeFunction(Hi=>{var ln=null;return Array.isArray(Hi)?ln=Hi:((ln="object"!=typeof Hi?JSON.parse(Hi):{})&&ln.table0&&(ln=ln.table0),ln&&ln.list0&&(ln=ln.list0)),0==ln.length?"":(ln=[Object.keys(ln[0])].concat(ln)).map(or=>Object.values(or).toString()).join("\n")})),s.setProperty(r,"convertArrToTable",s.createNativeFunction(Hi=>{var ln=null;if(Array.isArray(Hi)?ln=Hi:((ln="object"!=typeof Hi?JSON.parse(Hi):{})&&ln.table0&&(ln=ln.table0),ln&&ln.list0&&(ln=ln.list0)),0==ln.length)return"";var or="<table><tr>";return or+=Object.keys(ln[0]).map(Fs=>`<th>${Fs}</th>\n`).join(""),or+="</tr>",(or+=ln.map(Fs=>`<tr>${Object.values(Fs).map(Qi=>`<td>${Qi}</td>`).join("")}</tr>`).join(""))+"</table>"})),s.setProperty(r,"open",s.createNativeFunction(function(Hi){window.open(Hi,"_blank")})),s.setProperty(r,"changeHost",s.createNativeFunction(function(Hi,ln){if(0==(ln=(ln=ln?ln.toString():"").trim()).length)return Hi;if(0==(Hi=(Hi=Hi||"").trim()).length&&!(Hi=ln).startsWith("http"))throw`please put in front of ${ln} http:// or https://`;var zn=new URL(Hi);if(ln.startsWith("http")){var or=new URL(ln);zn.hostname=or.hostname,zn.protocol=or.protocol}else zn.hostname=ln.replace("https://","").replace("http://","");var Fs=zn.href;return Fs.endsWith("/")&&(Fs=Fs.substring(0,Fs.length-1)),Fs})),s.setProperty(r,"changePort",s.createNativeFunction(function(Hi,ln){var zn=new URL(Hi);console.log(`url ${zn.href}`),zn.port=ln,console.log(`url ${zn.href}`);var or=zn.href;return or.endsWith("/")&&(or=or.substring(0,or.length-1)),or})),s.setProperty(r,"speakDefault",s.createNativeFunction(function(Hi,ln,zn,or,Fs){var Qi=new SpeechSynthesisUtterance(Hi),Kn=parseInt(ln);if(Kn<0)console.log(" no voice selected");else{var jo=window.speechSynthesis.getVoices()[Kn];Qi.voice=jo,window.speechSynthesis.speak(Qi)}})),s.setProperty(r,"prompt",s.createAsyncFunction(function(Hi,ln,zn){Hi=Hi?Hi.toString():"",ln=ln?ln.toString():"",zn(window.prompt(Hi,ln))})),o.BlocklyJavaScript.addReservedWords("waitForSeconds");var Fn=s.createAsyncFunction(function(Hi,ln){setTimeout(ln,1e3*Hi)});s.setProperty(r,"waitForSeconds",Fn),s.setProperty(r,"getXhr",s.createAsyncFunction((Hi,ln)=>{var zn=o.getHeaders(s,$,Hi),or=o.getCreds(s,N,Hi);return o.doGet(Hi,ln,zn,or)})),s.setProperty(r,"postXhr",s.createAsyncFunction((Hi,ln,zn)=>{try{var or=o.getHeaders(s,$,Hi),Fs=o.getCreds(s,N,Hi);o.doPost(Hi,ln,zn,or,Fs)}catch(Qi){alert("is an error"+Qi)}})),s.setProperty(r,"deleteXhr",s.createAsyncFunction((Hi,ln,zn)=>{try{var or=o.getHeaders(s,$,Hi),Fs=o.getCreds(s,N,Hi);o.doDelete(Hi,ln,zn,or,Fs)}catch(Qi){alert("is an error"+Qi)}})),s.setProperty(r,"putXhr",s.createAsyncFunction((Hi,ln,zn)=>{try{var or=s.pseudoToNative($),Fs="(localSite)";(Hi.startsWith("http://")||Hi.startsWith("https://"))&&(Fs=new URL(Hi).hostname);var Qi=[];Fs in or&&(Qi=or[Fs]),o.doPut(Hi,ln,zn,Qi,!1)}catch(jo){alert("is an error"+jo)}})),s.setProperty(r,"highlightBlock",s.createNativeFunction(function(Hi){return Hi=Hi?Hi.toString():"",s.createPrimitive(o.highlightBlock(Hi))})),s.setProperty(r,"findPropValue",s.createNativeFunction(function(Hi,ln){return s.createPrimitive(o.findPropValue1(Hi,ln.split(".")))}))}}class Nc{constructor(s){this.table=s}reloadData(s,r){return this.table.dataLoader.load(s,void 0,void 0,void 0,r)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(s){return this.table.eventBus.subscribed(s)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(s){return this.table.externalEvents.subscribed(s)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(s,r){return void 0!==r&&(this.table.options[s]=r),this.table.options[s]}setOption(s,r){return void 0!==r&&(this.table.options[s]=r),this.table.options[s]}module(s){return this.table.module(s)}}class bo extends Nc{constructor(s,r){super(s),this._handler=null}initialize(){}registerTableOption(s,r){this.table.optionsList.register(s,r)}registerColumnOption(s,r){this.table.columnManager.optionsList.register(s,r)}registerTableFunction(s,r){void 0===this.table[s]?this.table[s]=r:console.warn("Unable to bind table function, name already in use",s)}registerComponentFunction(s,r,o){return this.table.componentFunctionBinder.bind(s,r,o)}registerDataHandler(s,r){this.table.rowManager.registerDataPipelineHandler(s,r),this._handler=s}registerDisplayHandler(s,r){this.table.rowManager.registerDisplayPipelineHandler(s,r),this._handler=s}refreshData(s,r){r||(r=this._handler),r&&this.table.rowManager.refreshActiveData(r,!1,s)}}class Ns{static elVisible(s){return!(s.offsetWidth<=0&&s.offsetHeight<=0)}static elOffset(s){var r=s.getBoundingClientRect();return{top:r.top+window.pageYOffset-document.documentElement.clientTop,left:r.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(s,r,o=[]){var l={}.__proto__,p=[].__proto__;for(var b in r||(r=Object.assign(Array.isArray(s)?[]:{},s)),s){let I,N,S=s[b];null!=S&&"object"==typeof S&&(S.__proto__===l||S.__proto__===p)&&(I=o.findIndex($=>$.subject===S),I>-1?r[b]=o[I].copy:(N=Object.assign(Array.isArray(S)?[]:{},S),o.unshift({subject:S,copy:N}),r[b]=this.deepClone(S,N,o)))}return r}}var Bp={};let rp=(()=>{class f extends bo{constructor(r){super(r),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(r){var o=!1,l={};this.allowedTypes.forEach(p=>{var S,b="accessor"+(p.charAt(0).toUpperCase()+p.slice(1));r.definition[b]&&(S=this.lookupAccessor(r.definition[b]))&&(o=!0,l[b]={accessor:S,params:r.definition[b+"Params"]||{}})}),o&&(r.modules.accessor=l)}lookupAccessor(r){var o=!1;switch(typeof r){case"string":f.accessors[r]?o=f.accessors[r]:console.warn("Accessor Error - No such accessor found, ignoring: ",r);break;case"function":o=r}return o}transformRow(r,o){var l="accessor"+(o.charAt(0).toUpperCase()+o.slice(1)),p=r.getComponent(),b=Ns.deepClone(r.data||{});return this.table.columnManager.traverse(function(S){var I,N,$,de;S.modules.accessor&&(N=S.modules.accessor[l]||S.modules.accessor.accessor||!1)&&"undefined"!=(I=S.getFieldValue(b))&&(de=S.getComponent(),$="function"==typeof N.params?N.params(I,b,o,de,p):N.params,S.setFieldValue(b,N.accessor(I,b,o,$,de,p)))}),b}}return f.moduleName="accessor",f.accessors=Bp,f})();var Vf={method:"GET"};function ph(f,s){var r=[];if(s=s||"",Array.isArray(f))f.forEach((l,p)=>{r=r.concat(ph(l,s?s+"["+p+"]":p))});else if("object"==typeof f)for(var o in f)r=r.concat(ph(f[o],s?s+"["+o+"]":o));else r.push({key:s,value:f});return r}function op(f){var s=ph(f),r=[];return s.forEach(function(o){r.push(encodeURIComponent(o.key)+"="+encodeURIComponent(o.value))}),r.join("&")}function Hp(f,s,r){return f&&r&&Object.keys(r).length&&(!s.method||"get"==s.method.toLowerCase())&&(s.method="get",f+=(f.includes("?")?"&":"?")+op(r)),f}function Ih(f,s,r){var o;return new Promise((l,p)=>{if(f=this.urlGenerator.call(this.table,f,s,r),"GET"!=s.method.toUpperCase())if(o="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var b in o.headers)s.headers||(s.headers={}),void 0===s.headers[b]&&(s.headers[b]=o.headers[b]);s.body=o.body.call(this,f,s,r)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);f?(void 0===s.headers&&(s.headers={}),void 0===s.headers.Accept&&(s.headers.Accept="application/json"),void 0===s.headers["X-Requested-With"]&&(s.headers["X-Requested-With"]="XMLHttpRequest"),void 0===s.mode&&(s.mode="cors"),"cors"==s.mode?(void 0===s.headers.Origin&&(s.headers.Origin=window.location.origin),void 0===s.credentials&&(s.credentials="same-origin")):void 0===s.credentials&&(s.credentials="include"),fetch(f,s).then(S=>{S.ok?S.json().then(I=>{l(I)}).catch(I=>{p(I),console.warn("Ajax Load Error - Invalid JSON returned",I)}):(console.error("Ajax Load Error - Connection Error: "+S.status,S.statusText),p(S))}).catch(S=>{console.error("Ajax Load Error - Connection Error: ",S),p(S)})):(console.warn("Ajax Load Error - No URL Set"),l([]))})}function Ld(f,s){var r=[];if(s=s||"",Array.isArray(f))f.forEach((l,p)=>{r=r.concat(Ld(l,s?s+"["+p+"]":p))});else if("object"==typeof f)for(var o in f)r=r.concat(Ld(f[o],s?s+"["+o+"]":o));else r.push({key:s,value:f});return r}var Qd={json:{headers:{"Content-Type":"application/json"},body:function(f,s,r){return JSON.stringify(r)}},form:{headers:{},body:function(f,s,r){var o=Ld(r),l=new FormData;return o.forEach(function(p){l.append(p.key,p.value)}),l}}};let Vp=(()=>{class f extends bo{constructor(r){super(r),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=f.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||f.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||f.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(r,o,l,p){return!((r||!this.url)&&"string"!=typeof r)}requestData(r,o,l,p,b){return this.requestDataCheck(r)?(r&&this.setUrl(r),o&&this.setParams(o,!0),l&&this.setConfig(l),this.sendRequest()):b}setParams(r,o){if(o){this.params=this.params||{};for(let l in r)this.params[l]=r[l]}else this.params=r}getParams(){return this.params||{}}setConfig(r){if(this._loadDefaultConfig(),"string"==typeof r)this.config.method=r;else for(let o in r)this.config[o]=r[o]}_loadDefaultConfig(r){if(!this.config||r){this.config={};for(let o in f.defaultConfig)this.config[o]=f.defaultConfig[o]}}setUrl(r){this.url=r}getUrl(){return this.url}sendRequest(r){var o=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(o,this.config,this.params).then(l=>(this.table.options.ajaxResponse&&(l=this.table.options.ajaxResponse.call(this.table,this.url,this.params,l)),l)):Promise.reject()}}return f.moduleName="ajax",f.defaultConfig=Vf,f.defaultURLGenerator=Hp,f.defaultLoaderPromise=Ih,f.contentTypeFormatters=Qd,f})();var fh={replace:function(f){return this.table.setData(f)},update:function(f){return this.table.updateOrAddData(f)},insert:function(f){return this.table.addData(f)}},Uf={table:function(f){var s=[],r=!0,o=this.table.columnManager.columns,l=[],p=[];return(f=f.split("\n")).forEach(function(b){s.push(b.split("\t"))}),!(!s.length||1===s.length&&s[0].length<2)&&(s[0].forEach(function(b){var S=o.find(function(I){return b&&I.definition.title&&b.trim()&&I.definition.title.trim()===b.trim()});S?l.push(S):r=!1}),r||(r=!0,l=[],s[0].forEach(function(b){var S=o.find(function(I){return b&&I.field&&b.trim()&&I.field.trim()===b.trim()});S?l.push(S):r=!1}),r||(l=this.table.columnManager.columnsByIndex)),r&&s.shift(),s.forEach(function(b){var S={};b.forEach(function(I,N){l[N]&&(S[l[N].field]=I)}),p.push(S)}),p)}};let Up=(()=>{class f extends bo{constructor(r){super(r),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",r=>{var o,l;if(!this.blocked){if(r.preventDefault(),this.customSelection)o=this.customSelection,this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o));else{var p=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");o=(l=this.table.modules.export.genereateHTMLTable(p))?this.generatePlainContent(p):"",this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o),l=this.table.options.clipboardCopyFormatter("html",l))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):r.clipboardData&&r.clipboardData.setData?(r.clipboardData.setData("text/plain",o),l&&r.clipboardData.setData("text/html",l)):r.originalEvent&&r.originalEvent.clipboardData.setData&&(r.originalEvent.clipboardData.setData("text/plain",o),l&&r.originalEvent.clipboardData.setData("text/html",l)),this.dispatchExternal("clipboardCopied",o,l),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",r=>{this.paste(r)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(r){var o=[];return r.forEach(l=>{var p=[];l.columns.forEach(b=>{var S="";if(b)if("group"===l.type&&(b.value=b.component.getKey()),null===b.value)S="";else switch(typeof b.value){case"object":S=JSON.stringify(b.value);break;case"undefined":S="";break;default:S=b.value}p.push(S)}),o.push(p.join("\t"))}),o.join("\n")}copy(r,o){var l,p;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=r||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((r=document.createRange()).selectNodeContents(this.table.element),(l=window.getSelection()).toString()&&o&&(this.customSelection=l.toString()),l.removeAllRanges(),l.addRange(r)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((p=document.body.createTextRange()).moveToElementText(this.table.element),p.select()),document.execCommand("copy"),l&&l.removeAllRanges())}setPasteAction(r){switch(typeof r){case"string":this.pasteAction=f.pasteActions[r],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",r);break;case"function":this.pasteAction=r}}setPasteParser(r){switch(typeof r){case"string":this.pasteParser=f.pasteParsers[r],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",r);break;case"function":this.pasteParser=r}}paste(r){var o,l,p;this.checkPaseOrigin(r)&&(o=this.getPasteData(r),(l=this.pasteParser.call(this,o))?(r.preventDefault(),this.table.modExists("mutator")&&(l=this.mutateData(l)),p=this.pasteAction.call(this,l),this.dispatchExternal("clipboardPasted",o,l,p)):this.dispatchExternal("clipboardPasteError",o))}mutateData(r){var o=[];return Array.isArray(r)?r.forEach(l=>{o.push(this.table.modules.mutator.transformRow(l,"clipboard"))}):o=r,o}checkPaseOrigin(r){var o=!0;return("DIV"!=r.target.tagName||this.table.modules.edit.currentCell)&&(o=!1),o}getPasteData(r){var o;return window.clipboardData&&window.clipboardData.getData?o=window.clipboardData.getData("Text"):r.clipboardData&&r.clipboardData.getData?o=r.clipboardData.getData("text/plain"):r.originalEvent&&r.originalEvent.clipboardData.getData&&(o=r.originalEvent.clipboardData.getData("text/plain")),o}}return f.moduleName="clipboard",f.pasteActions=fh,f.pasteParsers=Uf,f})();class Gf{constructor(s){return this._row=s,new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._row.table.componentFunctionBinder.handle("row",r._row,o)}})}getData(s){return this._row.getData(s)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var s=[];return this._row.getCells().forEach(function(r){s.push(r.getComponent())}),s}getCell(s){var r=this._row.getCell(s);return!!r&&r.getComponent()}_getSelf(){return this._row}}class Gp{constructor(s){return this._cell=s,new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._cell.table.componentFunctionBinder.handle("cell",r._cell,o)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(s,r){void 0===r&&(r=!0),this._cell.setValue(s,r)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class Oh extends Nc{constructor(s,r){super(s.table),this.table=s.table,this.column=s,this.row=r,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var s=this.element,r=this.column.getField();s.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(s.style.display="inline-flex",s.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(s.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),r&&s.setAttribute("tabulator-field",r),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(b=>{s.classList.add(b)}),"hover"===this.table.options.tooltipGenerationMode&&s.addEventListener("mouseenter",b=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var s;switch(typeof(s=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(s instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(s)}else this.element.innerHTML="",null!=s&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",s);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=s}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var s=this.column.tooltip;s?(!0===s?s=this.value:"function"==typeof s&&!1===(s=s(this.getComponent()))&&(s=""),void 0===s&&(s=""),this.element.setAttribute("title",s)):this.element.setAttribute("title","")}getElement(s){return this.loaded||(this.loaded=!0,s||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(s,r){this.setValueProcessData(s,r)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(s,r){var o=!1;return this.value!=s&&(o=!0,r&&(s=this.chain("cell-value-changing",[this,s],null,s))),this.setValueActual(s),o&&this.dispatch("cell-value-changed",this),o}setValueActual(s){this.oldValue=this.value,this.value=s,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,s),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Gp(this)),this.component}}class _u{constructor(s){return this._column=s,this.type="ColumnComponent",new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._column.table.componentFunctionBinder.handle("column",r._column,o)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var s=[];return this._column.cells.forEach(function(r){s.push(r.getComponent())}),s}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(s){s.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(s){s.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var s=[];return this._column.columns.length&&this._column.columns.forEach(function(r){s.push(r.getComponent())}),s}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(s,r){var o=this._column.table.columnManager.findColumn(s);o?this._column.table.columnManager.moveColumn(this._column,o,r):console.warn("Move Error - No matching column found:",o)}getNextColumn(){var s=this._column.nextColumn();return!!s&&s.getComponent()}getPrevColumn(){var s=this._column.prevColumn();return!!s&&s.getComponent()}updateDefinition(s){return this._column.updateDefinition(s)}getWidth(){return this._column.getWidth()}setWidth(s){var r;return r=!0===s?this._column.reinitializeWidth(!0):this._column.setWidth(s),this._column.table.columnManager.renderer.rerenderColumns(!0),r}}var ol={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let qu=(()=>{class f extends Nc{constructor(r,o){super(o.table),this.definition=r,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((l,p)=>{var b=new f(l,this);this.attachColumn(b)}),this.checkColumnVisibility()):o.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-col"),r.setAttribute("role","columnheader"),r.setAttribute("aria-sort","none"),r}createGroupElement(){var r=document.createElement("div");return r.classList.add("tabulator-col-group-cols"),r}mapDefinitions(){var r=this.table.options.columnDefaults;if(r)for(let o in r)void 0===this.definition[o]&&(this.definition[o]=r[o]);this.definition=this.table.columnManager.optionsList.generate(f.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(r=>{-1===f.defaultOptionList.indexOf(r)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",r)})}setField(r){this.field=r,this.fieldStructure=r?this.table.options.nestedFieldSeparator?r.split(this.table.options.nestedFieldSeparator):[r]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(r){this.parent.registerColumnPosition(r)}registerColumnField(r){this.parent.registerColumnField(r)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(r){r.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var r=this.definition,o=void 0===r.headerTooltip?r.tooltip:r.headerTooltip;o?!0===o?r.field?this.langBind("columns|"+r.field,l=>{this.element.setAttribute("title",l||r.title)}):this.element.setAttribute("title",r.title):("function"==typeof o&&!1===(o=o(this.getComponent()))&&(o=""),this.element.setAttribute("title",o)):this.element.setAttribute("title","")}_initialize(){for(var r=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);r.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===r.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",o=>{this.setTooltip()})}_bindEvents(){var o,l,p,r=this.definition;"function"==typeof r.headerClick&&this.element.addEventListener("click",b=>{r.headerClick(b,this.getComponent())}),"function"==typeof r.headerDblClick&&this.element.addEventListener("dblclick",b=>{r.headerDblClick(b,this.getComponent())}),"function"==typeof r.headerContext&&this.element.addEventListener("contextmenu",b=>{r.headerContext(b,this.getComponent())}),"function"==typeof r.headerTap&&(p=!1,this.element.addEventListener("touchstart",b=>{p=!0},{passive:!0}),this.element.addEventListener("touchend",b=>{p&&r.headerTap(b,this.getComponent()),p=!1})),"function"==typeof r.headerDblTap&&(o=null,this.element.addEventListener("touchend",b=>{o?(clearTimeout(o),o=null,r.headerDblTap(b,this.getComponent())):o=setTimeout(()=>{clearTimeout(o),o=null},300)})),"function"==typeof r.headerTapHold&&(l=null,this.element.addEventListener("touchstart",b=>{clearTimeout(l),l=setTimeout(function(){clearTimeout(l),l=null,p=!1,r.headerTapHold(b,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",b=>{clearTimeout(l),l=null}))}_buildColumnHeader(){var r=this.definition;this.dispatch("column-layout",this),void 0!==r.visible&&(r.visible?this.show(!0):this.hide(!0)),r.cssClass&&r.cssClass.split(" ").forEach(p=>{this.element.classList.add(p)}),r.field&&this.element.setAttribute("tabulator-field",r.field),this.setMinWidth(parseInt(r.minWidth)),r.maxWidth&&this.setMaxWidth(parseInt(r.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var l=document.createElement("div");return l.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),l.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),l}_buildColumnHeaderTitle(){var r=this.definition,o=document.createElement("div");if(o.classList.add("tabulator-col-title"),r.editableTitle){var l=document.createElement("input");l.classList.add("tabulator-title-editor"),l.addEventListener("click",p=>{p.stopPropagation(),l.focus()}),l.addEventListener("change",()=>{r.title=l.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),o.appendChild(l),r.field?this.langBind("columns|"+r.field,p=>{l.value=p||r.title||"&nbsp;"}):l.value=r.title||"&nbsp;"}else r.field?this.langBind("columns|"+r.field,p=>{this._formatColumnHeaderTitle(o,p||r.title||"&nbsp;")}):this._formatColumnHeaderTitle(o,r.title||"&nbsp;");return o}_formatColumnHeaderTitle(r,o){var l=this.chain("column-format",[this,o,r],null,()=>o);switch(typeof l){case"object":l instanceof Node?r.appendChild(l):(r.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l));break;case"undefined":case"null":r.innerHTML="";break;default:r.innerHTML=l}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(o=>{this.element.classList.add(o)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(r){return r[this.field]}_getNestedData(r){var b,o=r,l=this.fieldStructure,p=l.length;for(let S=0;S<p&&(b=o=o[l[S]],o);S++);return b}_setFlatData(r,o){this.field&&(r[this.field]=o)}_setNestedData(r,o){var l=r,p=this.fieldStructure,b=p.length;for(let S=0;S<b;S++)if(S==b-1)l[p[S]]=o;else{if(!l[p[S]]){if(void 0===o)break;l[p[S]]={}}l=l[p[S]]}}attachColumn(r){this.groupElement?(this.columns.push(r),this.groupElement.appendChild(r.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(r,o){var l=this.parent.isGroup?this.parent.getGroupElement().clientHeight:o||this.parent.getHeadersElement().clientHeight;this.element.style.height=l+"px",this.isGroup&&(this.groupElement.style.minHeight=l-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==r&&(this.element.style.paddingTop="bottom"===r?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(p){p.verticalAlign(r)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(r){r.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(r){var o=[];return this.isGroup&&r&&(this.columns.forEach(function(l){o.push(l.getDefinition(!0))}),this.definition.columns=o),this.definition}checkColumnVisibility(){var r=!1;this.columns.forEach(function(o){o.visible&&(r=!0)}),r?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(r,o){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(l){l.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,o),r||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(r,o){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(l){l.hide()}),this.dispatch("column-hide",this),r||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var r=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(o){o.visible&&(r+=o.getWidth())}),this.contentElement.style.maxWidth=r-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(r){var o=this.columns.indexOf(r);o>-1&&this.columns.splice(o,1),this.columns.length||this.delete()}setWidth(r){this.widthFixed=!0,this.setWidthActual(r)}setWidthActual(r){isNaN(r)&&(r=Math.floor(this.table.element.clientWidth/100*parseInt(r))),r=Math.max(this.minWidth,r),this.maxWidth&&(r=Math.min(this.maxWidth,r)),this.width=r,this.widthStyled=r?r+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(o){o.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var r=[];this.cells.forEach(function(o){o.row.heightInitialized&&(null!==o.row.getElement().offsetParent?(r.push(o.row),o.row.clearCellHeight()):o.row.heightInitialized=!1)}),r.forEach(function(o){o.calcHeight()}),r.forEach(function(o){o.setCellHeight()})}getWidth(){var r=0;return this.isGroup?this.columns.forEach(function(o){o.visible&&(r+=o.getWidth())}):r=this.width,r}getHeight(){return this.element.offsetHeight}setMinWidth(r){this.minWidth=r,this.minWidthStyled=r?r+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(o){o.setMinWidth()})}setMaxWidth(r){this.maxWidth=r,this.maxWidthStyled=r?r+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(o){o.setMaxWidth()})}delete(){return new Promise((r,o)=>{this.isGroup&&this.columns.forEach(function(p){p.delete()}),this.dispatch("column-delete",this);var l=this.cells.length;for(let p=0;p<l;p++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),r()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(r){var o=new Oh(this,r);return this.cells.push(o),o}nextColumn(){var r=this.table.columnManager.findColumnIndex(this);return r>-1&&this._nextVisibleColumn(r+1)}_nextVisibleColumn(r){var o=this.table.columnManager.getColumnByIndex(r);return!o||o.visible?o:this._nextVisibleColumn(r+1)}prevColumn(){var r=this.table.columnManager.findColumnIndex(this);return r>-1&&this._prevVisibleColumn(r-1)}_prevVisibleColumn(r){var o=this.table.columnManager.getColumnByIndex(r);return!o||o.visible?o:this._prevVisibleColumn(r-1)}reinitializeWidth(r){this.widthFixed=!1,void 0!==this.definition.width&&!r&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(o=>{o.clearWidth()}));var r=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(o=>{var l=o.getWidth();l>r&&(r=l)}),r&&this.setWidthActual(r+1))}}updateDefinition(r){var o;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(o=Object.assign({},this.getDefinition()),o=Object.assign(o,r),this.table.columnManager.addColumn(o,!1,this).then(l=>(o.field==this.field&&(this.field=!1),this.delete().then(()=>l.getComponent()))))}deleteCell(r){var o=this.cells.indexOf(r);o>-1&&this.cells.splice(o,1)}getComponent(){return this.component||(this.component=new _u(this)),this.component}}return f.defaultOptionList=ol,f})();class gh{constructor(s){return this._row=s,new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._row.table.componentFunctionBinder.handle("row",r._row,o)}})}getData(s){return this._row.getData(s)}getElement(){return this._row.getElement()}getCells(){var s=[];return this._row.getCells().forEach(function(r){s.push(r.getComponent())}),s}getCell(s){var r=this._row.getCell(s);return!!r&&r.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(s){return this._row.table.rowManager.getRowPosition(this._row,s)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(s,r){this._row.moveToRow(s,r)}update(s){return this._row.updateData(s)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var s=this._row.nextRow();return s&&s.getComponent()}getPrevRow(){var s=this._row.prevRow();return s&&s.getComponent()}}class sl extends Nc{constructor(s,r,o="row"){super(r.table),this.parent=r,this.data={},this.type=o,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(s)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var s=document.createElement("div");s.classList.add("tabulator-row"),s.setAttribute("role","row"),this.element=s}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(s){if(this.create(),!this.initialized||s){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),s&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(s){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(s){var r=0,o=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(l){var p=l.getHeight();p>r&&(r=p)}),this.height=s?Math.max(r,o):this.manualHeight?this.height:Math.max(r,o),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(s){s.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(s){s.clearHeight()})}normalizeHeight(s){s&&this.clearCellHeight(),this.calcHeight(s),this.setCellHeight()}setHeight(s,r){(this.height!=s||r)&&(this.manualHeight=!0,this.height=s,this.heightStyled=s?s+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(s){var r=this.cells.indexOf(s);r>-1&&this.cells.splice(r,1)}setData(s){this.data=this.chain("row-data-init-before",[this,s],void 0,s),this.dispatch("row-data-init-after",this)}updateData(s){var l,r=this.element&&Ns.elVisible(this.element),o={};return new Promise((p,b)=>{for(var S in"string"==typeof s&&(s=JSON.parse(s)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(o=Object.assign(o,this.data),o=Object.assign(o,s)),l=this.chain("row-data-changing",[this,o,s],null,s))this.data[S]=l[S];for(var S in this.dispatch("row-data-save-after",this),s)this.table.columnManager.getColumnsByFieldRoot(S).forEach($=>{let de=this.getCell($.getField());if(de){let Fe=$.getFieldValue(l);de.getValue()!=Fe&&(de.setValueProcessData(Fe),r&&de.cellRendered())}});r?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,r,s),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),p()})}getData(s){return s?this.chain("row-data-retrieve",[this,s],null,this.data):this.data}getCell(s){return s=this.table.columnManager.findColumn(s),this.initialized||this.generateCells(),this.cells.find(function(o){return o.column===s})}getCellIndex(s){return this.cells.findIndex(function(r){return r===s})}findCell(s){return this.cells.find(r=>r.element===s)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(s,r){var o=this.table.rowManager.findRow(s);o?(this.table.rowManager.moveRowActual(this,o,!r),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",s)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(s){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,s),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var s=this.cells.length;for(let r=0;r<s;r++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new gh(this)),this.component}}var mh={avg:function(f,s,r){var o=0,l=void 0!==r.precision?r.precision:2;return f.length&&(o=f.reduce(function(p,b){return Number(p)+Number(b)}),o/=f.length,o=!1!==l?o.toFixed(l):o),parseFloat(o).toString()},max:function(f,s,r){var o=null,l=void 0!==r.precision&&r.precision;return f.forEach(function(p){((p=Number(p))>o||null===o)&&(o=p)}),null!==o?!1!==l?o.toFixed(l):o:""},min:function(f,s,r){var o=null,l=void 0!==r.precision&&r.precision;return f.forEach(function(p){((p=Number(p))<o||null===o)&&(o=p)}),null!==o?!1!==l?o.toFixed(l):o:""},sum:function(f,s,r){var o=0,l=void 0!==r.precision&&r.precision;return f.length&&f.forEach(function(p){p=Number(p),o+=isNaN(p)?0:Number(p)}),!1!==l?o.toFixed(l):o},concat:function(f,s,r){var o=0;return f.length&&(o=f.reduce(function(l,p){return String(l)+String(p)})),o},count:function(f,s,r){var o=0;return f.length&&f.forEach(function(l){l&&o++}),o}};let qd=(()=>{class f extends bo{constructor(r){super(r),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-calcs-holder"),r}initialize(){this.genColumn=new qu({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(r){this.recalc(this.table.rowManager.activeRows),r&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(r){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(r){(r.column.definition.topCalc||r.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(r.row)):this.recalcActiveRows())}initializeColumnCheck(r){(r.definition.topCalc||r.definition.bottomCalc)&&this.initializeColumn(r)}initializeColumn(r){var o=r.definition,l={topCalcParams:o.topCalcParams||{},botCalcParams:o.bottomCalcParams||{}};if(o.topCalc){switch(typeof o.topCalc){case"string":f.calculations[o.topCalc]?l.topCalc=f.calculations[o.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.topCalc);break;case"function":l.topCalc=o.topCalc}l.topCalc&&(r.modules.columnCalcs=l,this.topCalcs.push(r),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(o.bottomCalc){switch(typeof o.bottomCalc){case"string":f.calculations[o.bottomCalc]?l.botCalc=f.calculations[o.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.bottomCalc);break;case"function":l.botCalc=o.bottomCalc}l.botCalc&&(r.modules.columnCalcs=l,this.botCalcs.push(r),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var r=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),r=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),r=!0),r&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(r){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-r+"px")}recalc(r){var o;if(this.topInitialized||this.botInitialized){if(this.rowsToData(r),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),o=this.generateRow("top",this.rowsToData(r)),this.topRow=o;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(o.getElement()),o.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),o=this.generateRow("bottom",this.rowsToData(r)),this.botRow=o;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(o.getElement()),o.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(r){this.recalcGroup(this.table.modules.groupRows.getRowGroup(r))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(o=>{this.recalcGroup(o)})}recalcGroup(r){var o,l;r&&r.calcs&&(r.calcs.bottom&&(o=this.rowsToData(r.rows),l=this.generateRowData("bottom",o),r.calcs.bottom.updateData(l),r.calcs.bottom.reinitialize()),r.calcs.top&&(o=this.rowsToData(r.rows),l=this.generateRowData("top",o),r.calcs.top.updateData(l),r.calcs.top.reinitialize()))}generateTopRow(r){return this.generateRow("top",this.rowsToData(r))}generateBottomRow(r){return this.generateRow("bottom",this.rowsToData(r))}rowsToData(r){var o=[];return r.forEach(l=>{if(o.push(l.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&l.modules.dataTree.open){var p=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(l));o=o.concat(p)}}),o}generateRow(r,o){var p,l=this.generateRowData(r,o);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),p=new sl(l,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),p.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+r),p.component=!1,p.getComponent=()=>(p.component||(p.component=new Gf(this)),p.component),p.generateCells=()=>{var b=[];this.table.columnManager.columnsByIndex.forEach(S=>{this.genColumn.setField(S.getField()),this.genColumn.hozAlign=S.hozAlign,this.genColumn.modules.format=S.definition[r+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(S.definition[r+"CalcFormatter"]),params:S.definition[r+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=S.definition.cssClass;var I=new Oh(this.genColumn,p);I.getElement(),I.column=S,I.setWidth(),S.cells.push(I),b.push(I),S.visible||I.hide()}),p.cells=b},p}generateRowData(r,o){var S,I,l={},b="top"==r?"topCalc":"botCalc";return("top"==r?this.topCalcs:this.botCalcs).forEach(function(N){var $=[];N.modules.columnCalcs&&N.modules.columnCalcs[b]&&(o.forEach(function(de){$.push(N.getFieldValue(de))}),S="function"==typeof N.modules.columnCalcs[I=b+"Params"]?N.modules.columnCalcs[I]($,o):N.modules.columnCalcs[I],N.setFieldValue(l,N.modules.columnCalcs[b]($,o,S)))}),l}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var r={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(l=>{r[l.getKey()]=this.getGroupResults(l)}):r={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},r}getGroupResults(r){var o=r._getSelf(),l=r.getSubGroups(),p={};return l.forEach(S=>{p[S.getKey()]=this.getGroupResults(S)}),{top:o.calcs.top?o.calcs.top.getData():{},bottom:o.calcs.bottom?o.calcs.bottom.getData():{},groups:p}}}return f.moduleName="columnCalcs",f.calculations=mh,f})(),Pd=(()=>{class f extends bo{constructor(r){super(r),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var r=null,o=this.table.columnManager.getFirstVisibileColumn(),l=this.table.options;switch(this.field=l.dataTreeChildField,this.indent=l.dataTreeChildIndent,this.elementField=l.dataTreeElementColumn||!!o&&o.field,l.dataTreeBranchElement&&(!0===l.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof l.dataTreeBranchElement?((r=document.createElement("div")).innerHTML=l.dataTreeBranchElement,this.branchEl=r.firstChild):this.branchEl=l.dataTreeBranchElement),l.dataTreeCollapseElement?"string"==typeof l.dataTreeCollapseElement?((r=document.createElement("div")).innerHTML=l.dataTreeCollapseElement,this.collapseEl=r.firstChild):this.collapseEl=l.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),l.dataTreeExpandElement?"string"==typeof l.dataTreeExpandElement?((r=document.createElement("div")).innerHTML=l.dataTreeExpandElement,this.expandEl=r.firstChild):this.expandEl=l.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof l.dataTreeStartExpanded){case"boolean":this.startOpen=function(p,b){return l.dataTreeStartExpanded};break;case"function":this.startOpen=l.dataTreeStartExpanded;break;default:this.startOpen=function(p,b){return l.dataTreeStartExpanded[b]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(r){return this.getTreeChildren(r,!0)}columnMoving(){var r=[];return this.table.rowManager.rows.forEach(o=>{r=r.concat(this.getTreeChildren(o,!1,!0))}),r}rowDataChanged(r,o,l){this.redrawNeeded(l)&&(this.initializeRow(r),o&&(this.layoutRow(r),this.refreshData(!0)))}initializeRow(r){var o=r.getData()[this.field],l=Array.isArray(o),p=l||!l&&"object"==typeof o&&null!==o;!p&&r.modules.dataTree&&r.modules.dataTree.branchEl&&r.modules.dataTree.branchEl.parentNode.removeChild(r.modules.dataTree.branchEl),!p&&r.modules.dataTree&&r.modules.dataTree.controlEl&&r.modules.dataTree.controlEl.parentNode.removeChild(r.modules.dataTree.controlEl),r.modules.dataTree={index:r.modules.dataTree?r.modules.dataTree.index:0,open:!!p&&(r.modules.dataTree?r.modules.dataTree.open:this.startOpen(r.getComponent(),0)),controlEl:!(!r.modules.dataTree||!p)&&r.modules.dataTree.controlEl,branchEl:!(!r.modules.dataTree||!p)&&r.modules.dataTree.branchEl,parent:!!r.modules.dataTree&&r.modules.dataTree.parent,children:p}}reinitializeRowChildren(r){this.getTreeChildren(r,!1,!0).forEach(function(l){l.reinitialize(!0)})}layoutRow(r){var l=(this.elementField?r.getCell(this.elementField):r.getCells()[0]).getElement(),p=r.modules.dataTree;p.branchEl&&(p.branchEl.parentNode&&p.branchEl.parentNode.removeChild(p.branchEl),p.branchEl=!1),p.controlEl&&(p.controlEl.parentNode&&p.controlEl.parentNode.removeChild(p.controlEl),p.controlEl=!1),this.generateControlElement(r,l),r.getElement().classList.add("tabulator-tree-level-"+p.index),p.index&&(this.branchEl?(p.branchEl=this.branchEl.cloneNode(!0),l.insertBefore(p.branchEl,l.firstChild),this.table.rtl?p.branchEl.style.marginRight=(p.branchEl.offsetWidth+p.branchEl.style.marginLeft)*(p.index-1)+p.index*this.indent+"px":p.branchEl.style.marginLeft=(p.branchEl.offsetWidth+p.branchEl.style.marginRight)*(p.index-1)+p.index*this.indent+"px"):this.table.rtl?l.style.paddingRight=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-right"))+p.index*this.indent+"px":l.style.paddingLeft=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-left"))+p.index*this.indent+"px")}generateControlElement(r,o){var l=r.modules.dataTree,p=(o=o||r.getCells()[0].getElement(),l.controlEl);!1!==l.children&&(l.open?(l.controlEl=this.collapseEl.cloneNode(!0),l.controlEl.addEventListener("click",b=>{b.stopPropagation(),this.collapseRow(r)})):(l.controlEl=this.expandEl.cloneNode(!0),l.controlEl.addEventListener("click",b=>{b.stopPropagation(),this.expandRow(r)})),l.controlEl.addEventListener("mousedown",b=>{b.stopPropagation()}),p&&p.parentNode===o?p.parentNode.replaceChild(l.controlEl,p):o.insertBefore(l.controlEl,o.firstChild))}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}getRows(r){var o=[];return r.forEach((l,p)=>{var b;o.push(l),l instanceof sl&&(l.create(),!(b=l.modules.dataTree.children).index&&!1!==b.children&&this.getChildren(l).forEach(I=>{I.create(),o.push(I)}))}),o}getChildren(r,o){var l=r.modules.dataTree,p=[],b=[];return!1!==l.children&&(l.open||o)&&(Array.isArray(l.children)||(l.children=this.generateChildren(r)),p=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(l.children):l.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(p),p.forEach(S=>{b.push(S),this.getChildren(S).forEach(N=>{b.push(N)})})),b}generateChildren(r){var o=[],l=r.getData()[this.field];return Array.isArray(l)||(l=[l]),l.forEach(p=>{var b=new sl(p||{},this.table.rowManager);b.create(),b.modules.dataTree.index=r.modules.dataTree.index+1,b.modules.dataTree.parent=r,b.modules.dataTree.children&&(b.modules.dataTree.open=this.startOpen(b.getComponent(),b.modules.dataTree.index)),o.push(b)}),o}expandRow(r,o){var l=r.modules.dataTree;!1!==l.children&&(l.open=!0,r.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",r.getComponent(),r.modules.dataTree.index))}collapseRow(r){var o=r.modules.dataTree;!1!==o.children&&(o.open=!1,r.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",r.getComponent(),r.modules.dataTree.index))}toggleRow(r){var o=r.modules.dataTree;!1!==o.children&&(o.open?this.collapseRow(r):this.expandRow(r))}getTreeParent(r){return!!r.modules.dataTree.parent&&r.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(r){var o=r.modules.dataTree,l=[];return o.children&&(Array.isArray(o.children)||(o.children=this.generateChildren(r)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(o.children):o.children).forEach(b=>{b instanceof sl&&l.push(b)})),l}rowDelete(r){var l,o=r.modules.dataTree.parent;o&&(!1!==(l=this.findChildIndex(r,o))&&o.data[this.field].splice(l,1),o.data[this.field].length||delete o.data[this.field],this.initializeRow(o),this.layoutRow(o)),this.refreshData(!0)}addTreeChildRow(r,o,l,p){var b=!1;"string"==typeof o&&(o=JSON.parse(o)),Array.isArray(r.data[this.field])||(r.data[this.field]=[],r.modules.dataTree.open=this.startOpen(r.getComponent(),r.modules.dataTree.index)),void 0!==p&&!1!==(b=this.findChildIndex(p,r))&&r.data[this.field].splice(l?b:b+1,0,o),!1===b&&(l?r.data[this.field].unshift(o):r.data[this.field].push(o)),this.initializeRow(r),this.layoutRow(r),this.refreshData(!0)}findChildIndex(r,o){var l=!1;return"object"==typeof r?r instanceof sl?l=r.data:r instanceof RowComponent?l=r._getSelf().data:"undefined"!=typeof HTMLElement&&r instanceof HTMLElement&&o.modules.dataTree&&(l=o.modules.dataTree.children.find(p=>p instanceof sl&&p.element===r))&&(l=l.data):l=null!=r&&o.data[this.field].find(p=>p.data[this.table.options.index]==r),l&&(Array.isArray(o.data[this.field])&&(l=o.data[this.field].indexOf(l)),-1==l&&(l=!1)),l}getTreeChildren(r,o,l){var p=r.modules.dataTree,b=[];return p.children&&(Array.isArray(p.children)||(p.children=this.generateChildren(r)),p.children.forEach(S=>{S instanceof sl&&(b.push(o?S.getComponent():S),l&&(b=b.concat(this.getTreeChildren(S,o,l))))})),b}checkForRestyle(r){r.row.cells.indexOf(r)||this.layoutRow(r.row)}getChildField(){return this.field}redrawNeeded(r){return!!this.field&&void 0!==r[this.field]||!!this.elementField&&void 0!==r[this.elementField]}}return f.moduleName="dataTree",f})();var ap={csv:function(f,s,r){var o=s&&s.delimiter?s.delimiter:",",l=[],p=[];f.forEach(b=>{var S=[];switch(b.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":b.columns.forEach((I,N)=>{I&&1===I.depth&&(p[N]=null==I.value?"":'"'+String(I.value).split('"').join('""')+'"')});break;case"row":b.columns.forEach(I=>{if(I){switch(typeof I.value){case"object":I.value=JSON.stringify(I.value);break;case"undefined":case"null":I.value=""}S.push('"'+String(I.value).split('"').join('""')+'"')}}),l.push(S.join(o))}}),p.length&&l.unshift(p.join(o)),l=l.join("\n"),s.bom&&(l="\ufeff"+l),r(l,"text/csv")},json:function(f,s,r){var o=[];f.forEach(l=>{var p={};switch(l.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":l.columns.forEach(b=>{b&&(p[b.component.getField()]=b.value)}),o.push(p)}}),r(o=JSON.stringify(o,null,"\t"),"application/json")},pdf:function(f,s,r){var o=[],l=[],p={},b=s.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},S=s.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},I=s.jsPDF||{},N=s&&s.title?s.title:"";function $(Fe,qe){var Et=[];return Fe.columns.forEach(xt=>{var Gt;if(xt){switch(typeof xt.value){case"object":xt.value=JSON.stringify(xt.value);break;case"undefined":case"null":xt.value=""}Gt={content:xt.value,colSpan:xt.width,rowSpan:xt.height},qe&&(Gt.styles=qe),Et.push(Gt)}else Et.push("")}),Et}I.orientation||(I.orientation=s.orientation||"landscape"),I.unit||(I.unit="pt"),f.forEach(Fe=>{switch(Fe.type){case"header":o.push($(Fe));break;case"group":l.push($(Fe,b));break;case"calc":l.push($(Fe,S));break;case"row":l.push($(Fe))}});var de=new jspdf.jsPDF(I);s&&s.autoTable&&(p="function"==typeof s.autoTable?s.autoTable(de)||{}:s.autoTable),N&&(p.didDrawPage=function(Fe){de.text(N,40,30)}),p.head=o,p.body=l,de.autoTable(p),s&&s.documentProcessing&&s.documentProcessing(de),r(de.output("arraybuffer"),"application/pdf")},xlsx:function(f,s,r){var l=s.sheetName||"Sheet1",p=XLSX.utils.book_new(),b=new Nc(this);function I(){var de=[],Fe=[],qe={},Et={s:{c:0,r:0},e:{c:f[0]?f[0].columns.reduce((xt,Gt)=>xt+(Gt&&Gt.width?Gt.width:1),0):0,r:f.length}};return f.forEach((xt,Gt)=>{var Wt=[];xt.columns.forEach(function(Ti,an){Ti?(Wt.push(Ti.value instanceof Date||"object"!=typeof Ti.value?Ti.value:JSON.stringify(Ti.value)),(Ti.width>1||Ti.height>-1)&&Fe.push({s:{r:Gt,c:an},e:{r:Gt+Ti.height-1,c:an+Ti.width-1}})):Wt.push("")}),de.push(Wt)}),XLSX.utils.sheet_add_aoa(qe,de),qe["!ref"]=XLSX.utils.encode_range(Et),Fe.length&&(qe["!merges"]=Fe),qe}if(p.SheetNames=[],p.Sheets={},s.sheetOnly)r(I());else{if(s.sheets)for(var N in s.sheets)!0===s.sheets[N]?(p.SheetNames.push(N),p.Sheets[N]=I()):(p.SheetNames.push(N),b.commsSend(s.sheets[N],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(de){p.Sheets[N]=de}}));else p.SheetNames.push(l),p.Sheets[l]=I();s.documentProcessing&&(p=s.documentProcessing(p)),r(function(de){for(var Fe=new ArrayBuffer(de.length),qe=new Uint8Array(Fe),Et=0;Et!=de.length;++Et)qe[Et]=255&de.charCodeAt(Et);return Fe}(XLSX.write(p,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(f,s,r){this.modExists("export",!0)&&r(this.modules.export.genereateHTMLTable(f),"text/html")}};let vh=(()=>{class f extends bo{constructor(r){super(r),this.registerTableOption("downloadReady",function(o,l){return l}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(r,o,l,p){this.download(r,o,l,p,!0)}download(r,o,l,p,b){var S=!1;if("function"==typeof r?S=r:f.downloaders[r]?S=f.downloaders[r]:console.warn("Download Error - No such download type found: ",r),S){var N=this.generateExportList(p);S.call(this.table,N,l||{},function($,de){b?!0===b?this.triggerDownload($,de,r,o,!0):b($):this.triggerDownload($,de,r,o)}.bind(this))}}generateExportList(r){var o=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,r||this.table.options.downloadRowRange,"download"),l=this.table.options.groupHeaderDownload;return l&&!Array.isArray(l)&&(l=[l]),o.forEach(p=>{var b;"group"===p.type&&(b=p.columns[0],l&&l[p.indent]&&(b.value=l[p.indent](b.value,p.component._group.getRowCount(),p.component._group.getData(),p.component)))}),o}triggerDownload(r,o,l,p,b){var S=document.createElement("a"),I=new Blob([r],{type:o});p=p||"Tabulator."+("function"==typeof l?"txt":l),(I=this.table.options.downloadReady(r,I))&&(b?window.open(window.URL.createObjectURL(I)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(I,p):(S.setAttribute("href",window.URL.createObjectURL(I)),S.setAttribute("download",p),S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S)),this.dispatchExternal("downloadComplete"))}commsReceived(r,o,l){"intercept"===o&&this.download(l.type,"",l.options,l.active,l.intercept)}}return f.moduleName="download",f.downloaders=ap,f})();function vd(f,s){var r=s.mask,o=void 0!==s.maskLetterChar?s.maskLetterChar:"A",l=void 0!==s.maskNumberChar?s.maskNumberChar:"9",p=void 0!==s.maskWildcardChar?s.maskWildcardChar:"*";function b(S){var I=r[S];void 0!==I&&I!==p&&I!==o&&I!==l&&(f.value=f.value+""+I,b(S+1))}f.addEventListener("keydown",S=>{var I=f.value.length,N=S.key;if(S.keyCode>46){if(I>=r.length)return S.preventDefault(),S.stopPropagation(),!1;switch(r[I]){case o:if(N.toUpperCase()==N.toLowerCase())return S.preventDefault(),S.stopPropagation(),!1;break;case l:if(isNaN(N))return S.preventDefault(),S.stopPropagation(),!1;break;case p:break;default:if(N!==r[I])return S.preventDefault(),S.stopPropagation(),!1}}}),f.addEventListener("keyup",S=>{S.keyCode>46&&s.maskAutoFill&&b(f.value.length)}),f.placeholder||(f.placeholder=r),s.maskAutoFill&&b(f.value.length)}var Ph={input:function(f,s,r,o,l){var p=f.getValue(),b=document.createElement("input");if(b.setAttribute("type",l.search?"search":"text"),b.style.padding="4px",b.style.width="100%",b.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let I in l.elementAttributes)"+"==I.charAt(0)?(I=I.slice(1),b.setAttribute(I,b.getAttribute(I)+l.elementAttributes["+"+I])):b.setAttribute(I,l.elementAttributes[I]);function S(I){null==p&&""!==b.value||b.value!==p?r(b.value)&&(p=b.value):o()}return b.value=void 0!==p?p:"",s(function(){b.focus({preventScroll:!0}),b.style.height="100%"}),b.addEventListener("change",S),b.addEventListener("blur",S),b.addEventListener("keydown",function(I){switch(I.keyCode){case 13:S();break;case 27:o();break;case 35:case 36:I.stopPropagation()}}),l.mask&&vd(b,l),b},textarea:function(f,s,r,o,l){var p=f.getValue(),b=l.verticalNavigation||"hybrid",S=String(null!=p?p:""),N=(S.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),$=0;if(N.style.display="block",N.style.padding="2px",N.style.height="100%",N.style.width="100%",N.style.boxSizing="border-box",N.style.whiteSpace="pre-wrap",N.style.resize="none",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Fe in l.elementAttributes)"+"==Fe.charAt(0)?(Fe=Fe.slice(1),N.setAttribute(Fe,N.getAttribute(Fe)+l.elementAttributes["+"+Fe])):N.setAttribute(Fe,l.elementAttributes[Fe]);function de(Fe){null==p&&""!==N.value||N.value!==p?(r(N.value)&&(p=N.value),setTimeout(function(){f.getRow().normalizeHeight()},300)):o()}return N.value=S,s(function(){N.focus({preventScroll:!0}),N.style.height="100%",N.style.height=N.scrollHeight+"px",f.getRow().normalizeHeight()}),N.addEventListener("change",de),N.addEventListener("blur",de),N.addEventListener("keyup",function(){N.style.height="";var Fe=N.scrollHeight;N.style.height=Fe+"px",Fe!=$&&($=Fe,f.getRow().normalizeHeight())}),N.addEventListener("keydown",function(Fe){switch(Fe.keyCode){case 27:o();break;case 38:("editor"==b||"hybrid"==b&&N.selectionStart)&&(Fe.stopImmediatePropagation(),Fe.stopPropagation());break;case 40:("editor"==b||"hybrid"==b&&N.selectionStart!==N.value.length)&&(Fe.stopImmediatePropagation(),Fe.stopPropagation());break;case 35:case 36:Fe.stopPropagation()}}),l.mask&&vd(N,l),N},number:function(f,s,r,o,l){var p=f.getValue(),b=l.verticalNavigation||"editor",S=document.createElement("input");if(S.setAttribute("type","number"),void 0!==l.max&&S.setAttribute("max",l.max),void 0!==l.min&&S.setAttribute("min",l.min),void 0!==l.step&&S.setAttribute("step",l.step),S.style.padding="4px",S.style.width="100%",S.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let $ in l.elementAttributes)"+"==$.charAt(0)?($=$.slice(1),S.setAttribute($,S.getAttribute($)+l.elementAttributes["+"+$])):S.setAttribute($,l.elementAttributes[$]);S.value=p;var I=function($){N()};function N(){var $=S.value;!isNaN($)&&""!==$&&($=Number($)),$!==p?r($)&&(p=$):o()}return s(function(){S.removeEventListener("blur",I),S.focus({preventScroll:!0}),S.style.height="100%",S.addEventListener("blur",I)}),S.addEventListener("keydown",function($){switch($.keyCode){case 13:N();break;case 27:o();break;case 38:case 40:"editor"==b&&($.stopImmediatePropagation(),$.stopPropagation());break;case 35:case 36:$.stopPropagation()}}),l.mask&&vd(S,l),S},range:function(f,s,r,o,l){var p=f.getValue(),b=document.createElement("input");if(b.setAttribute("type","range"),void 0!==l.max&&b.setAttribute("max",l.max),void 0!==l.min&&b.setAttribute("min",l.min),void 0!==l.step&&b.setAttribute("step",l.step),b.style.padding="4px",b.style.width="100%",b.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let I in l.elementAttributes)"+"==I.charAt(0)?(I=I.slice(1),b.setAttribute(I,b.getAttribute(I)+l.elementAttributes["+"+I])):b.setAttribute(I,l.elementAttributes[I]);function S(){var I=b.value;!isNaN(I)&&""!==I&&(I=Number(I)),I!=p?r(I)&&(p=I):o()}return b.value=p,s(function(){b.focus({preventScroll:!0}),b.style.height="100%"}),b.addEventListener("blur",function(I){S()}),b.addEventListener("keydown",function(I){switch(I.keyCode){case 13:S();break;case 27:o()}}),b},select:function(f,s,r,o,l){var p=this,b=f.getElement(),S=f.getValue(),I=l.verticalNavigation||"editor",N=void 0!==S||null===S?Array.isArray(S)?S:[S]:void 0!==l.defaultValue?l.defaultValue:[],$=document.createElement("input"),de=document.createElement("div"),Fe=l.multiselect,qe=[],Et={},xt=[],Gt=[],Wt=!0,Ti=!1,an="",Ui=null;function Yi(Qi){var al,Kn={},jo=p.table.getData();return(al=Qi?p.table.columnManager.getColumnByField(Qi):f.getColumn()._getSelf())?jo.forEach(function(id){var Wd=al.getFieldValue(id);null!=Wd&&""!==Wd&&(Kn[Wd]=!0)}):console.warn("unable to find matching column to create select lookup list:",Qi),Object.keys(Kn)}function Mn(Qi,Kn){!Fe&&Et&&Et.element&&Et.element.classList.remove("active"),Et&&Et.element&&Et.element.classList.remove("focused"),Et=Qi,Qi.element&&(Qi.element.classList.add("focused"),Kn&&Qi.element.classList.add("active")),Qi&&Qi.element&&Qi.element.scrollIntoView&&Qi.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Fn(Qi){-1==Gt.indexOf(Qi)&&(Gt.push(Qi),Mn(Qi,!0)),mn()}function yn(Qi){var Kn=Gt[Qi];Qi>-1&&(Gt.splice(Qi,1),Kn.element&&Kn.element.classList.remove("active"))}function qi(Qi){Qi||(Qi=Et);var Kn=Gt.indexOf(Qi);Kn>-1?yn(Kn):(!0!==Fe&&Gt.length>=Fe&&yn(0),Fn(Qi)),mn()}function Hn(Qi){zn(),Qi||(Qi=Et),Qi&&($.value=Qi.label,r(Qi.value)),N=[Qi.value]}function mr(Qi){Qi||zn();var Kn=[];Gt.forEach(jo=>{Kn.push(jo.value)}),N=Kn,r(Kn)}function mn(){var Qi=[];Gt.forEach(Kn=>{Qi.push(Kn.label)}),$.value=Qi.join(", "),!1===p.currentCell&&mr(!0)}function Hi(){zn(),o()}function zn(){de.parentNode&&de.parentNode.removeChild(de),p.table.rowManager.element.removeEventListener("scroll",Hi)}if((Array.isArray(l)||!Array.isArray(l)&&"object"==typeof l&&!l.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),l={values:l}),$.setAttribute("type","text"),$.style.padding="4px",$.style.width="100%",$.style.boxSizing="border-box",$.style.cursor="default",$.readOnly=0!=this.currentCell,l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Qi in l.elementAttributes)"+"==Qi.charAt(0)?(Qi=Qi.slice(1),$.setAttribute(Qi,$.getAttribute(Qi)+l.elementAttributes["+"+Qi])):$.setAttribute(Qi,l.elementAttributes[Qi]);return $.value=void 0!==S||null===S?S:"",$.addEventListener("search",function(Qi){$.value||(function(){var Qi=Gt.length;for(let Kn=0;Kn<Qi;Kn++)yn(0)}(),mr())}),$.addEventListener("keydown",function(Qi){var Kn;switch(Qi.keyCode){case 38:Kn=qe.indexOf(Et),("editor"==I||"hybrid"==I&&Kn)&&(Qi.stopImmediatePropagation(),Qi.stopPropagation(),Qi.preventDefault(),Kn>0&&Mn(qe[Kn-1],!Fe));break;case 40:Kn=qe.indexOf(Et),("editor"==I||"hybrid"==I&&Kn<qe.length-1)&&(Qi.stopImmediatePropagation(),Qi.stopPropagation(),Qi.preventDefault(),Kn<qe.length-1&&Mn(-1==Kn?qe[0]:qe[Kn+1],!Fe));break;case 37:case 39:Qi.stopImmediatePropagation(),Qi.stopPropagation(),Qi.preventDefault();break;case 13:Fe?qi():Hn();break;case 27:Hi();break;case 9:break;default:!1===p.currentCell&&Qi.preventDefault(),Qi.keyCode>=38&&Qi.keyCode<=90&&function(Qi){clearTimeout(Ui);var Kn=String.fromCharCode(event.keyCode).toLowerCase();an+=Kn.toLowerCase();var jo=qe.find(al=>void 0!==al.label&&al.label.toLowerCase().startsWith(an));jo&&Mn(jo,!Fe),Ui=setTimeout(()=>{an=""},800)}()}}),$.addEventListener("blur",function(Qi){Wt&&(Fe?mr():Hi())}),$.addEventListener("focus",function(Qi){Ti||function(){if(Gt=[],!de.parentNode){!function(Qi,Kn){var jo=[],al=[];function id(Ts){return Kn.indexOf((Ts={label:Ts.label,value:Ts.value,itemParams:Ts.itemParams,elementAttributes:Ts.elementAttributes,element:!1}).value)>-1&&Fn(Ts),jo.push(Ts),al.push(Ts),Ts}if("function"==typeof Qi&&(Qi=Qi(f)),Array.isArray(Qi))Qi.forEach(function(Ts){var Fc;"object"==typeof Ts?Ts.options?(al.push(Fc={label:Ts.label,group:!0,itemParams:Ts.itemParams,elementAttributes:Ts.elementAttributes,element:!1}),Ts.options.forEach(function(Tg){id(Tg)})):id(Ts):(Kn.indexOf((Fc={label:Ts,value:Ts,element:!1}).value)>-1&&Fn(Fc),jo.push(Fc),al.push(Fc))});else for(var Wd in Qi){var wh={label:Qi[Wd],value:Wd,element:!1};Kn.indexOf(wh.value)>-1&&Fn(wh),jo.push(wh),al.push(wh)}l.sortValuesList&&(jo.sort((Ts,Fc)=>Ts.label<Fc.label?-1:Ts.label>Fc.label?1:0),al.sort((Ts,Fc)=>Ts.label<Fc.label?-1:Ts.label>Fc.label?1:0),"asc"!==l.sortValuesList&&(jo.reverse(),al.reverse())),qe=jo,xt=al,function(){for(;de.firstChild;)de.removeChild(de.firstChild);xt.forEach(function(Qi){var Kn=Qi.element;if(!Kn){if(Kn=document.createElement("div"),Qi.label=l.listItemFormatter?l.listItemFormatter(Qi.value,Qi.label,f,Kn,Qi.itemParams):Qi.label,Qi.group?(Kn.classList.add("tabulator-edit-select-list-group"),Kn.tabIndex=0,Kn.innerHTML=""===Qi.label?"&nbsp;":Qi.label):(Kn.classList.add("tabulator-edit-select-list-item"),Kn.tabIndex=0,Kn.innerHTML=""===Qi.label?"&nbsp;":Qi.label,Kn.addEventListener("click",function(){Ti=!0,setTimeout(()=>{Ti=!1},10),Fe?(qi(Qi),$.focus()):Hn(Qi)}),Gt.indexOf(Qi)>-1&&Kn.classList.add("active")),Qi.elementAttributes&&"object"==typeof Qi.elementAttributes)for(let jo in Qi.elementAttributes)"+"==jo.charAt(0)?(jo=jo.slice(1),Kn.setAttribute(jo,$.getAttribute(jo)+Qi.elementAttributes["+"+jo])):Kn.setAttribute(jo,Qi.elementAttributes[jo]);Kn.addEventListener("mousedown",function(){Wt=!1,setTimeout(function(){Wt=!0},10)}),Qi.element=Kn}de.appendChild(Kn)})}()}(!0===l.values?Yi():"string"==typeof l.values?Yi(l.values):l.values||[],N);var Qi=Ns.elOffset(b);de.style.minWidth=b.offsetWidth+"px",de.style.top=Qi.top+b.offsetHeight+"px",de.style.left=Qi.left+"px",de.addEventListener("mousedown",function(Kn){Wt=!1,setTimeout(function(){Wt=!0},10)}),document.body.appendChild(de)}}()}),(de=document.createElement("div")).classList.add("tabulator-edit-select-list"),s(function(){$.style.height="100%",$.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Hi)},10),$},autocomplete:function(f,s,r,o,l){var p=this,b=f.getElement(),S=f.getValue(),I=l.verticalNavigation||"editor",N=void 0!==S||null===S?S:void 0!==l.defaultValue?l.defaultValue:"",$=document.createElement("input"),de=document.createElement("div"),Fe=[],qe=!1,Et=!0,xt=!1;if($.setAttribute("type","search"),$.style.padding="4px",$.style.width="100%",$.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let mn in l.elementAttributes)"+"==mn.charAt(0)?(mn=mn.slice(1),$.setAttribute(mn,$.getAttribute(mn)+l.elementAttributes["+"+mn])):$.setAttribute(mn,l.elementAttributes[mn]);function Gt(){!0===l.values?xt=Wt():"string"==typeof l.values&&(xt=Wt(l.values))}function Wt(mn){var ln,Tn={},Hi=p.table.getData();return(ln=mn?p.table.columnManager.getColumnByField(mn):f.getColumn()._getSelf())?(Hi.forEach(function(zn){var or=ln.getFieldValue(zn);null!=or&&""!==or&&(Tn[or]=!0)}),Tn=l.sortValuesList?"asc"==l.sortValuesList?Object.keys(Tn).sort():Object.keys(Tn).sort().reverse():Object.keys(Tn)):console.warn("unable to find matching column to create autocomplete lookup list:",mn),Tn}function Ti(mn,Tn){var ln,zn,Hi=[];ln=xt||l.values||[],l.searchFunc?(Hi=l.searchFunc(mn,ln))instanceof Promise?(an(void 0!==l.searchingPlaceholder?l.searchingPlaceholder:"Searching..."),Hi.then(or=>{gn(Ui(or),Tn)}).catch(or=>{console.err("error in autocomplete search promise:",or)})):gn(Ui(Hi),Tn):(zn=Ui(ln),""===mn?l.showListOnEmpty&&(Hi=zn):zn.forEach(function(or){(null!==or.value||void 0!==or.value)&&(String(or.value).toLowerCase().indexOf(String(mn).toLowerCase())>-1||String(or.title).toLowerCase().indexOf(String(mn).toLowerCase())>-1)&&Hi.push(or)}),gn(Hi,Tn))}function an(mn){var Tn=document.createElement("div");Yi(),!1!==mn&&(Tn.classList.add("tabulator-edit-select-list-notice"),Tn.tabIndex=0,mn instanceof Node?Tn.appendChild(mn):Tn.innerHTML=mn,de.appendChild(Tn))}function Ui(mn){var Tn=[];if(Array.isArray(mn))mn.forEach(function(zn){var or={};"object"==typeof zn?(or.title=l.listItemFormatter?l.listItemFormatter(zn.value,zn.label):zn.label,or.value=zn.value):(or.title=l.listItemFormatter?l.listItemFormatter(zn,zn):zn,or.value=zn),Tn.push(or)});else for(var Hi in mn){var ln={title:l.listItemFormatter?l.listItemFormatter(Hi,mn[Hi]):mn[Hi],value:Hi};Tn.push(ln)}return Tn}function Yi(){for(;de.firstChild;)de.removeChild(de.firstChild)}function gn(mn,Tn){mn.length?function(mn,Tn){var Hi=!1;Yi(),(Fe=mn).forEach(function(ln){var zn=ln.element;zn||((zn=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),zn.tabIndex=0,zn.innerHTML=ln.title,zn.addEventListener("click",function(or){yn(ln),Mn()}),zn.addEventListener("mousedown",function(or){Et=!1,setTimeout(function(){Et=!0},10)}),ln.element=zn,Tn&&ln.value==S&&($.value=ln.title,ln.element.classList.add("active"),Hi=!0),ln===qe&&(ln.element.classList.add("active"),Hi=!0)),de.appendChild(zn)}),Hi||yn(!1)}(mn,Tn):l.emptyPlaceholder&&an(l.emptyPlaceholder)}function Mn(){qi(),qe?S!==qe.value?(S=qe.value,$.value=qe.title,r(qe.value)):o():l.freetext||l.allowEmpty&&""===$.value?(S=$.value,r($.value)):o()}function yn(mn,Tn){qe&&qe.element&&qe.element.classList.remove("active"),qe=mn,mn&&mn.element&&mn.element.classList.add("active"),mn&&mn.element&&mn.element.scrollIntoView&&mn.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function qi(){de.parentNode&&de.parentNode.removeChild(de),p.table.rowManager.element.removeEventListener("scroll",Hn)}function Hn(){qi(),o()}return de.classList.add("tabulator-edit-select-list"),de.addEventListener("mousedown",function(mn){Et=!1,setTimeout(function(){Et=!0},10)}),$.addEventListener("keydown",function(mn){var Tn;switch(mn.keyCode){case 38:Tn=Fe.indexOf(qe),("editor"==I||"hybrid"==I&&Tn)&&(mn.stopImmediatePropagation(),mn.stopPropagation(),mn.preventDefault(),yn(Tn>0&&Fe[Tn-1]));break;case 40:Tn=Fe.indexOf(qe),("editor"==I||"hybrid"==I&&Tn<Fe.length-1)&&(mn.stopImmediatePropagation(),mn.stopPropagation(),mn.preventDefault(),Tn<Fe.length-1&&yn(-1==Tn?Fe[0]:Fe[Tn+1]));break;case 37:case 39:mn.stopImmediatePropagation(),mn.stopPropagation();break;case 13:Mn();break;case 27:Hn();break;case 36:case 35:mn.stopImmediatePropagation()}}),$.addEventListener("keyup",function(mn){switch(mn.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:Ti($.value)}}),$.addEventListener("search",function(mn){Ti($.value)}),$.addEventListener("blur",function(mn){Et&&Mn()}),$.addEventListener("focus",function(mn){var Tn=N;Gt(),function(){if(!de.parentNode){for(;de.firstChild;)de.removeChild(de.firstChild);var mn=Ns.elOffset(b);de.style.minWidth=b.offsetWidth+"px",de.style.top=mn.top+b.offsetHeight+"px",de.style.left=mn.left+"px",document.body.appendChild(de)}}(),$.value=Tn,Ti(Tn,!0)}),s(function(){$.style.height="100%",$.focus({preventScroll:!0})}),l.mask&&vd($,l),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Hn)},10),Gt(),$.value=N,Ti(N,!0),$},star:function(f,s,r,o,l){var p=this,b=f.getElement(),S=f.getValue(),I=b.getElementsByTagName("svg").length||5,N=b.getElementsByTagName("svg")[0]?b.getElementsByTagName("svg")[0].getAttribute("width"):14,$=[],de=document.createElement("div"),Fe=document.createElementNS("http://www.w3.org/2000/svg","svg");function qe(Wt){$.forEach(function(Ti,an){an<Wt?("ie"==p.table.browser?Ti.setAttribute("class","tabulator-star-active"):Ti.classList.replace("tabulator-star-inactive","tabulator-star-active"),Ti.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==p.table.browser?Ti.setAttribute("class","tabulator-star-inactive"):Ti.classList.replace("tabulator-star-active","tabulator-star-inactive"),Ti.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function Et(Wt){var Ti=document.createElement("span"),an=Fe.cloneNode(!0);$.push(an),Ti.addEventListener("mouseenter",function(Ui){Ui.stopPropagation(),Ui.stopImmediatePropagation(),qe(Wt)}),Ti.addEventListener("mousemove",function(Ui){Ui.stopPropagation(),Ui.stopImmediatePropagation()}),Ti.addEventListener("click",function(Ui){Ui.stopPropagation(),Ui.stopImmediatePropagation(),r(Wt),b.blur()}),Ti.appendChild(an),de.appendChild(Ti)}function xt(Wt){S=Wt,qe(Wt)}if(b.style.whiteSpace="nowrap",b.style.overflow="hidden",b.style.textOverflow="ellipsis",de.style.verticalAlign="middle",de.style.display="inline-block",de.style.padding="4px",Fe.setAttribute("width",N),Fe.setAttribute("height",N),Fe.setAttribute("viewBox","0 0 512 512"),Fe.setAttribute("xml:space","preserve"),Fe.style.padding="0 1px",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Wt in l.elementAttributes)"+"==Wt.charAt(0)?(Wt=Wt.slice(1),de.setAttribute(Wt,de.getAttribute(Wt)+l.elementAttributes["+"+Wt])):de.setAttribute(Wt,l.elementAttributes[Wt]);for(var Gt=1;Gt<=I;Gt++)Et(Gt);return qe(S=Math.min(parseInt(S),I)),de.addEventListener("mousemove",function(Wt){qe(0)}),de.addEventListener("click",function(Wt){r(0)}),b.addEventListener("blur",function(Wt){o()}),b.addEventListener("keydown",function(Wt){switch(Wt.keyCode){case 39:xt(S+1);break;case 37:xt(S-1);break;case 13:r(S);break;case 27:o()}}),de},progress:function(f,s,r,o,l){var xt,Gt,Fe,qe,p=f.getElement(),b=void 0===l.max?(null==(xt=p.getElementsByTagName("div")[0])?void 0:xt.getAttribute("max"))||100:l.max,S=void 0===l.min?(null==(Gt=p.getElementsByTagName("div")[0])?void 0:Gt.getAttribute("min"))||0:l.min,I=(b-S)/100,N=f.getValue()||0,$=document.createElement("div"),de=document.createElement("div");function Et(){var Wt=window.getComputedStyle(p,null),Ti=I*Math.round(de.offsetWidth/((p.clientWidth-parseInt(Wt.getPropertyValue("padding-left"))-parseInt(Wt.getPropertyValue("padding-right")))/100))+S;r(Ti),p.setAttribute("aria-valuenow",Ti),p.setAttribute("aria-label",N)}if($.style.position="absolute",$.style.right="0",$.style.top="0",$.style.bottom="0",$.style.width="5px",$.classList.add("tabulator-progress-handle"),de.style.display="inline-block",de.style.position="relative",de.style.height="100%",de.style.backgroundColor="#488CE9",de.style.maxWidth="100%",de.style.minWidth="0%",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Wt in l.elementAttributes)"+"==Wt.charAt(0)?(Wt=Wt.slice(1),de.setAttribute(Wt,de.getAttribute(Wt)+l.elementAttributes["+"+Wt])):de.setAttribute(Wt,l.elementAttributes[Wt]);return p.style.padding="4px 4px",N=Math.min(parseFloat(N),b),N=Math.max(parseFloat(N),S),N=Math.round((N-S)/I),de.style.width=N+"%",p.setAttribute("aria-valuemin",S),p.setAttribute("aria-valuemax",b),de.appendChild($),$.addEventListener("mousedown",function(Wt){Fe=Wt.screenX,qe=de.offsetWidth}),$.addEventListener("mouseover",function(){$.style.cursor="ew-resize"}),p.addEventListener("mousemove",function(Wt){Fe&&(de.style.width=qe+Wt.screenX-Fe+"px")}),p.addEventListener("mouseup",function(Wt){Fe&&(Wt.stopPropagation(),Wt.stopImmediatePropagation(),Fe=!1,qe=!1,Et())}),p.addEventListener("keydown",function(Wt){switch(Wt.keyCode){case 39:Wt.preventDefault(),de.style.width=de.clientWidth+p.clientWidth/100+"px";break;case 37:Wt.preventDefault(),de.style.width=de.clientWidth-p.clientWidth/100+"px";break;case 9:case 13:Et();break;case 27:o()}}),p.addEventListener("blur",function(){o()}),de},tickCross:function(f,s,r,o,l){var p=f.getValue(),b=document.createElement("input"),S=l.tristate,I=void 0===l.indeterminateValue?null:l.indeterminateValue,N=!1;if(b.setAttribute("type","checkbox"),b.style.marginTop="5px",b.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let de in l.elementAttributes)"+"==de.charAt(0)?(de=de.slice(1),b.setAttribute(de,b.getAttribute(de)+l.elementAttributes["+"+de])):b.setAttribute(de,l.elementAttributes[de]);function $(de){return S?de?N?I:b.checked:b.checked&&!N?(b.checked=!1,b.indeterminate=!0,N=!0,I):(N=!1,b.checked):b.checked}return b.value=p,S&&(void 0===p||p===I||""===p)&&(N=!0,b.indeterminate=!0),"firefox"!=this.table.browser&&s(function(){b.focus({preventScroll:!0})}),b.checked=!0===p||"true"===p||"True"===p||1===p,s(function(){b.focus()}),b.addEventListener("change",function(de){r($())}),b.addEventListener("blur",function(de){r($(!0))}),b.addEventListener("keydown",function(de){13==de.keyCode&&r($()),27==de.keyCode&&o()}),b}};let yh=(()=>{class f extends bo{constructor(r){super(r),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=f.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(r){var o=this.currentCell,l=this.options("tabEndNewRow");o&&(this.navigateNext(r)||l&&(o.getElement().firstChild.blur(),(l=this.table.addRow(!0===l?{}:"function"==typeof l?l(o.row.getComponent()):Object.assign({},l))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(r){return!!r.modules.edit&&r.modules.edit.edited}cellCancelEdit(r){r===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(r){r||(r=this.modules.edit.getEditedCells()),Array.isArray(r)||(r=[r]),r.forEach(o=>{this.modules.edit.clearEdited(o._getSelf())})}navigatePrev(r){var l,p,o=this.currentCell;if(o){if(r&&r.preventDefault(),l=this.navigateLeft())return!0;if((p=this.table.rowManager.prevDisplayRow(o.row,!0))&&(l=this.findNextEditableCell(p,p.cells.length)))return l.getComponent().edit(),!0}return!1}navigateNext(r){var l,p,o=this.currentCell;if(o){if(r&&r.preventDefault(),l=this.navigateRight())return!0;if((p=this.table.rowManager.nextDisplayRow(o.row,!0))&&(l=this.findNextEditableCell(p,-1)))return l.getComponent().edit(),!0}return!1}navigateLeft(r){var l,p,o=this.currentCell;return!(!o||(r&&r.preventDefault(),l=o.getIndex(),p=this.findPrevEditableCell(o.row,l),!p)||(p.getComponent().edit(),0))}navigateRight(r){var l,p,o=this.currentCell;return!(!o||(r&&r.preventDefault(),l=o.getIndex(),p=this.findNextEditableCell(o.row,l),!p)||(p.getComponent().edit(),0))}navigateUp(r){var l,p,o=this.currentCell;return!(!o||(r&&r.preventDefault(),l=o.getIndex(),p=this.table.rowManager.prevDisplayRow(o.row,!0),!p)||(p.cells[l].getComponent().edit(),0))}navigateDown(r){var l,p,o=this.currentCell;return!(!o||(r&&r.preventDefault(),l=o.getIndex(),p=this.table.rowManager.nextDisplayRow(o.row,!0),!p)||(p.cells[l].getComponent().edit(),0))}findNextEditableCell(r,o){var l=!1;if(o<r.cells.length-1)for(var p=o+1;p<r.cells.length;p++){let b=r.cells[p];if(b.column.modules.edit&&Ns.elVisible(b.getElement())){let S=!0;if("function"==typeof b.column.modules.edit.check&&(S=b.column.modules.edit.check(b.getComponent())),S){l=b;break}}}return l}findPrevEditableCell(r,o){var l=!1;if(o>0)for(var p=o-1;p>=0;p--){let b=r.cells[p],S=!0;if(b.column.modules.edit&&Ns.elVisible(b.getElement())&&("function"==typeof b.column.modules.edit.check&&(S=b.column.modules.edit.check(b.getComponent())),S)){l=b;break}}return l}initializeColumnCheck(r){void 0!==r.definition.editor&&this.initializeColumn(r)}columnDeleteCheck(r){this.currentCell&&this.currentCell.column===r&&this.cancelEdit()}rowDeleteCheck(r){this.currentCell&&this.currentCell.row===r&&this.cancelEdit()}initializeColumn(r){var o={editor:!1,blocked:!1,check:r.definition.editable,params:r.definition.editorParams||{}};switch(typeof r.definition.editor){case"string":this.editors[r.definition.editor]?o.editor=this.editors[r.definition.editor]:console.warn("Editor Error - No such editor found: ",r.definition.editor);break;case"function":o.editor=r.definition.editor;break;case"boolean":!0===r.definition.editor&&("function"!=typeof r.definition.formatter?o.editor=this.editors[r.definition.formatter]?this.editors[r.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",r.definition.formatter))}o.editor&&(r.modules.edit=o)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(r){var l,o=this.currentCell;if(this.invalidEdit=!1,o){for(this.currentCell=!1,l=o.getElement(),r?o.validate&&o.validate():l.classList.remove("tabulator-validation-fail"),l.classList.remove("tabulator-editing");l.firstChild;)l.removeChild(l.firstChild);o.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var r=this.currentCell,o=this.currentCell.getComponent();this.clearEditor(!0),r.setValueActual(r.getValue()),r.cellRendered(),("textarea"==r.column.definition.editor||r.column.definition.variableHeight)&&r.row.normalizeHeight(!0),r.column.definition.cellEditCancelled&&r.column.definition.cellEditCancelled.call(this.table,o),this.dispatchExternal("cellEditCancelled",o)}}bindEditor(r){if(r.column.modules.edit){var o=this,l=r.getElement(!0);l.setAttribute("tabindex",0),l.addEventListener("click",function(p){l.classList.contains("tabulator-editing")||l.focus({preventScroll:!0})}),l.addEventListener("mousedown",function(p){2===p.button?p.preventDefault():o.mouseClick=!0}),l.addEventListener("focus",function(p){o.recursionBlock||o.edit(r,p,!1)})}}focusCellNoEvent(r,o){this.recursionBlock=!0,o&&"ie"===this.table.browser||r.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(r,o){this.focusCellNoEvent(r),this.edit(r,!1,o)}focusScrollAdjust(r){if("virtual"==this.table.rowManager.getRenderMode()){var o=this.table.rowManager.element.scrollTop,l=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,p=r.row.getElement();p.offsetTop<o?this.table.rowManager.element.scrollTop-=o-p.offsetTop:p.offsetTop+p.offsetHeight>l&&(this.table.rowManager.element.scrollTop+=p.offsetTop+p.offsetHeight-l);var S=this.table.rowManager.element.scrollLeft,I=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,N=r.getElement();this.table.modExists("frozenColumns")&&(S+=parseInt(this.table.modules.frozenColumns.leftMargin),I-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(S-=parseInt(this.table.columnManager.renderer.vDomPadLeft),I-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),N.offsetLeft<S?this.table.rowManager.element.scrollLeft-=S-N.offsetLeft:N.offsetLeft+N.offsetWidth>I&&(this.table.rowManager.element.scrollLeft+=N.offsetLeft+N.offsetWidth-I)}}edit(r,o,l){var N,$,de,p=this,b=!0,S=function(){},I=r.getElement();if(!this.currentCell){if(r.column.modules.edit.blocked)return this.mouseClick=!1,I.blur(),!1;switch(o&&o.stopPropagation(),typeof r.column.modules.edit.check){case"function":b=r.column.modules.edit.check(r.getComponent());break;case"boolean":b=r.column.modules.edit.check}if(b||l){if(p.cancelEdit(),p.currentCell=r,this.focusScrollAdjust(r),$=r.getComponent(),this.mouseClick&&(this.mouseClick=!1,r.column.definition.cellClick&&r.column.definition.cellClick.call(this.table,o,$)),r.column.definition.cellEditing&&r.column.definition.cellEditing.call(this.table,$),this.dispatchExternal("cellEditing",$),de="function"==typeof r.column.modules.edit.params?r.column.modules.edit.params($):r.column.modules.edit.params,!1===(N=r.column.modules.edit.editor.call(p,$,function(Wt){S=Wt},function(Wt){if(p.currentCell===r){var Ti=!0;return r.column.modules.validate&&p.table.modExists("validate")&&"manual"!=p.table.options.validationMode&&(Ti=p.table.modules.validate.validate(r.column.modules.validate,r,Wt)),!0===Ti||"highlight"===p.table.options.validationMode?(p.clearEditor(),r.modules.edit||(r.modules.edit={}),r.modules.edit.edited=!0,-1==p.editedCells.indexOf(r)&&p.editedCells.push(r),r.setValue(Wt,!0),p.table.options.dataTree&&p.table.modExists("dataTree")&&p.table.modules.dataTree.checkForRestyle(r),!0===Ti||(I.classList.add("tabulator-validation-fail"),p.table.externalEvents.dispatch("validationFailed",r.getComponent(),Wt,Ti),!1)):(p.invalidEdit=!0,I.classList.add("tabulator-validation-fail"),p.focusCellNoEvent(r,!0),S(),p.table.externalEvents.dispatch("validationFailed",r.getComponent(),Wt,Ti),!1)}},function(){p.currentCell===r&&(p.cancelEdit(),p.table.options.dataTree&&p.table.modExists("dataTree")&&p.table.modules.dataTree.checkForRestyle(r))},de)))return I.blur(),!1;if(!(N instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",N),I.blur(),!1;for(I.classList.add("tabulator-editing"),r.row.getElement().classList.add("tabulator-row-editing");I.firstChild;)I.removeChild(I.firstChild);I.appendChild(N),S();for(var xt=I.children,Gt=0;Gt<xt.length;Gt++)xt[Gt].addEventListener("click",function(Wt){Wt.stopPropagation()});return!0}return this.mouseClick=!1,I.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var r=[];return this.editedCells.forEach(o=>{r.push(o.getComponent())}),r}clearEdited(r){var o;r.modules.edit&&r.modules.edit.edited&&(r.modules.edit.edited=!1,r.modules.validate&&(r.modules.validate.invalid=!1)),(o=this.editedCells.indexOf(r))>-1&&this.editedCells.splice(o,1)}}return f.moduleName="edit",f.editors=Ph,f})();class Eh{constructor(s,r,o,l){this.type=s,this.columns=r,this.component=o||!1,this.indent=l||0}}class k{constructor(s,r,o,l,p){this.value=s,this.component=r||!1,this.width=o,this.height=l,this.depth=p}}let U=(()=>{class f extends bo{constructor(r){super(r),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(r,o,l,p){this.cloneTableStyle=o,this.config=r||{},this.colVisProp=p;var b=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],S=this.bodyToExportRows(this.rowLookup(l));return b.concat(S)}genereateTable(r,o,l,p){var b=this.generateExportList(r,o,l,p);return this.genereateTableElement(b)}rowLookup(r){var o=[];if("function"==typeof r)r.call(this.table).forEach(l=>{(l=this.table.rowManager.findRow(l))&&o.push(l)});else switch(r){case!0:case"visible":o=this.table.rowManager.getVisibleRows(!0);break;case"all":o=this.table.rowManager.rows;break;case"selected":o=this.table.modules.selectRow.selectedRows;break;default:o=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],o)}generateColumnGroupHeaders(){var r=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(l=>{var p=this.processColumnGroup(l);p&&r.push(p)}),r}processColumnGroup(r){var o=r.columns,l=0,b={title:r.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||r.definition.title,column:r,depth:1};if(o.length){if(b.subGroups=[],b.width=0,o.forEach(S=>{var I=this.processColumnGroup(S);I&&(b.width+=I.width,b.subGroups.push(I),I.depth>l&&(l=I.depth))}),b.depth+=l,!b.width)return!1}else{if(!this.columnVisCheck(r))return!1;b.width=1}return b}columnVisCheck(r){return!1!==r.definition[this.colVisProp]&&(r.visible||!r.visible&&r.definition[this.colVisProp])}headersToExportRows(r){var o=[],l=0,p=[];function b(S,I){var N=l-I;if(void 0===o[I]&&(o[I]=[]),S.height=S.subGroups?1:N-S.depth+1,o[I].push(S),S.height>1)for(let $=1;$<S.height;$++)void 0===o[I+$]&&(o[I+$]=[]),o[I+$].push(!1);if(S.width>1)for(let $=1;$<S.width;$++)o[I].push(!1);S.subGroups&&S.subGroups.forEach(function($){b($,I+1)})}return r.forEach(function(S){S.depth>l&&(l=S.depth)}),r.forEach(function(S){b(S,0)}),o.forEach(S=>{var I=[];S.forEach(N=>{I.push(N?new k(N.title,N.column.getComponent(),N.width,N.height,N.depth):null)}),p.push(new Eh("header",I))}),p}bodyToExportRows(r){var o=[],l=[];return this.table.columnManager.columnsByIndex.forEach(p=>{this.columnVisCheck(p)&&o.push(p.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&r.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&r.push(this.table.modules.columnCalcs.botRow)),(r=r.filter(p=>{switch(p.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&p.modules.dataTree.parent)}return!0})).forEach((p,b)=>{var S=p.getData(this.colVisProp),I=[],N=0;switch(p.type){case"group":N=p.level,I.push(new k(p.key,p.getComponent(),o.length,1));break;case"calc":case"row":o.forEach($=>{I.push(new k($._column.getFieldValue(S),$,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(N=p.modules.dataTree.index)}l.push(new Eh(p.type,I,p.getComponent(),N))}),l}genereateTableElement(r){var o=document.createElement("table"),l=document.createElement("thead"),p=document.createElement("tbody"),b=this.lookupTableStyles(),S=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],I={};return I.rowFormatter=null!==S?S:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(I.treeElementField=this.table.modules.dataTree.elementField),I.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],I.groupHeader&&!Array.isArray(I.groupHeader)&&(I.groupHeader=[I.groupHeader]),o.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),l,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),r.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),r.forEach((N,$)=>{switch(N.type){case"header":l.appendChild(this.genereateHeaderElement(N,I,b));break;case"group":p.appendChild(this.genereateGroupElement(N,I,b));break;case"calc":p.appendChild(this.genereateCalcElement(N,I,b));break;case"row":let de=this.genereateRowElement(N,I,b);this.mapElementStyles($%2&&b.evenRow?b.evenRow:b.oddRow,de,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),p.appendChild(de)}}),l.innerHTML&&o.appendChild(l),o.appendChild(p),this.mapElementStyles(this.table.element,o,["border-top","border-left","border-right","border-bottom"]),o}lookupTableStyles(){var r={};return this.cloneTableStyle&&window.getComputedStyle&&(r.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),r.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),r.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),r.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),r.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],r.firstRow&&(r.styleCells=r.firstRow.getElementsByClassName("tabulator-cell"),r.firstCell=r.styleCells[0],r.lastCell=r.styleCells[r.styleCells.length-1])),r}genereateHeaderElement(r,o,l){var p=document.createElement("tr");return r.columns.forEach(b=>{if(b){var S=document.createElement("th"),I=b.component._column.definition.cssClass?b.component._column.definition.cssClass.split(" "):[];S.colSpan=b.width,S.rowSpan=b.height,S.innerHTML=b.value,this.cloneTableStyle&&(S.style.boxSizing="border-box"),I.forEach(function(N){S.classList.add(N)}),this.mapElementStyles(b.component.getElement(),S,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(b.component._column.contentElement,S,["padding-top","padding-left","padding-right","padding-bottom"]),b.component._column.visible?this.mapElementStyles(b.component.getElement(),S,["width"]):b.component._column.definition.width&&(S.style.width=b.component._column.definition.width+"px"),b.component._column.parent&&this.mapElementStyles(b.component._column.parent.groupElement,S,["border-top"]),p.appendChild(S)}}),p}genereateGroupElement(r,o,l){var p=document.createElement("tr"),b=document.createElement("td"),S=r.columns[0];return p.classList.add("tabulator-print-table-row"),S.value=o.groupHeader&&o.groupHeader[r.indent]?o.groupHeader[r.indent](S.value,r.component._group.getRowCount(),r.component._group.getData(),r.component):!1===o.groupHeader?S.value:r.component._group.generator(S.value,r.component._group.getRowCount(),r.component._group.getData(),r.component),b.colSpan=S.width,b.innerHTML=S.value,p.classList.add("tabulator-print-table-group"),p.classList.add("tabulator-group-level-"+r.indent),S.component.isVisible()&&p.classList.add("tabulator-group-visible"),this.mapElementStyles(l.firstGroup,p,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(l.firstGroup,b,["padding-top","padding-left","padding-right","padding-bottom"]),p.appendChild(b),p}genereateCalcElement(r,o,l){var p=this.genereateRowElement(r,o,l);return p.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(l.calcRow,p,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),p}genereateRowElement(r,o,l){var p=document.createElement("tr");return p.classList.add("tabulator-print-table-row"),r.columns.forEach(b=>{if(b){var S=document.createElement("td"),I=b.component._column,N=b.value,$={modules:{},getValue:function(){return N},getField:function(){return I.definition.field},getElement:function(){return S},getColumn:function(){return I.getComponent()},getData:function(){return r.component.getData()},getRow:function(){return r.component},getComponent:function(){return $},column:I};if((I.definition.cssClass?I.definition.cssClass.split(" "):[]).forEach(function(Fe){S.classList.add(Fe)}),this.table.modExists("format")&&!1!==this.config.formatCells)N=this.table.modules.format.formatExportValue($,this.colVisProp);else switch(typeof N){case"object":N=JSON.stringify(N);break;case"undefined":case"null":N="";break;default:N=N}N instanceof Node?S.appendChild(N):S.innerHTML=N,l.firstCell&&(this.mapElementStyles(l.firstCell,S,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),I.definition.align&&(S.style.textAlign=I.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(o.treeElementField&&o.treeElementField==I.field||!o.treeElementField&&0==i)&&(r.component._row.modules.dataTree.controlEl&&S.insertBefore(r.component._row.modules.dataTree.controlEl.cloneNode(!0),S.firstChild),r.component._row.modules.dataTree.branchEl&&S.insertBefore(r.component._row.modules.dataTree.branchEl.cloneNode(!0),S.firstChild)),p.appendChild(S),$.modules.format&&$.modules.format.renderedCallback&&$.modules.format.renderedCallback(),o.rowFormatter&&!1!==this.config.formatCells&&o.rowFormatter(r.component)}}),p}genereateHTMLTable(r){var o=document.createElement("div");return o.appendChild(this.genereateTableElement(r)),o.innerHTML}getHtml(r,o,l,p){var b=this.generateExportList(l||this.table.options.htmlOutputConfig,o,r,p||"htmlOutput");return this.genereateHTMLTable(b)}mapElementStyles(r,o,l){if(this.cloneTableStyle&&r&&o){var p={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var b=window.getComputedStyle(r);l.forEach(function(S){o.style[p[S]]=b.getPropertyValue(S)})}}}}return f.moduleName="export",f})();var v={"=":function(f,s,r,o){return s==f},"<":function(f,s,r,o){return s<f},"<=":function(f,s,r,o){return s<=f},">":function(f,s,r,o){return s>f},">=":function(f,s,r,o){return s>=f},"!=":function(f,s,r,o){return s!=f},regex:function(f,s,r,o){return"string"==typeof f&&(f=new RegExp(f)),f.test(s)},like:function(f,s,r,o){return null==f?s===f:null!=s&&String(s).toLowerCase().indexOf(f.toLowerCase())>-1},keywords:function(f,s,r,o){var l=f.toLowerCase().split(void 0===o.separator?" ":o.separator),p=String(null==s?"":s).toLowerCase(),b=[];return l.forEach(S=>{p.includes(S)&&b.push(!0)}),o.matchAll?b.length===l.length:!!b.length},starts:function(f,s,r,o){return null==f?s===f:null!=s&&String(s).toLowerCase().startsWith(f.toLowerCase())},ends:function(f,s,r,o){return null==f?s===f:null!=s&&String(s).toLowerCase().endsWith(f.toLowerCase())},in:function(f,s,r,o){return Array.isArray(f)?!f.length||f.indexOf(s)>-1:(console.warn("Filter Error - filter value is not an array:",f),!1)}};let O=(()=>{class f extends bo{constructor(r){super(r),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(r=>{var o=this.table.columnManager.findColumn(r.field);if(!o)return console.warn("Column Filter Error - No matching column found:",r.field),!1;this.setHeaderFilterValue(o,r.value)}),this.tableInitialized=!0}remoteFilterParams(r,o,l,p){return p.filter=this.getFilters(!0,!0),p}userSetFilter(r,o,l,p){this.setFilter(r,o,l,p),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(r,o,l,p){this.addFilter(r,o,l,p),this.refreshFilter()}userSetHeaderFilterFocus(r){var o=this.table.columnManager.findColumn(r);if(!o)return console.warn("Column Filter Focus Error - No matching column found:",r),!1;this.setHeaderFilterFocus(o)}userGetHeaderFilterValue(r){var o=this.table.columnManager.findColumn(r);if(o)return this.getHeaderFilterValue(o);console.warn("Column Filter Error - No matching column found:",r)}userSetHeaderFilterValue(r,o){var l=this.table.columnManager.findColumn(r);if(!l)return console.warn("Column Filter Error - No matching column found:",r),!1;this.setHeaderFilterValue(l,o)}userRemoveFilter(r,o,l){this.removeFilter(r,o,l),this.refreshFilter()}userClearFilter(r){this.clearFilter(r),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(r,o,l){return this.search("rows",r,o,l)}searchData(r,o,l){return this.search("data",r,o,l)}initializeColumnHeaderFilter(r){var o=r.definition;o.headerFilter&&(void 0!==o.headerFilterPlaceholder&&o.field&&this.module("localize").setHeaderFilterColumnPlaceholder(o.field,o.headerFilterPlaceholder),this.initializeColumn(r))}initializeColumn(r,o){var l=this,p=r.getField();r.modules.filter={success:function(S){var de,I="input"==r.modules.filter.tagType&&"text"==r.modules.filter.attrType||"textarea"==r.modules.filter.tagType?"partial":"match",N="",$="";if(void 0===r.modules.filter.prevSuccess||r.modules.filter.prevSuccess!==S){if(r.modules.filter.prevSuccess=S,r.modules.filter.emptyFunc(S))delete l.headerFilters[p];else{switch(r.modules.filter.value=S,typeof r.definition.headerFilterFunc){case"string":f.filters[r.definition.headerFilterFunc]?(N=r.definition.headerFilterFunc,de=function(Fe){var qe=r.definition.headerFilterFuncParams||{},Et=r.getFieldValue(Fe);return qe="function"==typeof qe?qe(S,Et,Fe):qe,f.filters[r.definition.headerFilterFunc](S,Et,Fe,qe)}):console.warn("Header Filter Error - Matching filter function not found: ",r.definition.headerFilterFunc);break;case"function":N=de=function(Fe){var qe=r.definition.headerFilterFuncParams||{},Et=r.getFieldValue(Fe);return qe="function"==typeof qe?qe(S,Et,Fe):qe,r.definition.headerFilterFunc(S,Et,Fe,qe)}}de||("partial"===I?(de=function(Fe){var qe=r.getFieldValue(Fe);return null!=qe&&String(qe).toLowerCase().indexOf(String(S).toLowerCase())>-1},N="like"):(de=function(Fe){return r.getFieldValue(Fe)==S},N="=")),l.headerFilters[p]={value:S,func:de,type:N,params:{}}}$=JSON.stringify(l.headerFilters),l.prevHeaderFilterChangeCheck!==$&&(l.prevHeaderFilterChangeCheck=$,l.trackChanges(),l.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(r)}generateHeaderFilterElement(r,o,l){var I,N,$,de,Fe,qe,Et,p=this,b=r.modules.filter.success,S=r.getField();if(r.modules.filter.headerElement&&r.modules.filter.headerElement.parentNode&&r.contentElement.removeChild(r.modules.filter.headerElement.parentNode),S){switch(r.modules.filter.emptyFunc=r.definition.headerFilterEmptyCheck||function(Gt){return!Gt&&"0"!==Gt&&0!==Gt},(I=document.createElement("div")).classList.add("tabulator-header-filter"),typeof r.definition.headerFilter){case"string":p.table.modules.edit.editors[r.definition.headerFilter]?(N=p.table.modules.edit.editors[r.definition.headerFilter],("tick"===r.definition.headerFilter||"tickCross"===r.definition.headerFilter)&&!r.definition.headerFilterEmptyCheck&&(r.modules.filter.emptyFunc=function(Gt){return!0!==Gt&&!1!==Gt})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",r.definition.editor);break;case"function":N=r.definition.headerFilter;break;case"boolean":r.modules.edit&&r.modules.edit.editor?N=r.modules.edit.editor:r.definition.formatter&&p.table.modules.edit.editors[r.definition.formatter]?(N=p.table.modules.edit.editors[r.definition.formatter],("tick"===r.definition.formatter||"tickCross"===r.definition.formatter)&&!r.definition.headerFilterEmptyCheck&&(r.modules.filter.emptyFunc=function(Gt){return!0!==Gt&&!1!==Gt})):N=p.table.modules.edit.editors.input}if(N){if(de={getValue:function(){return void 0!==o?o:""},getField:function(){return r.definition.field},getElement:function(){return I},getColumn:function(){return r.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},Et="function"==typeof(Et=r.definition.headerFilterParams||{})?Et.call(p.table):Et,!($=N.call(this.table.modules.edit,de,function(){},b,function(){},Et)))return void console.warn("Filter Error - Cannot add filter to "+S+" column, editor returned a value of false");if(!($ instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+S+" column, editor should return an instance of Node, the editor returned:",$);S?p.langBind("headerFilters|columns|"+r.definition.field,function(Gt){$.setAttribute("placeholder",void 0!==Gt&&Gt?Gt:p.langText("headerFilters|default"))}):p.langBind("headerFilters|default",function(Gt){$.setAttribute("placeholder",Gt)}),$.addEventListener("click",function(Gt){Gt.stopPropagation(),$.focus()}),$.addEventListener("focus",Gt=>{var Wt=this.table.columnManager.element.scrollLeft;Wt!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(Wt),this.table.columnManager.scrollHorizontal(Wt))}),Fe=!1,qe=function(Gt){Fe&&clearTimeout(Fe),Fe=setTimeout(function(){b($.value)},p.table.options.headerFilterLiveFilterDelay)},r.modules.filter.headerElement=$,r.modules.filter.attrType=$.hasAttribute("type")?$.getAttribute("type").toLowerCase():"",r.modules.filter.tagType=$.tagName.toLowerCase(),!1!==r.definition.headerFilterLiveFilter&&("autocomplete"===r.definition.headerFilter||"tickCross"===r.definition.headerFilter||("autocomplete"===r.definition.editor||"tickCross"===r.definition.editor)&&!0===r.definition.headerFilter||($.addEventListener("keyup",qe),$.addEventListener("search",qe),"number"==r.modules.filter.attrType&&$.addEventListener("change",function(Gt){b($.value)}),"text"==r.modules.filter.attrType&&"ie"!==this.table.browser&&$.setAttribute("type","search")),("input"==r.modules.filter.tagType||"select"==r.modules.filter.tagType||"textarea"==r.modules.filter.tagType)&&$.addEventListener("mousedown",function(Gt){Gt.stopPropagation()})),I.appendChild($),r.contentElement.appendChild(I),l||p.headerFilterColumns.push(r)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",r.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(r){r.modules.filter&&r.modules.filter.headerElement&&(r.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(r){r.modules.filter&&r.modules.filter.headerElement&&(r.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(r){r.modules.filter&&r.modules.filter.headerElement?r.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",r.getField())}getHeaderFilterValue(r){if(r.modules.filter&&r.modules.filter.headerElement)return r.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",r.getField())}setHeaderFilterValue(r,o){r&&(r.modules.filter&&r.modules.filter.headerElement?(this.generateHeaderFilterElement(r,o,!0),r.modules.filter.success(o)):console.warn("Column Filter Error - No header filter set on column:",r.getField()))}reloadHeaderFilter(r){r&&(r.modules.filter&&r.modules.filter.headerElement?this.generateHeaderFilterElement(r,r.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",r.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var r=this.changed;return this.changed=!1,r}setFilter(r,o,l,p){this.filterList=[],Array.isArray(r)||(r=[{field:r,type:o,value:l,params:p}]),this.addFilter(r)}addFilter(r,o,l,p){Array.isArray(r)||(r=[{field:r,type:o,value:l,params:p}]),r.forEach(b=>{(b=this.findFilter(b))&&(this.filterList.push(b),this.changed=!0)})}findFilter(r){var o;if(Array.isArray(r))return this.findSubFilters(r);var l=!1;return"function"==typeof r.field?l=function(p){return r.field(p,r.type||{})}:f.filters[r.type]?l=(o=this.table.columnManager.getColumnByField(r.field))?function(p){return f.filters[r.type](r.value,o.getFieldValue(p),p,r.params||{})}:function(p){return f.filters[r.type](r.value,p[r.field],p,r.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",r.type),r.func=l,!!r.func&&r}findSubFilters(r){var o=[];return r.forEach(l=>{(l=this.findFilter(l))&&o.push(l)}),!!o.length&&o}getFilters(r,o){var l=[];return r&&(l=this.getHeaderFilters()),o&&l.forEach(function(p){"function"==typeof p.type&&(p.type="function")}),l.concat(this.filtersToArray(this.filterList,o))}filtersToArray(r,o){var l=[];return r.forEach(p=>{var b;Array.isArray(p)?l.push(this.filtersToArray(p,o)):(b={field:p.field,type:p.type,value:p.value},o&&"function"==typeof b.type&&(b.type="function"),l.push(b))}),l}getHeaderFilters(){var r=[];for(var o in this.headerFilters)r.push({field:o,type:this.headerFilters[o].type,value:this.headerFilters[o].value});return r}removeFilter(r,o,l){Array.isArray(r)||(r=[{field:r,type:o,value:l}]),r.forEach(p=>{var b;(b=this.filterList.findIndex("object"==typeof p.field?S=>p===S:S=>p.field===S.field&&p.type===S.type&&p.value===S.value))>-1?this.filterList.splice(b,1):console.warn("Filter Error - No matching filter type found, ignoring: ",p.type)}),this.trackChanges()}clearFilter(r){this.filterList=[],r&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(r=>{void 0!==r.modules.filter.value&&delete r.modules.filter.value,r.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(r)}),this.trackChanges()}search(r,o,l,p){var b=[],S=[];return Array.isArray(o)||(o=[{field:o,type:l,value:p}]),o.forEach(I=>{(I=this.findFilter(I))&&S.push(I)}),this.table.rowManager.rows.forEach(I=>{var N=!0;S.forEach($=>{this.filterRecurse($,I.getData())||(N=!1)}),N&&b.push("data"===r?I.getData("data"):I.getComponent())}),b}filter(r,o){var l=[],p=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?r.forEach(b=>{this.filterRow(b)&&l.push(b)}):l=r.slice(0),this.subscribedExternal("dataFiltered")&&(l.forEach(b=>{p.push(b.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),p)),l}filterRow(r,o){var l=!0,p=r.getData();for(var b in this.filterList.forEach(S=>{this.filterRecurse(S,p)||(l=!1)}),this.headerFilters)this.headerFilters[b].func(p)||(l=!1);return l}filterRecurse(r,o){var l=!1;return Array.isArray(r)?r.forEach(p=>{this.filterRecurse(p,o)&&(l=!0)}):l=r.func(o),l}}return f.moduleName="filter",f.filters=v,f})();var zp={plaintext:function(f,s,r){return this.emptyToSpace(this.sanitizeHTML(f.getValue()))},html:function(f,s,r){return f.getValue()},textarea:function(f,s,r){return f.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(f.getValue()))},money:function(f,s,r){var p,b,S,I,o=parseFloat(f.getValue()),l="",N=s.decimal||".",$=s.thousand||",",de=s.negativeSign||"-",Fe=s.symbol||"",qe=!!s.symbolAfter,Et=void 0!==s.precision?s.precision:2;if(isNaN(o))return this.emptyToSpace(this.sanitizeHTML(f.getValue()));for(o<0&&(o=Math.abs(o),l=de),p=!1!==Et?o.toFixed(Et):o,b=(p=String(p).split("."))[0],S=p.length>1?N+p[1]:"",I=/(\d+)(\d{3})/;I.test(b);)b=b.replace(I,"$1"+$+"$2");return qe?l+b+S+Fe:l+Fe+b+S},link:function(f,s,r){var o=f.getValue(),l=s.urlPrefix||"",p=s.download,b=o,S=document.createElement("a");if(s.labelField&&(b=f.getData()[s.labelField]),s.label)switch(typeof s.label){case"string":b=s.label;break;case"function":b=s.label(f)}if(b){if(s.urlField&&(o=f.getData()[s.urlField]),s.url)switch(typeof s.url){case"string":o=s.url;break;case"function":o=s.url(f)}return S.setAttribute("href",l+o),s.target&&S.setAttribute("target",s.target),s.download&&(p="function"==typeof p?p(f):!0===p?"":p,S.setAttribute("download",p)),S.innerHTML=this.emptyToSpace(this.sanitizeHTML(b)),S}return"&nbsp;"},image:function(f,s,r){var o=document.createElement("img"),l=f.getValue();switch(s.urlPrefix&&(l=s.urlPrefix+f.getValue()),s.urlSuffix&&(l+=s.urlSuffix),o.setAttribute("src",l),typeof s.height){case"number":o.style.height=s.height+"px";break;case"string":o.style.height=s.height}switch(typeof s.width){case"number":o.style.width=s.width+"px";break;case"string":o.style.width=s.width}return o.addEventListener("load",function(){f.getRow().normalizeHeight()}),o},tickCross:function(f,s,r){var o=f.getValue(),l=f.getElement(),p=s.allowEmpty,S=void 0!==s.tickElement?s.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',I=void 0!==s.crossElement?s.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return s.allowTruthy&&o||!0===o||"true"===o||"True"===o||1===o||"1"===o?(l.setAttribute("aria-checked",!0),S||""):!p||"null"!==o&&""!==o&&null!=o?(l.setAttribute("aria-checked",!1),I||""):(l.setAttribute("aria-checked","mixed"),"")},datetime:function(f,s,r){var o=window.DateTime||luxon.DateTime,l=s.inputFormat||"yyyy-MM-dd HH:mm:ss",p=s.outputFormat||"dd/MM/yyyy HH:mm:ss",b=void 0!==s.invalidPlaceholder?s.invalidPlaceholder:"",S=f.getValue();if(void 0!==o){var I=(window.DateTime||luxon.DateTime).fromFormat(S,l);return I.isValid?(s.timezone&&(I=I.shiftTimezone(s.timezone)),I.toFormat(p)):!0===b?S:"function"==typeof b?b(S):b}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(f,s,r){var o=window.DateTime||luxon.DateTime,l=s.inputFormat||"yyyy-MM-dd HH:mm:ss",p=void 0!==s.invalidPlaceholder?s.invalidPlaceholder:"",b=void 0!==s.suffix&&s.suffix,S=void 0!==s.unit?s.unit:"days",I=void 0!==s.humanize&&s.humanize,N=void 0!==s.date?s.date:o.now(),$=f.getValue();if(void 0!==o){var de=o.fromFormat($,l);if(!de.isValid)return!0===p?$:"function"==typeof p?p($):p;if(!I)return parseInt(de.diff(N,S)[S])+(b?" "+b:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(f,s,r){var o=f.getValue();return void 0===s[o]?(console.warn("Missing display value for "+o),o):s[o]},star:function(f,s,r){var o=f.getValue(),l=f.getElement(),p=s&&s.stars?s.stars:5,b=document.createElement("span"),S=document.createElementNS("http://www.w3.org/2000/svg","svg");b.style.verticalAlign="middle",S.setAttribute("width","14"),S.setAttribute("height","14"),S.setAttribute("viewBox","0 0 512 512"),S.setAttribute("xml:space","preserve"),S.style.padding="0 1px",o=o&&!isNaN(o)?parseInt(o):0,o=Math.max(0,Math.min(o,p));for(var $=1;$<=p;$++){var de=S.cloneNode(!0);de.innerHTML=$<=o?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',b.appendChild(de)}return l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.style.textOverflow="ellipsis",l.setAttribute("aria-label",o),b},traffic:function(f,s,r){var $,o=this.sanitizeHTML(f.getValue())||0,l=document.createElement("span"),p=s&&s.max?s.max:100,b=s&&s.min?s.min:0,S=s&&void 0!==s.color?s.color:["red","orange","green"],I="#666666";if(!isNaN(o)&&void 0!==f.getValue()){switch(l.classList.add("tabulator-traffic-light"),$=parseFloat(o)<=p?parseFloat(o):p,$=parseFloat($)>=b?parseFloat($):b,$=Math.round(($-b)/((p-b)/100)),typeof S){case"string":I=S;break;case"function":I=S(o);break;case"object":if(Array.isArray(S)){var Fe=Math.floor($/(100/S.length));Fe=Math.min(Fe,S.length-1),I=S[Fe=Math.max(Fe,0)];break}}return l.style.backgroundColor=I,l}},progress:function(f,s,r){var N,$,de,Fe,o=this.sanitizeHTML(f.getValue())||0,l=f.getElement(),p=s&&s.max?s.max:100,b=s&&s.min?s.min:0,S=s&&s.legendAlign?s.legendAlign:"center";switch(N=parseFloat(o)<=p?parseFloat(o):p,N=parseFloat(N)>=b?parseFloat(N):b,N=Math.round((N-b)/((p-b)/100)),typeof s.color){case"string":$=s.color;break;case"function":$=s.color(o);break;case"object":if(Array.isArray(s.color)){var qe=100/s.color.length,Et=Math.floor(N/qe);Et=Math.min(Et,s.color.length-1),Et=Math.max(Et,0),$=s.color[Et];break}default:$="#2DC214"}switch(typeof s.legend){case"string":de=s.legend;break;case"function":de=s.legend(o);break;case"boolean":de=o;break;default:de=!1}switch(typeof s.legendColor){case"string":Fe=s.legendColor;break;case"function":Fe=s.legendColor(o);break;case"object":Array.isArray(s.legendColor)&&(qe=100/s.legendColor.length,Et=Math.floor(N/qe),Et=Math.min(Et,s.legendColor.length-1),Et=Math.max(Et,0),Fe=s.legendColor[Et]);break;default:Fe="#000"}l.style.minWidth="30px",l.style.position="relative",l.setAttribute("aria-label",N);var xt=document.createElement("div");xt.style.display="inline-block",xt.style.position="absolute",xt.style.width=N+"%",xt.style.backgroundColor=$,xt.style.height="100%",xt.setAttribute("data-max",p),xt.setAttribute("data-min",b);var Gt=document.createElement("div");if(Gt.style.position="relative",Gt.style.width="100%",Gt.style.height="100%",de){var Wt=document.createElement("div");Wt.style.position="absolute",Wt.style.top=0,Wt.style.left=0,Wt.style.textAlign=S,Wt.style.width="100%",Wt.style.color=Fe,Wt.innerHTML=de}return r(function(){if(!(f instanceof Gp)){var Ti=document.createElement("div");Ti.style.position="absolute",Ti.style.top="4px",Ti.style.bottom="4px",Ti.style.left="4px",Ti.style.right="4px",l.appendChild(Ti),l=Ti}l.appendChild(Gt),Gt.appendChild(xt),de&&Gt.appendChild(Wt)}),""},color:function(f,s,r){return f.getElement().style.backgroundColor=this.sanitizeHTML(f.getValue()),""},buttonTick:function(f,s,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(f,s,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(f,s,r){return this.table.rowManager.activeRows.indexOf(f.getRow()._getSelf())+1},handle:function(f,s,r){return f.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(f,s,r){var o=document.createElement("div"),l=f.getRow()._row.modules.responsiveLayout;function p(b){var S=l.element;l.open=b,S&&(l.open?(o.classList.add("open"),S.style.display=""):(o.classList.remove("open"),S.style.display="none"))}return o.classList.add("tabulator-responsive-collapse-toggle"),o.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",f.getElement().classList.add("tabulator-row-handle"),o.addEventListener("click",function(b){b.stopImmediatePropagation(),p(!l.open)}),p(l.open),o},rowSelection:function(f,s,r){var o=document.createElement("input");if(o.type="checkbox",this.table.modExists("selectRow",!0))if(o.addEventListener("click",p=>{p.stopPropagation()}),"function"==typeof f.getRow){var l=f.getRow();l instanceof gh?(o.addEventListener("change",p=>{l.toggleSelect()}),o.checked=l.isSelected&&l.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(l,o)):o=""}else o.addEventListener("change",p=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(s.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(o);return o}};let Yp=(()=>{class f extends bo{constructor(r){super(r),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(r){r.modules.format=this.lookupFormatter(r,""),void 0!==r.definition.formatterPrint&&(r.modules.format.print=this.lookupFormatter(r,"Print")),void 0!==r.definition.formatterClipboard&&(r.modules.format.clipboard=this.lookupFormatter(r,"Clipboard")),void 0!==r.definition.formatterHtmlOutput&&(r.modules.format.htmlOutput=this.lookupFormatter(r,"HtmlOutput"))}lookupFormatter(r,o){var l={params:r.definition["formatter"+o+"Params"]||{}},p=r.definition["formatter"+o];switch(typeof p){case"string":f.formatters[p]?l.formatter=f.formatters[p]:(console.warn("Formatter Error - No such formatter found: ",p),l.formatter=f.formatters.plaintext);break;case"function":l.formatter=p;break;default:l.formatter=f.formatters.plaintext}return l}cellRendered(r){r.modules.format&&r.modules.format.renderedCallback&&!r.modules.format.rendered&&(r.modules.format.renderedCallback(),r.modules.format.rendered=!0)}formatHeader(r,o,l){var p,b,S,I;return r.definition.titleFormatter?(p=this.getFormatter(r.definition.titleFormatter),S=N=>{r.titleFormatterRendered=N},I={getValue:function(){return o},getElement:function(){return l}},b="function"==typeof(b=r.definition.titleFormatterParams||{})?b():b,p.call(this,I,b,S)):o}formatValue(r){var o=r.getComponent(),l="function"==typeof r.column.modules.format.params?r.column.modules.format.params(o):r.column.modules.format.params;return r.column.modules.format.formatter.call(this,o,l,function(b){r.modules.format||(r.modules.format={}),r.modules.format.renderedCallback=b,r.modules.format.rendered=!1})}formatExportValue(r,o){var p,l=r.column.modules.format[o];if(l){let b=function(S){r.modules.format||(r.modules.format={}),r.modules.format.renderedCallback=S,r.modules.format.rendered=!1};return p="function"==typeof l.params?l.params(component):l.params,l.formatter.call(this,r.getComponent(),p,b)}return this.formatValue(r)}sanitizeHTML(r){if(r){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(r).replace(/[&<>"'`=\/]/g,function(l){return o[l]})}return r}emptyToSpace(r){return null==r||""===r?"&nbsp;":r}getFormatter(r){switch(typeof r){case"string":f.formatters[r]?r=f.formatters[r]:(console.warn("Formatter Error - No such formatter found: ",r),r=f.formatters.plaintext);break;case"function":r=r;break;default:r=f.formatters.plaintext}return r}}return f.moduleName="format",f.formatters=zp,f})(),Xp=(()=>{class f extends bo{constructor(r){super(r),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(r){this.layoutElement(r.element,r.column)}initializeColumn(r){var o={margin:0,edge:!1};r.isGroup||(this.frozenCheck(r)?(o.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(r):this.rightColumns.unshift(r),this.active=!0,r.modules.frozen=o):this.initializationMode="right")}frozenCheck(r){return r.parent.isGroup&&r.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),r.parent.isGroup?this.frozenCheck(r.parent):r.definition.frozen}scrollHorizontal(){var r;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),r=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),r.forEach(o=>{"row"===o.type&&this.layoutRow(o)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(r){r.forEach(o=>{o.calcs.top&&this.layoutRow(o.calcs.top),o.calcs.bottom&&this.layoutRow(o.calcs.bottom),o.groupList&&o.groupList.length&&this.layoutGroupCalcs(o.groupList&&o.groupList)})}layoutColumnPosition(r){var o=[];this.leftColumns.forEach((l,p)=>{if(l.modules.frozen.margin=this._calcSpace(this.leftColumns,p)+this.table.columnManager.scrollLeft+"px",l.modules.frozen.edge=p==this.leftColumns.length-1,l.parent.isGroup){var b=this.getColGroupParentElement(l);o.includes(b)||(this.layoutElement(b,l),o.push(b)),l.modules.frozen.edge&&b.classList.add("tabulator-frozen-"+l.modules.frozen.position)}else this.layoutElement(l.getElement(),l);r&&l.cells.forEach(S=>{this.layoutElement(S.getElement(!0),l)})}),this.rightColumns.forEach((l,p)=>{l.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,p+1)+"px",l.modules.frozen.edge=p==this.rightColumns.length-1,this.layoutElement(l.parent.isGroup?this.getColGroupParentElement(l):l.getElement(),l),r&&l.cells.forEach(b=>{this.layoutElement(b.getElement(!0),l)})})}getColGroupParentElement(r){return r.parent.isGroup?this.getColGroupParentElement(r.parent):r.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(r=>{"row"===r.type&&this.layoutRow(r)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(r){r.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(l=>{var p=r.getCell(l);p&&this.layoutElement(p.getElement(!0),l)}),this.rightColumns.forEach(l=>{var p=r.getCell(l);p&&this.layoutElement(p.getElement(!0),l)})}layoutElement(r,o){o.modules.frozen&&(r.style.position="absolute",r.style.left=o.modules.frozen.margin,r.classList.add("tabulator-frozen"),o.modules.frozen.edge&&r.classList.add("tabulator-frozen-"+o.modules.frozen.position))}_calcSpace(r,o){var l=0;for(let p=0;p<o;p++)r[p].visible&&(l+=r[p].getWidth());return l}}return f.moduleName="frozenColumns",f})(),Yf=(()=>{class f extends bo{constructor(r){super(r),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(r){return this.rows.indexOf(r)>-1}isFrozen(){return!!this.rows.length}getRows(r){var o=r.slice(0);return this.rows.forEach(function(l){var p=o.indexOf(l);p>-1&&o.splice(p,1)}),o}freezeRow(r){r.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(r.modules.frozen=!0,this.topElement.appendChild(r.getElement()),r.initialize(),r.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(r),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(r){this.rows.indexOf(r),r.modules.frozen?(r.modules.frozen=!1,this.detachRow(r),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(r){var o=this.rows.indexOf(r);if(o>-1){var l=r.getElement();l.parentNode&&l.parentNode.removeChild(l),this.rows.splice(o,1)}}styleRows(r){this.rows.forEach((o,l)=>{this.table.rowManager.styleRow(o,l)})}}return f.moduleName="frozenRows",f})();class Xf{constructor(s){return this._group=s,this.type="GroupComponent",new Proxy(this,{get:function(r,o,l){return void 0!==r[o]?r[o]:r._group.table.componentFunctionBinder.handle("row",r._group,o)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class Ud{constructor(s,r,o,l,p,b,S){this.groupManager=s,this.parent=r,this.key=l,this.level=o,this.field=p,this.hasSubGroups=o<s.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=S,this.rows=[],this.groups=[],this.groupList=[],this.generator=b,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=S?S.visible:void 0!==s.startOpen[o]?s.startOpen[o]:s.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(s){s.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var s=document.createElement("div");s.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(s),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var s=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[s]&&this.groupManager.allowedValues[s].forEach(r=>{this._createGroup(r,s)})}addBindings(){var s,r,o;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(o=!1,this.element.addEventListener("touchstart",p=>{o=!0},{passive:!0}),this.element.addEventListener("touchend",p=>{o&&this.groupManager.table.options.groupTap(p,this.getComponent()),o=!1})),this.groupManager.table.options.groupDblTap&&(s=null,this.element.addEventListener("touchend",p=>{s?(clearTimeout(s),s=null,this.groupManager.table.options.groupDblTap(p,this.getComponent())):s=setTimeout(()=>{clearTimeout(s),s=null},300)})),this.groupManager.table.options.groupTapHold&&(r=null,this.element.addEventListener("touchstart",p=>{clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),r=null,o=!1,this.groupManager.table.options.groupTapHold(p,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",p=>{clearTimeout(r),r=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",p=>{p.stopPropagation(),p.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(s,r){var o=r+"_"+s,l=new Ud(this.groupManager,this,r,s,this.groupManager.groupIDLookups[r].field,this.groupManager.headerGenerator[r]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[o]);this.groups[o]=l,this.groupList.push(l)}_addRowToGroup(s){var r=this.level+1;if(this.hasSubGroups){var o=this.groupManager.groupIDLookups[r].func(s.getData()),l=r+"_"+o;this.groupManager.allowedValues&&this.groupManager.allowedValues[r]?this.groups[l]&&this.groups[l].addRow(s):(this.groups[l]||this._createGroup(o,r),this.groups[l].addRow(s))}}_addRow(s){this.rows.push(s),s.modules.group=this}insertRow(s,r,o){var l=this.conformRowData({});s.updateData(l);var p=this.rows.indexOf(r);p>-1?this.rows.splice(o?p+1:p,0,s):o?this.rows.push(s):this.rows.unshift(s),s.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(s){this.arrowElement.style.marginLeft=s,this.groupList.forEach(function(r){r.scrollHeader(s)})}getRowIndex(s){}conformRowData(s){return this.field?s[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(s=this.parent.conformRowData(s)),s}removeRow(s){var r=this.rows.indexOf(s),o=s.getElement();r>-1&&this.rows.splice(r,1),this.groupManager.table.options.groupValues||this.rows.length?(o.parentNode&&o.parentNode.removeChild(o),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(s){var o,r=s.level+"_"+s.key;this.groups[r]&&(delete this.groups[r],(o=this.groupList.indexOf(s))>-1&&this.groupList.splice(o,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(s){var r=[];return r.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(o){r=r.concat(o.getHeadersAndRows(s))}):(!s&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),r.push(this.calcs.top)),r=r.concat(this.rows),!s&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),r.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!s&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),r.push(this.calcs.top))),!s&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),r.push(this.calcs.bottom)))),r}getData(s,r){var o=[];return this._visSet(),(!s||s&&this.visible)&&this.rows.forEach(l=>{o.push(l.getData(r||"data"))}),o}getRowCount(){var s=0;return this.groupList.length?this.groupList.forEach(r=>{s+=r.getRowCount()}):s=this.rows.length,s}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(s=>{s.getHeadersAndRows().forEach(o=>{o.detachElement()})}):this.rows.forEach(s=>{var r=s.getElement();r.parentNode.removeChild(r)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var s=this.getElement();this.groupList.length?this.groupList.forEach(r=>{r.getHeadersAndRows().forEach(l=>{var p=l.getElement();s.parentNode.insertBefore(p,s.nextSibling),l.initialize(),s=p})}):this.rows.forEach(r=>{var o=r.getElement();s.parentNode.insertBefore(o,s.nextSibling),r.initialize(),s=o}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var s=[];"function"==typeof this.visible&&(this.rows.forEach(function(r){s.push(r.getData())}),this.visible=this.visible(this.key,this.getRowCount(),s,this.getComponent()))}getRowGroup(s){var r=!1;return this.groupList.length?this.groupList.forEach(function(o){var l=o.getRowGroup(s);l&&(r=l)}):this.rows.find(function(o){return o===s})&&(r=this),r}getSubGroups(s){var r=[];return this.groupList.forEach(function(o){r.push(s?o.getComponent():o)}),r}getRows(s){var r=[];return this.rows.forEach(function(o){r.push(s?o.getComponent():o)}),r}generateGroupHeaderContents(){var s=[];for(this.rows.forEach(function(r){s.push(r.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),s,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(s=[]){return s.unshift(this.key),this.parent&&this.parent.getPath(s),s}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var s=0;s<this.element.childNodes.length;++s)this.element.childNodes[s].parentNode.removeChild(this.element.childNodes[s]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(s){(!this.initialized||s)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Ns.elVisible(this.element)&&this.initialize(!0)}setHeight(s){this.height!=s&&(this.height=s,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new Xf(this)),this.component}}let Kp=(()=>{class f extends bo{constructor(r){super(r),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var r=this.table.options.groupBy,o=this.table.options.groupStartOpen,l=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(r)&&Array.isArray(l)&&r.length>l.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(b,S)=>{this.headerGenerator[0]=(I,N,$)=>(void 0===I?"":I)+"<span>("+N+" "+(1===N?b:S.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(r)||r?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(b=>{b.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),b.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(r)||(r=[r]),r.forEach((b,S)=>{var I,N;I="function"==typeof b?b:(N=this.table.columnManager.getColumnByField(b))?function($){return N.getFieldValue($)}:function($){return $[b]},this.groupIDLookups.push({field:"function"!=typeof b&&b,func:I,values:!!this.allowedValues&&this.allowedValues[S]})}),o&&(Array.isArray(o)||(o=[o]),o.forEach(b=>{}),this.startOpen=o),l&&(this.headerGenerator=Array.isArray(l)?l:[l])}}rowSample(r,o){var l=this.getGroups(!1)[0];return o.push(l.getRows(!1)[0]),o}virtualRenderFill(){var r=this.table.rowManager.tableElement,o=this.table.rowManager.getVisibleRows();o=o.filter(l=>"group"!==l.type),r.style.minWidth=o.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(r,o,l){this.assignRowToGroup(r);var p=r.modules.group.rows;return p.length>1&&(!o||o&&-1==p.indexOf(o)?l?p[0]!==r&&this.table.rowManager.moveRowInArray(r.modules.group.rows,r,o=p[0],!l):p[p.length-1]!==r&&this.table.rowManager.moveRowInArray(r.modules.group.rows,r,o=p[p.length-1],!l):this.table.rowManager.moveRowInArray(r.modules.group.rows,r,o,!l)),o}trackChanges(){this.dispatch("group-changed")}setGroupBy(r){this.table.options.groupBy=r,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(r){this.table.options.groupValues=r,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(r){this.table.options.groupStartOpen=r,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(r){this.table.options.groupHeader=r,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(r){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(r){return!!r.modules.group&&r.modules.group.getComponent()}rowMoving(r,o,l){!l&&o instanceof Ud&&(o=this.table.rowManager.prevDisplayRow(r)||o);var p=o instanceof Ud?o:o.modules.group,b=r instanceof Ud?r:r.modules.group;p===b?this.table.rowManager.moveRowInArray(p.rows,r,o,l):(b&&b.removeRow(r),p.insertRow(r,o,l))}rowDeleting(r){r.modules.group&&r.modules.group.removeRow(r)}rowsUpdated(r){this.updateGroupRows(!0)}cellUpdated(r){this.reassignRowToGroup(r.row)}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}getRows(r){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(r),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):r.slice(0)}getGroups(r){var o=[];return this.groupList.forEach(function(l){o.push(r?l.getComponent():l)}),o}getChildGroups(r){var o=[];return r||(r=this),r.groupList.forEach(l=>{l.groupList.length?o=o.concat(this.getChildGroups(l)):o.push(l)}),o}wipe(){this.groupList.forEach(function(r){r.wipe()})}pullGroupListData(r){var o=[];return r.forEach(l=>{var p={level:0,rowCount:0,headerContent:""},b=[];l.hasSubGroups?(b=this.pullGroupListData(l.groupList),p.level=l.level,p.rowCount=b.length-l.groupList.length,p.headerContent=l.generator(l.key,p.rowCount,l.rows,l),o.push(p),o=o.concat(b)):(p.level=l.level,p.headerContent=l.generator(l.key,l.rows.length,l.rows,l),p.rowCount=l.getRows().length,o.push(p),l.getRows().forEach(S=>{o.push(S.getData("data"))}))}),o}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(r){var o=!1;return this.groupList.forEach(l=>{var p=l.getRowGroup(r);p&&(o=p)}),o}countGroups(){return this.groupList.length}generateGroups(r){var o=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(l=>{this.createGroup(l,0,o)}),r.forEach(l=>{this.assignRowToExistingGroup(l,o)})):r.forEach(l=>{this.assignRowToGroup(l,o)})}createGroup(r,o,l){var b,p=o+"_"+r;b=new Ud(this,!1,o,r,this.groupIDLookups[0].field,this.headerGenerator[0],(l=l||[])[p]),this.groups[p]=b,this.groupList.push(b)}assignRowToExistingGroup(r,o){var p="0_"+this.groupIDLookups[0].func(r.getData());this.groups[p]&&this.groups[p].addRow(r)}assignRowToGroup(r,o){var l=this.groupIDLookups[0].func(r.getData()),p=!this.groups["0_"+l];return p&&this.createGroup(l,0,o),this.groups["0_"+l].addRow(r),!p}reassignRowToGroup(r){if("row"===r.type){var o=r.modules.group,l=o.getPath(),p=this.getExpectedPath(r);l.length==p.length&&l.every((S,I)=>S===p[I])||(o.removeRow(r),this.assignRowToGroup(r,this.groups),this.refreshData(!0))}}getExpectedPath(r){var o=[],l=r.getData();return this.groupIDLookups.forEach(p=>{o.push(p.func(l))}),o}updateGroupRows(r){var o=[];return this.groupList.forEach(l=>{o=o.concat(l.getHeadersAndRows())}),r&&this.refreshData(!0,this.displayHandler),o}scrollHeaders(r){"virtual"===this.table.options.renderHorizontal&&(r-=this.table.columnManager.renderer.vDomPadLeft),r+="px",this.groupList.forEach(o=>{o.scrollHeader(r)})}removeGroup(r){var l,o=r.level+"_"+r.key;this.groups[o]&&(delete this.groups[o],(l=this.groupList.indexOf(r))>-1&&this.groupList.splice(l,1))}}return f.moduleName="groupRows",f})();var Kf={cellEdit:function(f){f.component.setValueProcessData(f.data.oldValue),f.component.cellRendered()},rowAdd:function(f){f.component.deleteActual()},rowDelete:function(f){var s=this.table.rowManager.addRowActual(f.data.data,f.data.pos,f.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(f.component,s)},rowMove:function(f){this.table.rowManager.moveRowActual(f.component,this.table.rowManager.rows[f.data.posFrom],!f.data.after),this.table.rowManager.redraw()}},Uu={cellEdit:function(f){f.component.setValueProcessData(f.data.newValue),f.component.cellRendered()},rowAdd:function(f){var s=this.table.rowManager.addRowActual(f.data.data,f.data.pos,f.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(f.component,s)},rowDelete:function(f){f.component.deleteActual()},rowMove:function(f){this.table.rowManager.moveRowActual(f.component,this.table.rowManager.rows[f.data.posTo],f.data.after),this.table.rowManager.redraw()}};let up=(()=>{class f extends bo{constructor(r){super(r),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(r,o,l){this.action("rowMove",r,{posFrom:this.table.rowManager.getRowPosition(r),posTo:this.table.rowManager.getRowPosition(o),to:o,after:l})}rowAdded(r,o,l,p){this.action("rowAdd",r,{data:o,pos:l,index:p})}rowDeleted(r){var o,l;this.table.options.groupBy?(o=(l=r.getComponent().getGroup().rows).indexOf(r))&&(o=l[o-1]):(o=r.table.rowManager.getRowIndex(r))&&(o=r.table.rowManager.rows[o-1]),this.action("rowDelete",r,{data:r.getData(),pos:!o,index:o})}cellUpdated(r){this.action("cellEdit",r,{oldValue:r.oldValue,newValue:r.value})}clear(){this.history=[],this.index=-1}action(r,o,l){this.history=this.history.slice(0,this.index+1),this.history.push({type:r,component:o,data:l}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(r){var o=this.history.findIndex(function(l){return l.component===r});o>-1&&(this.history.splice(o,1),o<=this.index&&this.index--,this.clearComponentHistory(r))}undo(){if(this.index>-1){let r=this.history[this.index];return f.undoers[r.type].call(this,r),this.index--,this.dispatchExternal("historyUndo",r.type,r.component.getComponent(),r.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let r=this.history[this.index];return f.redoers[r.type].call(this,r),this.dispatchExternal("historyRedo",r.type,r.component.getComponent(),r.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(r,o){this.history.forEach(function(l){if(l.component instanceof sl)l.component===r&&(l.component=o);else if(l.component instanceof Oh&&l.component.row===r){var p=l.component.column.getField();p&&(l.component=o.getCell(p))}})}}return f.moduleName="history",f.undoers=Kf,f.redoers=Uu,f})(),$f=(()=>{class f extends bo{constructor(r){super(r),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var r=this.table.originalElement,o=this.table.options,p=r.getElementsByTagName("th"),b=r.getElementsByTagName("tbody")[0],S=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),b=b?b.getElementsByTagName("tr"):[],this._extractOptions(r,o),p.length?this._extractHeaders(p,b):this._generateBlankHeaders(p,b);for(var I=0;I<b.length;I++){var $=b[I].getElementsByTagName("td"),de={};this.hasIndex||(de[o.index]=I);for(var Fe=0;Fe<$.length;Fe++)void 0!==this.fieldIndex[Fe]&&(de[this.fieldIndex[Fe]]=$[Fe].innerHTML);S.push(de)}o.data=S,this.dispatchExternal("htmlImported")}_extractOptions(r,o,l){var p=r.attributes,b=l?Object.assign([],l):Object.keys(o),S={};for(var I in b.forEach(de=>{S[de.toLowerCase()]=de}),p){var $,N=p[I];N&&"object"==typeof N&&N.name&&0===N.name.indexOf("tabulator-")&&($=N.name.replace("tabulator-",""),void 0!==S[$]&&(o[S[$]]=this._attribValue(N.value)))}}_attribValue(r){return"true"===r||"false"!==r&&r}_findCol(r){return this.table.options.columns.find(l=>l.title===r)||!1}_extractHeaders(r,o){for(var l=0;l<r.length;l++){var I,p=r[l],b=!1,S=this._findCol(p.textContent);S?b=!0:S={title:p.textContent.trim()},S.field||(S.field=p.textContent.trim().toLowerCase().replace(" ","_")),(I=p.getAttribute("width"))&&!S.width&&(S.width=I),this._extractOptions(p,S,qu.prototype.defaultOptionList),this.fieldIndex[l]=S.field,S.field==this.table.options.index&&(this.hasIndex=!0),b||this.table.options.columns.push(S)}}_generateBlankHeaders(r,o){for(var l=0;l<r.length;l++){var p=r[l],b={title:"",field:"col"+l};this.fieldIndex[l]=b.field;var S=p.getAttribute("width");S&&(b.width=S),this.table.options.columns.push(b)}}}return f.moduleName="htmlTableImport",f})(),Jf=(()=>{class f extends bo{constructor(r){super(r),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(r,o){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){r.preventDefault();try{if(document.selection)(l=document.body.createTextRange()).moveToElementText(this.element),l.select();else if(window.getSelection){var l;(l=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(l)}}catch(p){}}}initializeExternalEvents(){for(let r in this.eventMap)this.subscriptionChangeExternal(r,this.subscriptionChanged.bind(this,r))}subscriptionChanged(r,o){o?this.subscribers[r]||(this.eventMap[r].includes("-")?(this.subscribers[r]=this.handle.bind(this,r),this.subscribe(this.eventMap[r],this.subscribers[r])):this.subscribeTouchEvents(r)):this.eventMap[r].includes("-")?this.subscribers[r]&&!this.columnSubscribers[r]&&!this.subscribedExternal(r)&&(this.unsubscribe(this.eventMap[r],this.subscribers[r]),delete this.subscribers[r]):this.unsubscribeTouchEvents(r)}subscribeTouchEvents(r){var o=this.eventMap[r];this.touchSubscribers[o+"-touchstart"]||(this.touchSubscribers[o+"-touchstart"]=this.handleTouch.bind(this,o,"start"),this.touchSubscribers[o+"-touchend"]=this.handleTouch.bind(this,o,"end"),this.subscribe(o+"-touchstart",this.touchSubscribers[o+"-touchstart"]),this.subscribe(o+"-touchend",this.touchSubscribers[o+"-touchend"])),this.subscribers[r]=!0}unsubscribeTouchEvents(r){var o=!0,l=this.eventMap[r];if(this.subscribers[r]&&!this.subscribedExternal(r)){delete this.subscribers[r];for(let p in this.eventMap)this.eventMap[p]===l&&this.subscribers[p]&&(o=!1);o&&(this.unsubscribe(l+"-touchstart",this.touchSubscribers[l+"-touchstart"]),this.unsubscribe(l+"-touchend",this.touchSubscribers[l+"-touchend"]),delete this.touchSubscribers[l+"-touchstart"],delete this.touchSubscribers[l+"-touchend"])}}initializeColumn(r){var o=r.definition;for(let l in this.eventMap)o[l]&&(this.subscriptionChanged(l,!0),this.columnSubscribers[l]||(this.columnSubscribers[l]=[]),this.columnSubscribers[l].push(r))}handle(r,o,l){this.dispatchEvent(r,o,l)}handleTouch(r,o,l,p){var b=this.touchWatchers[r];switch("column"===r&&(r="header"),o){case"start":b.tap=!0,clearTimeout(b.tapHold),b.tapHold=setTimeout(()=>{clearTimeout(b.tapHold),b.tapHold=null,b.tap=null,clearTimeout(b.tapDbl),b.tapDbl=null,this.dispatchEvent(r+"TapHold",l,p)},1e3);break;case"end":b.tap&&(b.tap=null,this.dispatchEvent(r+"Tap",l,p)),b.tapDbl?(clearTimeout(b.tapDbl),b.tapDbl=null,this.dispatchEvent(r+"DblTap",l,p)):b.tapDbl=setTimeout(()=>{clearTimeout(b.tapDbl),b.tapDbl=null},300),clearTimeout(b.tapHold),b.tapHold=null}}dispatchEvent(r,o,l){var b,p=l.getComponent();this.columnSubscribers[r]&&(l instanceof Oh?b=l.column.definition[r]:l instanceof qu&&(b=l.definition[r]),b&&b(o,p)),this.dispatchExternal(r,o,p)}}return f.moduleName="interaction",f})();var Hm={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},$p={keyBlock:function(f){f.stopPropagation(),f.preventDefault()},scrollPageUp:function(f){var s=this.table.rowManager,r=s.scrollTop-s.element.clientHeight;f.preventDefault(),s.displayRowsCount&&(r>=0?s.element.scrollTop=r:s.scrollToRow(s.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(f){var s=this.table.rowManager,r=s.scrollTop+s.element.clientHeight,o=s.element.scrollHeight;f.preventDefault(),s.displayRowsCount&&(r<=o?s.element.scrollTop=r:s.scrollToRow(s.getDisplayRows()[s.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(f){var s=this.table.rowManager;f.preventDefault(),s.displayRowsCount&&s.scrollToRow(s.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(f){var s=this.table.rowManager;f.preventDefault(),s.displayRowsCount&&s.scrollToRow(s.getDisplayRows()[s.displayRowsCount-1]),this.table.element.focus()},navPrev:function(f){this.dispatch("keybinding-nav-prev",f)},navNext:function(f){this.dispatch("keybinding-nav-next",f)},navLeft:function(f){this.dispatch("keybinding-nav-left",f)},navRight:function(f){this.dispatch("keybinding-nav-right",f)},navUp:function(f){this.dispatch("keybinding-nav-up",f)},navDown:function(f){this.dispatch("keybinding-nav-down",f)},undo:function(f){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(f.preventDefault(),this.table.modules.history.undo()))},redo:function(f){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(f.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(f){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let Zf=(()=>{class f extends bo{constructor(r){super(r),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var r=this.table.options.keybindings,o={};if(this.watchKeys={},this.pressedKeys=[],!1!==r){for(let l in f.bindings)o[l]=f.bindings[l];if(Object.keys(r).length)for(let l in r)o[l]=r[l];this.mapBindings(o),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(r){for(let o in r)f.actions[o]?r[o]&&("object"!=typeof r[o]&&(r[o]=[r[o]]),r[o].forEach(l=>{this.mapBinding(o,l)})):console.warn("Key Binding Error - no such action:",o)}mapBinding(r,o){var l={action:f.actions[r],keys:[],ctrl:!1,shift:!1,meta:!1};o.toString().toLowerCase().split(" ").join("").split("+").forEach(b=>{switch(b){case"ctrl":l.ctrl=!0;break;case"shift":l.shift=!0;break;case"meta":l.meta=!0;break;default:b=parseInt(b),l.keys.push(b),this.watchKeys[b]||(this.watchKeys[b]=[]),this.watchKeys[b].push(l)}})}bindEvents(){var r=this;this.keyupBinding=function(o){var l=o.keyCode,p=r.watchKeys[l];p&&(r.pressedKeys.push(l),p.forEach(function(b){r.checkBinding(o,b)}))},this.keydownBinding=function(o){var l=o.keyCode;if(r.watchKeys[l]){var b=r.pressedKeys.indexOf(l);b>-1&&r.pressedKeys.splice(b,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(r,o){var l=!0;return r.ctrlKey==o.ctrl&&r.shiftKey==o.shift&&r.metaKey==o.meta&&(o.keys.forEach(p=>{-1==this.pressedKeys.indexOf(p)&&(l=!1)}),l&&o.action.call(this,r),!0)}}return f.moduleName="keybindings",f.bindings=Hm,f.actions=$p,f})(),Qf=(()=>{class f extends bo{constructor(r){super(r),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(r){(r.column.definition.contextMenu||r.column.definition.clickMenu)&&this.initializeCell(r)}initializeColumn(r){var o=r.definition;(o.headerContextMenu||o.headerClickMenu||o.headerMenu)&&this.initializeColumnHeader(r)}initializeColumnHeader(r){var o;r.definition.headerContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,r.definition.headerContextMenu)),this.tapHold(r,r.definition.headerContextMenu)),r.definition.headerMenu&&((o=document.createElement("span")).classList.add("tabulator-header-menu-button"),o.innerHTML="&vellip;",o.addEventListener("click",l=>{l.stopPropagation(),l.preventDefault(),this.LoadMenuEvent(r,r.definition.headerMenu,l)}),r.titleElement.insertBefore(o,r.titleElement.firstChild))}LoadMenuEvent(r,o,l){o="function"==typeof o?o.call(this.table,r.getComponent(),l):o,this.loadMenu(l,r,o)}tapHold(r,o){var l=r.getElement(),p=null,b=!1;l.addEventListener("touchstart",S=>{clearTimeout(p),b=!1,p=setTimeout(()=>{clearTimeout(p),p=null,b=!0,this.LoadMenuEvent(r,o,S)},1e3)},{passive:!0}),l.addEventListener("touchend",S=>{clearTimeout(p),p=null,b&&S.preventDefault()})}initializeCell(r){r.column.definition.contextMenu&&(r.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,r.column.definition.contextMenu)),this.tapHold(r,r.column.definition.contextMenu)),r.column.definition.clickMenu&&r.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,r,r.column.definition.clickMenu))}initializeRow(r){this.table.options.rowContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,this.table.options.rowContextMenu)),this.tapHold(r,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&r.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,r,this.table.options.rowClickMenu))}initializeGroup(r){this.table.options.groupContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,this.table.options.groupContextMenu)),this.tapHold(r,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&r.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,r,this.table.options.groupClickMenu))}loadMenu(r,o,l,p){var b=!(r instanceof MouseEvent),S=document.createElement("div");if(S.classList.add("tabulator-menu"),b||r.preventDefault(),l&&l.length){if(!p){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}l.forEach(I=>{var N=document.createElement("div"),$=I.label,de=I.disabled;I.separator?N.classList.add("tabulator-menu-separator"):(N.classList.add("tabulator-menu-item"),"function"==typeof $&&($=$.call(this.table,o.getComponent())),$ instanceof Node?N.appendChild($):N.innerHTML=$,"function"==typeof de&&(de=de.call(this.table,o.getComponent())),de?(N.classList.add("tabulator-menu-item-disabled"),N.addEventListener("click",Fe=>{Fe.stopPropagation()})):I.menu&&I.menu.length?N.addEventListener("click",Fe=>{Fe.stopPropagation(),this.hideOldSubMenus(S),this.loadMenu(Fe,o,I.menu,N)}):I.action&&N.addEventListener("click",Fe=>{I.action(Fe,o.getComponent())}),I.menu&&I.menu.length&&N.classList.add("tabulator-menu-item-submenu")),S.appendChild(N)}),S.addEventListener("click",I=>{this.hideMenu()}),this.menuElements.push(S),this.positionMenu(S,p,b,r)}}hideOldSubMenus(r){var o=this.menuElements.indexOf(r);if(o>-1)for(let p=this.menuElements.length-1;p>o;p--){var l=this.menuElements[p];l.parentNode&&l.parentNode.removeChild(l),this.menuElements.pop()}}positionMenu(r,o,l,p){var S,I,N,b=Math.max(document.body.offsetHeight,window.innerHeight);o?(S=(N=Ns.elOffset(o)).left+o.offsetWidth,I=N.top-1):(S=l?p.touches[0].pageX:p.pageX,I=l?p.touches[0].pageY:p.pageY,this.positionReversedX=!1),r.style.top=I+"px",r.style.left=S+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(r),I+r.offsetHeight>=b&&(r.style.top="",r.style.bottom=o?b-N.top-o.offsetHeight-1+"px":b-I+"px"),(S+r.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(r.style.left="",r.style.right=o?document.documentElement.offsetWidth-N.left+"px":document.documentElement.offsetWidth-S+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(r){27==r.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(r=>{r.parentNode&&r.parentNode.removeChild(r)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return f.moduleName="menu",f})(),qf=(()=>{class f extends bo{constructor(r){super(r),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var r=document.createElement("div");return r.classList.add("tabulator-col"),r.classList.add("tabulator-col-placeholder"),r}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(r){var p,o=this,l={};r.modules.frozen||(p=r.getElement(),l.mousemove=function(b){r.parent===o.moving.parent&&((o.touchMove?b.touches[0].pageX:b.pageX)-Ns.elOffset(p).left+o.table.columnManager.element.scrollLeft>r.getWidth()/2?(o.toCol!==r||!o.toColAfter)&&(p.parentNode.insertBefore(o.placeholderElement,p.nextSibling),o.moveColumn(r,!0)):(o.toCol!==r||o.toColAfter)&&(p.parentNode.insertBefore(o.placeholderElement,p),o.moveColumn(r,!1)))}.bind(o),p.addEventListener("mousedown",function(b){o.touchMove=!1,1===b.which&&(o.checkTimeout=setTimeout(function(){o.startMove(b,r)},o.checkPeriod))}),p.addEventListener("mouseup",function(b){1===b.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),o.bindTouchEvents(r)),r.modules.moveColumn=l}bindTouchEvents(r){var p,b,S,I,N,$,o=r.getElement(),l=!1;o.addEventListener("touchstart",de=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,p=r.nextColumn(),S=p?p.getWidth()/2:0,b=r.prevColumn(),I=b?b.getWidth()/2:0,N=0,$=0,l=!1,this.startMove(de,r)},this.checkPeriod)},{passive:!0}),o.addEventListener("touchmove",de=>{var Fe,qe;this.moving&&(this.moveHover(de),l||(l=de.touches[0].pageX),(Fe=de.touches[0].pageX-l)>0?p&&Fe-N>S&&(qe=p)!==r&&(l=de.touches[0].pageX,qe.getElement().parentNode.insertBefore(this.placeholderElement,qe.getElement().nextSibling),this.moveColumn(qe,!0)):b&&-Fe-$>I&&(qe=b)!==r&&(l=de.touches[0].pageX,qe.getElement().parentNode.insertBefore(this.placeholderElement,qe.getElement()),this.moveColumn(qe,!1)),qe&&(p=qe.nextColumn(),N=S,S=p?p.getWidth()/2:0,b=qe.prevColumn(),$=I,I=b?b.getWidth()/2:0))},{passive:!0}),o.addEventListener("touchend",de=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(de)})}startMove(r,o){var l=o.getElement(),p=this.table.columnManager.getElement(),b=this.table.columnManager.getHeadersElement();this.moving=o,this.startX=(this.touchMove?r.touches[0].pageX:r.pageX)-Ns.elOffset(l).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=o.getWidth()+"px",this.placeholderElement.style.height=o.getHeight()+"px",l.parentNode.insertBefore(this.placeholderElement,l),l.parentNode.removeChild(l),this.hoverElement=l.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=p.clientHeight-b.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(r)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(r){r.modules.moveColumn.mousemove&&r.getElement().addEventListener("mousemove",r.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(r){r.modules.moveColumn.mousemove&&r.getElement().removeEventListener("mousemove",r.modules.moveColumn.mousemove)})}moveColumn(r,o){var l=this.moving.getCells();this.toCol=r,this.toColAfter=o,o?r.getCells().forEach(function(p,b){var S=p.getElement(!0);S.parentNode&&l[b]&&S.parentNode.insertBefore(l[b].getElement(),S.nextSibling)}):r.getCells().forEach(function(p,b){var S=p.getElement(!0);S.parentNode&&l[b]&&S.parentNode.insertBefore(l[b].getElement(),S)})}endMove(r){(1===r.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(r){var b,o=this.table.columnManager.getElement(),l=o.scrollLeft,p=(this.touchMove?r.touches[0].pageX:r.pageX)-Ns.elOffset(o).left+l;this.hoverElement.style.left=p-this.startX+"px",p-l<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{b=Math.max(0,l-5),this.table.rowManager.getElement().scrollLeft=b,this.autoScrollTimeout=!1},1))),l+o.clientWidth-p<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{b=Math.min(o.clientWidth,l+5),this.table.rowManager.getElement().scrollLeft=b,this.autoScrollTimeout=!1},1)))}}return f.moduleName="moveColumn",f})();class ih extends bo{constructor(s){super(s),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var s=document.createElement("div");return s.classList.add("tabulator-row"),s.classList.add("tabulator-row-placeholder"),s}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(s){var r=this,o={};o.mouseup=function(l){r.tableRowDrop(l,row)}.bind(r),o.mousemove=function(l){if(l.pageY-Ns.elOffset(s.element).top+r.table.rowManager.element.scrollTop>s.getHeight()/2)r.toRow===s&&r.toRowAfter||((p=s.getElement()).parentNode.insertBefore(r.placeholderElement,p.nextSibling),r.moveRow(s,!0));else if(r.toRow!==s||r.toRowAfter){var p;(p=s.getElement()).previousSibling&&(p.parentNode.insertBefore(r.placeholderElement,p),r.moveRow(s,!1))}}.bind(r),s.modules.moveRow=o}initializeRow(s){var l,r=this,o={};o.mouseup=function(p){r.tableRowDrop(p,s)}.bind(r),o.mousemove=function(p){var b=s.getElement();p.pageY-Ns.elOffset(b).top+r.table.rowManager.element.scrollTop>s.getHeight()/2?(r.toRow!==s||!r.toRowAfter)&&(b.parentNode.insertBefore(r.placeholderElement,b.nextSibling),r.moveRow(s,!0)):(r.toRow!==s||r.toRowAfter)&&(b.parentNode.insertBefore(r.placeholderElement,b),r.moveRow(s,!1))}.bind(r),this.hasHandle||((l=s.getElement()).addEventListener("mousedown",function(p){1===p.which&&(r.checkTimeout=setTimeout(function(){r.startMove(p,s)},r.checkPeriod))}),l.addEventListener("mouseup",function(p){1===p.which&&r.checkTimeout&&clearTimeout(r.checkTimeout)}),this.bindTouchEvents(s,s.getElement())),s.modules.moveRow=o}initializeColumn(s){s.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(s){if(s.column.definition.rowHandle&&!1!==this.table.options.movableRows){var r=this,o=s.getElement(!0);o.addEventListener("mousedown",function(l){1===l.which&&(r.checkTimeout=setTimeout(function(){r.startMove(l,s.row)},r.checkPeriod))}),o.addEventListener("mouseup",function(l){1===l.which&&r.checkTimeout&&clearTimeout(r.checkTimeout)}),this.bindTouchEvents(s.row,o)}}bindTouchEvents(s,r){var l,p,b,S,I,N,o=!1;r.addEventListener("touchstart",$=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,l=s.nextRow(),b=l?l.getHeight()/2:0,p=s.prevRow(),S=p?p.getHeight()/2:0,I=0,N=0,o=!1,this.startMove($,s)},this.checkPeriod)},{passive:!0}),r.addEventListener("touchmove",$=>{var de,Fe;this.moving&&($.preventDefault(),this.moveHover($),o||(o=$.touches[0].pageY),(de=$.touches[0].pageY-o)>0?l&&de-I>b&&(Fe=l)!==s&&(o=$.touches[0].pageY,Fe.getElement().parentNode.insertBefore(this.placeholderElement,Fe.getElement().nextSibling),this.moveRow(Fe,!0)):p&&-de-N>S&&(Fe=p)!==s&&(o=$.touches[0].pageY,Fe.getElement().parentNode.insertBefore(this.placeholderElement,Fe.getElement()),this.moveRow(Fe,!1)),Fe&&(l=Fe.nextRow(),I=b,b=l?l.getHeight()/2:0,p=Fe.prevRow(),N=S,S=p?p.getHeight()/2:0))}),r.addEventListener("touchend",$=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove($),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(s=>{("row"===s.type||"group"===s.type)&&s.modules.moveRow&&s.modules.moveRow.mousemove&&s.getElement().addEventListener("mousemove",s.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(s=>{("row"===s.type||"group"===s.type)&&s.modules.moveRow&&s.modules.moveRow.mousemove&&s.getElement().removeEventListener("mousemove",s.modules.moveRow.mousemove)})}startMove(s,r){var o=r.getElement();this.setStartPosition(s,r),this.moving=r,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=r.getWidth()+"px",this.placeholderElement.style.height=r.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(r)):(o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o)),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(s)}setStartPosition(s,r){var p,b,o=this.touchMove?s.touches[0].pageX:s.pageX,l=this.touchMove?s.touches[0].pageY:s.pageY;p=r.getElement(),this.connection?(b=p.getBoundingClientRect(),this.startX=b.left-o+window.pageXOffset,this.startY=b.top-l+window.pageYOffset):this.startY=l-p.getBoundingClientRect().top}endMove(s){(!s||1===s.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(s,r){this.toRow=s,this.toRowAfter=r}moveHover(s){this.connection?this.moveHoverConnections.call(this,s):this.moveHoverTable.call(this,s)}moveHoverTable(s){var r=this.table.rowManager.getElement(),o=r.scrollTop,l=(this.touchMove?s.touches[0].pageY:s.pageY)-r.getBoundingClientRect().top+o;this.hoverElement.style.top=l-this.startY+"px"}moveHoverConnections(s){this.hoverElement.style.left=this.startX+(this.touchMove?s.touches[0].pageX:s.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?s.touches[0].pageY:s.pageY)+"px"}elementRowDrop(s,r,o){this.dispatchExternal("movableRowsElementDrop",s,r,!!o&&o.getComponent())}connectToTables(s){var r;this.connectionSelectorsTables&&(r=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",r),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:s})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(o=>{"string"==typeof o?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(o))):this.connectionElements.push(o)}),this.connectionElements.forEach(o=>{var l=p=>{this.elementRowDrop(p,o,this.moving)};o.addEventListener("mouseup",l),o.tabulatorElementDropEvent=l,o.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var s;this.connectionSelectorsTables&&(s=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",s),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(r=>{r.classList.remove("tabulator-movingrow-receiving"),r.removeEventListener("mouseup",r.tabulatorElementDropEvent),delete r.tabulatorElementDropEvent})}connect(s,r){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=s,this.connectedRow=r,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&o.modules.moveRow&&o.modules.moveRow.mouseup&&o.getElement().addEventListener("mouseup",o.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",r,s),!0)}disconnect(s){s===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(r=>{"row"===r.type&&r.modules.moveRow&&r.modules.moveRow.mouseup&&r.getElement().removeEventListener("mouseup",r.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",s)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(s,r,o){var l=!1;if(o){switch(typeof this.table.options.movableRowsSender){case"string":l=this.senders[this.table.options.movableRowsSender];break;case"function":l=this.table.options.movableRowsSender}l?l.call(this,this.moving.getComponent(),r?r.getComponent():void 0,s):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),r?r.getComponent():void 0,s)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),r?r.getComponent():void 0,s);this.endMove()}tableRowDrop(s,r){var o=!1,l=!1;switch(s.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver}o?l=o.call(this,this.connectedRow.getComponent(),r?r.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(l?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),r?r.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:r,success:l})}commsReceived(s,r,o){switch(r){case"connect":return this.connect(s,o.row);case"disconnect":return this.disconnect(s);case"dropcomplete":return this.dropComplete(s,o.row,o.success)}}}ih.prototype.receivers={insert:function(f,s,r){return this.table.addRow(f.getData(),void 0,s),!0},add:function(f,s,r){return this.table.addRow(f.getData()),!0},update:function(f,s,r){return!!s&&(s.update(f.getData()),!0)},replace:function(f,s,r){return!!s&&(this.table.addRow(f.getData(),void 0,s),s.delete(),!0)}},ih.prototype.senders={delete:function(f,s,r){f.delete()}},ih.moduleName="moveRow";var eg={};let tg=(()=>{class f extends bo{constructor(r){super(r),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(r,o,l){return this.transformRow(o,"data",l)}initializeColumn(r){var o=!1,l={};this.allowedTypes.forEach(p=>{var S,b="mutator"+(p.charAt(0).toUpperCase()+p.slice(1));r.definition[b]&&(S=this.lookupMutator(r.definition[b]))&&(o=!0,l[b]={mutator:S,params:r.definition[b+"Params"]||{}})}),o&&(r.modules.mutate=l)}lookupMutator(r){var o=!1;switch(typeof r){case"string":f.mutators[r]?o=f.mutators[r]:console.warn("Mutator Error - No such mutator found, ignoring: ",r);break;case"function":o=r}return o}transformRow(r,o,l){var b,p="mutator"+(o.charAt(0).toUpperCase()+o.slice(1));return this.enabled&&this.table.columnManager.traverse(S=>{var I,N,$;S.modules.mutate&&(I=S.modules.mutate[p]||S.modules.mutate.mutator||!1)&&(b=S.getFieldValue(void 0!==l?l:r),("data"==o||void 0!==b)&&($=S.getComponent(),N="function"==typeof I.params?I.params(b,r,o,$):I.params,S.setFieldValue(r,I.mutator(b,r,o,N,$))))}),r}transformCell(r,o){if(r.column.modules.mutate){var l=r.column.modules.mutate.mutatorEdit||r.column.modules.mutate.mutator||!1,p={};if(l)return p=Object.assign(p,r.row.getData()),r.column.setFieldValue(p,o),l.mutator(o,p,"edit",l.params,r.getComponent())}return o}enable(){this.enabled=!0}disable(){this.enabled=!1}}return f.moduleName="mutator",f.mutators=eg,f})(),Bh=(()=>{class f extends bo{constructor(r){super(r),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(r,o){var b,l=this.table.rowManager,p=l.getDisplayRows();return o?p.length?b=p[0]:l.activeRows.length&&(b=l.activeRows[l.activeRows.length-1],o=!1):p.length&&(b=p[p.length-1],o=!(p.length<this.size)),{index:b,top:o}}calculatePageSizes(){var r,o;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((r=document.createElement("div")).classList.add("tabulator-row"),r.style.visibility="hidden",(o=document.createElement("div")).classList.add("tabulator-cell"),o.innerHTML="Page Row Test",r.appendChild(o),this.table.rowManager.getTableElement().appendChild(r),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/r.offsetHeight),this.table.rowManager.getTableElement().removeChild(r)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(r,o,l,p){return this.initialLoad||(this.progressiveLoad&&!l||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),p.page=this.page,this.size&&(p.size=this.size),p}userSetPageToRow(r){return this.table.options.pagination&&(r=this.rowManager.findRow(r))?this.setPageToRow(r):Promise.reject()}userSetPageSize(r){return!!this.table.options.pagination&&(this.setPageSize(r),this.setPage(1))}scrollVertical(r,o){var l;!o&&!this.table.dataLoader.loading&&(l=this.table.rowManager.getElement()).scrollHeight-l.clientHeight-r<(this.table.options.progressiveLoadScrollMargin||2*l.clientHeight)&&this.nextPage()}restOnRenderBefore(r,o){return o||"local"===this.mode&&this.reset(),r}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var r;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(r=document.createElement("button")).classList.add("tabulator-page"),r.setAttribute("type","button"),r.setAttribute("role","button"),r.setAttribute("aria-label",""),r.setAttribute("title",""),this.firstBut=r.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=r.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=r.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=r.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var r=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=r=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&r.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){r=[];for(let o=1;o<5;o++)r.push(this.size*o);this.pageSizes=r}else r=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);r.forEach(o=>{var l=document.createElement("option");l.value=o,!0===o?this.langBind("pagination|all",function(p){l.innerHTML=p}):l.innerHTML=o,this.pageSizeSelect.appendChild(l)}),this.pageSizeSelect.value=this.size}}initializePaginator(r){var o;r||(this.langBind("pagination|first",l=>{this.firstBut.innerHTML=l}),this.langBind("pagination|first_title",l=>{this.firstBut.setAttribute("aria-label",l),this.firstBut.setAttribute("title",l)}),this.langBind("pagination|prev",l=>{this.prevBut.innerHTML=l}),this.langBind("pagination|prev_title",l=>{this.prevBut.setAttribute("aria-label",l),this.prevBut.setAttribute("title",l)}),this.langBind("pagination|next",l=>{this.nextBut.innerHTML=l}),this.langBind("pagination|next_title",l=>{this.nextBut.setAttribute("aria-label",l),this.nextBut.setAttribute("title",l)}),this.langBind("pagination|last",l=>{this.lastBut.innerHTML=l}),this.langBind("pagination|last_title",l=>{this.lastBut.setAttribute("aria-label",l),this.lastBut.setAttribute("title",l)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(o=document.createElement("label"),this.langBind("pagination|page_size",l=>{this.pageSizeSelect.setAttribute("aria-label",l),this.pageSizeSelect.setAttribute("title",l),o.innerHTML=l}),this.element.appendChild(o),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",l=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!r&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(r){this.initializePaginator(!0),this.mode="progressive_"+r,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}setMaxRows(r){this.max=r?!0===this.size?1:Math.ceil(r/this.size):1,this.page>this.max&&(this.page=this.max)}reset(r){this.initialLoad||("local"==this.mode||r)&&(this.page=1)}setMaxPage(r){r=parseInt(r),this.max=r||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(r){switch(r){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(r=parseInt(r))>0&&r<=this.max||"local"!==this.mode?(this.page=r,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",r),Promise.reject())}setPageToRow(r){var l=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(r);if(l>-1){var p=!0===this.size?1:Math.ceil((l+1)/this.size);return this.setPage(p)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(r){!0!==r&&(r=parseInt(r)),r>0&&(this.size=r),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let r=Math.floor((this.count-1)/2),o=Math.ceil((this.count-1)/2),l=this.max-this.page+r+1<this.count?this.max-this.count+1:Math.max(this.page-r,1),p=this.page<=o?Math.min(this.count,this.max):Math.min(this.page+o,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let b=l;b<=p;b++)b>0&&b<=this.max&&this.pagesElement.appendChild(this._generatePageButton(b));this.footerRedraw()}_generatePageButton(r){var o=document.createElement("button");return o.classList.add("tabulator-page"),r==this.page&&o.classList.add("active"),o.setAttribute("type","button"),o.setAttribute("role","button"),this.langBind("pagination|page_title",l=>{o.setAttribute("aria-label",l+" "+r),o.setAttribute("title",l+" "+r)}),o.setAttribute("data-page",r),o.textContent=r,o.addEventListener("click",l=>{this.setPage(r)}),o}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(r){return this.size}getMode(){return this.mode}getRows(r){var o,l,p;if("local"==this.mode){o=[],this.setMaxRows(r.length),!0===this.size?(l=0,p=r.length):p=(l=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let b=l;b<p;b++)r[b]&&o.push(r[b]);return o}return this._setPageButtons(),r.slice(0)}trigger(){var r;switch(this.mode){case"local":return r=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(r),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(r){if(void 0===r.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),r.data){if(this.max=parseInt(r.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(r.data,!1,1==this.page):this.table.rowManager.addRows(r.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":r=this.table.rowManager.getData().concat(r.data),this.table.rowManager.setData(r,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return r.data}footerRedraw(){var r=this.table.footerManager.element;Math.ceil(r.clientWidth)-r.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(r.clientWidth)-r.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return f.moduleName="page",f})();var dp={local:function(f,s){var r=localStorage.getItem(f+"-"+s);return!!r&&JSON.parse(r)},cookie:function(f,s){var p,b,r=document.cookie,o=f+"-"+s,l=r.indexOf(o+"=");return l>-1&&((p=(r=r.substr(l)).indexOf(";"))>-1&&(r=r.substr(0,p)),b=r.replace(o+"=","")),!!b&&JSON.parse(b)}},ig={local:function(f,s,r){localStorage.setItem(f+"-"+s,JSON.stringify(r))},cookie:function(f,s,r){var o=new Date;o.setDate(o.getDate()+1e4),document.cookie=f+"-"+s+"="+JSON.stringify(r)+"; expires="+o.toUTCString()}};let hp=(()=>{class f extends bo{constructor(r){super(r),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var r="_tabulator_test";try{return window.localStorage.setItem(r,r),window.localStorage.removeItem(r),!0}catch(o){return!1}}initialize(){if(this.table.options.persistence){var l,r=this.table.options.persistenceMode,o=this.table.options.persistenceID;this.mode=!0!==r?r:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:f.readers[this.table.options.persistenceReaderFunc]?this.readFunc=f.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):f.readers[this.mode]?this.readFunc=f.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:f.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=f.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):f.writers[this.mode]?this.writeFunc=f.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(o||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(l=this.retreiveData("page"))&&(void 0!==l.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=l.paginationSize),void 0!==l.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=l.paginationInitialPage)),this.config.group&&(l=this.retreiveData("group"))&&(void 0!==l.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=l.groupBy),void 0!==l.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=l.groupStartOpen),void 0!==l.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=l.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(r){this.config[r]&&this.save(r)}tableBuilt(){var o,l;this.config.sort&&(o=this.load("sort"))&&(this.table.initialSort=o),this.config.filter&&(l=this.load("filter"))&&(this.table.initialFilter=l)}tableRedraw(r){r&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(r){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,r)),!0}initializeColumn(r){var o;this.config.columns&&(this.defWatcherBlock=!0,o=r.getDefinition(),(!0===this.config.columns?Object.keys(o):this.config.columns).forEach(p=>{var b=Object.getOwnPropertyDescriptor(o,p),S=o[p];b&&Object.defineProperty(o,p,{set:function(I){S=I,this.defWatcherBlock||this.save("columns"),b.set&&b.set(I)},get:function(){return b.get&&b.get(),S}})}),this.defWatcherBlock=!1)}load(r,o){var l=this.retreiveData(r);return o&&(l=l?this.mergeDefinition(o,l):o),l}retreiveData(r){return!!this.readFunc&&this.readFunc(this.id,r)}mergeDefinition(r,o){var l=[];return(o=o||[]).forEach((p,b)=>{var I,S=this._findColumn(r,p);S&&(!0===this.config.columns||null==this.config.columns?(I=Object.keys(S)).push("width"):I=this.config.columns,I.forEach(N=>{"columns"!==N&&void 0!==p[N]&&(S[N]=p[N])}),S.columns&&(S.columns=this.mergeDefinition(S.columns,p.columns)),l.push(S))}),r.forEach((p,b)=>{this._findColumn(o,p)||(l.length>b?l.splice(b,0,p):l.push(p))}),l}_findColumn(r,o){var l=o.columns?"group":o.field?"field":"object";return r.find(function(p){switch(l){case"group":return p.title===o.title&&p.columns.length===o.columns.length;case"field":return p.field===o.field;case"object":return p===o}})}save(r){var o={};switch(r){case"columns":o=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":o=this.table.modules.filter.getFilters();break;case"sort":o=this.validateSorters(this.table.modules.sort.getSort());break;case"group":o=this.getGroupConfig();break;case"page":o=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,r,o)}validateSorters(r){return r.forEach(function(o){o.column=o.field,delete o.field}),r}getGroupConfig(){var r={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(r.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(r.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(r.groupHeader=this.table.options.groupHeader)),r}getPageConfig(){var r={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(r.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(r.paginationInitialPage=this.table.modules.page.getPage())),r}parseColumns(r){var o=[],l=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return r.forEach(p=>{var I,b={},S=p.getDefinition();p.isGroup?(b.title=S.title,b.columns=this.parseColumns(p.getColumns())):(b.field=p.getField(),!0===this.config.columns||null==this.config.columns?(I=Object.keys(S)).push("width"):I=this.config.columns,I.forEach(N=>{switch(N){case"width":b.width=p.getWidth();break;case"visible":b.visible=p.visible;break;default:"function"!=typeof S[N]&&-1===l.indexOf(N)&&(b[N]=S[N])}})),o.push(b)}),o}}return f.moduleName="persistence",f.readers=dp,f.writers=ig,f})(),pp=(()=>{class f extends bo{constructor(r){super(r),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(r,o,l){var $,de,p=window.scrollX,b=window.scrollY,S=document.createElement("div"),I=document.createElement("div"),N=this.table.modules.export.genereateTable(void 0!==l?l:this.table.options.printConfig,void 0!==o?o:this.table.options.printStyled,r||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(S.classList.add("tabulator-print-header"),"string"==typeof($="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?S.innerHTML=$:S.appendChild($),this.element.appendChild(S)),this.element.appendChild(N),this.table.options.printFooter&&(I.classList.add("tabulator-print-footer"),"string"==typeof(de="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?I.innerHTML=de:I.appendChild(de),this.element.appendChild(I)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,N),window.print(),this.cleanup(),window.scrollTo(p,b),this.manualBlock=!1}}return f.moduleName="print",f})(),Jp=(()=>{class f extends bo{constructor(r){super(r),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(r){var l,o=this;this.currentVersion++,l=this.currentVersion,this.unwatchData(),this.data=r,this.origFuncs.push=r.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var p=Array.from(arguments);return!o.blocked&&l===o.currentVersion&&p.forEach(b=>{o.table.rowManager.addRowActual(b,!1)}),o.origFuncs.push.apply(r,arguments)}}),this.origFuncs.unshift=r.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var p=Array.from(arguments);return!o.blocked&&l===o.currentVersion&&p.forEach(b=>{o.table.rowManager.addRowActual(b,!0)}),o.origFuncs.unshift.apply(r,arguments)}}),this.origFuncs.shift=r.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var p;return!o.blocked&&l===o.currentVersion&&o.data.length&&(p=o.table.rowManager.getRowFromDataObject(o.data[0]))&&p.deleteActual(),o.origFuncs.shift.call(r)}}),this.origFuncs.pop=r.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var p;return!o.blocked&&l===o.currentVersion&&o.data.length&&(p=o.table.rowManager.getRowFromDataObject(o.data[o.data.length-1]))&&p.deleteActual(),o.origFuncs.pop.call(r)}}),this.origFuncs.splice=r.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var N,p=Array.from(arguments),b=p[0]<0?r.length+p[0]:p[0],S=p[1],I=!!p[2]&&p.slice(2);if(!o.blocked&&l===o.currentVersion){if(I&&((N=!!r[b]&&o.table.rowManager.getRowFromDataObject(r[b]))?I.forEach(de=>{o.table.rowManager.addRowActual(de,!0,N,!0)}):(I=I.slice().reverse()).forEach(de=>{o.table.rowManager.addRowActual(de,!0,!1,!0)})),0!==S){var $=r.slice(b,void 0===p[1]?p[1]:b+S);$.forEach((de,Fe)=>{var qe=o.table.rowManager.getRowFromDataObject(de);qe&&qe.deleteActual(Fe!==$.length-1)})}(I||0!==S)&&o.table.rowManager.reRenderInPosition()}return o.origFuncs.splice.apply(r,arguments)}})}unwatchData(){if(!1!==this.data)for(var r in this.origFuncs)Object.defineProperty(this.data,r,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(r){var o=r.getData();for(var l in this.blocked=!0,o)this.watchKey(r,o,l);this.table.options.dataTree&&this.watchTreeChildren(r),this.blocked=!1}watchTreeChildren(r){var o=r.getData()[this.table.options.dataTreeChildField],l={};function p(){this.table.modules.dataTree.initializeRow(r),this.table.modules.dataTree.layoutRow(r),this.table.rowManager.refreshActiveData("tree",!1,!0)}o&&(l.push=o.push,Object.defineProperty(o,"push",{enumerable:!1,configurable:!0,value:()=>{var b=l.push.apply(o,arguments);return p(),b}}),l.unshift=o.unshift,Object.defineProperty(o,"unshift",{enumerable:!1,configurable:!0,value:()=>{var b=l.unshift.apply(o,arguments);return p(),b}}),l.shift=o.shift,Object.defineProperty(o,"shift",{enumerable:!1,configurable:!0,value:()=>{var b=l.shift.call(o);return p(),b}}),l.pop=o.pop,Object.defineProperty(o,"pop",{enumerable:!1,configurable:!0,value:()=>{var b=l.pop.call(o);return p(),b}}),l.splice=o.splice,Object.defineProperty(o,"splice",{enumerable:!1,configurable:!0,value:()=>{var b=l.splice.apply(o,arguments);return p(),b}}))}watchKey(r,o,l){var p=Object.getOwnPropertyDescriptor(o,l),b=o[l],S=this.currentVersion;Object.defineProperty(o,l,{set:I=>{if(b=I,!this.blocked&&S===this.currentVersion){var N={};N[l]=I,r.updateData(N)}p.set&&p.set(I)},get:()=>(p.get&&p.get(),b)})}unwatchRow(r){var o=r.getData();for(var l in o)Object.defineProperty(o,l,{value:o[l]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return f.moduleName="reactiveData",f})(),ng=(()=>{class f extends bo{constructor(r){super(r),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(r){"row"===r.row.type&&this.initializeColumn("cell",r.column,r.element)}layoutColumnHeader(r){this.initializeColumn("header",r,r.element)}initializeColumn(r,o,l){var p=this,S=o.definition.resizable;if("header"===r&&(o.modules.resize={variableHeight:"textarea"==o.definition.formatter||o.definition.variableHeight}),!0===S||S==r){var I=document.createElement("div");I.className="tabulator-col-resize-handle";var N=document.createElement("div");N.className="tabulator-col-resize-handle prev",I.addEventListener("click",function(Fe){Fe.stopPropagation()});var $=function(Fe){var qe=o.getLastColumn();qe&&p._checkResizability(qe)&&(p.startColumn=o,p._mouseDown(Fe,qe,I))};I.addEventListener("mousedown",$),I.addEventListener("touchstart",$,{passive:!0}),I.addEventListener("dblclick",function(Fe){var qe=o.getLastColumn();qe&&p._checkResizability(qe)&&(Fe.stopPropagation(),qe.reinitializeWidth(!0))}),N.addEventListener("click",function(Fe){Fe.stopPropagation()});var de=function(Fe){var qe,Et,xt;(qe=o.getFirstColumn())&&(xt=(Et=p.table.columnManager.findColumnIndex(qe))>0&&p.table.columnManager.getColumnByIndex(Et-1))&&p._checkResizability(xt)&&(p.startColumn=o,p._mouseDown(Fe,xt,N))};N.addEventListener("mousedown",de),N.addEventListener("touchstart",de,{passive:!0}),N.addEventListener("dblclick",function(Fe){var qe,Et,xt;(qe=o.getFirstColumn())&&(xt=(Et=p.table.columnManager.findColumnIndex(qe))>0&&p.table.columnManager.getColumnByIndex(Et-1))&&p._checkResizability(xt)&&(Fe.stopPropagation(),xt.reinitializeWidth(!0))}),l.appendChild(I),l.appendChild(N)}}_checkResizability(r){return r.definition.resizable}_mouseDown(r,o,l){var p=this;function b(I){o.setWidth(p.table.rtl?p.startWidth-((void 0===I.screenX?I.touches[0].screenX:I.screenX)-p.startX):p.startWidth+((void 0===I.screenX?I.touches[0].screenX:I.screenX)-p.startX)),p.table.columnManager.renderer.rerenderColumns(!0),!p.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights()}function S(I){p.startColumn.modules.edit&&(p.startColumn.modules.edit.blocked=!1),p.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights(),document.body.removeEventListener("mouseup",S),document.body.removeEventListener("mousemove",b),l.removeEventListener("touchmove",b),l.removeEventListener("touchend",S),p.table.element.classList.remove("tabulator-block-select"),p.dispatch("column-resized",o),p.table.externalEvents.dispatch("columnResized",o.getComponent())}p.table.element.classList.add("tabulator-block-select"),r.stopPropagation(),p.startColumn.modules.edit&&(p.startColumn.modules.edit.blocked=!0),p.startX=void 0===r.screenX?r.touches[0].screenX:r.screenX,p.startWidth=o.getWidth(),document.body.addEventListener("mousemove",b),document.body.addEventListener("mouseup",S),l.addEventListener("touchmove",b,{passive:!0}),l.addEventListener("touchend",S)}}return f.moduleName="resizeColumns",f})(),rg=(()=>{class f extends bo{constructor(r){super(r),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(r){var o=this,l=r.getElement(),p=document.createElement("div");p.className="tabulator-row-resize-handle";var b=document.createElement("div");b.className="tabulator-row-resize-handle prev",p.addEventListener("click",function(N){N.stopPropagation()});var S=function(N){o.startRow=r,o._mouseDown(N,r,p)};p.addEventListener("mousedown",S),p.addEventListener("touchstart",S,{passive:!0}),b.addEventListener("click",function(N){N.stopPropagation()});var I=function(N){var $=o.table.rowManager.prevDisplayRow(r);$&&(o.startRow=$,o._mouseDown(N,$,b))};b.addEventListener("mousedown",I),b.addEventListener("touchstart",I,{passive:!0}),l.appendChild(p),l.appendChild(b)}_mouseDown(r,o,l){var p=this;function b(I){o.setHeight(p.startHeight+((void 0===I.screenY?I.touches[0].screenY:I.screenY)-p.startY))}function S(I){document.body.removeEventListener("mouseup",b),document.body.removeEventListener("mousemove",b),l.removeEventListener("touchmove",b),l.removeEventListener("touchend",S),p.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",o.getComponent())}p.table.element.classList.add("tabulator-block-select"),r.stopPropagation(),p.startY=void 0===r.screenY?r.touches[0].screenY:r.screenY,p.startHeight=o.getHeight(),document.body.addEventListener("mousemove",b),document.body.addEventListener("mouseup",S),l.addEventListener("touchmove",b,{passive:!0}),l.addEventListener("touchend",S)}}return f.moduleName="resizeRows",f})(),fp=(()=>{class f extends bo{constructor(r){super(r),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var o,r=this.table;this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===r.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(l=>{if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var p=Math.floor(l[0].contentRect.height),b=Math.floor(l[0].contentRect.width);(this.tableHeight!=p||this.tableWidth!=b)&&(this.tableHeight=p,this.tableWidth=b,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),r.redraw())}}),this.observer.observe(r.element),o=window.getComputedStyle(r.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(o.getPropertyValue("max-height")||o.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(l=>{if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var p=Math.floor(l[0].contentRect.height),b=Math.floor(l[0].contentRect.width);(this.containerHeight!=p||this.containerWidth!=b)&&(this.containerHeight=p,this.containerWidth=b,this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth),r.columnManager.renderer.rerenderColumns(!0),r.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell)&&(r.columnManager.renderer.rerenderColumns(!0),r.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return f.moduleName="resizeTable",f})(),Vm=(()=>{class f extends bo{constructor(r){super(r),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(r){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(r||this.update())}initializeResponsivity(){var r=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(o,l){o.modules.responsive&&o.modules.responsive.order&&o.modules.responsive.visible&&(o.modules.responsive.index=l,r.push(o),!o.visible&&"collapse"===self.mode&&self.hiddenColumns.push(o))}),r=(r=r.reverse()).sort(function(o,l){return l.modules.responsive.order-o.modules.responsive.order||l.modules.responsive.index-o.modules.responsive.index}),this.columns=r,"collapse"===this.mode&&this.generateCollapsedContent();for(let o of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==o.definition.formatter){this.collapseHandleColumn=o;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(r){var o=r.getDefinition();r.modules.responsive={order:void 0===o.responsive?1:o.responsive,visible:!1!==o.visible}}initializeRow(r){var o;"calc"!==r.type&&((o=document.createElement("div")).classList.add("tabulator-responsive-collapse"),r.modules.responsiveLayout={element:o,open:this.collapseStartOpen},this.collapseStartOpen||(o.style.display="none"))}layoutRow(r){var o=r.getElement();r.modules.responsiveLayout&&(o.appendChild(r.modules.responsiveLayout.element),this.generateCollapsedRowContent(r))}updateColumnVisibility(r,o){!o&&r.modules.responsive&&(r.modules.responsive.visible=r.visible,this.initialize())}hideColumn(r){var o=this.hiddenColumns.length;r.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(r),this.generateCollapsedContent(),this.collapseHandleColumn&&!o&&this.collapseHandleColumn.show())}showColumn(r){var o;r.show(!1,!0),r.setWidth(r.getWidth()),"collapse"===this.mode&&((o=this.hiddenColumns.indexOf(r))>-1&&this.hiddenColumns.splice(o,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var r=this,o=!0;o;){let l="fitColumns"==r.table.modules.layout.getMode()?r.table.columnManager.getFlexBaseWidth():r.table.columnManager.getWidth(),p=(r.table.options.headerVisible?r.table.columnManager.element.clientWidth:r.table.element.clientWidth)-l;if(p<0){let b=r.columns[r.index];b?(r.hideColumn(b),r.index++):o=!1}else{let b=r.columns[r.index-1];b&&p>0&&p>=b.getWidth()?(r.showColumn(b),r.index--):o=!1}r.table.rowManager.activeRowsCount||r.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var r=this;this.table.rowManager.getDisplayRows().forEach(function(l){r.generateCollapsedRowContent(l)})}generateCollapsedRowContent(r){var o,l;if(r.modules.responsiveLayout){for(o=r.modules.responsiveLayout.element;o.firstChild;)o.removeChild(o.firstChild);(l=this.collapseFormatter(this.generateCollapsedRowData(r)))&&o.appendChild(l)}}generateCollapsedRowData(r){var b,o=this,l=r.getData(),p=[];return this.hiddenColumns.forEach(function(S){var I=S.getFieldValue(l);S.definition.title&&S.field&&(S.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(b={value:!1,data:{},getValue:function(){return I},getData:function(){return l},getElement:function(){return document.createElement("div")},getRow:function(){return r.getComponent()},getColumn:function(){return S.getComponent()}},p.push({field:S.field,title:S.definition.title,value:S.modules.format.formatter.call(o.table.modules.format,b,S.modules.format.params,function($){$()})})):p.push({field:S.field,title:S.definition.title,value:I}))}),p}formatCollapsedData(r){var o=document.createElement("table");return r.forEach(function(l){var I,p=document.createElement("tr"),b=document.createElement("td"),S=document.createElement("td"),N=document.createElement("strong");b.appendChild(N),this.langBind("columns|"+l.field,function($){N.innerText=$||l.title}),l.value instanceof Node?((I=document.createElement("div")).appendChild(l.value),S.appendChild(I)):S.innerHTML=l.value,p.appendChild(b),p.appendChild(S),o.appendChild(p)},this),Object.keys(r).length?o:""}}return f.moduleName="responsiveLayout",f})(),Zp=(()=>{class f extends bo{constructor(r){super(r),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(o,l){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(r,o){return"selected"===r?this.selectedRows:o}rowDeleted(r){this._deselectRow(r,!0)}clearSelectionData(r){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==r&&this._rowSelectionChanged()}initializeRow(r){var o=this,l=r.getElement(),p=function(){setTimeout(function(){o.selecting=!1},50),document.body.removeEventListener("mouseup",p)};r.modules.select={selected:!1},o.table.options.selectableCheck.call(this.table,r.getComponent())?(l.classList.add("tabulator-selectable"),l.classList.remove("tabulator-unselectable"),o.table.options.selectable&&"highlight"!=o.table.options.selectable&&("click"===o.table.options.selectableRangeMode?l.addEventListener("click",function(b){if(b.shiftKey){o.table._clearSelection(),o.lastClickedRow=o.lastClickedRow||r;var S=o.table.rowManager.getDisplayRowIndex(o.lastClickedRow),I=o.table.rowManager.getDisplayRowIndex(r),N=S<=I?S:I,$=S>=I?S:I,Fe=o.table.rowManager.getDisplayRows().slice(0).splice(N,$-N+1);b.ctrlKey||b.metaKey?(Fe.forEach(function(qe){qe!==o.lastClickedRow&&(!0===o.table.options.selectable||o.isRowSelected(r)||o.selectedRows.length<o.table.options.selectable)&&o.toggleRow(qe)}),o.lastClickedRow=r):(o.deselectRows(void 0,!0),!0!==o.table.options.selectable&&Fe.length>o.table.options.selectable&&(Fe=Fe.slice(0,o.table.options.selectable)),o.selectRows(Fe)),o.table._clearSelection()}else b.ctrlKey||b.metaKey?(o.toggleRow(r),o.lastClickedRow=r):(o.deselectRows(void 0,!0),o.selectRows(r),o.lastClickedRow=r)}):(l.addEventListener("click",function(b){(!o.table.modExists("edit")||!o.table.modules.edit.getCurrentCell())&&o.table._clearSelection(),o.selecting||o.toggleRow(r)}),l.addEventListener("mousedown",function(b){if(b.shiftKey)return o.table._clearSelection(),o.selecting=!0,o.selectPrev=[],document.body.addEventListener("mouseup",p),document.body.addEventListener("keyup",p),o.toggleRow(r),!1}),l.addEventListener("mouseenter",function(b){o.selecting&&(o.table._clearSelection(),o.toggleRow(r),o.selectPrev[1]==r&&o.toggleRow(o.selectPrev[0]))}),l.addEventListener("mouseout",function(b){o.selecting&&(o.table._clearSelection(),o.selectPrev.unshift(r))})))):(l.classList.add("tabulator-unselectable"),l.classList.remove("tabulator-selectable"))}toggleRow(r){this.table.options.selectableCheck.call(this.table,r.getComponent())&&(r.modules.select&&r.modules.select.selected?this._deselectRow(r):this._selectRow(r))}selectRows(r){var o;switch(typeof r){case"undefined":this.table.rowManager.rows.forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged();break;case"string":(o=this.table.rowManager.findRow(r))?this._selectRow(o,!0,!0):this.table.rowManager.getRows(r).forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(r)?(r.forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged()):this._selectRow(r,!1,!0)}}_selectRow(r,o,l){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!l&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var p=this.table.rowManager.findRow(r);p?-1==this.selectedRows.indexOf(p)&&(p.getElement().classList.add("tabulator-selected"),p.modules.select||(p.modules.select={}),p.modules.select.selected=!0,p.modules.select.checkboxEl&&(p.modules.select.checkboxEl.checked=!0),this.selectedRows.push(p),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(p,!0),o||this.dispatchExternal("rowSelected",p.getComponent()),this._rowSelectionChanged(o)):o||console.warn("Selection Error - No such row found, ignoring selection:"+r)}isRowSelected(r){return-1!==this.selectedRows.indexOf(r)}deselectRows(r,o){var p,l=this;if(void 0===r){p=l.selectedRows.length;for(let b=0;b<p;b++)l._deselectRow(l.selectedRows[0],!0);l._rowSelectionChanged(o)}else Array.isArray(r)?(r.forEach(function(b){l._deselectRow(b,!0)}),l._rowSelectionChanged(o)):l._deselectRow(r,o)}_deselectRow(r,o){var b,l=this,p=l.table.rowManager.findRow(r);p?(b=l.selectedRows.findIndex(function(S){return S==p}))>-1&&(p.getElement().classList.remove("tabulator-selected"),p.modules.select||(p.modules.select={}),p.modules.select.selected=!1,p.modules.select.checkboxEl&&(p.modules.select.checkboxEl.checked=!1),l.selectedRows.splice(b,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(p,!1),o||this.dispatchExternal("rowDeselected",p.getComponent()),l._rowSelectionChanged(o)):o||console.warn("Deselection Error - No such row found, ignoring selection:"+r)}getSelectedData(){var r=[];return this.selectedRows.forEach(function(o){r.push(o.getData())}),r}getSelectedRows(){var r=[];return this.selectedRows.forEach(function(o){r.push(o.getComponent())}),r}_rowSelectionChanged(r){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),r||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(r,o){r._row.modules.select||(r._row.modules.select={}),r._row.modules.select.checkboxEl=o}registerHeaderSelectCheckbox(r){this.headerCheckboxElement=r}childRowSelection(r,o){var l=this.table.modules.dataTree.getChildren(r,!0);if(o)for(let p of l)this._selectRow(p,!0);else for(let p of l)this._deselectRow(p,!0)}}return f.moduleName="selectRow",f})();function Hh(f,s,r,o,l,p,b){var S=window.DateTime||luxon.DateTime,I=b.format||"dd/MM/yyyy HH:mm:ss",N=b.alignEmptyValues,$=0;if(void 0!==S){if(f=S.fromFormat(f,I),s=S.fromFormat(s,I),f.isValid){if(s.isValid)return f-s;$=1}else $=s.isValid?-1:0;return("top"===N&&"desc"===p||"bottom"===N&&"asc"===p)&&($*=-1),$}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var Um={number:function(f,s,r,o,l,p,b){var S=b.alignEmptyValues,I=b.decimalSeparator,N=b.thousandSeparator,$=0;if(f=String(f),s=String(s),N&&(f=f.split(N).join(""),s=s.split(N).join("")),I&&(f=f.split(I).join("."),s=s.split(I).join(".")),f=parseFloat(f),s=parseFloat(s),isNaN(f))$=isNaN(s)?0:-1;else{if(!isNaN(s))return f-s;$=1}return("top"===S&&"desc"===p||"bottom"===S&&"asc"===p)&&($*=-1),$},string:function(f,s,r,o,l,p,b){var N,S=b.alignEmptyValues,I=0;if(f){if(s){switch(typeof b.locale){case"boolean":b.locale&&(N=this.langLocale());break;case"string":N=b.locale}return String(f).toLowerCase().localeCompare(String(s).toLowerCase(),N)}I=1}else I=s?-1:0;return("top"===S&&"desc"===p||"bottom"===S&&"asc"===p)&&(I*=-1),I},date:function(f,s,r,o,l,p,b){return b.format||(b.format="dd/MM/yyyy"),Hh.call(this,f,s,r,o,l,p,b)},time:function(f,s,r,o,l,p,b){return b.format||(b.format="HH:mm"),Hh.call(this,f,s,r,o,l,p,b)},datetime:Hh,boolean:function(f,s,r,o,l,p,b){return(!0===f||"true"===f||"True"===f||1===f?1:0)-(!0===s||"true"===s||"True"===s||1===s?1:0)},array:function(f,s,r,o,l,p,b){var N=b.type||"length",$=b.alignEmptyValues,de=0;function Fe(qe){switch(N){case"length":return qe.length;case"sum":return qe.reduce(function(Et,xt){return Et+xt});case"max":return Math.max.apply(null,qe);case"min":return Math.min.apply(null,qe);case"avg":return qe.reduce(function(Et,xt){return Et+xt})/qe.length}}if(Array.isArray(f)){if(Array.isArray(s))return(f?Fe(f):0)-(s?Fe(s):0);$=1}else $=Array.isArray(s)?-1:0;return("top"===$&&"desc"===p||"bottom"===$&&"asc"===p)&&(de*=-1),de},exists:function(f,s,r,o,l,p,b){return(void 0===f?0:1)-(void 0===s?0:1)},alphanum:function(f,s,r,o,l,p,b){var S,I,N,$,Fe,de=0,qe=/(\d+)|(\D+)/g,Et=/\d/,xt=b.alignEmptyValues,Gt=0;if(f||0===f){if(s||0===s){if(isFinite(f)&&isFinite(s))return f-s;if((S=String(f).toLowerCase())===(I=String(s).toLowerCase()))return 0;if(!Et.test(S)||!Et.test(I))return S>I?1:-1;for(S=S.match(qe),I=I.match(qe),Fe=S.length>I.length?I.length:S.length;de<Fe;)if((N=S[de])!==($=I[de++]))return isFinite(N)&&isFinite($)?("0"===N.charAt(0)&&(N="."+N),"0"===$.charAt(0)&&($="."+$),N-$):N>$?1:-1;return S.length>I.length}Gt=1}else Gt=s||0===s?-1:0;return("top"===xt&&"desc"===p||"bottom"===xt&&"asc"===p)&&(Gt*=-1),Gt}},nf={integer:function(f,s,r){return""===s||null==s||"number"==typeof(s=Number(s))&&isFinite(s)&&Math.floor(s)===s},float:function(f,s,r){return""===s||null==s||"number"==typeof(s=Number(s))&&isFinite(s)&&s%1!=0},numeric:function(f,s,r){return""===s||null==s||!isNaN(s)},string:function(f,s,r){return""===s||null==s||isNaN(s)},max:function(f,s,r){return""===s||null==s||parseFloat(s)<=r},min:function(f,s,r){return""===s||null==s||parseFloat(s)>=r},starts:function(f,s,r){return""===s||null==s||String(s).toLowerCase().startsWith(String(r).toLowerCase())},ends:function(f,s,r){return""===s||null==s||String(s).toLowerCase().endsWith(String(r).toLowerCase())},minLength:function(f,s,r){return""===s||null==s||String(s).length>=r},maxLength:function(f,s,r){return""===s||null==s||String(s).length<=r},in:function(f,s,r){return""===s||null==s||("string"==typeof r&&(r=r.split("|")),""===s||r.indexOf(s)>-1)},regex:function(f,s,r){return""===s||null==s||new RegExp(r).test(s)},unique:function(f,s,r){if(""===s||null==s)return!0;var o=!0,l=f.getData(),p=f.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(b){var S=b.getData();S!==l&&s==p.getFieldValue(S)&&(o=!1)}),o},required:function(f,s,r){return""!==s&&null!=s}},Ch=Object.freeze({__proto__:null,AccessorModule:rp,AjaxModule:Vp,ClipboardModule:Up,ColumnCalcsModule:qd,DataTreeModule:Pd,DownloadModule:vh,EditModule:yh,ExportModule:U,FilterModule:O,FormatModule:Yp,FrozenColumnsModule:Xp,FrozenRowsModule:Yf,GroupRowsModule:Kp,HistoryModule:up,HtmlTableImportModule:$f,InteractionModule:Jf,KeybindingsModule:Zf,MenuModule:Qf,MoveColumnsModule:qf,MoveRowsModule:ih,MutatorModule:tg,PageModule:Bh,PersistenceModule:hp,PrintModule:pp,ReactiveDataModule:Jp,ResizeColumnsModule:ng,ResizeRowsModule:rg,ResizeTableModule:fp,ResponsiveLayoutModule:Vm,SelectRowModule:Zp,SortModule:(()=>{class f extends bo{constructor(r){super(r),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(r,o,l,p){var b=this.getSort();return b.forEach(S=>{delete S.column}),p.sort=b,p}userSetSort(r,o){this.setSort(r,o),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(r){var l,p,o=!1;switch(typeof r.definition.sorter){case"string":f.sorters[r.definition.sorter]?o=f.sorters[r.definition.sorter]:console.warn("Sort Error - No such sorter found: ",r.definition.sorter);break;case"function":o=r.definition.sorter}r.modules.sort={sorter:o,dir:"none",params:r.definition.sorterParams||{},startingDir:r.definition.headerSortStartingDir||"asc",tristate:r.definition.headerSortTristate},!1!==r.definition.headerSort&&((l=r.getElement()).classList.add("tabulator-sortable"),(p=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?p.appendChild(this.table.options.headerSortElement):p.innerHTML=this.table.options.headerSortElement,r.titleHolderElement.appendChild(p),r.modules.sort.element=p,l.addEventListener("click",b=>{var S="",I=[],N=!1;if(r.modules.sort){if(r.modules.sort.tristate)S="none"==r.modules.sort.dir?r.modules.sort.startingDir:r.modules.sort.dir==r.modules.sort.startingDir?"asc"==r.modules.sort.dir?"desc":"asc":"none";else switch(r.modules.sort.dir){case"asc":S="desc";break;case"desc":S="asc";break;default:S=r.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(b.shiftKey||b.ctrlKey)?((N=(I=this.getSort()).findIndex($=>$.field===r.getField()))>-1?(I[N].dir=S,N!=I.length-1&&(N=I.splice(N,1)[0],"none"!=S&&I.push(N))):"none"!=S&&I.push({column:r,dir:S}),this.setSort(I)):"none"==S?this.clear():this.setSort(r,S),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var r=this.changed;return this.changed=!1,r}getSort(){var o=[];return this.sortList.forEach(function(l){l.column&&o.push({column:l.column.getComponent(),field:l.column.getField(),dir:l.dir})}),o}setSort(r,o){var l=this,p=[];Array.isArray(r)||(r=[{column:r,dir:o}]),r.forEach(function(b){var S;(S=l.table.columnManager.findColumn(b.column))?(b.column=S,p.push(b),l.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",b.column)}),l.sortList=p,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(r){var b,o=this.table.rowManager.activeRows[0],l="string";if(o&&(o=o.getData(),r.getField()))switch(b=r.getFieldValue(o),typeof b){case"undefined":l="string";break;case"boolean":l="boolean";break;default:isNaN(b)||""===b?b.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(l="alphanum"):l="number"}return f.sorters[l]}sort(r){var o=this,l=this.table.options.sortOrderReverse?o.sortList.slice().reverse():o.sortList,p=[],b=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",o.getSort()),o.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(l.forEach(function(S,I){var N=S.column.modules.sort;S.column&&N&&(N.sorter||(N.sorter=o.findSorter(S.column)),S.params="function"==typeof N.params?N.params(S.column.getComponent(),S.dir):N.params,p.push(S)),o.setColumnHeader(S.column,S.dir)}),p.length&&o._sortItems(r,p)):l.forEach(function(S,I){o.setColumnHeader(S.column,S.dir)}),this.subscribedExternal("dataSorted")&&(r.forEach(S=>{b.push(S.getComponent())}),this.dispatchExternal("dataSorted",o.getSort(),b)),r}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(r){r.modules.sort&&(r.modules.sort.dir="none",r.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(r,o){r.modules.sort.dir=o,r.getElement().setAttribute("aria-sort",o)}_sortItems(r,o){var l=o.length-1;r.sort((p,b)=>{for(var S,I=l;I>=0;I--){let N=o[I];if(0!==(S=this._sortRow(p,b,N.column,N.dir,N.params)))break}return S})}_sortRow(r,o,l,p,b){var S,I,N="asc"==p?r:o,$="asc"==p?o:r;return r=void 0!==(r=l.getFieldValue(N.getData()))?r:"",o=void 0!==(o=l.getFieldValue($.getData()))?o:"",S=N.getComponent(),I=$.getComponent(),l.modules.sort.sorter.call(this,r,o,S,I,l.getComponent(),p,b)}}return f.moduleName="sort",f.sorters=Um,f})(),ValidateModule:(()=>{class f extends bo{constructor(r){super(r),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(r){return!r.modules.validate||!r.modules.validate.invalid}cellValidate(r){return this.validate(r.column.modules.validate,r,r.getValue())}columnValidate(r){var o=[];return r.cells.forEach(function(l){this.cellValidate(l)||o.push(l.getComponent())}),!o.length||o}rowValidate(r){var o=[];return r.cells.forEach(function(l){this.cellValidate(l)||o.push(l.getComponent())}),!o.length||o}userClearCellValidation(r){r||(r=this.getInvalidCells()),Array.isArray(r)||(r=[r]),r.forEach(o=>{this.clearValidation(o._getSelf())})}userValidate(r){var o=[];return this.table.rowManager.rows.forEach(function(l){var p=l.validate();!0!==p&&(o=o.concat(p))}),!o.length||o}initializeColumnCheck(r){void 0!==r.definition.validator&&this.initializeColumn(r)}initializeColumn(r){var p,o=this,l=[];r.definition.validator&&(Array.isArray(r.definition.validator)?r.definition.validator.forEach(function(b){(p=o._extractValidator(b))&&l.push(p)}):(p=this._extractValidator(r.definition.validator))&&l.push(p),r.modules.validate=!!l.length&&l)}_extractValidator(r){var o,l,p;switch(typeof r){case"string":return(p=r.indexOf(":"))>-1?(o=r.substring(0,p),l=r.substring(p+1)):o=r,this._buildValidator(o,l);case"function":return this._buildValidator(r);case"object":return this._buildValidator(r.type,r.parameters)}}_buildValidator(r,o){var l="function"==typeof r?r:f.validators[r];return l?{type:"function"==typeof r?"function":r,func:l,params:o}:(console.warn("Validator Setup Error - No matching validator found:",r),!1)}validate(r,o,l){var p=this,b=[],S=this.invalidCells.indexOf(o);return r&&r.forEach(function(I){I.func.call(p,o.getComponent(),l,I.params)||b.push({type:I.type,parameters:I.params})}),b=!b.length||b,o.modules.validate||(o.modules.validate={}),!0===b?(o.modules.validate.invalid=!1,o.getElement().classList.remove("tabulator-validation-fail"),S>-1&&this.invalidCells.splice(S,1)):(o.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&o.getElement().classList.add("tabulator-validation-fail"),-1==S&&this.invalidCells.push(o)),b}getInvalidCells(){var r=[];return this.invalidCells.forEach(o=>{r.push(o.getComponent())}),r}clearValidation(r){var o;r.modules.validate&&r.modules.validate.invalid&&(r.getElement().classList.remove("tabulator-validation-fail"),r.modules.validate.invalid=!1,(o=this.invalidCells.indexOf(r))>-1&&this.invalidCells.splice(o,1))}}return f.moduleName="validate",f.validators=nf,f})()}),ag={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class Uh{constructor(s,r){this.table=s,this.msgType=r,this.registeredDefaults={}}register(s,r){this.registeredDefaults[s]=r}generate(s,r={}){var o=Object.assign({},this.registeredDefaults);if(Object.assign(o,s),!1!==r.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var l in r)o.hasOwnProperty(l)||console.warn("Invalid "+this.msgType+" option:",l);for(var l in o)l in r?o[l]=r[l]:Array.isArray(o[l])?o[l]=Object.assign([],o[l]):"object"==typeof o[l]&&null!==o[l]?o[l]=Object.assign({},o[l]):void 0===o[l]&&delete o[l];return o}}class Th extends Nc{constructor(s){super(s),this.elementVertical=s.rowManager.element,this.elementHorizontal=s.columnManager.element,this.tableElement=s.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(s){}renderRows(){}renderColumns(){}rerenderRows(s){s&&s()}rerenderColumns(s,r){}renderRowCells(s){}rerenderRowCells(s,r){}scrollColumns(s,r){}scrollRows(s,r){}resize(){}scrollToRow(s){}scrollToRowNearestTop(s){}visibleRows(s){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(s,r){var o=s.getElement();r%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(s){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(s,r,o){var l=this.rows().indexOf(s),p=s.getElement(),b=0;return new Promise((S,I)=>{if(l>-1){if(void 0===o&&(o=this.table.options.scrollToRowIfVisible),!o&&Ns.elVisible(p)&&(b=Ns.elOffset(p).top-Ns.elOffset(this.elementVertical).top)>0&&b<this.elementVertical.clientHeight-p.offsetHeight)return!1;switch(void 0===r&&(r=this.table.options.scrollToRowPosition),"nearest"===r&&(r=this.scrollToRowNearestTop(s)?"top":"bottom"),this.scrollToRow(s),r){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(p.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-p.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-p.offsetTop)+p.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+p.offsetHeight}S()}else console.warn("Scroll Error - Row not visible"),I("Scroll Error - Row not visible")})}}class sf extends Th{constructor(s){super(s)}renderRowCells(s){s.cells.forEach(r=>{s.element.appendChild(r.getElement()),r.cellRendered()})}reinitializeColumnWidths(s){s.forEach(function(r){r.reinitializeWidth()})}}class af extends Th{constructor(s){super(s),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var s=this.options("columns"),o=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),o=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),o=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),o=!1),s&&s.find(l=>l.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),o=!1),o}renderColumns(s,r){this.dataChange()}scrollColumns(s,r){this.scrollLeft!=s&&(this.scrollLeft=s,this.scroll(s-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(s,r){var o={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!s||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var l=0;this.table.columnManager.columnsByIndex.forEach(p=>{var b={};if(p.visible){var S=p.getWidth();b.leftPos=l,b.rightPos=l+S,b.width=S,"fitData"===this.options("layout")&&(b.fitDataCheck=!0),l+S>this.vDomScrollPosLeft&&l<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=l),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=S),this.columns.push(p),p.modules.vdomHoz=b,l+=S}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,r||(!s||this.reinitChanged(o))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(s){this.initialized?this.initializeRow(s):s.cells.forEach(r=>{s.element.appendChild(r.getElement()),r.cellRendered()})}rerenderRowCells(s,r){this.reinitializeRow(s,r)}reinitializeColumnWidths(s){for(let r=this.leftCol;r<=this.rightCol;r++)this.columns[r].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var p,l,s=!1,r=0,o=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(b=>{!b.definition.width&&b.visible&&(s=!0)}),s&&s&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,l=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(p=l.getElement(),l.generateCells(),this.tableElement.appendChild(p),o=0;o<l.cells.length;o++){let I=l.cells[o];if(p.appendChild(I.getElement()),I.column.reinitializeWidth(),(r+=I.column.getWidth())>this.vDomScrollPosRight)break}for(p.parentNode.removeChild(p),this.fitDataColAvg=Math.floor(r/(o+1));o<this.table.columnManager.columnsByIndex.length;o++)this.table.columnManager.columnsByIndex[o].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(s){var r=!0;return s.cols.length!==this.columns.length||s.leftCol!==this.leftCol||s.rightCol!==this.rightCol||(s.cols.forEach((o,l)=>{o!==this.columns[l]&&(r=!1)}),!r)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(r=>{this.reinitializeRow(r,!0)})}scroll(s){this.vDomScrollPosLeft+=s,this.vDomScrollPosRight+=s,s>.8*this.elementVertical.clientWidth?this.rerenderColumns():s>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(s,r,o){for(let l=s;l<r;l++){let p=this.columns[l];p.modules.vdomHoz.leftPos+=o,p.modules.vdomHoz.rightPos+=o}}addColRight(){var s=this.columns[this.rightCol+1];s&&s.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var l=o.getCell(s);o.getElement().appendChild(l.getElement()),l.cellRendered()}}),this.fitDataColActualWidthCheck(s),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=s.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var s=this.columns[this.leftCol-1];s&&s.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(l=>{if("group"!==l.type){var p=l.getCell(s);l.getElement().prepend(p.getElement()),p.cellRendered()}}),this.fitDataColActualWidthCheck(s),this.leftCol?this.vDomPadLeft-=s.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(s){var r;(s=this.columns[this.rightCol])&&s.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(r=this.table.rowManager.getVisibleRows(),s.modules.vdomHoz.visible=!1,r.forEach(o=>{if("group"!==o.type){var l=o.getCell(s);o.getElement().removeChild(l.getElement())}}),this.vDomPadRight+=s.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var s=this.columns[this.leftCol];s&&s.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var l=o.getCell(s);l.parentNode&&o.getElement().removeChild(l.getElement())}}),this.vDomPadLeft+=s.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(s){var r,o;s.modules.vdomHoz.fitDataCheck&&(s.reinitializeWidth(),(o=(r=s.getWidth())-s.modules.vdomHoz.width)&&(s.modules.vdomHoz.rightPos+=o,s.modules.vdomHoz.width=r,this.colPositionAdjust(this.rightCol+2,this.columns.length,o)),s.modules.vdomHoz.fitDataCheck=!1)}initializeRow(s){if("group"!==s.type){s.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let r=this.leftCol;r<=this.rightCol;r++){let o=this.columns[r];if(o&&o.visible){let l=s.getCell(o);s.getElement().appendChild(l.getElement()),l.cellRendered()}}}}reinitializeRow(s,r){if("group"!==s.type&&(r||!s.modules.vdomHoz||s.modules.vdomHoz.leftCol!==this.leftCol||s.modules.vdomHoz.rightCol!==this.rightCol)){for(var o=s.getElement();o.firstChild;)o.removeChild(o.firstChild);this.initializeRow(s)}}}class lg extends Nc{constructor(s){super(s),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new Uh(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var s;(s="string"==typeof this.table.options.renderHorizontal?{virtual:af,basic:sf}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new s(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var s=document.createElement("div");return s.classList.add("tabulator-headers"),s.setAttribute("role","row"),s}createHeaderElement(){var s=document.createElement("div");return s.classList.add("tabulator-header"),s.setAttribute("role","rowgroup"),this.table.options.headerVisible||s.classList.add("tabulator-header-hidden"),s}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(s){var o=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=s,this.element.style.marginLeft=s>o?-(s-o)+"px":0,this.scrollLeft=s,this.renderer.scrollColumns(s)}generateColumnsFromRowData(s){var l,p,r=[],o=this.table.options.autoColumnsDefinitions;if(s&&s.length){for(var b in l=s[0]){let S={field:b,title:b},I=l[b];switch(typeof I){case"undefined":p="string";break;case"boolean":p="boolean";break;case"object":p=Array.isArray(I)?"array":"string";break;default:p=isNaN(I)||""===I?I.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}S.sorter=p,r.push(S)}if(o)switch(typeof o){case"function":this.table.options.columns=o.call(this.table,r);break;case"object":Array.isArray(o)?r.forEach(S=>{var I=o.find(N=>N.field===S.field);I&&Object.assign(S,I)}):r.forEach(S=>{o[S.field]&&Object.assign(S,o[S.field])}),this.table.options.columns=r}else this.table.options.columns=r;this.setColumns(this.table.options.columns)}}setColumns(s,r){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),s.forEach((o,l)=>{this._addColumn(o)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(s,r,o){var l=new qu(s,this),p=l.getElement(),b=o&&this.findColumnIndex(o);if(o&&b>-1){var S=o.getTopColumn(),I=this.columns.indexOf(S),N=S.getElement();r?(this.columns.splice(I,0,l),N.parentNode.insertBefore(p,N)):(this.columns.splice(I+1,0,l),N.parentNode.insertBefore(p,N.nextSibling))}else r?(this.columns.unshift(l),this.headersElement.insertBefore(l.getElement(),this.headersElement.firstChild)):(this.columns.push(l),this.headersElement.appendChild(l.getElement()));return l.columnRendered(),l}registerColumnField(s){s.definition.field&&(this.columnsByField[s.definition.field]=s)}registerColumnPosition(s){this.columnsByIndex.push(s)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(s){s.reRegisterPosition()})}verticalAlignHeaders(){var s=0;this.columns.forEach(r=>{var o;r.clearVerticalAlign(),(o=r.getHeight())>s&&(s=o)}),this.columns.forEach(r=>{r.verticalAlign(this.table.options.columnHeaderVertAlign,s)}),this.table.rowManager.adjustTableSize()}findColumn(s){return"object"!=typeof s?this.columnsByField[s]||!1:s instanceof qu?s:s instanceof _u?s._getSelf()||!1:"undefined"!=typeof HTMLElement&&s instanceof HTMLElement&&this.columns.find(o=>o.element===s)||!1}getColumnByField(s){return this.columnsByField[s]}getColumnsByFieldRoot(s){var r=[];return Object.keys(this.columnsByField).forEach(o=>{o.split(".")[0]===s&&r.push(this.columnsByField[o])}),r}getColumnByIndex(s){return this.columnsByIndex[s]}getFirstVisibileColumn(s){return(s=this.columnsByIndex.findIndex(r=>r.visible))>-1&&this.columnsByIndex[s]}getColumns(){return this.columns}findColumnIndex(s){return this.columnsByIndex.findIndex(r=>s===r)}getRealColumns(){return this.columnsByIndex}traverse(s){this.columnsByIndex.forEach((r,o)=>{s(r,o)})}getDefinitions(s){var r=[];return this.columnsByIndex.forEach(o=>{(!s||s&&o.visible)&&r.push(o.getDefinition())}),r}getDefinitionTree(){var s=[];return this.columns.forEach(r=>{s.push(r.getDefinition(!0))}),s}getComponents(s){var r=[];return(s?this.columns:this.columnsByIndex).forEach(l=>{r.push(l.getComponent())}),r}getWidth(){var s=0;return this.columnsByIndex.forEach(r=>{r.visible&&(s+=r.getWidth())}),s}moveColumn(s,r,o){this.moveColumnActual(s,r,o),r.element.parentNode.insertBefore(s.element,r.element),o&&r.element.parentNode.insertBefore(r.element,s.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(s,r,o){this._moveColumnInArray(s.parent.isGroup?s.parent.columns:this.columns,s,r,o),this._moveColumnInArray(this.columnsByIndex,s,r,o,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",s,r,o),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",s.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(s,r,o,l,p){var S,b=s.indexOf(r);b>-1&&(s.splice(b,1),(S=s.indexOf(o))>-1?l&&(S+=1):S=b,s.splice(S,0,r),p&&(this.chain("column-moving-rows",[r,o,l],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(N){if(N.cells.length){var $=N.cells.splice(b,1)[0];N.cells.splice(S,0,$)}}))}scrollToColumn(s,r,o){var l=0,p=0,b=0,S=s.getElement();return new Promise((I,N)=>{if(void 0===r&&(r=this.table.options.scrollToColumnPosition),void 0===o&&(o=this.table.options.scrollToColumnIfVisible),s.visible){switch(r){case"middle":case"center":b=-this.element.clientWidth/2;break;case"right":b=S.clientWidth-this.headersElement.clientWidth}if(!o&&(p=S.offsetLeft)>0&&p+S.offsetWidth<this.element.clientWidth)return!1;l=S.offsetLeft+b,l=Math.max(Math.min(l,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(l),this.scrollHorizontal(l),I()}else console.warn("Scroll Error - Column not visible"),N("Scroll Error - Column not visible")})}generateCells(s){var r=[];return this.columnsByIndex.forEach(o=>{r.push(o.generateCell(s))}),r}getFlexBaseWidth(){var s=this.table.element.clientWidth,r=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(s-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(o){var l,p,b;o.visible&&(l=o.definition.width||0,p=parseInt(o.minWidth),b="string"==typeof l?l.indexOf("%")>-1?s/100*parseInt(l):parseInt(l):l,r+=b>p?b:p)}),r}addColumn(s,r,o){return new Promise((l,p)=>{var b=this._addColumn(s,r,o);this._reIndexColumns(),this.dispatch("column-add",s,r,o),"fitColumns"!=this.layoutMode()&&b.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),l(b)})}deregisterColumn(s){var o,r=s.getField();r&&delete this.columnsByField[r],(o=this.columnsByIndex.indexOf(s))>-1&&this.columnsByIndex.splice(o,1),(o=this.columns.indexOf(s))>-1&&this.columns.splice(o,1),this.verticalAlignHeaders(),this.redraw()}redraw(s){Ns.elVisible(this.element)&&this.verticalAlignHeaders(),s&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",s)||this.layoutRefresh(),this.dispatch("table-redraw",s),this.table.footerManager.redraw()}}class mp extends Th{constructor(s){super(s),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var s=this.tableElement;s.firstChild;)s.removeChild(s.firstChild);s.scrollTop=0,s.scrollLeft=0,s.style.minWidth="",s.style.minHeight="",s.style.display="",s.style.visibility=""}renderRows(){var s=this.tableElement,r=!0;this.rows().forEach((o,l)=>{this.styleRow(o,l),s.appendChild(o.getElement()),o.initialize(!0),"group"!==o.type&&(r=!1)}),s.style.minWidth=r?this.table.columnManager.getWidth()+"px":""}rerenderRows(s){this.render(),s&&s()}scrollToRowNearestTop(s){var r=Ns.elOffset(s.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-r)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-r))}scrollToRow(s){var r=s.getElement();this.elementVertical.scrollTop=Ns.elOffset(r).top-Ns.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(s){return this.rows()}}class cg extends Th{constructor(s){super(s),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var s=this.tableElement;s.firstChild;)s.removeChild(s.firstChild);s.style.paddingTop="",s.style.paddingBottom="",s.style.minWidth="",s.style.minHeight="",s.style.display="",s.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(s){for(var r=this.elementVertical.scrollTop,o=!1,l=!1,p=this.table.rowManager.scrollLeft,b=this.rows(),S=this.vDomTop;S<=this.vDomBottom;S++)if(b[S]){var I=r-b[S].getElement().offsetTop;if(!(!1===l||Math.abs(I)<l))break;l=I,o=S}b.forEach(N=>{N.deinitializeHeight()}),s&&s(),this._virtualRenderFill(!1===o?this.rows.length-1:o,!0,l||0),this.scrollColumns(p)}scrollColumns(s){this.table.rowManager.scrollHorizontal(s)}scrollRows(s,r){var o=s-this.vDomScrollPosTop,l=s-this.vDomScrollPosBottom,p=2*this.vDomWindowBuffer,b=this.rows();if(this.scrollTop=s,-o>p||l>p){var S=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*b.length)),this.scrollColumns(S)}else r?(o<0&&this._addTopRow(b,-o),l<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(b,-l):this.vDomScrollPosBottom=this.scrollTop)):(l>=0&&this._addBottomRow(b,l),o>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(b,o):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(s){var r=this.rows().indexOf(s);return!(Math.abs(this.vDomTop-r)>Math.abs(this.vDomBottom-r))}scrollToRow(s){var r=this.rows().indexOf(s);r>-1&&this._virtualRenderFill(r,!0)}visibleRows(s){var r=this.elementVertical.scrollTop,o=this.elementVertical.clientHeight+r,l=!1,p=0,b=0,S=this.rows();if(s)p=this.vDomTop,b=this.vDomBottom;else for(var I=this.vDomTop;I<=this.vDomBottom;I++)if(S[I])if(l){if(!(o-S[I].getElement().offsetTop>=0))break;b=I}else if(r-S[I].getElement().offsetTop>=0)p=I;else{if(l=!0,!(o-S[I].getElement().offsetTop>=0))break;b=I}return S.slice(p,b+1)}_virtualRenderFill(s,r,o){var l=this.tableElement,p=this.elementVertical,b=0,S=0,I=0,N=0,$=0,de=this.rows(),Fe=de.length,qe=this.elementVertical.clientHeight;if(o=o||0,s=s||0){for(;l.firstChild;)l.removeChild(l.firstChild);(I=(Fe-s+1)*this.vDomRowHeight)<qe&&(s-=Math.ceil((qe-I)/this.vDomRowHeight))<0&&(s=0),s-=b=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),s)}else this.clear();if(Fe&&Ns.elVisible(this.elementVertical)){for(this.vDomTop=s,this.vDomBottom=s-1;(S<=qe+this.vDomWindowBuffer||$<this.vDomWindowMinTotalRows)&&this.vDomBottom<Fe-1;){var Gt,Et=this.vDomBottom+1,xt=de[Et];this.styleRow(xt,Et),l.appendChild(xt.getElement()),xt.initialize(),xt.heightInitialized||xt.normalizeHeight(!0),Gt=xt.getHeight(),$<b?N+=Gt:S+=Gt,Gt>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*Gt),this.vDomBottom++,$++}s?(this.vDomTopPad=r?this.vDomRowHeight*this.vDomTop+o:this.scrollTop-N,this.vDomBottomPad=this.vDomBottom==Fe-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-S-N,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((S+N)/$),this.vDomBottomPad=this.vDomRowHeight*(Fe-this.vDomBottom-1),this.vDomScrollHeight=N+S+this.vDomBottomPad-qe),l.style.paddingTop=this.vDomTopPad+"px",l.style.paddingBottom=this.vDomBottomPad+"px",r&&(this.scrollTop=this.vDomTopPad+N+o-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-qe:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-qe),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&r&&(this.scrollTop+=this.elementVertical.offsetHeight-qe),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,p.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(s,r){for(var o=this.tableElement,l=[],p=0,b=this.vDomTop-1,S=0;this.vDomTop;){let N,$,I=s[b];if(!(I&&S<this.vDomMaxRenderChain))break;if(N=I.getHeight()||this.vDomRowHeight,$=I.initialized,!(r>=N))break;this.styleRow(I,b),o.insertBefore(I.getElement(),o.firstChild),(!I.initialized||!I.heightInitialized)&&l.push(I),I.initialize(),$||(N=I.getElement().offsetHeight,N>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*N)),r-=N,p+=N,this.vDomTop--,b--,S++}for(let I of l)I.clearCellHeight();this._quickNormalizeRowHeight(l),p&&(this.vDomTopPad-=p,this.vDomTopPad<0&&(this.vDomTopPad=b*this.vDomRowHeight),b<1&&(this.vDomTopPad=0),o.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=p)}_removeTopRow(s,r){for(var o=[],l=0,p=0;;){let S,b=s[this.vDomTop];if(!(b&&p<this.vDomMaxRenderChain))break;if(S=b.getHeight()||this.vDomRowHeight,!(r>=S))break;this.vDomTop++,r-=S,l+=S,o.push(b),p++}for(let b of o){let S=b.getElement();S.parentNode&&S.parentNode.removeChild(S)}l&&(this.vDomTopPad+=l,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?l:l+this.vDomWindowBuffer)}_addBottomRow(s,r){for(var o=this.tableElement,l=[],p=0,b=this.vDomBottom+1,S=0;;){let N,$,I=s[b];if(!(I&&S<this.vDomMaxRenderChain))break;if(N=I.getHeight()||this.vDomRowHeight,$=I.initialized,!(r>=N))break;this.styleRow(I,b),o.appendChild(I.getElement()),(!I.initialized||!I.heightInitialized)&&l.push(I),I.initialize(),$||(N=I.getElement().offsetHeight,N>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*N)),r-=N,p+=N,this.vDomBottom++,b++,S++}for(let I of l)I.clearCellHeight();this._quickNormalizeRowHeight(l),p&&(this.vDomBottomPad-=p,(this.vDomBottomPad<0||b==s.length-1)&&(this.vDomBottomPad=0),o.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=p)}_removeBottomRow(s,r){for(var o=[],l=0,p=0;;){let S,b=s[this.vDomBottom];if(!(b&&p<this.vDomMaxRenderChain))break;if(S=b.getHeight()||this.vDomRowHeight,!(r>=S))break;this.vDomBottom--,r-=S,l+=S,o.push(b),p++}for(let b of o){let S=b.getElement();S.parentNode&&S.parentNode.removeChild(S)}l&&(this.vDomBottomPad+=l,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=l)}_quickNormalizeRowHeight(s){for(let r of s)r.calcHeight();for(let r of s)r.setCellHeight()}}class ug extends Nc{constructor(s){super(s),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var s=document.createElement("div");return s.classList.add("tabulator-tableholder"),s.setAttribute("tabindex",0),s.setAttribute("role","rowgroup"),s}createTableElement(){var s=document.createElement("div");return s.classList.add("tabulator-table"),s.setAttribute("role","rowgroup"),s}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(s,r){return r?this.activeRows.indexOf(s):this.rows.indexOf(s)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var s=this.element.scrollLeft,r=this.scrollLeft>s,o=this.element.scrollTop,l=this.scrollTop>o;this.scrollLeft!=s&&(this.scrollLeft=s,this.dispatch("scroll-horizontal",s,r),this.dispatchExternal("scrollHorizontal",s,r)),this.scrollTop!=o&&(this.scrollTop=o,this.renderer.scrollRows(o,l),this.dispatch("scroll-vertical",o,l),this.dispatchExternal("scrollVertical",o,l))})}findRow(s){return"object"!=typeof s?null!=s&&(this.rows.find(o=>o.data[this.table.options.index]==s)||!1):s instanceof sl?s:s instanceof gh?s._getSelf()||!1:"undefined"!=typeof HTMLElement&&s instanceof HTMLElement&&this.rows.find(o=>o.getElement()===s)||!1}getRowFromDataObject(s){return this.rows.find(o=>o.data===s)||!1}getRowFromPosition(s,r){return r?this.activeRows[s]:this.rows[s]}scrollToRow(s,r,o){return this.renderer.scrollToRowPosition(s,r,o)}setData(s,r,o){return new Promise((l,p)=>{r&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(s,!0):this.reRenderInPosition(()=>{this._setDataActual(s)}):(this.table.options.autoColumns&&o&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(s),this.resetScroll(),this._setDataActual(s)),l()})}_setDataActual(s,r){this.dispatchExternal("dataProcessing",s),this._wipeElements(),Array.isArray(s)?(this.dispatch("data-processing",s),s.forEach((o,l)=>{if(o&&"object"==typeof o){var p=new sl(o,this);this.rows.push(p)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",o)}),this.refreshActiveData(!1,!1,r),this.dispatch("data-processed",s),this.dispatchExternal("dataProcessed",s)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof s,"\nData:     ",s)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(s=>{s.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(s,r){var o=this.rows.indexOf(s),l=this.activeRows.indexOf(s);l>-1&&this.activeRows.splice(l,1),o>-1&&this.rows.splice(o,1),this.setActiveRows(this.activeRows),this.displayRowIterator(p=>{var b=p.indexOf(s);b>-1&&p.splice(b,1)}),r||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",s.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(s,r,o,l){var p=this.addRowActual(s,r,o,l);return this.dispatch("row-added",p,s,r,o),p}addRows(s,r,o){var l=[];return new Promise((p,b)=>{r=this.findAddRowPos(r),Array.isArray(s)||(s=[s]),(void 0===o&&r||void 0!==o&&!r)&&s.reverse(),s.forEach((S,I)=>{var N=this.addRow(S,r,o,!0);l.push(N),this.dispatch("row-added",N,s,r,o)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),l.length&&this._clearPlaceholder(),p(l)})}findAddRowPos(s){return void 0===s&&(s=this.table.options.addRowPos),"pos"===s&&(s=!0),"bottom"===s&&(s=!1),s}addRowActual(s,r,o,l){var I,N,p=s instanceof sl?s:new sl(s||{},this),b=this.findAddRowPos(r),S=-1;return o||(N=this.chain("row-adding-position",[p,b],null,{index:o,top:b}),o=N.index,b=N.top),void 0!==o&&(o=this.findRow(o)),(o=this.chain("row-adding-index",[p,o,b],null,o))&&(S=this.rows.indexOf(o)),o&&S>-1?(I=this.activeRows.indexOf(o),this.displayRowIterator(function($){var de=$.indexOf(o);de>-1&&$.splice(b?de:de+1,0,p)}),I>-1&&this.activeRows.splice(b?I:I+1,0,p),this.rows.splice(b?S:S+1,0,p)):b?(this.displayRowIterator(function($){$.unshift(p)}),this.activeRows.unshift(p),this.rows.unshift(p)):(this.displayRowIterator(function($){$.push(p)}),this.activeRows.push(p),this.rows.push(p)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",p.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),l||this.reRenderInPosition(),p}moveRow(s,r,o){this.dispatch("row-move",s,r,o),this.moveRowActual(s,r,o),this.regenerateRowNumbers(),this.dispatch("row-moved",s,r,o),this.dispatchExternal("rowMoved",s.getComponent())}moveRowActual(s,r,o){this.moveRowInArray(this.rows,s,r,o),this.moveRowInArray(this.activeRows,s,r,o),this.displayRowIterator(l=>{this.moveRowInArray(l,s,r,o)}),this.dispatch("row-moving",s,r,o)}moveRowInArray(s,r,o,l){var p,b,I;if(r!==o&&((p=s.indexOf(r))>-1&&(s.splice(p,1),b=s.indexOf(o),s.splice(b>-1?l?b+1:b:p,0,r)),s===this.getDisplayRows())){I=b>p?b:p+1;for(let N=p<b?p:b;N<=I;N++)s[N]&&this.styleRow(s[N],N)}}clearData(){this.setData([])}getRowIndex(s){return this.findRowIndex(s,this.rows)}getDisplayRowIndex(s){var r=this.getDisplayRows().indexOf(s);return r>-1&&r}nextDisplayRow(s,r){var o=this.getDisplayRowIndex(s),l=!1;return!1!==o&&o<this.displayRowsCount-1&&(l=this.getDisplayRows()[o+1]),!l||l instanceof sl&&"row"==l.type?l:this.nextDisplayRow(l,r)}prevDisplayRow(s,r){var o=this.getDisplayRowIndex(s),l=!1;return o&&(l=this.getDisplayRows()[o-1]),!r||!l||l instanceof sl&&"row"==l.type?l:this.prevDisplayRow(l,r)}findRowIndex(s,r){var o;return!!((s=this.findRow(s))&&(o=r.indexOf(s),o>-1))&&o}getData(s,r){var o=[];return this.getRows(s).forEach(function(p){"row"==p.type&&o.push(p.getData(r||"data"))}),o}getComponents(s){var r=[];return this.getRows(s).forEach(function(l){r.push(l.getComponent())}),r}getDataCount(s){return this.getRows(s).length}scrollHorizontal(s){this.scrollLeft=s,this.element.scrollLeft=s,this.dispatch("scroll-horizontal",s)}registerDataPipelineHandler(s,r){void 0!==r?(this.dataPipeline.push({handler:s,priority:r}),this.dataPipeline.sort((o,l)=>o.priority-l.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(s,r){void 0!==r?(this.displayPipeline.push({handler:s,priority:r}),this.displayPipeline.sort((o,l)=>o.priority-l.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(s,r,o){var l=this.table,p="",b=0,S=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof s)if((b=this.dataPipeline.findIndex(I=>I.handler===s))>-1)p="dataPipeline",r&&(b==this.dataPipeline.length-1?p="display":b++);else{if(!((b=this.displayPipeline.findIndex(I=>I.handler===s))>-1))return void console.error("Unable to refresh data, invalid handler provided",s);p="displayPipeline",r&&(b==this.displayPipeline.length-1?p="end":b++)}else p=s||"all",b=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===p&&b<this.redrawBlockRestoreConfig.index||S.indexOf(p)<S.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:s,skipStage:r,renderInPosition:o,stage:p,index:b});else{switch(this.dispatch("data-refeshing"),s||(this.activeRowsPipeline[0]=this.rows.slice(0)),p){case"all":case"dataPipeline":for(let I=b;I<this.dataPipeline.length;I++){let N=this.dataPipeline[I].handler(this.activeRowsPipeline[I].slice(0));this.activeRowsPipeline[I+1]=N||this.activeRowsPipeline[I].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":b=0,this.resetDisplayRows();case"displayPipeline":for(let I=b;I<this.displayPipeline.length;I++){let N=this.displayPipeline[I].handler((I?this.getDisplayRows(I-1):this.activeRows).slice(0),o);this.setDisplayRows(N||this.getDisplayRows(I-1).slice(0),I)}}Ns.elVisible(this.element)&&(o?this.reRenderInPosition():(s||this.table.columnManager.renderer.renderColumns(),this.renderTable(),l.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(s=>{var r=s.getCell(this.rowNumColumn);r&&r._generateContents()})}setActiveRows(s){this.activeRows=s,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(s,r){var o=!0;return r&&void 0!==this.displayRows[r]?(this.displayRows[r]=s,o=!0):(this.displayRows.push(s),o=r=this.displayRows.length-1),r==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),o}getDisplayRows(s){return void 0===s?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[s]||[]}getVisibleRows(s){return this.renderer.visibleRows(!s)}displayRowIterator(s){this.activeRowsPipeline.forEach(s),this.displayRows.forEach(s),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(s){var r;switch(s){case"active":r=this.activeRows;break;case"display":r=this.table.rowManager.getDisplayRows();break;case"visible":r=this.getVisibleRows(!0);break;default:r=this.chain("rows-retrieve",s,null,this.rows)||this.rows}return r}reRenderInPosition(s){this.redrawBlock?s?s():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(s)}initializeRenderer(){var s;(s="string"==typeof this.table.options.renderVertical?{virtual:cg,basic:mp}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new s(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(s,r){var o=s.getElement();r%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(s){s.normalizeHeight()})}adjustTableSize(){var s=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let r=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+r+"px)",this.element.style.height="calc(100% - "+r+"px)",this.element.style.maxHeight="calc(100% - "+r+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-r+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&s!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(s){s.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(s){var r=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,s?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(r),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var s=document.createEvent("Event");s.initEvent("scroll",!1,!0),this.element.dispatchEvent(s)}else this.element.dispatchEvent(new Event("scroll"))}}class lf extends Nc{constructor(s){super(s),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var s=document.createElement("div");return s.classList.add("tabulator-footer"),s}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(s,r){this.activate(r),this.element.appendChild(s),this.table.rowManager.adjustTableSize()}prepend(s,r){this.activate(r),this.element.insertBefore(s,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(s){s.parentNode.removeChild(s),this.deactivate()}deactivate(s){(!this.element.firstChild||s)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(s){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),s&&this.links.push(s)}redraw(){this.links.forEach(function(s){s.footerRedraw()})}}class nh extends Nc{constructor(s){super(s),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var s={};this.listeners.forEach(r=>{s[r]={handler:null,components:[]}}),this.listeners=s}bindSubscriptionWatchers(){var s=Object.keys(this.listeners),r=Object.values(this.componentMap);for(let o of r)for(let l of s)this.subscriptionChange(o+"-"+l,this.subscriptionChanged.bind(this,o,l))}subscriptionChanged(s,r,o){var l=this.listeners[r].components,p=l.indexOf(s),b=!1;o?-1===p&&(l.push(s),b=!0):this.subscribed(s+"-"+r)||p>-1&&(l.splice(p,1),b=!0),b&&this.updateEventListeners()}updateEventListeners(){for(let s in this.listeners){let r=this.listeners[s];r.components.length?r.handler||(r.handler=this.track.bind(this,s),this.el.addEventListener(s,r.handler)):r.handler&&(this.el.removeEventListener(s,r.handler),r.handler=null)}}track(s,r){var o=r.composedPath&&r.composedPath()||r.path,l=this.findTargets(o);l=this.bindComponents(s,l),this.triggerEvents(s,r,l)}findTargets(s){var r={};let o=Object.keys(this.componentMap);for(let l of s){let p=l.classList?[...l.classList]:[];if(p.filter(I=>this.abortClasses.includes(I)).length)break;let S=p.filter(I=>o.includes(I));for(let I of S)r[this.componentMap[I]]=l}return r.group&&r.group===r.row&&delete r.row,r}bindComponents(s,r){var o=Object.keys(r).reverse(),l=this.listeners[s],p={};for(let b of o){let S,I=r[b],N=this.previousTargets[b];if(N&&N.target===I)S=N.component;else switch(b){case"row":case"group":(l.components.includes("row")||l.components.includes("cell"))&&(S=this.table.rowManager.getVisibleRows().find(de=>de.getElement()===I));break;case"column":l.components.includes("column")&&(S=this.table.columnManager.findColumn(I));break;case"cell":l.components.includes("cell")&&(S=r.row.findCell(I))}S&&(r[b]=S,p[b]={target:I,component:S})}return this.previousTargets=p,r}triggerEvents(s,r,o){var l=this.listeners[s];for(let p in o)o[p]&&l.components.includes(p)&&this.dispatch(p+"-"+s,r,o[p])}}class cf{constructor(s){this.table=s,this.bindings={}}bind(s,r,o){this.bindings[s]||(this.bindings[s]={}),this.bindings[s][r]?console.warn("Unable to bind component handler, a matching function name is already bound",s,r,hanlder):this.bindings[s][r]=o}handle(s,r,o){if(this.bindings[s]&&this.bindings[s][o])return this.bindings[s][o].bind(null,r);"then"!==o&&"string"==typeof o&&!o.startsWith("_")&&console.error("The "+s+" component does not have a "+o+" function, have you checked that you have the correct Tabulator module installed?")}}class dg extends Nc{constructor(s){super(s),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var s;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((s=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=s.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((s=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=s.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var s=document.createElement("div");return s.classList.add("tabulator-loader"),s}createMsgElement(){var s=document.createElement("div");return s.classList.add("tabulator-loader-msg"),s.setAttribute("role","alert"),s}load(s,r,o,l,p){var b=++this.requestOrder;return this.dispatchExternal("dataLoading",s),s&&(0==s.indexOf("{")||0==s.indexOf("["))&&(s=JSON.parse(s)),this.confirm("data-loading",s,r,o,p)?(this.loading=!0,p||this.showLoader(),r=this.chain("data-params",[s,o,p],r||{},{}),r=this.mapParams(r,this.table.options.dataSendParams),this.chain("data-load",[s,r,o,p],Promise.resolve([])).then(N=>{!Array.isArray(N)&&"object"==typeof N&&(N=this.mapParams(N,this.objectInvert(this.table.options.dataReceiveParams)));var $=this.chain("data-loaded",N,null,N);b==this.requestOrder?(this.hideLoader(),!1!==$&&(this.dispatchExternal("dataLoaded",$),this.table.rowManager.setData($,l,!l))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(N=>{console.error("Data Load Error: ",N),this.dispatchExternal("dataLoadError",N),p||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",s),s||(s=[]),this.table.rowManager.setData(s,l,!l),Promise.resolve())}mapParams(s,r){var o={};for(let l in s)o[r.hasOwnProperty(l)?r[l]:l]=s[l];return o}objectInvert(s){var r={};for(let o in s)r[s[o]]=o;return r}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class hg{constructor(s,r,o){this.table=s,this.events={},this.optionsList=r||{},this.subscriptionNotifiers={},this.dispatch=o?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=o}subscriptionChange(s,r){this.subscriptionNotifiers[s]||(this.subscriptionNotifiers[s]=[]),this.subscriptionNotifiers[s].push(r),this.subscribed(s)&&this._notifiySubscriptionChange(s,!0)}subscribe(s,r){this.events[s]||(this.events[s]=[]),this.events[s].push(r),this._notifiySubscriptionChange(s,!0)}unsubscribe(s,r){var o;if(this.events[s]){if(r){if(!((o=this.events[s].findIndex(l=>l===r))>-1))return void console.warn("Cannot remove event, no matching event found:",s,r);this.events[s].splice(o,1)}else delete this.events[s];this._notifiySubscriptionChange(s,!1)}else console.warn("Cannot remove event, no events set on:",s)}subscribed(s){return this.events[s]&&this.events[s].length}_notifiySubscriptionChange(s,r){var o=this.subscriptionNotifiers[s];o&&o.forEach(l=>{l(r)})}_dispatch(){var o,s=Array.from(arguments),r=s.shift();return this.events[r]&&this.events[r].forEach((l,p)=>{let b=l.apply(this.table,s);p||(o=b)}),o}_debugDispatch(){var s=Array.from(arguments),r=s[0];return s[0]="ExternalEvent:"+s[0],(!0===this.debug||this.debug.includes(r))&&console.log(...s),this._dispatch(...arguments)}}class rh{constructor(s){this.events={},this.subscriptionNotifiers={},this.dispatch=s?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=s?this._debugChain.bind(this):this._chain.bind(this),this.confirm=s?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=s}subscriptionChange(s,r){this.subscriptionNotifiers[s]||(this.subscriptionNotifiers[s]=[]),this.subscriptionNotifiers[s].push(r),this.subscribed(s)&&this._notifiySubscriptionChange(s,!0)}subscribe(s,r,o=1e4){this.events[s]||(this.events[s]=[]),this.events[s].push({callback:r,priority:o}),this.events[s].sort((l,p)=>l.priority-p.priority),this._notifiySubscriptionChange(s,!0)}unsubscribe(s,r){var o;if(this.events[s]){if(r){if(!((o=this.events[s].findIndex(l=>l.callback===r))>-1))return void console.warn("Cannot remove event, no matching event found:",s,r);this.events[s].splice(o,1)}this._notifiySubscriptionChange(s,!1)}else console.warn("Cannot remove event, no events set on:",s)}subscribed(s){return this.events[s]&&this.events[s].length}_chain(s,r,o,l){var p=o;return Array.isArray(r)||(r=[r]),this.subscribed(s)?(this.events[s].forEach((b,S)=>{p=b.callback.apply(this,r.concat([p]))}),p):"function"==typeof l?l():l}_confirm(s,r){var o=!1;return Array.isArray(r)||(r=[r]),this.subscribed(s)&&this.events[s].forEach((l,p)=>{l.callback.apply(this,r)&&(o=!0)}),o}_notifiySubscriptionChange(s,r){var o=this.subscriptionNotifiers[s];o&&o.forEach(l=>{l(r)})}_dispatch(){var s=Array.from(arguments),r=s.shift();this.events[r]&&this.events[r].forEach(o=>{o.callback.apply(this,s)})}_debugDispatch(){var s=Array.from(arguments),r=s[0];return s[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...s),this._dispatch(...arguments)}_debugChain(){var s=Array.from(arguments),r=s[0];return s[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...s),this._chain(...arguments)}_debugConfirm(){var s=Array.from(arguments),r=s[0];return s[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...s),this._confirm(...arguments)}}let Gh=(()=>{class f{static register(r){f.tables.push(r)}static deregister(r){var o=f.tables.indexOf(r);o>-1&&f.tables.splice(o,1)}static lookupTable(r,o){var p,b,l=[];if("string"==typeof r){if((p=document.querySelectorAll(r)).length)for(var S=0;S<p.length;S++)(b=f.matchElement(p[S]))&&l.push(b)}else"undefined"!=typeof HTMLElement&&r instanceof HTMLElement||r instanceof Gd?(b=f.matchElement(r))&&l.push(b):Array.isArray(r)?r.forEach(function(I){l=l.concat(f.lookupTable(I))}):o||console.warn("Table Connection Error - Invalid Selector",r);return l}static matchElement(r){return f.tables.find(function(o){return r instanceof Gd?o===r:o.element===r})}}return f.tables=[],f})();function uf(f){f.forEach(function(s){s.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var _p={fitData:function(f){this.table.columnManager.renderer.reinitializeColumnWidths(f),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:uf,fitDataTable:uf,fitDataStretch:function(f){var s=0,r=this.table.rowManager.element.clientWidth,o=0,l=!1;f.forEach((p,b)=>{p.widthFixed||p.reinitializeWidth(),(this.table.options.responsiveLayout?p.modules.responsive.visible:p.visible)&&(l=p),p.visible&&(s+=p.getWidth())}),l?(o=r-s+l.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(l.setWidth(0),this.table.modules.responsiveLayout.update()),o>0?l.setWidth(o):l.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(f){var p,N,s=this.table.element.clientWidth,r=0,o=0,l=0,b=[],S=[],I=0,$=0;function de(qe){return"string"==typeof qe?qe.indexOf("%")>-1?s/100*parseInt(qe):parseInt(qe):qe}function Fe(qe,Et,xt,Gt){var Wt=[],Ti=0,an=0,Ui=0,Yi=l,gn=0,vn=0,Mn=[];function Fn(qi){return xt*(qi.column.definition.widthGrow||1)}function yn(qi){return de(qi.width)-xt*(qi.column.definition.widthShrink||0)}return qe.forEach(function(qi,Hn){var mr=Gt?yn(qi):Fn(qi);qi.column.minWidth>=mr?Wt.push(qi):qi.column.maxWidth&&qi.column.maxWidth<mr?(qi.width=qi.column.maxWidth,Et-=qi.column.maxWidth,(Yi-=Gt?qi.column.definition.widthShrink||1:qi.column.definition.widthGrow||1)&&(xt=Math.floor(Et/Yi))):(Mn.push(qi),vn+=Gt?qi.column.definition.widthShrink||1:qi.column.definition.widthGrow||1)}),Wt.length?(Wt.forEach(function(qi){Ti+=Gt?qi.width-qi.column.minWidth:qi.column.minWidth,qi.width=qi.column.minWidth}),gn=(an=Et-Ti)-(Ui=vn?Math.floor(an/vn):an)*vn,gn+=Fe(Mn,an,Ui,Gt)):(gn=vn?Et-Math.floor(Et/vn)*vn:Et,Mn.forEach(function(qi){qi.width=Gt?yn(qi):Fn(qi)})),gn}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(s-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),f.forEach(function(qe){var Et,xt,Gt;qe.visible&&(Et=qe.definition.width,xt=parseInt(qe.minWidth),Et?(Gt=de(Et),r+=Gt>xt?Gt:xt,qe.definition.widthShrink&&(S.push({column:qe,width:Gt>xt?Gt:xt}),I+=qe.definition.widthShrink)):(b.push({column:qe,width:0}),l+=qe.definition.widthGrow||1))}),o=s-r,p=Math.floor(o/l),$=Fe(b,o,p,!1),b.length&&$>0&&(b[b.length-1].width+=+$),b.forEach(function(qe){o-=qe.width}),(N=Math.abs($)+o)>0&&I&&($=Fe(S,N,Math.floor(N/I),!0)),S.length&&(S[S.length-1].width-=$),b.forEach(function(qe){qe.column.setWidth(qe.width)}),S.forEach(function(qe){qe.column.setWidth(qe.width)})}},hf={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},_g=Object.freeze({__proto__:null,LayoutModule:(()=>{class f extends bo{constructor(r){super(r,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var r=this.table.options.layout;f.modes[r]?this.mode=r:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+r),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){f.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return f.moduleName="layout",f.modes=_p,f})(),LocalizeModule:(()=>{class f extends bo{constructor(r){super(r),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Ns.deepClone(f.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let r in this.table.options.langs)this.installLang(r,this.table.options.langs[r]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(r){this.langList.default.headerFilters.default=r}setHeaderFilterColumnPlaceholder(r,o){this.langList.default.headerFilters.columns[r]=o,this.lang&&!this.lang.headerFilters.columns[r]&&(this.lang.headerFilters.columns[r]=o)}installLang(r,o){this.langList[r]?this._setLangProp(this.langList[r],o):this.langList[r]=o}_setLangProp(r,o){for(let l in o)r[l]&&"object"==typeof r[l]?this._setLangProp(r[l],o[l]):r[l]=o[l]}setLocale(r){if(!0===(r=r||"default")&&navigator.language&&(r=navigator.language.toLowerCase()),r&&!this.langList[r]){let l=r.split("-")[0];this.langList[l]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",r,l),r=l):(console.warn("Localization Error - Matching locale not found, using default: ",r),r="default")}this.locale=r,this.lang=Ns.deepClone(this.langList.default||{}),"default"!=r&&function o(l,p){for(var b in l)"object"==typeof l[b]?(p[b]||(p[b]={}),o(l[b],p[b])):p[b]=l[b]}(this.langList[r],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(r){return this.locale}getLang(r){return r?this.langList[r]:this.lang}getText(r,o){var l=(r=o?r+"|"+o:r).split("|");return this._getLangElement(l,this.locale)||""}_getLangElement(r,o){var l=this.lang;return r.forEach(function(p){var b;l&&(l=void 0!==(b=l[p])&&b)}),l}bind(r,o){this.bindings[r]||(this.bindings[r]=[]),this.bindings[r].push(o),o(this.getText(r),this.lang)}_executeBindings(){for(let r in this.bindings)this.bindings[r].forEach(o=>{o(this.getText(r),this.lang)})}}return f.moduleName="localize",f.langs=hf,f})(),CommsModule:(()=>{class f extends bo{constructor(r){super(r)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(r){var o=[];return Gh.lookupTable(r).forEach(p=>{this.table!==p&&o.push(p)}),o}send(r,o,l,p){var b=this.getConnections(r);b.forEach(S=>{S.tableComms(this.table.element,o,l,p)}),!b.length&&r&&console.warn("Table Connection Error - No tables matching selector found",r)}receive(r,o,l,p){if(this.table.modExists(o))return this.table.modules[o].commsReceived(r,l,p);console.warn("Inter-table Comms Error - no such module:",o)}}return f.moduleName="comms",f})()});class pf{constructor(s,r){this.bindStaticFuctionality(s),this.bindModules(s,_g,!0),r&&this.bindModules(s,r)}bindStaticFuctionality(s){s.moduleBindings={},s.extendModule=function(r,o,l){if(s.moduleBindings[r]){var p=s.moduleBindings[r][o];if(p)if("object"==typeof l)for(let b in l)p[b]=l[b];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",o)}else console.warn("Module Error - module does not exist:",r)},s.registerModule=function(r){Array.isArray(r)||(r=[r]),r.forEach(o=>{s.registerModuleBinding(o)})},s.registerModuleBinding=function(r){s.moduleBindings[r.moduleName]=r},s.findTable=function(r){var o=Gh.lookupTable(r,!0);return!(Array.isArray(o)&&!o.length)&&o},s.prototype.bindModules=function(){for(var r in this.modules={},s.moduleBindings){let o=s.moduleBindings[r];this.modules[r]=new o(this),o.prototype.moduleCore?this.modulesCore[r]=this.modules[r]:this.modulesRegular[r]=this.modules[r]}}}bindModules(s,r,o){var l=Object.values(r);o&&l.forEach(p=>{p.prototype.moduleCore=!0}),s.registerModule(l)}}let Gd=(()=>{class f{constructor(r,o){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new cf(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new Uh(this,"table constructor"),this.initialized=!1,this.initializeElement(r)&&(this.initialzeCoreSystems(o),setTimeout(()=>{this._create()})),Gh.register(this)}initializeElement(r){return"undefined"!=typeof HTMLElement&&r instanceof HTMLElement?(this.element=r,!0):"string"==typeof r?(this.element=document.querySelector(r),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",r),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",r),!1)}initialzeCoreSystems(r){this.columnManager=new lg(this),this.rowManager=new ug(this),this.footerManager=new lf(this),this.dataLoader=new dg(this),this.bindModules(),this.options=this.optionsList.generate(f.defaultOptions,r),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new hg(this,this.options,this.options.debugEventsExternal),this.eventBus=new rh(this.options.debugEventsInternal),this.interactionMonitor=new nh(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var r=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==r.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var l,r=this.element,o=this.options;if("TABLE"===r.tagName){this.originalElement=this.element,l=document.createElement("div");var p=r.attributes;for(var b in p)"object"==typeof p[b]&&l.setAttribute(p[b].name,p[b].value);r.parentNode.replaceChild(l,r),this.element=r=l}for(r.classList.add("tabulator"),r.setAttribute("role","grid");r.firstChild;)r.removeChild(r.firstChild);o.height&&(o.height=isNaN(o.height)?o.height:o.height+"px",r.style.height=o.height),!1!==o.minHeight&&(o.minHeight=isNaN(o.minHeight)?o.minHeight:o.minHeight+"px",r.style.minHeight=o.minHeight),!1!==o.maxHeight&&(o.maxHeight=isNaN(o.maxHeight)?o.maxHeight:o.maxHeight+"px",r.style.maxHeight=o.maxHeight)}_initializeTable(){var r=this.element,o=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let b in this.modulesCore)this.modulesCore[b].initialize();if("string"==typeof o.placeholder){var l=document.createElement("div");l.classList.add("tabulator-placeholder");var p=document.createElement("span");p.innerHTML=o.placeholder,l.appendChild(p),o.placeholder=l}r.appendChild(this.columnManager.getElement()),r.appendChild(this.rowManager.getElement()),o.footerElement&&this.footerManager.activate(),o.autoColumns&&o.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let b in this.modulesRegular)this.modulesRegular[b].initialize();this.columnManager.setColumns(o.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var r=this.element;for(Gh.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(o){o.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];r.firstChild;)r.removeChild(r.firstChild);r.classList.remove("tabulator")}_detectBrowser(){var r=navigator.userAgent||navigator.vendor||window.opera;r.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):r.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):r.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(r){return new Promise((o,l)=>{var p=document.createElement("input");p.type="file",p.accept=r||".json,application/json",p.addEventListener("change",b=>{var N,S=p.files[0],I=new FileReader;I.readAsText(S),I.onload=$=>{try{N=JSON.parse(I.result)}catch(de){return console.warn("File Load Error - File contents is invalid JSON",de),void l(de)}this.setData(N).then(de=>{o(de)}).catch(de=>{o(de)})},I.onerror=$=>{console.warn("File Load Error - Unable to read file"),l()}}),p.click()})}setData(r,o,l){if(this.initialized)return this.dataLoader.load(r,o,l,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(r){return this.rowManager.getData(r)}getDataCount(r){return this.rowManager.getDataCount(r)}replaceData(r,o,l){if(this.initialized)return this.dataLoader.load(r,o,l,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(r){var o=0;if(this.initialized)return new Promise((l,p)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?r.forEach(b=>{var S=this.rowManager.findRow(b[this.options.index]);S&&(o++,S.updateData(b).then(()=>{--o||l()}))}):(console.warn("Update Error - No data provided"),p("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(r,o,l){if(this.initialized)return new Promise((p,b)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?this.rowManager.addRows(r,o,l).then(S=>{var I=[];S.forEach(function(N){I.push(N.getComponent())}),p(I)}):(console.warn("Update Error - No data provided"),b("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(r){var o=[],l=0;if(this.initialized)return new Promise((p,b)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?r.forEach(S=>{var I=this.rowManager.findRow(S[this.options.index]);l++,I?I.updateData(S).then(()=>{l--,o.push(I.getComponent()),l||p(o)}):this.rowManager.addRows(S).then(N=>{l--,o.push(N[0].getComponent()),l||p(o)})}):(console.warn("Update Error - No data provided"),b("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(r){var o=this.rowManager.findRow(r);return o?o.getComponent():(console.warn("Find Error - No matching row found:",r),!1)}getRowFromPosition(r,o){var l=this.rowManager.getRowFromPosition(r,o);return l?l.getComponent():(console.warn("Find Error - No matching row found:",r),!1)}deleteRow(r){var o=[];Array.isArray(r)||(r=[r]);for(let l of r){let p=this.rowManager.findRow(l,!0);if(!p)return console.error("Delete Error - No matching row found:",l),Promise.reject("Delete Error - No matching row found");o.push(p)}return o.sort((l,p)=>this.rowManager.rows.indexOf(l)>this.rowManager.rows.indexOf(p)?1:-1),o.forEach(l=>{l.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(r,o,l){if(this.initialized)return"string"==typeof r&&(r=JSON.parse(r)),this.rowManager.addRows(r,o,l).then(p=>p[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(r,o){var l=this.rowManager.findRow(r);return"string"==typeof o&&(o=JSON.parse(o)),l?l.updateData(o).then(()=>l.getComponent()):this.rowManager.addRows(o).then(p=>p[0].getComponent())}updateRow(r,o){var l=this.rowManager.findRow(r);return"string"==typeof o&&(o=JSON.parse(o)),l?l.updateData(o).then(()=>{resolve(l.getComponent())}):(console.warn("Update Error - No matching row found:",r),Promise.reject("Update Error - No matching row found"))}scrollToRow(r,o,l){var p=this.rowManager.findRow(r);return p?this.rowManager.scrollToRow(p,o,l):(console.warn("Scroll Error - No matching row found:",r),Promise.reject("Scroll Error - No matching row found"))}moveRow(r,o,l){var p=this.rowManager.findRow(r);p?p.moveToRow(o,l):console.warn("Move Error - No matching row found:",r)}getRows(r){if(this.initialized)return this.rowManager.getComponents(r);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(r,o){var l=this.rowManager.findRow(r);return l?this.rowManager.getRowPosition(l,o):(console.warn("Position Error - No matching row found:",r),!1)}setColumns(r){this.initialized?this.columnManager.setColumns(r):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(r){return this.columnManager.getComponents(r)}getColumn(r){var o=this.columnManager.findColumn(r);return o?o.getComponent():(console.warn("Find Error - No matching column found:",r),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(r){var o=this.columnManager.findColumn(r);if(!o)return console.warn("Column Show Error - No matching column found:",r),!1;o.show()}hideColumn(r){var o=this.columnManager.findColumn(r);if(!o)return console.warn("Column Hide Error - No matching column found:",r),!1;o.hide()}toggleColumn(r){var o=this.columnManager.findColumn(r);if(!o)return console.warn("Column Visibility Toggle Error - No matching column found:",r),!1;o.visible?o.hide():o.show()}addColumn(r,o,l){var p=this.columnManager.findColumn(l);return this.columnManager.addColumn(r,o,p).then(b=>b.getComponent())}deleteColumn(r){var o=this.columnManager.findColumn(r);return o?o.delete():(console.warn("Column Delete Error - No matching column found:",r),Promise.reject())}updateColumnDefinition(r,o){var l=this.columnManager.findColumn(r);return l?l.updateDefinition(o):(console.warn("Column Update Error - No matching column found:",r),Promise.reject())}moveColumn(r,o,l){var p=this.columnManager.findColumn(r),b=this.columnManager.findColumn(o);p?b?this.columnManager.moveColumn(p,b,l):console.warn("Move Error - No matching column found:",b):console.warn("Move Error - No matching column found:",r)}scrollToColumn(r,o,l){return new Promise((p,b)=>{var S=this.columnManager.findColumn(r);return S?this.columnManager.scrollToColumn(S,o,l):(console.warn("Scroll Error - No matching column found:",r),Promise.reject("Scroll Error - No matching column found"))})}redraw(r){this.initialized?(this.columnManager.redraw(r),this.rowManager.redraw(r)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(r){this.options.height=isNaN(r)?r:r+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(r,o){this.externalEvents.subscribe(r,o)}off(r,o){this.externalEvents.unsubscribe(r,o)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(r,o){return!!this.modules[r]||(o&&console.error("Tabulator Module Not Installed: "+r),!1)}module(r){var o=this.modules[r];return o||console.error("Tabulator module not installed: "+r),o}}return f.defaultOptions=ag,f})();new pf(Gd),new pf(class extends Gd{},Ch);let Gm=(()=>{class f{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null,this.data=[]}get hot(){return null!=this.hotInstance?this.hotInstance:null}initGrid(r){Gd.registerModule([Yp,Up,vh,Zp]),this.hotInstance=new Gd(r,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button"})}AddStringToGrid(r){if(r.startsWith("{")&&r.endsWith("}"))try{var o=JSON.parse(r);return void this.objectsForGrid.push(o)}catch(b){}if(r.startsWith("[")&&r.endsWith("]"))try{for(var l=JSON.parse(r),p=0;p<l.length;p++)this.objectsForGrid.push(l[p]);return}catch(b){}this.stringsForGrid.push(r)}AddData(r){this.data.push(r)}AddDataToGrid(r){return"string"==typeof r?(this.AddStringToGrid(null==r?void 0:r.toString()),void this.dataObject.push([null==r?void 0:r.toString()])):"object"==typeof r?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(r)),void this.dataObject.push([r])):(this.dataObject.push([r.ToString()]),void this.AddStringToGrid(r.toString()))}ClearDataGrid(){this.data=[],this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(r,o){return null!=r&&r.hasOwnProperty(o)}AddObjectToFinishGrid(){for(var r,o,l=[],p=this.objectsForGrid,b=0;b<p.length;b++)"string"==typeof(S=p[b])?l.push("_"):l.push(...Object.keys(S));var I=new Set(l);l=Array.from(I);var N=[...l],$=[];for(b=0;b<p.length;b++){for(var S=p[b],de={Nr:b+1},Fe=0;Fe<l.length;Fe++){var qe=l[Fe],Et=this.goodNameForKey(qe);if(S&&this.hasOwnProperty(S,qe)){var xt=S[qe];de[Et]="object"==typeof xt?JSON.stringify(xt):xt}else de[Et]="string"==typeof S&&0===Fe?S:""}$.push(de)}l.splice(0,0,"Nr"),N.splice(0,0,"Nr");var Gt=this.Headers(N);null===(r=this.hot)||void 0===r||r.setColumns(Gt),null===(o=this.hot)||void 0===o||o.replaceData($)}Headers(r){return r.map(o=>({title:o,field:this.goodNameForKey(o),formatter:function(l,p,b){try{var S=l.getValue().toString();if(S.length<2)return S;if(S.startsWith("[")&&S.endsWith("]"))try{var I=JSON.parse(S),N=l.getRow().getData().Nr,de=l.getColumn().getField()+"_"+N;return b(function(){new Gd("#"+de,{data:I,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+de+"'>"+S+"</div>"}catch(Fe){return S}}catch(Fe){return S}return l.getValue()}}))}AddStringToFinishGrid(){for(var r,o,l=[],p=0;p<this.stringsForGrid.length;p++)l.push({Nr:p+1,Text:this.stringsForGrid[p]});var S=this.Headers(["Nr","Text"]);null===(r=this.hot)||void 0===r||r.setColumns(S),null===(o=this.hot)||void 0===o||o.replaceData(l)}FinishGrid(){for(var r,o=0;o<this.data.length;o++)this.AddDataToGrid(this.data[o]);this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),null===(r=this.hot)||void 0===r||r.redraw(!0))}goodNameForKey(r){var o=r;return o.replace(".","_")}copyClip(){var r;null===(r=this.hot)||void 0===r||r.copyToClipboard()}copyCSV(){var r;null===(r=this.hot)||void 0===r||r.download("csv","data.csv",{bom:!0})}}return f.\u0275fac=function(r){return new(r||f)},f.\u0275prov=st.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();var ff=g(5137),gf=g(91083),yg=g(20549),Wm=g(57261),vp=g(43954),Wh=g(92181),Eg=g(4834),mf=g(20773),_f=g(33);function jm(f,s){1&f&&st._UZ(0,"mat-spinner")}const bu=function(f){return["/","automation","loadexample",f]};function zm(f,s){if(1&f&&(st.TgZ(0,"a",15),st._uU(1),st.qZA()),2&f){const r=st.oxw();st.Q6J("routerLink",st.VKq(2,bu,r.mustLoadDemoBlock)),st.xp6(1),st.hij("Direct link ",r.mustLoadDemoBlock,"")}}function Ym(f,s){if(1&f&&(st.TgZ(0,"mat-tab",27),st._UZ(1,"div",22),st.qZA()),2&f){const r=st.oxw(3);st.xp6(1),st.Q6J("id","steps"+r.myId)}}function vf(f,s){if(1&f){const r=st.EpF();st.TgZ(0,"mat-tab-group",18),st.NdJ("selectedTabChange",function(l){return st.CHM(r),st.oxw(2).changeTabOutput(l)}),st.TgZ(1,"mat-tab",19),st.TgZ(2,"ngx-codemirror",20),st.NdJ("ngModelChange",function(l){return st.CHM(r),st.oxw(2).showInner=l}),st.qZA(),st.qZA(),st.TgZ(3,"mat-tab",21),st._UZ(4,"div",22),st.qZA(),st.TgZ(5,"mat-tab",23),st._UZ(6,"div",22),st.qZA(),st.TgZ(7,"mat-tab",24),st._UZ(8,"canvas",25),st.qZA(),st.YNc(9,Ym,2,1,"mat-tab",26),st.qZA()}if(2&f){const r=st.oxw(2);st.xp6(2),st.Q6J("options",r.editorPlain)("ngModel",r.showInner),st.xp6(2),st.Q6J("id","htmlText"+r.myId),st.xp6(2),st.Q6J("id","htmlOutput"+r.myId),st.xp6(2),st.Q6J("id","barchart"+r.myId),st.xp6(1),st.Q6J("ngIf",!1)}}function bf(f,s){if(1&f){const r=st.EpF();st.TgZ(0,"ngx-codemirror",20),st.NdJ("ngModelChange",function(l){return st.CHM(r),st.oxw(2).showJSCode=l}),st.qZA()}if(2&f){const r=st.oxw(2);st.Q6J("options",r.editorJSOptions)("ngModel",r.showJSCode)}}function yf(f,s){if(1&f){const r=st.EpF();st.TgZ(0,"ngx-codemirror",20),st.NdJ("ngModelChange",function(l){return st.CHM(r),st.oxw(2).showXMLCode=l}),st.qZA()}if(2&f){const r=st.oxw(2);st.Q6J("options",r.editorXMLOptions)("ngModel",r.showXMLCode)}}function Cg(f,s){if(1&f){const r=st.EpF();st.TgZ(0,"ngx-codemirror",20),st.NdJ("ngModelChange",function(l){return st.CHM(r),st.oxw(2).showBlocksDefinition=l}),st.qZA()}if(2&f){const r=st.oxw(2);st.Q6J("options",r.editorJSOptions)("ngModel",r.showBlocksDefinition)}}function Xm(f,s){if(1&f&&(st.TgZ(0,"mat-grid-tile"),st.YNc(1,vf,10,6,"mat-tab-group",16),st.YNc(2,bf,1,2,"ngx-codemirror",17),st.YNc(3,yf,1,2,"ngx-codemirror",17),st.YNc(4,Cg,1,2,"ngx-codemirror",17),st.qZA()),2&f){const r=st.oxw();st.xp6(1),st.Q6J("ngIf",r.ShowOutput()),st.xp6(1),st.Q6J("ngIf",r.ShowCode()),st.xp6(1),st.Q6J("ngIf",r.ShowXML()),st.xp6(1),st.Q6J("ngIf",r.ShowBlocksDefinition())}}var mc=(()=>{return(f=mc||(mc={}))[f.ShowNone=0]="ShowNone",f[f.ShowBlocksDefinition=1]="ShowBlocksDefinition",f[f.ShowXML=2]="ShowXML",f[f.ShowOutput=3]="ShowOutput",f[f.ShowCode=4]="ShowCode",f[f.Stop=100]="Stop",mc;var f})();let bp=(()=>{class f{constructor(r,o,l,p,b,S,I){var N;this.tabulator=r,this.DetailsApp=o,this.loadDemo=l,this.ar=p,this.ta=b,this.snackBar=S,this.dialog=I,this.lastData=null,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=mc.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.mustLoadDemoBlock="",this.intro=z(),this.myId=0,this.bs=new hh,this.bh2=new Fp,this.bh=null,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.tabIndex=0,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++f.id,this.ar.paramMap.subscribe($=>{this.mustLoadDemoBlock=$.get("demoblock")}),this.ta.receiveData().subscribe($=>{"DisplayBlocklyComponent"==$[0]&&this[$[1]]()}),null===(N=this.DetailsApp.LocalAPI)||void 0===N||N.IsAlive().subscribe()}createIntro(){var r,o=null===(r=this.DetailsApp.settings)||void 0===r?void 0:r.tourSteps.map(l=>{var p;return{title:(null===(p=this.DetailsApp.settings)||void 0===p?void 0:p.title)||"Blockly Automation",intro:l.text,element:document.querySelector(l.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:o}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy(),this.fullHtmlData="",this.fullTextData=""}ShowText(r){if(null!=r){var o=r.toString();this.fullTextData+="\n"+o}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(r){if(null!=r){var o=r.toString();this.fullHtmlData+="<br/>"+o}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(r){var o,l=null===(o=document.getElementById("barchart"+this.myId))||void 0===o?void 0:o.getContext("2d");if(null!=l)try{var p=null==r?void 0:r.toString(),b=JSON.parse(p);b&&b.type&&(this.myChart=new Kr(l,b),console.log("make chart",r))}catch(S){this.myChart=null}else console.log("not canvas available for chart!")}changeTab(r){switch(r){case 0:break;case 1:this.theTextOutput().innerText=this.fullTextData;break;case 2:this.finishHTMLOutput();break;case 3:this.ShowChart(this.lastData);break;case 4:const o=document.getElementById("steps"+this.myId);if(null==o)return void window.alert("gridElement is null");this.tabulator.ClearDataGrid(),this.tabulator.initGrid(o),this.tabulator.FinishGrid();break;default:window.alert("tab "+r+" not implemented")}}changeTabOutput(r){console.log(r.index),this.tabIndex=r.index,this.changeTab(r.index)}RunCode(){this.snackBar.open("Program start","Executing...");var r=this,o=this.run.latestCode;r.CalculateXMLAndCode(),this.bh=new Ah(this.demoWorkspace,e),this.run=this.bh,this.showCodeAndXML=mc.ShowOutput,this.clearOutput(),this.showInner='{ "step_start": "start program",',this.run.runCode((b,S)=>{try{return new Interpreter(b,S)}catch(I){r.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(I)),this.showCodeAndXML=mc.ShowCode}},b=>{r.step++,r.showInner+=`\n           \n"step_${r.step}" : "${b}",`,r.lastData=b,r.tabulator.AddData(b),r.ShowHTML(b),r.ShowText(b)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),r.showInner+='\n "step_end" : "program executed; see results below"\n}',this.changeTab(this.tabIndex)},o)}ShowLocalAPI(r){var o;null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.LoadBlockContent(r).subscribe(l=>{var p=t.Xml.textToDom(l);null!=this.demoWorkspace&&(t.Xml.clearWorkspaceAndLoadFromXml(p,this.demoWorkspace),window.alert("please press execute button"))})}ShowDemo(r){this.mustLoadDemoBlock=r,this.loadDemo.getDemoBlock(r).subscribe(o=>{var l=t.Xml.textToDom(o);if(null!=this.demoWorkspace){try{t.Xml.clearWorkspaceAndLoadFromXml(l,this.demoWorkspace)}catch(p){return(null==r?void 0:r.toString().indexOf("docker"))>-1?void(window.confirm("This demo must run with Desktop App.\nDo you want to go to download page?")&&window.open("http://ba.serviciipeweb.ro/")):(null==r?void 0:r.toString().indexOf("chrome"))>-1?void(window.confirm("This demo must run with MyPC swagger.\nDo you want to go to download page?")&&window.open("https://github.com/ignatandrei/BlocklyAutomation/wiki/MyPC")):void window.alert("error "+r)}window.alert("please press execute button")}})}registerSwaggerBlocksObjects(r,o){return o.fieldXMLObjects.map(p=>t.Xml.textToDom(p))}registerSwaggerBlocksAPIControllers(r,o,l){return o.findfieldXMLFunctions(l).map(b=>t.Xml.textToDom(b.gui))}registerSwaggerBlocksAPIAll(r,o){return o.fieldXMLFunctions.map(p=>t.Xml.textToDom(p.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,cs.R)(window,"TabDownload").subscribe(r=>this.tabulator.copyCSV()),(0,cs.R)(window,"TabCopy").subscribe(r=>this.tabulator.copyClip())}ShowBlocks(){this.dialog.open(Id,{}).afterClosed().subscribe(o=>{if(console.log("The dialog was closed with ",o),o){var l=o;switch(l.Source){case"Demos":try{console.log("into try"),this.ShowDemo(o.id)}catch(p){window.alert(o.id),window.alert(p)}break;case"LocalAPI":this.ShowLocalAPI(o.id);break;default:window.alert(l.Source)}}})}LoadSwagger(){var r=this,l=(new B.L(""),window.prompt("Swagger/OpenAPI ? "));if(l){if(l.endsWith(".html")||l.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");r.LoadSwaggerFromUrl(l).then(p=>{p.hasError?window.confirm("error loading swagger - most probably CORS\n Please download the windows app to try this.")&&window.open("http://ba.serviciipeweb.ro/"):(r.addToToolboxSwagger(p,this),window.alert("loaded successfully"))})}}LoadSwaggerFromUrl(r,o){var l=this;return(0,E.Z)(function*(){var p=new B.L(r),b=yield p.ParseSwagger();return b.name=o||r,b.hasError?b:l.LoadSwaggerFromAPI(b)})()}LoadSwaggerFromAPI(r){if(r.hasError)return console.error("error in swagger",r.name),r;this.swaggerData.push(r);for(var o=0;o<r.GenerateBlocks.length;o++){var l=r.GenerateBlocks[o];null==t.getMainWorkspace()&&console.log("#38 here in loadSwagger from api is not ok",t.getMainWorkspace()),l(t.Blocks,e,this.demoWorkspace)}for(o=0;o<r.GenerateFunctions.length;o++)(l=r.GenerateFunctions[o])(t.Blocks,e);return r.metaBlocks()(t.Blocks,e),r}StartRegister(){var r,o=[...Array(50).keys()].map(I=>this.CategorySwaggerHidden(I)).join(""),l=this.DetailsApp.customCategories,p=[this.bs.defaultBlocks.fieldXML(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${this.bs.ttsBlock.fieldXML()}\n        ${this.bs.pianoBlock.fieldXML()}\n        </category>  \n            ${this.bs.filterBlocks.fieldXML()}\n                \n                ${this.bs.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${this.bs.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${this.bs.currentDateBlock.fieldXML()}\n          ${this.bs.dateFromTextBlock.fieldXML()}\n          ${this.bs.waitBlocks1.fieldXML()}\n          ${this.bs.waitBlocks2.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${this.bs.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${this.bs.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${this.bs.guiBlocks.fieldXML()}\n              ${this.bs.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              <category name="GenHTML" id="Generate">\n              ${this.bs.htmlblocks.fieldXML()}\n              </category>\n              <category name="Parser" id="parseHTML">\n              ${this.bs.HTMLParserBlocks.fieldXML()}\n              </category>\n              </category>\n              <category name="Objects" id="objects">\n              ${this.bs.propBlocks.fieldXML()}\n              ${this.bs.createObjectBlocks.fieldXML()}\n              \n              </category>\n              <category id="XHR" name="Request">\n            ${this.bs.xhrBlocks.fieldXML()}\n            ${this.bs.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${this.bs.waitBlocks1.fieldXML()}\n          ${this.bs.waitBlocks2.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${this.bs.trycatchFinBlock.fieldXML()}\n        ${this.bs.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${l}\n      \n      <category name="Swagger" id="catSwagger" expanded='false' >          \n          ${o}\n        </category> \n       \n        `];this.initialize(p),this.bs.filterBlocks.definitionBlocks(t.Blocks,e),this.bs.waitBlocks2.definitionBlocks(t.defineBlocksWithJsonArray,e),this.bs.xhrBlocks.definitionBlocks(t.Blocks,e),this.bs.propBlocks.definitionBlocks(t.Blocks,e),this.bs.guiBlocks.definitionBlocks(t.Blocks,e),this.bs.convertersBlocks.definitionBlocks(t.Blocks,e),this.bs.exportFileBlock.definitionBlocks(t.Blocks,e),this.bs.createObjectBlocks.definitionBlocks(t.Blocks,e,t.Extensions,t.Mutator),this.bs.currentDateBlock.definitionBlocks(t.Blocks,e),this.bs.dateFromTextBlock.definitionBlocks(t.Blocks,e),this.bs.waitBlocks1.definitionBlocks(t.Blocks,e),this.bs.commentBlock.definitionBlocks(t.Blocks,e),this.bs.trycatchFinBlock.definitionBlocks(t.Blocks,e),this.bs.auth0Blocks.definitionBlocks(t.Blocks,e),this.bs.windowsCreds.definitionBlocks(t.Blocks,e),this.bs.chartBlock.definitionBlocks(t.Blocks,e),this.bs.emailBlocks.definitionBlocks(t.Blocks,e),this.bs.htmlblocks.definitionBlocks(t.Blocks,e),this.bs.HTMLParserBlocks.definitionBlocks(t.Blocks,e),this.bs.ttsBlock.definitionBlocks(t.Blocks,e),this.bs.pianoBlock.definitionBlocks(t.Blocks,e);var b=this.DetailsApp.swaggersDict,S=new Map;b.forEach((I,N)=>{var $=!I.hasError;console.log("show swagger: "+N+":"+$),$&&S.set(N,this.LoadSwaggerFromAPI(I))}),(null===(r=this.DetailsApp.LocalAPI)||void 0===r?void 0:r.WasAlive)&&this.LoadSwaggerFromUrl(this.DetailsApp.LocalAPI.urL+"swagger/v1/swagger.json","LocalAutomation"),window.setTimeout(this.afterTimeout,2e3,this)}SaveBlocks(){this.bh2.saveState(t.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===mc.ShowBlocksDefinition}ShowSelection(){return mc[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==mc.ShowNone}ShowOutput(){return this.showCodeAndXML===mc.ShowOutput}ShowCode(){return this.showCodeAndXML===mc.ShowCode}ShowXML(){return this.showCodeAndXML===mc.ShowXML}CalculateXMLAndCode(){var r=t.Xml.workspaceToDom(this.demoWorkspace,!0),o=t.Xml.domToPrettyText(r);this.showJSCode=this.run.latestCode,this.showXMLCode=o;var l=this.parseTextForBlocks(o);this.showBlocksDefinition=l.map(p=>{try{return`Blockly.Blocks['${p}']={ init: \n`+t.Blocks[p].init.toString()+`};\n};\nBlockly.JavaScript['${p}']=`+e[p].toString()+";"}catch(I){return console.error("parse definition : "+p,I),"//Error for "+p}}).join("\n")}parseTextForBlocks(r){var o=[];if(r.indexOf('<block type="')>=0)for(var l=r.split('<block type="'),p=1;p<l.length;p++){var b=l[p].split('"')[0];o.push(b)}return o}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=mc.ShowNone,setTimeout(o=>{t.svgResize(o)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var r=window.prompt("Name?","blocks.txt");null!=r&&this.bh2.DownloadBlocks(t.Xml,this.demoWorkspace,r)}changeListener(r){this.readThis(r.target)}readThis(r){var o=r.files[0],l=new FileReader,p=this;l.onloadend=function(b){p.bh2.LoadFile(t.Xml,p.demoWorkspace,l.result),p.run.resetInterpreter()},l.readAsText(o)}CategorySwaggerHidden(r){return`<category name='swagger_hidden_${r}' hidden='true' >${r}</category>`}SaveToLocalAPI(){var r,o,l;if(0==((null===(o=null===(r=this.DetailsApp)||void 0===r?void 0:r.LocalAPI)||void 0===o?void 0:o.WasAlive)||!1))return this.LoadLocalAPI(),void window.alert("local api it is not yet loaded - please try again after loading");var p=t.Xml.workspaceToDom(this.demoWorkspace,!0),b=t.Xml.domToPrettyText(p),S=new D.q,I=window.prompt("name of the blocks?");null!=I&&(S.id=I,S.blocks="",S.categories="",S.description="",null===(l=this.DetailsApp.LocalAPI)||void 0===l||l.SaveBlock(S,b).subscribe(N=>{console.log("number blocks",N),window.alert("saved !")}))}LoadLocalAPI(){var r,o,l=this;return null===(o=null===(r=l.DetailsApp.LocalAPI)||void 0===r?void 0:r.IsAlive())||void 0===o?void 0:o.pipe((0,go.K)(p=>{var b;throw window.alert(`cannot load ${null===(b=l.DetailsApp.LocalAPI)||void 0===b?void 0:b.urL}`),p})).subscribe(p=>{var b;if(!p){if(!window.confirm("LocalAPI is not alive.\n Do you want to downlod and run ?"))return;l.DetailsApp.LocalAPI.download()}var S=(null===(b=l.DetailsApp.LocalAPI)||void 0===b?void 0:b.urL)||"";l.LoadSwaggerFromUrl(S+="swagger/v1/swagger.json").then(I=>{I.hasError?window.alert("error loading local api"):(I.name="LocalAPI",l.addToToolboxSwagger(I,this),window.alert("loaded successfully"))})})}initialize(r){var o,l,p;const b=document.getElementById("blocklyDiv"+this.myId);if(null!=b){var S=r.map(Fe=>`<sep></sep>${Fe}`);if(this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">    \n    ${S}\n    </xml>`,this.demoWorkspace=t.inject(b,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new C(this.demoWorkspace).init(),((null===(l=null===(o=this.DetailsApp.settings)||void 0===o?void 0:o.startBlocks)||void 0===l?void 0:l.length)||0)>0)try{var $=((null===(p=this.DetailsApp.settings)||void 0===p?void 0:p.startBlocks)||[]).join("\n"),de=t.Xml.textToDom($);t.Xml.clearWorkspaceAndLoadFromXml(de,this.demoWorkspace)}catch(Fe){console.error("error when load default blocks",Fe)}this.bh=new Ah(this.demoWorkspace,e),this.run=this.bh;var N=this;this.demoWorkspace.addChangeListener(function(Fe){Fe.isUiEvent||(N.run.resetInterpreter(),N.run.generateCodeAndLoadIntoInterpreter(),N.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){this.bh2.restoreState(t.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(r,o){var l,p=r.findCategSwaggerFromPaths().sort().map(qe=>`<category name='${qe}' custom='func_${r.name}_${qe}'></category>`).join("\n"),b=(null==o?void 0:o.CategorySwaggerHidden(null==o?void 0:o.swaggerLoaded))||"",S=o.toolboxXML,I=`<category name='${r.name}'>\n<category name='API' id='func_${r.name}'>\n${p}\n</category>\n${r.categSwagger()}\n\n<category name='meta' id='meta_${r.name}'>\n<block type='meta_swagger_controllers_${r.name}'></block>\n<block type='meta_swagger_controllers_actions_${r.name}'></block>\n</category>\n\n</category>\n`;if(S=S.replace(b,I),o.swaggerLoaded++,o.toolboxXML=S,null===(l=null==o?void 0:o.demoWorkspace)||void 0===l||l.updateToolbox(S),null!=(null==o?void 0:o.demoWorkspace)){var $="objects_"+r.nameCategSwagger(),de="AllApi_"+r.nameCategSwagger(),Fe=r;o.demoWorkspace.registerToolboxCategoryCallback($,qe=>o.registerSwaggerBlocksObjects(qe,Fe)),o.demoWorkspace.registerToolboxCategoryCallback(de,qe=>o.registerSwaggerBlocksAPIAll(qe,Fe)),r.findCategSwaggerFromPaths().forEach(qe=>{var Et;null===(Et=null==o?void 0:o.demoWorkspace)||void 0===Et||Et.registerToolboxCategoryCallback(`func_${r.name}_${qe}`,xt=>o.registerSwaggerBlocksAPIControllers(xt,r,qe))})}}afterTimeout(r){var o,l,p;if(r.loadedCompletely=!0,null!=(null==r?void 0:r.swaggerData))if(r.toolboxXML=r.toolboxXML.replace("Swagger",`Swagger(${r.swaggerData.length})`),r.swaggerData.forEach(N=>{r.addToToolboxSwagger(N,r)}),null!=(null==r?void 0:r.mustLoadDemoBlock))r.ShowDemo(null==r?void 0:r.mustLoadDemoBlock);else{if(((null===(l=null===(o=r.DetailsApp.settings)||void 0===o?void 0:o.startBlocks)||void 0===l?void 0:l.length)||0)>0)try{var S=((null===(p=r.DetailsApp.settings)||void 0===p?void 0:p.startBlocks)||[]).join("\n");if((null==S?void 0:S.length)>62){var I=t.Xml.textToDom(S);t.Xml.clearWorkspaceAndLoadFromXml(I,r.demoWorkspace)}}catch(N){console.log("error when load default blocks",N)}r.restoreBlocks()}}}return f.id=0,f.\u0275fac=function(r){return new(r||f)(st.Y36(Gm),st.Y36(Ps.d),st.Y36(ff.F),st.Y36(gf.gz),st.Y36(yg.v),st.Y36(Wm.ux),st.Y36(Br.uw))},f.\u0275cmp=st.Xpm({type:f,selectors:[["app-display-blockly"]],decls:49,vars:10,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","id","downloadBlocks","color","primary",3,"matMenuTriggerFor"],["menuSave","matMenu"],[3,"inset"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"color","click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","height: 100%; width: 100%",3,"selectedTabChange",4,"ngIf"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"height","100%","width","100%",3,"selectedTabChange"],["label","JSON"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"],["label","Text","isActive","true"],[3,"id"],["label","HTML"],["label","Chart"],["width","800","height","450",3,"id"],["label","Grid",4,"ngIf"],["label","Grid"]],template:function(r,o){if(1&r&&(st.YNc(0,jm,1,0,"mat-spinner",0),st.TgZ(1,"mat-grid-list",1),st.TgZ(2,"mat-grid-tile-header"),st.TgZ(3,"div",2),st.TgZ(4,"div",3),st.TgZ(5,"button",4),st.NdJ("click",function(){return o.LoadSwagger()}),st.TgZ(6,"mat-icon"),st._uU(7,"file_upload"),st.qZA(),st._uU(8," Load Swagger/OpenAPI "),st.qZA(),st._uU(9," \xa0 "),st.TgZ(10,"button",5),st.TgZ(11,"mat-icon"),st._uU(12,"save"),st.qZA(),st._uU(13," Save => "),st.qZA(),st.TgZ(14,"mat-menu",null,6),st.TgZ(16,"button",4),st.NdJ("click",function(){return o.SaveBlocks()}),st.TgZ(17,"mat-icon"),st._uU(18,"web"),st.qZA(),st._uU(19," Persist in browser "),st.qZA(),st._UZ(20,"mat-divider",7),st.TgZ(21,"button",8),st.NdJ("click",function(){return o.Download()}),st.TgZ(22,"mat-icon"),st._uU(23,"download"),st.qZA(),st._uU(24," Download blocks "),st.qZA(),st._UZ(25,"mat-divider",7),st.TgZ(26,"button",9),st.NdJ("click",function(){return o.SaveToLocalAPI()}),st.TgZ(27,"mat-icon"),st._uU(28,"save"),st.qZA(),st._uU(29," Save Local "),st.qZA(),st.qZA(),st._uU(30," \xa0 "),st.TgZ(31,"button",10),st.NdJ("click",function(){return o.RunCode()}),st.TgZ(32,"mat-icon"),st._uU(33,"play_arrow"),st.qZA(),st._uU(34," Execute "),st.qZA(),st._uU(35," \xa0 \xa0 "),st.TgZ(36,"input",11),st.NdJ("change",function(p){return o.changeListener(p)}),st.qZA(),st.TgZ(37,"button",4),st.NdJ("click",function(){return o.ShowInnerWorkings()}),st.TgZ(38,"mat-icon"),st._uU(39,"code"),st.qZA(),st._uU(40),st.qZA(),st.TgZ(41,"button",12),st.NdJ("click",function(){return o.ShowBlocks()}),st.TgZ(42,"mat-icon"),st._uU(43,"list"),st.qZA(),st._uU(44," Load Blocks "),st.qZA(),st.YNc(45,zm,2,4,"a",13),st.qZA(),st.qZA(),st.qZA(),st.TgZ(46,"mat-grid-tile"),st._UZ(47,"div",14),st.qZA(),st.YNc(48,Xm,5,4,"mat-grid-tile",0),st.qZA()),2&r){const l=st.MAs(15);st.Q6J("ngIf",!o.loadedCompletely),st.xp6(1),st.Q6J("cols",o.ShowSomething()?2:1),st.xp6(9),st.Q6J("matMenuTriggerFor",l),st.xp6(10),st.Q6J("inset",!0),st.xp6(5),st.Q6J("inset",!0),st.xp6(1),st.Q6J("color",null!=o.DetailsApp.LocalAPI&&o.DetailsApp.LocalAPI.WasAlive?"primary":"warn"),st.xp6(14),st.hij(" ",o.ShowSelection()," "),st.xp6(5),st.Q6J("ngIf",null==o.mustLoadDemoBlock?null:o.mustLoadDemoBlock.length),st.xp6(2),st.Q6J("id","blocklyDiv"+o.myId),st.xp6(1),st.Q6J("ngIf",o.ShowSomething())}},directives:[Qu.O5,vp.Il,vp.$H,vp.jo,Ad.lW,Rl.Hw,Wh.p6,Wh.VK,Eg.d,vp.DX,mf.$g,Ad.zs,gf.yS,Zs.SP,Zs.uX,_f.C,kr.JJ,kr.On],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:400;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),f})()},5137:(V,Z,g)=>{"use strict";g.d(Z,{F:()=>a}),g(39646);var m=g(54004),t=g(18505),e=g(5e3),n=g(40520);let a=(()=>{class d{constructor(D){this.http=D}getDemoBlocks(){var D=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${D}`,{responseType:"text"}).pipe((0,m.U)(B=>JSON.parse(B)))}getCustomCategories(){var D=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${D}`,{responseType:"text"}).pipe((0,m.U)(B=>B.toString()))}getSwaggerLinks(){var D=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${D}`,{responseType:"text"}).pipe((0,m.U)(B=>JSON.parse(B)))}getDemoBlock(D){var B=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${D}.txt?${B}`,{responseType:"text"}).pipe((0,t.b)(oe=>{}),(0,m.U)(oe=>oe.toString()))}}return d.\u0275fac=function(D){return new(D||d)(e.LFG(n.eN))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},86931:function(V,Z,g){var m,t;m=[g(81069)],void 0!==(t=function(e){"use strict";return e}.apply(Z,m))&&(V.exports=t)},81069:function(V,Z){var m;void 0!==(m=function(){"use strict";var t={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return t.CONNECTING_SNAP_RADIUS=t.SNAP_RADIUS,t.CURRENT_CONNECTION_PREFERENCE=8,t.BUMP_DELAY=250,t.BUMP_RANDOMNESS=10,t.COLLAPSE_CHARS=30,t.LONGPRESS=750,t.SOUND_LIMIT=100,t.DRAG_STACK=!0,t.HSV_SATURATION=.45,t.HSV_VALUE=.65,t.SPRITE={width:96,height:124,url:"sprites.png"},t.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},t.DRAG_NONE=0,t.DRAG_STICKY=1,t.DRAG_BEGIN=1,t.DRAG_FREE=2,t.OPPOSITE_TYPE=[],t.OPPOSITE_TYPE[t.connectionTypes.INPUT_VALUE]=t.connectionTypes.OUTPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.OUTPUT_VALUE]=t.connectionTypes.INPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.NEXT_STATEMENT]=t.connectionTypes.PREVIOUS_STATEMENT,t.OPPOSITE_TYPE[t.connectionTypes.PREVIOUS_STATEMENT]=t.connectionTypes.NEXT_STATEMENT,t.VARIABLE_CATEGORY_NAME="VARIABLE",t.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",t.PROCEDURE_CATEGORY_NAME="PROCEDURE",t.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",t.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",t.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",t.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",t.utils={},t.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),t.Msg={},t.utils.global.Blockly||(t.utils.global.Blockly={}),t.utils.global.Blockly.Msg||(t.utils.global.Blockly.Msg=t.Msg),t.utils.colour={},t.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var n=t.utils.colour.names[e];if(n||(n="0x"==e.substring(0,2)?"#"+e.substring(2):e,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var a=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return a&&(e=Number(a[1]),n=Number(a[2]),a=Number(a[3]),0<=e&&256>e&&0<=n&&256>n&&0<=a&&256>a)?t.utils.colour.rgbToHex(e,n,a):null},t.utils.colour.rgbToHex=function(e,n,a){return n=e<<16|n<<8|a,16>e?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},t.utils.colour.hexToRgb=function(e){return(e=t.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},t.utils.colour.hsvToHex=function(e,n,a){var d=0,C=0,D=0;if(0==n)D=C=d=a;else{var B=Math.floor(e/60),z=e/60-B;e=a*(1-n);var oe=a*(1-n*z);switch(n=a*(1-n*(1-z)),B){case 1:d=oe,C=a,D=e;break;case 2:d=e,C=a,D=n;break;case 3:d=e,C=oe,D=a;break;case 4:d=n,C=e,D=a;break;case 5:d=a,C=e,D=oe;break;case 6:case 0:d=a,C=n,D=e}}return t.utils.colour.rgbToHex(Math.floor(d),Math.floor(C),Math.floor(D))},t.utils.colour.blend=function(e,n,a){return(e=t.utils.colour.parse(e))&&(n=t.utils.colour.parse(n))?(e=t.utils.colour.hexToRgb(e),n=t.utils.colour.hexToRgb(n),t.utils.colour.rgbToHex(Math.round(n[0]+a*(e[0]-n[0])),Math.round(n[1]+a*(e[1]-n[1])),Math.round(n[2]+a*(e[2]-n[2])))):null},t.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},t.utils.Coordinate=function(e,n){this.x=e,this.y=n},t.utils.Coordinate.equals=function(e,n){return e==n||!(!e||!n)&&e.x==n.x&&e.y==n.y},t.utils.Coordinate.distance=function(e,n){var a=e.x-n.x;return e=e.y-n.y,Math.sqrt(a*a+e*e)},t.utils.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.utils.Coordinate.difference=function(e,n){return new t.utils.Coordinate(e.x-n.x,e.y-n.y)},t.utils.Coordinate.sum=function(e,n){return new t.utils.Coordinate(e.x+n.x,e.y+n.y)},t.utils.Coordinate.prototype.clone=function(){return new t.utils.Coordinate(this.x,this.y)},t.utils.Coordinate.prototype.scale=function(e){return this.x*=e,this.y*=e,this},t.utils.Coordinate.prototype.translate=function(e,n){return this.x+=e,this.y+=n,this},t.utils.Rect=function(e,n,a,d){this.top=e,this.bottom=n,this.left=a,this.right=d},t.utils.Rect.prototype.contains=function(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom},t.utils.Rect.prototype.intersects=function(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)},t.utils.string={},t.utils.string.startsWith=function(e,n){return 0==e.lastIndexOf(n,0)},t.utils.string.shortestStringLength=function(e){return e.length?e.reduce(function(n,a){return n.length<a.length?n:a}).length:0},t.utils.string.commonWordPrefix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var a=0;n=n||t.utils.string.shortestStringLength(e);for(var d=0;d<n;d++){for(var C=e[0][d],D=1;D<e.length;D++)if(C!=e[D][d])return a;" "==C&&(a=d+1)}for(D=1;D<e.length;D++)if((C=e[D][d])&&" "!=C)return a;return n},t.utils.string.commonWordSuffix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var a=0;n=n||t.utils.string.shortestStringLength(e);for(var d=0;d<n;d++){for(var C=e[0].substr(-d-1,1),D=1;D<e.length;D++)if(C!=e[D].substr(-d-1,1))return a;" "==C&&(a=d+1)}for(D=1;D<e.length;D++)if((C=e[D].charAt(e[D].length-d-1))&&" "!=C)return a;return n},t.utils.string.wrap=function(e,n){e=e.split("\n");for(var a=0;a<e.length;a++)e[a]=t.utils.string.wrapLine_(e[a],n);return e.join("\n")},t.utils.string.wrapLine_=function(e,n){if(e.length<=n)return e;for(var a=e.trim().split(/\s+/),d=0;d<a.length;d++)a[d].length>n&&(n=a[d].length);d=-1/0;var C=1;do{var D=d,B=e;e=[];var z=a.length/C,oe=1;for(d=0;d<a.length-1;d++)oe<(d+1.5)/z?(oe++,e[d]=!0):e[d]=!1;e=t.utils.string.wrapMutate_(a,e,n),d=t.utils.string.wrapScore_(a,e,n),e=t.utils.string.wrapToText_(a,e),C++}while(d>D);return B},t.utils.string.wrapScore_=function(e,n,a){for(var d=[0],C=[],D=0;D<e.length;D++)d[d.length-1]+=e[D].length,!0===n[D]?(d.push(0),C.push(e[D].charAt(e[D].length-1))):!1===n[D]&&d[d.length-1]++;for(e=Math.max.apply(Math,d),D=n=0;D<d.length;D++)n-=2*Math.pow(Math.abs(a-d[D]),1.5),n-=Math.pow(e-d[D],1.5),-1!=".?!".indexOf(C[D])?n+=a/3:-1!=",;)]}".indexOf(C[D])&&(n+=a/4);return 1<d.length&&d[d.length-1]<=d[d.length-2]&&(n+=.5),n},t.utils.string.wrapMutate_=function(e,n,a){for(var C,d=t.utils.string.wrapScore_(e,n,a),D=0;D<n.length-1;D++)if(n[D]!=n[D+1]){var B=[].concat(n);B[D]=!B[D],B[D+1]=!B[D+1];var z=t.utils.string.wrapScore_(e,B,a);z>d&&(d=z,C=B)}return C?t.utils.string.wrapMutate_(e,C,a):n},t.utils.string.wrapToText_=function(e,n){for(var a=[],d=0;d<e.length;d++)a.push(e[d]),void 0!==n[d]&&a.push(n[d]?"\n":" ");return a.join("")},t.utils.Size=function(e,n){this.width=e,this.height=n},t.utils.Size.equals=function(e,n){return e==n||!(!e||!n)&&e.width==n.width&&e.height==n.height},t.utils.style={},t.utils.style.getSize=function(e){if("none"!=t.utils.style.getStyle_(e,"display"))return t.utils.style.getSizeWithDisplay_(e);var n=e.style,a=n.display,d=n.visibility,C=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var D=e.offsetWidth;return e=e.offsetHeight,n.display=a,n.position=C,n.visibility=d,new t.utils.Size(D,e)},t.utils.style.getSizeWithDisplay_=function(e){return new t.utils.Size(e.offsetWidth,e.offsetHeight)},t.utils.style.getStyle_=function(e,n){return t.utils.style.getComputedStyle(e,n)||t.utils.style.getCascadedStyle(e,n)||e.style&&e.style[n]},t.utils.style.getComputedStyle=function(e,n){return document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(e,null))&&(e[n]||e.getPropertyValue(n))||""},t.utils.style.getCascadedStyle=function(e,n){return e.currentStyle?e.currentStyle[n]:null},t.utils.style.getPageOffset=function(e){var n=new t.utils.Coordinate(0,0);e=e.getBoundingClientRect();var a=document.documentElement;return a=new t.utils.Coordinate(window.pageXOffset||a.scrollLeft,window.pageYOffset||a.scrollTop),n.x=e.left+a.x,n.y=e.top+a.y,n},t.utils.style.getViewportPageOffset=function(){var e=document.body,n=document.documentElement;return new t.utils.Coordinate(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},t.utils.style.setElementShown=function(e,n){e.style.display=n?"":"none"},t.utils.style.isRightToLeft=function(e){return"rtl"==t.utils.style.getStyle_(e,"direction")},t.utils.style.getBorderBox=function(e){var n=t.utils.style.getComputedStyle(e,"borderLeftWidth"),a=t.utils.style.getComputedStyle(e,"borderRightWidth"),d=t.utils.style.getComputedStyle(e,"borderTopWidth");return e=t.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(d),right:parseFloat(a),bottom:parseFloat(e),left:parseFloat(n)}},t.utils.style.scrollIntoContainerView=function(e,n,a){e=t.utils.style.getContainerOffsetToScrollInto(e,n,a),n.scrollLeft=e.x,n.scrollTop=e.y},t.utils.style.getContainerOffsetToScrollInto=function(e,n,a){var d=t.utils.style.getPageOffset(e),C=t.utils.style.getPageOffset(n),D=t.utils.style.getBorderBox(n),B=d.x-C.x-D.left;return d=d.y-C.y-D.top,C=t.utils.style.getSizeWithDisplay_(e),e=n.clientWidth-C.width,C=n.clientHeight-C.height,D=n.scrollLeft,n=n.scrollTop,a?(D+=B-e/2,n+=d-C/2):(D+=Math.min(B,Math.max(B-e,0)),n+=Math.min(d,Math.max(d-C,0))),new t.utils.Coordinate(D,n)},t.utils.userAgent={},function(e){function n(d){return-1!=a.indexOf(d.toUpperCase())}t.utils.userAgent.raw=e;var a=t.utils.userAgent.raw.toUpperCase();t.utils.userAgent.IE=n("Trident")||n("MSIE"),t.utils.userAgent.EDGE=n("Edge"),t.utils.userAgent.JAVA_FX=n("JavaFX"),t.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!t.utils.userAgent.EDGE,t.utils.userAgent.WEBKIT=n("WebKit")&&!t.utils.userAgent.EDGE,t.utils.userAgent.GECKO=n("Gecko")&&!t.utils.userAgent.WEBKIT&&!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,t.utils.userAgent.ANDROID=n("Android"),e=t.utils.global.navigator&&t.utils.global.navigator.maxTouchPoints,t.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<e,t.utils.userAgent.IPOD=n("iPod"),t.utils.userAgent.IPHONE=n("iPhone")&&!t.utils.userAgent.IPAD&&!t.utils.userAgent.IPOD,t.utils.userAgent.MAC=n("Macintosh"),t.utils.userAgent.TABLET=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),t.utils.userAgent.MOBILE=!t.utils.userAgent.TABLET&&(t.utils.userAgent.IPOD||t.utils.userAgent.IPHONE||t.utils.userAgent.ANDROID||n("IEMobile"))}(t.utils.global.navigator&&t.utils.global.navigator.userAgent||""),t.utils.noEvent=function(e){e.preventDefault(),e.stopPropagation()},t.utils.isTargetInput=function(e){return"textarea"==e.target.type||"text"==e.target.type||"number"==e.target.type||"email"==e.target.type||"password"==e.target.type||"search"==e.target.type||"tel"==e.target.type||"url"==e.target.type||e.target.isContentEditable||e.target.dataset&&"true"==e.target.dataset.isTextInput},t.utils.getRelativeXY=function(e){var n=new t.utils.Coordinate(0,0),a=e.getAttribute("x");return a&&(n.x=parseInt(a,10)),(a=e.getAttribute("y"))&&(n.y=parseInt(a,10)),(a=(a=e.getAttribute("transform"))&&a.match(t.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(a[1]),a[3]&&(n.y+=Number(a[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(t.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},t.utils.getInjectionDivXY_=function(e){for(var n=0,a=0;e;){var d=t.utils.getRelativeXY(e);if(n+=d.x,a+=d.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new t.utils.Coordinate(n,a)},t.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,t.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,t.utils.isRightButton=function(e){return!(!e.ctrlKey||!t.utils.userAgent.MAC)||2==e.button},t.utils.mouseToSvg=function(e,n,a){var d=n.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,a||(a=n.getScreenCTM().inverse()),d.matrixTransform(a)},t.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*t.LINE_MODE_MULTIPLIER,y:e.deltaY*t.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*t.PAGE_MODE_MULTIPLIER,y:e.deltaY*t.PAGE_MODE_MULTIPLIER}}},t.utils.tokenizeInterpolation=function(e){return t.utils.tokenizeInterpolation_(e,!0)},t.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=t.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},t.utils.checkMessageReferences=function(e){for(var n=!0,a=t.Msg,d=e.match(/%{BKY_[A-Z]\w*}/gi),C=0;C<d.length;C++)null==a[d[C].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+d[C]+" in "+e),n=!1);return n},t.utils.tokenizeInterpolation_=function(e,n){var a=[],d=e.split("");d.push("");var C=0;e=[];for(var D=null,B=0;B<d.length;B++){var z=d[B];0==C?"%"==z?((z=e.join(""))&&a.push(z),e.length=0,C=1):e.push(z):1==C?"%"==z?(e.push(z),C=0):n&&"0"<=z&&"9">=z?(C=2,D=z,(z=e.join(""))&&a.push(z),e.length=0):"{"==z?C=3:(e.push("%",z),C=0):2==C?"0"<=z&&"9">=z?D+=z:(a.push(parseInt(D,10)),B--,C=0):3==C&&(""==z?(e.splice(0,0,"%{"),B--,C=0):"}"!=z?e.push(z):(C=e.join(""),/[A-Z]\w*/i.test(C)?(z=C.toUpperCase(),(z=t.utils.string.startsWith(z,"BKY_")?z.substring(4):null)&&z in t.Msg?"string"==typeof(C=t.Msg[z])?Array.prototype.push.apply(a,t.utils.tokenizeInterpolation_(C,n)):a.push(n?String(C):C):a.push("%{"+C+"}")):a.push("%{"+C+"}"),C=e.length=0))}for((z=e.join(""))&&a.push(z),n=[],B=e.length=0;B<a.length;++B)"string"==typeof a[B]?e.push(a[B]):((z=e.join(""))&&n.push(z),e.length=0,n.push(a[B]));return(z=e.join(""))&&n.push(z),e.length=0,n},t.utils.genUid=function(){for(var e=t.utils.genUid.soup_.length,n=[],a=0;20>a;a++)n[a]=t.utils.genUid.soup_.charAt(Math.random()*e);return n.join("")},t.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t.utils.is3dSupported=function(){if(void 0!==t.utils.is3dSupported.cached_)return t.utils.is3dSupported.cached_;if(!t.utils.global.getComputedStyle)return!1;var e=document.createElement("p"),n="none",a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var d in document.body.insertBefore(e,null),a)if(void 0!==e.style[d]){if(e.style[d]="translate3d(1px,1px,1px)",!(n=t.utils.global.getComputedStyle(e)))return document.body.removeChild(e),!1;n=n.getPropertyValue(a[d])}return document.body.removeChild(e),t.utils.is3dSupported.cached_="none"!==n,t.utils.is3dSupported.cached_},t.utils.runAfterPageLoad=function(e){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)e();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),e())},10)},t.utils.getViewportBBox=function(){var e=t.utils.style.getViewportPageOffset();return new t.utils.Rect(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},t.utils.arrayRemove=function(e,n){return-1!=(n=e.indexOf(n))&&(e.splice(n,1),!0)},t.utils.getDocumentScroll=function(){var e=document.documentElement,n=window;return t.utils.userAgent.IE&&n.pageYOffset!=e.scrollTop?new t.utils.Coordinate(e.scrollLeft,e.scrollTop):new t.utils.Coordinate(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},t.utils.getBlockTypeCounts=function(e,n){var a=Object.create(null),d=e.getDescendants(!0);for(n&&(e=e.getNextBlock())&&(e=d.indexOf(e),d.splice(e,d.length-e)),e=0;n=d[e];e++)a[n.type]?a[n.type]++:a[n.type]=1;return a},t.utils.screenToWsCoordinates=function(e,n){var a=n.x;n=n.y;var d=e.getInjectionDiv().getBoundingClientRect();return a=new t.utils.Coordinate(a-d.left,n-d.top),n=e.getOriginOffsetInPixels(),t.utils.Coordinate.difference(a,n).scale(1/e.scale)},t.utils.parseBlockColour=function(e){var n="string"==typeof e?t.utils.replaceMessageReferences(e):e,a=Number(n);if(!isNaN(a)&&0<=a&&360>=a)return{hue:a,hex:t.utils.colour.hsvToHex(a,t.HSV_SATURATION,255*t.HSV_VALUE)};if(a=t.utils.colour.parse(n))return{hue:null,hex:a};throw a='Invalid colour: "'+n+'"',e!=n&&(a+=' (from "'+e+'")'),Error(a)},t.Touch={},t.Touch.TOUCH_ENABLED="ontouchstart"in t.utils.global||!!(t.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!t.utils.global.navigator||!t.utils.global.navigator.maxTouchPoints&&!t.utils.global.navigator.msMaxTouchPoints),t.Touch.touchIdentifier_=null,t.Touch.TOUCH_MAP={},t.utils.global.PointerEvent?t.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:t.Touch.TOUCH_ENABLED&&(t.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),t.longPid_=0,t.longStart=function(e,n){t.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(t.longPid_=setTimeout(function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),n&&n.handleRightClick(e)},t.LONGPRESS))},t.longStop_=function(){t.longPid_&&(clearTimeout(t.longPid_),t.longPid_=0)},t.Touch.clearTouchIdentifier=function(){t.Touch.touchIdentifier_=null},t.Touch.shouldHandleEvent=function(e){return!t.Touch.isMouseOrTouchEvent(e)||t.Touch.checkTouchIdentifier(e)},t.Touch.getTouchIdentifierFromEvent=function(e){return null!=e.pointerId?e.pointerId:e.changedTouches&&e.changedTouches[0]&&null!=e.changedTouches[0].identifier?e.changedTouches[0].identifier:"mouse"},t.Touch.checkTouchIdentifier=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);return null!=t.Touch.touchIdentifier_?t.Touch.touchIdentifier_==n:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(t.Touch.touchIdentifier_=n,!0)},t.Touch.setClientFromTouch=function(e){if(t.utils.string.startsWith(e.type,"touch")){var n=e.changedTouches[0];e.clientX=n.clientX,e.clientY=n.clientY}},t.Touch.isMouseOrTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"mouse")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.isTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.splitEventByTouches=function(e){var n=[];if(e.changedTouches)for(var a=0;a<e.changedTouches.length;a++)n[a]={type:e.type,changedTouches:[e.changedTouches[a]],target:e.target,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}};else n.push(e);return n},t.browserEvents={},t.browserEvents.conditionalBind=function(e,n,a,d,C,D){var B=!1,z=function(Ge){var _e=!C;Ge=t.Touch.splitEventByTouches(Ge);for(var We,Le=0;We=Ge[Le];Le++)(!_e||t.Touch.shouldHandleEvent(We))&&(t.Touch.setClientFromTouch(We),a?d.call(a,We):d(We),B=!0)},oe=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var se,be=0;se=t.Touch.TOUCH_MAP[n][be];be++)e.addEventListener(se,z,!1),oe.push([e,se,z]);else if(e.addEventListener(n,z,!1),oe.push([e,n,z]),n in t.Touch.TOUCH_MAP){var Ie=function(Ge){z(Ge),B&&!D&&Ge.preventDefault()};for(be=0;se=t.Touch.TOUCH_MAP[n][be];be++)e.addEventListener(se,Ie,!1),oe.push([e,se,Ie])}return oe},t.browserEvents.bind=function(e,n,a,d){var C=function(be){a?d.call(a,be):d(be)},D=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var z,B=0;z=t.Touch.TOUCH_MAP[n][B];B++)e.addEventListener(z,C,!1),D.push([e,z,C]);else if(e.addEventListener(n,C,!1),D.push([e,n,C]),n in t.Touch.TOUCH_MAP){var oe=function(be){if(be.changedTouches&&1==be.changedTouches.length){var se=be.changedTouches[0];be.clientX=se.clientX,be.clientY=se.clientY}C(be),be.preventDefault()};for(B=0;z=t.Touch.TOUCH_MAP[n][B];B++)e.addEventListener(z,oe,!1),D.push([e,z,oe])}return D},t.browserEvents.unbind=function(e){for(;e.length;){var n=e.pop(),a=n[2];n[0].removeEventListener(n[1],a,!1)}return a},t.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},t.ComponentManager.prototype.addComponent=function(e,n){var a=e.component.id;if(!n&&this.componentData_[a])throw Error('Plugin "'+a+'" with capabilities "'+this.componentData_[a].capabilities+'" already added.');this.componentData_[a]=e,n=[];for(var d=0;d<e.capabilities.length;d++){var C=String(e.capabilities[d]).toLowerCase();n.push(C),void 0===this.capabilityToComponentIds_[C]?this.capabilityToComponentIds_[C]=[a]:this.capabilityToComponentIds_[C].push(a)}this.componentData_[a].capabilities=n},t.ComponentManager.prototype.removeComponent=function(e){var n=this.componentData_[e];if(n){for(var a=0;a<n.capabilities.length;a++){var d=String(n.capabilities[a]).toLowerCase();this.capabilityToComponentIds_[d].splice(this.capabilityToComponentIds_[d].indexOf(e),1)}delete this.componentData_[e]}},t.ComponentManager.prototype.addCapability=function(e,n){if(!this.getComponent(e))throw Error('Cannot add capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?console.warn('Plugin "'+e+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[e].capabilities.push(n),this.capabilityToComponentIds_[n].push(e))},t.ComponentManager.prototype.removeCapability=function(e,n){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?(n=String(n).toLowerCase(),this.componentData_[e].capabilities.splice(this.componentData_[e].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(e),1)):console.warn('Plugin "'+e+"doesn't have capability \""+n+'" to remove')},t.ComponentManager.prototype.hasCapability=function(e,n){return n=String(n).toLowerCase(),-1!==this.componentData_[e].capabilities.indexOf(n)},t.ComponentManager.prototype.getComponent=function(e){return this.componentData_[e]&&this.componentData_[e].component},t.ComponentManager.prototype.getComponents=function(e,n){if(e=String(e).toLowerCase(),!(e=this.capabilityToComponentIds_[e]))return[];var a=[];if(n){var d=[],C=this.componentData_;e.forEach(function(D){d.push(C[D])}),d.sort(function(D,B){return D.weight-B.weight}),d.forEach(function(D){a.push(D.component)})}else C=this.componentData_,e.forEach(function(D){a.push(C[D].component)});return a},t.ComponentManager.Capability=function(e){this.name_=e},t.ComponentManager.Capability.prototype.toString=function(){return this.name_},t.ComponentManager.Capability.POSITIONABLE=new t.ComponentManager.Capability("positionable"),t.ComponentManager.Capability.DRAG_TARGET=new t.ComponentManager.Capability("drag_target"),t.ComponentManager.Capability.DELETE_AREA=new t.ComponentManager.Capability("delete_area"),t.ComponentManager.Capability.AUTOHIDEABLE=new t.ComponentManager.Capability("autohideable"),t.utils.Svg=function(e){this.tagName_=e},t.utils.Svg.prototype.toString=function(){return this.tagName_},t.utils.Svg.ANIMATE=new t.utils.Svg("animate"),t.utils.Svg.CIRCLE=new t.utils.Svg("circle"),t.utils.Svg.CLIPPATH=new t.utils.Svg("clipPath"),t.utils.Svg.DEFS=new t.utils.Svg("defs"),t.utils.Svg.FECOMPOSITE=new t.utils.Svg("feComposite"),t.utils.Svg.FECOMPONENTTRANSFER=new t.utils.Svg("feComponentTransfer"),t.utils.Svg.FEFLOOD=new t.utils.Svg("feFlood"),t.utils.Svg.FEFUNCA=new t.utils.Svg("feFuncA"),t.utils.Svg.FEGAUSSIANBLUR=new t.utils.Svg("feGaussianBlur"),t.utils.Svg.FEPOINTLIGHT=new t.utils.Svg("fePointLight"),t.utils.Svg.FESPECULARLIGHTING=new t.utils.Svg("feSpecularLighting"),t.utils.Svg.FILTER=new t.utils.Svg("filter"),t.utils.Svg.FOREIGNOBJECT=new t.utils.Svg("foreignObject"),t.utils.Svg.G=new t.utils.Svg("g"),t.utils.Svg.IMAGE=new t.utils.Svg("image"),t.utils.Svg.LINE=new t.utils.Svg("line"),t.utils.Svg.PATH=new t.utils.Svg("path"),t.utils.Svg.PATTERN=new t.utils.Svg("pattern"),t.utils.Svg.POLYGON=new t.utils.Svg("polygon"),t.utils.Svg.RECT=new t.utils.Svg("rect"),t.utils.Svg.SVG=new t.utils.Svg("svg"),t.utils.Svg.TEXT=new t.utils.Svg("text"),t.utils.Svg.TSPAN=new t.utils.Svg("tspan"),t.utils.dom={},t.utils.dom.SVG_NS="http://www.w3.org/2000/svg",t.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",t.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",t.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},t.utils.dom.cacheWidths_=null,t.utils.dom.cacheReference_=0,t.utils.dom.canvasContext_=null,t.utils.dom.createSvgElement=function(e,n,a){for(var d in e=document.createElementNS(t.utils.dom.SVG_NS,String(e)),n)e.setAttribute(d,n[d]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),a&&a.appendChild(e),e},t.utils.dom.addClass=function(e,n){var a=e.getAttribute("class")||"";return-1==(" "+a+" ").indexOf(" "+n+" ")&&(a&&(a+=" "),e.setAttribute("class",a+n),!0)},t.utils.dom.removeClasses=function(e,n){n=n.split(" ");for(var a=0;a<n.length;a++)t.utils.dom.removeClass(e,n[a])},t.utils.dom.removeClass=function(e,n){var a=e.getAttribute("class");if(-1==(" "+a+" ").indexOf(" "+n+" "))return!1;a=a.split(/\s+/);for(var d=0;d<a.length;d++)a[d]&&a[d]!=n||(a.splice(d,1),d--);return a.length?e.setAttribute("class",a.join(" ")):e.removeAttribute("class"),!0},t.utils.dom.hasClass=function(e,n){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+n+" ")},t.utils.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},t.utils.dom.insertAfter=function(e,n){var a=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");a?n.insertBefore(e,a):n.appendChild(e)},t.utils.dom.containsNode=function(e,n){return!!(e.compareDocumentPosition(n)&t.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},t.utils.dom.setCssTransform=function(e,n){e.style.transform=n,e.style["-webkit-transform"]=n},t.utils.dom.startTextWidthCache=function(){t.utils.dom.cacheReference_++,t.utils.dom.cacheWidths_||(t.utils.dom.cacheWidths_=Object.create(null))},t.utils.dom.stopTextWidthCache=function(){t.utils.dom.cacheReference_--,t.utils.dom.cacheReference_||(t.utils.dom.cacheWidths_=null)},t.utils.dom.getTextWidth=function(e){var a,n=e.textContent+"\n"+e.className.baseVal;if(t.utils.dom.cacheWidths_&&(a=t.utils.dom.cacheWidths_[n]))return a;try{a=t.utils.userAgent.IE||t.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(d){return 8*e.textContent.length}return t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[n]=a),a},t.utils.dom.getFastTextWidth=function(e,n,a,d){return t.utils.dom.getFastTextWidthWithSizeString(e,n+"pt",a,d)},t.utils.dom.getFastTextWidthWithSizeString=function(e,n,a,d){var D,C=e.textContent;return e=C+"\n"+e.className.baseVal,t.utils.dom.cacheWidths_&&(D=t.utils.dom.cacheWidths_[e])||(t.utils.dom.canvasContext_||((D=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(D),t.utils.dom.canvasContext_=D.getContext("2d")),t.utils.dom.canvasContext_.font=a+" "+n+" "+d,D=t.utils.dom.canvasContext_.measureText(C).width,t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[e]=D)),D},t.utils.dom.measureFontMetrics=function(e,n,a,d){var C=document.createElement("span");C.style.font=a+" "+n+" "+d,C.textContent=e,(e=document.createElement("div")).style.width="1px",e.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(C),n.appendChild(e),document.body.appendChild(n);try{a={},n.style.alignItems="baseline",a.baseline=e.offsetTop-C.offsetTop,n.style.alignItems="flex-end",a.height=e.offsetTop-C.offsetTop}finally{document.body.removeChild(n)}return a},t.utils.math={},t.utils.math.toRadians=function(e){return e*Math.PI/180},t.utils.math.toDegrees=function(e){return 180*e/Math.PI},t.utils.math.clamp=function(e,n,a){if(a<e){var d=a;a=e,e=d}return Math.max(e,Math.min(n,a))},t.DropDownDiv=function(){},t.DropDownDiv.boundsElement_=null,t.DropDownDiv.owner_=null,t.DropDownDiv.positionToField_=null,t.DropDownDiv.ARROW_SIZE=16,t.DropDownDiv.BORDER_SIZE=1,t.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,t.DropDownDiv.PADDING_Y=16,t.DropDownDiv.ANIMATION_TIME=.25,t.DropDownDiv.animateOutTimer_=null,t.DropDownDiv.onHide_=null,t.DropDownDiv.rendererClassName_="",t.DropDownDiv.themeClassName_="",t.DropDownDiv.createDom=function(){if(!t.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv",(t.parentContainer||document.body).appendChild(e),t.DropDownDiv.DIV_=e;var n=document.createElement("div");n.className="blocklyDropDownContent",e.appendChild(n),t.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(n),t.DropDownDiv.arrow_=n,t.DropDownDiv.DIV_.style.opacity=0,t.DropDownDiv.DIV_.style.transition="transform "+t.DropDownDiv.ANIMATION_TIME+"s, opacity "+t.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",function(){t.utils.dom.addClass(e,"blocklyFocused")}),e.addEventListener("focusout",function(){t.utils.dom.removeClass(e,"blocklyFocused")})}},t.DropDownDiv.setBoundsElement=function(e){t.DropDownDiv.boundsElement_=e},t.DropDownDiv.getContentDiv=function(){return t.DropDownDiv.content_},t.DropDownDiv.clearContent=function(){t.DropDownDiv.content_.textContent="",t.DropDownDiv.content_.style.width=""},t.DropDownDiv.setColour=function(e,n){t.DropDownDiv.DIV_.style.backgroundColor=e,t.DropDownDiv.DIV_.style.borderColor=n},t.DropDownDiv.showPositionedByBlock=function(e,n,a,d){return t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfBlock_(n),e,a,d)},t.DropDownDiv.showPositionedByField=function(e,n,a){return t.DropDownDiv.positionToField_=!0,t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfField_(e),e,n,a)},t.DropDownDiv.getScaledBboxOfBlock_=function(e){var n=e.getSvgRoot(),a=n.getBBox(),d=e.workspace.scale;return e=a.height*d,a=a.width*d,n=t.utils.style.getPageOffset(n),new t.utils.Rect(n.y,n.y+e,n.x,n.x+a)},t.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new t.utils.Rect(e.top,e.bottom,e.left,e.right)},t.DropDownDiv.showPositionedByRect_=function(e,n,a,d){var C=e.left+(e.right-e.left)/2,D=e.bottom;e=e.top,d&&(e+=d);for(var B=(d=n.getSourceBlock()).workspace;B.options.parentWorkspace;)B=B.options.parentWorkspace;return t.DropDownDiv.setBoundsElement(B.getParentSvg().parentNode),t.DropDownDiv.show(n,d.RTL,C,D,C,e,a)},t.DropDownDiv.show=function(e,n,a,d,C,D,B){return t.DropDownDiv.owner_=e,t.DropDownDiv.onHide_=B||null,(e=t.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=t.getMainWorkspace(),t.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),t.DropDownDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.DropDownDiv.rendererClassName_),t.utils.dom.addClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.positionInternal_(a,d,C,D)},t.DropDownDiv.getBoundsInfo_=function(){var e=t.utils.style.getPageOffset(t.DropDownDiv.boundsElement_),n=t.utils.style.getSize(t.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},t.DropDownDiv.getPositionMetrics_=function(e,n,a,d){var C=t.DropDownDiv.getBoundsInfo_(),D=t.utils.style.getSize(t.DropDownDiv.DIV_);return n+D.height<C.bottom?t.DropDownDiv.getPositionBelowMetrics_(e,n,C,D):d-D.height>C.top?t.DropDownDiv.getPositionAboveMetrics_(a,d,C,D):n+D.height<document.documentElement.clientHeight?t.DropDownDiv.getPositionBelowMetrics_(e,n,C,D):d-D.height>document.documentElement.clientTop?t.DropDownDiv.getPositionAboveMetrics_(a,d,C,D):t.DropDownDiv.getPositionTopOfPageMetrics_(e,C,D)},t.DropDownDiv.getPositionBelowMetrics_=function(e,n,a,d){return{initialX:(e=t.DropDownDiv.getPositionX(e,a.left,a.right,d.width)).divX,initialY:n,finalX:e.divX,finalY:n+t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(t.DropDownDiv.ARROW_SIZE/2+t.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},t.DropDownDiv.getPositionAboveMetrics_=function(e,n,a,d){return{initialX:(e=t.DropDownDiv.getPositionX(e,a.left,a.right,d.width)).divX,initialY:n-d.height,finalX:e.divX,finalY:n-d.height-t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:d.height-2*t.DropDownDiv.BORDER_SIZE-t.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},t.DropDownDiv.getPositionTopOfPageMetrics_=function(e,n,a){return{initialX:(e=t.DropDownDiv.getPositionX(e,n.left,n.right,a.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},t.DropDownDiv.getPositionX=function(e,n,a,d){var C=e;return e=t.utils.math.clamp(n,e-d/2,a-d),{arrowX:d=t.utils.math.clamp(n=t.DropDownDiv.ARROW_HORIZONTAL_PADDING,(C-=t.DropDownDiv.ARROW_SIZE/2)-e,d-n-t.DropDownDiv.ARROW_SIZE),divX:e}},t.DropDownDiv.isVisible=function(){return!!t.DropDownDiv.owner_},t.DropDownDiv.hideIfOwner=function(e,n){return t.DropDownDiv.owner_===e&&(n?t.DropDownDiv.hideWithoutAnimation():t.DropDownDiv.hide(),!0)},t.DropDownDiv.hide=function(){var e=t.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,t.DropDownDiv.animateOutTimer_=setTimeout(function(){t.DropDownDiv.hideWithoutAnimation()},1e3*t.DropDownDiv.ANIMATION_TIME),t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null)},t.DropDownDiv.hideWithoutAnimation=function(){if(t.DropDownDiv.isVisible()){t.DropDownDiv.animateOutTimer_&&clearTimeout(t.DropDownDiv.animateOutTimer_);var e=t.DropDownDiv.DIV_;e.style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null),t.DropDownDiv.clearContent(),t.DropDownDiv.owner_=null,t.DropDownDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.rendererClassName_),t.DropDownDiv.rendererClassName_=""),t.DropDownDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.DropDownDiv.positionInternal_=function(e,n,a,d){(e=t.DropDownDiv.getPositionMetrics_(e,n,a,d)).arrowVisible?(t.DropDownDiv.arrow_.style.display="",t.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",t.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):t.DropDownDiv.arrow_.style.display="none",n=Math.floor(e.initialX),a=Math.floor(e.initialY),d=Math.floor(e.finalX);var C=Math.floor(e.finalY),D=t.DropDownDiv.DIV_;return D.style.left=n+"px",D.style.top=a+"px",D.style.display="block",D.style.opacity=1,D.style.transform="translate("+(d-n)+"px,"+(C-a)+"px)",!!e.arrowAtTop},t.DropDownDiv.repositionForWindowResize=function(){if(t.DropDownDiv.owner_){var e=t.DropDownDiv.owner_,n=e.getSourceBlock();e=t.DropDownDiv.positionToField_?t.DropDownDiv.getScaledBboxOfField_(e):t.DropDownDiv.getScaledBboxOfBlock_(n),t.DropDownDiv.positionInternal_(n=e.left+(e.right-e.left)/2,e.bottom,n,e.top)}else t.DropDownDiv.hide()},t.registry={},t.registry.typeMap_=Object.create(null),t.registry.DEFAULT="default",t.registry.Type=function(e){this.name_=e},t.registry.Type.prototype.toString=function(){return this.name_},t.registry.Type.CONNECTION_CHECKER=new t.registry.Type("connectionChecker"),t.registry.Type.CURSOR=new t.registry.Type("cursor"),t.registry.Type.EVENT=new t.registry.Type("event"),t.registry.Type.FIELD=new t.registry.Type("field"),t.registry.Type.RENDERER=new t.registry.Type("renderer"),t.registry.Type.TOOLBOX=new t.registry.Type("toolbox"),t.registry.Type.THEME=new t.registry.Type("theme"),t.registry.Type.TOOLBOX_ITEM=new t.registry.Type("toolboxItem"),t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new t.registry.Type("flyoutsVerticalToolbox"),t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new t.registry.Type("flyoutsHorizontalToolbox"),t.registry.Type.METRICS_MANAGER=new t.registry.Type("metricsManager"),t.registry.Type.BLOCK_DRAGGER=new t.registry.Type("blockDragger"),t.registry.register=function(e,n,a,d){if(!(e instanceof t.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!a)throw Error("Can not register a null value");var C=t.registry.typeMap_[e];if(C||(C=t.registry.typeMap_[e]=Object.create(null)),t.registry.validate_(e,a),!d&&C[n])throw Error('Name "'+n+'" with type "'+e+'" already registered.');C[n]=a},t.registry.validate_=function(e,n){if(e===String(t.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},t.registry.unregister=function(e,n){e=String(e).toLowerCase(),n=n.toLowerCase();var a=t.registry.typeMap_[e];a&&a[n]?delete t.registry.typeMap_[e][n]:console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},t.registry.getItem_=function(e,n,a){e=String(e).toLowerCase(),n=n.toLowerCase();var d=t.registry.typeMap_[e];if(!d||!d[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",a)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return d[n]},t.registry.hasItem=function(e,n){return e=String(e).toLowerCase(),n=n.toLowerCase(),!!(e=t.registry.typeMap_[e])&&!!e[n]},t.registry.getClass=function(e,n,a){return t.registry.getItem_(e,n,a)},t.registry.getObject=function(e,n,a){return t.registry.getItem_(e,n,a)},t.registry.getClassFromOptions=function(e,n,a){return"function"==typeof(n=n.plugins[e.toString()]||t.registry.DEFAULT)?n:t.registry.getClass(e,n,a)},t.Events={},t.Events.group_="",t.Events.recordUndo=!0,t.Events.disabled_=0,t.Events.CREATE="create",t.Events.BLOCK_CREATE=t.Events.CREATE,t.Events.DELETE="delete",t.Events.BLOCK_DELETE=t.Events.DELETE,t.Events.CHANGE="change",t.Events.BLOCK_CHANGE=t.Events.CHANGE,t.Events.MOVE="move",t.Events.BLOCK_MOVE=t.Events.MOVE,t.Events.VAR_CREATE="var_create",t.Events.VAR_DELETE="var_delete",t.Events.VAR_RENAME="var_rename",t.Events.UI="ui",t.Events.BLOCK_DRAG="drag",t.Events.SELECTED="selected",t.Events.CLICK="click",t.Events.MARKER_MOVE="marker_move",t.Events.BUBBLE_OPEN="bubble_open",t.Events.TRASHCAN_OPEN="trashcan_open",t.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",t.Events.THEME_CHANGE="theme_change",t.Events.VIEWPORT_CHANGE="viewport_change",t.Events.COMMENT_CREATE="comment_create",t.Events.COMMENT_DELETE="comment_delete",t.Events.COMMENT_CHANGE="comment_change",t.Events.COMMENT_MOVE="comment_move",t.Events.FINISHED_LOADING="finished_loading",t.Events.BUMP_EVENTS=[t.Events.BLOCK_CREATE,t.Events.BLOCK_MOVE,t.Events.COMMENT_CREATE,t.Events.COMMENT_MOVE],t.Events.FIRE_QUEUE_=[],t.Events.fire=function(e){t.Events.isEnabled()&&(t.Events.FIRE_QUEUE_.length||setTimeout(t.Events.fireNow_,0),t.Events.FIRE_QUEUE_.push(e))},t.Events.fireNow_=function(){for(var a,e=t.Events.filter(t.Events.FIRE_QUEUE_,!0),n=t.Events.FIRE_QUEUE_.length=0;a=e[n];n++)if(a.workspaceId){var d=t.Workspace.getById(a.workspaceId);d&&d.fireChangeListener(a)}},t.Events.filter=function(e,n){e=e.slice(),n||e.reverse();for(var D,a=[],d=Object.create(null),C=0;D=e[C];C++)if(!D.isNull()){var B=[D.isUiEvent?t.Events.UI:D.type,D.blockId,D.workspaceId].join(" "),z=d[B],oe=z?z.event:null;z?D.type==t.Events.MOVE&&z.index==C-1?(oe.newParentId=D.newParentId,oe.newInputName=D.newInputName,oe.newCoordinate=D.newCoordinate,z.index=C):D.type==t.Events.CHANGE&&D.element==oe.element&&D.name==oe.name?oe.newValue=D.newValue:D.type==t.Events.VIEWPORT_CHANGE?(oe.viewTop=D.viewTop,oe.viewLeft=D.viewLeft,oe.scale=D.scale,oe.oldScale=D.oldScale):(D.type!=t.Events.CLICK||oe.type!=t.Events.BUBBLE_OPEN)&&(d[B]={event:D,index:C},a.push(D)):(d[B]={event:D,index:C},a.push(D))}for(e=a.filter(function(be){return!be.isNull()}),n||e.reverse(),C=1;D=e[C];C++)D.type==t.Events.CHANGE&&"mutation"==D.element&&e.unshift(e.splice(C,1)[0]);return e},t.Events.clearPendingUndo=function(){for(var n,e=0;n=t.Events.FIRE_QUEUE_[e];e++)n.recordUndo=!1},t.Events.disable=function(){t.Events.disabled_++},t.Events.enable=function(){t.Events.disabled_--},t.Events.isEnabled=function(){return 0==t.Events.disabled_},t.Events.getGroup=function(){return t.Events.group_},t.Events.setGroup=function(e){t.Events.group_="boolean"==typeof e?e?t.utils.genUid():"":e},t.Events.getDescendantIds=function(e){var n=[];e=e.getDescendants(!1);for(var d,a=0;d=e[a];a++)n[a]=d.id;return n},t.Events.fromJson=function(e,n){var a=t.Events.get(e.type);if(!a)throw Error("Unknown event type.");return(a=new a).fromJson(e),a.workspaceId=n.id,a},t.Events.get=function(e){return t.registry.getClass(t.registry.Type.EVENT,e)},t.Events.disableOrphans=function(e){if((e.type==t.Events.MOVE||e.type==t.Events.CREATE)&&e.workspaceId){var n=t.Workspace.getById(e.workspaceId),a=n.getBlockById(e.blockId);if(a){e=t.Events.recordUndo;try{t.Events.recordUndo=!1;var d=a.getParent();if(d&&d.isEnabled()){var D,C=a.getDescendants(!1);for(n=0;D=C[n];n++)D.setEnabled(!0)}else if((a.outputConnection||a.previousConnection)&&!n.isDragging())do{a.setEnabled(!1),a=a.getNextBlock()}while(a)}finally{t.Events.recordUndo=e}}}},t.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.Events.Abstract.prototype.isUiEvent=!1,t.Events.Abstract.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),e},t.Events.Abstract.prototype.fromJson=function(e){this.isBlank=!1,this.group=e.group},t.Events.Abstract.prototype.isNull=function(){return!1},t.Events.Abstract.prototype.run=function(e){},t.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var e=t.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},t.utils.object={},t.utils.object.inherits=function(e,n){e.superClass_=n.prototype,e.prototype=Object.create(n.prototype),e.prototype.constructor=e},t.utils.object.mixin=function(e,n){for(var a in n)e[a]=n[a]},t.utils.object.deepMerge=function(e,n){for(var a in n)e[a]=null!=n[a]&&"object"==typeof n[a]?t.utils.object.deepMerge(e[a]||Object.create(null),n[a]):n[a];return e},t.utils.object.values=function(e){return Object.values?Object.values(e):Object.keys(e).map(function(n){return e[n]})},t.utils.xml={},t.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",t.utils.xml.document=function(){return document},t.utils.xml.createElement=function(e){return t.utils.xml.document().createElementNS(t.utils.xml.NAME_SPACE,e)},t.utils.xml.createTextNode=function(e){return t.utils.xml.document().createTextNode(e)},t.utils.xml.textToDomDocument=function(e){return(new DOMParser).parseFromString(e,"text/xml")},t.utils.xml.domToText=function(e){return(new XMLSerializer).serializeToString(e)},t.inputTypes={VALUE:t.connectionTypes.INPUT_VALUE,STATEMENT:t.connectionTypes.NEXT_STATEMENT,DUMMY:5},t.Xml={},t.Xml.workspaceToDom=function(e,n){var a=t.utils.xml.createElement("xml"),d=t.Xml.variablesToDom(t.Variables.allUsedVarModels(e));d.hasChildNodes()&&a.appendChild(d);var D,C=e.getTopComments(!0);for(d=0;D=C[d];d++)a.appendChild(D.toXmlWithXY(n));for(e=e.getTopBlocks(!0),d=0;C=e[d];d++)a.appendChild(t.Xml.blockToDomWithXY(C,n));return a},t.Xml.variablesToDom=function(e){for(var d,n=t.utils.xml.createElement("variables"),a=0;d=e[a];a++){var C=t.utils.xml.createElement("variable");C.appendChild(t.utils.xml.createTextNode(d.name)),d.type&&C.setAttribute("type",d.type),C.id=d.getId(),n.appendChild(C)}return n},t.Xml.blockToDomWithXY=function(e,n){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;var a;e.workspace.RTL&&(a=e.workspace.getWidth()),n=t.Xml.blockToDom(e,n);var d=e.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(e.workspace.RTL?a-d.x:d.x)),n.setAttribute("y",Math.round(d.y)),n},t.Xml.fieldToDom_=function(e){if(e.isSerializable()){var n=t.utils.xml.createElement("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},t.Xml.allFieldsToDom_=function(e,n){for(var d,a=0;d=e.inputList[a];a++)for(var D,C=0;D=d.fieldRow[C];C++)(D=t.Xml.fieldToDom_(D))&&n.appendChild(D)},t.Xml.blockToDom=function(e,n){if(e.isInsertionMarker())return(e=e.getChildren(!1)[0])?t.Xml.blockToDom(e):new DocumentFragment;var a=t.utils.xml.createElement(e.isShadow()?"shadow":"block");if(a.setAttribute("type",e.type),n||a.setAttribute("id",e.id),e.mutationToDom){var d=e.mutationToDom();d&&(d.hasChildNodes()||d.hasAttributes())&&a.appendChild(d)}if(t.Xml.allFieldsToDom_(e,a),d=e.getCommentText()){var C=e.commentModel.size,D=e.commentModel.pinned,B=t.utils.xml.createElement("comment");B.appendChild(t.utils.xml.createTextNode(d)),B.setAttribute("pinned",D),B.setAttribute("h",C.height),B.setAttribute("w",C.width),a.appendChild(B)}for(e.data&&((d=t.utils.xml.createElement("data")).appendChild(t.utils.xml.createTextNode(e.data)),a.appendChild(d)),d=0;C=e.inputList[d];d++){var z;if(D=!0,C.type!=t.inputTypes.DUMMY){var oe=C.connection.targetBlock();C.type==t.inputTypes.VALUE?z=t.utils.xml.createElement("value"):C.type==t.inputTypes.STATEMENT&&(z=t.utils.xml.createElement("statement")),!(B=C.connection.getShadowDom())||oe&&oe.isShadow()||z.appendChild(t.Xml.cloneShadow_(B,n)),oe&&(B=t.Xml.blockToDom(oe,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&(z.appendChild(B),D=!1),z.setAttribute("name",C.name),D||a.appendChild(z)}}return null!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&a.setAttribute("inline",e.inputsInline),e.isCollapsed()&&a.setAttribute("collapsed",!0),e.isEnabled()||a.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||a.setAttribute("deletable",!1),e.isMovable()||e.isShadow()||a.setAttribute("movable",!1),e.isEditable()||a.setAttribute("editable",!1),(d=e.getNextBlock())&&(B=t.Xml.blockToDom(d,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&((z=t.utils.xml.createElement("next")).appendChild(B),a.appendChild(z)),!(B=e.nextConnection&&e.nextConnection.getShadowDom())||d&&d.isShadow()||z.appendChild(t.Xml.cloneShadow_(B,n)),a},t.Xml.cloneShadow_=function(e,n){for(var d,a=e=e.cloneNode(!0);a;)if(n&&"shadow"==a.nodeName&&a.removeAttribute("id"),a.firstChild)a=a.firstChild;else{for(;a&&!a.nextSibling;)d=a,a=a.parentNode,d.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==d.data.trim()&&a.firstChild!=d&&t.utils.dom.removeNode(d);a&&(d=a,a=a.nextSibling,d.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==d.data.trim()&&t.utils.dom.removeNode(d))}return e},t.Xml.domToText=function(e){return t.utils.xml.domToText(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},t.Xml.domToPrettyText=function(e){e=t.Xml.domToText(e).split("<");for(var n="",a=1;a<e.length;a++){var d=e[a];"/"==d[0]&&(n=n.substring(2)),e[a]=n+"<"+d,"/"!=d[0]&&"/>"!=d.slice(-2)&&(n+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},t.Xml.textToDom=function(e){var n=t.utils.xml.textToDomDocument(e);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return n.documentElement},t.Xml.clearWorkspaceAndLoadFromXml=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=t.Xml.domToWorkspace(e,n),n.setResizesEnabled(!0),e},t.Xml.domToWorkspace=function(e,n){if(e instanceof t.Workspace){var a=e;e=n,n=a,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var d;n.RTL&&(d=n.getWidth()),a=[],t.utils.dom.startTextWidthCache();var C=t.Events.getGroup();C||t.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var D=!0;try{for(var z,B=0;z=e.childNodes[B];B++){var oe=z.nodeName.toLowerCase(),be=z;if("block"==oe||"shadow"==oe&&!t.Events.recordUndo){var se=t.Xml.domToBlock(be,n);a.push(se.id);var Ie=be.hasAttribute("x")?parseInt(be.getAttribute("x"),10):10,Ge=be.hasAttribute("y")?parseInt(be.getAttribute("y"),10):10;isNaN(Ie)||isNaN(Ge)||se.moveBy(n.RTL?d-Ie:Ie,Ge),D=!1}else{if("shadow"==oe)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==oe)n.rendered?t.WorkspaceCommentSvg?t.WorkspaceCommentSvg.fromXml(be,n,d):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):t.WorkspaceComment?t.WorkspaceComment.fromXml(be,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==oe){if(!D)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");t.Xml.domToVariables(be,n),D=!1}}}}finally{C||t.Events.setGroup(!1),t.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),t.Events.fire(new(t.Events.get(t.Events.FINISHED_LOADING))(n)),a},t.Xml.appendDomToWorkspace=function(e,n){var a;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(a=n.getBlocksBoundingBox()),e=t.Xml.domToWorkspace(e,n),a&&a.top!=a.bottom){var d=a.bottom,C=n.RTL?a.right:a.left,D=1/0,B=-1/0,z=1/0;for(a=0;a<e.length;a++){var oe=n.getBlockById(e[a]).getRelativeToSurfaceXY();oe.y<z&&(z=oe.y),oe.x<D&&(D=oe.x),oe.x>B&&(B=oe.x)}for(d=d-z+10,C=n.RTL?C-B:C-D,a=0;a<e.length;a++)n.getBlockById(e[a]).moveBy(C,d)}return e},t.Xml.domToBlock=function(e,n){if(e instanceof t.Workspace){var a=e;e=n,n=a,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}t.Events.disable(),a=n.getAllVariables();try{var d=t.Xml.domToBlockHeadless_(e,n),C=d.getDescendants(!1);if(n.rendered){d.setConnectionTracking(!1);for(var D=C.length-1;0<=D;D--)C[D].initSvg();for(D=C.length-1;0<=D;D--)C[D].render(!1);setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1),d.updateDisabled(),n.resizeContents()}else for(D=C.length-1;0<=D;D--)C[D].initModel()}finally{t.Events.enable()}if(t.Events.isEnabled()){for(e=t.Variables.getAddedVariables(n,a),D=0;D<e.length;D++)n=e[D],t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(n));t.Events.fire(new(t.Events.get(t.Events.CREATE))(d))}return d},t.Xml.domToVariables=function(e,n){for(var d,a=0;d=e.childNodes[a];a++)if(d.nodeType==t.utils.dom.NodeType.ELEMENT_NODE){var C=d.getAttribute("type"),D=d.getAttribute("id");n.createVariable(d.textContent,C,D)}},t.Xml.mapSupportedXmlTags_=function(e){for(var d,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},a=0;d=e.childNodes[a];a++)if(d.nodeType!=t.utils.dom.NodeType.TEXT_NODE)switch(d.nodeName.toLowerCase()){case"mutation":n.mutation.push(d);break;case"comment":if(!t.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(d);break;case"data":n.data.push(d);break;case"title":case"field":n.field.push(d);break;case"value":case"statement":n.input.push(d);break;case"next":n.next.push(d);break;default:console.warn("Ignoring unknown tag: "+d.nodeName)}return n},t.Xml.applyMutationTagNodes_=function(e,n){for(var C,a=!1,d=0;C=e[d];d++)n.domToMutation&&(n.domToMutation(C),n.initSvg&&(a=!0));return a},t.Xml.applyCommentTagNodes_=function(e,n){for(var d,a=0;d=e[a];a++){var C=d.textContent,D="true"==d.getAttribute("pinned"),B=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10),n.setCommentText(C),n.commentModel.pinned=D,isNaN(B)||isNaN(d)||(n.commentModel.size=new t.utils.Size(B,d)),D&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},t.Xml.applyDataTagNodes_=function(e,n){for(var d,a=0;d=e[a];a++)n.data=d.textContent},t.Xml.applyFieldTagNodes_=function(e,n){for(var d,a=0;d=e[a];a++){var C=d.getAttribute("name");t.Xml.domToField_(n,C,d)}},t.Xml.findChildBlocks_=function(e){for(var d,n={childBlockElement:null,childShadowElement:null},a=0;d=e.childNodes[a];a++)d.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&("block"==d.nodeName.toLowerCase()?n.childBlockElement=d:"shadow"==d.nodeName.toLowerCase()&&(n.childShadowElement=d));return n},t.Xml.applyInputTagNodes_=function(e,n,a,d){for(var D,C=0;D=e[C];C++){var B=D.getAttribute("name"),z=a.getInput(B);if(!z){console.warn("Ignoring non-existent input "+B+" in block "+d);break}if((D=t.Xml.findChildBlocks_(D)).childBlockElement){if(!z.connection)throw TypeError("Input connection does not exist.");t.Xml.domToBlockHeadless_(D.childBlockElement,n,z.connection,!1)}D.childShadowElement&&z.connection.setShadowDom(D.childShadowElement)}},t.Xml.applyNextTagNodes_=function(e,n,a){for(var C,d=0;C=e[d];d++){if((C=t.Xml.findChildBlocks_(C)).childBlockElement){if(!a.nextConnection)throw TypeError("Next statement does not exist.");if(a.nextConnection.isConnected())throw TypeError("Next statement is already connected.");t.Xml.domToBlockHeadless_(C.childBlockElement,n,a.nextConnection,!0)}C.childShadowElement&&a.nextConnection&&a.nextConnection.setShadowDom(C.childShadowElement)}},t.Xml.domToBlockHeadless_=function(e,n,a,d){var C=e.getAttribute("type");if(!C)throw TypeError("Block type unspecified: "+e.outerHTML);var D=e.getAttribute("id");D=n.newBlock(C,D);var B=t.Xml.mapSupportedXmlTags_(e),z=t.Xml.applyMutationTagNodes_(B.mutation,D);if(t.Xml.applyCommentTagNodes_(B.comment,D),t.Xml.applyDataTagNodes_(B.data,D),a)if(d){if(!D.previousConnection)throw TypeError("Next block does not have previous statement.");a.connect(D.previousConnection)}else if(D.outputConnection)a.connect(D.outputConnection);else{if(!D.previousConnection)throw TypeError("Child block does not have output or previous statement.");a.connect(D.previousConnection)}if(t.Xml.applyFieldTagNodes_(B.field,D),t.Xml.applyInputTagNodes_(B.input,n,D,C),t.Xml.applyNextTagNodes_(B.next,n,D),z&&D.initSvg(),(n=e.getAttribute("inline"))&&D.setInputsInline("true"==n),(n=e.getAttribute("disabled"))&&D.setEnabled("true"!=n&&"disabled"!=n),(n=e.getAttribute("deletable"))&&D.setDeletable("true"==n),(n=e.getAttribute("movable"))&&D.setMovable("true"==n),(n=e.getAttribute("editable"))&&D.setEditable("true"==n),(n=e.getAttribute("collapsed"))&&D.setCollapsed("true"==n),"shadow"==e.nodeName.toLowerCase()){for(e=D.getChildren(!1),n=0;a=e[n];n++)if(!a.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(D.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");D.setShadow(!0)}return D},t.Xml.domToField_=function(e,n,a){var d=e.getField(n);d?d.fromXml(a):console.warn("Ignoring non-existent field "+n+" in block "+e.type)},t.Xml.deleteNext=function(e){for(var a,n=0;a=e.childNodes[n];n++)if("next"==a.nodeName.toLowerCase()){e.removeChild(a);break}},t.Events.BlockBase=function(e){t.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.BlockBase,t.Events.Abstract),t.Events.BlockBase.prototype.toJson=function(){var e=t.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},t.Events.BlockBase.prototype.fromJson=function(e){t.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},t.Events.BlockChange=function(e,n,a,d,C){t.Events.Change.superClass_.constructor.call(this,e),e&&(this.element=void 0===n?"":n,this.name=void 0===a?"":a,this.oldValue=void 0===d?"":d,this.newValue=void 0===C?"":C)},t.utils.object.inherits(t.Events.BlockChange,t.Events.BlockBase),t.Events.Change=t.Events.BlockChange,t.Events.BlockChange.prototype.type=t.Events.CHANGE,t.Events.BlockChange.prototype.toJson=function(){var e=t.Events.BlockChange.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.oldValue=this.oldValue,e.newValue=this.newValue,e},t.Events.BlockChange.prototype.fromJson=function(e){t.Events.BlockChange.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue},t.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},t.Events.BlockChange.prototype.run=function(e){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":n.setEnabled(!e);break;case"inline":n.setInputsInline(!!e);break;case"mutation":var a="";if(n.mutationToDom&&(a=(a=n.mutationToDom())&&t.Xml.domToText(a)),n.domToMutation){var d=t.Xml.textToDom(e||"<mutation/>");n.domToMutation(d)}t.Events.fire(new t.Events.BlockChange(n,"mutation",null,a,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},t.Events.Create=function(e){t.Events.Create.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e))},t.utils.object.inherits(t.Events.Create,t.Events.BlockBase),t.Events.BlockCreate=t.Events.Create,t.Events.Create.prototype.type=t.Events.CREATE,t.Events.Create.prototype.toJson=function(){var e=t.Events.Create.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Create.prototype.fromJson=function(e){t.Events.Create.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Create.prototype.run=function(e){var n=this.getEventWorkspace_();if(e)(e=t.utils.xml.createElement("xml")).appendChild(this.xml),t.Xml.domToWorkspace(e,n);else{e=0;for(var a;a=this.ids[e];e++){var d=n.getBlockById(a);d?d.dispose(!1):a==this.blockId&&console.warn("Can't uncreate non-existent block: "+a)}}},t.Events.Delete=function(e){if(t.Events.Delete.superClass_.constructor.call(this,e),e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e)}},t.utils.object.inherits(t.Events.Delete,t.Events.BlockBase),t.Events.BlockDelete=t.Events.Delete,t.Events.Delete.prototype.type=t.Events.DELETE,t.Events.Delete.prototype.toJson=function(){var e=t.Events.Delete.superClass_.toJson.call(this);return e.oldXml=t.Xml.domToText(this.oldXml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Delete.prototype.fromJson=function(e){t.Events.Delete.superClass_.fromJson.call(this,e),this.oldXml=t.Xml.textToDom(e.oldXml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Delete.prototype.run=function(e){var n=this.getEventWorkspace_();if(e){e=0;for(var a;a=this.ids[e];e++){var d=n.getBlockById(a);d?d.dispose(!1):a==this.blockId&&console.warn("Can't delete non-existent block: "+a)}}else(e=t.utils.xml.createElement("xml")).appendChild(this.oldXml),t.Xml.domToWorkspace(e,n)},t.Events.Move=function(e){t.Events.Move.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},t.utils.object.inherits(t.Events.Move,t.Events.BlockBase),t.Events.BlockMove=t.Events.Move,t.Events.Move.prototype.type=t.Events.MOVE,t.Events.Move.prototype.toJson=function(){var e=t.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Move.prototype.fromJson=function(e){if(t.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate){var n=e.newCoordinate.split(",");this.newCoordinate=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Move.prototype.recordNew=function(){var e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate},t.Events.Move.prototype.currentLocation_=function(){var e=this.getEventWorkspace_().getBlockById(this.blockId),n={},a=e.getParent();return a?(n.parentId=a.id,(e=a.getInputWithBlock(e))&&(n.inputName=e.name)):n.coordinate=e.getRelativeToSurfaceXY(),n},t.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&t.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},t.Events.Move.prototype.run=function(e){var n=this.getEventWorkspace_(),a=n.getBlockById(this.blockId);if(a){var d=e?this.newParentId:this.oldParentId,C=e?this.newInputName:this.oldInputName,D=e?this.newCoordinate:this.oldCoordinate;if(e=null,d&&!(e=n.getBlockById(d)))return void console.warn("Can't connect to non-existent block: "+d);if(a.getParent()&&a.unplug(),D)C=a.getRelativeToSurfaceXY(),a.moveBy(D.x-C.x,D.y-C.y);else{if(n=(a=a.outputConnection||a.previousConnection).type,C){if(e=e.getInput(C))var B=e.connection}else n==t.connectionTypes.PREVIOUS_STATEMENT&&(B=e.nextConnection);B?a.connect(B):console.warn("Can't connect to non-existent input: "+C)}}else console.warn("Can't move non-existent block: "+this.blockId)},t.registry.register(t.registry.Type.EVENT,t.Events.CREATE,t.Events.Create),t.registry.register(t.registry.Type.EVENT,t.Events.DELETE,t.Events.Delete),t.registry.register(t.registry.Type.EVENT,t.Events.CHANGE,t.Events.BlockChange),t.registry.register(t.registry.Type.EVENT,t.Events.MOVE,t.Events.Move),t.Events.FinishedLoading=function(e){this.isBlank=void 0===e,this.workspaceId=e?e.id:"",this.group=t.Events.getGroup(),this.recordUndo=!1},t.utils.object.inherits(t.Events.FinishedLoading,t.Events.Abstract),t.Events.FinishedLoading.prototype.type=t.Events.FINISHED_LOADING,t.Events.FinishedLoading.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),this.workspaceId&&(e.workspaceId=this.workspaceId),e},t.Events.FinishedLoading.prototype.fromJson=function(e){this.isBlank=!1,this.workspaceId=e.workspaceId,this.group=e.group},t.registry.register(t.registry.Type.EVENT,t.Events.FINISHED_LOADING,t.Events.FinishedLoading),t.Events.UiBase=function(e){t.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===e,this.workspaceId=e||"",this.recordUndo=!1},t.utils.object.inherits(t.Events.UiBase,t.Events.Abstract),t.Events.UiBase.prototype.isUiEvent=!0,t.Events.Ui=function(e,n,a,d){t.Events.Ui.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===a?"":a,this.newValue=void 0===d?"":d},t.utils.object.inherits(t.Events.Ui,t.Events.UiBase),t.Events.Ui.prototype.type=t.Events.UI,t.Events.Ui.prototype.toJson=function(){var e=t.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},t.Events.Ui.prototype.fromJson=function(e){t.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.UI,t.Events.Ui),t.Events.VarBase=function(e){t.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===e)?"":e.getId(),this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.VarBase,t.Events.Abstract),t.Events.VarBase.prototype.toJson=function(){var e=t.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},t.Events.VarBase.prototype.fromJson=function(e){t.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},t.Events.VarCreate=function(e){t.Events.VarCreate.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarCreate,t.Events.VarBase),t.Events.VarCreate.prototype.type=t.Events.VAR_CREATE,t.Events.VarCreate.prototype.toJson=function(){var e=t.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarCreate.prototype.fromJson=function(e){t.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarCreate.prototype.run=function(e){var n=this.getEventWorkspace_();e?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},t.Events.VarDelete=function(e){t.Events.VarDelete.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarDelete,t.Events.VarBase),t.Events.VarDelete.prototype.type=t.Events.VAR_DELETE,t.Events.VarDelete.prototype.toJson=function(){var e=t.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarDelete.prototype.fromJson=function(e){t.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarDelete.prototype.run=function(e){var n=this.getEventWorkspace_();e?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},t.Events.VarRename=function(e,n){t.Events.VarRename.superClass_.constructor.call(this,e),e&&(this.oldName=e.name,this.newName=void 0===n?"":n)},t.utils.object.inherits(t.Events.VarRename,t.Events.VarBase),t.Events.VarRename.prototype.type=t.Events.VAR_RENAME,t.Events.VarRename.prototype.toJson=function(){var e=t.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},t.Events.VarRename.prototype.fromJson=function(e){t.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},t.Events.VarRename.prototype.run=function(e){this.getEventWorkspace_().renameVariableById(this.varId,e?this.newName:this.oldName)},t.registry.register(t.registry.Type.EVENT,t.Events.VAR_CREATE,t.Events.VarCreate),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_DELETE,t.Events.VarDelete),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_RENAME,t.Events.VarRename),t.BlockDragSurfaceSvg=function(e){this.container_=e,this.createDom()},t.BlockDragSurfaceSvg.prototype.SVG_=null,t.BlockDragSurfaceSvg.prototype.dragGroup_=null,t.BlockDragSurfaceSvg.prototype.container_=null,t.BlockDragSurfaceSvg.prototype.scale_=1,t.BlockDragSurfaceSvg.prototype.surfaceXY_=null,t.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new t.utils.Coordinate(0,0),t.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.SVG_))},t.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new t.utils.Coordinate(0,0)},t.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(e,n,a){this.scale_=a,e=e.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(e,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+e+","+n+") scale("+a+")")},t.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,n=this.surfaceXY_.y;e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.BlockDragSurfaceSvg.prototype.translateBy=function(e,n){this.surfaceXY_=new t.utils.Coordinate(this.surfaceXY_.x+e,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.translateSurface=function(e,n){this.surfaceXY_=new t.utils.Coordinate(e*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=t.utils.getRelativeXY(this.SVG_);return new t.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},t.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},t.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},t.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},t.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},t.BlockDragSurfaceSvg.prototype.clearAndHide=function(e){if(e?e.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},t.Css={},t.Css.injected_=!1,t.Css.register=function(e){if(t.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(t.Css.CONTENT,e),e.length=0},t.Css.inject=function(e,n){if(!t.Css.injected_){t.Css.injected_=!0;var a=t.Css.CONTENT.join("\n");t.Css.CONTENT.length=0,e&&(e=n.replace(/[\\/]$/,""),a=a.replace(/<<<PATH>>>/g,e),(e=document.createElement("style")).id="blockly-common-style",a=document.createTextNode(a),e.appendChild(a),document.head.insertBefore(e,document.head.firstChild))}},t.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],t.Grid=function(e,n){this.gridPattern_=e,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=e.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},t.Grid.prototype.scale_=1,t.Grid.prototype.dispose=function(){this.gridPattern_=null},t.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},t.Grid.prototype.getSpacing=function(){return this.spacing_},t.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},t.Grid.prototype.update=function(e){this.scale_=e;var n=this.spacing_*e||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var a=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,d=n+this.length_/2;this.setLineAttributes_(this.line1_,e,a*=e,d*=e,n*=e,n),this.setLineAttributes_(this.line2_,e,n,n,a,d)},t.Grid.prototype.setLineAttributes_=function(e,n,a,d,C,D){e&&(e.setAttribute("stroke-width",n),e.setAttribute("x1",a),e.setAttribute("y1",C),e.setAttribute("x2",d),e.setAttribute("y2",D))},t.Grid.prototype.moveTo=function(e,n){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",n),(t.utils.userAgent.IE||t.utils.userAgent.EDGE)&&this.update(this.scale_)},t.Grid.createDom=function(e,n,a){return e=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},a),0<n.length&&0<n.spacing?(t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e),1<n.length&&t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e)):t.utils.dom.createSvgElement(t.utils.Svg.LINE,{},e),e},t.Theme=function(e,n,a,d){this.name=e,this.blockStyles=n||Object.create(null),this.categoryStyles=a||Object.create(null),this.componentStyles=d||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,t.registry.register(t.registry.Type.THEME,e,this)},t.Theme.prototype.getClassName=function(){return this.name+"-theme"},t.Theme.prototype.setBlockStyle=function(e,n){this.blockStyles[e]=n},t.Theme.prototype.setCategoryStyle=function(e,n){this.categoryStyles[e]=n},t.Theme.prototype.getComponentStyle=function(e){return(e=this.componentStyles[e])&&"string"==typeof e&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null},t.Theme.prototype.setComponentStyle=function(e,n){this.componentStyles[e]=n},t.Theme.prototype.setFontStyle=function(e){this.fontStyle=e},t.Theme.prototype.setStartHats=function(e){this.startHats=e},t.Theme.defineTheme=function(e,n){var a=new t.Theme(e),d=n.base;return d&&("string"==typeof d&&(d=t.registry.getObject(t.registry.Type.THEME,d)),d instanceof t.Theme&&(t.utils.object.deepMerge(a,d),a.name=e)),t.utils.object.deepMerge(a.blockStyles,n.blockStyles),t.utils.object.deepMerge(a.categoryStyles,n.categoryStyles),t.utils.object.deepMerge(a.componentStyles,n.componentStyles),t.utils.object.deepMerge(a.fontStyle,n.fontStyle),null!=n.startHats&&(a.startHats=n.startHats),a},t.Themes={},t.Themes.Classic={},t.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},t.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},t.Themes.Classic=new t.Theme("classic",t.Themes.Classic.defaultBlockStyles,t.Themes.Classic.categoryStyles),t.utils.IdGenerator={},t.utils.IdGenerator.nextId_=0,t.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(t.utils.IdGenerator.nextId_++).toString(36)},t.utils.Metrics=function(){},t.utils.toolbox={},t.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",t.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",t.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},t.utils.toolbox.convertToolboxDefToJson=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=t.utils.toolbox.parseToolboxTree(e),e=t.utils.toolbox.convertToToolboxJson_(e)),t.utils.toolbox.validateToolbox_(e),e):null},t.utils.toolbox.validateToolbox_=function(e){var n=e.kind;if(e=e.contents,n&&n!=t.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=t.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+t.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+t.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!e)throw Error("Toolbox must have a contents attribute.")},t.utils.toolbox.convertFlyoutDefToJsonArray=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:t.utils.toolbox.xmlToJsonArray_(e):[]},t.utils.toolbox.hasCategories=function(e){if(!e)return!1;var n=e.kind;return n?n==t.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!e.contents.filter(function(a){return"CATEGORY"==a.kind.toUpperCase()}).length},t.utils.toolbox.isCategoryCollapsible=function(e){return!(!e||!e.contents||!e.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},t.utils.toolbox.convertToToolboxJson_=function(e){var n={contents:t.utils.toolbox.xmlToJsonArray_(e)};return e instanceof Node&&t.utils.toolbox.addAttributes_(e,n),n},t.utils.toolbox.xmlToJsonArray_=function(e){var d,n=[],a=e.childNodes;for(a||(a=e),e=0;d=a[e];e++)if(d.tagName){var C={},D=d.tagName.toUpperCase();C.kind=D,"BLOCK"==D?C.blockxml=d:d.childNodes&&0<d.childNodes.length&&(C.contents=t.utils.toolbox.xmlToJsonArray_(d)),t.utils.toolbox.addAttributes_(d,C),n.push(C)}return n},t.utils.toolbox.addAttributes_=function(e,n){for(var a=0;a<e.attributes.length;a++){var d=e.attributes[a];-1<d.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[d.nodeName.replace("css-","")]=d.value):n[d.nodeName]=d.value}},t.utils.toolbox.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(t.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=t.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},t.Options=function(e){var n=!!e.readOnly;if(n)var a=null,d=!1,C=!1,D=!1,B=!1,z=!1,oe=!1;else{a=t.utils.toolbox.convertToolboxDefToJson(e.toolbox),d=t.utils.toolbox.hasCategories(a),void 0===(C=e.trashcan)&&(C=d);var be=e.maxTrashcanContents;C?void 0===be&&(be=32):be=0,void 0===(D=e.collapse)&&(D=d),void 0===(B=e.comments)&&(B=d),void 0===(z=e.disable)&&(z=d),void 0===(oe=e.sounds)&&(oe=!0)}var se=!!e.rtl,Ie=e.horizontalLayout;void 0===Ie&&(Ie=!1);var Ge=e.toolboxPosition;Ge="end"!==Ge,Ge=Ie?Ge?t.utils.toolbox.Position.TOP:t.utils.toolbox.Position.BOTTOM:Ge==se?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT;var _e=e.css;void 0===_e&&(_e=!0);var Le="https://blockly-demo.appspot.com/static/media/";e.media?Le=e.media:e.path&&(Le=e.path+"media/");var We=void 0===e.oneBasedIndex||!!e.oneBasedIndex,$e=e.renderer||"geras",Te=e.plugins||{};this.RTL=se,this.oneBasedIndex=We,this.collapse=D,this.comments=B,this.disable=z,this.readOnly=n,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.pathToMedia=Le,this.hasCategories=d,this.moveOptions=t.Options.parseMoveOptions_(e,d),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=C,this.maxTrashcanContents=be,this.hasSounds=oe,this.hasCss=_e,this.horizontalLayout=Ie,this.languageTree=a,this.gridOptions=t.Options.parseGridOptions_(e),this.zoomOptions=t.Options.parseZoomOptions_(e),this.toolboxPosition=Ge,this.theme=t.Options.parseThemeOptions_(e),this.renderer=$e,this.rendererOverrides=e.rendererOverrides,this.gridPattern=null,this.parentWorkspace=e.parentWorkspace,this.plugins=Te},t.BlocklyOptions=function(){},t.Options.parseMoveOptions_=function(e,n){var a=e.move||{},d={};return void 0===a.scrollbars&&void 0===e.scrollbars?d.scrollbars=n:"object"==typeof a.scrollbars?(d.scrollbars={},d.scrollbars.horizontal=!!a.scrollbars.horizontal,d.scrollbars.vertical=!!a.scrollbars.vertical,d.scrollbars.horizontal&&d.scrollbars.vertical?d.scrollbars=!0:d.scrollbars.horizontal||d.scrollbars.vertical||(d.scrollbars=!1)):d.scrollbars=!!a.scrollbars||!!e.scrollbars,d.wheel=d.scrollbars&&void 0!==a.wheel?!!a.wheel:"object"==typeof d.scrollbars,d.drag=!(!d.scrollbars||void 0!==a.drag&&!a.drag),d},t.Options.parseZoomOptions_=function(e){var n={};return n.controls=void 0!==(e=e.zoom||{}).controls&&!!e.controls,n.wheel=void 0!==e.wheel&&!!e.wheel,n.startScale=void 0===e.startScale?1:Number(e.startScale),n.maxScale=void 0===e.maxScale?3:Number(e.maxScale),n.minScale=void 0===e.minScale?.3:Number(e.minScale),n.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),n.pinch=void 0===e.pinch?n.wheel||n.controls:!!e.pinch,n},t.Options.parseGridOptions_=function(e){e=e.grid||{};var n={};return n.spacing=Number(e.spacing)||0,n.colour=e.colour||"#888",n.length=void 0===e.length?1:Number(e.length),n.snap=0<n.spacing&&!!e.snap,n},t.Options.parseThemeOptions_=function(e){return"string"==typeof(e=e.theme||t.Themes.Classic)?t.registry.getObject(t.registry.Type.THEME,e):e instanceof t.Theme?e:t.Theme.defineTheme(e.name||"builtin"+t.utils.IdGenerator.getNextUniqueId(),e)},t.Options.parseToolboxTree=function(e){return t.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),t.utils.toolbox.parseToolboxTree(e)},t.ScrollbarPair=function(e,n,a,d,C){this.workspace_=e,a=void 0===a||a;var D=(n=void 0===n||n)&&a;n&&(this.hScroll=new t.Scrollbar(e,!0,D,d,C)),a&&(this.vScroll=new t.Scrollbar(e,!1,D,d,C)),D&&(this.corner_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:t.Scrollbar.scrollbarThickness,width:t.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),t.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas())),this.oldHostMetrics_=null},t.ScrollbarPair.prototype.dispose=function(){t.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},t.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var n=!1,a=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==e.scrollWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.scrollLeft==e.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==e.scrollHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.scrollTop==e.scrollTop||(a=!0)):a=n=!0,n||a){try{t.Events.disable(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&a&&this.vScroll.resize(e)}finally{t.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=e}},t.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},t.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},t.ScrollbarPair.prototype.setOrigin=function(e,n){this.hScroll&&this.hScroll.setOrigin(e,n),this.vScroll&&this.vScroll.setOrigin(e,n)},t.ScrollbarPair.prototype.set=function(e,n,a){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(n,!1),(a||void 0===a)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(e))},t.ScrollbarPair.prototype.setX=function(e){this.hScroll&&this.hScroll.set(e,!0)},t.ScrollbarPair.prototype.setY=function(e){this.vScroll&&this.vScroll.set(e,!0)},t.ScrollbarPair.prototype.setContainerVisible=function(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)},t.ScrollbarPair.prototype.isVisible=function(){var e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e},t.ScrollbarPair.prototype.resizeContent=function(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)},t.ScrollbarPair.prototype.resizeView=function(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)},t.Scrollbar=function(e,n,a,d,C){this.workspace_=e,this.pair_=a||!1,this.horizontal_=n,this.margin_=void 0!==C?C:t.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(d),this.position=new t.utils.Coordinate(0,0),e=t.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=t.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},t.Scrollbar.prototype.origin_=new t.utils.Coordinate(0,0),t.Scrollbar.prototype.startDragMouse_=0,t.Scrollbar.prototype.scrollbarLength_=0,t.Scrollbar.prototype.handleLength_=0,t.Scrollbar.prototype.handlePosition_=0,t.Scrollbar.prototype.isVisible_=!0,t.Scrollbar.prototype.containerVisible_=!0,t.Scrollbar.scrollbarThickness=15,t.Touch.TOUCH_ENABLED&&(t.Scrollbar.scrollbarThickness=25),t.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,t.Scrollbar.metricsAreEquivalent_=function(e,n){return e.viewWidth==n.viewWidth&&e.viewHeight==n.viewHeight&&e.viewLeft==n.viewLeft&&e.viewTop==n.viewTop&&e.absoluteTop==n.absoluteTop&&e.absoluteLeft==n.absoluteLeft&&e.scrollWidth==n.scrollWidth&&e.scrollHeight==n.scrollHeight&&e.scrollLeft==n.scrollLeft&&e.scrollTop==n.scrollTop},t.Scrollbar.prototype.dispose=function(){this.cleanUp_(),t.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,t.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,t.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},t.Scrollbar.prototype.constrainHandleLength_=function(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength_)},t.Scrollbar.prototype.setHandleLength_=function(e){this.handleLength_=e,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},t.Scrollbar.prototype.constrainHandlePosition_=function(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength_-this.handleLength_)},t.Scrollbar.prototype.setHandlePosition=function(e){this.handlePosition_=e,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},t.Scrollbar.prototype.setScrollbarLength_=function(e){this.scrollbarLength_=e,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},t.Scrollbar.prototype.setPosition=function(e,n){this.position.x=e,this.position.y=n,t.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},t.Scrollbar.prototype.resize=function(e){!e&&!(e=this.workspace_.getMetrics())||this.oldHostMetrics_&&t.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.oldHostMetrics_=e,this.updateMetrics_())},t.Scrollbar.prototype.requiresViewResize_=function(e){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics_.absoluteTop!==e.absoluteTop},t.Scrollbar.prototype.resizeHorizontal_=function(e){this.requiresViewResize_(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeViewHorizontal=function(e){var n=e.viewWidth-2*this.margin_;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=e.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=t.Scrollbar.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-t.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeContentHorizontal=function(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*e.viewWidth/e.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var a=this.scrollbarLength_-this.handleLength_;e=this.constrainHandlePosition_(e=(e.viewLeft-e.scrollLeft)/(n=e.scrollWidth-e.viewWidth)*a),this.setHandlePosition(e),this.ratio=a/n}},t.Scrollbar.prototype.resizeVertical_=function(e){this.requiresViewResize_(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeViewVertical=function(e){var n=e.viewHeight-2*this.margin_;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?e.absoluteLeft+this.margin_:e.absoluteLeft+e.viewWidth-t.Scrollbar.scrollbarThickness-this.margin_,e.absoluteTop+this.margin_),this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeContentVertical=function(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*e.viewHeight/e.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var a=this.scrollbarLength_-this.handleLength_;e=this.constrainHandlePosition_(e=(e.viewTop-e.scrollTop)/(n=e.scrollHeight-e.viewHeight)*a),this.setHandlePosition(e),this.ratio=a/n}},t.Scrollbar.prototype.createDom_=function(e){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(n+=" "+e),this.outerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{class:n},null),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((t.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),t.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},t.Scrollbar.prototype.isVisible=function(){return this.isVisible_},t.Scrollbar.prototype.setContainerVisible=function(e){var n=e!=this.containerVisible_;this.containerVisible_=e,n&&this.updateDisplay_()},t.Scrollbar.prototype.setVisible=function(e){var n=e!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=e,n&&this.updateDisplay_()},t.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},t.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),t.Touch.clearTouchIdentifier(),this.cleanUp_(),t.utils.isRightButton(e))e.stopPropagation();else{var n=t.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var a=t.utils.getInjectionDivXY_(this.svgHandle_),d=this.handlePosition_,C=.95*this.handleLength_;n<=(a=this.horizontal_?a.x:a.y)?d-=C:n>=a+this.handleLength_&&(d+=C),this.setHandlePosition(this.constrainHandlePosition_(d)),this.updateMetrics_(),e.stopPropagation(),e.preventDefault()}},t.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),t.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,t.Scrollbar.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),t.Scrollbar.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())},t.Scrollbar.prototype.onMouseMoveHandle_=function(e){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?e.clientX:e.clientY)-this.startDragMouse_))),this.updateMetrics_()},t.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),t.Touch.clearTouchIdentifier(),this.cleanUp_()},t.Scrollbar.prototype.cleanUp_=function(){t.hideChaff(!0),t.Scrollbar.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseUpWrapper_),t.Scrollbar.onMouseUpWrapper_=null),t.Scrollbar.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseMoveWrapper_),t.Scrollbar.onMouseMoveWrapper_=null)},t.Scrollbar.prototype.getRatio_=function(){var e=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(e)&&(e=0),e},t.Scrollbar.prototype.updateMetrics_=function(){var e=this.getRatio_(),n={};this.horizontal_?n.x=e:n.y=e,this.workspace_.setMetrics(n)},t.Scrollbar.prototype.set=function(e,n){this.setHandlePosition(this.constrainHandlePosition_(e*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},t.Scrollbar.prototype.setOrigin=function(e,n){this.origin_=new t.utils.Coordinate(e,n)},t.Tooltip={},t.Tooltip.visible=!1,t.Tooltip.blocked_=!1,t.Tooltip.LIMIT=50,t.Tooltip.mouseOutPid_=0,t.Tooltip.showPid_=0,t.Tooltip.lastX_=0,t.Tooltip.lastY_=0,t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.OFFSET_X=0,t.Tooltip.OFFSET_Y=10,t.Tooltip.RADIUS_OK=10,t.Tooltip.HOVER_MS=750,t.Tooltip.MARGINS=5,t.Tooltip.DIV=null,t.Tooltip.getTooltipOfObject=function(e){if(e=t.Tooltip.getTargetObject_(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},t.Tooltip.getTargetObject_=function(e){for(;e&&e.tooltip;){if("string"==typeof e.tooltip||"function"==typeof e.tooltip)return e;e=e.tooltip}return null},t.Tooltip.createDom=function(){t.Tooltip.DIV||(t.Tooltip.DIV=document.createElement("div"),t.Tooltip.DIV.className="blocklyTooltipDiv",(t.parentContainer||document.body).appendChild(t.Tooltip.DIV))},t.Tooltip.bindMouseEvents=function(e){e.mouseOverWrapper_=t.browserEvents.bind(e,"mouseover",null,t.Tooltip.onMouseOver_),e.mouseOutWrapper_=t.browserEvents.bind(e,"mouseout",null,t.Tooltip.onMouseOut_),e.addEventListener("mousemove",t.Tooltip.onMouseMove_,!1)},t.Tooltip.unbindMouseEvents=function(e){e&&(t.browserEvents.unbind(e.mouseOverWrapper_),t.browserEvents.unbind(e.mouseOutWrapper_),e.removeEventListener("mousemove",t.Tooltip.onMouseMove_))},t.Tooltip.onMouseOver_=function(e){t.Tooltip.blocked_||(e=t.Tooltip.getTargetObject_(e.currentTarget),t.Tooltip.element_!=e&&(t.Tooltip.hide(),t.Tooltip.poisonedElement_=null,t.Tooltip.element_=e),clearTimeout(t.Tooltip.mouseOutPid_))},t.Tooltip.onMouseOut_=function(e){t.Tooltip.blocked_||(t.Tooltip.mouseOutPid_=setTimeout(function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},1),clearTimeout(t.Tooltip.showPid_))},t.Tooltip.onMouseMove_=function(e){if(t.Tooltip.element_&&t.Tooltip.element_.tooltip&&!t.Tooltip.blocked_)if(t.Tooltip.visible){var n=t.Tooltip.lastX_-e.pageX;e=t.Tooltip.lastY_-e.pageY,Math.sqrt(n*n+e*e)>t.Tooltip.RADIUS_OK&&t.Tooltip.hide()}else t.Tooltip.poisonedElement_!=t.Tooltip.element_&&(clearTimeout(t.Tooltip.showPid_),t.Tooltip.lastX_=e.pageX,t.Tooltip.lastY_=e.pageY,t.Tooltip.showPid_=setTimeout(t.Tooltip.show_,t.Tooltip.HOVER_MS))},t.Tooltip.dispose=function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},t.Tooltip.hide=function(){t.Tooltip.visible&&(t.Tooltip.visible=!1,t.Tooltip.DIV&&(t.Tooltip.DIV.style.display="none")),t.Tooltip.showPid_&&clearTimeout(t.Tooltip.showPid_)},t.Tooltip.block=function(){t.Tooltip.hide(),t.Tooltip.blocked_=!0},t.Tooltip.unblock=function(){t.Tooltip.blocked_=!1},t.Tooltip.show_=function(){if(!t.Tooltip.blocked_&&(t.Tooltip.poisonedElement_=t.Tooltip.element_,t.Tooltip.DIV)){t.Tooltip.DIV.textContent="";var e=t.Tooltip.getTooltipOfObject(t.Tooltip.element_);e=(e=t.utils.string.wrap(e,t.Tooltip.LIMIT)).split("\n");for(var n=0;n<e.length;n++){var a=document.createElement("div");a.appendChild(document.createTextNode(e[n])),t.Tooltip.DIV.appendChild(a)}e=t.Tooltip.element_.RTL,n=document.documentElement.clientWidth,a=document.documentElement.clientHeight,t.Tooltip.DIV.style.direction=e?"rtl":"ltr",t.Tooltip.DIV.style.display="block",t.Tooltip.visible=!0;var d=t.Tooltip.lastX_;d=e?d-(t.Tooltip.OFFSET_X+t.Tooltip.DIV.offsetWidth):d+t.Tooltip.OFFSET_X;var C=t.Tooltip.lastY_+t.Tooltip.OFFSET_Y;C+t.Tooltip.DIV.offsetHeight>a+window.scrollY&&(C-=t.Tooltip.DIV.offsetHeight+2*t.Tooltip.OFFSET_Y),e?d=Math.max(t.Tooltip.MARGINS-window.scrollX,d):d+t.Tooltip.DIV.offsetWidth>n+window.scrollX-2*t.Tooltip.MARGINS&&(d=n-t.Tooltip.DIV.offsetWidth-2*t.Tooltip.MARGINS),t.Tooltip.DIV.style.top=C+"px",t.Tooltip.DIV.style.left=d+"px"}},t.utils.aria={},t.utils.aria.ARIA_PREFIX_="aria-",t.utils.aria.ROLE_ATTRIBUTE_="role",t.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},t.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},t.utils.aria.setRole=function(e,n){e.setAttribute(t.utils.aria.ROLE_ATTRIBUTE_,n)},t.utils.aria.setState=function(e,n,a){Array.isArray(a)&&(a=a.join(" ")),e.setAttribute(t.utils.aria.ARIA_PREFIX_+n,a)},t.IASTNodeLocation=function(){},t.IASTNodeLocationSvg=function(){},t.IASTNodeLocationWithBlock=function(){},t.IKeyboardAccessible=function(){},t.utils.deprecation={},t.utils.deprecation.warn=function(e,n,a,d){e=e+" was deprecated on "+n+" and will be deleted on "+a+".",d&&(e+="\nUse "+d+" instead."),console.warn(e)},t.Connection=function(e,n){this.sourceBlock_=e,this.type=n},t.Connection.CAN_CONNECT=0,t.Connection.REASON_SELF_CONNECTION=1,t.Connection.REASON_WRONG_TYPE=2,t.Connection.REASON_TARGET_NULL=3,t.Connection.REASON_CHECKS_FAILED=4,t.Connection.REASON_DIFFERENT_WORKSPACES=5,t.Connection.REASON_SHADOW_PARENT=6,t.Connection.REASON_DRAG_CHECKS_FAILED=7,t.Connection.prototype.targetConnection=null,t.Connection.prototype.disposed=!1,t.Connection.prototype.check_=null,t.Connection.prototype.shadowDom_=null,t.Connection.prototype.x=0,t.Connection.prototype.y=0,t.Connection.prototype.connect_=function(e){var z,n=t.connectionTypes.INPUT_VALUE,a=this.getSourceBlock(),d=e.getSourceBlock();if(e.isConnected()&&e.disconnect(),this.isConnected()){var C=this.getShadowDom(!0);this.shadowDom_=null;var D=this.targetBlock();if(D.isShadow())D.dispose(!1);else{this.disconnect();var B=D}this.shadowDom_=C}t.Events.isEnabled()&&(z=new(t.Events.get(t.Events.BLOCK_MOVE))(d)),t.Connection.connectReciprocally_(this,e),d.setParent(a),z&&(z.recordNew(),t.Events.fire(z)),B&&((d=t.Connection.getConnectionForOrphanedConnection(d,e=this.type===n?B.outputConnection:B.previousConnection))?e.connect(d):e.onFailedConnect(this))},t.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var e=this.targetBlock();e&&e.unplug()}this.disposed=!0},t.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Connection.prototype.isSuperior=function(){return this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.NEXT_STATEMENT},t.Connection.prototype.isConnected=function(){return!!this.targetConnection},t.Connection.prototype.canConnectWithReason=function(e){return t.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,e,!1)},t.Connection.prototype.checkConnection=function(e){t.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),a=n.canConnectWithReason(this,e,!1);if(a!=t.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(a,this,e))},t.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},t.Connection.prototype.isConnectionAllowed=function(e){return t.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!0)},t.Connection.prototype.onFailedConnect=function(e){},t.Connection.prototype.connect=function(e){if(this.targetConnection!=e&&this.getConnectionChecker().canConnect(this,e,!1)){var n=t.Events.getGroup();n||t.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n||t.Events.setGroup(!1)}},t.Connection.connectReciprocally_=function(e,n){if(!e||!n)throw Error("Cannot connect null connections.");e.targetConnection=n,n.targetConnection=e},t.Connection.getSingleConnection_=function(e,n){for(var D,a=null,d=(n=n.outputConnection).getConnectionChecker(),C=0;D=e.inputList[C];C++)if((D=D.connection)&&d.canConnect(n,D,!1)){if(a)return null;a=D}return a},t.Connection.getConnectionForOrphanedOutput_=function(e,n){for(var a;a=t.Connection.getSingleConnection_(e,n);)if(!(e=a.targetBlock())||e.isShadow())return a;return null},t.Connection.getConnectionForOrphanedConnection=function(e,n){if(n.type===t.connectionTypes.OUTPUT_VALUE)return t.Connection.getConnectionForOrphanedOutput_(e,n.getSourceBlock());e=e.lastConnectionInStack(!0);var a=n.getConnectionChecker();return e&&a.canConnect(n,e,!1)?e:null},t.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,a=e.getSourceBlock();e=this}else n=e.getSourceBlock(),a=this.sourceBlock_;var d=t.Events.getGroup();d||t.Events.setGroup(!0),this.disconnectInternal_(n,a),a.isShadow()||e.respawnShadow_(),d||t.Events.setGroup(!1)},t.Connection.prototype.disconnectInternal_=function(e,n){var a;t.Events.isEnabled()&&(a=new(t.Events.get(t.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),a&&(a.recordNew(),t.Events.fire(a))},t.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),n=this.getShadowDom();if(e.workspace&&n)if((e=t.Xml.domToBlock(n,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},t.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},t.Connection.prototype.checkType=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!1)},t.Connection.prototype.checkType_=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(e)},t.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},t.Connection.prototype.setCheck=function(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this},t.Connection.prototype.getCheck=function(){return this.check_},t.Connection.prototype.setShadowDom=function(e){this.shadowDom_=e,(e=this.targetBlock())?e.isShadow()&&(e.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},t.Connection.prototype.getShadowDom=function(e){return e&&this.targetBlock().isShadow()?t.Xml.blockToDom(this.targetBlock()):this.shadowDom_},t.Connection.prototype.neighbours=function(e){return[]},t.Connection.prototype.getParentInput=function(){for(var e=null,n=this.sourceBlock_.inputList,a=0;a<n.length;a++)if(n[a].connection===this){e=n[a];break}return e},t.Connection.prototype.toString=function(){var e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection==this)var n="Output Connection of ";else if(e.previousConnection==this)n="Previous Connection of ";else if(e.nextConnection==this)n="Next Connection of ";else{n=null;for(var d,a=0;d=e.inputList[a];a++)if(d.connection==this){n=d;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+e.toDevString()},t.IConnectionChecker=function(){},t.ConnectionChecker=function(){},t.ConnectionChecker.prototype.canConnect=function(e,n,a,d){return this.canConnectWithReason(e,n,a,d)==t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.canConnectWithReason=function(e,n,a,d){var C=this.doSafetyChecks(e,n);return C!=t.Connection.CAN_CONNECT?C:this.doTypeChecks(e,n)?a&&!this.doDragChecks(e,n,d||0)?t.Connection.REASON_DRAG_CHECKS_FAILED:t.Connection.CAN_CONNECT:t.Connection.REASON_CHECKS_FAILED},t.ConnectionChecker.prototype.getErrorMessage=function(e,n,a){switch(e){case t.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case t.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case t.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case t.Connection.REASON_TARGET_NULL:return"Target connection is null.";case t.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+a.getCheck();case t.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case t.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},t.ConnectionChecker.prototype.doSafetyChecks=function(e,n){if(!e||!n)return t.Connection.REASON_TARGET_NULL;if(e.isSuperior())var a=e.getSourceBlock(),d=n.getSourceBlock();else d=e.getSourceBlock(),a=n.getSourceBlock();return a==d?t.Connection.REASON_SELF_CONNECTION:n.type!=t.OPPOSITE_TYPE[e.type]?t.Connection.REASON_WRONG_TYPE:a.workspace!==d.workspace?t.Connection.REASON_DIFFERENT_WORKSPACES:a.isShadow()&&!d.isShadow()?t.Connection.REASON_SHADOW_PARENT:t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.doTypeChecks=function(e,n){if(e=e.getCheck(),n=n.getCheck(),!e||!n)return!0;for(var a=0;a<e.length;a++)if(-1!=n.indexOf(e[a]))return!0;return!1},t.ConnectionChecker.prototype.doDragChecks=function(e,n,a){if(e.distanceFrom(n)>a||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case t.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case t.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case t.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case t.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==t.draggingConnections.indexOf(n)},t.ConnectionChecker.prototype.canConnectToPrevious_=function(e,n){return!(e.targetConnection||-1!=t.draggingConnections.indexOf(n)||n.targetConnection&&(!(e=n.targetBlock()).isInsertionMarker()||e.getPreviousBlock()))},t.registry.register(t.registry.Type.CONNECTION_CHECKER,t.registry.DEFAULT,t.ConnectionChecker),t.VariableMap=function(e){this.variableMap_=Object.create(null),this.workspace=e},t.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},t.VariableMap.prototype.renameVariable=function(e,n){var a=this.getVariable(n,e.type),d=this.workspace.getAllBlocks(!1);t.Events.setGroup(!0);try{a&&a.getId()!=e.getId()?this.renameVariableWithConflict_(e,n,a,d):this.renameVariableAndUses_(e,n,d)}finally{t.Events.setGroup(!1)}},t.VariableMap.prototype.renameVariableById=function(e,n){var a=this.getVariableById(e);if(!a)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(a,n)},t.VariableMap.prototype.renameVariableAndUses_=function(e,n,a){for(t.Events.fire(new(t.Events.get(t.Events.VAR_RENAME))(e,n)),e.name=n,n=0;n<a.length;n++)a[n].updateVarName(e)},t.VariableMap.prototype.renameVariableWithConflict_=function(e,n,a,d){var C=e.type;for(n!=a.name&&this.renameVariableAndUses_(a,n,d),n=0;n<d.length;n++)d[n].renameVarById(e.getId(),a.getId());t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e)),e=this.getVariablesOfType(C).indexOf(e),this.variableMap_[C].splice(e,1)},t.VariableMap.prototype.createVariable=function(e,n,a){var d=this.getVariable(e,n);if(d){if(a&&d.getId()!=a)throw Error('Variable "'+e+'" is already in use and its id is "'+d.getId()+'" which conflicts with the passed in id, "'+a+'".');return d}if(a&&this.getVariableById(a))throw Error('Variable id, "'+a+'", is already in use.');return d=a||t.utils.genUid(),d=new t.VariableModel(this.workspace,e,n=n||"",d),(e=this.variableMap_[n]||[]).push(d),delete this.variableMap_[n],this.variableMap_[n]=e,d},t.VariableMap.prototype.deleteVariable=function(e){for(var d,n=this.variableMap_[e.type],a=0;d=n[a];a++)if(d.getId()==e.getId()){n.splice(a,1),t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e));break}},t.VariableMap.prototype.deleteVariableById=function(e){var n=this.getVariableById(e);if(n){var C,a=n.name,d=this.getVariableUsesById(e);for(e=0;C=d[e];e++)if("procedures_defnoreturn"==C.type||"procedures_defreturn"==C.type)return e=C.getFieldValue("NAME"),a=t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",a).replace("%2",e),void t.alert(a);var D=this;1<d.length?(a=t.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",a),t.confirm(a,function(B){B&&n&&D.deleteVariableInternal(n,d)})):D.deleteVariableInternal(n,d)}else console.warn("Can't delete non-existent variable: "+e)},t.VariableMap.prototype.deleteVariableInternal=function(e,n){var a=t.Events.getGroup();a||t.Events.setGroup(!0);try{for(var d=0;d<n.length;d++)n[d].dispose(!0);this.deleteVariable(e)}finally{a||t.Events.setGroup(!1)}},t.VariableMap.prototype.getVariable=function(e,n){if(n=this.variableMap_[n||""])for(var d,a=0;d=n[a];a++)if(t.Names.equals(d.name,e))return d;return null},t.VariableMap.prototype.getVariableById=function(e){for(var n=Object.keys(this.variableMap_),a=0;a<n.length;a++)for(var D,d=n[a],C=0;D=this.variableMap_[d][C];C++)if(D.getId()==e)return D;return null},t.VariableMap.prototype.getVariablesOfType=function(e){return(e=this.variableMap_[e||""])?e.slice():[]},t.VariableMap.prototype.getVariableTypes=function(e){var n={};t.utils.object.mixin(n,this.variableMap_),e&&e.getPotentialVariableMap()&&t.utils.object.mixin(n,e.getPotentialVariableMap().variableMap_),e=Object.keys(n),n=!1;for(var a=0;a<e.length;a++)""==e[a]&&(n=!0);return n||e.push(""),e},t.VariableMap.prototype.getAllVariables=function(){var n,e=[];for(n in this.variableMap_)e=e.concat(this.variableMap_[n]);return e},t.VariableMap.prototype.getAllVariableNames=function(){var n,e=[];for(n in this.variableMap_)for(var C,a=this.variableMap_[n],d=0;C=a[d];d++)e.push(C.name);return e},t.VariableMap.prototype.getVariableUsesById=function(e){for(var n=[],a=this.workspace.getAllBlocks(!1),d=0;d<a.length;d++){var C=a[d].getVarModels();if(C)for(var D=0;D<C.length;D++)C[D].getId()==e&&n.push(a[d])}return n},t.Workspace=function(e){this.id=t.utils.genUid(),t.Workspace.WorkspaceDB_[this.id]=this,this.options=e||new t.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(t.registry.getClassFromOptions(t.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new t.VariableMap(this),this.potentialVariableMap_=null},t.Workspace.prototype.rendered=!1,t.Workspace.prototype.isClearing=!1,t.Workspace.prototype.MAX_UNDO=1024,t.Workspace.prototype.connectionDBList=null,t.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete t.Workspace.WorkspaceDB_[this.id]},t.Workspace.SCAN_ANGLE=3,t.Workspace.prototype.sortObjects_=function(e,n){return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+t.Workspace.prototype.sortObjects_.offset*e.x-(n.y+t.Workspace.prototype.sortObjects_.offset*n.x)},t.Workspace.prototype.addTopBlock=function(e){this.topBlocks_.push(e)},t.Workspace.prototype.removeTopBlock=function(e){if(!t.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},t.Workspace.prototype.getTopBlocks=function(e){var n=[].concat(this.topBlocks_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.addTypedBlock=function(e){this.typedBlocksDB_[e.type]||(this.typedBlocksDB_[e.type]=[]),this.typedBlocksDB_[e.type].push(e)},t.Workspace.prototype.removeTypedBlock=function(e){this.typedBlocksDB_[e.type].splice(this.typedBlocksDB_[e.type].indexOf(e),1),this.typedBlocksDB_[e.type].length||delete this.typedBlocksDB_[e.type]},t.Workspace.prototype.getBlocksByType=function(e,n){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),n&&1<e.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},t.Workspace.prototype.addTopComment=function(e){this.topComments_.push(e),this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},t.Workspace.prototype.removeTopComment=function(e){if(!t.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},t.Workspace.prototype.getTopComments=function(e){var n=[].concat(this.topComments_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.getAllBlocks=function(e){if(e){e=this.getTopBlocks(!0);for(var n=[],a=0;a<e.length;a++)n.push.apply(n,e[a].getDescendants(!0))}else for(n=this.getTopBlocks(!1),a=0;a<n.length;a++)n.push.apply(n,n[a].getChildren(!1));return n.filter(function(d){return!d.isInsertionMarker()})},t.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=t.Events.getGroup();for(e||t.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||t.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},t.Workspace.prototype.renameVariableById=function(e,n){this.variableMap_.renameVariableById(e,n)},t.Workspace.prototype.createVariable=function(e,n,a){return this.variableMap_.createVariable(e,n,a)},t.Workspace.prototype.getVariableUsesById=function(e){return this.variableMap_.getVariableUsesById(e)},t.Workspace.prototype.deleteVariableById=function(e){this.variableMap_.deleteVariableById(e)},t.Workspace.prototype.getVariable=function(e,n){return this.variableMap_.getVariable(e,n)},t.Workspace.prototype.getVariableById=function(e){return this.variableMap_.getVariableById(e)},t.Workspace.prototype.getVariablesOfType=function(e){return this.variableMap_.getVariablesOfType(e)},t.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},t.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},t.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},t.Workspace.prototype.getWidth=function(){return 0},t.Workspace.prototype.newBlock=function(e,n){return new t.Block(this,e,n)},t.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},t.Workspace.prototype.remainingCapacityOfType=function(e){return this.options.maxInstances?(void 0!==this.options.maxInstances[e]?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0},t.Workspace.prototype.isCapacityAvailable=function(e){if(!this.hasBlockLimits())return!0;var a,n=0;for(a in e){if(e[a]>this.remainingCapacityOfType(a))return!1;n+=e[a]}return!(n>this.remainingCapacity())},t.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},t.Workspace.prototype.getUndoStack=function(){return this.undoStack_},t.Workspace.prototype.getRedoStack=function(){return this.redoStack_},t.Workspace.prototype.undo=function(e){var n=e?this.redoStack_:this.undoStack_,a=e?this.undoStack_:this.redoStack_,d=n.pop();if(d){for(var C=[d];n.length&&d.group&&d.group==n[n.length-1].group;)C.push(n.pop());for(n=0;d=C[n];n++)a.push(d);C=t.Events.filter(C,e),t.Events.recordUndo=!1;try{for(n=0;d=C[n];n++)d.run(e)}finally{t.Events.recordUndo=!0}}},t.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,t.Events.clearPendingUndo()},t.Workspace.prototype.addChangeListener=function(e){return this.listeners_.push(e),e},t.Workspace.prototype.removeChangeListener=function(e){t.utils.arrayRemove(this.listeners_,e)},t.Workspace.prototype.fireChangeListener=function(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var a,n=0;a=this.listeners_[n];n++)a(e)},t.Workspace.prototype.getBlockById=function(e){return this.blockDB_[e]||null},t.Workspace.prototype.setBlockById=function(e,n){this.blockDB_[e]=n},t.Workspace.prototype.removeBlockById=function(e){delete this.blockDB_[e]},t.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},t.Workspace.prototype.allInputsFilled=function(e){for(var d,n=this.getTopBlocks(!1),a=0;d=n[a];a++)if(!d.allInputsFilled(e))return!1;return!0},t.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},t.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new t.VariableMap(this)},t.Workspace.prototype.getVariableMap=function(){return this.variableMap_},t.Workspace.prototype.setVariableMap=function(e){this.variableMap_=e},t.Workspace.WorkspaceDB_=Object.create(null),t.Workspace.getById=function(e){return t.Workspace.WorkspaceDB_[e]||null},t.Workspace.getAll=function(){var n,e=[];for(n in t.Workspace.WorkspaceDB_)e.push(t.Workspace.WorkspaceDB_[n]);return e},t.WorkspaceDragSurfaceSvg=function(e){this.container_=e,this.createDom()},t.WorkspaceDragSurfaceSvg.prototype.SVG_=null,t.WorkspaceDragSurfaceSvg.prototype.container_=null,t.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},t.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,n){e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return t.utils.getRelativeXY(this.SVG_)},t.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],a=this.SVG_.childNodes[1];if(!(n&&a&&t.utils.dom.hasClass(n,"blocklyBlockCanvas")&&t.utils.dom.hasClass(a,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?t.utils.dom.insertAfter(n,this.previousSibling_):e.insertBefore(n,e.firstChild),t.utils.dom.insertAfter(a,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");t.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},t.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(e,n,a,d,C,D){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=a,e.setAttribute("transform","translate(0, 0) scale("+D+")"),n.setAttribute("transform","translate(0, 0) scale("+D+")"),this.SVG_.setAttribute("width",d),this.SVG_.setAttribute("height",C),this.SVG_.appendChild(e),this.SVG_.appendChild(n),this.SVG_.style.display="block"},t.blockRendering={},t.blockRendering.useDebugger=!1,t.blockRendering.register=function(e,n){t.registry.register(t.registry.Type.RENDERER,e,n)},t.blockRendering.unregister=function(e){t.registry.unregister(t.registry.Type.RENDERER,e)},t.blockRendering.startDebugger=function(){t.blockRendering.useDebugger=!0},t.blockRendering.stopDebugger=function(){t.blockRendering.useDebugger=!1},t.blockRendering.init=function(e,n,a){return(e=new(t.registry.getClass(t.registry.Type.RENDERER,e))(e)).init(n,a),e},t.ASTNode=function(e,n,a){if(!n)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=t.ASTNode.isConnectionType_(e),this.location_=n,this.wsCoordinate_=null,this.processParams_(a||null)},t.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},t.ASTNode.NAVIGATE_ALL_FIELDS=!1,t.ASTNode.DEFAULT_OFFSET_Y=-20,t.ASTNode.isConnectionType_=function(e){switch(e){case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:case t.ASTNode.types.INPUT:case t.ASTNode.types.OUTPUT:return!0}return!1},t.ASTNode.createFieldNode=function(e){return e?new t.ASTNode(t.ASTNode.types.FIELD,e):null},t.ASTNode.createConnectionNode=function(e){if(!e)return null;var n=e.type;return n==t.connectionTypes.INPUT_VALUE||n==t.connectionTypes.NEXT_STATEMENT&&e.getParentInput()?t.ASTNode.createInputNode(e.getParentInput()):n==t.connectionTypes.NEXT_STATEMENT?new t.ASTNode(t.ASTNode.types.NEXT,e):n==t.connectionTypes.OUTPUT_VALUE?new t.ASTNode(t.ASTNode.types.OUTPUT,e):n==t.connectionTypes.PREVIOUS_STATEMENT?new t.ASTNode(t.ASTNode.types.PREVIOUS,e):null},t.ASTNode.createInputNode=function(e){return e&&e.connection?new t.ASTNode(t.ASTNode.types.INPUT,e.connection):null},t.ASTNode.createBlockNode=function(e){return e?new t.ASTNode(t.ASTNode.types.BLOCK,e):null},t.ASTNode.createStackNode=function(e){return e?new t.ASTNode(t.ASTNode.types.STACK,e):null},t.ASTNode.createWorkspaceNode=function(e,n){return n&&e?new t.ASTNode(t.ASTNode.types.WORKSPACE,e,{wsCoordinate:n}):null},t.ASTNode.createTopNode=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.processParams_=function(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)},t.ASTNode.prototype.getLocation=function(){return this.location_},t.ASTNode.prototype.getType=function(){return this.type_},t.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},t.ASTNode.prototype.isConnection=function(){return this.isConnection_},t.ASTNode.prototype.findNextForInput_=function(){var a,e=this.location_.getParentInput(),n=e.getSourceBlock();for(e=n.inputList.indexOf(e)+1;a=n.inputList[e];e++){for(var D,d=a.fieldRow,C=0;D=d[C];C++)if(D.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(D);if(a.connection)return t.ASTNode.createInputNode(a)}return null},t.ASTNode.prototype.findNextForField_=function(){var e=this.location_,n=e.getParentInput(),a=e.getSourceBlock(),d=a.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;n=a.inputList[d];d++){for(var C=n.fieldRow;e<C.length;){if(C[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(C[e]);e++}if(e=0,n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.findPrevForInput_=function(){for(var d,e=this.location_.getParentInput(),n=e.getSourceBlock(),a=n.inputList.indexOf(e);d=n.inputList[a];a--){if(d.connection&&d!==e)return t.ASTNode.createInputNode(d);for(var D,C=(d=d.fieldRow).length-1;D=d[C];C--)if(D.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(D)}return null},t.ASTNode.prototype.findPrevForField_=function(){var C,e=this.location_,n=e.getParentInput(),a=e.getSourceBlock(),d=a.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)-1;C=a.inputList[d];d--){if(C.connection&&C!==n)return t.ASTNode.createInputNode(C);for(C=C.fieldRow;-1<e;){if(C[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(C[e]);e--}0<=d-1&&(e=a.inputList[d-1].fieldRow.length-1)}return null},t.ASTNode.prototype.navigateBetweenStacks_=function(e){var n=this.getLocation();if(n instanceof t.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var a=n.getRootBlock();n=a.workspace.getTopBlocks(!0);for(var C,d=0;C=n[d];d++)if(a.id==C.id)return-1==(e=d+(e?1:-1))||e==n.length?null:t.ASTNode.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},t.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var n=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?t.ASTNode.createInputNode(n.targetConnection.getParentInput()):t.ASTNode.createStackNode(e)},t.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var a,n=0;a=e[n];n++){for(var D,d=a.fieldRow,C=0;D=d[C];C++)if(D.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(D);if(a.connection)return t.ASTNode.createInputNode(a)}return null},t.ASTNode.prototype.getSourceBlock=function(){return this.getType()===t.ASTNode.types.BLOCK||this.getType()===t.ASTNode.types.STACK?this.getLocation():this.getType()===t.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},t.ASTNode.prototype.next=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case t.ASTNode.types.OUTPUT:var e=this.location_;return t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return this.findNextForField_();case t.ASTNode.types.INPUT:return this.findNextForInput_();case t.ASTNode.types.BLOCK:return t.ASTNode.createConnectionNode(this.location_.nextConnection);case t.ASTNode.types.PREVIOUS:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock());case t.ASTNode.types.NEXT:return t.ASTNode.createConnectionNode((e=this.location_).targetConnection)}return null},t.ASTNode.prototype.in=function(){switch(this.type_){case t.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return t.ASTNode.createStackNode(e[0]);break;case t.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(e=this.location_);case t.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(e=this.location_);case t.ASTNode.types.INPUT:return t.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},t.ASTNode.prototype.prev=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case t.ASTNode.types.FIELD:return this.findPrevForField_();case t.ASTNode.types.INPUT:return this.findPrevForInput_();case t.ASTNode.types.BLOCK:var e=this.location_;return t.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case t.ASTNode.types.PREVIOUS:if((e=(e=this.location_).targetConnection)&&!e.getParentInput())return t.ASTNode.createConnectionNode(e);break;case t.ASTNode.types.NEXT:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock())}return null},t.ASTNode.prototype.out=function(){switch(this.type_){case t.ASTNode.types.STACK:var e=this.location_,n=e.getRelativeToSurfaceXY();return n=new t.utils.Coordinate(n.x,n.y+t.ASTNode.DEFAULT_OFFSET_Y),t.ASTNode.createWorkspaceNode(e.workspace,n);case t.ASTNode.types.OUTPUT:return(n=(e=this.location_).targetConnection)?t.ASTNode.createConnectionNode(n):t.ASTNode.createStackNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return t.ASTNode.createBlockNode(this.location_.getSourceBlock());case t.ASTNode.types.INPUT:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock());case t.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(e=this.location_);case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((e=this.location_).getSourceBlock())}return null},t.Blocks=Object.create(null),t.Extensions={},t.Extensions.ALL_=Object.create(null),t.Extensions.register=function(e,n){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(t.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+e+'" must be a function');t.Extensions.ALL_[e]=n},t.Extensions.registerMixin=function(e,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+e+'" must be a object');t.Extensions.register(e,function(){this.mixin(n)})},t.Extensions.registerMutator=function(e,n,a,d){var C='Error when registering mutator "'+e+'": ';t.Extensions.checkHasFunction_(C,n.domToMutation,"domToMutation"),t.Extensions.checkHasFunction_(C,n.mutationToDom,"mutationToDom");var D=t.Extensions.checkMutatorDialog_(n,C);if(a&&"function"!=typeof a)throw Error('Extension "'+e+'" is not a function');t.Extensions.register(e,function(){if(D){if(!t.Mutator)throw Error(C+"Missing require for Blockly.Mutator");this.setMutator(new t.Mutator(d||[]))}this.mixin(n),a&&a.apply(this)})},t.Extensions.unregister=function(e){t.Extensions.ALL_[e]?delete t.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},t.Extensions.apply=function(e,n,a){var d=t.Extensions.ALL_[e];if("function"!=typeof d)throw Error('Error: Extension "'+e+'" not found.');if(a)t.Extensions.checkNoMutatorProperties_(e,n);else var C=t.Extensions.getMutatorProperties_(n);if(d.apply(n),a)t.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',n);else if(!t.Extensions.mutatorPropertiesMatch_(C,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},t.Extensions.checkHasFunction_=function(e,n,a){if(!n)throw Error(e+'missing required property "'+a+'"');if("function"!=typeof n)throw Error(e+'" required property "'+a+'" must be a function')},t.Extensions.checkNoMutatorProperties_=function(e,n){if(t.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},t.Extensions.checkMutatorDialog_=function(e,n){var a=void 0!==e.compose,d=void 0!==e.decompose;if(a&&d){if("function"!=typeof e.compose)throw Error(n+"compose must be a function.");if("function"!=typeof e.decompose)throw Error(n+"decompose must be a function.");return!0}if(!a&&!d)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},t.Extensions.checkBlockHasMutatorProperties_=function(e,n){if("function"!=typeof n.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');t.Extensions.checkMutatorDialog_(n,e)},t.Extensions.getMutatorProperties_=function(e){var n=[];return void 0!==e.domToMutation&&n.push(e.domToMutation),void 0!==e.mutationToDom&&n.push(e.mutationToDom),void 0!==e.compose&&n.push(e.compose),void 0!==e.decompose&&n.push(e.decompose),n},t.Extensions.mutatorPropertiesMatch_=function(e,n){if((n=t.Extensions.getMutatorProperties_(n)).length!=e.length)return!1;for(var a=0;a<n.length;a++)if(e[a]!=n[a])return!1;return!0},t.Extensions.buildTooltipForDropdown=function(e,n){var a=[];return"object"==typeof document&&t.utils.runAfterPageLoad(function(){for(var d in n)t.utils.checkMessageReferences(n[d])}),function(){this.type&&-1==a.indexOf(this.type)&&(t.Extensions.checkDropdownOptionsInTable_(this,e,n),a.push(this.type)),this.setTooltip(function(){var d=String(this.getFieldValue(e)),C=n[d];return null==C?-1==a.indexOf(this.type)&&(d="No tooltip mapping for value "+d+" of field "+e,null!=this.type&&(d+=" of block type "+this.type),console.warn(d+".")):C=t.utils.replaceMessageReferences(C),C}.bind(this))}},t.Extensions.checkDropdownOptionsInTable_=function(e,n,a){var d=e.getField(n);if(!d.isOptionListDynamic()){d=d.getOptions();for(var C=0;C<d.length;++C){var D=d[C][1];null==a[D]&&console.warn("No tooltip mapping for value "+D+" of field "+n+" of block type "+e.type)}}},t.Extensions.buildTooltipWithFieldText=function(e,n){return"object"==typeof document&&t.utils.runAfterPageLoad(function(){t.utils.checkMessageReferences(e)}),function(){this.setTooltip(function(){var a=this.getField(n);return t.utils.replaceMessageReferences(e).replace("%1",a?a.getText():"")}.bind(this))}},t.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||this.tooltipWhenNotConnected_}.bind(this))},t.Extensions.register("parent_tooltip_when_inline",t.Extensions.extensionParentTooltip_),t.fieldRegistry={},t.fieldRegistry.register=function(e,n){t.registry.register(t.registry.Type.FIELD,e,n)},t.fieldRegistry.unregister=function(e){t.registry.unregister(t.registry.Type.FIELD,e)},t.fieldRegistry.fromJson=function(e){var n=t.registry.getObject(t.registry.Type.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},t.IDeletable=function(){},t.blockAnimations={},t.blockAnimations.disconnectPid_=0,t.blockAnimations.disconnectGroup_=null,t.blockAnimations.disposeUiEffect=function(e){var n=e.workspace,a=e.getSvgRoot();n.getAudioManager().play("delete"),e=n.getSvgXY(a),(a=a.cloneNode(!0)).translateX_=e.x,a.translateY_=e.y,a.setAttribute("transform","translate("+e.x+","+e.y+")"),n.getParentSvg().appendChild(a),a.bBox_=a.getBBox(),t.blockAnimations.disposeUiStep_(a,n.RTL,new Date,n.scale)},t.blockAnimations.disposeUiStep_=function(e,n,a,d){var C=(new Date-a)/150;1<C?t.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(n?-1:1)*e.bBox_.width*d/2*C)+","+(e.translateY_+e.bBox_.height*d*C)+") scale("+(1-C)*d+")"),setTimeout(t.blockAnimations.disposeUiStep_,10,e,n,a,d))},t.blockAnimations.connectionUiEffect=function(e){var n=e.workspace,a=n.scale;if(n.getAudioManager().play("click"),!(1>a)){var d=n.getSvgXY(e.getSvgRoot());e.outputConnection?(d.x+=(e.RTL?3:-3)*a,d.y+=13*a):e.previousConnection&&(d.x+=(e.RTL?-23:23)*a,d.y+=3*a),e=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:d.x,cy:d.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),t.blockAnimations.connectionUiStep_(e,new Date,a)}},t.blockAnimations.connectionUiStep_=function(e,n,a){var d=(new Date-n)/150;1<d?t.utils.dom.removeNode(e):(e.setAttribute("r",25*d*a),e.style.opacity=1-d,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.connectionUiStep_,10,e,n,a))},t.blockAnimations.disconnectUiEffect=function(e){if(e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),t.blockAnimations.disconnectUiStep_(e.getSvgRoot(),n,new Date)}},t.blockAnimations.disconnectUiStep_=function(e,n,a){var d=(new Date-a)/200;1<d?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*n)+")",t.blockAnimations.disconnectGroup_=e,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.disconnectUiStep_,10,e,n,a)),e.setAttribute("transform",e.translate_+e.skew_)},t.blockAnimations.disconnectUiStop=function(){if(t.blockAnimations.disconnectGroup_){clearTimeout(t.blockAnimations.disconnectPid_);var e=t.blockAnimations.disconnectGroup_;e.skew_="",e.setAttribute("transform",e.translate_),t.blockAnimations.disconnectGroup_=null}},t.Events.BlockDrag=function(e,n,a){t.Events.BlockDrag.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isStart=n,this.blocks=a},t.utils.object.inherits(t.Events.BlockDrag,t.Events.UiBase),t.Events.BlockDrag.prototype.type=t.Events.BLOCK_DRAG,t.Events.BlockDrag.prototype.toJson=function(){var e=t.Events.BlockDrag.superClass_.toJson.call(this);return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e},t.Events.BlockDrag.prototype.fromJson=function(e){t.Events.BlockDrag.superClass_.fromJson.call(this,e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks},t.registry.register(t.registry.Type.EVENT,t.Events.BLOCK_DRAG,t.Events.BlockDrag),t.IBlockDragger=function(){},t.InsertionMarkerManager=function(e){this.topBlock_=t.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",t.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,t.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{t.Events.enable()}},t.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},t.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},t.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(t.Events.disable(),this.hidePreview_(),t.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;t.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},t.InsertionMarkerManager.prototype.update=function(e,n){var a=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(a,n))||this.shouldUpdatePreviews_(a,e))&&(t.Events.disable(),this.maybeHidePreview_(a),this.maybeShowPreview_(a),t.Events.enable())},t.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var n=e.type;t.Events.disable();try{var a=this.workspace_.newBlock(n);if(a.setInsertionMarker(!0),e.mutationToDom){var d=e.mutationToDom();d&&a.domToMutation(d)}for(n=0;n<e.inputList.length;n++){var C=e.inputList[n];if(C.name!=t.constants.COLLAPSED_INPUT_NAME){var D=a.inputList[n];if(!D)throw Error(t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(d=0;d<C.fieldRow.length;d++){var B=C.fieldRow[d],z=D.fieldRow[d];if(!z)throw Error(t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));z.setValue(B.getValue())}}}a.setCollapsed(e.isCollapsed()),a.setInputsInline(e.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden")}finally{t.Events.enable()}return a},t.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(e.push(n),this.lastOnStack_=n,this.lastMarker_){t.Events.disable();try{this.lastMarker_.dispose()}finally{t.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return e},t.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,n){var a=e.local,d=e.closest;return e=e.radius,a&&d?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==d&&this.localConnection_==a||(a=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(a*a+n*n),d&&e>n-t.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},t.InsertionMarkerManager.prototype.getCandidate_=function(e){for(var n=this.getStartRadius_(),a=null,d=null,C=0;C<this.availableConnections_.length;C++){var D=this.availableConnections_[C],B=D.closest(n,e);B.connection&&(a=B.connection,d=D,n=B.radius)}return{closest:a,local:d,radius:n}},t.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?t.CONNECTING_SNAP_RADIUS:t.SNAP_RADIUS},t.InsertionMarkerManager.prototype.shouldDelete_=function(e,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,t.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,e&&!!e.closest)},t.InsertionMarkerManager.prototype.maybeShowPreview_=function(e){if(!this.wouldDeleteBlock_){var n=e.closest;e=e.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=e,this.showPreview_()))}},t.InsertionMarkerManager.prototype.showPreview_=function(){var e=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&n.shouldHighlightConnection(e)&&e.highlight()},t.InsertionMarkerManager.prototype.maybeHidePreview_=function(e){if(e.closest){var n=this.closestConnection_!=e.closest;e=this.localConnection_!=e.local,this.closestConnection_&&this.localConnection_&&(n||e||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},t.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},t.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var e=this.localConnection_,n=this.closestConnection_,a=this.lastOnStack_&&e==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((e=a.getMatchingConnection(e.getSourceBlock(),e))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");a.render(),a.rendered=!0,a.getSvgRoot().setAttribute("visibility","visible"),e&&n&&a.positionNearConnection(e,n),n&&e.connect(n),this.markerConnection_=e},t.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,n=e.getSourceBlock(),a=n.nextConnection,d=n.previousConnection,C=n.outputConnection;if(C=e.type==t.connectionTypes.INPUT_VALUE&&!(C&&C.targetConnection),!(e!=a||d&&d.targetConnection)||C?e.targetBlock().unplug(!1):e.type==t.connectionTypes.NEXT_STATEMENT&&e!=a?((a=e.targetConnection).getSourceBlock().unplug(!1),d=d?d.targetConnection:null,n.unplug(!0),d&&d.connect(a)):n.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(e=n.getSvgRoot())&&e.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},t.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var e=this.closestConnection_;this.highlightedBlock_=e.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(e,!0)},t.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},t.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},t.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},t.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var e=[];return this.firstMarker_&&e.push(this.firstMarker_),this.lastMarker_&&e.push(this.lastMarker_),e},t.BlockDragger=function(e,n){this.draggingBlock_=e,this.workspace_=n,this.draggedConnectionManager_=new t.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=t.BlockDragger.initIconData_(e)},t.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},t.BlockDragger.initIconData_=function(e){var n=[];e=e.getDescendants(!1);for(var d,a=0;d=e[a];a++){d=d.getIcons();for(var C=0;C<d.length;C++){var D={location:d[C].getIconLocation(),icon:d[C]};n.push(D)}}return n},t.BlockDragger.prototype.startDrag=function(e,n){t.Events.getGroup()||t.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),t.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,e),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},t.BlockDragger.prototype.shouldDisconnect_=function(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},t.BlockDragger.prototype.disconnectBlock_=function(e,n){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),t.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},t.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.drag=function(e,n){n=this.pixelsToWorkspaceUnits_(n);var a=t.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(a),this.dragIcons_(n),a=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),this.draggedConnectionManager_.update(n,this.dragTarget_),e=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),e!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},t.BlockDragger.prototype.endDrag=function(e,n){if(this.drag(e,n),this.dragIconData_=[],this.fireDragEndEvent_(),t.utils.dom.stopTextWidthCache(),t.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))e=this.startXY_;else{var a=(e=this.getNewLocationAfterDrag_(n)).delta;e=e.newLocation}this.draggingBlock_.moveOffDragSurface(e),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),a?this.updateBlockAfterMove_(a):t.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),t.Events.setGroup(!1)},t.BlockDragger.prototype.getNewLocationAfterDrag_=function(e){var n={};return n.delta=this.pixelsToWorkspaceUnits_(e),n.newLocation=t.utils.Coordinate.sum(this.startXY_,n.delta),n},t.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),t.draggingConnections=[],!0)},t.BlockDragger.prototype.updateBlockAfterMove_=function(e){this.draggingBlock_.moveConnections(e.x,e.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},t.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.updateToolboxStyle_=function(e){var n=this.workspace_.getToolbox();if(n){var a=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&"function"==typeof n.removeStyle?n.removeStyle(a):e||"function"!=typeof n.addStyle||n.addStyle(a)}},t.BlockDragger.prototype.fireMoveEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_MOVE))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),t.Events.fire(e)},t.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},t.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BlockDragger.prototype.dragIcons_=function(e){for(var n=0;n<this.dragIconData_.length;n++){var a=this.dragIconData_[n];a.icon.setIconLocation(t.utils.Coordinate.sum(a.location,e))}},t.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},t.registry.register(t.registry.Type.BLOCK_DRAGGER,t.registry.DEFAULT,t.BlockDragger),t.IContextMenu=function(){},t.IDraggable=function(){},t.IBubble=function(){},t.Bubble=function(e,n,a,d,C,D){this.workspace_=e,this.content_=n,this.shape_=a,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,a=t.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(a=-a),this.arrow_radians_=t.utils.math.toRadians(a),e.getBubbleCanvas().appendChild(this.createDom_(n,!(!C||!D))),this.setAnchorLocation(d),C&&D||(C=(e=this.content_.getBBox()).width+2*t.Bubble.BORDER_WIDTH,D=e.height+2*t.Bubble.BORDER_WIDTH),this.setBubbleSize(C,D),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},t.Bubble.BORDER_WIDTH=6,t.Bubble.ARROW_THICKNESS=5,t.Bubble.ARROW_ANGLE=20,t.Bubble.ARROW_BEND=4,t.Bubble.ANCHOR_RADIUS=8,t.Bubble.onMouseUpWrapper_=null,t.Bubble.onMouseMoveWrapper_=null,t.Bubble.unbindDragEvents_=function(){t.Bubble.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseUpWrapper_),t.Bubble.onMouseUpWrapper_=null),t.Bubble.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseMoveWrapper_),t.Bubble.onMouseMoveWrapper_=null)},t.Bubble.bubbleMouseUp_=function(e){t.Touch.clearTouchIdentifier(),t.Bubble.unbindDragEvents_()},t.Bubble.prototype.rendered_=!1,t.Bubble.prototype.anchorXY_=null,t.Bubble.prototype.relativeLeft_=0,t.Bubble.prototype.relativeTop_=0,t.Bubble.prototype.width_=0,t.Bubble.prototype.height_=0,t.Bubble.prototype.autoLayout_=!0,t.Bubble.prototype.createDom_=function(e,n){this.bubbleGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var a={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return t.utils.userAgent.JAVA_FX&&(a={}),a=t.utils.dom.createSvgElement(t.utils.Svg.G,a,this.bubbleGroup_),this.bubbleArrow_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{},a),this.bubbleBack_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH},a),n?(this.resizeGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),t.utils.dom.createSvgElement(t.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*t.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=t.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=t.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(e),this.bubbleGroup_},t.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},t.Bubble.prototype.setSvgId=function(e){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=e)},t.Bubble.prototype.bubbleMouseDown_=function(e){var n=this.workspace_.getGesture(e);n&&n.handleBubbleStart(e,this)},t.Bubble.prototype.showContextMenu=function(e){},t.Bubble.prototype.isDeletable=function(){return!1},t.Bubble.prototype.setDeleteStyle=function(e){},t.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),t.Bubble.unbindDragEvents_(),t.utils.isRightButton(e)||(this.workspace_.startDrag(e,new t.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),t.Bubble.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,t.Bubble.bubbleMouseUp_),t.Bubble.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),t.hideChaff()),e.stopPropagation()},t.Bubble.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble_()},t.Bubble.prototype.registerResizeEvent=function(e){this.resizeCallback_=e},t.Bubble.prototype.registerMoveEvent=function(e){this.moveCallback_=e},t.Bubble.prototype.promote=function(){var e=this.bubbleGroup_.parentNode;return e.lastChild!==this.bubbleGroup_&&(e.appendChild(this.bubbleGroup_),!0)},t.Bubble.prototype.setAnchorLocation=function(e){this.anchorXY_=e,this.rendered_&&this.positionBubble_()},t.Bubble.prototype.layoutBubble_=function(){var e=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(e),a=this.getOptimalRelativeTop_(e),d=this.shape_.getBBox(),C={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},D={x:-this.width_-30,y:a};a={x:d.width,y:a};var B={x:n,y:d.height};n=d.width<d.height?a:B,d=d.width<d.height?B:a,a=this.getOverlap_(C,e),B=this.getOverlap_(D,e);var z=this.getOverlap_(n,e);e=this.getOverlap_(d,e),a==(e=Math.max(a,B,z,e))?(this.relativeLeft_=C.x,this.relativeTop_=C.y):B==e?(this.relativeLeft_=D.x,this.relativeTop_=D.y):z==e?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=d.x,this.relativeTop_=d.y)},t.Bubble.prototype.getOverlap_=function(e,n){var a=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x+this.anchorXY_.x;return e=e.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(a+this.width_,n.left+n.width)-Math.max(a,n.left))*(Math.min(e+this.height_,n.top+n.height)-Math.max(e,n.top))/(this.width_*this.height_)))},t.Bubble.prototype.getOptimalRelativeLeft_=function(e){var n=-this.width_/4;if(this.width_>e.width)return n;if(this.workspace_.RTL)var a=this.anchorXY_.x-n,d=a-this.width_,C=e.left+e.width,D=e.left+t.Scrollbar.scrollbarThickness/this.workspace_.scale;else a=(d=n+this.anchorXY_.x)+this.width_,D=e.left,C=e.left+e.width-t.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?d<D?n=-(D-this.anchorXY_.x+this.width_):a>C&&(n=-(C-this.anchorXY_.x)):d<D?n=D-this.anchorXY_.x:a>C&&(n=C-this.anchorXY_.x-this.width_),n},t.Bubble.prototype.getOptimalRelativeTop_=function(e){var n=-this.height_/4;if(this.height_>e.height)return n;var a=this.anchorXY_.y+n,C=e.top;e=e.top+e.height-t.Scrollbar.scrollbarThickness/this.workspace_.scale;var D=this.anchorXY_.y;return a<C?n=C-D:a+this.height_>e&&(n=e-D-this.height_),n},t.Bubble.prototype.positionBubble_=function(){var e=this.anchorXY_.x;this.moveTo(e=this.workspace_.RTL?e-(this.relativeLeft_+this.width_):e+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},t.Bubble.prototype.moveTo=function(e,n){this.bubbleGroup_.setAttribute("transform","translate("+e+","+n+")")},t.Bubble.prototype.setDragging=function(e){!e&&this.moveCallback_&&this.moveCallback_()},t.Bubble.prototype.getBubbleSize=function(){return new t.utils.Size(this.width_,this.height_)},t.Bubble.prototype.setBubbleSize=function(e,n){var a=2*t.Bubble.BORDER_WIDTH;e=Math.max(e,a+45),n=Math.max(n,a+20),this.width_=e,this.height_=n,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*t.Bubble.BORDER_WIDTH+","+(n-a)+") scale(-1 1)":"translate("+(e-a)+","+(n-a)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},t.Bubble.prototype.renderArrow_=function(){var e=[],n=this.width_/2,a=this.height_/2,d=-this.relativeLeft_,C=-this.relativeTop_;if(n==d&&a==C)e.push("M "+n+","+a);else{C-=a,d-=n,this.workspace_.RTL&&(d*=-1);var D=Math.sqrt(C*C+d*d),B=Math.acos(d/D);0>C&&(B=2*Math.PI-B);var z=B+Math.PI/2;z>2*Math.PI&&(z-=2*Math.PI);var oe=Math.sin(z),be=Math.cos(z),se=this.getBubbleSize();z=(se.width+se.height)/t.Bubble.ARROW_THICKNESS,z=Math.min(z,se.width,se.height)/4,d=n+(se=1-t.Bubble.ANCHOR_RADIUS/D)*d,C=a+se*C,se=n+z*be;var Ie=a+z*oe;n-=z*be,a-=z*oe,(oe=B+this.arrow_radians_)>2*Math.PI&&(oe-=2*Math.PI),B=Math.sin(oe)*D/t.Bubble.ARROW_BEND,D=Math.cos(oe)*D/t.Bubble.ARROW_BEND,e.push("M"+se+","+Ie),e.push("C"+(se+D)+","+(Ie+B)+" "+d+","+C+" "+d+","+C),e.push("C"+d+","+C+" "+(n+D)+","+(a+B)+" "+n+","+a)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},t.Bubble.prototype.setColour=function(e){this.bubbleBack_.setAttribute("fill",e),this.bubbleArrow_.setAttribute("fill",e)},t.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&t.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&t.browserEvents.unbind(this.onMouseDownResizeWrapper_),t.Bubble.unbindDragEvents_(),t.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},t.Bubble.prototype.moveDuringDrag=function(e,n){e?e.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},t.Bubble.prototype.getRelativeToSurfaceXY=function(){return new t.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},t.Bubble.prototype.setAutoLayout=function(e){this.autoLayout_=e},t.Bubble.textToDom=function(e){var n=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:t.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var a=0;a<e.length;a++){var d=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{dy:"1em",x:t.Bubble.BORDER_WIDTH},n),C=document.createTextNode(e[a]);d.appendChild(C)}return n},t.Bubble.createNonEditableBubble=function(e,n,a){if((a=new t.Bubble(n.workspace,e,n.pathObject.svgPath,a,null,null)).setSvgId(n.id),n.RTL){n=e.getBBox().width;for(var C,d=0;C=e.childNodes[d];d++)C.setAttribute("text-anchor","end"),C.setAttribute("x",n+t.Bubble.BORDER_WIDTH)}return a},t.Events.CommentBase=function(e){this.commentId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.utils.object.inherits(t.Events.CommentBase,t.Events.Abstract),t.Events.CommentBase.prototype.toJson=function(){var e=t.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),e},t.Events.CommentBase.prototype.fromJson=function(e){t.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId},t.Events.CommentChange=function(e,n,a){t.Events.CommentChange.superClass_.constructor.call(this,e),e&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===a?"":a)},t.utils.object.inherits(t.Events.CommentChange,t.Events.CommentBase),t.Events.CommentChange.prototype.type=t.Events.COMMENT_CHANGE,t.Events.CommentChange.prototype.toJson=function(){var e=t.Events.CommentChange.superClass_.toJson.call(this);return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e},t.Events.CommentChange.prototype.fromJson=function(e){t.Events.CommentChange.superClass_.fromJson.call(this,e),this.oldContents_=e.oldContents,this.newContents_=e.newContents},t.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},t.Events.CommentChange.prototype.run=function(e){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(e?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},t.Events.CommentCreate=function(e){t.Events.CommentCreate.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentCreate,t.Events.CommentBase),t.Events.CommentCreate.prototype.type=t.Events.COMMENT_CREATE,t.Events.CommentCreate.prototype.toJson=function(){var e=t.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e},t.Events.CommentCreate.prototype.fromJson=function(e){t.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml)},t.Events.CommentCreate.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,e)},t.Events.CommentCreateDeleteHelper=function(e,n){var a=e.getEventWorkspace_();n?((n=t.utils.xml.createElement("xml")).appendChild(e.xml),t.Xml.domToWorkspace(n,a)):(a=a.getCommentById(e.commentId))?a.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)},t.Events.CommentDelete=function(e){t.Events.CommentDelete.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentDelete,t.Events.CommentBase),t.Events.CommentDelete.prototype.type=t.Events.COMMENT_DELETE,t.Events.CommentDelete.prototype.toJson=function(){return t.Events.CommentDelete.superClass_.toJson.call(this)},t.Events.CommentDelete.prototype.fromJson=function(e){t.Events.CommentDelete.superClass_.fromJson.call(this,e)},t.Events.CommentDelete.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,!e)},t.Events.CommentMove=function(e){t.Events.CommentMove.superClass_.constructor.call(this,e),e&&(this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},t.utils.object.inherits(t.Events.CommentMove,t.Events.CommentBase),t.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},t.Events.CommentMove.prototype.type=t.Events.COMMENT_MOVE,t.Events.CommentMove.prototype.setOldCoordinate=function(e){this.oldCoordinate_=e},t.Events.CommentMove.prototype.toJson=function(){var e=t.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(e.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},t.Events.CommentMove.prototype.fromJson=function(e){if(t.Events.CommentMove.superClass_.fromJson.call(this,e),e.oldCoordinate){var n=e.oldCoordinate.split(",");this.oldCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}e.newCoordinate&&(n=e.newCoordinate.split(","),this.newCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1])))},t.Events.CommentMove.prototype.isNull=function(){return t.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},t.Events.CommentMove.prototype.run=function(e){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){e=e?this.newCoordinate_:this.oldCoordinate_;var a=n.getXY();n.moveBy(e.x-a.x,e.y-a.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CREATE,t.Events.CommentCreate),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CHANGE,t.Events.CommentChange),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_MOVE,t.Events.CommentMove),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_DELETE,t.Events.CommentDelete),t.BubbleDragger=function(e,n){this.draggingBubble_=e,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=t.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},t.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},t.BubbleDragger.prototype.startBubbleDrag=function(){t.Events.getGroup()||t.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},t.BubbleDragger.prototype.dragBubble=function(e,n){n=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},t.BubbleDragger.prototype.shouldDelete_=function(e){return!(!e||!this.workspace_.getComponentManager().hasCapability(e.id,t.ComponentManager.Capability.DELETE_AREA))&&e.wouldDelete(this.draggingBubble_,!1)},t.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},t.BubbleDragger.prototype.endBubbleDrag=function(e,n){this.dragBubble(e,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e)),this.draggingBubble_.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),t.Events.setGroup(!1)},t.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new(t.Events.get(t.Events.COMMENT_MOVE))(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),t.Events.fire(e)}},t.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},t.Events.Click=function(e,n,a){t.Events.Click.superClass_.constructor.call(this,e?e.workspace.id:n),this.blockId=e?e.id:null,this.targetType=a},t.utils.object.inherits(t.Events.Click,t.Events.UiBase),t.Events.Click.prototype.type=t.Events.CLICK,t.Events.Click.prototype.toJson=function(){var e=t.Events.Click.superClass_.toJson.call(this);return e.targetType=this.targetType,this.blockId&&(e.blockId=this.blockId),e},t.Events.Click.prototype.fromJson=function(e){t.Events.Click.superClass_.fromJson.call(this,e),this.targetType=e.targetType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.CLICK,t.Events.Click),t.WorkspaceDragger=function(e){this.workspace_=e,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new t.utils.Coordinate(e.scrollX,e.scrollY)},t.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},t.WorkspaceDragger.prototype.startDrag=function(){t.selected&&t.selected.unselect(),this.workspace_.setupDragSurface()},t.WorkspaceDragger.prototype.endDrag=function(e){this.drag(e),this.workspace_.resetDragSurface()},t.WorkspaceDragger.prototype.drag=function(e){if(e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(e.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,e.y)}},t.Gesture=function(e,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new t.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!t.DRAG_STACK},t.Gesture.prototype.dispose=function(){t.Touch.clearTouchIdentifier(),t.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&t.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&t.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},t.Gesture.prototype.updateFromEvent_=function(e){var n=new t.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),t.longStop_()),this.mostRecentEvent_=e},t.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=t.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=t.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.FLYOUT_DRAG_RADIUS:t.DRAG_RADIUS))},t.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.Events.getGroup()||t.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},t.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},t.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},t.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new t.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},t.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},t.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(t.registry.getClassFromOptions(t.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new t.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.doStart=function(e){t.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,t.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),t.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,t.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),t.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||t.longStart(e,this),this.mouseDownXY_=new t.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},t.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleMove=function(e){this.updateFromEvent_(e),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),t.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},t.Gesture.prototype.cancel=function(){this.isEnding_||(t.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},t.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),t.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(t.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},t.Gesture.prototype.handleWsStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=e,this.doStart(e)},t.Gesture.prototype.fireWorkspaceClick_=function(e){t.Events.fire(new(t.Events.get(t.Events.CLICK))(null,e.id,"workspace"))},t.Gesture.prototype.handleFlyoutStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(e,n.getWorkspace())},t.Gesture.prototype.handleBlockStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=e},t.Gesture.prototype.handleBubbleStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=e},t.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},t.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},t.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(t.Events.getGroup()||t.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var e=new(t.Events.get(t.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");t.Events.fire(e)}this.bringBlockToFront_(),t.Events.setGroup(!1)},t.Gesture.prototype.doWorkspaceClick_=function(e){e=this.creatorWorkspace_,t.selected&&t.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)},t.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},t.Gesture.prototype.setStartField=function(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)},t.Gesture.prototype.setStartBubble=function(e){this.startBubble_||(this.startBubble_=e)},t.Gesture.prototype.setStartBlock=function(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,e.isInFlyout&&e!=e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))},t.Gesture.prototype.setTargetBlock_=function(e){e.isShadow()?this.setTargetBlock_(e.getParent()):this.targetBlock_=e},t.Gesture.prototype.setStartWorkspace_=function(e){this.startWorkspace_||(this.startWorkspace_=e)},t.Gesture.prototype.setStartFlyout_=function(e){this.flyout_||(this.flyout_=e)},t.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},t.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},t.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},t.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},t.Gesture.prototype.hasStarted=function(){return this.hasStarted_},t.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},t.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},t.Gesture.inProgress=function(){for(var a,e=t.Workspace.getAll(),n=0;a=e[n];n++)if(a.currentGesture_)return!0;return!1},t.IRegistrable=function(){},t.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},t.Marker.prototype.setDrawer=function(e){this.drawer_=e},t.Marker.prototype.getDrawer=function(){return this.drawer_},t.Marker.prototype.getCurNode=function(){return this.curNode_},t.Marker.prototype.setCurNode=function(e){var n=this.curNode_;this.curNode_=e,this.drawer_&&this.drawer_.draw(n,this.curNode_)},t.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},t.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},t.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},t.Cursor=function(){t.Cursor.superClass_.constructor.call(this),this.type="cursor"},t.utils.object.inherits(t.Cursor,t.Marker),t.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},t.Cursor.prototype.in=function(){var e=this.getCurNode();return e?((e.getType()==t.ASTNode.types.PREVIOUS||e.getType()==t.ASTNode.types.OUTPUT)&&(e=e.next()),(e=e.in())&&this.setCurNode(e),e):null},t.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},t.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()==t.ASTNode.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null},t.registry.register(t.registry.Type.CURSOR,t.registry.DEFAULT,t.Cursor),t.MarkerManager=function(e){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=e},t.MarkerManager.LOCAL_MARKER="local_marker_1",t.MarkerManager.prototype.registerMarker=function(e,n){this.markers_[e]&&this.unregisterMarker(e),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[e]=n},t.MarkerManager.prototype.unregisterMarker=function(e){var n=this.markers_[e];if(!n)throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[e]},t.MarkerManager.prototype.getCursor=function(){return this.cursor_},t.MarkerManager.prototype.getMarker=function(e){return this.markers_[e]||null},t.MarkerManager.prototype.setCursor=function(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},t.MarkerManager.prototype.setCursorSvg=function(e){e?(this.workspace_.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},t.MarkerManager.prototype.setMarkerSvg=function(e){e?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(e)):this.markerSvg_=null},t.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},t.MarkerManager.prototype.dispose=function(){for(var a,e=Object.keys(this.markers_),n=0;a=e[n];n++)this.unregisterMarker(a);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},t.WidgetDiv={},t.WidgetDiv.owner_=null,t.WidgetDiv.dispose_=null,t.WidgetDiv.rendererClassName_="",t.WidgetDiv.themeClassName_="",t.WidgetDiv.createDom=function(){t.WidgetDiv.DIV||(t.WidgetDiv.DIV=document.createElement("div"),t.WidgetDiv.DIV.className="blocklyWidgetDiv",(t.parentContainer||document.body).appendChild(t.WidgetDiv.DIV))},t.WidgetDiv.show=function(e,n,a){t.WidgetDiv.hide(),t.WidgetDiv.owner_=e,t.WidgetDiv.dispose_=a,(e=t.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",e.style.display="block",n=t.getMainWorkspace(),t.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),t.WidgetDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.WidgetDiv.rendererClassName_),t.utils.dom.addClass(e,t.WidgetDiv.themeClassName_)},t.WidgetDiv.hide=function(){if(t.WidgetDiv.isVisible()){t.WidgetDiv.owner_=null;var e=t.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",t.WidgetDiv.dispose_&&t.WidgetDiv.dispose_(),t.WidgetDiv.dispose_=null,e.textContent="",t.WidgetDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.rendererClassName_),t.WidgetDiv.rendererClassName_=""),t.WidgetDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.themeClassName_),t.WidgetDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.WidgetDiv.isVisible=function(){return!!t.WidgetDiv.owner_},t.WidgetDiv.hideIfOwner=function(e){t.WidgetDiv.owner_==e&&t.WidgetDiv.hide()},t.WidgetDiv.positionInternal_=function(e,n,a){t.WidgetDiv.DIV.style.left=e+"px",t.WidgetDiv.DIV.style.top=n+"px",t.WidgetDiv.DIV.style.height=a+"px"},t.WidgetDiv.positionWithAnchor=function(e,n,a,d){var C=t.WidgetDiv.calculateY_(e,n,a);e=t.WidgetDiv.calculateX_(e,n,a,d),0>C?t.WidgetDiv.positionInternal_(e,0,a.height+C):t.WidgetDiv.positionInternal_(e,C,a.height)},t.WidgetDiv.calculateX_=function(e,n,a,d){return d?(n=Math.max(n.right-a.width,e.left),Math.min(n,e.right-a.width)):(n=Math.min(n.left,e.right-a.width),Math.max(n,e.left))},t.WidgetDiv.calculateY_=function(e,n,a){return n.bottom+a.height>=e.bottom?n.top-a.height:n.bottom},t.Field=function(e,n,a){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new t.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,a&&this.configure_(a),this.setValue(e),n&&this.setValidator(n)},t.Field.prototype.DEFAULT_VALUE=null,t.Field.prototype.name=void 0,t.Field.prototype.disposed=!1,t.Field.prototype.maxDisplayLength=50,t.Field.prototype.sourceBlock_=null,t.Field.prototype.isDirty_=!0,t.Field.prototype.visible_=!0,t.Field.prototype.clickTarget_=null,t.Field.NBSP="\xa0",t.Field.prototype.EDITABLE=!0,t.Field.prototype.SERIALIZABLE=!1,t.Field.prototype.configure_=function(e){var n=e.tooltip;"string"==typeof n&&(n=t.utils.replaceMessageReferences(e.tooltip)),n&&this.setTooltip(n)},t.Field.prototype.setSourceBlock=function(e){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=e},t.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},t.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},t.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},t.Field.prototype.initModel=function(){},t.Field.prototype.createBorderRect_=function(){this.borderRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},t.Field.prototype.createTextElement_=function(){this.textElement_=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},t.Field.prototype.bindEvents_=function(){t.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=t.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},t.Field.prototype.fromXml=function(e){this.setValue(e.textContent)},t.Field.prototype.toXml=function(e){return e.textContent=this.getValue(),e},t.Field.prototype.dispose=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hideIfOwner(this),t.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&t.browserEvents.unbind(this.mouseDownWrapper_),t.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},t.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(t.utils.dom.addClass(e,"blocklyEditableText"),t.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(t.utils.dom.addClass(e,"blocklyNonEditableText"),t.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},t.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},t.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},t.Field.prototype.isSerializable=function(){var e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e},t.Field.prototype.isVisible=function(){return this.visible_},t.Field.prototype.setVisible=function(e){if(this.visible_!=e){this.visible_=e;var n=this.getSvgRoot();n&&(n.style.display=e?"block":"none")}},t.Field.prototype.setValidator=function(e){this.validator_=e},t.Field.prototype.getValidator=function(){return this.validator_},t.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},t.Field.prototype.applyColour=function(){},t.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},t.Field.prototype.showEditor=function(e){this.isClickable()&&this.showEditor_(e)},t.Field.prototype.updateSize_=function(e){var n=this.getConstants(),a=2*(e=null!=e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),d=n.FIELD_TEXT_HEIGHT,C=0;this.textElement_&&(a+=C=t.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(d=Math.max(d,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=d,this.size_.width=a,this.positionTextElement_(e,C),this.positionBorderRect_()},t.Field.prototype.positionTextElement_=function(e,n){if(this.textElement_){var a=this.getConstants(),d=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-e:e),this.textElement_.setAttribute("y",a.FIELD_TEXT_BASELINE_CENTER?d:d-a.FIELD_TEXT_HEIGHT/2+a.FIELD_TEXT_BASELINE)}},t.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},t.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new t.utils.Size(0,0)},t.Field.prototype.getScaledBBox=function(){if(this.borderRect_)e=this.borderRect_.getBoundingClientRect(),a=t.utils.style.getPageOffset(this.borderRect_),d=e.width,e=e.height;else{var e=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,a=this.getAbsoluteXY_(),d=e.width*n;e=e.height*n,t.utils.userAgent.GECKO?(a.x+=1.5*n,a.y+=1.5*n):t.utils.userAgent.EDGE||t.utils.userAgent.IE||(a.x-=.5*n,a.y-=.5*n),d+=1*n,e+=1*n}return new t.utils.Rect(a.y,a.y+e,a.x,a.x+d)},t.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"\u2026"),e=e.replace(/\s/g,t.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="\u200f"),e):t.Field.NBSP},t.Field.prototype.getText=function(){if(this.getText_){var e=this.getText_.call(this);if(null!==e)return String(e)}return String(this.getValue())},t.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},t.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},t.Field.prototype.setValue=function(e){if(null!==e){var n=this.doClassValidation_(e);if(!((e=this.processValidation_(e,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,e),(e=this.processValidation_(e,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var a=this.getValue();a===e?this.doValueUpdate_(e):(n&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"field",this.name||null,a,e)),this.doValueUpdate_(e),this.isDirty_&&this.forceRerender())}}}},t.Field.prototype.processValidation_=function(e,n){return null===n?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(e=n),e)},t.Field.prototype.getValue=function(){return this.value_},t.Field.prototype.doClassValidation_=function(e){return null==e?null:e},t.Field.prototype.doValueUpdate_=function(e){this.value_=e,this.isDirty_=!0},t.Field.prototype.doValueInvalid_=function(e){},t.Field.prototype.onMouseDown_=function(e){this.sourceBlock_&&this.sourceBlock_.workspace&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)},t.Field.prototype.setTooltip=function(e){e||""===e||(e=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=e:this.tooltip_=e},t.Field.prototype.getTooltip=function(){var e=this.getClickTarget_();return t.Tooltip.getTooltipOfObject(e||{tooltip:this.tooltip_})},t.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},t.Field.prototype.getAbsoluteXY_=function(){return t.utils.style.getPageOffset(this.getClickTarget_())},t.Field.prototype.referencesVariables=function(){return!1},t.Field.prototype.getParentInput=function(){for(var e=null,n=this.sourceBlock_,a=n.inputList,d=0;d<n.inputList.length;d++)for(var C=a[d],D=C.fieldRow,B=0;B<D.length;B++)if(D[B]===this){e=C;break}return e},t.Field.prototype.getFlipRtl=function(){return!1},t.Field.prototype.isTabNavigable=function(){return!1},t.Field.prototype.onShortcut=function(e){return!1},t.Field.prototype.setCursorSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},t.Field.prototype.setMarkerSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},t.Field.prototype.updateMarkers_=function(){var e=this.sourceBlock_.workspace;e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.FieldLabel=function(e,n,a){this.class_=null,t.FieldLabel.superClass_.constructor.call(this,e,null,a),a||(this.class_=n||null)},t.utils.object.inherits(t.FieldLabel,t.Field),t.FieldLabel.prototype.DEFAULT_VALUE="",t.FieldLabel.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabel(n,void 0,e)},t.FieldLabel.prototype.EDITABLE=!1,t.FieldLabel.prototype.configure_=function(e){t.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},t.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&t.utils.dom.addClass(this.textElement_,this.class_)},t.FieldLabel.prototype.doClassValidation_=function(e){return null==e?null:String(e)},t.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&t.utils.dom.removeClass(this.textElement_,this.class_),e&&t.utils.dom.addClass(this.textElement_,e)),this.class_=e},t.fieldRegistry.register("field_label",t.FieldLabel),t.Input=function(e,n,a,d){if(e!=t.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=n,this.sourceBlock_=a,this.connection=d,this.fieldRow=[]},t.Input.prototype.align=t.constants.ALIGN.LEFT,t.Input.prototype.visible_=!0,t.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Input.prototype.appendField=function(e,n){return this.insertFieldAt(this.fieldRow.length,e,n),this},t.Input.prototype.insertFieldAt=function(e,n,a){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(n||""==n&&a)&&("string"==typeof n&&(n=t.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=a,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),++e,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),e},t.Input.prototype.removeField=function(e,n){for(var d,a=0;d=this.fieldRow[a];a++)if(d.name===e)return d.dispose(),this.fieldRow.splice(a,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+e+'" not found.')},t.Input.prototype.isVisible=function(){return this.visible_},t.Input.prototype.setVisible=function(e){var n=[];if(this.visible_==e)return n;this.visible_=e;for(var d,a=0;d=this.fieldRow[a];a++)d.setVisible(e);return this.connection&&(this.connection=this.connection,e?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),a=this.connection.targetBlock())&&(a.getSvgRoot().style.display=e?"block":"none"),n},t.Input.prototype.markDirty=function(){for(var n,e=0;n=this.fieldRow[e];e++)n.markDirty()},t.Input.prototype.setCheck=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this},t.Input.prototype.setAlign=function(e){return this.align=e,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},t.Input.prototype.setShadowDom=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this},t.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},t.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()},t.Input.prototype.dispose=function(){for(var n,e=0;n=this.fieldRow[e];e++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},t.Block=function(e,n,a){if(t.Generator&&void 0!==t.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=a&&!e.getBlockById(a)?a:t.utils.genUid(),e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new t.utils.Size(160,80)},this.xy_=new t.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(a=t.Blocks[n])||"object"!=typeof a)throw TypeError("Unknown block type: "+n);t.utils.object.mixin(this,a)}e.addTopBlock(this),e.addTypedBlock(this),(e=t.Events.getGroup())||t.Events.setGroup(!0),n=t.Events.recordUndo;try{"function"==typeof this.init&&(t.Events.recordUndo=!1,this.init(),t.Events.recordUndo=n),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(this))}finally{e||t.Events.setGroup(!1),t.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},t.Block.COLLAPSED_INPUT_NAME=t.constants.COLLAPSED_INPUT_NAME,t.Block.COLLAPSED_FIELD_NAME=t.constants.COLLAPSED_FIELD_NAME,t.Block.prototype.data=null,t.Block.prototype.disposed=!1,t.Block.prototype.hue_=null,t.Block.prototype.colour_="#000000",t.Block.prototype.styleName_="",t.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_DELETE))(this)),t.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),t.selected==this&&(t.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var a;a=this.inputList[n];n++)a.dispose();this.inputList.length=0;var C,d=this.getConnections_(!0);for(n=0;C=d[n];n++)C.dispose()}finally{t.Events.enable(),this.disposed=!0}}},t.Block.prototype.initModel=function(){for(var n,e=0;n=this.inputList[e];e++)for(var d,a=0;d=n.fieldRow[a];a++)d.initModel&&d.initModel()},t.Block.prototype.unplug=function(e){this.outputConnection?this.unplugFromRow_(e):this.previousConnection&&this.unplugFromStack_(e)},t.Block.prototype.unplugFromRow_=function(e){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&((e=e.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):e.onFailedConnect(n))},t.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;if(a&&a.type==t.connectionTypes.INPUT_VALUE&&a.targetConnection){if(e)return null;e=a}}return e},t.Block.prototype.unplugFromStack_=function(e){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var a=this.getNextBlock();e&&a&&!a.isShadow()&&((e=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,e,!1)&&n.connect(e))},t.Block.prototype.getConnections_=function(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(var a,n=0;a=this.inputList[n];n++)a.connection&&e.push(a.connection);return e},t.Block.prototype.lastConnectionInStack=function(e){for(var n=this.nextConnection;n;){var a=n.targetBlock();if(!a||e&&a.isShadow())return n;n=a.nextConnection}return null},t.Block.prototype.bumpNeighbours=function(){},t.Block.prototype.getParent=function(){return this.parentBlock_},t.Block.prototype.getInputWithBlock=function(e){for(var a,n=0;a=this.inputList[n];n++)if(a.connection&&a.connection.targetBlock()==e)return a;return null},t.Block.prototype.getSurroundParent=function(){var e=this;do{var n=e;if(!(e=e.getParent()))return null}while(e.getNextBlock()==n);return e},t.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},t.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},t.Block.prototype.getFirstStatementConnection=function(){for(var n,e=0;n=this.inputList[e];e++)if(n.connection&&n.connection.type==t.connectionTypes.NEXT_STATEMENT)return n.connection;return null},t.Block.prototype.getRootBlock=function(){var e=this;do{var n=e;e=n.parentBlock_}while(e);return n},t.Block.prototype.getTopStackBlock=function(){var e=this;do{var n=e.getPreviousBlock()}while(n&&n.getNextBlock()==e&&(e=n));return e},t.Block.prototype.getChildren=function(e){if(!e)return this.childBlocks_;e=[];for(var a,n=0;a=this.inputList[n];n++)a.connection&&(a=a.connection.targetBlock())&&e.push(a);return(n=this.getNextBlock())&&e.push(n),e},t.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(t.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},t.Block.prototype.getDescendants=function(e){for(var d,n=[this],a=this.getChildren(e),C=0;d=a[C];C++)n.push.apply(n,d.getDescendants(e));return n},t.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setDeletable=function(e){this.deletable_=e},t.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setMovable=function(e){this.movable_=e},t.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(t.utils.getBlockTypeCounts(this,!0))},t.Block.prototype.isShadow=function(){return this.isShadow_},t.Block.prototype.setShadow=function(e){this.isShadow_=e},t.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},t.Block.prototype.setInsertionMarker=function(e){this.isInsertionMarker_=e},t.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setEditable=function(e){this.editable_=e,e=0;for(var n;n=this.inputList[e];e++)for(var d,a=0;d=n.fieldRow[a];a++)d.updateEditable()},t.Block.prototype.isDisposed=function(){return this.disposed},t.Block.prototype.getMatchingConnection=function(e,n){var a=this.getConnections_(!0);if(e=e.getConnections_(!0),a.length!=e.length)throw Error("Connection lists did not match in length.");for(var d=0;d<e.length;d++)if(e[d]==n)return a[d];return null},t.Block.prototype.setHelpUrl=function(e){this.helpUrl=e},t.Block.prototype.setTooltip=function(e){this.tooltip=e},t.Block.prototype.getTooltip=function(){return t.Tooltip.getTooltipOfObject(this)},t.Block.prototype.getColour=function(){return this.colour_},t.Block.prototype.getStyleName=function(){return this.styleName_},t.Block.prototype.getHue=function(){return this.hue_},t.Block.prototype.setColour=function(e){e=t.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},t.Block.prototype.setStyle=function(e){this.styleName_=e},t.Block.prototype.setOnChange=function(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=e)&&(this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},t.Block.prototype.getField=function(e){if("string"!=typeof e)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===e?"nothing":e+" of type "+typeof e)+" instead");for(var a,n=0;a=this.inputList[n];n++)for(var C,d=0;C=a.fieldRow[d];d++)if(C.name===e)return C;return null},t.Block.prototype.getVars=function(){for(var a,e=[],n=0;a=this.inputList[n];n++)for(var C,d=0;C=a.fieldRow[d];d++)C.referencesVariables()&&e.push(C.getValue());return e},t.Block.prototype.getVarModels=function(){for(var a,e=[],n=0;a=this.inputList[n];n++)for(var C,d=0;C=a.fieldRow[d];d++)C.referencesVariables()&&(C=this.workspace.getVariableById(C.getValue()))&&e.push(C);return e},t.Block.prototype.updateVarName=function(e){for(var a,n=0;a=this.inputList[n];n++)for(var C,d=0;C=a.fieldRow[d];d++)C.referencesVariables()&&e.getId()==C.getValue()&&C.refreshVariableName()},t.Block.prototype.renameVarById=function(e,n){for(var d,a=0;d=this.inputList[a];a++)for(var D,C=0;D=d.fieldRow[C];C++)D.referencesVariables()&&e==D.getValue()&&D.setValue(n)},t.Block.prototype.getFieldValue=function(e){return(e=this.getField(e))?e.getValue():null},t.Block.prototype.setFieldValue=function(e,n){var a=this.getField(n);if(!a)throw Error('Field "'+n+'" not found.');a.setValue(e)},t.Block.prototype.setPreviousStatement=function(e,n){if(e){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(t.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},t.Block.prototype.setNextStatement=function(e,n){if(e)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(t.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},t.Block.prototype.setOutput=function(e,n){if(e){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(t.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},t.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},t.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.DUMMY&&this.inputList[e].type==t.inputTypes.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.VALUE&&this.inputList[e].type==t.inputTypes.DUMMY)return!0;return!1},t.Block.prototype.setOutputShape=function(e){this.outputShape_=e},t.Block.prototype.getOutputShape=function(){return this.outputShape_},t.Block.prototype.isEnabled=function(){return!this.disabled},t.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},t.Block.prototype.getInheritedDisabled=function(){for(var e=this.getSurroundParent();e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1},t.Block.prototype.isCollapsed=function(){return this.collapsed_},t.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},t.Block.prototype.toString=function(e,n){function a(be){var se=be.getCheck();return!se&&be.targetConnection&&(se=be.targetConnection.getCheck()),!!se&&(-1!=se.indexOf("Boolean")||-1!=se.indexOf("Number"))}function d(){B&&B.getType()==z.getType()&&B.getLocation()==z.getLocation()&&(B=null)}var C=[];n=n||"?";var D=t.ASTNode.NAVIGATE_ALL_FIELDS;t.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var B=t.ASTNode.createBlockNode(this),z=B;B;){switch(B.getType()){case t.ASTNode.types.INPUT:var oe=B.getLocation();B.in()?a(oe)&&C.push("("):C.push(n);break;case t.ASTNode.types.FIELD:(oe=B.getLocation()).name!=t.constants.COLLAPSED_FIELD_NAME&&C.push(oe.getText())}if(!(B=(oe=B).in()||oe.next())){for(B=oe.out(),d();B&&!B.next();)B=B.out(),d(),B&&B.getType()==t.ASTNode.types.INPUT&&a(B.getLocation())&&C.push(")");B&&(B=B.next())}}for(t.ASTNode.NAVIGATE_ALL_FIELDS=D,n=2;n<C.length;n++)"("==C[n-2]&&")"==C[n]&&(C[n-2]=C[n-1],C.splice(n-1,2));return C=(C=C.reduce(function(be,se){return be+("("==be.substr(-1)||")"==se?"":" ")+se},"")).trim()||"???",e&&C.length>e&&(C=C.substring(0,e-3)+"..."),C},t.Block.prototype.appendValueInput=function(e){return this.appendInput_(t.inputTypes.VALUE,e)},t.Block.prototype.appendStatementInput=function(e){return this.appendInput_(t.inputTypes.STATEMENT,e)},t.Block.prototype.appendDummyInput=function(e){return this.appendInput_(t.inputTypes.DUMMY,e||"")},t.Block.prototype.jsonInit=function(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,n):this.jsonInitColour_(e,n);for(var a=0;void 0!==e["message"+a];)this.interpolate_(e["message"+a],e["args"+a]||[],e["lastDummyAlign"+a],n),a++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(a=t.utils.replaceMessageReferences(a=e.tooltip),this.setTooltip(a)),void 0!==e.enableContextMenu&&(this.contextMenu=!!(a=e.enableContextMenu)),void 0!==e.helpUrl&&(a=t.utils.replaceMessageReferences(a=e.helpUrl),this.setHelpUrl(a)),"string"==typeof e.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&t.Extensions.apply(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(n=0;n<e.length;++n)t.Extensions.apply(e[n],this,!1)},t.Block.prototype.jsonInitColour_=function(e,n){if("colour"in e)if(void 0===e.colour)console.warn(n+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch(a){console.warn(n+"Illegal colour value: ",e)}}},t.Block.prototype.jsonInitStyle_=function(e,n){e=e.style;try{this.setStyle(e)}catch(a){console.warn(n+"Style does not exist: ",e)}},t.Block.prototype.mixin=function(e,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var a in n=[],e)void 0!==this[a]&&n.push(a);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}t.utils.object.mixin(this,e)},t.Block.prototype.interpolate_=function(e,n,a,d){e=t.utils.tokenizeInterpolation(e),this.validateTokens_(e,n.length),n=this.interpolateArguments_(e,n,a),a=[],e=0;for(var C;C=n[e];e++)if(this.isInputKeyword_(C.type)){if(C=this.inputFromJson_(C,d)){for(var B,D=0;B=a[D];D++)C.appendField(B[0],B[1]);a.length=0}}else(D=this.fieldFromJson_(C))&&a.push([D,C.name])},t.Block.prototype.validateTokens_=function(e,n){for(var a=[],d=0,C=0;C<e.length;C++){var D=e[C];if("number"==typeof D){if(1>D||D>n)throw Error('Block "'+this.type+'": Message index %'+D+" out of range.");if(a[D])throw Error('Block "'+this.type+'": Message index %'+D+" duplicated.");a[D]=!0,d++}}if(d!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},t.Block.prototype.interpolateArguments_=function(e,n,a){for(var d=[],C=0;C<e.length;C++){var D=e[C];"number"==typeof D&&(D=n[D-1]),("string"!=typeof D||(D=this.stringToFieldJson_(D)))&&d.push(D)}return(e=d.length)&&!this.isInputKeyword_(d[e-1].type)&&(e={type:"input_dummy"},a&&(e.align=a),d.push(e)),d},t.Block.prototype.fieldFromJson_=function(e){var n=t.fieldRegistry.fromJson(e);return!n&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):n},t.Block.prototype.inputFromJson_=function(e,n){var a={LEFT:t.constants.ALIGN.LEFT,RIGHT:t.constants.ALIGN.RIGHT,CENTRE:t.constants.ALIGN.CENTRE,CENTER:t.constants.ALIGN.CENTRE},d=null;switch(e.type){case"input_value":d=this.appendValueInput(e.name);break;case"input_statement":d=this.appendStatementInput(e.name);break;case"input_dummy":d=this.appendDummyInput(e.name)}return d?(e.check&&d.setCheck(e.check),e.align&&(void 0===(a=a[e.align.toUpperCase()])?console.warn(n+"Illegal align value: ",e.align):d.setAlign(a)),d):null},t.Block.prototype.isInputKeyword_=function(e){return"input_value"==e||"input_statement"==e||"input_dummy"==e},t.Block.prototype.stringToFieldJson_=function(e){return(e=e.trim())?{type:"field_label",text:e}:null},t.Block.prototype.appendInput_=function(e,n){var a=null;return(e==t.inputTypes.VALUE||e==t.inputTypes.STATEMENT)&&(a=this.makeConnection_(e)),e==t.inputTypes.STATEMENT&&this.statementInputCount++,e=new t.Input(e,n,this,a),this.inputList.push(e),e},t.Block.prototype.moveInputBefore=function(e,n){if(e!=n){for(var D,a=-1,d=n?-1:this.inputList.length,C=0;D=this.inputList[C];C++)if(D.name==e){if(a=C,-1!=d)break}else if(n&&D.name==n&&(d=C,-1!=a))break;if(-1==a)throw Error('Named input "'+e+'" not found.');if(-1==d)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(a,d)}},t.Block.prototype.moveNumberedInputBefore=function(e,n){if(e==n)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var a=this.inputList[e];this.inputList.splice(e,1),e<n&&n--,this.inputList.splice(n,0,a)},t.Block.prototype.removeInput=function(e,n){for(var d,a=0;d=this.inputList[a];a++)if(d.name==e)return d.type==t.inputTypes.STATEMENT&&this.statementInputCount--,d.dispose(),this.inputList.splice(a,1),!0;if(n)return!1;throw Error("Input not found: "+e)},t.Block.prototype.getInput=function(e){for(var a,n=0;a=this.inputList[n];n++)if(a.name==e)return a;return null},t.Block.prototype.getInputTargetBlock=function(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()},t.Block.prototype.getCommentText=function(){return this.commentModel.text},t.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},t.Block.prototype.setWarningText=function(e,n){},t.Block.prototype.setMutator=function(e){},t.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},t.Block.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var a=new(t.Events.get(t.Events.BLOCK_MOVE))(this);this.xy_.translate(e,n),a.recordNew(),t.Events.fire(a)},t.Block.prototype.makeConnection_=function(e){return new t.Connection(this,e)},t.Block.prototype.allInputsFilled=function(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(var a,n=0;a=this.inputList[n];n++)if(a.connection&&(!(a=a.connection.targetBlock())||!a.allInputsFilled(e)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(e)},t.Block.prototype.toDevString=function(){var e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e},t.blockRendering.IPathObject=function(e,n){},t.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},t.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},t.Menu.prototype.addChild=function(e){this.menuItems_.push(e)},t.Menu.prototype.render=function(e){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&t.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var d,a=0;d=this.menuItems_[a];a++)n.appendChild(d.createDom());this.mouseOverHandler_=t.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=t.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=t.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=t.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=t.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),e.appendChild(n)},t.Menu.prototype.getElement=function(){return this.element_},t.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),t.utils.dom.addClass(e,"blocklyFocused"))},t.Menu.prototype.blur_=function(){var e=this.getElement();e&&(e.blur(),t.utils.dom.removeClass(e,"blocklyFocused"))},t.Menu.prototype.setRole=function(e){this.roleName_=e},t.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(t.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(t.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(t.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(t.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(t.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,e=0;n=this.menuItems_[e];e++)n.dispose();this.element_=null},t.Menu.prototype.getMenuItem_=function(e){for(var n=this.getElement();e&&e!=n;){if(t.utils.dom.hasClass(e,"blocklyMenuItem"))for(var d,a=0;d=this.menuItems_[a];a++)if(d.getElement()==e)return d;e=e.parentElement}return null},t.Menu.prototype.setHighlighted=function(e){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),e&&(e.setHighlighted(!0),this.highlightedItem_=e,n=this.getElement(),t.utils.style.scrollIntoContainerView(e.getElement(),n),t.utils.aria.setState(n,t.utils.aria.State.ACTIVEDESCENDANT,e.getId()))},t.Menu.prototype.highlightNext=function(){var e=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(e,1)},t.Menu.prototype.highlightPrevious=function(){var e=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>e?this.menuItems_.length:e,-1)},t.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},t.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},t.Menu.prototype.highlightHelper_=function(e,n){e+=n;for(var a;a=this.menuItems_[e];){if(a.isEnabled()){this.setHighlighted(a);break}e+=n}},t.Menu.prototype.handleMouseOver_=function(e){(e=this.getMenuItem_(e.target))&&(e.isEnabled()?this.highlightedItem_!=e&&this.setHighlighted(e):this.setHighlighted(null))},t.Menu.prototype.handleClick_=function(e){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof e.clientX){var a=new t.utils.Coordinate(e.clientX,e.clientY);if(1>t.utils.Coordinate.distance(n,a))return}(e=this.getMenuItem_(e.target))&&e.performAction()},t.Menu.prototype.handleMouseEnter_=function(e){this.focus()},t.Menu.prototype.handleMouseLeave_=function(e){this.getElement()&&(this.blur_(),this.setHighlighted(null))},t.Menu.prototype.handleKeyEvent_=function(e){if(this.menuItems_.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem_;switch(e.keyCode){case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:n&&n.performAction();break;case t.utils.KeyCodes.UP:this.highlightPrevious();break;case t.utils.KeyCodes.DOWN:this.highlightNext();break;case t.utils.KeyCodes.PAGE_UP:case t.utils.KeyCodes.HOME:this.highlightFirst_();break;case t.utils.KeyCodes.PAGE_DOWN:case t.utils.KeyCodes.END:this.highlightLast_();break;default:return}e.preventDefault(),e.stopPropagation()}},t.Menu.prototype.getSize=function(){var e=this.getElement(),n=t.utils.style.getSize(e);return n.height=e.scrollHeight,n},t.MenuItem=function(e,n){this.content_=e,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},t.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=t.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var a=document.createElement("div");a.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(a)}return a=this.content_,"string"==typeof this.content_&&(a=document.createTextNode(this.content_)),n.appendChild(a),e.appendChild(n),this.roleName_&&t.utils.aria.setRole(e,this.roleName_),t.utils.aria.setState(e,t.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),t.utils.aria.setState(e,t.utils.aria.State.DISABLED,!this.enabled_),e},t.MenuItem.prototype.dispose=function(){this.element_=null},t.MenuItem.prototype.getElement=function(){return this.element_},t.MenuItem.prototype.getId=function(){return this.element_.id},t.MenuItem.prototype.getValue=function(){return this.value_},t.MenuItem.prototype.setRightToLeft=function(e){this.rightToLeft_=e},t.MenuItem.prototype.setRole=function(e){this.roleName_=e},t.MenuItem.prototype.setCheckable=function(e){this.checkable_=e},t.MenuItem.prototype.setChecked=function(e){this.checked_=e},t.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var n=this.getElement();n&&this.isEnabled()&&(e?(t.utils.dom.addClass(n,"blocklyMenuItemHighlight"),t.utils.dom.addClass(n,"goog-menuitem-highlight")):(t.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),t.utils.dom.removeClass(n,"goog-menuitem-highlight")))},t.MenuItem.prototype.isEnabled=function(){return this.enabled_},t.MenuItem.prototype.setEnabled=function(e){this.enabled_=e},t.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},t.MenuItem.prototype.onAction=function(e,n){this.actionHandler_=e.bind(n)},t.ContextMenu={},t.ContextMenu.currentBlock=null,t.ContextMenu.menu_=null,t.ContextMenu.show=function(e,n,a){if(t.WidgetDiv.show(t.ContextMenu,a,t.ContextMenu.dispose),n.length){var d=t.ContextMenu.populate_(n,a);t.ContextMenu.menu_=d,t.ContextMenu.position_(d,e,a),setTimeout(function(){d.focus()},1),t.ContextMenu.currentBlock=null}else t.ContextMenu.hide()},t.ContextMenu.populate_=function(e,n){var a=new t.Menu;a.setRole(t.utils.aria.Role.MENU);for(var C,d=0;C=e[d];d++){var D=new t.MenuItem(C.text);D.setRightToLeft(n),D.setRole(t.utils.aria.Role.MENUITEM),a.addChild(D),D.setEnabled(C.enabled),C.enabled&&D.onAction(function(B){t.ContextMenu.hide(),this.callback(this.scope)},C)}return a},t.ContextMenu.position_=function(e,n,a){var d=t.utils.getViewportBBox();n=new t.utils.Rect(n.clientY+d.top,n.clientY+d.top,n.clientX+d.left,n.clientX+d.left),t.ContextMenu.createWidget_(e);var C=e.getSize();a&&(n.left+=C.width,n.right+=C.width,d.left+=C.width,d.right+=C.width),t.WidgetDiv.positionWithAnchor(d,n,C,a),e.focus()},t.ContextMenu.createWidget_=function(e){e.render(t.WidgetDiv.DIV);var n=e.getElement();t.utils.dom.addClass(n,"blocklyContextMenu"),t.browserEvents.conditionalBind(n,"contextmenu",null,t.utils.noEvent),e.focus()},t.ContextMenu.hide=function(){t.WidgetDiv.hideIfOwner(t.ContextMenu),t.ContextMenu.currentBlock=null},t.ContextMenu.dispose=function(){t.ContextMenu.menu_&&(t.ContextMenu.menu_.dispose(),t.ContextMenu.menu_=null)},t.ContextMenu.callbackFactory=function(e,n){return function(){t.Events.disable();try{var a=t.Xml.domToBlock(n,e.workspace),d=e.getRelativeToSurfaceXY();d.x=e.RTL?d.x-t.SNAP_RADIUS:d.x+t.SNAP_RADIUS,d.y+=2*t.SNAP_RADIUS,a.moveBy(d.x,d.y)}finally{t.Events.enable()}t.Events.isEnabled()&&!a.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(a)),a.select()}},t.ContextMenu.commentDeleteOption=function(e){return{text:t.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.Events.setGroup(!0),e.dispose(!0,!0),t.Events.setGroup(!1)}}},t.ContextMenu.commentDuplicateOption=function(e){return{text:t.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){t.duplicate(e)}}},t.ContextMenu.workspaceCommentOption=function(e,n){if(!t.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var a={enabled:!t.utils.userAgent.IE};return a.text=t.Msg.ADD_COMMENT,a.callback=function(){var d=new t.WorkspaceCommentSvg(e,t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,t.WorkspaceCommentSvg.DEFAULT_SIZE,t.WorkspaceCommentSvg.DEFAULT_SIZE),C=e.getInjectionDiv().getBoundingClientRect();C=new t.utils.Coordinate(n.clientX-C.left,n.clientY-C.top);var D=e.getOriginOffsetInPixels();(C=t.utils.Coordinate.difference(C,D)).scale(1/e.scale),d.moveBy(C.x,C.y),e.rendered&&(d.initSvg(),d.render(),d.select())},a},t.ContextMenuRegistry=function(){t.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},t.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},t.ContextMenuRegistry.registry=null,t.ContextMenuRegistry.prototype.register=function(e){if(this.registry_[e.id])throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_[e.id]=e},t.ContextMenuRegistry.prototype.unregister=function(e){if(!this.registry_[e])throw Error('Menu item with ID "'+e+'" not found.');delete this.registry_[e]},t.ContextMenuRegistry.prototype.getItem=function(e){return this.registry_[e]||null},t.ContextMenuRegistry.prototype.getContextMenuOptions=function(e,n){var a=[],d=this.registry_;return Object.keys(d).forEach(function(C){if(e==(C=d[C]).scopeType){var D=C.preconditionFn(n);"hidden"!=D&&(C={text:"function"==typeof C.displayText?C.displayText(n):C.displayText,enabled:"enabled"==D,callback:C.callback,scope:n,weight:C.weight},a.push(C))}}),a.sort(function(C,D){return C.weight-D.weight}),a},new t.ContextMenuRegistry,t.Events.Selected=function(e,n,a){t.Events.Selected.superClass_.constructor.call(this,a),this.oldElementId=e,this.newElementId=n},t.utils.object.inherits(t.Events.Selected,t.Events.UiBase),t.Events.Selected.prototype.type=t.Events.SELECTED,t.Events.Selected.prototype.toJson=function(){var e=t.Events.Selected.superClass_.toJson.call(this);return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e},t.Events.Selected.prototype.fromJson=function(e){t.Events.Selected.superClass_.fromJson.call(this,e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId},t.registry.register(t.registry.Type.EVENT,t.Events.SELECTED,t.Events.Selected),t.IBoundedElement=function(){},t.ICopyable=function(){},t.RenderedConnection=function(e,n){t.RenderedConnection.superClass_.constructor.call(this,e,n),this.db_=e.workspace.connectionDBList[n],this.dbOpposite_=e.workspace.connectionDBList[t.OPPOSITE_TYPE[n]],this.offsetInBlock_=new t.utils.Coordinate(0,0),this.trackedState_=t.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},t.utils.object.inherits(t.RenderedConnection,t.Connection),t.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},t.RenderedConnection.prototype.dispose=function(){t.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},t.RenderedConnection.prototype.getSourceBlock=function(){return t.RenderedConnection.superClass_.getSourceBlock.call(this)},t.RenderedConnection.prototype.targetBlock=function(){return t.RenderedConnection.superClass_.targetBlock.call(this)},t.RenderedConnection.prototype.distanceFrom=function(e){var n=this.x-e.x;return e=this.y-e.y,Math.sqrt(n*n+e*e)},t.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var a=!1;if(!n.isMovable()){if(!(n=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,a=!0}var d=t.selected==n;d||n.addSelect();var C=e.x+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x,D=e.y+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.y;a&&(D=-D),n.RTL&&(C=e.x-t.SNAP_RADIUS-Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x),n.moveBy(C,D),d||n.removeSelect()}}},t.RenderedConnection.prototype.moveTo=function(e,n){this.trackedState_==t.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=e,this.y=n},t.RenderedConnection.prototype.moveBy=function(e,n){this.moveTo(this.x+e,this.y+n)},t.RenderedConnection.prototype.moveToOffset=function(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)},t.RenderedConnection.prototype.setOffsetInBlock=function(e,n){this.offsetInBlock_.x=e,this.offsetInBlock_.y=n},t.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},t.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=e||0!=n){var a=this.targetBlock(),d=a.getSvgRoot();if(!d)throw Error("block is not rendered.");d=t.utils.getRelativeXY(d),a.getSvgRoot().setAttribute("transform","translate("+(d.x-e)+","+(d.y-n)+")"),a.moveConnections(-e,-n)}},t.RenderedConnection.prototype.closest=function(e,n){return this.dbOpposite_.searchForClosest(this,e,n)},t.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),n=e.shapeFor(this);n=this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.OUTPUT_VALUE?t.utils.svgPaths.moveBy(0,-(e=e.TAB_OFFSET_FROM_TOP))+t.utils.svgPaths.lineOnAxis("v",e)+n.pathDown+t.utils.svgPaths.lineOnAxis("v",e):t.utils.svgPaths.moveBy(-(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS),0)+t.utils.svgPaths.lineOnAxis("h",e)+n.pathLeft+t.utils.svgPaths.lineOnAxis("h",e),e=this.sourceBlock_.getRelativeToSurfaceXY(),t.Connection.highlightedPath_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},t.RenderedConnection.prototype.unhighlight=function(){t.utils.dom.removeNode(t.Connection.highlightedPath_),delete t.Connection.highlightedPath_},t.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==t.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==t.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.UNTRACKED))},t.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var e=this.targetBlock().getDescendants(!1),n=0;n<e.length;n++){for(var a=e[n],d=a.getConnections_(!0),C=0;C<d.length;C++)d[C].setTracking(!1);for(a=a.getIcons(),C=0;C<a.length;C++)a[C].setVisible(!1)}},t.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type!=t.connectionTypes.INPUT_VALUE&&this.type!=t.connectionTypes.NEXT_STATEMENT)return e;var n=this.targetBlock();if(n){if(n.isCollapsed()){var a=[];n.outputConnection&&a.push(n.outputConnection),n.nextConnection&&a.push(n.nextConnection),n.previousConnection&&a.push(n.previousConnection)}else a=n.getConnections_(!0);for(var d=0;d<a.length;d++)e.push.apply(e,a[d].startTrackingAll());e.length||(e[0]=n)}return e},t.RenderedConnection.prototype.isConnectionAllowed=function(e,n){return t.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(e)>n)&&t.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},t.RenderedConnection.prototype.onFailedConnect=function(e){var n=this.getSourceBlock();if(t.Events.recordUndo){var a=t.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(t.Events.setGroup(a),this.bumpAwayFrom(e),t.Events.setGroup(!1))}.bind(this),t.BUMP_DELAY)}},t.RenderedConnection.prototype.disconnectInternal_=function(e,n){t.RenderedConnection.superClass_.disconnectInternal_.call(this,e,n),e.rendered&&e.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},t.RenderedConnection.prototype.respawnShadow_=function(){t.RenderedConnection.superClass_.respawnShadow_.call(this);var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())},t.RenderedConnection.prototype.neighbours=function(e){return this.dbOpposite_.getNeighbours(this,e)},t.RenderedConnection.prototype.connect_=function(e){t.RenderedConnection.superClass_.connect_.call(this,e);var n=this.getSourceBlock();e=e.getSourceBlock();var a=n.rendered,d=e.rendered;a&&n.updateDisabled(),d&&e.updateDisabled(),a&&d&&(this.type==t.connectionTypes.NEXT_STATEMENT||this.type==t.connectionTypes.PREVIOUS_STATEMENT?e.render():n.render()),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")},t.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},t.BasicCursor=function(){t.BasicCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.BasicCursor,t.Cursor),t.BasicCursor.registrationName="basicCursor",t.BasicCursor.prototype.next=function(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null},t.BasicCursor.prototype.in=function(){return this.next()},t.BasicCursor.prototype.prev=function(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null},t.BasicCursor.prototype.out=function(){return this.prev()},t.BasicCursor.prototype.getNextNode_=function(e,n){if(!e)return null;var a=e.in()||e.next();return n(a)?a:a?this.getNextNode_(a,n):n(e=this.findSiblingOrParent_(e.out()))?e:e?this.getNextNode_(e,n):null},t.BasicCursor.prototype.getPreviousNode_=function(e,n){if(!e)return null;var a=e.prev();return n(a=a?this.getRightMostChild_(a):e.out())?a:a?this.getPreviousNode_(a,n):null},t.BasicCursor.prototype.validNode_=function(e){var n=!1;return((e=e&&e.getType())==t.ASTNode.types.OUTPUT||e==t.ASTNode.types.INPUT||e==t.ASTNode.types.FIELD||e==t.ASTNode.types.NEXT||e==t.ASTNode.types.PREVIOUS||e==t.ASTNode.types.WORKSPACE)&&(n=!0),n},t.BasicCursor.prototype.findSiblingOrParent_=function(e){return e?e.next()||this.findSiblingOrParent_(e.out()):null},t.BasicCursor.prototype.getRightMostChild_=function(e){if(!e.in())return e;for(e=e.in();e.next();)e=e.next();return this.getRightMostChild_(e)},t.registry.register(t.registry.Type.CURSOR,t.BasicCursor.registrationName,t.BasicCursor),t.TabNavigateCursor=function(){t.TabNavigateCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.TabNavigateCursor,t.BasicCursor),t.TabNavigateCursor.prototype.validNode_=function(e){var n=!1,a=e&&e.getType();return e&&(e=e.getLocation(),a==t.ASTNode.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n},t.BlockSvg=function(e,n,a){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=t.utils.is3dSupported()&&!!e.getBlockDragSurface();var d=this.pathObject.svgPath;d.tooltip=this,t.Tooltip.bindMouseEvents(d),t.BlockSvg.superClass_.constructor.call(this,e,n,a),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:t.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},t.utils.object.inherits(t.BlockSvg,t.Block),t.BlockSvg.prototype.height=0,t.BlockSvg.prototype.width=0,t.BlockSvg.prototype.warningTextDb_=null,t.BlockSvg.INLINE=-1,t.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",t.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,e=0;n=this.inputList[e];e++)n.init();for(n=this.getIcons(),e=0;e<n.length;e++)n[e].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||t.browserEvents.conditionalBind(e,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)},t.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},t.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},t.BlockSvg.prototype.getColourShadow=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},t.BlockSvg.prototype.getColourBorder=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},t.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(t.selected!=this){var e=null;if(t.selected){e=t.selected.id,t.Events.disable();try{t.selected.unselect()}finally{t.Events.enable()}}e=new(t.Events.get(t.Events.SELECTED))(e,this.id,this.workspace.id),t.Events.fire(e),t.selected=this,this.addSelect()}},t.BlockSvg.prototype.unselect=function(){if(t.selected==this){var e=new(t.Events.get(t.Events.SELECTED))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,t.Events.fire(e),t.selected=null,this.removeSelect()}},t.BlockSvg.prototype.mutator=null,t.BlockSvg.prototype.comment=null,t.BlockSvg.prototype.commentIcon_=null,t.BlockSvg.prototype.warning=null,t.BlockSvg.prototype.getIcons=function(){var e=[];return this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e},t.BlockSvg.prototype.setParent=function(e){var n=this.parentBlock_;if(e!=n){t.utils.dom.startTextWidthCache(),t.BlockSvg.superClass_.setParent.call(this,e),t.utils.dom.stopTextWidthCache();var a=this.getSvgRoot();if(!this.workspace.isClearing&&a){var d=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(a),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-d.x,e.y-d.y)):n&&(this.workspace.getCanvas().appendChild(a),this.translate(d.x,d.y)),this.applyColour()}}},t.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,n=0,a=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,d=this.getSvgRoot();if(d)do{var C=t.utils.getRelativeXY(d);e+=C.x,n+=C.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==d&&(e+=(C=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=C.y),d=d.parentNode}while(d&&d!=this.workspace.getCanvas()&&d!=a);return new t.utils.Coordinate(e,n)},t.BlockSvg.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var a=t.Events.isEnabled();if(a)var d=new(t.Events.get(t.Events.BLOCK_MOVE))(this);var C=this.getRelativeToSurfaceXY();this.translate(C.x+e,C.y+n),this.moveConnections(e,n),a&&(d.recordNew(),t.Events.fire(d)),this.workspace.resizeContents()},t.BlockSvg.prototype.translate=function(e,n){this.getSvgRoot().setAttribute("transform","translate("+e+","+n+")")},t.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),(e=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(e)}},t.BlockSvg.prototype.moveTo=function(e){var n=this.getRelativeToSurfaceXY();this.moveBy(e.x-n.x,e.y-n.y)},t.BlockSvg.prototype.moveOffDragSurface=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},t.BlockSvg.prototype.moveDuringDrag=function(e){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},t.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},t.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var n=e.getSpacing(),a=n/2,d=this.getRelativeToSurfaceXY();e=Math.round((d.x-a)/n)*n+a-d.x,n=Math.round((d.y-a)/n)*n+a-d.y,e=Math.round(e),n=Math.round(n),0==e&&0==n||this.moveBy(e,n)}}},t.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var a=e.x-n.width,d=e.x;else a=e.x,d=e.x+n.width;return new t.utils.Rect(e.y,e.y+n.height,a,d)},t.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,e=0;n=this.inputList[e];e++)n.markDirty()},t.BlockSvg.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.BlockSvg.superClass_.setCollapsed.call(this,e),e?this.rendered&&this.render():this.updateCollapsed_())},t.BlockSvg.prototype.updateCollapsed_=function(){for(var C,e=this.isCollapsed(),n=t.constants.COLLAPSED_INPUT_NAME,a=t.constants.COLLAPSED_FIELD_NAME,d=0;C=this.inputList[d];d++)C.name!=n&&C.setVisible(!e);if(e){for(C=this.getIcons(),d=0;e=C[d];d++)e.setVisible(!1);d=this.toString(t.COLLAPSE_CHARS),(C=this.getField(a))?C.setValue(d):(C=this.getInput(n)||this.appendDummyInput(n)).appendField(new t.FieldLabel(d),a)}else this.updateDisabled(),this.removeInput(n)},t.BlockSvg.prototype.tab=function(e,n){var a=new t.TabNavigateCursor;a.setCurNode(t.ASTNode.createFieldNode(e)),e=a.getCurNode(),n?a.next():a.prev(),(n=a.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},t.BlockSvg.prototype.onMouseDown_=function(e){var n=this.workspace&&this.workspace.getGesture(e);n&&n.handleBlockStart(e,this)},t.BlockSvg.prototype.showHelp=function(){var e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&window.open(e)},t.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var e=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e},t.BlockSvg.prototype.showContextMenu=function(e){var n=this.generateContextMenu();n&&n.length&&(t.ContextMenu.show(e,n,this.RTL),t.ContextMenu.currentBlock=this)},t.BlockSvg.prototype.moveConnections=function(e,n){if(this.rendered){for(var a=this.getConnections_(!1),d=0;d<a.length;d++)a[d].moveBy(e,n);for(a=this.getIcons(),d=0;d<a.length;d++)a[d].computeIconLocation();for(d=0;d<this.childBlocks_.length;d++)this.childBlocks_[d].moveConnections(e,n)}},t.BlockSvg.prototype.setDragging=function(e){if(e){var n=this.getSvgRoot();n.translate_="",n.skew_="",t.draggingConnections=t.draggingConnections.concat(this.getConnections_(!0)),t.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else t.draggingConnections=[],t.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)},t.BlockSvg.prototype.setMovable=function(e){t.BlockSvg.superClass_.setMovable.call(this,e),this.pathObject.updateMovable(e)},t.BlockSvg.prototype.setEditable=function(e){t.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var n=0;n<e.length;n++)e[n].updateEditable()},t.BlockSvg.prototype.setShadow=function(e){t.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},t.BlockSvg.prototype.setInsertionMarker=function(e){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},t.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.BlockSvg.prototype.dispose=function(e,n){if(this.workspace){t.Tooltip.dispose(),t.Tooltip.unbindMouseEvents(this.pathObject.svgPath),t.utils.dom.startTextWidthCache();var a=this.workspace;if(t.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),t.ContextMenu.currentBlock==this&&t.ContextMenu.hide(),n&&this.rendered&&(this.unplug(e),t.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]);this.warningTextDb_=null}for(n=this.getIcons(),d=0;d<n.length;d++)n[d].dispose();t.BlockSvg.superClass_.dispose.call(this,!!e),t.utils.dom.removeNode(this.svgGroup_),a.resizeContents(),this.svgGroup_=null,t.utils.dom.stopTextWidthCache()}},t.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var e=t.Xml.blockToDom(this,!0);t.Xml.deleteNext(e);var n=this.getRelativeToSurfaceXY();return e.setAttribute("x",this.RTL?-n.x:n.x),e.setAttribute("y",n.y),{xml:e,source:this.workspace,typeCounts:t.utils.getBlockTypeCounts(this,!0)}},t.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var e=this.getIcons(),n=0;n<e.length;n++)e[n].applyColour();for(e=0;n=this.inputList[e];e++)for(var d,a=0;d=n.fieldRow[a];a++)d.applyColour()},t.BlockSvg.prototype.updateDisabled=function(){var e=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var a,n=0;a=e[n];n++)a.rendered&&a.updateDisabled()},t.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},t.BlockSvg.prototype.setCommentText=function(e){if(!t.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(t.BlockSvg.superClass_.setCommentText.call(this,e),!!this.commentIcon_==(e=null!=e)?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new t.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},t.BlockSvg.prototype.setWarningText=function(e,n){if(!t.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var a=n||"";if(a)this.warningTextDb_[a]&&(clearTimeout(this.warningTextDb_[a]),delete this.warningTextDb_[a]);else for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]),delete this.warningTextDb_[d];if(this.workspace.isDragging()){var C=this;this.warningTextDb_[a]=setTimeout(function(){C.workspace&&(delete C.warningTextDb_[a],C.setWarningText(e,a))},100)}else{if(this.isInFlyout&&(e=null),n=!1,"string"==typeof e){d=this.getSurroundParent();for(var D=null;d;)d.isCollapsed()&&(D=d),d=d.getSurroundParent();D&&D.setWarningText(t.Msg.COLLAPSED_WARNINGS_WARNING,t.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new t.Warning(this),n=!0),this.warning.setText(e,a)}else this.warning&&!a?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",a),(d=this.warning.getText())||this.warning.dispose(),n=n!=d);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},t.BlockSvg.prototype.setMutator=function(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.setBlock(this),this.mutator=e,e.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},t.BlockSvg.prototype.setHighlighted=function(e){this.rendered&&this.pathObject.updateHighlighted(e)},t.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},t.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},t.BlockSvg.prototype.setDeleteStyle=function(e){this.pathObject.updateDraggingDelete(e)},t.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},t.BlockSvg.prototype.setColour=function(e){t.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()},t.BlockSvg.prototype.setStyle=function(e){var n=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,!n)throw Error("Invalid style name: "+e);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},t.BlockSvg.prototype.bringToFront=function(){var e=this;do{var n=e.getSvgRoot(),a=n.parentNode,d=a.childNodes;d[d.length-1]!==n&&a.appendChild(n),e=e.getParent()}while(e)},t.BlockSvg.prototype.setPreviousStatement=function(e,n){t.BlockSvg.superClass_.setPreviousStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setNextStatement=function(e,n){t.BlockSvg.superClass_.setNextStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setOutput=function(e,n){t.BlockSvg.superClass_.setOutput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setInputsInline=function(e){t.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.removeInput=function(e,n){return e=t.BlockSvg.superClass_.removeInput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.moveNumberedInputBefore=function(e,n){t.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.appendInput_=function(e,n){return e=t.BlockSvg.superClass_.appendInput_.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.setConnectionTracking=function(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(e)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;a&&(a.setTracking(e),(a=a.targetBlock())&&a.setConnectionTracking(e))}},t.BlockSvg.prototype.getConnections_=function(e){var n=[];if((e||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)){e=0;for(var a;a=this.inputList[e];e++)a.connection&&n.push(a.connection)}return n},t.BlockSvg.prototype.lastConnectionInStack=function(e){return t.BlockSvg.superClass_.lastConnectionInStack.call(this,e)},t.BlockSvg.prototype.getMatchingConnection=function(e,n){return t.BlockSvg.superClass_.getMatchingConnection.call(this,e,n)},t.BlockSvg.prototype.makeConnection_=function(e){return new t.RenderedConnection(this,e)},t.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var d,n=this.getConnections_(!1),a=0;d=n[a];a++){d.isConnected()&&d.isSuperior()&&d.targetBlock().bumpNeighbours();for(var B,C=d.neighbours(t.SNAP_RADIUS),D=0;B=C[D];D++)d.isConnected()&&B.isConnected()||B.getSourceBlock().getRootBlock()!=e&&(d.isSuperior()?B.bumpAwayFrom(d):d.bumpAwayFrom(B))}}},t.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,n=t.Events.getGroup();setTimeout(function(){t.Events.setGroup(n),e.snapToGrid(),t.Events.setGroup(!1)},t.BUMP_DELAY/2),setTimeout(function(){t.Events.setGroup(n),e.bumpNeighbours(),t.Events.setGroup(!1)},t.BUMP_DELAY)},t.BlockSvg.prototype.positionNearConnection=function(e,n){e.type!=t.connectionTypes.NEXT_STATEMENT&&e.type!=t.connectionTypes.INPUT_VALUE||this.moveBy(n.x-e.x,n.y-e.y)},t.BlockSvg.prototype.getParent=function(){return t.BlockSvg.superClass_.getParent.call(this)},t.BlockSvg.prototype.getRootBlock=function(){return t.BlockSvg.superClass_.getRootBlock.call(this)},t.BlockSvg.prototype.render=function(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,t.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}t.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},t.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.BlockSvg.prototype.updateConnectionLocations_=function(){var e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(var n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;a&&(a.moveToOffset(e),a.isConnected()&&a.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten())},t.BlockSvg.prototype.setCursorSvg=function(e){this.pathObject.setCursorSvg(e)},t.BlockSvg.prototype.setMarkerSvg=function(e){this.pathObject.setMarkerSvg(e)},t.BlockSvg.prototype.getHeightWidth=function(){var e=this.height,n=this.width,a=this.getNextBlock();if(a){a=a.getHeightWidth();var d=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=a.height-d,n=Math.max(n,a.width)}return{height:e,width:n}},t.BlockSvg.prototype.fadeForReplacement=function(e){this.pathObject.updateReplacementFade(e)},t.BlockSvg.prototype.highlightShapeForInput=function(e,n){this.pathObject.updateShapeForInputHighlight(e,n)},t.ConnectionDB=function(e){this.connections_=[],this.connectionChecker_=e},t.ConnectionDB.prototype.addConnection=function(e,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,e)},t.ConnectionDB.prototype.findIndexOfConnection_=function(e,n){if(!this.connections_.length)return-1;var a=this.calculateIndexForYPos_(n);if(a>=this.connections_.length)return-1;n=e.y;for(var d=a;0<=d&&this.connections_[d].y==n;){if(this.connections_[d]==e)return d;d--}for(d=a;d<this.connections_.length&&this.connections_[d].y==n;){if(this.connections_[d]==e)return d;d++}return-1},t.ConnectionDB.prototype.calculateIndexForYPos_=function(e){if(!this.connections_.length)return 0;for(var n=0,a=this.connections_.length;n<a;){var d=Math.floor((n+a)/2);if(this.connections_[d].y<e)n=d+1;else{if(!(this.connections_[d].y>e)){n=d;break}a=d}}return n},t.ConnectionDB.prototype.removeConnection=function(e,n){if(-1==(e=this.findIndexOfConnection_(e,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(e,1)},t.ConnectionDB.prototype.getNeighbours=function(e,n){function a(be){var se=C-d[be].x,Ie=D-d[be].y;return Math.sqrt(se*se+Ie*Ie)<=n&&oe.push(d[be]),Ie<n}var d=this.connections_,C=e.x,D=e.y;e=0;for(var B=d.length-2,z=B;e<z;)d[z].y<D?e=z:B=z,z=Math.floor((e+B)/2);var oe=[];if(B=e=z,d.length){for(;0<=e&&a(e);)e--;do{B++}while(B<d.length&&a(B))}return oe},t.ConnectionDB.prototype.isInYRange_=function(e,n,a){return Math.abs(this.connections_[e].y-n)<=a},t.ConnectionDB.prototype.searchForClosest=function(e,n,a){if(!this.connections_.length)return{connection:null,radius:n};var d=e.y,C=e.x;e.x=C+a.x,e.y=d+a.y;var D=this.calculateIndexForYPos_(e.y);a=null;for(var z,B=n,oe=D-1;0<=oe&&this.isInYRange_(oe,e.y,n);)this.connectionChecker_.canConnect(e,z=this.connections_[oe],!0,B)&&(a=z,B=z.distanceFrom(e)),oe--;for(;D<this.connections_.length&&this.isInYRange_(D,e.y,n);)this.connectionChecker_.canConnect(e,z=this.connections_[D],!0,B)&&(a=z,B=z.distanceFrom(e)),D++;return e.x=C,e.y=d,{connection:a,radius:B}},t.ConnectionDB.init=function(e){var n=[];return n[t.connectionTypes.INPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.OUTPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.NEXT_STATEMENT]=new t.ConnectionDB(e),n[t.connectionTypes.PREVIOUS_STATEMENT]=new t.ConnectionDB(e),n},t.Events.ThemeChange=function(e,n){t.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=e},t.utils.object.inherits(t.Events.ThemeChange,t.Events.UiBase),t.Events.ThemeChange.prototype.type=t.Events.THEME_CHANGE,t.Events.ThemeChange.prototype.toJson=function(){var e=t.Events.ThemeChange.superClass_.toJson.call(this);return e.themeName=this.themeName,e},t.Events.ThemeChange.prototype.fromJson=function(e){t.Events.ThemeChange.superClass_.fromJson.call(this,e),this.themeName=e.themeName},t.registry.register(t.registry.Type.EVENT,t.Events.THEME_CHANGE,t.Events.ThemeChange),t.Events.ViewportChange=function(e,n,a,d,C){t.Events.ViewportChange.superClass_.constructor.call(this,d),this.viewTop=e,this.viewLeft=n,this.scale=a,this.oldScale=C},t.utils.object.inherits(t.Events.ViewportChange,t.Events.UiBase),t.Events.ViewportChange.prototype.type=t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange.prototype.toJson=function(){var e=t.Events.ViewportChange.superClass_.toJson.call(this);return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e},t.Events.ViewportChange.prototype.fromJson=function(e){t.Events.ViewportChange.superClass_.fromJson.call(this,e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale},t.registry.register(t.registry.Type.EVENT,t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange),t.IMetricsManager=function(){},t.MetricsManager=function(e){this.workspace_=e},t.MetricsManager.prototype.getDimensionsPx_=function(e){var n=0,a=0;return e&&(n=e.getWidth(),a=e.getHeight()),new t.utils.Size(n,a)},t.MetricsManager.prototype.getFlyoutMetrics=function(e){return{width:(e=this.getDimensionsPx_(this.workspace_.getFlyout(e))).width,height:e.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getToolboxMetrics=function(){var e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},t.MetricsManager.prototype.getAbsoluteMetrics=function(){var e=0,n=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),d=!!this.workspace_.getToolbox(),C=!!this.workspace_.getFlyout(!0),D=d?n.position:a.position,B=D==t.utils.toolbox.Position.LEFT;return D=D==t.utils.toolbox.Position.TOP,d&&B?e=n.width:C&&B&&(e=a.width),B=0,d&&D?B=n.height:C&&D&&(B=a.height),{top:B,left:e}},t.MetricsManager.prototype.getViewMetrics=function(e){e=e?this.workspace_.scale:1;var n=this.getSvgMetrics(),a=this.getToolboxMetrics(),d=this.getFlyoutMetrics(!0),C=this.workspace_.getToolbox()?a.position:d.position;return this.workspace_.getToolbox()?C==t.utils.toolbox.Position.TOP||C==t.utils.toolbox.Position.BOTTOM?n.height-=a.height:(C==t.utils.toolbox.Position.LEFT||C==t.utils.toolbox.Position.RIGHT)&&(n.width-=a.width):this.workspace_.getFlyout(!0)&&(C==t.utils.toolbox.Position.TOP||C==t.utils.toolbox.Position.BOTTOM?n.height-=d.height:(C==t.utils.toolbox.Position.LEFT||C==t.utils.toolbox.Position.RIGHT)&&(n.width-=d.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}},t.MetricsManager.prototype.getContentMetrics=function(e){e=e?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*e,width:(n.right-n.left)*e,top:n.top*e,left:n.left*e}},t.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},t.MetricsManager.prototype.getComputedFixedEdges_=function(e){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),a=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);var d={};return a||(d.top=e.top,d.bottom=e.top+e.height),n||(d.left=e.left,d.right=e.left+e.width),d},t.MetricsManager.prototype.getPaddedContent_=function(e,n){var a=n.top+n.height,d=n.left+n.width,C=e.width,D=C/2,B=(e=e.height)/2;return{top:Math.min(n.top-B,a-e),bottom:Math.max(a+B,n.top+e),left:Math.min(n.left-D,d-C),right:Math.max(d+D,n.left+C)}},t.MetricsManager.prototype.getScrollMetrics=function(e,n,a){e=e?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var d=a||this.getContentMetrics();a=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,d);var C=void 0!==a.left?a.left:n.left;return{top:(d=void 0!==a.top?a.top:n.top)/e,left:C/e,width:((void 0!==a.right?a.right:n.right)-C)/e,height:((void 0!==a.bottom?a.bottom:n.bottom)-d)/e}},t.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},t.MetricsManager.prototype.getMetrics=function(){var e=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),a=this.getSvgMetrics(),d=this.getAbsoluteMetrics(),C=this.getViewMetrics(),D=this.getContentMetrics(),B=this.getScrollMetrics(!1,C,D);return{contentHeight:D.height,contentWidth:D.width,contentTop:D.top,contentLeft:D.left,scrollHeight:B.height,scrollWidth:B.width,scrollTop:B.top,scrollLeft:B.left,viewHeight:C.height,viewWidth:C.width,viewTop:C.top,viewLeft:C.left,absoluteTop:d.top,absoluteLeft:d.left,svgHeight:a.height,svgWidth:a.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:n.width,flyoutHeight:n.height}},t.registry.register(t.registry.Type.METRICS_MANAGER,t.registry.DEFAULT,t.MetricsManager),t.FlyoutMetricsManager=function(e,n){this.flyout_=n,t.FlyoutMetricsManager.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.FlyoutMetricsManager,t.MetricsManager),t.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var e=this.workspace_.getCanvas().getBBox()}catch(n){e={height:0,y:0,width:0,x:0}}return e},t.FlyoutMetricsManager.prototype.getContentMetrics=function(e){var n=this.getBoundingBox_();return{height:n.height*(e=e?1:this.workspace_.scale),width:n.width*e,top:n.y*e,left:n.x*e}},t.FlyoutMetricsManager.prototype.getScrollMetrics=function(e,n,a){return{height:((n=a||this.getContentMetrics()).height+2*(a=this.flyout_.MARGIN*this.workspace_.scale))/(e=e?this.workspace_.scale:1),width:(n.width+n.left+a)/e,top:0,left:0}},t.ThemeManager=function(e,n){this.workspace_=e,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},t.ThemeManager.prototype.getTheme=function(){return this.theme_},t.ThemeManager.prototype.setTheme=function(e){var a,n=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(n&&t.utils.dom.removeClass(e,n.getClassName()),t.utils.dom.addClass(e,this.theme_.getClassName())),n=0;e=this.subscribedWorkspaces_[n];n++)e.refreshTheme();for(n=0,e=Object.keys(this.componentDB_);a=e[n];n++)for(var C,d=0;C=this.componentDB_[a][d];d++){var D=C.element;C=C.propertyName;var B=this.theme_&&this.theme_.getComponentStyle(a);D.style[C]=B||""}t.hideChaff()},t.ThemeManager.prototype.subscribeWorkspace=function(e){this.subscribedWorkspaces_.push(e)},t.ThemeManager.prototype.unsubscribeWorkspace=function(e){if(0>(e=this.subscribedWorkspaces_.indexOf(e)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(e,1)},t.ThemeManager.prototype.subscribe=function(e,n,a){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:e,propertyName:a}),n=this.theme_&&this.theme_.getComponentStyle(n),e.style[a]=n||""},t.ThemeManager.prototype.unsubscribe=function(e){if(e)for(var d,n=Object.keys(this.componentDB_),a=0;d=n[a];a++){for(var C=this.componentDB_[d],D=C.length-1;0<=D;D--)C[D].element===e&&C.splice(D,1);this.componentDB_[d].length||delete this.componentDB_[d]}},t.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},t.TouchGesture=function(e,n){t.TouchGesture.superClass_.constructor.call(this,e,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},t.utils.object.inherits(t.TouchGesture,t.Gesture),t.TouchGesture.ZOOM_IN_MULTIPLIER=5,t.TouchGesture.ZOOM_OUT_MULTIPLIER=6,t.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,t.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&t.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},t.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=t.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},t.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&t.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&t.longStop_())},t.TouchGesture.prototype.handleMove=function(e){this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(t.Touch.isTouchEvent(e)&&this.handleTouchMove(e),t.longStop_()):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handleUp=function(e){t.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},t.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},t.TouchGesture.prototype.dispose=function(){t.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&t.browserEvents.unbind(this.onStartWrapper_)},t.TouchGesture.prototype.handleTouchStart=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,e.preventDefault())},t.TouchGesture.prototype.handleTouchMove=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(e):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handlePinch_=function(e){var n=Object.keys(this.cachedPoints_);if(n=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var a=n-this.previousScale_;a=0<a?a*t.TouchGesture.ZOOM_IN_MULTIPLIER:a*t.TouchGesture.ZOOM_OUT_MULTIPLIER;var d=this.startWorkspace_,C=t.utils.mouseToSvg(e,d.getParentSvg(),d.getInverseScreenCTM());d.zoom(C.x,C.y,a)}this.previousScale_=n,e.preventDefault()},t.TouchGesture.prototype.handleTouchEnd=function(e){e=t.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},t.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new t.utils.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},t.WorkspaceAudio=function(e){this.parentWorkspace_=e,this.SOUNDS_=Object.create(null)},t.WorkspaceAudio.prototype.lastSound_=null,t.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},t.WorkspaceAudio.prototype.load=function(e,n){if(e.length){try{var a=new t.utils.global.Audio}catch(z){return}for(var d,C=0;C<e.length;C++){var D=e[C],B=D.match(/\.(\w+)$/);if(B&&a.canPlayType("audio/"+B[1])){d=new t.utils.global.Audio(D);break}}d&&d.play&&(this.SOUNDS_[n]=d)}},t.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var n=this.SOUNDS_[e];n.volume=.01;var a=n.play();if(void 0!==a?a.then(n.pause).catch(function(){}):n.pause(),t.utils.userAgent.IPAD||t.utils.userAgent.IPHONE)break}},t.WorkspaceAudio.prototype.play=function(e,n){var a=this.SOUNDS_[e];a?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<t.SOUND_LIMIT||(this.lastSound_=e,(a=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID?a:a.cloneNode()).volume=void 0===n?1:n,a.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,n)},t.WorkspaceSvg=function(e,n,a){t.WorkspaceSvg.superClass_.constructor.call(this,e),this.metricsManager_=new(t.registry.getClassFromOptions(t.registry.Type.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=e.setMetrics||t.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new t.ComponentManager,this.connectionDBList=t.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),a&&(this.workspaceDragSurface_=a),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&t.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new t.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new t.Grid(this.options.gridPattern,e.gridOptions):null,this.markerManager_=new t.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),t.Variables&&t.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_CATEGORY_NAME,t.Variables.flyoutCategory),t.VariablesDynamic&&t.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_DYNAMIC_CATEGORY_NAME,t.VariablesDynamic.flyoutCategory),t.Procedures&&t.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(t.PROCEDURE_CATEGORY_NAME,t.Procedures.flyoutCategory),this.addChangeListener(t.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new t.ThemeManager(this,this.options.theme||t.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=t.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new t.utils.Size(0,0)},t.utils.object.inherits(t.WorkspaceSvg,t.Workspace),t.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,t.WorkspaceSvg.prototype.rendered=!0,t.WorkspaceSvg.prototype.isVisible_=!0,t.WorkspaceSvg.prototype.isFlyout=!1,t.WorkspaceSvg.prototype.isMutator=!1,t.WorkspaceSvg.prototype.resizesEnabled_=!0,t.WorkspaceSvg.prototype.scrollX=0,t.WorkspaceSvg.prototype.scrollY=0,t.WorkspaceSvg.prototype.startScrollX=0,t.WorkspaceSvg.prototype.startScrollY=0,t.WorkspaceSvg.prototype.dragDeltaXY_=null,t.WorkspaceSvg.prototype.scale=1,t.WorkspaceSvg.prototype.oldScale_=1,t.WorkspaceSvg.prototype.oldTop_=0,t.WorkspaceSvg.prototype.oldLeft_=0,t.WorkspaceSvg.prototype.trashcan=null,t.WorkspaceSvg.prototype.scrollbar=null,t.WorkspaceSvg.prototype.flyout_=null,t.WorkspaceSvg.prototype.toolbox_=null,t.WorkspaceSvg.prototype.currentGesture_=null,t.WorkspaceSvg.prototype.blockDragSurface_=null,t.WorkspaceSvg.prototype.workspaceDragSurface_=null,t.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,t.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,t.WorkspaceSvg.prototype.injectionDiv_=null,t.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,t.WorkspaceSvg.prototype.targetWorkspace=null,t.WorkspaceSvg.prototype.inverseScreenCTM_=null,t.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,t.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},t.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},t.WorkspaceSvg.prototype.setMetricsManager=function(e){this.metricsManager_=e,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},t.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},t.WorkspaceSvg.prototype.setCursorSvg=function(e){this.markerManager_.setCursorSvg(e)},t.WorkspaceSvg.prototype.setMarkerSvg=function(e){this.markerManager_.setMarkerSvg(e)},t.WorkspaceSvg.prototype.getMarker=function(e){return this.markerManager_?this.markerManager_.getMarker(e):null},t.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},t.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},t.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},t.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},t.WorkspaceSvg.prototype.setTheme=function(e){e||(e=t.Themes.Classic),this.themeManager_.setTheme(e)},t.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var e=new(t.Events.get(t.Events.THEME_CHANGE))(this.getTheme().name,this.id);t.Events.fire(e)},t.WorkspaceSvg.prototype.updateBlockStyles_=function(e){for(var a,n=0;a=e[n];n++){var d=a.getStyleName();d&&(a.setStyle(d),a.mutator&&a.mutator.updateBlockStyle())}},t.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM_=e.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},t.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},t.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},t.WorkspaceSvg.prototype.getSvgXY=function(e){var n=0,a=0,d=1;(t.utils.dom.containsNode(this.getCanvas(),e)||t.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(d=this.scale);do{var C=t.utils.getRelativeXY(e);(e==this.getCanvas()||e==this.getBubbleCanvas())&&(d=1),n+=C.x*d,a+=C.y*d,e=e.parentNode}while(e&&e!=this.getParentSvg());return new t.utils.Coordinate(n,a)},t.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var e=this.cachedParentSvgSize_;return new t.utils.Size(e.width,e.height)},t.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return t.utils.getInjectionDivXY_(this.getCanvas())},t.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var e=this.svgGroup_;e;){if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=e;break}e=e.parentNode}return this.injectionDiv_},t.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(e){this.resizeHandlerWrapper_=e},t.WorkspaceSvg.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(t.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(t.registry.getClassFromOptions(t.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(e=t.registry.getClassFromOptions(t.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new e),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},t.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),t.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var e=this.getParentSvg();e&&e.parentNode&&t.utils.dom.removeNode(e.parentNode)}this.resizeHandlerWrapper_&&(t.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},t.WorkspaceSvg.prototype.newBlock=function(e,n){return new t.BlockSvg(this,e,n)},t.WorkspaceSvg.prototype.addTrashcan=function(){if(!t.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)},t.WorkspaceSvg.prototype.addZoomControls=function(){if(!t.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)},t.WorkspaceSvg.prototype.addFlyout=function(e){var n=new t.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(e)},t.WorkspaceSvg.prototype.getFlyout=function(e){return this.flyout_||e?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},t.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},t.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},t.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},t.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var C,e=this.componentManager_.getComponents(t.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),a=[],d=0;C=e[d];d++)C.position(n,a),(C=C.getBoundingRectangle())&&a.push(C);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},t.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=t.utils.getDocumentScroll();t.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},t.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setCachedParentSvgSize=function(e,n){var a=this.getParentSvg();e&&(this.cachedParentSvgSize_.width=e,a.cachedWidth_=e),n&&(this.cachedParentSvgSize_.height=n,a.cachedHeight_=n)},t.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},t.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var e=this.svgGroup_;e;){if("svg"==e.tagName){this.cachedParentSvg_=e;break}e=e.parentNode}return this.cachedParentSvg_},t.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(t.Events.isEnabled()){var e=this.scale,n=-this.scrollY,a=-this.scrollX;if(!(e==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(a-this.oldLeft_))){var d=new(t.Events.get(t.Events.VIEWPORT_CHANGE))(n,a,e,this.id,this.oldScale_);this.oldScale_=e,this.oldTop_=n,this.oldLeft_=a,t.Events.fire(d)}}},t.WorkspaceSvg.prototype.translate=function(e,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(e,n);else{var a="translate("+e+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",a),this.svgBubbleCanvas_.setAttribute("transform",a)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(e,n,this.scale),this.grid_&&this.grid_.moveTo(e,n),this.maybeFireViewportChangeEvent()},t.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var e=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",e="translate("+e.x+","+e.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",e)}},t.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),a=parseInt(this.getParentSvg().getAttribute("height"),10),d=t.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,n,a,this.scale),this.workspaceDragSurface_.translateSurface(d.x,d.y)}},t.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},t.WorkspaceSvg.prototype.getWidth=function(){var e=this.getMetrics();return e?e.viewWidth/this.scale:0},t.WorkspaceSvg.prototype.setVisible=function(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(var n=(e=this.getAllBlocks(!1)).length-1;0<=n;n--)e[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else t.hideChaff(!0)},t.WorkspaceSvg.prototype.render=function(){for(var e=this.getAllBlocks(!1),n=e.length-1;0<=n;n--)e[n].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),n=0;n<e.length;n++)e[n].render(!1);this.markerManager_.updateMarkers()},t.WorkspaceSvg.prototype.highlightBlock=function(e,n){if(void 0===n){for(var d,a=0;d=this.highlightedBlocks_[a];a++)d.setHighlighted(!1);this.highlightedBlocks_.length=0}(d=e?this.getBlockById(e):null)&&((e=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(d)&&this.highlightedBlocks_.push(d):t.utils.arrayRemove(this.highlightedBlocks_,d),d.setHighlighted(e))},t.WorkspaceSvg.prototype.paste=function(e){!this.rendered||!e.tagName||e.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e))},t.WorkspaceSvg.prototype.pasteBlock_=function(e){t.Events.disable();try{var n=t.Xml.domToBlock(e,this),a=parseInt(e.getAttribute("x"),10),d=parseInt(e.getAttribute("y"),10);if(!isNaN(a)&&!isNaN(d)){this.RTL&&(a=-a);do{e=!1;for(var B,C=this.getAllBlocks(!1),D=0;B=C[D];D++){var z=B.getRelativeToSurfaceXY();if(1>=Math.abs(a-z.x)&&1>=Math.abs(d-z.y)){e=!0;break}}if(!e){var be,oe=n.getConnections_(!1);for(D=0;be=oe[D];D++)if(be.closest(t.SNAP_RADIUS,new t.utils.Coordinate(a,d)).connection){e=!0;break}}e&&(a=this.RTL?a-t.SNAP_RADIUS:a+t.SNAP_RADIUS,d+=2*t.SNAP_RADIUS)}while(e);n.moveBy(a,d)}}finally{t.Events.enable()}t.Events.isEnabled()&&!n.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n)),n.select()},t.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){t.Events.disable();try{var n=t.WorkspaceCommentSvg.fromXml(e,this),a=parseInt(e.getAttribute("x"),10),d=parseInt(e.getAttribute("y"),10);isNaN(a)||isNaN(d)||(this.RTL&&(a=-a),n.moveBy(a+50,d+50))}finally{t.Events.enable()}t.Events.isEnabled()&&t.WorkspaceComment.fireCreateEvent(n),n.select()},t.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()},t.WorkspaceSvg.prototype.renameVariableById=function(e,n){t.WorkspaceSvg.superClass_.renameVariableById.call(this,e,n),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.deleteVariableById=function(e){t.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.createVariable=function(e,n,a){return e=t.WorkspaceSvg.superClass_.createVariable.call(this,e,n,a),this.refreshToolboxSelection(),e},t.WorkspaceSvg.prototype.recordDeleteAreas=function(){t.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},t.WorkspaceSvg.prototype.recordDragTargets=function(){var e=this.componentManager_.getComponents(t.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var a,n=0;a=e[n];n++){var d=a.getClientRect();d&&this.dragTargetAreas_.push({component:a,clientRect:d})}},t.WorkspaceSvg.prototype.getDragTarget=function(e){for(var a,n=0;a=this.dragTargetAreas_[n];n++)if(a.clientRect.contains(e.clientX,e.clientY))return a.component;return null},t.WorkspaceSvg.prototype.onMouseDown_=function(e){var n=this.getGesture(e);n&&n.handleWsStart(e,this)},t.WorkspaceSvg.prototype.startDrag=function(e,n){(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=t.utils.Coordinate.difference(n,e)},t.WorkspaceSvg.prototype.moveDrag=function(e){return(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,t.utils.Coordinate.sum(this.dragDeltaXY_,e)},t.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},t.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},t.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.isMovableHorizontally=function(){var e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())},t.WorkspaceSvg.prototype.isMovableVertically=function(){var e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())},t.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(t.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,a=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||a){var d=t.utils.getScrollDeltaPixels(e);!n||!e.ctrlKey&&a?(n=this.scrollX-d.x,a=this.scrollY-d.y,e.shiftKey&&!d.x&&(n=this.scrollX-d.y,a=this.scrollY),this.scroll(n,a)):(d=-d.y/50,n=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,d)),e.preventDefault()}}},t.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBoundedElements();if(!e.length)return new t.utils.Rect(0,0,0,0);for(var n=e[0].getBoundingRectangle(),a=1;a<e.length;a++){var d=e[a];d.isInsertionMarker&&d.isInsertionMarker()||((d=d.getBoundingRectangle()).top<n.top&&(n.top=d.top),d.bottom>n.bottom&&(n.bottom=d.bottom),d.left<n.left&&(n.left=d.left),d.right>n.right&&(n.right=d.right))}return n},t.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),t.Events.setGroup(!0);for(var d,e=this.getTopBlocks(!0),n=0,a=0;d=e[a];a++)if(d.isMovable()){var C=d.getRelativeToSurfaceXY();d.moveBy(-C.x,n-C.y),d.snapToGrid(),n=d.getRelativeToSurfaceXY().y+d.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}t.Events.setGroup(!1),this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.showContextMenu=function(e){if(!this.options.readOnly&&!this.isFlyout){var n=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),t.ContextMenu.show(e,n,this.RTL)}},t.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=t.utils.toolbox.convertToolboxDefToJson(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(t.utils.toolbox.hasCategories(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},t.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(t.mainWorkspace=this,this.setBrowserFocus())},t.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(e){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},t.WorkspaceSvg.prototype.zoom=function(e,n,a){a=Math.pow(this.options.zoomOptions.scaleSpeed,a);var d=this.scale*a;if(this.scale!=d){d>this.options.zoomOptions.maxScale?a=this.options.zoomOptions.maxScale/this.scale:d<this.options.zoomOptions.minScale&&(a=this.options.zoomOptions.minScale/this.scale);var C=this.getCanvas().getCTM(),D=this.getParentSvg().createSVGPoint();D.x=e,D.y=n,D=D.matrixTransform(C.inverse()),C=C.translate((e=D.x)*(1-a),(n=D.y)*(1-a)).scale(a),this.scrollX=C.e,this.scrollY=C.f,this.setScale(d)}},t.WorkspaceSvg.prototype.zoomCenter=function(e){var n=this.getMetrics();if(this.flyout_){var a=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else a=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(a,n,e)},t.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var a=this.getBlocksBoundingBox(),d=a.right-a.left;if(a=a.bottom-a.top,d){this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.getHeight(),a+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),d+=this.flyout_.getWidth()/this.scale)),n/=d,e/=a,t.Events.disable();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{t.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.beginCanvasTransition=function(){t.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.endCanvasTransition=function(){t.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var e=this.getMetrics(),n=(e.scrollWidth-e.viewWidth)/2,a=(e.scrollHeight-e.viewHeight)/2;this.scroll(n=-n-e.scrollLeft,a=-a-e.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.centerOnBlock=function(e){if(this.isMovable()){if(e=e?this.getBlockById(e):null){var n=e.getRelativeToSurfaceXY(),a=e.getHeightWidth(),d=this.scale;e=(n.x+(this.RTL?-1:1)*a.width/2)*d,n=(n.y+a.height/2)*d,a=this.getMetrics(),this.scroll(-(e-a.viewWidth/2),-(n-a.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,t.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))},t.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},t.WorkspaceSvg.prototype.scroll=function(e,n){t.hideChaff(!0);var a=this.getMetrics();e=Math.min(e,-a.scrollLeft),n=Math.min(n,-a.scrollTop);var d=a.scrollTop+Math.max(0,a.scrollHeight-a.viewHeight);e=Math.max(e,-(a.scrollLeft+Math.max(0,a.scrollWidth-a.viewWidth))),n=Math.max(n,-d),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+a.scrollLeft),-(n+a.scrollTop),!1),this.translate(e+=a.absoluteLeft,n+=a.absoluteTop)},t.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(e){var n=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*e.x)),"number"==typeof e.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*e.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},t.WorkspaceSvg.prototype.getBlockById=function(e){return t.WorkspaceSvg.superClass_.getBlockById.call(this,e)},t.WorkspaceSvg.prototype.getTopBlocks=function(e){return t.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},t.WorkspaceSvg.prototype.addTopBlock=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopBlock.call(this,e)},t.WorkspaceSvg.prototype.removeTopBlock=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopBlock.call(this,e)},t.WorkspaceSvg.prototype.addTopComment=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopComment.call(this,e)},t.WorkspaceSvg.prototype.removeTopComment=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopComment.call(this,e)},t.WorkspaceSvg.prototype.addTopBoundedElement=function(e){this.topBoundedElements_.push(e)},t.WorkspaceSvg.prototype.removeTopBoundedElement=function(e){t.utils.arrayRemove(this.topBoundedElements_,e)},t.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},t.WorkspaceSvg.prototype.setResizesEnabled=function(e){var n=!this.resizesEnabled_&&e;this.resizesEnabled_=e,n&&this.resizeContents()},t.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),t.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.registerButtonCallback=function(e,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[e]=n},t.WorkspaceSvg.prototype.getButtonCallback=function(e){return(e=this.flyoutButtonCallbacks_[e])?e:null},t.WorkspaceSvg.prototype.removeButtonCallback=function(e){this.flyoutButtonCallbacks_[e]=null},t.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(e,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[e]=n},t.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(e){return this.toolboxCategoryCallbacks_[e]||null},t.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(e){this.toolboxCategoryCallbacks_[e]=null},t.WorkspaceSvg.prototype.getGesture=function(e){var n="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,a=this.currentGesture_;return a?n&&a.hasStarted()?(console.warn("Tried to start the same gesture twice."),a.cancel(),null):a:n?this.currentGesture_=new t.TouchGesture(e,this):null},t.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},t.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},t.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},t.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},t.inject=function(e,n){if(t.checkBlockColourConstants(),"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!t.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");n=new t.Options(n||{});var a=document.createElement("div");a.className="injectionDiv",a.tabIndex=0,t.utils.aria.setState(a,t.utils.aria.State.LABEL,t.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(a),e=t.createDom_(a,n);var d=new t.BlockDragSurfaceSvg(a),C=new t.WorkspaceDragSurfaceSvg(a),D=t.createMainWorkspace_(e,n,d,C);return t.init_(D),t.mainWorkspace=D,t.svgResize(D),a.addEventListener("focusin",function(){t.mainWorkspace=D}),D},t.createDom_=function(e,n){e.setAttribute("dir","LTR"),t.Css.inject(n.hasCss,n.pathToMedia),e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var a=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),d=String(Math.random()).substring(2);return n.gridPattern=t.Grid.createDom(d,n.gridOptions,a),e},t.createMainWorkspace_=function(e,n,a,d){return n.parentWorkspace=null,(n=new t.WorkspaceSvg(n,a,d)).scale=(a=n.options).zoomOptions.startScale,e.appendChild(n.createDom("blocklyMainBackground")),t.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),t.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!a.hasCategories&&a.languageTree&&(d=n.addFlyout(t.utils.Svg.SVG),t.utils.dom.insertAfter(d,e)),a.hasTrashcan&&n.addTrashcan(),a.zoomOptions&&a.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(t.bumpIntoBoundsHandler_(n)),t.svgResize(n),t.WidgetDiv.createDom(),t.DropDownDiv.createDom(),t.Tooltip.createDom(),n},t.extractObjectFromEvent_=function(e,n){var a=null;switch(n.type){case t.Events.BLOCK_CREATE:case t.Events.BLOCK_MOVE:(a=e.getBlockById(n.blockId))&&(a=a.getRootBlock());break;case t.Events.COMMENT_CREATE:case t.Events.COMMENT_MOVE:a=e.getCommentById(n.commentId)}return a},t.bumpTopObjectsIntoBounds_=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);for(var C,a=e.getTopBoundedElements(),d=0;C=a[d];d++)t.bumpObjectIntoBounds_(e,n,C)}},t.bumpIntoBoundsHandler_=function(e){return function(n){var a=e.getMetricsManager();if(a.hasFixedEdges()&&!e.isDragging())if(-1!==t.Events.BUMP_EVENTS.indexOf(n.type)){a=a.getScrollMetrics(!0);var d=t.extractObjectFromEvent_(e,n);if(d){var C=t.Events.getGroup();t.Events.setGroup(n.group),t.bumpObjectIntoBounds_(e,a,d)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==C&&t.Events.setGroup(C)}}else n.type===t.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&t.bumpTopObjectsIntoBounds_(e)}},t.bumpObjectIntoBounds_=function(e,n,a){var d=a.getBoundingRectangle(),C=d.right-d.left,D=t.utils.math.clamp(n.top,d.top,n.top+n.height-(d.bottom-d.top))-d.top,B=n.left;return n=n.left+n.width-C,e.RTL?B=Math.min(n,B):n=Math.max(B,n),!(!(e=t.utils.math.clamp(B,d.left,n)-d.left)&&!D||(a.moveBy(e,D),0))},t.init_=function(e){var n=e.options,a=e.getParentSvg();if(t.browserEvents.conditionalBind(a.parentNode,"contextmenu",null,function(C){t.utils.isTargetInput(C)||C.preventDefault()}),a=t.browserEvents.conditionalBind(window,"resize",null,function(){t.hideChaff(!0),t.svgResize(e),t.bumpTopObjectsIntoBounds_(e)}),e.setResizeHandlerWrapper(a),t.inject.bindDocumentEvents_(),n.languageTree){a=e.getToolbox();var d=e.getFlyout(!0);a?a.init():d&&(d.init(e),d.show(n.languageTree),"function"==typeof d.scrollToStart&&d.scrollToStart())}n.hasTrashcan&&e.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new t.ScrollbarPair(e,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&t.inject.loadSounds_(n.pathToMedia,e)},t.inject.bindDocumentEvents_=function(){t.documentEventsBound_||(t.browserEvents.conditionalBind(document,"scroll",null,function(){for(var a,e=t.Workspace.getAll(),n=0;a=e[n];n++)a.updateInverseScreenCTM&&a.updateInverseScreenCTM()}),t.browserEvents.conditionalBind(document,"keydown",null,t.onKeyDown),t.browserEvents.bind(document,"touchend",null,t.longStop_),t.browserEvents.bind(document,"touchcancel",null,t.longStop_),t.utils.userAgent.IPAD&&t.browserEvents.conditionalBind(window,"orientationchange",document,function(){t.svgResize(t.getMainWorkspace())})),t.documentEventsBound_=!0},t.inject.loadSounds_=function(e,n){var a=n.getAudioManager();a.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),a.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),a.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var d=[];e=function(){for(;d.length;)t.browserEvents.unbind(d.pop());a.preload()},d.push(t.browserEvents.conditionalBind(document,"mousemove",null,e,!0)),d.push(t.browserEvents.conditionalBind(document,"touchstart",null,e,!0))},t.Names=function(e,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),e)for(e=e.split(","),n=0;n<e.length;n++)this.reservedDict_[e[n]]=!0;this.reset()},t.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",t.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},t.Names.prototype.setVariableMap=function(e){this.variableMap_=e},t.Names.prototype.getNameForUserVariable_=function(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},t.Names.prototype.populateVariables=function(e){e=t.Variables.allUsedVarModels(e);for(var n=0;n<e.length;n++)this.getName(e[n].getId(),t.VARIABLE_CATEGORY_NAME)},t.Names.prototype.populateProcedures=function(e){e=(e=t.Procedures.allProcedures(e))[0].concat(e[1]);for(var n=0;n<e.length;n++)this.getName(e[n][0],t.PROCEDURE_CATEGORY_NAME)},t.Names.prototype.getName=function(e,n){var a=e;n==t.VARIABLE_CATEGORY_NAME&&(e=this.getNameForUserVariable_(e))&&(a=e),e=a.toLowerCase();var d=n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var C=this.db_[n];return e in C?d+C[e]:(n=this.getDistinctName(a,n),C[e]=n.substr(d.length),n)},t.Names.prototype.getUserNames=function(e){return Object.keys(this.db_[e]||{})},t.Names.prototype.getDistinctName=function(e,n){e=this.safeName_(e);for(var a="";this.dbReverse_[e+a]||e+a in this.reservedDict_;)a=a?a+1:2;return this.dbReverse_[e+=a]=!0,(n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},t.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=t.Msg.UNNAMED_KEY||"unnamed",e},t.Names.equals=function(e,n){return e.toLowerCase()==n.toLowerCase()},t.Procedures={},t.Procedures.NAME_TYPE=t.PROCEDURE_CATEGORY_NAME,t.Procedures.DEFAULT_ARG="x",t.Procedures.allProcedures=function(e){var n=e.getBlocksByType("procedures_defnoreturn",!1).map(function(a){return a.getProcedureDef()});return e=e.getBlocksByType("procedures_defreturn",!1).map(function(a){return a.getProcedureDef()}),n.sort(t.Procedures.procTupleComparator_),e.sort(t.Procedures.procTupleComparator_),[n,e]},t.Procedures.procTupleComparator_=function(e,n){return e[0].localeCompare(n[0],void 0,{sensitivity:"base"})},t.Procedures.findLegalName=function(e,n){if(n.isInFlyout)return e;for(e=e||t.Msg.UNNAMED_KEY||"unnamed";!t.Procedures.isLegalName_(e,n.workspace,n);){var a=e.match(/^(.*?)(\d+)$/);e=a?a[1]+(parseInt(a[2],10)+1):e+"2"}return e},t.Procedures.isLegalName_=function(e,n,a){return!t.Procedures.isNameUsed(e,n,a)},t.Procedures.isNameUsed=function(e,n,a){n=n.getAllBlocks(!1);for(var d=0;d<n.length;d++)if(n[d]!=a&&n[d].getProcedureDef){var C=n[d].getProcedureDef();if(t.Names.equals(C[0],e))return!0}return!1},t.Procedures.rename=function(e){e=e.trim();var n=t.Procedures.findLegalName(e,this.getSourceBlock()),a=this.getValue();if(a!=e&&a!=n){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var d=0;d<e.length;d++)e[d].renameProcedure&&e[d].renameProcedure(a,n)}return n},t.Procedures.flyoutCategory=function(e){function n(D,B){for(var z=0;z<D.length;z++){var oe=D[z][0],be=D[z][1],se=t.utils.xml.createElement("block");se.setAttribute("type",B),se.setAttribute("gap",16);var Ie=t.utils.xml.createElement("mutation");for(Ie.setAttribute("name",oe),se.appendChild(Ie),oe=0;oe<be.length;oe++){var Ge=t.utils.xml.createElement("arg");Ge.setAttribute("name",be[oe]),Ie.appendChild(Ge)}a.push(se)}}var a=[];if(t.Blocks.procedures_defnoreturn){var d=t.utils.xml.createElement("block");d.setAttribute("type","procedures_defnoreturn"),d.setAttribute("gap",16);var C=t.utils.xml.createElement("field");C.setAttribute("name","NAME"),C.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),d.appendChild(C),a.push(d)}return t.Blocks.procedures_defreturn&&((d=t.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),(C=t.utils.xml.createElement("field")).setAttribute("name","NAME"),C.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(C),a.push(d)),t.Blocks.procedures_ifreturn&&((d=t.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),a.push(d)),a.length&&a[a.length-1].setAttribute("gap",24),n((e=t.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),a},t.Procedures.updateMutatorFlyout_=function(e){for(var C,n=[],a=e.getBlocksByType("procedures_mutatorarg",!1),d=0;C=a[d];d++)n.push(C.getFieldValue("NAME"));a=t.utils.xml.createElement("xml"),(d=t.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(C=t.utils.xml.createElement("field")).setAttribute("name","NAME"),n=t.Variables.generateUniqueNameFromOptions(t.Procedures.DEFAULT_ARG,n),n=t.utils.xml.createTextNode(n),C.appendChild(n),d.appendChild(C),a.appendChild(d),e.updateToolbox(a)},t.Procedures.mutatorOpenListener=function(e){if(e.type==t.Events.BUBBLE_OPEN&&"mutator"===e.bubbleType&&e.isOpen){var n=(e=t.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(e=e.mutator.getWorkspace(),t.Procedures.updateMutatorFlyout_(e),e.addChangeListener(t.Procedures.mutatorChangeListener_))}},t.Procedures.mutatorChangeListener_=function(e){(e.type==t.Events.BLOCK_CREATE||e.type==t.Events.BLOCK_DELETE||e.type==t.Events.BLOCK_CHANGE)&&(e=t.Workspace.getById(e.workspaceId),t.Procedures.updateMutatorFlyout_(e))},t.Procedures.getCallers=function(e,n){var a=[];n=n.getAllBlocks(!1);for(var d=0;d<n.length;d++)if(n[d].getProcedureCall){var C=n[d].getProcedureCall();C&&t.Names.equals(C,e)&&a.push(n[d])}return a},t.Procedures.mutateCallers=function(e){var C,n=t.Events.recordUndo,a=e.getProcedureDef()[0],d=e.mutationToDom(!0);for(e=t.Procedures.getCallers(a,e.workspace),a=0;C=e[a];a++){var D=C.mutationToDom();D=D&&t.Xml.domToText(D),C.domToMutation(d);var B=C.mutationToDom();D!=(B=B&&t.Xml.domToText(B))&&(t.Events.recordUndo=!1,t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(C,"mutation",null,D,B)),t.Events.recordUndo=n)}},t.Procedures.getDefinition=function(e,n){n=n.getAllBlocks(!1);for(var a=0;a<n.length;a++)if(n[a].getProcedureDef){var d=n[a].getProcedureDef();if(d&&t.Names.equals(d[0],e))return n[a]}return null},t.ShortcutRegistry=function(){t.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},t.ShortcutRegistry.modifierKeys={Shift:t.utils.KeyCodes.SHIFT,Control:t.utils.KeyCodes.CTRL,Alt:t.utils.KeyCodes.ALT,Meta:t.utils.KeyCodes.META},t.ShortcutRegistry.prototype.register=function(e,n){if(this.registry_[e.name]&&!n)throw Error('Shortcut with name "'+e.name+'" already exists.');this.registry_[e.name]=e},t.ShortcutRegistry.prototype.unregister=function(e){return this.registry_[e]?(this.removeAllKeyMappings(e),delete this.registry_[e],!0):(console.warn('Keyboard shortcut with name "'+e+'" not found.'),!1)},t.ShortcutRegistry.prototype.addKeyMapping=function(e,n,a){e=String(e);var d=this.keyMap_[e];if(d&&!a)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+d.toString());d&&a?d.unshift(n):this.keyMap_[e]=[n]},t.ShortcutRegistry.prototype.removeKeyMapping=function(e,n,a){var d=this.keyMap_[e];if(!d&&!a)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+e+'"'),!1;var C=d.indexOf(n);return-1<C?(d.splice(C,1),0==d.length&&delete this.keyMap_[e],!0):(a||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+e+'"'),!1)},t.ShortcutRegistry.prototype.removeAllKeyMappings=function(e){for(var n in this.keyMap_)this.removeKeyMapping(n,e,!0)},t.ShortcutRegistry.prototype.setKeyMap=function(e){this.keyMap_=e},t.ShortcutRegistry.prototype.getKeyMap=function(){return t.utils.object.deepMerge(Object.create(null),this.keyMap_)},t.ShortcutRegistry.prototype.getRegistry=function(){return t.utils.object.deepMerge(Object.create(null),this.registry_)},t.ShortcutRegistry.prototype.onKeyDown=function(e,n){var a=this.serializeKeyEvent_(n);if(!(a=this.getShortcutNamesByKeyCode(a)))return!1;for(var C,d=0;C=a[d];d++)if((!(C=this.registry_[C]).preconditionFn||C.preconditionFn(e))&&C.callback&&C.callback(e,n,C))return!0;return!1},t.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(e){return this.keyMap_[e]||[]},t.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(e){var a,n=[];for(a in this.keyMap_)-1<this.keyMap_[a].indexOf(e)&&n.push(a);return n},t.ShortcutRegistry.prototype.serializeKeyEvent_=function(e){var a,n="";for(a in t.ShortcutRegistry.modifierKeys)e.getModifierState(a)&&(""!=n&&(n+="+"),n+=a);return""!=n&&e.keyCode?n=n+"+"+e.keyCode:e.keyCode&&(n=e.keyCode.toString()),n},t.ShortcutRegistry.prototype.checkModifiers_=function(e){for(var d,n=t.utils.object.values(t.ShortcutRegistry.modifierKeys),a=0;d=e[a];a++)if(0>n.indexOf(d))throw Error(d+" is not a valid modifier key.")},t.ShortcutRegistry.prototype.createSerializedKey=function(e,n){var a="";if(n)for(var d in this.checkModifiers_(n),t.ShortcutRegistry.modifierKeys)-1<n.indexOf(t.ShortcutRegistry.modifierKeys[d])&&(""!=a&&(a+="+"),a+=d);return""!=a&&e?a=a+"+"+e:e&&(a=e.toString()),a},new t.ShortcutRegistry,t.VariableModel=function(e,n,a,d){this.workspace=e,this.name=n,this.type=a||"",this.id_=d||t.utils.genUid(),t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(this))},t.VariableModel.prototype.getId=function(){return this.id_},t.VariableModel.compareByName=function(e,n){return e.name.localeCompare(n.name,void 0,{sensitivity:"base"})},t.Variables={},t.Variables.NAME_TYPE=t.VARIABLE_CATEGORY_NAME,t.Variables.allUsedVarModels=function(e){var n=e.getAllBlocks(!1);e=Object.create(null);for(var a=0;a<n.length;a++){var d=n[a].getVarModels();if(d)for(var C=0;C<d.length;C++){var D=d[C],B=D.getId();B&&(e[B]=D)}}for(B in n=[],e)n.push(e[B]);return n},t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},t.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var d,n=Object.create(null),a=0;d=e[a];a++){var C=d.getDeveloperVariables;if(!C&&d.getDeveloperVars&&(C=d.getDeveloperVars,t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[d.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+d.type+"')"),t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[d.type]=!0)),C)for(d=C(),C=0;C<d.length;C++)n[d[C]]=!0}return Object.keys(n)},t.Variables.flyoutCategory=function(e){var n=[],a=document.createElement("button");return a.setAttribute("text","%{BKY_NEW_VARIABLE}"),a.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(d){t.Variables.createVariableButtonHandler(d.getTargetWorkspace())}),n.push(a),e=t.Variables.flyoutCategoryBlocks(e),n.concat(e)},t.Variables.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getVariablesOfType("")).length){var a=e[e.length-1];if(t.Blocks.variables_set){var d=t.utils.xml.createElement("block");d.setAttribute("type","variables_set"),d.setAttribute("gap",t.Blocks.math_change?8:24),d.appendChild(t.Variables.generateVariableFieldDom(a)),n.push(d)}if(t.Blocks.math_change&&((d=t.utils.xml.createElement("block")).setAttribute("type","math_change"),d.setAttribute("gap",t.Blocks.variables_get?20:8),d.appendChild(t.Variables.generateVariableFieldDom(a)),a=t.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(a),n.push(d)),t.Blocks.variables_get){e.sort(t.VariableModel.compareByName),a=0;for(var C;C=e[a];a++)(d=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(t.Variables.generateVariableFieldDom(C)),n.push(d)}}return n},t.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",t.Variables.generateUniqueName=function(e){return t.Variables.generateUniqueNameFromOptions(t.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},t.Variables.generateUniqueNameFromOptions=function(e,n){if(!n.length)return e;for(var a=t.Variables.VAR_LETTER_OPTIONS,d="",C=a.indexOf(e);;){for(var D=!1,B=0;B<n.length;B++)if(n[B].toLowerCase()==e){D=!0;break}if(!D)return e;++C==a.length&&(C=0,d=Number(d)+1),e=a.charAt(C)+d}},t.Variables.createVariableButtonHandler=function(e,n,a){var d=a||"",C=function(D){t.Variables.promptName(t.Msg.NEW_VARIABLE_TITLE,D,function(B){if(B){var z=t.Variables.nameUsedWithAnyType(B,e);if(z){if(z.type==d)var oe=t.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",z.name);else oe=(oe=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",z.name).replace("%2",z.type);t.alert(oe,function(){C(B)})}else e.createVariable(B,d),n&&n(B)}else n&&n(null)})};C("")},t.Variables.createVariable=t.Variables.createVariableButtonHandler,t.Variables.renameVariable=function(e,n,a){var d=function(C){var D=t.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);t.Variables.promptName(D,C,function(B){if(B){var z=t.Variables.nameUsedWithOtherType_(B,n.type,e);z?(z=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",z.name).replace("%2",z.type),t.alert(z,function(){d(B)})):(e.renameVariableById(n.getId(),B),a&&a(B))}else a&&a(null)})};d("")},t.Variables.promptName=function(e,n,a){t.prompt(e,n,function(d){d&&((d=d.replace(/[\s\xa0]+/g," ").trim())==t.Msg.RENAME_VARIABLE||d==t.Msg.NEW_VARIABLE)&&(d=null),a(d)})},t.Variables.nameUsedWithOtherType_=function(e,n,a){a=a.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var C,d=0;C=a[d];d++)if(C.name.toLowerCase()==e&&C.type!=n)return C;return null},t.Variables.nameUsedWithAnyType=function(e,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var d,a=0;d=n[a];a++)if(d.name.toLowerCase()==e)return d;return null},t.Variables.generateVariableFieldDom=function(e){var n=t.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=t.utils.xml.createTextNode(e.name),n.appendChild(e),n},t.Variables.getOrCreateVariablePackage=function(e,n,a,d){var C=t.Variables.getVariable(e,n,a,d);return C||(C=t.Variables.createVariable_(e,n,a,d)),C},t.Variables.getVariable=function(e,n,a,d){var C=e.getPotentialVariableMap(),D=null;if(n&&(!(D=e.getVariableById(n))&&C&&(D=C.getVariableById(n)),D))return D;if(a){if(null==d)throw Error("Tried to look up a variable by name without a type");!(D=e.getVariable(a,d))&&C&&(D=C.getVariable(a,d))}return D},t.Variables.createVariable_=function(e,n,a,d){var C=e.getPotentialVariableMap();return a||(a=t.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),C?C.createVariable(a,d,n):e.createVariable(a,d,n)},t.Variables.getAddedVariables=function(e,n){e=e.getAllVariables();var a=[];if(n.length!=e.length)for(var d=0;d<e.length;d++){var C=e[d];-1==n.indexOf(C)&&a.push(C)}return a},t.VERSION="6.20210701.0",t.mainWorkspace=null,t.selected=null,t.draggingConnections=[],t.clipboardXml_=null,t.clipboardSource_=null,t.clipboardTypeCounts_=null,t.cache3dSupported_=null,t.parentContainer=null,t.svgSize=function(e){return t.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new t.utils.Size(e.cachedWidth_,e.cachedHeight_)},t.resizeSvgContents=function(e){e.resizeContents()},t.svgResize=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;var n=e.getParentSvg(),a=e.getCachedParentSvgSize(),d=n.parentNode;if(d){var C=d.offsetWidth;d=d.offsetHeight,a.width!=C&&(n.setAttribute("width",C+"px"),e.setCachedParentSvgSize(C,null)),a.height!=d&&(n.setAttribute("height",d+"px"),e.setCachedParentSvgSize(null,d)),e.resize()}},t.onKeyDown=function(e){var n=t.mainWorkspace;n&&!(t.utils.isTargetInput(e)||n.rendered&&!n.isVisible())&&t.ShortcutRegistry.registry.onKeyDown(n,e)},t.deleteBlock=function(e){e.workspace.isFlyout||(t.Events.setGroup(!0),t.hideChaff(),e.dispose(!e.outputConnection,!0),t.Events.setGroup(!1))},t.copy=function(e){(e=e.toCopyData())&&(t.clipboardXml_=e.xml,t.clipboardSource_=e.source,t.clipboardTypeCounts_=e.typeCounts)},t.paste=function(){if(!t.clipboardXml_)return!1;var e=t.clipboardSource_;return e.isFlyout&&(e=e.targetWorkspace),!(!t.clipboardTypeCounts_||!e.isCapacityAvailable(t.clipboardTypeCounts_)||(t.Events.setGroup(!0),e.paste(t.clipboardXml_),t.Events.setGroup(!1),0))},t.duplicate=function(e){var n=t.clipboardXml_,a=t.clipboardSource_;t.copy(e),e.workspace.paste(t.clipboardXml_),t.clipboardXml_=n,t.clipboardSource_=a},t.onContextMenu_=function(e){t.utils.isTargetInput(e)||e.preventDefault()},t.hideChaff=function(e){t.Tooltip.hide(),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation();var n=!!e;t.getMainWorkspace().getComponentManager().getComponents(t.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(a){a.autoHide(n)})},t.getMainWorkspace=function(){return t.mainWorkspace},t.alert=function(e,n){alert(e),n&&n()},t.confirm=function(e,n){n(confirm(e))},t.prompt=function(e,n,a){a(prompt(e,n))},t.jsonInitFactory_=function(e){return function(){this.jsonInit(e)}},t.defineBlocksWithJsonArray=function(e){for(var n=0;n<e.length;n++){var a=e[n];if(a){var d=a.type;null==d||""===d?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(t.Blocks[d]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+d+'".'),t.Blocks[d]={init:t.jsonInitFactory_(a)})}else console.warn("Block definition #"+n+" in JSON array is "+a+". Skipping.")}},t.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},t.hueToHex=function(e){return t.utils.colour.hsvToHex(e,t.HSV_SATURATION,255*t.HSV_VALUE)},t.checkBlockColourConstants=function(){t.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),t.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),t.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),t.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),t.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),t.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),t.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),t.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),t.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),t.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),t.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),t.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),t.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),t.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),t.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),t.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},t.checkBlockColourConstant_=function(e,n,a){for(var d="Blockly",C=t,D=0;D<n.length;++D)d+="."+n[D],C&&(C=C[n[D]]);C&&C!==a&&(e=(void 0===a?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",d).replace("%2",e),console.warn(e))},t.setParentContainer=function(e){t.parentContainer=e},t.bindEvent_=t.browserEvents.bind,t.unbindEvent_=t.browserEvents.unbind,t.bindEventWithChecks_=t.browserEvents.conditionalBind,t.ALIGN_LEFT=t.constants.ALIGN.LEFT,t.ALIGN_CENTRE=t.constants.ALIGN.CENTRE,t.ALIGN_RIGHT=t.constants.ALIGN.RIGHT,t.INPUT_VALUE=t.connectionTypes.INPUT_VALUE,t.OUTPUT_VALUE=t.connectionTypes.OUTPUT_VALUE,t.NEXT_STATEMENT=t.connectionTypes.NEXT_STATEMENT,t.PREVIOUS_STATEMENT=t.connectionTypes.PREVIOUS_STATEMENT,t.DUMMY_INPUT=t.inputTypes.DUMMY,t.TOOLBOX_AT_TOP=t.utils.toolbox.Position.TOP,t.TOOLBOX_AT_BOTTOM=t.utils.toolbox.Position.BOTTOM,t.TOOLBOX_AT_LEFT=t.utils.toolbox.Position.LEFT,t.TOOLBOX_AT_RIGHT=t.utils.toolbox.Position.RIGHT,t.Events.BubbleOpen=function(e,n,a){t.Events.BubbleOpen.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isOpen=n,this.bubbleType=a},t.utils.object.inherits(t.Events.BubbleOpen,t.Events.UiBase),t.Events.BubbleOpen.prototype.type=t.Events.BUBBLE_OPEN,t.Events.BubbleOpen.prototype.toJson=function(){var e=t.Events.BubbleOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId,e},t.Events.BubbleOpen.prototype.fromJson=function(e){t.Events.BubbleOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.BUBBLE_OPEN,t.Events.BubbleOpen),t.Icon=function(e){this.block_=e,this.iconGroup_=null},t.Icon.prototype.collapseHidden=!0,t.Icon.prototype.SIZE=17,t.Icon.prototype.bubble_=null,t.Icon.prototype.iconXY_=null,t.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),t.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},t.Icon.prototype.dispose=function(){t.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},t.Icon.prototype.updateEditable=function(){},t.Icon.prototype.isVisible=function(){return!!this.bubble_},t.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||t.utils.isRightButton(e)||this.setVisible(!this.isVisible())},t.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},t.Icon.prototype.setIconLocation=function(e){this.iconXY_=e,this.isVisible()&&this.bubble_.setAnchorLocation(e)},t.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),n=t.utils.getRelativeXY(this.iconGroup_);e=new t.utils.Coordinate(e.x+n.x+this.SIZE/2,e.y+n.y+this.SIZE/2),t.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},t.Icon.prototype.getIconLocation=function(){return this.iconXY_},t.Icon.prototype.getCorrectedSize=function(){return new t.utils.Size(t.Icon.prototype.SIZE,t.Icon.prototype.SIZE-2)},t.Warning=function(e){t.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_=Object.create(null)},t.utils.object.inherits(t.Warning,t.Icon),t.Warning.prototype.collapseHidden=!1,t.Warning.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},t.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"warning")),e?this.createBubble_():this.disposeBubble_())},t.Warning.prototype.createBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.getText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},t.Warning.prototype.setText=function(e,n){this.text_[n]!=e&&(e?this.text_[n]=e:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},t.Warning.prototype.getText=function(){var n,e=[];for(n in this.text_)e.push(this.text_[n]);return e.join("\n")},t.Warning.prototype.dispose=function(){this.block_.warning=null,t.Icon.prototype.dispose.call(this)},t.Comment=function(e){t.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},t.utils.object.inherits(t.Comment,t.Icon),t.Comment.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)},t.Comment.prototype.createEditor_=function(){this.foreignObject_=t.utils.dom.createSvgElement(t.utils.Svg.FOREIGNOBJECT,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null);var e=document.createElementNS(t.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",t.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(t.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),e.appendChild(n),this.foreignObject_.appendChild(e),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=t.browserEvents.conditionalBind(n,"wheel",this,function(a){a.stopPropagation()}),this.onChangeWrapper_=t.browserEvents.conditionalBind(n,"change",this,function(a){this.cachedText_!=this.model_.text&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=t.browserEvents.conditionalBind(n,"input",this,function(a){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},t.Comment.prototype.updateEditable=function(){t.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},t.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},t.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,n=2*t.Bubble.BORDER_WIDTH,a=e.width-n;e=e.height-n,this.foreignObject_.setAttribute("width",a),this.foreignObject_.setAttribute("height",e),this.textarea_.style.width=a-4+"px",this.textarea_.style.height=e-4+"px"},t.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"comment")),(this.model_.pinned=e)?this.createBubble_():this.disposeBubble_())},t.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||t.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},t.Comment.prototype.createEditableBubble_=function(){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},t.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(t.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(t.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(t.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(t.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},t.Comment.prototype.startEdit_=function(e){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},t.Comment.prototype.getBubbleSize=function(){return this.model_.size},t.Comment.prototype.setBubbleSize=function(e,n){this.bubble_?this.bubble_.setBubbleSize(e,n):(this.model_.size.width=e,this.model_.size.height=n)},t.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},t.Comment.prototype.dispose=function(){this.block_.comment=null,t.Icon.prototype.dispose.call(this)},t.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),t.IComponent=function(){},t.IDragTarget=function(){},t.DragTarget=function(){},t.DragTarget.prototype.onDragEnter=function(e){},t.DragTarget.prototype.onDragOver=function(e){},t.DragTarget.prototype.onDragExit=function(e){},t.DragTarget.prototype.onDrop=function(e){},t.DragTarget.prototype.shouldPreventMove=function(e){return!1},t.IDeleteArea=function(){},t.DeleteArea=function(){t.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},t.utils.object.inherits(t.DeleteArea,t.DragTarget),t.DeleteArea.prototype.wouldDelete=function(e,n){return e instanceof t.BlockSvg?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!n)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_},t.DeleteArea.prototype.updateWouldDelete_=function(e){this.wouldDelete_=e},t.IFlyout=function(){},t.Flyout=function(e){t.Flyout.superClass_.constructor.call(this),e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new t.WorkspaceSvg(e),this.workspace_.setMetricsManager(new t.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=t.utils.genUid(),this.RTL=!!e.RTL,this.horizontalLayout=!1,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},t.utils.object.inherits(t.Flyout,t.DeleteArea),t.Flyout.prototype.autoClose=!0,t.Flyout.prototype.isVisible_=!1,t.Flyout.prototype.containerVisible_=!0,t.Flyout.prototype.CORNER_RADIUS=8,t.Flyout.prototype.MARGIN=t.Flyout.prototype.CORNER_RADIUS,t.Flyout.prototype.GAP_X=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.GAP_Y=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.SCROLLBAR_MARGIN=2.5,t.Flyout.prototype.width_=0,t.Flyout.prototype.height_=0,t.Flyout.prototype.dragAngleRange_=70,t.Flyout.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},t.Flyout.prototype.init=function(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new t.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET]})},t.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),t.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},t.Flyout.prototype.getWidth=function(){return this.width_},t.Flyout.prototype.getHeight=function(){return this.height_},t.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},t.Flyout.prototype.getWorkspace=function(){return this.workspace_},t.Flyout.prototype.isVisible=function(){return this.isVisible_},t.Flyout.prototype.setVisible=function(e){var n=e!=this.isVisible();this.isVisible_=e,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},t.Flyout.prototype.setContainerVisible=function(e){var n=e!=this.containerVisible_;this.containerVisible_=e,n&&this.updateDisplay_()},t.Flyout.prototype.updateDisplay_=function(){var e=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=e?"block":"none",this.workspace_.scrollbar.setContainerVisible(e)},t.Flyout.prototype.positionAt_=function(e,n,a,d){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(e,n),"svg"==this.svgGroup_.tagName?t.utils.dom.setCssTransform(this.svgGroup_,"translate("+a+"px,"+d+"px)"):this.svgGroup_.setAttribute("transform","translate("+a+","+d+")"),(e=this.workspace_.scrollbar)&&(e.setOrigin(a,d),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))},t.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,e=0;n=this.listeners_[e];e++)t.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},t.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=t.utils.toolbox.convertFlyoutDefToJsonArray(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(t.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var d,n=this.workspace_.getTopBlocks(!1),a=0;d=n[a];a++)d.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.createFlyoutInfo_=function(e){var n=[],a=[];this.permanentlyDisabled_.length=0;for(var D,d=this.horizontalLayout?this.GAP_X:this.GAP_Y,C=0;D=e[C];C++)switch(D.custom&&(D=this.getDynamicCategoryContents_(D.custom),D=t.utils.toolbox.convertFlyoutDefToJsonArray(D),e.splice.apply(e,[C,1].concat(D)),D=e[C]),D.kind.toUpperCase()){case"BLOCK":var B=D,z=this.getBlockXml_(B);D=this.createBlock_(z),B=parseInt(B.gap||z.getAttribute("gap"),10),a.push(isNaN(B)?d:B),n.push({type:"block",block:D});break;case"SEP":this.addSeparatorGap_(D,a,d);break;case"LABEL":D=this.createButton_(D,!0),n.push({type:"button",button:D}),a.push(d);break;case"BUTTON":D=this.createButton_(D,!1),n.push({type:"button",button:D}),a.push(d)}return{contents:n,gaps:a}},t.Flyout.prototype.getDynamicCategoryContents_=function(e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(e=e(this.workspace_.targetWorkspace),!Array.isArray(e))throw new TypeError("Result of toolbox category callback must be an array.");return e},t.Flyout.prototype.createButton_=function(e,n){if(!t.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new t.FlyoutButton(this.workspace_,this.targetWorkspace,e,n)},t.Flyout.prototype.createBlock_=function(e){return(e=t.Xml.domToBlock(e,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(e),e},t.Flyout.prototype.getBlockXml_=function(e){var n=null,a=e.blockxml;if(a&&"string"!=typeof a?n=a:a&&"string"==typeof a?(n=t.Xml.textToDom(a),e.blockxml=n):e.type&&((n=t.utils.xml.createElement("xml")).setAttribute("type",e.type),n.setAttribute("disabled",e.disabled),e.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},t.Flyout.prototype.addSeparatorGap_=function(e,n,a){e=parseInt(e.gap,10),!isNaN(e)&&0<n.length?n[n.length-1]=e:n.push(a)},t.Flyout.prototype.clearOldBlocks_=function(){for(var a,e=this.workspace_.getTopBlocks(!1),n=0;a=e[n];n++)a.workspace==this.workspace_&&a.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(e=this.mats_[n])&&(t.Tooltip.unbindMouseEvents(e),t.utils.dom.removeNode(e));for(n=this.mats_.length=0;e=this.buttons_[n];n++)e.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},t.Flyout.prototype.addBlockListeners_=function(e,n,a){this.listeners_.push(t.browserEvents.conditionalBind(e,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.conditionalBind(a,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.bind(e,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(e,"mouseleave",n,n.removeSelect)),this.listeners_.push(t.browserEvents.bind(a,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(a,"mouseleave",n,n.removeSelect))},t.Flyout.prototype.blockMouseDown_=function(e){var n=this;return function(a){var d=n.targetWorkspace.getGesture(a);d&&(d.setStartBlock(e),d.handleFlyoutStart(a,n))}},t.Flyout.prototype.onMouseDown_=function(e){var n=this.targetWorkspace.getGesture(e);n&&n.handleFlyoutStart(e,this)},t.Flyout.prototype.isBlockCreatable_=function(e){return e.isEnabled()},t.Flyout.prototype.createBlock=function(e){var n=null;t.Events.disable();var a=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(e)}finally{t.Events.enable()}if(t.hideChaff(),e=t.Variables.getAddedVariables(this.targetWorkspace,a),t.Events.isEnabled()){for(t.Events.setGroup(!0),a=0;a<e.length;a++){var d=e[a];t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(d))}t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},t.Flyout.prototype.initFlyoutButton_=function(e,n,a){var d=e.createDom();e.moveTo(n,a),e.show(),this.listeners_.push(t.browserEvents.conditionalBind(d,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},t.Flyout.prototype.createRect_=function(e,n,a,d,C){return(n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{"fill-opacity":0,x:n,y:a,height:d.height,width:d.width},null)).tooltip=e,t.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),e.flyoutRect_=n,this.mats_[C]=n},t.Flyout.prototype.moveRectToBlock_=function(e,n){var a=n.getHeightWidth();e.setAttribute("width",a.width),e.setAttribute("height",a.height),n=n.getRelativeToSurfaceXY(),e.setAttribute("y",n.y),e.setAttribute("x",this.RTL?n.x-a.width:n.x)},t.Flyout.prototype.filterForCapacity_=function(){for(var a,e=this.workspace_.getTopBlocks(!1),n=0;a=e[n];n++)if(-1==this.permanentlyDisabled_.indexOf(a))for(var d=this.targetWorkspace.isCapacityAvailable(t.utils.getBlockTypeCounts(a));a;)a.setEnabled(d),a=a.getNextBlock()},t.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},t.Flyout.prototype.placeNewBlock_=function(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");var a=t.Xml.blockToDom(e,!0);if(n.setResizesEnabled(!1),!(a=t.Xml.domToBlock(a,n)).getSvgRoot())throw Error("block is not rendered.");var d=n.getOriginOffsetInPixels(),C=this.workspace_.getOriginOffsetInPixels();return(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=t.utils.Coordinate.sum(C,e),(d=t.utils.Coordinate.difference(e,d)).scale(1/n.scale),a.moveBy(d.x,d.y),a},t.HorizontalFlyout=function(e){t.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout=!0},t.utils.object.inherits(t.HorizontalFlyout,t.Flyout),t.HorizontalFlyout.prototype.setMetrics_=function(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),a=n.getScrollMetrics(),d=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof e.x&&(this.workspace_.scrollX=-(a.left+(a.width-d.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},t.HorizontalFlyout.prototype.getX=function(){return 0},t.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),a=e.getViewMetrics();e=e.getToolboxMetrics();var d=this.toolboxPosition_==t.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?d?e.height:a.height-this.height_:d?0:a.height:d?0:a.height+n.top-this.height_},t.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath_(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}},t.HorizontalFlyout.prototype.setBackgroundPath_=function(e,n){var a=this.toolboxPosition_==t.utils.toolbox.Position.TOP,d=["M 0,"+(a?0:this.CORNER_RADIUS)];a?(d.push("h",e+2*this.CORNER_RADIUS),d.push("v",n),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",-e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),d.push("h",e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",n),d.push("h",-e-2*this.CORNER_RADIUS)),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))},t.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},t.HorizontalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n=n.x||n.y){var a=this.workspace_.getMetricsManager(),d=a.getScrollMetrics();n=a.getViewMetrics().left-d.left+n,this.workspace_.scrollbar.setX(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.HorizontalFlyout.prototype.layout_=function(e,n){this.workspace_.scale=this.targetWorkspace.scale;var a=this.MARGIN,d=a+this.tabWidth_;this.RTL&&(e=e.reverse());for(var D,C=0;D=e[C];C++)if("block"==D.type){for(var oe,B=(D=D.block).getDescendants(!1),z=0;oe=B[z];z++)oe.isInFlyout=!0;D.render(),B=D.getSvgRoot(),z=D.getHeightWidth(),oe=D.outputConnection?this.tabWidth_:0,D.moveBy(oe=this.RTL?d+z.width:d-oe,a),oe=this.createRect_(D,oe,a,z,C),d+=z.width+n[C],this.addBlockListeners_(B,D,oe)}else"button"==D.type&&(this.initFlyoutButton_(D.button,d,a),d+=D.button.width+n[C])},t.HorizontalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var n=this.dragAngleRange_;return e<90+n&&e>90-n||e>-90-n&&e<-90+n},t.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e9,n+e.height,-1e9,1e9):new t.utils.Rect(n,1e9,-1e9,1e9)},t.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var d,e=0,n=this.workspace_.getTopBlocks(!1),a=0;d=n[a];a++)e=Math.max(e,d.getHeightWidth().height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,this.height_!=(e+=t.Scrollbar.scrollbarThickness)){for(a=0;d=n[a];a++)d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.recordDragTargets()}},t.registry.register(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.registry.DEFAULT,t.HorizontalFlyout),t.VerticalFlyout=function(e){t.VerticalFlyout.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.VerticalFlyout,t.Flyout),t.VerticalFlyout.registryName="verticalFlyout",t.VerticalFlyout.prototype.setMetrics_=function(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),a=n.getScrollMetrics(),d=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof e.y&&(this.workspace_.scrollY=-(a.top+(a.height-d.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},t.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),a=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==t.utils.toolbox.Position.LEFT?e.width:a.width-this.width_:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:a.width:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:a.width+n.left-this.width_},t.VerticalFlyout.prototype.getY=function(){return 0},t.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}},t.VerticalFlyout.prototype.setBackgroundPath_=function(e,n){var a=this.toolboxPosition_==t.utils.toolbox.Position.RIGHT,d=e+this.CORNER_RADIUS;(d=["M "+(a?d:0)+",0"]).push("h",a?-e:e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,a?0:1,a?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",Math.max(0,n)),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,a?0:1,a?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",a?e:-e),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))},t.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},t.VerticalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n.y){var a=this.workspace_.getMetricsManager(),d=a.getScrollMetrics();n=a.getViewMetrics().top-d.top+n.y,this.workspace_.scrollbar.setY(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.VerticalFlyout.prototype.layout_=function(e,n){this.workspace_.scale=this.targetWorkspace.scale;for(var D,a=this.MARGIN,d=this.RTL?a:a+this.tabWidth_,C=0;D=e[C];C++)if("block"==D.type){for(var oe,B=(D=D.block).getDescendants(!1),z=0;oe=B[z];z++)oe.isInFlyout=!0;D.render(),B=D.getSvgRoot(),z=D.getHeightWidth(),D.moveBy(oe=D.outputConnection?d-this.tabWidth_:d,a),oe=this.createRect_(D,this.RTL?oe-z.width:oe,a,z,C),this.addBlockListeners_(B,D,oe),a+=z.height+n[C]}else"button"==D.type&&(this.initFlyoutButton_(D.button,d,a),a+=D.button.height+n[C])},t.VerticalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var n=this.dragAngleRange_;return e<n&&e>-n||e<-180+n||e>180-n},t.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e9,1e9,-1e9,n+e.width):new t.utils.Rect(-1e9,1e9,n,1e9)},t.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var d,e=0,n=this.workspace_.getTopBlocks(!1),a=0;d=n[a];a++){var C=d.getHeightWidth().width;d.outputConnection&&(C-=this.tabWidth_),e=Math.max(e,C)}for(a=0;d=this.buttons_[a];a++)e=Math.max(e,d.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,this.width_!=(e+=t.Scrollbar.scrollbarThickness)){for(a=0;d=n[a];a++){if(this.RTL){C=d.getRelativeToSurfaceXY().x;var D=e/this.workspace_.scale-this.MARGIN;d.outputConnection||(D-=this.tabWidth_),d.moveBy(D-C,0)}d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d)}if(this.RTL)for(a=0;d=this.buttons_[a];a++)n=d.getPosition().y,d.moveTo(e/this.workspace_.scale-d.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.recordDragTargets()}},t.registry.register(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.registry.DEFAULT,t.VerticalFlyout),t.FlyoutButton=function(e,n,a,d){this.workspace_=e,this.targetWorkspace_=n,this.text_=a.text,this.position_=new t.utils.Coordinate(0,0),this.isLabel_=d,this.callbackKey_=a.callbackKey||a.callbackkey,this.cssClass_=a["web-class"]||null,this.onMouseUpWrapper_=null,this.info=a},t.FlyoutButton.MARGIN_X=5,t.FlyoutButton.MARGIN_Y=2,t.FlyoutButton.prototype.width=0,t.FlyoutButton.prototype.height=0,t.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},this.workspace_.getCanvas()),!this.isLabel_)var n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var a=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),d=t.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(d+="\u200f"),a.textContent=d,this.isLabel_&&(this.svgText_=a,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var C=t.utils.style.getComputedStyle(a,"fontSize"),D=t.utils.style.getComputedStyle(a,"fontWeight"),B=t.utils.style.getComputedStyle(a,"fontFamily");return this.width=t.utils.dom.getFastTextWidthWithSizeString(a,C,D,B),d=t.utils.dom.measureFontMetrics(d,C,D,B),this.height=d.height,this.isLabel_||(this.width+=2*t.FlyoutButton.MARGIN_X,this.height+=2*t.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),a.setAttribute("x",this.width/2),a.setAttribute("y",this.height/2-d.height/2+d.baseline),this.updateTransform_(),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},t.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},t.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},t.FlyoutButton.prototype.moveTo=function(e,n){this.position_.x=e,this.position_.y=n,this.updateTransform_()},t.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},t.FlyoutButton.prototype.getPosition=function(){return this.position_},t.FlyoutButton.prototype.getButtonText=function(){return this.text_},t.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},t.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&t.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},t.FlyoutButton.prototype.onMouseUp_=function(e){(e=this.targetWorkspace_.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},t.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),t.Generator=function(e){this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},t.Generator.prototype.INFINITE_LOOP_TRAP=null,t.Generator.prototype.STATEMENT_PREFIX=null,t.Generator.prototype.STATEMENT_SUFFIX=null,t.Generator.prototype.INDENT="  ",t.Generator.prototype.COMMENT_WRAP=60,t.Generator.prototype.ORDER_OVERRIDES=[],t.Generator.prototype.isInitialized=null,t.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=t.getMainWorkspace());var n=[];this.init(e),e=e.getTopBlocks(!0);for(var d,a=0;d=e[a];a++){var C=this.blockToCode(d);Array.isArray(C)&&(C=C[0]),C&&(d.outputConnection&&(C=this.scrubNakedValue(C),this.STATEMENT_PREFIX&&!d.suppressPrefixSuffix&&(C=this.injectId(this.STATEMENT_PREFIX,d)+C),this.STATEMENT_SUFFIX&&!d.suppressPrefixSuffix&&(C+=this.injectId(this.STATEMENT_SUFFIX,d))),n.push(C))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},t.Generator.prototype.prefixLines=function(e,n){return n+e.replace(/(?!\n$)\n/g,"\n"+n)},t.Generator.prototype.allNestedComments=function(e){var n=[];e=e.getDescendants(!0);for(var a=0;a<e.length;a++){var d=e[a].getCommentText();d&&n.push(d)}return n.length&&n.push(""),n.join("\n")},t.Generator.prototype.blockToCode=function(e,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return n?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return n?"":this.blockToCode(e.getChildren(!1)[0]);var a=this[e.type];if("function"!=typeof a)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+e.type+'".');if(a=a.call(e,e),Array.isArray(a)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,a[0],n),a[1]]}if("string"==typeof a)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(a=this.injectId(this.STATEMENT_PREFIX,e)+a),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(a+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,a,n);if(null===a)return"";throw SyntaxError("Invalid code generated: "+a)},t.Generator.prototype.valueToCode=function(e,n,a){if(isNaN(a))throw TypeError("Expecting valid order from block: "+e.type);var d=e.getInputTargetBlock(n);if(!d||""===(n=this.blockToCode(d)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+d.type);if(e=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+d.type);if(!e)return"";d=!1;var C=Math.floor(a),D=Math.floor(n);if(C<=D&&(C!=D||0!=C&&99!=C))for(d=!0,C=0;C<this.ORDER_OVERRIDES.length;C++)if(this.ORDER_OVERRIDES[C][0]==a&&this.ORDER_OVERRIDES[C][1]==n){d=!1;break}return d&&(e="("+e+")"),e},t.Generator.prototype.statementToCode=function(e,n){if(e=e.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},t.Generator.prototype.addLoopTrap=function(e,n){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),e},t.Generator.prototype.injectId=function(e,n){return n=n.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+n+"'")},t.Generator.prototype.RESERVED_WORDS_="",t.Generator.prototype.addReservedWords=function(e){this.RESERVED_WORDS_+=e+","},t.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(t.Generator.prototype,"variableDB_",{get:function(){return t.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(e){t.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=e}}),t.Generator.prototype.provideFunction_=function(e,n){if(!this.definitions_[e]){var d,a=this.nameDB_.getDistinctName(e,t.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=a,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,a);d!=n;)d=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]},t.Generator.prototype.init=function(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},t.Generator.prototype.scrub_=function(e,n,a){return n},t.Generator.prototype.finish=function(e){return delete this.definitions_,delete this.functionNames_,e},t.Generator.prototype.scrubNakedValue=function(e){return e},t.IToolboxItem=function(){},t.ISelectableToolboxItem=function(){},t.ICollapsibleToolboxItem=function(){},t.ToolboxItem=function(e,n,a){this.id_=e.toolboxitemid||t.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=a||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},t.ToolboxItem.prototype.init=function(){},t.ToolboxItem.prototype.getDiv=function(){return null},t.ToolboxItem.prototype.getId=function(){return this.id_},t.ToolboxItem.prototype.getParent=function(){return null},t.ToolboxItem.prototype.getLevel=function(){return this.level_},t.ToolboxItem.prototype.isSelectable=function(){return!1},t.ToolboxItem.prototype.isCollapsible=function(){return!1},t.ToolboxItem.prototype.dispose=function(){},t.ToolboxCategory=function(e,n,a){t.ToolboxCategory.superClass_.constructor.call(this,e,n,a),this.name_=t.utils.replaceMessageReferences(e.name),this.colour_=this.getColour_(e),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(e)},t.utils.object.inherits(t.ToolboxCategory,t.ToolboxItem),t.ToolboxCategory.registrationName="category",t.ToolboxCategory.nestedPadding=19,t.ToolboxCategory.borderWidth=8,t.ToolboxCategory.defaultBackgroundColour="#57e",t.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},t.ToolboxCategory.prototype.parseContents_=function(e){var n=e.contents;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var a;a=n[e];e++)this.flyoutItems_.push(a)}},t.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},t.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),t.utils.aria.setRole(this.htmlDiv_,t.utils.aria.Role.TREEITEM),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,!1),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),t.utils.aria.setRole(this.iconDom_,t.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},t.ToolboxCategory.prototype.createContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),e},t.ToolboxCategory.prototype.createRowContainer_=function(){var e=document.createElement("div");t.utils.dom.addClass(e,this.cssConfig_.row);var n=t.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e},t.ToolboxCategory.prototype.createRowContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.rowcontentcontainer),e},t.ToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.display="inline-block",e},t.ToolboxCategory.prototype.createLabelDom_=function(e){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,t.utils.dom.addClass(n,this.cssConfig_.label),n},t.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},t.ToolboxCategory.prototype.addColourBorder_=function(e){e&&(e=t.ToolboxCategory.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)},t.ToolboxCategory.prototype.getColour_=function(e){var n=e.categorystyle||e.categoryStyle;return(e=e.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(e)},t.ToolboxCategory.prototype.getColourfromStyle_=function(e){var n=this.workspace_.getTheme();if(e&&n){if((n=n.categoryStyles[e])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""},t.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},t.ToolboxCategory.prototype.parseColour_=function(e){if(null==(e=t.utils.replaceMessageReferences(e))||""===e)return"";var n=Number(e);return isNaN(n)?(n=t.utils.colour.parse(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):t.hueToHex(n)},t.ToolboxCategory.prototype.openIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.closedicon),t.utils.dom.addClass(e,this.cssConfig_.openicon))},t.ToolboxCategory.prototype.closeIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.openicon),t.utils.dom.addClass(e,this.cssConfig_.closedicon))},t.ToolboxCategory.prototype.setVisible_=function(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},t.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},t.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},t.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var e=this;e.getParent();)if(!(e=e.getParent()).isExpanded())return!1;return!0},t.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},t.ToolboxCategory.prototype.onClick=function(e){},t.ToolboxCategory.prototype.setSelected=function(e){if(e){var n=this.parseColour_(t.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,t.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",t.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,e)},t.ToolboxCategory.prototype.setDisabled=function(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",e),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},t.ToolboxCategory.prototype.getName=function(){return this.name_},t.ToolboxCategory.prototype.getParent=function(){return this.parent_},t.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},t.ToolboxCategory.prototype.updateFlyoutContents=function(e){this.flyoutItems_=[],"string"==typeof e?this.toolboxItemDef_.custom=e:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=t.utils.toolbox.convertFlyoutDefToJsonArray(e)),this.parseContents_(this.toolboxItemDef_)},t.ToolboxCategory.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxCategory.registrationName,t.ToolboxCategory),t.ToolboxSeparator=function(e,n){t.ToolboxSeparator.superClass_.constructor.call(this,e,n),this.cssConfig_={container:"blocklyTreeSeparator"},t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig)},t.utils.object.inherits(t.ToolboxSeparator,t.ToolboxItem),t.ToolboxSeparator.registrationName="sep",t.ToolboxSeparator.prototype.init=function(){this.createDom_()},t.ToolboxSeparator.prototype.createDom_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),this.htmlDiv_=e},t.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxSeparator.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxSeparator.registrationName,t.ToolboxSeparator),t.CollapsibleToolboxCategory=function(e,n,a){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],t.CollapsibleToolboxCategory.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.CollapsibleToolboxCategory,t.ToolboxCategory),t.CollapsibleToolboxCategory.registrationName="collapsibleCategory",t.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var e=t.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return e.contents="blocklyToolboxContents",e},t.CollapsibleToolboxCategory.prototype.parseContents_=function(e){var n=e.contents,a=!0;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var d;d=n[e];e++)!t.registry.hasItem(t.registry.Type.TOOLBOX_ITEM,d.kind)||d.kind.toLowerCase()==t.ToolboxSeparator.registrationName&&a?(this.flyoutItems_.push(d),a=!0):(this.createToolboxItem_(d),a=!1)}},t.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(e){var n=e.kind;"CATEGORY"==n.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(n=t.CollapsibleToolboxCategory.registrationName),e=new(t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)},t.CollapsibleToolboxCategory.prototype.init=function(){t.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},t.CollapsibleToolboxCategory.prototype.createDom_=function(){t.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),t.utils.aria.setRole(this.subcategoriesDiv_,t.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||(t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.visibility="visible"),e.style.display="inline-block",e},t.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(e){var n=document.createElement("div");t.utils.dom.addClass(n,this.cssConfig_.contents);for(var a=0;a<e.length;a++){var d=e[a];d.init();var C=d.getDiv();n.appendChild(C),d.getClickTarget&&d.getClickTarget().setAttribute("id",d.getId())}return n},t.CollapsibleToolboxCategory.prototype.setExpanded=function(e){this.expanded_!=e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())},t.CollapsibleToolboxCategory.prototype.setVisible_=function(e){this.htmlDiv_.style.display=e?"block":"none";for(var a,n=0;a=this.getChildToolboxItems()[n];n++)a.setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},t.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},t.CollapsibleToolboxCategory.prototype.onClick=function(e){this.toggleExpanded()},t.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},t.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.CollapsibleToolboxCategory.registrationName,t.CollapsibleToolboxCategory),t.Events.ToolboxItemSelect=function(e,n,a){t.Events.ToolboxItemSelect.superClass_.constructor.call(this,a),this.oldItem=e,this.newItem=n},t.utils.object.inherits(t.Events.ToolboxItemSelect,t.Events.UiBase),t.Events.ToolboxItemSelect.prototype.type=t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect.prototype.toJson=function(){var e=t.Events.ToolboxItemSelect.superClass_.toJson.call(this);return e.oldItem=this.oldItem,e.newItem=this.newItem,e},t.Events.ToolboxItemSelect.prototype.fromJson=function(e){t.Events.ToolboxItemSelect.superClass_.fromJson.call(this,e),this.oldItem=e.oldItem,this.newItem=e.newItem},t.registry.register(t.registry.Type.EVENT,t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect),t.IAutoHideable=function(){},t.IStyleable=function(){},t.IToolbox=function(){},t.Toolbox=function(e){t.Toolbox.superClass_.constructor.call(this),this.workspace_=e,this.id="toolbox",this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=e.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},t.utils.object.inherits(t.Toolbox,t.DeleteArea),t.Toolbox.prototype.onShortcut=function(e){return!1},t.Toolbox.prototype.init=function(){var e=this.workspace_,n=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),t.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.AUTOHIDEABLE,t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET]})},t.Toolbox.prototype.createDom_=function(e){e=e.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,t.utils.aria.setRole(this.contentsDiv_,t.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n},t.Toolbox.prototype.createContainer_=function(){var e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),t.utils.dom.addClass(e,"blocklyToolboxDiv"),t.utils.dom.addClass(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e},t.Toolbox.prototype.createContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e},t.Toolbox.prototype.attachEvents_=function(e,n){e=t.browserEvents.conditionalBind(e,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(e),n=t.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},t.Toolbox.prototype.onClick_=function(e){if(t.utils.isRightButton(e)||e.target==this.HtmlDiv)t.hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(e)),t.hideChaff(!0)}t.Touch.clearTouchIdentifier()},t.Toolbox.prototype.onKeyDown_=function(e){var n=!1;switch(e.keyCode){case t.utils.KeyCodes.DOWN:n=this.selectNext_();break;case t.utils.KeyCodes.UP:n=this.selectPrevious_();break;case t.utils.KeyCodes.LEFT:n=this.selectParent_();break;case t.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()},t.Toolbox.prototype.createFlyout_=function(){var e=this.workspace_,n=new t.Options({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=e.options.toolboxPosition,new(t.registry.getClassFromOptions(e.horizontalLayout?t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)},t.Toolbox.prototype.render=function(e){this.toolboxDef_=e;for(var n=0;n<this.contents_.length;n++){var a=this.contents_[n];a&&a.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()},t.Toolbox.prototype.renderContents_=function(e){for(var d,n=document.createDocumentFragment(),a=0;d=e[a];a++)this.createToolboxItem_(d,n);this.contentsDiv_.appendChild(n)},t.Toolbox.prototype.createToolboxItem_=function(e,n){var a=e.kind;"CATEGORY"==a.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(a=t.CollapsibleToolboxCategory.registrationName),(a=t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,a.toLowerCase()))&&(e=new a(e,this),this.addToolboxItem_(e),e.init(),(a=e.getDiv())&&n.appendChild(a),e.getClickTarget&&e.getClickTarget().setAttribute("id",e.getId()))},t.Toolbox.prototype.addToolboxItem_=function(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible())for(var a,n=0;a=e.getChildToolboxItems()[n];n++)this.addToolboxItem_(a)},t.Toolbox.prototype.getToolboxItems=function(){return this.contents_},t.Toolbox.prototype.addStyle=function(e){t.utils.dom.addClass(this.HtmlDiv,e)},t.Toolbox.prototype.removeStyle=function(e){t.utils.dom.removeClass(this.HtmlDiv,e)},t.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect(),n=e.top,a=n+e.height,d=e.left;return e=d+e.width,this.toolboxPosition==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e7,a,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.BOTTOM?new t.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e7,1e7,-1e7,e):new t.utils.Rect(-1e7,1e7,d,1e7)},t.Toolbox.prototype.wouldDelete=function(e,n){return this.updateWouldDelete_(e instanceof t.BlockSvg?!e.getParent()&&e.isDeletable():e.isDeletable()),this.wouldDelete_},t.Toolbox.prototype.onDragEnter=function(e){this.updateCursorDeleteStyle_(!0)},t.Toolbox.prototype.onDragExit=function(e){this.updateCursorDeleteStyle_(!1)},t.Toolbox.prototype.onDrop=function(e){this.updateCursorDeleteStyle_(!1)},t.Toolbox.prototype.updateWouldDelete_=function(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))},t.Toolbox.prototype.updateCursorDeleteStyle_=function(e){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(n):this.removeStyle(n)},t.Toolbox.prototype.getToolboxItemById=function(e){return this.contentMap_[e]||null},t.Toolbox.prototype.getWidth=function(){return this.width_},t.Toolbox.prototype.getHeight=function(){return this.height_},t.Toolbox.prototype.getFlyout=function(){return this.flyout_},t.Toolbox.prototype.getWorkspace=function(){return this.workspace_},t.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},t.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},t.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},t.Toolbox.prototype.position=function(){var e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition==t.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==t.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())},t.Toolbox.prototype.handleToolboxItemResize=function(){var e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition==t.utils.toolbox.Position.LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition==t.utils.toolbox.Position.TOP?e.scrollY+n.height:e.scrollY),t.svgResize(e)},t.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},t.Toolbox.prototype.refreshTheme=function(){for(var e=0;e<this.contents_.length;e++){var n=this.contents_[e];n.refreshTheme&&n.refreshTheme()}},t.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},t.Toolbox.prototype.setVisible=function(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())},t.Toolbox.prototype.autoHide=function(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},t.Toolbox.prototype.setSelectedItem=function(e){var n=this.selectedItem_;!e&&!n||e&&!e.isSelectable()||(this.shouldDeselectItem_(n,e)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,e)&&null!=e&&this.selectItem_(n,e),this.updateFlyout_(n,e),this.fireSelectEvent_(n,e))},t.Toolbox.prototype.shouldDeselectItem_=function(e,n){return null!=e&&(!e.isCollapsible()||e!=n)},t.Toolbox.prototype.shouldSelectItem_=function(e,n){return null!=n&&n!=e},t.Toolbox.prototype.deselectItem_=function(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,"")},t.Toolbox.prototype.selectItem_=function(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,n.getId())},t.Toolbox.prototype.selectItemByPosition=function(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e]).isSelectable()&&this.setSelectedItem(e)},t.Toolbox.prototype.updateFlyout_=function(e,n){(e!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},t.Toolbox.prototype.fireSelectEvent_=function(e,n){var a=e&&e.getName(),d=n&&n.getName();e==n&&(d=null),e=new(t.Events.get(t.Events.TOOLBOX_ITEM_SELECT))(a,d,this.workspace_.id),t.Events.fire(e)},t.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},t.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.setExpanded(!0),!0},t.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){for(var n=this.contents_[e];n&&!n.isSelectable();)n=this.contents_[++e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},t.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){for(var n=this.contents_[e];n&&!n.isSelectable();)n=this.contents_[--e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},t.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)t.browserEvents.unbind(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),t.utils.dom.removeNode(this.HtmlDiv)},t.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),t.registry.register(t.registry.Type.TOOLBOX,t.registry.DEFAULT,t.Toolbox),t.Events.TrashcanOpen=function(e,n){t.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=e},t.utils.object.inherits(t.Events.TrashcanOpen,t.Events.UiBase),t.Events.TrashcanOpen.prototype.type=t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen.prototype.toJson=function(){var e=t.Events.TrashcanOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e},t.Events.TrashcanOpen.prototype.fromJson=function(e){t.Events.TrashcanOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen},t.registry.register(t.registry.Type.EVENT,t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen),t.IPositionable=function(){},t.uiPosition={},t.uiPosition.verticalPosition={TOP:0,BOTTOM:1},t.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},t.uiPosition.bumpDirection={UP:0,DOWN:1},t.uiPosition.getStartPositionRect=function(e,n,a,d,C,D){var B=D.scrollbar&&D.scrollbar.canScrollVertically();return e.horizontal===t.uiPosition.horizontalPosition.LEFT?(a=C.absoluteMetrics.left+a,B&&D.RTL&&(a+=t.Scrollbar.scrollbarThickness)):(a=C.absoluteMetrics.left+C.viewMetrics.width-n.width-a,B&&!D.RTL&&(a-=t.Scrollbar.scrollbarThickness)),e.vertical===t.uiPosition.verticalPosition.TOP?e=C.absoluteMetrics.top+d:(e=C.absoluteMetrics.top+C.viewMetrics.height-n.height-d,D.scrollbar&&D.scrollbar.canScrollHorizontally()&&(e-=t.Scrollbar.scrollbarThickness)),new t.utils.Rect(e,e+n.height,a,a+n.width)},t.uiPosition.getCornerOppositeToolbox=function(e,n){return{horizontal:n.toolboxMetrics.position===t.utils.toolbox.Position.LEFT||e.horizontalLayout&&!e.RTL?t.uiPosition.horizontalPosition.RIGHT:t.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===t.utils.toolbox.Position.BOTTOM?t.uiPosition.verticalPosition.TOP:t.uiPosition.verticalPosition.BOTTOM}},t.uiPosition.bumpPositionRect=function(e,n,a,d){for(var oe,C=e.left,D=e.right-e.left,B=e.bottom-e.top,z=0;oe=d[z];z++)e.intersects(oe)&&(e=new t.utils.Rect(e=a===t.uiPosition.bumpDirection.UP?oe.top-B-n:oe.bottom+n,e+B,C,C+D),z=-1);return e},t.Trashcan=function(e){t.Trashcan.superClass_.constructor.call(this),this.workspace_=e,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(e=new t.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.TOP?t.utils.toolbox.Position.BOTTOM:t.utils.toolbox.Position.TOP,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(e)):(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT?t.utils.toolbox.Position.LEFT:t.utils.toolbox.Position.RIGHT,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(e)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},t.utils.object.inherits(t.Trashcan,t.DeleteArea),t.Trashcan.prototype.WIDTH_=47,t.Trashcan.prototype.BODY_HEIGHT_=44,t.Trashcan.prototype.LID_HEIGHT_=16,t.Trashcan.prototype.MARGIN_VERTICAL_=20,t.Trashcan.prototype.MARGIN_HORIZONTAL_=20,t.Trashcan.prototype.MARGIN_HOTSPOT_=10,t.Trashcan.prototype.SPRITE_LEFT_=0,t.Trashcan.prototype.SPRITE_TOP_=32,t.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,t.Trashcan.ANIMATION_LENGTH_=80,t.Trashcan.ANIMATION_FRAMES_=4,t.Trashcan.OPACITY_MIN_=.4,t.Trashcan.OPACITY_MAX_=.8,t.Trashcan.MAX_LID_ANGLE_=45,t.Trashcan.prototype.isLidOpen=!1,t.Trashcan.prototype.minOpenness_=0,t.Trashcan.prototype.svgGroup_=null,t.Trashcan.prototype.svgLid_=null,t.Trashcan.prototype.lidTask_=0,t.Trashcan.prototype.lidOpen_=0,t.Trashcan.prototype.left_=0,t.Trashcan.prototype.top_=0,t.Trashcan.prototype.initialized_=!1,t.Trashcan.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var a=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);return a.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),t.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),t.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),t.browserEvents.bind(a,"mouseover",this,this.mouseOver_),t.browserEvents.bind(a,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},t.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(t.utils.dom.insertAfter(this.flyout.createDom(t.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.AUTOHIDEABLE,t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET,t.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},t.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},t.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},t.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},t.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var e=this.contents_.map(t.Xml.textToDom);this.flyout.show(e),this.fireUiEvent_(!0)}},t.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},t.Trashcan.prototype.autoHide=function(e){!e&&this.flyout&&this.closeFlyout()},t.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},t.Trashcan.prototype.position=function(e,n){if(this.initialized_){var a=t.uiPosition.getCornerOppositeToolbox(this.workspace_,e);e=t.uiPosition.getStartPositionRect(a,new t.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,e,this.workspace_),n=t.uiPosition.bumpPositionRect(e,this.MARGIN_VERTICAL_,a.vertical===t.uiPosition.verticalPosition.TOP?t.uiPosition.bumpDirection.DOWN:t.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.Trashcan.prototype.getBoundingRectangle=function(){return new t.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},t.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new t.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,e=e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,e+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},t.Trashcan.prototype.onDragOver=function(e){this.setLidOpen(this.wouldDelete_)},t.Trashcan.prototype.onDragExit=function(e){this.setLidOpen(!1)},t.Trashcan.prototype.onDrop=function(e){setTimeout(this.setLidOpen.bind(this,!1),100)},t.Trashcan.prototype.setLidOpen=function(e){this.isLidOpen!=e&&(clearTimeout(this.lidTask_),this.isLidOpen=e,this.animateLid_())},t.Trashcan.prototype.animateLid_=function(){var e=t.Trashcan.ANIMATION_FRAMES_,n=1/(e+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*t.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=t.Trashcan.OPACITY_MIN_)+this.lidOpen_*(t.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),t.Trashcan.ANIMATION_LENGTH_/e))},t.Trashcan.prototype.setLidAngle_=function(e){var n=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},t.Trashcan.prototype.setMinOpenness_=function(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*t.Trashcan.MAX_LID_ANGLE_)},t.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},t.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},t.Trashcan.prototype.fireUiEvent_=function(e){e=new(t.Events.get(t.Events.TRASHCAN_OPEN))(e,this.workspace_.id),t.Events.fire(e)},t.Trashcan.prototype.blockMouseDownWhenOpenable_=function(e){!this.contentsIsOpen()&&this.hasContents_()&&e.stopPropagation()},t.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},t.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},t.Trashcan.prototype.onDelete_=function(e){if(!(0>=this.workspace_.options.maxTrashcanContents)&&e.type==t.Events.BLOCK_DELETE&&e.oldXml.tagName&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},t.Trashcan.prototype.cleanBlockXML_=function(e){for(var n=e=e.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var a=n.firstChild||n.nextSibling;if(!a)for(a=n.parentNode;a;){if(a.nextSibling){a=a.nextSibling;break}a=a.parentNode}n=a}return t.Xml.domToText(e)},t.VariablesDynamic={},t.VariablesDynamic.onCreateVariableButtonClick_String=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},t.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},t.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},t.VariablesDynamic.flyoutCategory=function(e){var n=[],a=document.createElement("button");return a.setAttribute("text",t.Msg.NEW_STRING_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(a),(a=document.createElement("button")).setAttribute("text",t.Msg.NEW_NUMBER_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(a),(a=document.createElement("button")).setAttribute("text",t.Msg.NEW_COLOUR_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(a),e.registerButtonCallback("CREATE_VARIABLE_STRING",t.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",t.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",t.VariablesDynamic.onCreateVariableButtonClick_Colour),e=t.VariablesDynamic.flyoutCategoryBlocks(e),n.concat(e)},t.VariablesDynamic.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getAllVariables()).length){if(t.Blocks.variables_set_dynamic){var a=e[e.length-1],d=t.utils.xml.createElement("block");d.setAttribute("type","variables_set_dynamic"),d.setAttribute("gap",24),d.appendChild(t.Variables.generateVariableFieldDom(a)),n.push(d)}if(t.Blocks.variables_get_dynamic){e.sort(t.VariableModel.compareByName),a=0;for(var C;C=e[a];a++)(d=t.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),d.setAttribute("gap",8),d.appendChild(t.Variables.generateVariableFieldDom(C)),n.push(d)}}return n},t.ZoomControls=function(e){this.workspace_=e,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},t.ZoomControls.prototype.WIDTH_=32,t.ZoomControls.prototype.HEIGHT_=32,t.ZoomControls.prototype.SMALL_SPACING_=2,t.ZoomControls.prototype.LARGE_SPACING_=11,t.ZoomControls.prototype.MARGIN_VERTICAL_=20,t.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,t.ZoomControls.prototype.svgGroup_=null,t.ZoomControls.prototype.left_=0,t.ZoomControls.prototype.top_=0,t.ZoomControls.prototype.initialized_=!1,t.ZoomControls.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},t.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[t.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},t.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&t.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&t.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&t.browserEvents.unbind(this.onZoomOutWrapper_)},t.ZoomControls.prototype.getBoundingRectangle=function(){var e=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(e+=this.LARGE_SPACING_+this.HEIGHT_),new t.utils.Rect(this.top_,this.top_+e,this.left_,this.left_+this.WIDTH_)},t.ZoomControls.prototype.position=function(e,n){if(this.initialized_){var a=t.uiPosition.getCornerOppositeToolbox(this.workspace_,e),d=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(d+=this.LARGE_SPACING_+this.HEIGHT_),e=t.uiPosition.getStartPositionRect(a,new t.utils.Size(this.WIDTH_,d),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,e,this.workspace_),n=t.uiPosition.bumpPositionRect(e,this.MARGIN_VERTICAL_,(a=a.vertical)===t.uiPosition.verticalPosition.TOP?t.uiPosition.bumpDirection.DOWN:t.uiPosition.bumpDirection.UP,n),a===t.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(a=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(a+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(a=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(a+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.ZoomControls.prototype.createZoomOutSvg_=function(e){this.zoomOutGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomOutWrapper_=t.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},t.ZoomControls.prototype.createZoomInSvg_=function(e){this.zoomInGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomInWrapper_=t.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},t.ZoomControls.prototype.zoom_=function(e,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(e),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},t.ZoomControls.prototype.createZoomResetSvg_=function(e){this.zoomResetGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomResetWrapper_=t.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},t.ZoomControls.prototype.resetZoom_=function(e){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},t.ZoomControls.prototype.fireZoomEvent_=function(){var e=new(t.Events.get(t.Events.CLICK))(null,this.workspace_.id,"zoom_controls");t.Events.fire(e)},t.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),t.ShortcutItems={},t.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},t.ShortcutItems.registerEscape=function(){var e={name:t.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return t.hideChaff(),!0}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.ESC,e.name)},t.ShortcutItems.registerDelete=function(){var e={name:t.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&t.selected&&t.selected.isDeletable()},callback:function(n,a){return a.preventDefault(),!t.Gesture.inProgress()&&(t.deleteBlock(t.selected),!0)}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.DELETE,e.name),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.BACKSPACE,e.name)},t.ShortcutItems.registerCopy=function(){var e={name:t.ShortcutItems.names.COPY,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()},callback:function(a,d){return d.preventDefault(),t.hideChaff(),t.copy(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerCut=function(){var e={name:t.ShortcutItems.names.CUT,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()&&!t.selected.workspace.isFlyout},callback:function(){return t.copy(t.selected),t.deleteBlock(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerPaste=function(){var e={name:t.ShortcutItems.names.PASTE,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()},callback:function(){return t.paste()}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerUndo=function(){var e={name:t.ShortcutItems.names.UNDO,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()},callback:function(a){return t.hideChaff(),a.undo(!1),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerRedo=function(){var e={name:t.ShortcutItems.names.REDO,preconditionFn:function(a){return!t.Gesture.inProgress()&&!a.options.readOnly},callback:function(a){return t.hideChaff(),a.undo(!0),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Y,[t.utils.KeyCodes.CTRL]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerDefaultShortcuts=function(){t.ShortcutItems.registerEscape(),t.ShortcutItems.registerDelete(),t.ShortcutItems.registerCopy(),t.ShortcutItems.registerCut(),t.ShortcutItems.registerPaste(),t.ShortcutItems.registerUndo(),t.ShortcutItems.registerRedo()},t.ShortcutItems.registerDefaultShortcuts(),t.ContextMenuItems={},t.ContextMenuItems.registerUndo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.UNDO},preconditionFn:function(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(e){e.workspace.undo(!1)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},t.ContextMenuItems.registerRedo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.REDO},preconditionFn:function(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(e){e.workspace.undo(!0)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},t.ContextMenuItems.registerCleanup=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.CLEAN_UP},preconditionFn:function(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(e){e.workspace.cleanUp()},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},t.ContextMenuItems.toggleOption_=function(e,n){for(var a=0,d=0;d<n.length;d++)for(var C=n[d];C;)setTimeout(C.setCollapsed.bind(C,e),a),C=C.getNextBlock(),a+=10},t.ContextMenuItems.registerCollapse=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.COLLAPSE_ALL},preconditionFn:function(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(var n=0;n<e.length;n++)for(var a=e[n];a;){if(!a.isCollapsed())return"enabled";a=a.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!0,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},t.ContextMenuItems.registerExpand=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.EXPAND_ALL},preconditionFn:function(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(var n=0;n<e.length;n++)for(var a=e[n];a;){if(a.isCollapsed())return"enabled";a=a.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!1,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},t.ContextMenuItems.addDeletableBlocks_=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(var a=0;a<e.length;a++)t.ContextMenuItems.addDeletableBlocks_(e[a],n)}},t.ContextMenuItems.getDeletableBlocks_=function(e){var n=[];e=e.getTopBlocks(!0);for(var a=0;a<e.length;a++)t.ContextMenuItems.addDeletableBlocks_(e[a],n);return n},t.ContextMenuItems.deleteNext_=function(e,n){t.Events.setGroup(n);var a=e.shift();a&&(a.workspace?(a.dispose(!1,!0),setTimeout(t.ContextMenuItems.deleteNext_,10,e,n)):t.ContextMenuItems.deleteNext_(e,n)),t.Events.setGroup(!1)},t.ContextMenuItems.registerDeleteAll=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){if(e.workspace)return 1==(e=t.ContextMenuItems.getDeletableBlocks_(e.workspace).length)?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){if(e.workspace)return 0<t.ContextMenuItems.getDeletableBlocks_(e.workspace).length?"enabled":"disabled"},callback:function(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=t.ContextMenuItems.getDeletableBlocks_(e.workspace),a=t.utils.genUid();2>n.length?t.ContextMenuItems.deleteNext_(n,a):t.confirm(t.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(d){d&&t.ContextMenuItems.deleteNext_(n,a)})}},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},t.ContextMenuItems.registerWorkspaceOptions_=function(){t.ContextMenuItems.registerUndo(),t.ContextMenuItems.registerRedo(),t.ContextMenuItems.registerCleanup(),t.ContextMenuItems.registerCollapse(),t.ContextMenuItems.registerExpand(),t.ContextMenuItems.registerDeleteAll()},t.ContextMenuItems.registerDuplicate=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.DUPLICATE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(e){e.block&&t.duplicate(e.block)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},t.ContextMenuItems.registerComment=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getCommentIcon()?t.Msg.REMOVE_COMMENT:t.Msg.ADD_COMMENT},preconditionFn:function(e){return e=e.block,t.utils.userAgent.IE||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()?"hidden":"enabled"},callback:function(e){(e=e.block).getCommentIcon()?e.setCommentText(null):e.setCommentText("")},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},t.ContextMenuItems.registerInline=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getInputsInline()?t.Msg.EXTERNAL_INPUTS:t.Msg.INLINE_INPUTS},preconditionFn:function(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(var n=1;n<e.inputList.length;n++)if(e.inputList[n-1].type!=t.inputTypes.STATEMENT&&e.inputList[n].type!=t.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},t.ContextMenuItems.registerCollapseExpandBlock=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isCollapsed()?t.Msg.EXPAND_BLOCK:t.Msg.COLLAPSE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback:function(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},t.ContextMenuItems.registerDisable=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isEnabled()?t.Msg.DISABLE_BLOCK:t.Msg.ENABLE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(e){e=e.block;var n=t.Events.getGroup();n||t.Events.setGroup(!0),e.setEnabled(!e.isEnabled()),n||t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},t.ContextMenuItems.registerDelete=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),1==e?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback:function(e){t.Events.setGroup(!0),e.block&&t.deleteBlock(e.block),t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},t.ContextMenuItems.registerHelp=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.HELP},preconditionFn:function(e){return("function"==typeof(e=e.block).helpUrl?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback:function(e){e.block.showHelp()},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},t.ContextMenuItems.registerBlockOptions_=function(){t.ContextMenuItems.registerDuplicate(),t.ContextMenuItems.registerComment(),t.ContextMenuItems.registerInline(),t.ContextMenuItems.registerCollapseExpandBlock(),t.ContextMenuItems.registerDisable(),t.ContextMenuItems.registerDelete(),t.ContextMenuItems.registerHelp()},t.ContextMenuItems.registerDefaultOptions=function(){t.ContextMenuItems.registerWorkspaceOptions_(),t.ContextMenuItems.registerBlockOptions_()},t.ContextMenuItems.registerDefaultOptions(),t.Mutator=function(e){t.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},t.utils.object.inherits(t.Mutator,t.Icon),t.Mutator.prototype.workspace_=null,t.Mutator.prototype.workspaceWidth_=0,t.Mutator.prototype.workspaceHeight_=0,t.Mutator.prototype.setBlock=function(e){this.block_=e},t.Mutator.prototype.getWorkspace=function(){return this.workspace_},t.Mutator.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},t.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&t.Icon.prototype.iconClick_.call(this,e)},t.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var a,e=t.utils.xml.createElement("xml"),n=0;a=this.quarkNames_[n];n++){var d=t.utils.xml.createElement("block");d.setAttribute("type",a),e.appendChild(d)}else e=null;return(n=new t.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT,(a=!!e)&&(n.languageTree=t.utils.toolbox.convertToolboxDefToJson(e)),this.workspace_=new t.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(t.Events.disableOrphans),e=a?this.workspace_.addFlyout(t.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),e&&n.insertBefore(e,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},t.Mutator.prototype.updateEditable=function(){t.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&t.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},t.Mutator.prototype.resizeBubble_=function(){var e=2*t.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),a=n.width+n.x,d=n.height+3*e,C=this.workspace_.getFlyout();if(C){var D=C.getWorkspace().getMetricsManager().getScrollMetrics();d=Math.max(d,D.height+20),a+=C.getWidth()}this.block_.RTL&&(a=-n.x),a+=3*e,(Math.abs(this.workspaceWidth_-a)>e||Math.abs(this.workspaceHeight_-d)>e)&&(this.workspaceWidth_=a,this.workspaceHeight_=d,this.bubble_.setBubbleSize(a+e,d+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},t.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},t.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"mutator")),e){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),n&&(e.init(this.workspace_),e.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var d,a=0;d=n[a];a++)d.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e?(n=2*e.CORNER_RADIUS,e=this.rootBlock_.RTL?e.getWidth()+n:n):e=n=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,n),this.block_.saveConnections){var C=this,D=this.block_;D.saveConnections(this.rootBlock_),this.sourceListener_=function(){D.saveConnections(C.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},t.Mutator.prototype.workspaceChanged_=function(e){if(!(e.isUiEvent||e.type==t.Events.CHANGE&&"disabled"==e.element)){if(!this.workspace_.isDragging()){e=this.workspace_.getTopBlocks(!1);for(var a,n=0;a=e[n];n++){var d=a.getRelativeToSurfaceXY();if(20>d.y&&a.moveBy(0,20-d.y),a.RTL){var C=-20,D=this.workspace_.getFlyout();D&&(C-=D.getWidth()),d.x>C&&a.moveBy(C-d.x,0)}else 20>d.x&&a.moveBy(20-d.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(t.Events.setGroup(!0),e=(e=(a=this.block_).mutationToDom())&&t.Xml.domToText(e),n=a.rendered,a.rendered=!1,a.compose(this.rootBlock_),a.rendered=n,a.initSvg(),a.rendered&&a.render(),e!=(n=(n=a.mutationToDom())&&t.Xml.domToText(n))){t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(a,"mutation",null,e,n));var B=t.Events.getGroup();setTimeout(function(){t.Events.setGroup(B),a.bumpNeighbours(),t.Events.setGroup(!1)},t.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),t.Events.setGroup(!1)}}},t.Mutator.prototype.dispose=function(){this.block_.mutator=null,t.Icon.prototype.dispose.call(this)},t.Mutator.prototype.updateBlockStyle=function(){var e=this.workspace_;if(e&&e.getAllBlocks(!1)){for(var d,n=e.getAllBlocks(!1),a=0;d=n[a];a++)d.setStyle(d.getStyleName());if(a=e.getFlyout())for(e=a.workspace_.getAllBlocks(!1),a=0;d=e[a];a++)d.setStyle(d.getStyleName())}},t.Mutator.reconnect=function(e,n,a){if(!e||!e.getSourceBlock().workspace)return!1;a=n.getInput(a).connection;var d=e.targetBlock();return!(d&&d!=n||a.targetConnection==e||(a.isConnected()&&a.disconnect(),a.connect(e),0))},t.Mutator.findParentWs=function(e){var n=null;if(e&&e.options){var a=e.options.parentWorkspace;e.isFlyout?a&&a.options&&(n=a.options.parentWorkspace):a&&(n=a)}return n},t.FieldTextInput=function(e,n,a){this.spellcheck_=!0,t.FieldTextInput.superClass_.constructor.call(this,e,n,a),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},t.utils.object.inherits(t.FieldTextInput,t.Field),t.FieldTextInput.prototype.DEFAULT_VALUE="",t.FieldTextInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldTextInput(n,void 0,e)},t.FieldTextInput.prototype.SERIALIZABLE=!0,t.FieldTextInput.BORDERRADIUS=4,t.FieldTextInput.prototype.CURSOR="text",t.FieldTextInput.prototype.configure_=function(e){t.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},t.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var d,e=0,n=0,a=0;d=this.sourceBlock_.inputList[a];a++){for(var C=0;d.fieldRow[C];C++)e++;d.connection&&n++}this.fullBlockClickTarget_=1>=e&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},t.FieldTextInput.prototype.doClassValidation_=function(e){return null==e?null:String(e)},t.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))},t.FieldTextInput.prototype.doValueUpdate_=function(e){this.isTextValid_=!0,this.value_=e,this.isBeingEdited_||(this.isDirty_=!0)},t.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},t.FieldTextInput.prototype.render_=function(){if(t.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var e=this.htmlInput_;this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0))}},t.FieldTextInput.prototype.setSpellcheck=function(e){e!=this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},t.FieldTextInput.prototype.showEditor_=function(e,n){this.workspace_=this.sourceBlock_.workspace,!(e=n||!1)&&(t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e)},t.FieldTextInput.prototype.showPromptEditor_=function(){t.prompt(t.Msg.CHANGE_VALUE_TITLE,this.getText(),function(e){this.setValue(this.getValueFromEditorText_(e))}.bind(this))},t.FieldTextInput.prototype.showInlineEditor_=function(e){t.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},t.FieldTextInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV;t.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var a=this.workspace_.getScale(),d=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";if(e.style.fontSize=d,n.style.fontSize=d,d=t.FieldTextInput.BORDERRADIUS*a+"px",this.fullBlockClickTarget_){d=((d=this.getScaledBBox()).bottom-d.top)/2+"px";var C=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*a+"px solid "+C,e.style.borderRadius=d,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*a+"px")}return n.style.borderRadius=d,e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},t.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var e=t.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,t.utils.dom.removeClass(this.getClickTarget_(),"editing")},t.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=t.browserEvents.conditionalBind(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=t.browserEvents.conditionalBind(e,"input",this,this.onHtmlInputChange_)},t.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(t.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},t.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==t.utils.KeyCodes.ENTER?(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.TAB&&(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},t.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,t.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_(),t.Events.setGroup(!1))},t.FieldTextInput.prototype.setEditorValue_=function(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)},t.FieldTextInput.prototype.resizeEditor_=function(){var e=t.WidgetDiv.DIV,n=this.getScaledBBox();e.style.width=n.right-n.left+"px",e.style.height=n.bottom-n.top+"px",n=new t.utils.Coordinate(this.sourceBlock_.RTL?n.right-e.offsetWidth:n.left,n.top),e.style.left=n.x+"px",e.style.top=n.y+"px"},t.FieldTextInput.prototype.isTabNavigable=function(){return!0},t.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},t.FieldTextInput.prototype.getEditorText_=function(e){return String(e)},t.FieldTextInput.prototype.getValueFromEditorText_=function(e){return e},t.fieldRegistry.register("field_input",t.FieldTextInput),t.FieldAngle=function(e,n,a){this.clockwise_=t.FieldAngle.CLOCKWISE,this.offset_=t.FieldAngle.OFFSET,this.wrap_=t.FieldAngle.WRAP,this.round_=t.FieldAngle.ROUND,t.FieldAngle.superClass_.constructor.call(this,e,n,a),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},t.utils.object.inherits(t.FieldAngle,t.FieldTextInput),t.FieldAngle.prototype.DEFAULT_VALUE=0,t.FieldAngle.fromJson=function(e){return new t.FieldAngle(e.angle,void 0,e)},t.FieldAngle.prototype.SERIALIZABLE=!0,t.FieldAngle.ROUND=15,t.FieldAngle.HALF=50,t.FieldAngle.CLOCKWISE=!1,t.FieldAngle.OFFSET=0,t.FieldAngle.WRAP=360,t.FieldAngle.RADIUS=t.FieldAngle.HALF-1,t.FieldAngle.prototype.configure_=function(e){switch(t.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=e.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=e.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=e.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},t.FieldAngle.prototype.initView=function(){t.FieldAngle.superClass_.initView.call(this),this.symbol_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},t.FieldAngle.prototype.render_=function(){t.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},t.FieldAngle.prototype.showEditor_=function(e){t.FieldAngle.superClass_.showEditor_.call(this,e,t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD),this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.editor_),t.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},t.FieldAngle.prototype.dropdownCreate_=function(){var e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",height:2*t.FieldAngle.HALF+"px",width:2*t.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:t.FieldAngle.HALF,cy:t.FieldAngle.HALF,r:t.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyAngleGauge"},e),this.line_=t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF,y1:t.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var a=0;360>a;a+=15)t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF+t.FieldAngle.RADIUS,y1:t.FieldAngle.HALF,x2:t.FieldAngle.HALF+t.FieldAngle.RADIUS-(a%45==0?10:5),y2:t.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+a+","+t.FieldAngle.HALF+","+t.FieldAngle.HALF+")"},e);this.clickWrapper_=t.browserEvents.conditionalBind(e,"click",this,this.hide_),this.clickSurfaceWrapper_=t.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=t.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=e},t.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(t.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(t.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(t.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},t.FieldAngle.prototype.hide_=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hide()},t.FieldAngle.prototype.onMouseMove_=function(e){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),a=e.clientX-n.left-t.FieldAngle.HALF;e=e.clientY-n.top-t.FieldAngle.HALF,n=Math.atan(-e/a),isNaN(n)||(n=t.utils.math.toDegrees(n),0>a?n+=180:0<e&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},t.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),(e=this.wrapValue_(e))!=this.value_&&this.setEditorValue_(e)},t.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,n=t.utils.math.toRadians(e%360);e=["M ",t.FieldAngle.HALF,",",t.FieldAngle.HALF];var a=t.FieldAngle.HALF,d=t.FieldAngle.HALF;if(!isNaN(n)){var C=Number(this.clockwise_),D=t.utils.math.toRadians(this.offset_),B=Math.cos(D)*t.FieldAngle.RADIUS,z=Math.sin(D)*-t.FieldAngle.RADIUS;C&&(n=2*D-n),a+=Math.cos(n)*t.FieldAngle.RADIUS,d-=Math.sin(n)*t.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-D)/Math.PI)%2),C&&(n=1-n),e.push(" l ",B,",",z," A ",t.FieldAngle.RADIUS,",",t.FieldAngle.RADIUS," 0 ",n," ",C," ",a,",",d," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",a),this.line_.setAttribute("y2",d)}},t.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var n;if(t.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===t.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:e.keyCode===t.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:e.keyCode===t.utils.KeyCodes.DOWN?n=-1:e.keyCode===t.utils.KeyCodes.UP&&(n=1),n){var a=this.getValue();this.displayMouseOrKeyboardValue_(a+n*this.round_),e.preventDefault(),e.stopPropagation()}},t.FieldAngle.prototype.doClassValidation_=function(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)},t.FieldAngle.prototype.wrapValue_=function(e){return 0>(e%=360)&&(e+=360),e>this.wrap_&&(e-=360),e},t.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),t.fieldRegistry.register("field_angle",t.FieldAngle),t.FieldCheckbox=function(e,n,a){this.checkChar_=null,t.FieldCheckbox.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.FieldCheckbox,t.Field),t.FieldCheckbox.prototype.DEFAULT_VALUE=!1,t.FieldCheckbox.fromJson=function(e){return new t.FieldCheckbox(e.checked,void 0,e)},t.FieldCheckbox.CHECK_CHAR="\u2713",t.FieldCheckbox.prototype.SERIALIZABLE=!0,t.FieldCheckbox.prototype.CURSOR="default",t.FieldCheckbox.prototype.configure_=function(e){t.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},t.FieldCheckbox.prototype.initView=function(){t.FieldCheckbox.superClass_.initView.call(this),t.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},t.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},t.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||t.FieldCheckbox.CHECK_CHAR},t.FieldCheckbox.prototype.setCheckCharacter=function(e){this.checkChar_=e,this.forceRerender()},t.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},t.FieldCheckbox.prototype.doClassValidation_=function(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null},t.FieldCheckbox.prototype.doValueUpdate_=function(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},t.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},t.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},t.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},t.FieldCheckbox.prototype.convertValueToBool_=function(e){return"string"==typeof e?"TRUE"==e:!!e},t.fieldRegistry.register("field_checkbox",t.FieldCheckbox),t.FieldColour=function(e,n,a){t.FieldColour.superClass_.constructor.call(this,e,n,a),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},t.utils.object.inherits(t.FieldColour,t.Field),t.FieldColour.fromJson=function(e){return new t.FieldColour(e.colour,void 0,e)},t.FieldColour.prototype.SERIALIZABLE=!0,t.FieldColour.prototype.CURSOR="default",t.FieldColour.prototype.isDirty_=!1,t.FieldColour.prototype.colours_=null,t.FieldColour.prototype.titles_=null,t.FieldColour.prototype.columns_=0,t.FieldColour.prototype.configure_=function(e){t.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},t.FieldColour.prototype.initView=function(){this.size_=new t.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},t.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},t.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:t.utils.colour.parse(e)},t.FieldColour.prototype.doValueUpdate_=function(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},t.FieldColour.prototype.getText=function(){var e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e},t.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),t.FieldColour.prototype.DEFAULT_VALUE=t.FieldColour.COLOURS[0],t.FieldColour.TITLES=[],t.FieldColour.COLUMNS=7,t.FieldColour.prototype.setColours=function(e,n){return this.colours_=e,n&&(this.titles_=n),this},t.FieldColour.prototype.setColumns=function(e){return this.columns_=e,this},t.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.picker_),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),t.DropDownDiv.hideIfOwner(this))},t.FieldColour.prototype.onKeyDown_=function(e){var n=!1;e.keyCode===t.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):e.keyCode===t.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):e.keyCode===t.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):e.keyCode===t.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):e.keyCode===t.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),t.DropDownDiv.hideWithoutAnimation(),n=!0),n&&e.stopPropagation()},t.FieldColour.prototype.moveHighlightBy_=function(e,n){var a=this.colours_||t.FieldColour.COLOURS,d=this.columns_||t.FieldColour.COLUMNS,C=this.highlightedIndex_%d,D=Math.floor(this.highlightedIndex_/d);C+=e,D+=n,0>e?0>C&&0<D?(C=d-1,D--):0>C&&(C=0):0<e?C>d-1&&D<Math.floor(a.length/d)-1?(C=0,D++):C>d-1&&C--:0>n?0>D&&(D=0):0<n&&D>Math.floor(a.length/d)-1&&(D=Math.floor(a.length/d)-1),this.setHighlightedCell_(this.picker_.childNodes[D].childNodes[C],D*d+C)},t.FieldColour.prototype.onMouseMove_=function(e){var n=(e=e.target)&&Number(e.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(e,n)},t.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&t.utils.dom.removeClass(e,"blocklyColourHighlighted")},t.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return n?n.childNodes[this.highlightedIndex_%e]:null},t.FieldColour.prototype.setHighlightedCell_=function(e,n){var a=this.getHighlighted_();a&&t.utils.dom.removeClass(a,"blocklyColourHighlighted"),t.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=n,t.utils.aria.setState(this.picker_,t.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},t.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.colours_||t.FieldColour.COLOURS,a=this.titles_||t.FieldColour.TITLES,d=this.getValue(),C=document.createElement("table");C.className="blocklyColourTable",C.tabIndex=0,C.dir="ltr",t.utils.aria.setRole(C,t.utils.aria.Role.GRID),t.utils.aria.setState(C,t.utils.aria.State.EXPANDED,!0),t.utils.aria.setState(C,t.utils.aria.State.ROWCOUNT,Math.floor(n.length/e)),t.utils.aria.setState(C,t.utils.aria.State.COLCOUNT,e);for(var D,B=0;B<n.length;B++){B%e==0&&(D=document.createElement("tr"),t.utils.aria.setRole(D,t.utils.aria.Role.ROW),C.appendChild(D));var z=document.createElement("td");D.appendChild(z),z.label=n[B],z.title=a[B]||n[B],z.id=t.utils.IdGenerator.getNextUniqueId(),z.setAttribute("data-index",B),t.utils.aria.setRole(z,t.utils.aria.Role.GRIDCELL),t.utils.aria.setState(z,t.utils.aria.State.LABEL,n[B]),t.utils.aria.setState(z,t.utils.aria.State.SELECTED,n[B]==d),z.style.backgroundColor=n[B],n[B]==d&&(z.className="blocklyColourSelected",this.highlightedIndex_=B)}this.onClickWrapper_=t.browserEvents.conditionalBind(C,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=t.browserEvents.conditionalBind(C,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=t.browserEvents.conditionalBind(C,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=t.browserEvents.conditionalBind(C,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=t.browserEvents.conditionalBind(C,"keydown",this,this.onKeyDown_),this.picker_=C},t.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(t.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(t.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(t.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(t.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},t.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),t.fieldRegistry.register("field_colour",t.FieldColour),t.FieldDropdown=function(e,n,a){"function"!=typeof e&&t.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],t.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,a),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},t.utils.object.inherits(t.FieldDropdown,t.Field),t.FieldDropdown.fromJson=function(e){return new t.FieldDropdown(e.options,void 0,e)},t.FieldDropdown.prototype.fromXml=function(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)},t.FieldDropdown.prototype.SERIALIZABLE=!0,t.FieldDropdown.CHECKMARK_OVERHANG=25,t.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,t.FieldDropdown.IMAGE_Y_OFFSET=5,t.FieldDropdown.IMAGE_Y_PADDING=2*t.FieldDropdown.IMAGE_Y_OFFSET,t.FieldDropdown.ARROW_CHAR=t.utils.userAgent.ANDROID?"\u25bc":"\u25be",t.FieldDropdown.prototype.CURSOR="default",t.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&t.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},t.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},t.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?t.FieldDropdown.ARROW_CHAR+" ":" "+t.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},t.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},t.FieldDropdown.prototype.showEditor_=function(e){if(this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new t.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(t.DropDownDiv.getContentDiv()),e=this.menu_.getElement(),t.utils.dom.addClass(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;t.DropDownDiv.setColour(e,n)}t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},t.FieldDropdown.prototype.dropdownCreate_=function(){var e=new t.Menu;e.setRole(t.utils.aria.Role.LISTBOX),this.menu_=e;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var a=0;a<n.length;a++){var d=n[a][0],C=n[a][1];if("object"==typeof d){var D=new Image(d.width,d.height);D.src=d.src,D.alt=d.alt||"",d=D}(d=new t.MenuItem(d,C)).setRole(t.utils.aria.Role.OPTION),d.setRightToLeft(this.sourceBlock_.RTL),d.setCheckable(!0),e.addChild(d),d.setChecked(C==this.value_),C==this.value_&&(this.selectedMenuItem_=d),d.onAction(this.handleMenuActionEvent_,this)}},t.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},t.FieldDropdown.prototype.handleMenuActionEvent_=function(e){t.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},t.FieldDropdown.prototype.onItemSelected_=function(e,n){this.setValue(n.getValue())},t.FieldDropdown.prototype.trimOptions_=function(){var e=this.menuGenerator_;if(Array.isArray(e)){for(var n=!1,a=0;a<e.length;a++){var d=e[a][0];"string"==typeof d?e[a][0]=t.utils.replaceMessageReferences(d):(null!=d.alt&&(e[a][0].alt=t.utils.replaceMessageReferences(d.alt)),n=!0)}if(!(n||2>e.length)){for(n=[],a=0;a<e.length;a++)n.push(e[a][0]);a=t.utils.string.shortestStringLength(n),d=t.utils.string.commonWordPrefix(n,a);var C=t.utils.string.commonWordSuffix(n,a);!d&&!C||a<=d+C||(d&&(this.prefixField=n[0].substring(0,d-1)),C&&(this.suffixField=n[0].substr(1-C)),this.menuGenerator_=t.FieldDropdown.applyTrim_(e,d,C))}}},t.FieldDropdown.applyTrim_=function(e,n,a){for(var d=[],C=0;C<e.length;C++){var D=e[C][0],B=e[C][1];D=D.substring(n,D.length-a),d[C]=[D,B]}return d},t.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},t.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),t.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},t.FieldDropdown.prototype.doClassValidation_=function(e){for(var C,n=!1,a=this.getOptions(!0),d=0;C=a[d];d++)if(C[1]==e){n=!0;break}return n?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)},t.FieldDropdown.prototype.doValueUpdate_=function(e){t.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var a,n=0;a=e[n];n++)a[1]==this.value_&&(this.selectedOption_=a)},t.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},t.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var e=this.selectedOption_&&this.selectedOption_[0];e&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_(),this.positionBorderRect_()},t.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var n=Number(e.height);e=Number(e.width);var a=!!this.borderRect_,d=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+t.FieldDropdown.IMAGE_Y_PADDING);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var C=this.svgArrow_?this.positionSVGArrow_(e+a,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):t.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=e+C+2*a,this.size_.height=d;var D=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",a+C):(D=e+C,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",a)),this.imageElement_.setAttribute("y",d/2-n/2),this.positionTextElement_(D+a,e+C)},t.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),t.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,n=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),a=t.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var d=0;this.svgArrow_&&(d=this.positionSVGArrow_(a+e,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=a+d+2*e,this.size_.height=n,this.positionTextElement_(e,a)},t.FieldDropdown.prototype.positionSVGArrow_=function(e,n){if(!this.svgArrow_)return 0;var a=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,C=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?a:e+d)+","+n+")"),C+d},t.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var e=this.selectedOption_[0];return"object"==typeof e?e.alt:e},t.FieldDropdown.validateOptions_=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,a=0;a<e.length;++a){var d=e[a];Array.isArray(d)?"string"!=typeof d[1]?(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&"string"!=typeof d[0]&&"string"!=typeof d[0].src&&(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option must have a string label or image description. Found"+d[0]+" in: ",d)):(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option must be an array. Found: ",d))}if(n)throw TypeError("Found invalid FieldDropdown options.")},t.fieldRegistry.register("field_dropdown",t.FieldDropdown),t.FieldLabelSerializable=function(e,n,a){t.FieldLabelSerializable.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.FieldLabelSerializable,t.FieldLabel),t.FieldLabelSerializable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabelSerializable(n,void 0,e)},t.FieldLabelSerializable.prototype.EDITABLE=!1,t.FieldLabelSerializable.prototype.SERIALIZABLE=!0,t.fieldRegistry.register("field_label_serializable",t.FieldLabelSerializable),t.FieldImage=function(e,n,a,d,C,D,B){if(!e)throw Error("Src value of an image field is required");if(e=t.utils.replaceMessageReferences(e),a=Number(t.utils.replaceMessageReferences(a)),n=Number(t.utils.replaceMessageReferences(n)),isNaN(a)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=a||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",t.FieldImage.superClass_.constructor.call(this,e,null,B),B||(this.flipRtl_=!!D,this.altText_=t.utils.replaceMessageReferences(d)||""),this.size_=new t.utils.Size(n,a+t.FieldImage.Y_PADDING),this.imageHeight_=a,this.clickHandler_=null,"function"==typeof C&&(this.clickHandler_=C),this.imageElement_=null},t.utils.object.inherits(t.FieldImage,t.Field),t.FieldImage.prototype.DEFAULT_VALUE="",t.FieldImage.fromJson=function(e){return new t.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},t.FieldImage.Y_PADDING=1,t.FieldImage.prototype.EDITABLE=!1,t.FieldImage.prototype.isDirty_=!1,t.FieldImage.prototype.configure_=function(e){t.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=t.utils.replaceMessageReferences(e.alt)||""},t.FieldImage.prototype.initView=function(){this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},t.FieldImage.prototype.updateSize_=function(){},t.FieldImage.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:e},t.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},t.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},t.FieldImage.prototype.setAlt=function(e){e!=this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},t.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},t.FieldImage.prototype.setOnClickHandler=function(e){this.clickHandler_=e},t.FieldImage.prototype.getText_=function(){return this.altText_},t.fieldRegistry.register("field_image",t.FieldImage),t.FieldMultilineInput=function(e,n,a){t.FieldMultilineInput.superClass_.constructor.call(this,e,n,a),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},t.utils.object.inherits(t.FieldMultilineInput,t.FieldTextInput),t.FieldMultilineInput.prototype.configure_=function(e){t.FieldMultilineInput.superClass_.configure_.call(this,e),e.maxLines&&this.setMaxLines(e.maxLines)},t.FieldMultilineInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldMultilineInput(n,void 0,e)},t.FieldMultilineInput.prototype.toXml=function(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e},t.FieldMultilineInput.prototype.fromXml=function(e){this.setValue(e.textContent.replace(/&#10;/g,"\n"))},t.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},t.FieldMultilineInput.prototype.getDisplayText_=function(){var e=this.getText();if(!e)return t.Field.NBSP;var n=e.split("\n");e="";for(var a=this.isOverflowedY_?this.maxLines_:n.length,d=0;d<a;d++){var C=n[d];C.length>this.maxDisplayLength?C=C.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&d===a-1&&(C=C.substring(0,C.length-3)+"..."),e+=C=C.replace(/\s/g,t.Field.NBSP),d!==a-1&&(e+="\n")}return this.sourceBlock_.RTL&&(e+="\u200f"),e},t.FieldMultilineInput.prototype.doValueUpdate_=function(e){t.FieldMultilineInput.superClass_.doValueUpdate_.call(this,e),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},t.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var n=0,a=0;a<e.length;a++){var d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[a])),n+=d}this.isBeingEdited_&&(e=this.htmlInput_,this.isOverflowedY_?t.utils.dom.addClass(e,"blocklyHtmlTextAreaInputOverflowedY"):t.utils.dom.removeClass(e,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0)))},t.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,n=0,a=0,d=0;d<e.length;d++){var C=t.utils.dom.getTextWidth(e[d]);C>n&&(n=C),a+=this.getConstants().FIELD_TEXT_HEIGHT+(0<d?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){e=this.value_.split("\n"),C=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var D=this.getConstants().FIELD_TEXT_FONTSIZE,B=this.getConstants().FIELD_TEXT_FONTWEIGHT,z=this.getConstants().FIELD_TEXT_FONTFAMILY;for(d=0;d<e.length;d++){e[d].length>this.maxDisplayLength&&(e[d]=e[d].substring(0,this.maxDisplayLength)),C.textContent=e[d];var oe=t.utils.dom.getFastTextWidth(C,D,B,z);oe>n&&(n=oe)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(a+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",a)),this.size_.width=n,this.size_.height=a,this.positionBorderRect_()},t.FieldMultilineInput.prototype.showEditor_=function(e,n){t.FieldMultilineInput.superClass_.showEditor_.call(this,e,n),this.forceRerender()},t.FieldMultilineInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV,n=this.workspace_.getScale(),a=document.createElement("textarea");a.className="blocklyHtmlInput blocklyHtmlTextAreaInput",a.setAttribute("spellcheck",this.spellcheck_);var d=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";e.style.fontSize=d,a.style.fontSize=d,a.style.borderRadius=t.FieldTextInput.BORDERRADIUS*n+"px",d=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var C=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return a.style.padding=C+"px "+d+"px "+C+"px "+d+"px",d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,a.style.lineHeight=d*n+"px",e.appendChild(a),a.value=a.defaultValue=this.getEditorText_(this.value_),a.untypedDefaultValue_=this.value_,a.oldValue_=null,t.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(a),a},t.FieldMultilineInput.prototype.setMaxLines=function(e){"number"==typeof e&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())},t.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},t.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==t.utils.KeyCodes.ENTER&&t.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},t.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),t.fieldRegistry.register("field_multilinetext",t.FieldMultilineInput),t.FieldNumber=function(e,n,a,d,C,D){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,t.FieldNumber.superClass_.constructor.call(this,e,C,D),D||this.setConstraints(n,a,d)},t.utils.object.inherits(t.FieldNumber,t.FieldTextInput),t.FieldNumber.prototype.DEFAULT_VALUE=0,t.FieldNumber.fromJson=function(e){return new t.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},t.FieldNumber.prototype.SERIALIZABLE=!0,t.FieldNumber.prototype.configure_=function(e){t.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},t.FieldNumber.prototype.setConstraints=function(e,n,a){this.setMinInternal_(e),this.setMaxInternal_(n),this.setPrecisionInternal_(a),this.setValue(this.getValue())},t.FieldNumber.prototype.setMin=function(e){this.setMinInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setMinInternal_=function(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))},t.FieldNumber.prototype.getMin=function(){return this.min_},t.FieldNumber.prototype.setMax=function(e){this.setMaxInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setMaxInternal_=function(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))},t.FieldNumber.prototype.getMax=function(){return this.max_},t.FieldNumber.prototype.setPrecision=function(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setPrecisionInternal_=function(e){this.precision_=Number(e)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var a=n.indexOf(".");this.decimalPlaces_=-1==a?e?0:null:n.length-a-1},t.FieldNumber.prototype.getPrecision=function(){return this.precision_},t.FieldNumber.prototype.doClassValidation_=function(e){return null===e||(e=(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(e=Number(e.toFixed(this.decimalPlaces_))),e)},t.FieldNumber.prototype.widgetCreate_=function(){var e=t.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMAX,this.max_),e},t.fieldRegistry.register("field_number",t.FieldNumber),t.FieldVariable=function(e,n,a,d,C){this.menuGenerator_=t.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof e?e:"",this.size_=new t.utils.Size(0,0),C&&this.configure_(C),n&&this.setValidator(n),C||this.setTypes_(a,d)},t.utils.object.inherits(t.FieldVariable,t.FieldDropdown),t.FieldVariable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.variable);return new t.FieldVariable(n,void 0,void 0,void 0,e)},t.FieldVariable.prototype.SERIALIZABLE=!0,t.FieldVariable.prototype.configure_=function(e){t.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},t.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},t.FieldVariable.prototype.shouldAddBorderRect_=function(){return t.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},t.FieldVariable.prototype.fromXml=function(e){var n=e.getAttribute("id"),a=e.textContent,d=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,a,d),null!=d&&d!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+t.Xml.domToText(e)+".");this.setValue(n.getId())},t.FieldVariable.prototype.toXml=function(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e},t.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");t.FieldVariable.superClass_.setSourceBlock.call(this,e)},t.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},t.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},t.FieldVariable.prototype.getVariable=function(){return this.variable_},t.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},t.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var n=t.Variables.getVariable(this.sourceBlock_.workspace,e);return n?this.typeIsAllowed_(n=n.type)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},t.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=t.Variables.getVariable(this.sourceBlock_.workspace,e),t.FieldVariable.superClass_.doValueUpdate_.call(this,e)},t.FieldVariable.prototype.typeIsAllowed_=function(e){var n=this.getVariableTypes_();if(!n)return!0;for(var a=0;a<n.length;a++)if(e==n[a])return!0;return!1},t.FieldVariable.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},t.FieldVariable.prototype.setTypes_=function(e,n){if(n=n||"",null==e||null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var a=!1,d=0;d<e.length;d++)e[d]==n&&(a=!0);if(!a)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=e},t.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},t.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var a=this.getVariableTypes_(),d=0;d<a.length;d++){var C=this.sourceBlock_.workspace.getVariablesOfType(a[d]);n=n.concat(C)}for(n.sort(t.VariableModel.compareByName),a=[],d=0;d<n.length;d++)a[d]=[n[d].name,n[d].getId()];return a.push([t.Msg.RENAME_VARIABLE,t.RENAME_VARIABLE_ID]),t.Msg.DELETE_VARIABLE&&a.push([t.Msg.DELETE_VARIABLE.replace("%1",e),t.DELETE_VARIABLE_ID]),a},t.FieldVariable.prototype.onItemSelected_=function(e,n){if(e=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==t.RENAME_VARIABLE_ID)return void t.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==t.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)},t.FieldVariable.prototype.referencesVariables=function(){return!0},t.fieldRegistry.register("field_variable",t.FieldVariable),t.utils.svgPaths={},t.utils.svgPaths.point=function(e,n){return" "+e+","+n+" "},t.utils.svgPaths.curve=function(e,n){return" "+e+n.join("")},t.utils.svgPaths.moveTo=function(e,n){return" M "+e+","+n+" "},t.utils.svgPaths.moveBy=function(e,n){return" m "+e+","+n+" "},t.utils.svgPaths.lineTo=function(e,n){return" l "+e+","+n+" "},t.utils.svgPaths.line=function(e){return" l"+e.join("")},t.utils.svgPaths.lineOnAxis=function(e,n){return" "+e+" "+n+" "},t.utils.svgPaths.arc=function(e,n,a,d){return e+" "+a+" "+a+" "+n+d},t.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=t.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},t.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},t.blockRendering.ConstantProvider.prototype.setTheme=function(e){this.blockStyles=Object.create(null);var a,n=e.blockStyles;for(a in n)this.blockStyles[a]=this.validatedBlockStyle_(n[a]);this.setDynamicProperties_(e)},t.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=null!=e.startHats?e.startHats:this.ADD_START_HATS},t.blockRendering.ConstantProvider.prototype.setFontConstants_=function(e){this.FIELD_TEXT_FONTFAMILY=e.fontStyle&&null!=e.fontStyle.family?e.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=e.fontStyle&&null!=e.fontStyle.weight?e.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=e.fontStyle&&null!=e.fontStyle.size?e.fontStyle.size:this.FIELD_TEXT_FONTSIZE,e=t.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline},t.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},t.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(e){var n="auto_"+e;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(e)),{style:this.blockStyles[n],name:n}},t.blockRendering.ConstantProvider.prototype.getBlockStyle=function(e){return this.blockStyles[e||""]||(e&&0==e.indexOf("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))},t.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(e){return this.validatedBlockStyle_({colourPrimary:e})},t.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var n={};return e&&t.utils.object.mixin(n,e),e=t.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?t.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?t.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},t.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#fff",e,.6)||e},t.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#fff",e,.3)||e},t.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&t.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&t.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&t.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},t.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.line([t.utils.svgPaths.point(n,e/4),t.utils.svgPaths.point(2*-n,e/2),t.utils.svgPaths.point(n,e/4)])}},t.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(30,-e),t.utils.svgPaths.point(70,-e),t.utils.svgPaths.point(n,0)])}},t.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(D){var B=-(D=D?-1:1),z=a/2,oe=z+2.5,be=z+.5,se=t.utils.svgPaths.point(-n,D*z);return z=t.utils.svgPaths.point(n,D*z),t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(0,D*oe),t.utils.svgPaths.point(-n,B*be),se])+t.utils.svgPaths.curve("s",[t.utils.svgPaths.point(n,2.5*B),z])}var n=this.TAB_WIDTH,a=this.TAB_HEIGHT,d=e(!0),C=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:a,pathDown:C,pathUp:d}},t.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(B){return t.utils.svgPaths.line([t.utils.svgPaths.point(B*d,a),t.utils.svgPaths.point(3*B,0),t.utils.svgPaths.point(B*d,-a)])}var n=this.NOTCH_WIDTH,a=this.NOTCH_HEIGHT,d=(n-3)/2,C=e(1),D=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:a,pathLeft:C,pathRight:D}},t.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e))}},t.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(0,e)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,-e)),a=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e)),d=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,-e));return{topLeft:n,topRight:a,bottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e)),bottomLeft:d,rightHeight:e}},t.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},t.blockRendering.ConstantProvider.prototype.createDom=function(e,n,a){this.injectCSS_(n,a),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),a=t.utils.dom.createSvgElement(t.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,t.blockRendering.Debug&&(e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e)},t.blockRendering.ConstantProvider.prototype.injectCSS_=function(e,n){n=this.getCSS_(n),e="blockly-renderer-style-"+e,this.cssNode_=document.getElementById(e);var a=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=a:((n=document.createElement("style")).id=e,e=document.createTextNode(a),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},t.blockRendering.ConstantProvider.prototype.getCSS_=function(e){return[e+" .blocklyText, ",e+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",e+" .blocklyText {","fill: #fff;","}",e+" .blocklyNonEditableText>rect,",e+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text {","fill: #000;","}",e+" .blocklyFlyoutLabelText {","fill: #000;","}",e+" .blocklyText.blocklyBubbleText {","fill: #000;","}",e+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",e+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",e+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",e+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",e+" .blocklyReplaceable .blocklyPathLight,",e+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",e+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},t.blockRendering.Types.LEFT_CORNER=t.blockRendering.Types.LEFT_SQUARE_CORNER|t.blockRendering.Types.LEFT_ROUND_CORNER,t.blockRendering.Types.RIGHT_CORNER=t.blockRendering.Types.RIGHT_SQUARE_CORNER|t.blockRendering.Types.RIGHT_ROUND_CORNER,t.blockRendering.Types.nextTypeValue_=16777216,t.blockRendering.Types.getType=function(e){return Object.prototype.hasOwnProperty.call(t.blockRendering.Types,e)||(t.blockRendering.Types[e]=t.blockRendering.Types.nextTypeValue_,t.blockRendering.Types.nextTypeValue_<<=1),t.blockRendering.Types[e]},t.blockRendering.Types.isField=function(e){return e.type&t.blockRendering.Types.FIELD},t.blockRendering.Types.isHat=function(e){return e.type&t.blockRendering.Types.HAT},t.blockRendering.Types.isIcon=function(e){return e.type&t.blockRendering.Types.ICON},t.blockRendering.Types.isSpacer=function(e){return e.type&t.blockRendering.Types.SPACER},t.blockRendering.Types.isInRowSpacer=function(e){return e.type&t.blockRendering.Types.IN_ROW_SPACER},t.blockRendering.Types.isInput=function(e){return e.type&t.blockRendering.Types.INPUT},t.blockRendering.Types.isExternalInput=function(e){return e.type&t.blockRendering.Types.EXTERNAL_VALUE_INPUT},t.blockRendering.Types.isInlineInput=function(e){return e.type&t.blockRendering.Types.INLINE_INPUT},t.blockRendering.Types.isStatementInput=function(e){return e.type&t.blockRendering.Types.STATEMENT_INPUT},t.blockRendering.Types.isPreviousConnection=function(e){return e.type&t.blockRendering.Types.PREVIOUS_CONNECTION},t.blockRendering.Types.isNextConnection=function(e){return e.type&t.blockRendering.Types.NEXT_CONNECTION},t.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(t.blockRendering.Types.PREVIOUS_CONNECTION|t.blockRendering.Types.NEXT_CONNECTION)},t.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&t.blockRendering.Types.LEFT_ROUND_CORNER},t.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_ROUND_CORNER},t.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&t.blockRendering.Types.LEFT_SQUARE_CORNER},t.blockRendering.Types.isRightSquareCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_SQUARE_CORNER},t.blockRendering.Types.isCorner=function(e){return e.type&t.blockRendering.Types.CORNER},t.blockRendering.Types.isJaggedEdge=function(e){return e.type&t.blockRendering.Types.JAGGED_EDGE},t.blockRendering.Types.isRow=function(e){return e.type&t.blockRendering.Types.ROW},t.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&t.blockRendering.Types.BETWEEN_ROW_SPACER},t.blockRendering.Types.isTopRow=function(e){return e.type&t.blockRendering.Types.TOP_ROW},t.blockRendering.Types.isBottomRow=function(e){return e.type&t.blockRendering.Types.BOTTOM_ROW},t.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(t.blockRendering.Types.TOP_ROW|t.blockRendering.Types.BOTTOM_ROW)},t.blockRendering.Types.isInputRow=function(e){return e.type&t.blockRendering.Types.INPUT_ROW},t.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=t.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},t.blockRendering.Connection=function(e,n){t.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=t.blockRendering.Types.CONNECTION},t.utils.object.inherits(t.blockRendering.Connection,t.blockRendering.Measurable),t.blockRendering.OutputConnection=function(e,n){t.blockRendering.OutputConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.OutputConnection,t.blockRendering.Connection),t.blockRendering.PreviousConnection=function(e,n){t.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.PreviousConnection,t.blockRendering.Connection),t.blockRendering.NextConnection=function(e,n){t.blockRendering.NextConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.NextConnection,t.blockRendering.Connection),t.blockRendering.InputConnection=function(e,n){t.blockRendering.InputConnection.superClass_.constructor.call(this,e,n.connection),this.type|=t.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.InputConnection,t.blockRendering.Connection),t.blockRendering.InlineInput=function(e,n){t.blockRendering.InlineInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},t.utils.object.inherits(t.blockRendering.InlineInput,t.blockRendering.InputConnection),t.blockRendering.StatementInput=function(e,n){t.blockRendering.StatementInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},t.utils.object.inherits(t.blockRendering.StatementInput,t.blockRendering.InputConnection),t.blockRendering.ExternalValueInput=function(e,n){t.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},t.utils.object.inherits(t.blockRendering.ExternalValueInput,t.blockRendering.InputConnection),t.blockRendering.Icon=function(e,n){t.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=n,this.isVisible=n.isVisible(),this.type|=t.blockRendering.Types.ICON,e=n.getCorrectedSize(),this.height=e.height,this.width=e.width},t.utils.object.inherits(t.blockRendering.Icon,t.blockRendering.Measurable),t.blockRendering.JaggedEdge=function(e){t.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},t.utils.object.inherits(t.blockRendering.JaggedEdge,t.blockRendering.Measurable),t.blockRendering.Field=function(e,n,a){t.blockRendering.Field.superClass_.constructor.call(this,e),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=t.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=a},t.utils.object.inherits(t.blockRendering.Field,t.blockRendering.Measurable),t.blockRendering.Hat=function(e){t.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},t.utils.object.inherits(t.blockRendering.Hat,t.blockRendering.Measurable),t.blockRendering.SquareCorner=function(e,n){t.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_SQUARE_CORNER:t.blockRendering.Types.LEFT_SQUARE_CORNER)|t.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},t.utils.object.inherits(t.blockRendering.SquareCorner,t.blockRendering.Measurable),t.blockRendering.RoundCorner=function(e,n){t.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_ROUND_CORNER:t.blockRendering.Types.LEFT_ROUND_CORNER)|t.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},t.utils.object.inherits(t.blockRendering.RoundCorner,t.blockRendering.Measurable),t.blockRendering.InRowSpacer=function(e,n){t.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},t.utils.object.inherits(t.blockRendering.InRowSpacer,t.blockRendering.Measurable),t.blockRendering.Row=function(e){this.type=t.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},t.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},t.blockRendering.Row.prototype.getLastInput=function(){for(var n,e=this.elements.length-1;n=this.elements[e];e--)if(t.blockRendering.Types.isInput(n))return n;return null},t.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,e=0;n=this.elements[e];e++)if(t.blockRendering.Types.isSpacer(n))return n;return null},t.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,e=this.elements.length-1;n=this.elements[e];e--)if(t.blockRendering.Types.isSpacer(n))return n;return null},t.blockRendering.TopRow=function(e){t.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},t.utils.object.inherits(t.blockRendering.TopRow,t.blockRendering.Row),t.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(e){var n=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,a=e.getPreviousBlock();return!!e.outputConnection||n||!!a&&a.getNextBlock()==e},t.blockRendering.TopRow.prototype.hasRightSquareCorner=function(e){return!0},t.blockRendering.TopRow.prototype.measure=function(){for(var C,e=0,n=0,a=0,d=0;C=this.elements[d];d++)n+=C.width,t.blockRendering.Types.isSpacer(C)||(t.blockRendering.Types.isHat(C)?a=Math.max(a,C.ascenderHeight):e=Math.max(e,C.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+a,this.capline=this.ascenderHeight=a,this.widthWithConnectedBlocks=this.width},t.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow=function(e){t.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},t.utils.object.inherits(t.blockRendering.BottomRow,t.blockRendering.Row),t.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||!!e.getNextBlock()},t.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(e){return!0},t.blockRendering.BottomRow.prototype.measure=function(){for(var C,e=0,n=0,a=0,d=0;C=this.elements[d];d++)n+=C.width,t.blockRendering.Types.isSpacer(C)||(t.blockRendering.Types.isNextConnection(C)?a=Math.max(a,C.height):e=Math.max(e,C.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+a,this.descenderHeight=a,this.widthWithConnectedBlocks=this.width},t.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.SpacerRow=function(e,n,a){t.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=a,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new t.blockRendering.InRowSpacer(this.constants_,a)]},t.utils.object.inherits(t.blockRendering.SpacerRow,t.blockRendering.Row),t.blockRendering.SpacerRow.prototype.measure=function(){},t.blockRendering.InputRow=function(e){t.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},t.utils.object.inherits(t.blockRendering.InputRow,t.blockRendering.Row),t.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var a,e=0,n=0;a=this.elements[n];n++)this.width+=a.width,t.blockRendering.Types.isInput(a)&&(t.blockRendering.Types.isStatementInput(a)?e+=a.connectedBlockWidth:t.blockRendering.Types.isExternalInput(a)&&0!=a.connectedBlockWidth&&(e+=a.connectedBlockWidth-a.connectionWidth)),t.blockRendering.Types.isSpacer(a)||(this.height=Math.max(this.height,a.height));this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e},t.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},t.blockRendering.RenderInfo=function(e,n){this.block_=n,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new t.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new t.blockRendering.TopRow(this.constants_),this.bottomRow=new t.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},t.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new t.blockRendering.InputRow(this.constants_);this.inputRows.push(e);for(var d,n=this.block_.getIcons(),a=0;d=n[a];a++){var C=new t.blockRendering.Icon(this.constants_,d);this.isCollapsed&&d.collapseHidden?this.hiddenIcons.push(C):e.elements.push(C)}for(d=null,a=0;n=this.block_.inputList[a];a++)if(n.isVisible()){for(this.shouldStartNewRow_(n,d)&&(this.rows.push(e),e=new t.blockRendering.InputRow(this.constants_),this.inputRows.push(e)),d=0;C=n.fieldRow[d];d++)e.elements.push(new t.blockRendering.Field(this.constants_,C,n));this.addInput_(n,e),d=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new t.blockRendering.JaggedEdge(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},t.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e,a=this.topRow.hasLeftSquareCorner(this.block_)?t.blockRendering.SquareCorner:t.blockRendering.RoundCorner;this.topRow.elements.push(new a(this.constants_)),n?(e=new t.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new t.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==t.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,a=this.topRow.hasRightSquareCorner(this.block_)?t.blockRendering.SquareCorner:t.blockRendering.RoundCorner,this.topRow.elements.push(new a(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new t.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.blockRendering.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=e.align)},t.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!(!n||e.type!=t.inputTypes.STATEMENT&&n.type!=t.inputTypes.STATEMENT&&(e.type!=t.inputTypes.VALUE&&e.type!=t.inputTypes.DUMMY||this.isInline))},t.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,e=0;n=this.rows[e];e++){var a=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(var d=0;d<a.length-1;d++){n.elements.push(a[d]);var C=this.getInRowSpacing_(a[d],a[d+1]);n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,C))}n.elements.push(a[a.length-1]),n.endsWithElemSpacer()&&n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(a[a.length-1],null)))}}},t.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e&&n&&t.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var C,e=0,n=0,a=0,d=0;C=this.rows[d];d++){if(C.measure(),n=Math.max(n,C.width),C.hasStatement){var D=C.getLastInput();e=Math.max(e,C.width-D.width)}a=Math.max(a,C.widthWithConnectedBlocks)}for(this.statementEdge=e,this.width=n,d=0;C=this.rows[d];d++)C.hasStatement&&(C.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,a),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},t.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,e=0;n=this.rows[e];e++)if(n.hasStatement)this.alignStatementRow_(n);else{var a=n.width;0<(a=this.getDesiredRowWidth_(n)-a)&&this.addAlignmentPadding_(n,a),t.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},t.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,n){var a=e.getFirstSpacer(),d=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align==t.constants.ALIGN.LEFT?d.width+=n:e.align==t.constants.ALIGN.CENTRE?(a.width+=n/2,d.width+=n/2):e.align==t.constants.ALIGN.RIGHT?a.width+=n:d.width+=n,e.width+=n},t.blockRendering.RenderInfo.prototype.alignStatementRow_=function(e){var n=e.getLastInput(),a=e.width-n.width,d=this.statementEdge;0<(a=d-a)&&this.addAlignmentPadding_(e,a),a=e.width,d=this.getDesiredRowWidth_(e),n.width+=d-a,n.height=Math.max(n.height,e.height),e.width+=d-a,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)},t.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var e=this.rows;this.rows=[];for(var n=0;n<e.length;n++)this.rows.push(e[n]),n!=e.length-1&&this.rows.push(this.makeSpacerRow_(e[n],e[n+1]))},t.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,n){var a=this.getSpacerRowHeight_(e,n),d=this.getSpacerRowWidth_(e,n);return a=new t.blockRendering.SpacerRow(this.constants_,a,d),e.hasStatement&&(a.followsStatement=!0),n.hasStatement&&(a.precedesStatement=!0),a},t.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,n){return t.blockRendering.Types.isSpacer(n)?e.yPos+n.height/2:t.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2):t.blockRendering.Types.isTopRow(e)?t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2},t.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var d,n=e.xPos,a=0;d=e.elements[a];a++)t.blockRendering.Types.isSpacer(d)&&(d.height=e.height),d.xPos=n,d.centerline=this.getElemCenterline_(e,d),n+=d.width},t.blockRendering.RenderInfo.prototype.finalize_=function(){for(var d,e=0,n=0,a=0;d=this.rows[a];a++)d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks),this.recordElemPositions_(d);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},t.blockRendering.Debug=function(e){this.debugElements_=[],this.svgRoot_=null,this.constants_=e},t.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},t.blockRendering.Debug.prototype.clearElems=function(){for(var n,e=0;n=this.debugElements_[e];e++)t.utils.dom.removeNode(n);this.debugElements_=[]},t.blockRendering.Debug.prototype.drawSpacerRow=function(e,n,a){if(t.blockRendering.Debug.config.rowSpacers){var d=Math.abs(e.height),C=0>e.height;C&&(n-=d),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:a?-(e.xPos+e.width):e.xPos,y:n,width:e.width,height:d,stroke:C?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawSpacerElem=function(e,n,a){if(t.blockRendering.Debug.config.elemSpacers){n=Math.abs(e.width);var d=0>e.width,C=d?e.xPos-n:e.xPos;a&&(C=-(C+n)),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:C,y:e.centerline-e.height/2,width:n,height:e.height,stroke:"pink",fill:d?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedElem=function(e,n){if(t.blockRendering.Debug.config.elems){var a=e.xPos;n&&(a=-(a+e.width)),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:a,y:n=e.centerline-e.height/2,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isField(e)&&e.field instanceof t.FieldLabel&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:a,y:n+this.constants_.FIELD_TEXT_BASELINE,width:e.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}t.blockRendering.Types.isInput(e)&&t.blockRendering.Debug.config.connections&&this.drawConnection(e.connectionModel)},t.blockRendering.Debug.prototype.drawConnection=function(e){if(t.blockRendering.Debug.config.connections){if(e.type==t.connectionTypes.INPUT_VALUE)var n=4,a="magenta",d="none";else e.type==t.connectionTypes.OUTPUT_VALUE?(n=2,d=a="magenta"):e.type==t.connectionTypes.NEXT_STATEMENT?(n=4,a="goldenrod",d="none"):e.type==t.connectionTypes.PREVIOUS_STATEMENT&&(n=2,d=a="goldenrod");this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:e.offsetInBlock_.x,cy:e.offsetInBlock_.y,r:n,fill:d,stroke:a},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedRow=function(e,n,a){t.blockRendering.Debug.config.rows&&(this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:a?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isTopOrBottomRow(e)||t.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:a?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},t.blockRendering.Debug.prototype.drawRowWithElements=function(e,n,a){for(var d=0,C=e.elements.length;d<C;d++){var D=e.elements[d];D?t.blockRendering.Types.isSpacer(D)?this.drawSpacerElem(D,e.height,a):this.drawRenderedElem(D,a):console.warn("A row has an undefined or null element.",e,D)}this.drawRenderedRow(e,n,a)},t.blockRendering.Debug.prototype.drawBoundingBox=function(e){if(t.blockRendering.Debug.config.blockBounds){var n=e.RTL?-e.width:0;this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),t.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockRenderDebug",x:n=e.RTL?-e.widthWithChildren:0,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawDebug=function(e,n){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var C,a=0,d=0;C=n.rows[d];d++)t.blockRendering.Types.isBetweenRowSpacer(C)?this.drawSpacerRow(C,a,n.RTL):this.drawRowWithElements(C,a,n.RTL),a+=C.height;e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(e.pathObject.svgPath)},t.blockRendering.Debug.prototype.drawRender=function(e){t.blockRendering.Debug.config.render&&(e.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){e.setAttribute("filter","")},100))},t.blockRendering.Drawer=function(e,n){this.block_=e,this.info_=n,this.topLeft_=e.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},t.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},t.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,e=0;n=this.info_.hiddenIcons[e];e++)n.icon.iconGroup_.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var e=1;e<this.info_.rows.length-1;e++){var n=this.info_.rows[e];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},t.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var d,a=0;d=n[a];a++)t.blockRendering.Types.isLeftRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:t.blockRendering.Types.isRightRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:t.blockRendering.Types.isPreviousConnection(d)?this.outlinePath_+=d.shape.pathLeft:t.blockRendering.Types.isHat(d)?this.outlinePath_+=this.constants_.START_HAT.path:t.blockRendering.Types.isSpacer(d)&&(this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",d.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("v",e.height)},t.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+t.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},t.blockRendering.Drawer.prototype.drawValueInput_=function(e){var n=e.getLastInput();this.positionExternalValueConnection_(e);var a="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+a+t.utils.svgPaths.lineOnAxis("v",e.height-n.connectionHeight)},t.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),a=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var d=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",a)+n+t.utils.svgPaths.lineOnAxis("v",d)+this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();for(var D,a=0,d="",C=n.length-1;D=n[C];C--)t.blockRendering.Types.isNextConnection(D)?d+=D.shape.pathRight:t.blockRendering.Types.isLeftSquareCorner(D)?d+=t.utils.svgPaths.lineOnAxis("H",e.xPos):t.blockRendering.Types.isLeftRoundedCorner(D)?d+=this.constants_.OUTSIDE_CORNERS.bottomLeft:t.blockRendering.Types.isRightRoundedCorner(D)?(d+=this.constants_.OUTSIDE_CORNERS.bottomRight,a=this.constants_.OUTSIDE_CORNERS.rightHeight):t.blockRendering.Types.isSpacer(D)&&(d+=t.utils.svgPaths.lineOnAxis("h",-1*D.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-a),this.outlinePath_+=d},t.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){var n=e.connectionOffsetY+e.height;e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",n)+e}this.outlinePath_+="z"},t.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,e=0;n=this.info_.rows[e];e++)for(var d,a=0;d=n.elements[a];a++)t.blockRendering.Types.isInlineInput(d)?this.drawInlineInput_(d):(t.blockRendering.Types.isIcon(d)||t.blockRendering.Types.isField(d))&&this.layoutField_(d)},t.blockRendering.Drawer.prototype.layoutField_=function(e){if(t.blockRendering.Types.isField(e))var n=e.field.getSvgRoot();else t.blockRendering.Types.isIcon(e)&&(n=e.icon.iconGroup_);var a=e.centerline-e.height/2,d=e.xPos,C="";this.info_.RTL&&(d=-(d+e.width),e.flipRtl&&(d+=e.width,C="scale(-1 1)")),t.blockRendering.Types.isIcon(e)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+d+","+a+")"),e.icon.computeIconLocation()):n.setAttribute("transform","translate("+d+","+a+")"+C),this.info_.isInsertionMarker&&n.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var n=e.width,a=e.height,d=e.connectionOffsetY,C=e.connectionHeight+d;this.inlinePath_+=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-a/2)+t.utils.svgPaths.lineOnAxis("v",d)+e.shape.pathDown+t.utils.svgPaths.lineOnAxis("v",a-C)+t.utils.svgPaths.lineOnAxis("h",n-e.connectionWidth)+t.utils.svgPaths.lineOnAxis("v",-a)+"z",this.positionInlineInputConnection_(e)},t.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(e){if(e.connectionModel){var a=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(a*=-1),e.connectionModel.setOffsetInBlock(a,e.centerline-e.height/2+e.connectionOffsetY)}},t.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.statementEdge+n.notchOffset;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.width;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var e=this.info_.topRow;if(e.connection){var n=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},t.blockRendering.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var n=e.connection,a=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,e.baseline)}},t.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}},t.Events.MarkerMove=function(e,n,a,d){var C=e?e.workspace.id:void 0;d&&d.getType()==t.ASTNode.types.WORKSPACE&&(C=d.getLocation().id),t.Events.MarkerMove.superClass_.constructor.call(this,C),this.blockId=e?e.id:null,this.oldNode=a,this.newNode=d,this.isCursor=n},t.utils.object.inherits(t.Events.MarkerMove,t.Events.UiBase),t.Events.MarkerMove.prototype.type=t.Events.MARKER_MOVE,t.Events.MarkerMove.prototype.toJson=function(){var e=t.Events.MarkerMove.superClass_.toJson.call(this);return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e},t.Events.MarkerMove.prototype.fromJson=function(e){t.Events.MarkerMove.superClass_.fromJson.call(this,e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode},t.registry.register(t.registry.Type.EVENT,t.Events.MARKER_MOVE,t.Events.MarkerMove),t.blockRendering.MarkerSvg=function(e,n,a){this.workspace_=e,this.marker_=a,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=a.colour||e},t.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",t.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,t.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},t.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},t.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?t.blockRendering.MarkerSvg.CURSOR_CLASS:t.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},null),this.createDomInternal_(),this.svgGroup_},t.blockRendering.MarkerSvg.prototype.setParent_=function(e){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent_=e},t.blockRendering.MarkerSvg.prototype.draw=function(e,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var a=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||a,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(e,n),void 0!==(e=this.currentMarkerSvg.childNodes[0])&&e.beginElement&&e.beginElement()}else this.hide()},t.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){var n=e.getLocation().type;e.getType()==t.ASTNode.types.BLOCK?this.showWithBlock_(e):e.getType()==t.ASTNode.types.OUTPUT?this.showWithOutput_(e):n==t.connectionTypes.INPUT_VALUE?this.showWithInput_(e):n==t.connectionTypes.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==t.ASTNode.types.PREVIOUS?this.showWithPrevious_(e):e.getType()==t.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==t.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==t.ASTNode.types.STACK&&this.showWithStack_(e)},t.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var n=(e=e.getSourceBlock()).width,a=e.height,d=a*t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,C=this.constants_.CURSOR_BLOCK_PADDING;if(e.previousConnection){var D=this.constants_.shapeFor(e.previousConnection);this.positionPrevious_(n,C,d,D)}else e.outputConnection?(D=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,a,D)):this.positionBlock_(n,C,d);this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithBlock_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithOutput_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(e){var n=e.getWsCoordinate();e=n.x,this.workspace_.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithField_=function(e){var n=(e=e.getLocation()).getSize().width,a=e.getSize().height;this.positionRect_(0,0,n,a),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithInput_=function(e){var n=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(n),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithNext_=function(e){var n=e.getLocation();e=n.getSourceBlock();var a=0;n=n.getOffsetInBlock().y;var d=e.getHeightWidth().width;this.workspace_.RTL&&(a=-d),this.positionLine_(a,n,d),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithStack_=function(e){var n=(e=e.getLocation()).getHeightWidth(),a=n.width+this.constants_.CURSOR_STACK_PADDING,d=-this.constants_.CURSOR_STACK_PADDING/2,D=d;this.workspace_.RTL&&(D=-(a+d)),this.positionRect_(D,-this.constants_.CURSOR_STACK_PADDING/2,a,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},t.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,n,a){e=t.utils.svgPaths.moveBy(-n,a)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",a),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var n=e.getOffsetInBlock().x,a=e.getOffsetInBlock().y;e=t.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+a+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},t.blockRendering.MarkerSvg.prototype.positionLine_=function(e,n,a){this.markerSvgLine_.setAttribute("x",e),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",a),this.currentMarkerSvg=this.markerSvgLine_},t.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,n,a){e=t.utils.svgPaths.moveBy(e,0)+t.utils.svgPaths.lineOnAxis("h",-(e-a.width))+t.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+a.pathDown+t.utils.svgPaths.lineOnAxis("V",n)+t.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,n,a,d){e=t.utils.svgPaths.moveBy(-n,a)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+d.pathLeft+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",a),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionRect_=function(e,n,a,d){this.markerSvgRect_.setAttribute("x",e),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",a),this.markerSvgRect_.setAttribute("height",d),this.currentMarkerSvg=this.markerSvgRect_},t.blockRendering.MarkerSvg.prototype.flipRtl_=function(e){e.setAttribute("transform","scale(-1 1)")},t.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},t.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(e,n){var a=n.getSourceBlock();e=new(t.Events.get(t.Events.MARKER_MOVE))(a,this.isCursor(),e,n),t.Events.fire(e)},t.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},t.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerSvgLine_),t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerInput_),e.attributeName="stroke",t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerBlock_)}return this.markerSvg_},t.blockRendering.MarkerSvg.prototype.applyColour_=function(e){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",e=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",e),this.markerBlock_.firstChild.setAttribute("values",e))},t.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_)},t.blockRendering.PathObject=function(e,n,a){this.constants=a,this.svgRoot=e,this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},t.blockRendering.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e)},t.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},t.blockRendering.PathObject.prototype.setCursorSvg=function(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null},t.blockRendering.PathObject.prototype.setMarkerSvg=function(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null},t.blockRendering.PathObject.prototype.applyColour=function(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())},t.blockRendering.PathObject.prototype.setStyle=function(e){this.style=e},t.blockRendering.PathObject.prototype.setClass_=function(e,n){n?t.utils.dom.addClass(this.svgRoot,e):t.utils.dom.removeClass(this.svgRoot,e)},t.blockRendering.PathObject.prototype.updateHighlighted=function(e){this.svgPath.setAttribute("filter",e?"url(#"+this.constants.embossFilterId+")":"none")},t.blockRendering.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.blockRendering.PathObject.prototype.updateDisabled_=function(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},t.blockRendering.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e)},t.blockRendering.PathObject.prototype.updateDraggingDelete=function(e){this.setClass_("blocklyDraggingDelete",e)},t.blockRendering.PathObject.prototype.updateInsertionMarker=function(e){this.setClass_("blocklyInsertionMarker",e)},t.blockRendering.PathObject.prototype.updateMovable=function(e){this.setClass_("blocklyDraggable",e)},t.blockRendering.PathObject.prototype.updateReplacementFade=function(e){this.setClass_("blocklyReplaceable",e)},t.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(e,n){},t.blockRendering.Renderer=function(e){this.name=e,this.overrides=this.constants_=null},t.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},t.blockRendering.Renderer.prototype.init=function(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,t.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()},t.blockRendering.Renderer.prototype.createDom=function(e,n){this.constants_.createDom(e,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},t.blockRendering.Renderer.prototype.refreshDom=function(e,n){var a=this.getConstants();a.dispose(),this.constants_=this.makeConstants_(),this.overrides&&t.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=a.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)},t.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},t.blockRendering.Renderer.prototype.makeConstants_=function(){return new t.blockRendering.ConstantProvider},t.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new t.blockRendering.RenderInfo(this,e)},t.blockRendering.Renderer.prototype.makeDrawer_=function(e,n){return new t.blockRendering.Drawer(e,n)},t.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!t.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new t.blockRendering.Debug(this.getConstants())},t.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.blockRendering.MarkerSvg(e,this.getConstants(),n)},t.blockRendering.Renderer.prototype.makePathObject=function(e,n){return new t.blockRendering.PathObject(e,n,this.constants_)},t.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},t.blockRendering.Renderer.prototype.shouldHighlightConnection=function(e){return!0},t.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(e,n,a){return!!t.Connection.getConnectionForOrphanedConnection(e,a===t.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},t.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(e,n,a){return n.type==t.connectionTypes.OUTPUT_VALUE||n.type==t.connectionTypes.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(a,e.targetBlock(),n.type)?t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},t.blockRendering.Renderer.prototype.render=function(e){t.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()},t.geras={},t.geras.ConstantProvider=function(){t.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},t.utils.object.inherits(t.geras.ConstantProvider,t.blockRendering.ConstantProvider),t.geras.ConstantProvider.prototype.getCSS_=function(e){return t.geras.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyInsertionMarker>.blocklyPathLight,",e+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},t.geras.Highlighter=function(e){this.info_=e,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},t.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},t.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var a,n=0;a=e.elements[n];n++)t.blockRendering.Types.isLeftSquareCorner(a)?this.steps_+=this.highlightConstants_.START_POINT:t.blockRendering.Types.isLeftRoundedCorner(a)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):t.blockRendering.Types.isPreviousConnection(a)?this.steps_+=this.notchPaths_.pathLeft:t.blockRendering.Types.isHat(a)?this.steps_+=this.startPaths_.path(this.RTL_):t.blockRendering.Types.isSpacer(a)&&0!=a.width&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",a.xPos+a.width-this.highlightOffset_));this.steps_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},t.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+t.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},t.geras.Highlighter.prototype.drawValueInput=function(e){var n=e.getLastInput();if(this.RTL_){var a=e.height-n.connectionHeight;this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",a)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.Highlighter.prototype.drawStatementInput=function(e){var n=e.getLastInput();if(this.RTL_){var a=e.height-2*this.insideCornerPaths_.height;this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",a)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)},t.geras.Highlighter.prototype.drawRightSideRow=function(e){var n=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n),e.height>this.highlightOffset_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))},t.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=t.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):t.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=t.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},t.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=t.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t.blockRendering.Types.isLeftRoundedCorner((e=this.info_.topRow).elements[0])?this.steps_+=t.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},t.geras.Highlighter.prototype.drawInlineInput=function(e){var n=this.highlightOffset_,a=e.xPos+e.connectionWidth,d=e.centerline-e.height/2,C=e.width-e.connectionWidth,D=d+n;this.RTL_?(d=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=t.utils.svgPaths.moveTo(a-n,D)+t.utils.svgPaths.lineOnAxis("v",d)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",e)+t.utils.svgPaths.lineOnAxis("h",C)):this.inlineSteps_+=t.utils.svgPaths.moveTo(e.xPos+e.width+n,D)+t.utils.svgPaths.lineOnAxis("v",e.height)+t.utils.svgPaths.lineOnAxis("h",-C)+t.utils.svgPaths.moveTo(a,d+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.InlineInput=function(e,n){t.geras.InlineInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.InlineInput,t.blockRendering.InlineInput),t.geras.StatementInput=function(e,n){t.geras.StatementInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.StatementInput,t.blockRendering.StatementInput),t.geras.RenderInfo=function(e,n){t.geras.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.geras.RenderInfo,t.blockRendering.RenderInfo),t.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.geras.RenderInfo.prototype.populateBottomRow_=function(){t.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},t.geras.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.geras.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.geras.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=e.align)},t.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var a,e=!1,n=0;a=this.rows[n];n++)a.hasExternalInput&&(e=!0);for(n=0;a=this.rows[n];n++){var d=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0]))),d.length){for(var C=0;C<d.length-1;C++){a.elements.push(d[C]);var D=this.getInRowSpacing_(d[C],d[C+1]);a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,D))}a.elements.push(d[d.length-1]),a.endsWithElemSpacer()&&(D=this.getInRowSpacing_(d[d.length-1],null),e&&a.hasDummyInput&&(D+=this.constants_.TAB_WIDTH),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,D)))}}},t.geras.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&(!n||t.blockRendering.Types.isStatementInput(n)))return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(t.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(t.blockRendering.Types.isLeftRoundedCorner(e)&&n){if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(t.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var a=e.yPos;return t.blockRendering.Types.isField(n)||t.blockRendering.Types.isIcon(n)?(a+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(a+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):a=t.blockRendering.Types.isInlineInput(n)?a+n.height/2:a+e.height/2,a},t.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var d,e=0,n=null,a=this.rows.length-1;d=this.rows[a];a--)d.nextRightEdge=e,t.blockRendering.Types.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),n&&n.hasStatement&&d.width<n.width?d.nextRightEdge=n.width:e=d.width,n=d);for(a=e=0;d=this.rows[a];a++)d.hasStatement?e=this.getDesiredRowWidth_(d):t.blockRendering.Types.isSpacer(d)?d.width=Math.max(e,d.nextRightEdge):(0<(e=Math.max(e,d.nextRightEdge)-d.width)&&this.addAlignmentPadding_(d,e),e=d.width)}else t.geras.RenderInfo.superClass_.alignRowElements_.call(this)},t.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:t.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.geras.RenderInfo.prototype.finalize_=function(){for(var d,e=0,n=0,a=0;d=this.rows[a];a++){d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var C=n-this.topRow.ascenderHeight;d==this.bottomRow&&C<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=C=this.constants_.MIN_BLOCK_HEIGHT-C,n+=C),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},t.geras.Drawer=function(e,n){t.geras.Drawer.superClass_.constructor.call(this,e,n),this.highlighter_=new t.geras.Highlighter(n)},t.utils.object.inherits(t.geras.Drawer,t.blockRendering.Drawer),t.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),t.geras.Drawer.superClass_.drawTop_.call(this)},t.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),t.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},t.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),t.geras.Drawer.superClass_.drawValueInput_.call(this,e)},t.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),t.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},t.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),t.geras.Drawer.superClass_.drawBottom_.call(this)},t.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),t.geras.Drawer.superClass_.drawLeft_.call(this)},t.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),t.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},t.geras.Drawer.prototype.positionInlineInputConnection_=function(e){if(e.connectionModel){var a=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(a*=-1),e.connectionModel.setOffsetInBlock(a,e.centerline-e.height/2+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionStatementInputConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(a=this.info_.RTL?-1*a:a+this.constants_.DARK_PATH_OFFSET,e.yPos+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionExternalValueConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.geras.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var n=e.connection,a=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-a:a)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}},t.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=t.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},t.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},t.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,a=(1-Math.SQRT1_2)*(e+n)-n,d=t.utils.svgPaths.moveBy(a,a)+t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-a-n,e-a)),C=t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e+n,e+n)),D=t.utils.svgPaths.moveBy(a,-a)+t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e-a,a+n));return{width:e+n,height:e,pathTop:function(B){return B?d:""},pathBottom:function(B){return B?C:D}}},t.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,a=(1-Math.SQRT1_2)*(e-n)+n,d=t.utils.svgPaths.moveBy(a,a)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e-a,-a+n)),C=t.utils.svgPaths.moveBy(n,e)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e,-e+n)),D=-a,B=t.utils.svgPaths.moveBy(a,D)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(-a+n,-D-e));return{height:e,topLeft:function(z){return z?d:C},bottomLeft:function(){return B}}},t.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,a=t.utils.svgPaths.moveBy(-2,3.4-n)+t.utils.svgPaths.lineTo(-.45*e,-2.1),d=t.utils.svgPaths.lineOnAxis("v",2.5)+t.utils.svgPaths.moveBy(.97*-e,2.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(.05*-e,10),t.utils.svgPaths.point(.3*e,9.5)])+t.utils.svgPaths.moveBy(.67*e,-1.9)+t.utils.svgPaths.lineOnAxis("v",2.5),C=t.utils.svgPaths.lineOnAxis("v",-1.5)+t.utils.svgPaths.moveBy(-.92*e,-.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(-.19*e,-5.5),t.utils.svgPaths.point(0,-11)])+t.utils.svgPaths.moveBy(.92*e,1),D=t.utils.svgPaths.moveBy(-5,n-.7)+t.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:n,pathUp:function(B){return B?a:C},pathDown:function(B){return B?d:D}}},t.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:t.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},t.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:t.utils.svgPaths.lineTo(5.1,2.6)+t.utils.svgPaths.moveBy(-10.2,6.8)+t.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},t.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,n=t.utils.svgPaths.moveBy(25,-8.7)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(29.7,-6.2),t.utils.svgPaths.point(57.2,-.5),t.utils.svgPaths.point(75,8.7)]),a=t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(17.8,-9.2),t.utils.svgPaths.point(45.3,-14.9),t.utils.svgPaths.point(75,-8.7)])+t.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(d){return d?n:a}}},t.geras.PathObject=function(e,n,a){this.constants=a,this.svgRoot=e,this.svgPathDark=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},t.utils.object.inherits(t.geras.PathObject,t.blockRendering.PathObject),t.geras.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)},t.geras.PathObject.prototype.setHighlightPath=function(e){this.svgPathLight.setAttribute("d",e)},t.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},t.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),t.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},t.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=t.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},t.geras.PathObject.prototype.updateHighlighted=function(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},t.geras.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.geras.PathObject.prototype.updateDisabled_=function(e){t.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},t.geras.Renderer=function(e){t.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},t.utils.object.inherits(t.geras.Renderer,t.blockRendering.Renderer),t.geras.Renderer.prototype.init=function(e,n){t.geras.Renderer.superClass_.init.call(this,e,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},t.geras.Renderer.prototype.refreshDom=function(e,n){t.geras.Renderer.superClass_.refreshDom.call(this,e,n),this.getHighlightConstants().init()},t.geras.Renderer.prototype.makeConstants_=function(){return new t.geras.ConstantProvider},t.geras.Renderer.prototype.makeRenderInfo_=function(e){return new t.geras.RenderInfo(this,e)},t.geras.Renderer.prototype.makeDrawer_=function(e,n){return new t.geras.Drawer(e,n)},t.geras.Renderer.prototype.makePathObject=function(e,n){return new t.geras.PathObject(e,n,this.getConstants())},t.geras.Renderer.prototype.makeHighlightConstants_=function(){return new t.geras.HighlightConstantProvider(this.getConstants())},t.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},t.blockRendering.register("geras",t.geras.Renderer),t.thrasos={},t.thrasos.RenderInfo=function(e,n){t.thrasos.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.thrasos.RenderInfo,t.blockRendering.RenderInfo),t.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var a,e=!1,n=0;a=this.rows[n];n++)a.hasExternalInput&&(e=!0);for(n=0;a=this.rows[n];n++){var d=a.elements;a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0])));for(var C=0;C<d.length-1;C++){a.elements.push(d[C]);var D=this.getInRowSpacing_(d[C],d[C+1]);a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,D))}a.elements.push(d[d.length-1]),a.endsWithElemSpacer()&&(D=this.getInRowSpacing_(d[d.length-1],null),e&&a.hasDummyInput&&(D+=this.constants_.TAB_WIDTH),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,D)))}},t.thrasos.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&!n)return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))return n.notchOffset}return t.blockRendering.Types.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var a=e.yPos;return t.blockRendering.Types.isField(n)&&e.hasStatement?a+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):a+e.height/2},t.thrasos.RenderInfo.prototype.finalize_=function(){for(var d,e=0,n=0,a=0;d=this.rows[a];a++){d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var C=n-this.topRow.ascenderHeight;d==this.bottomRow&&C<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=C=this.constants_.MIN_BLOCK_HEIGHT-C,n+=C),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline},t.thrasos.Renderer=function(e){t.thrasos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.thrasos.Renderer,t.blockRendering.Renderer),t.thrasos.Renderer.prototype.makeRenderInfo_=function(e){return new t.thrasos.RenderInfo(this,e)},t.blockRendering.register("thrasos",t.thrasos.Renderer),t.zelos={},t.zelos.ConstantProvider=function(){t.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},t.utils.object.inherits(t.zelos.ConstantProvider,t.blockRendering.ConstantProvider),t.zelos.ConstantProvider.prototype.setFontConstants_=function(e){t.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},t.zelos.ConstantProvider.prototype.init=function(){t.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},t.zelos.ConstantProvider.prototype.setDynamicProperties_=function(e){t.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE},t.zelos.ConstantProvider.prototype.dispose=function(){t.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&t.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&t.utils.dom.removeNode(this.replacementGlowFilter_)},t.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(25,-e),t.utils.svgPaths.point(71,-e),t.utils.svgPaths.point(n,0)])}},t.zelos.ConstantProvider.prototype.makeHexagonal=function(){function e(a,d,C){var D=a/2;return t.utils.svgPaths.lineTo(-(C=C?-1:1)*(D=D>n?n:D),a=(d?-1:1)*a/2)+t.utils.svgPaths.lineTo(C*D,a)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(a){return(a/=2)>n?n:a},height:function(a){return a},connectionOffsetY:function(a){return a/2},connectionOffsetX:function(a){return-a},pathDown:function(a){return e(a,!1,!1)},pathUp:function(a){return e(a,!0,!1)},pathRightDown:function(a){return e(a,!1,!0)},pathRightUp:function(a){return e(a,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeRounded=function(){function e(d,C,D){var B=d>a?d-a:0;return t.utils.svgPaths.arc("a","0 0,1",d=(d>a?a:d)/2,t.utils.svgPaths.point((C?-1:1)*d,(C?-1:1)*d))+t.utils.svgPaths.lineOnAxis("v",(D?1:-1)*B)+t.utils.svgPaths.arc("a","0 0,1",d,t.utils.svgPaths.point((C?1:-1)*d,(C?-1:1)*d))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,a=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(d){return(d/=2)>n?n:d},height:function(d){return d},connectionOffsetY:function(d){return d/2},connectionOffsetX:function(d){return-d},pathDown:function(d){return e(d,!1,!1)},pathUp:function(d){return e(d,!0,!1)},pathRightDown:function(d){return e(d,!1,!0)},pathRightUp:function(d){return e(d,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeSquared=function(){function e(a,d,C){return a-=2*n,t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((d?-1:1)*n,(d?-1:1)*n))+t.utils.svgPaths.lineOnAxis("v",(C?1:-1)*a)+t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((d?1:-1)*n,(d?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(a){return n},height:function(a){return a},connectionOffsetY:function(a){return a/2},connectionOffsetX:function(a){return-a},pathDown:function(a){return e(a,!1,!1)},pathUp:function(a){return e(a,!0,!1)},pathRightDown:function(a){return e(a,!1,!0)},pathRightUp:function(a){return e(a,!1,!0)}}},t.zelos.ConstantProvider.prototype.shapeFor=function(e){var n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},t.zelos.ConstantProvider.prototype.makeNotch=function(){function e(be){return t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(be*C/2,0),t.utils.svgPaths.point(be*C*3/4,B/2),t.utils.svgPaths.point(be*C,B)])+t.utils.svgPaths.line([t.utils.svgPaths.point(be*C,D)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(be*C/4,B/2),t.utils.svgPaths.point(be*C/2,B),t.utils.svgPaths.point(be*C,B)])+t.utils.svgPaths.lineOnAxis("h",be*d)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(be*C/2,0),t.utils.svgPaths.point(be*C*3/4,-B/2),t.utils.svgPaths.point(be*C,-B)])+t.utils.svgPaths.line([t.utils.svgPaths.point(be*C,-D)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(be*C/4,-B/2),t.utils.svgPaths.point(be*C/2,-B),t.utils.svgPaths.point(be*C,-B)])}var n=this.NOTCH_WIDTH,a=this.NOTCH_HEIGHT,d=n/3,C=d/3,D=a/2,B=D/2,z=e(1),oe=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:a,pathLeft:z,pathRight:oe}},t.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),a=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:n,pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:a,pathBottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e))}},t.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#000",e,.15)||e},t.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#000",e,.25)||e},t.zelos.ConstantProvider.prototype.createDom=function(e,n,a){t.zelos.ConstantProvider.superClass_.createDom.call(this,e,n,a),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),a=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},t.zelos.ConstantProvider.prototype.getCSS_=function(e){return[e+" .blocklyText,",e+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",e+" .blocklyText {","fill: #fff;","}",e+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",e+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text,",e+" .blocklyNonEditableText>g>text,",e+" .blocklyEditableText>g>text {","fill: #575E75;","}",e+" .blocklyFlyoutLabelText {","fill: #575E75;","}",e+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",e+" .blocklyDropdownText {","fill: #fff !important;","}",e+".blocklyWidgetDiv .goog-menuitem,",e+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",e+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",e+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",e+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",e+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.zelos.TopRow=function(e){t.zelos.TopRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.TopRow,t.blockRendering.TopRow),t.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.TopRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection},t.zelos.TopRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection},t.zelos.BottomRow=function(e){t.zelos.BottomRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.BottomRow,t.blockRendering.BottomRow),t.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection},t.zelos.BottomRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection},t.zelos.RightConnectionShape=function(e){t.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},t.utils.object.inherits(t.zelos.RightConnectionShape,t.blockRendering.Measurable),t.zelos.RenderInfo=function(e,n){t.zelos.RenderInfo.superClass_.constructor.call(this,e,n),this.topRow=new t.zelos.TopRow(this.constants_),this.bottomRow=new t.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new t.zelos.RightConnectionShape(this.constants_):null},t.utils.object.inherits(t.zelos.RenderInfo,t.blockRendering.RenderInfo),t.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.inputTypes.STATEMENT||n.type==t.inputTypes.STATEMENT||(e.type==t.inputTypes.VALUE||e.type==t.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},t.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):t.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&t.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){if(t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var a=t.blockRendering.Types.isInputRow(e)&&e.hasStatement,d=t.blockRendering.Types.isInputRow(n)&&n.hasStatement;return d||a?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),d&&a?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):t.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):t.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){var a=this.width-this.startX;return t.blockRendering.Types.isInputRow(e)&&e.hasStatement||t.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(a,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):a},t.zelos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(e.hasStatement&&!t.blockRendering.Types.isSpacer(n)&&!t.blockRendering.Types.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(t.blockRendering.Types.isInlineInput(n)){var a=n.connectedBlock;if(a&&a.outputConnection&&a.nextConnection)return e.yPos+a.height/2}return t.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,n)},t.zelos.RenderInfo.prototype.addInput_=function(e,n){e.type==t.inputTypes.DUMMY&&n.hasDummyInput&&n.align==t.constants.ALIGN.LEFT&&e.align==t.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=e),t.zelos.RenderInfo.superClass_.addInput_.call(this,e,n)},t.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,n){if(e.rightAlignedDummyInput){for(var a,C,d=0;(C=e.elements[d])&&(t.blockRendering.Types.isSpacer(C)&&(a=C),!t.blockRendering.Types.isField(C)||C.parentInput!=e.rightAlignedDummyInput);d++);if(a)return a.width+=n,void(e.width+=n)}t.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,n)},t.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=e,a=2;a<this.rows.length-1;a+=2){var d=this.rows[a-1],C=this.rows[a],D=this.rows[a+1];if(d=2==a?!!this.topRow.hasPreviousConnection:!!d.followsStatement,D=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!D.precedesStatement,t.blockRendering.Types.isInputRow(C)&&C.hasStatement)C.measure(),n=C.width-C.getLastInput().width+e;else if(d&&(2==a||D)&&t.blockRendering.Types.isInputRow(C)&&!C.hasStatement){D=C.xPos,d=null;for(var z,B=0;z=C.elements[B];B++)t.blockRendering.Types.isSpacer(z)&&(d=z),!(d&&(t.blockRendering.Types.isField(z)||t.blockRendering.Types.isInput(z))&&D<n)||t.blockRendering.Types.isField(z)&&(z.field instanceof t.FieldLabel||z.field instanceof t.FieldImage)||(d.width+=n-D),D+=z.width}}},t.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var a,e=0,n=0;a=this.rows[n];n++)a.yPos=e,e+=a.height;this.height=e,e=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=e,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(e),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),a=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(a=n,this.rightSide.height=e,this.rightSide.width=a,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+a),this.startX=n,this.width+=n+a,this.widthWithChildren+=n+a}},t.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var a,e=0,n=0;a=this.rows[n];n++)if(t.blockRendering.Types.isInputRow(a)){e=a.elements[a.elements.length-2];var d=this.getNegativeSpacing_(a.elements[1]),C=this.getNegativeSpacing_(e),D=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(e=d+C)<D&&(d=(e=this.width-D)/2,C=e/2),a.elements.unshift(new t.blockRendering.InRowSpacer(this.constants_,-d)),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,-C))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;a=this.rows[n];n++)t.blockRendering.Types.isTopOrBottomRow(a)&&(a.elements[1].width-=e,a.elements[1].widthWithConnectedBlocks-=e),a.width-=e,a.widthWithConnectedBlocks-=e}},t.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){if(!e)return 0;var n=this.outputConnection.width,a=this.outputConnection.shape.type,d=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return a===d.SHAPES.ROUND?n-(a=this.height/2>(a=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?a:this.height/2)*(1-Math.sin(Math.acos((a-this.constants_.SMALL_PADDING)/a))):0;if(t.blockRendering.Types.isInlineInput(e)){var C=e.connectedBlock;return e=C?C.pathObject.outputShapeType:e.shape.type,C&&C.outputConnection&&(C.statementInputCount||C.nextConnection)||a==d.SHAPES.HEXAGONAL&&a!=e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[a][e]}return t.blockRendering.Types.isField(e)?a==d.SHAPES.ROUND&&e.field instanceof t.FieldTextInput?n-2.75*d.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[a][0]:t.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0},t.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var n=this.rows[e-1],a=this.rows[e],d=this.rows[e+1],C=2==e,D=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!d.precedesStatement;if(C?this.topRow.hasPreviousConnection:n.followsStatement){var B=3==a.elements.length&&(a.elements[1].field instanceof t.FieldLabel||a.elements[1].field instanceof t.FieldImage);if(!C&&B)n.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING,a.height-=this.constants_.MEDIUM_PADDING;else if(C||D){if(D){for(C=!1,D=0;B=a.elements[D];D++)if(t.blockRendering.Types.isInlineInput(B)&&B.connectedBlock&&!B.connectedBlock.isShadow()&&40<=B.connectedBlock.getHeightWidth().height){C=!0;break}C&&(n.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},t.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),t.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},t.zelos.Drawer=function(e,n){t.zelos.Drawer.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.zelos.Drawer,t.blockRendering.Drawer),t.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},t.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):t.zelos.Drawer.superClass_.drawOutline_.call(this)},t.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():t.zelos.Drawer.superClass_.drawLeft_.call(this)},t.zelos.Drawer.prototype.drawRightSideRow_=function(e){if(!(0>=e.height))if(e.precedesStatement||e.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=e.height-(e.precedesStatement?n:0))?t.utils.svgPaths.lineOnAxis("V",e.yPos+n):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},t.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},t.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",e.width)},t.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",-e.width)},t.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var n=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var a=e.width-2*e.connectionWidth;e=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+t.utils.svgPaths.lineOnAxis("h",a)+e.shape.pathRightDown(e.height)+t.utils.svgPaths.lineOnAxis("h",-a)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(n,e)}},t.zelos.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),a=n.xPos+n.notchOffset+n.shape.width,d=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,C=e.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",a)+d+t.utils.svgPaths.lineOnAxis("v",C)+n+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.zelos.MarkerSvg=function(e,n,a){t.zelos.MarkerSvg.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.zelos.MarkerSvg,t.blockRendering.MarkerSvg),t.zelos.MarkerSvg.prototype.showWithInputOutput_=function(e){var n=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle_(e.x,e.y),this.setParent_(n),this.showCurrent_()},t.zelos.MarkerSvg.prototype.showWithOutput_=function(e){this.showWithInputOutput_(e)},t.zelos.MarkerSvg.prototype.showWithInput_=function(e){this.showWithInputOutput_(e)},t.zelos.MarkerSvg.prototype.showWithBlock_=function(e){var n=(e=e.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(e),this.showCurrent_()},t.zelos.MarkerSvg.prototype.positionCircle_=function(e,n){this.markerCircle_.setAttribute("cx",e),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},t.zelos.MarkerSvg.prototype.hide=function(){t.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},t.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(t.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerCircle_)}return this.markerSvg_},t.zelos.MarkerSvg.prototype.applyColour_=function(e){t.zelos.MarkerSvg.superClass_.applyColour_.call(this,e),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},t.zelos.PathObject=function(e,n,a){t.zelos.PathObject.superClass_.constructor.call(this,e,n,a),this.constants=a,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},t.utils.object.inherits(t.zelos.PathObject,t.blockRendering.PathObject),t.zelos.PathObject.prototype.setPath=function(e){t.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},t.zelos.PathObject.prototype.applyColour=function(e){for(var n in t.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.flipRTL=function(){for(var e in t.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[e].setAttribute("transform","scale(-1 1)")},t.zelos.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},t.zelos.PathObject.prototype.updateReplacementFade=function(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},t.zelos.PathObject.prototype.updateShapeForInputHighlight=function(e,n){e=e.getParentInput().name,(e=this.getOutlinePath_(e))&&(n?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))},t.zelos.PathObject.prototype.beginDrawing=function(){for(var e in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[e]=1},t.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var e in this.remainingOutlines_)this.removeOutlinePath_(e);this.remainingOutlines_=null},t.zelos.PathObject.prototype.setOutlinePath=function(e,n){(e=this.getOutlinePath_(e)).setAttribute("d",n),e.setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},t.zelos.PathObject.prototype.removeOutlinePath_=function(e){this.outlines_[e].parentNode.removeChild(this.outlines_[e]),delete this.outlines_[e]},t.zelos.Renderer=function(e){t.zelos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.Renderer,t.blockRendering.Renderer),t.zelos.Renderer.prototype.makeConstants_=function(){return new t.zelos.ConstantProvider},t.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new t.zelos.RenderInfo(this,e)},t.zelos.Renderer.prototype.makeDrawer_=function(e,n){return new t.zelos.Drawer(e,n)},t.zelos.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.zelos.MarkerSvg(e,this.getConstants(),n)},t.zelos.Renderer.prototype.makePathObject=function(e,n){return new t.zelos.PathObject(e,n,this.getConstants())},t.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=t.connectionTypes.INPUT_VALUE&&e.type!==t.connectionTypes.OUTPUT_VALUE},t.zelos.Renderer.prototype.getConnectionPreviewMethod=function(e,n,a){return n.type==t.connectionTypes.OUTPUT_VALUE?e.isConnected()?t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:t.zelos.Renderer.superClass_.getConnectionPreviewMethod(e,n,a)},t.blockRendering.register("zelos",t.zelos.Renderer),t.Themes.Dark=t.Theme.defineTheme("dark",{base:t.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),t.Themes.Deuteranopia={},t.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},t.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},t.Themes.Deuteranopia=new t.Theme("deuteranopia",t.Themes.Deuteranopia.defaultBlockStyles,t.Themes.Deuteranopia.categoryStyles),t.Themes.HighContrast={},t.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},t.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},t.Themes.HighContrast=new t.Theme("highcontrast",t.Themes.HighContrast.defaultBlockStyles,t.Themes.HighContrast.categoryStyles),t.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),t.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),t.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),t.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),t.Themes.Tritanopia={},t.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},t.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},t.Themes.Tritanopia=new t.Theme("tritanopia",t.Themes.Tritanopia.defaultBlockStyles,t.Themes.Tritanopia.categoryStyles),t.requires={},t}.apply(Z,[]))&&(V.exports=m)},18783:function(V,Z,g){var m,t;m=[g(55484)],void 0!==(t=function(e){"use strict";return e.Blocks={},e.Blocks}.apply(Z,m))&&(V.exports=t)},55484:function(V,Z,g){var m,t;m=[g(81069)],void 0!==(t=function(e){"use strict";return e.Blocks.colour={},e.Constants={},e.Constants.Colour={},e.Constants.Colour.HUE=20,e.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),e.Constants.Lists={},e.Constants.Lists.HUE=260,e.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),e.Blocks.lists_create_with={init:function(){this.setHelpUrl(e.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new e.Mutator(["lists_create_with_item"])),this.setTooltip(e.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var a=n.newBlock("lists_create_with_container");a.initSvg();for(var d=a.getInput("STACK").connection,C=0;C<this.itemCount_;C++){var D=n.newBlock("lists_create_with_item");D.initSvg(),d.connect(D.previousConnection),d=D.nextConnection}return a},compose:function(n){var a=n.getInputTargetBlock("STACK");for(n=[];a&&!a.isInsertionMarker();)n.push(a.valueConnection_),a=a.nextConnection&&a.nextConnection.targetBlock();for(a=0;a<this.itemCount_;a++){var d=this.getInput("ADD"+a).connection.targetConnection;d&&-1==n.indexOf(d)&&d.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),a=0;a<this.itemCount_;a++)e.Mutator.reconnect(n[a],this,"ADD"+a)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var a=0;n;){var d=this.getInput("ADD"+a);n.valueConnection_=d&&d.connection.targetConnection,a++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(e.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var a=this.appendValueInput("ADD"+n).setAlign(e.ALIGN_RIGHT);0==n&&a.appendField(e.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},e.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_indexOf={init:function(){var n=[[e.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[e.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(e.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new e.FieldDropdown(n),"END"),this.setInputsInline(!0);var a=this;this.setTooltip(function(){return e.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",a.workspace.options.oneBasedIndex?"0":"-1")})}},e.Blocks.lists_getIndex={init:function(){var n=[[e.Msg.LISTS_GET_INDEX_GET,"GET"],[e.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[e.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new e.FieldDropdown(n,function(d){d="REMOVE"==d,this.getSourceBlock().updateStatement_(d)}),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),e.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var a=this;this.setTooltip(function(){var d=a.getFieldValue("MODE"),C=a.getFieldValue("WHERE"),D="";switch(d+" "+C){case"GET FROM_START":case"GET FROM_END":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":D=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==C||"FROM_END"==C)&&(D+="  "+("FROM_START"==C?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",a.workspace.options.oneBasedIndex?"#1":"#0")),D})},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var a=this.getInput("AT").type==e.INPUT_VALUE;return n.setAttribute("at",a),n},domToMutation:function(n){var a="true"==n.getAttribute("statement");this.updateStatement_(a),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var a=new e.FieldDropdown(this.WHERE_OPTIONS,function(d){var C="FROM_START"==d||"FROM_END"==d;if(C!=n){var D=this.getSourceBlock();return D.updateAt_(C),D.setFieldValue(d,"WHERE"),null}});this.getInput("AT").appendField(a,"WHERE"),e.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_setIndex={init:function(){var n=[[e.Msg.LISTS_SET_INDEX_SET,"SET"],[e.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new e.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(e.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var a=this;this.setTooltip(function(){var d=a.getFieldValue("MODE"),C=a.getFieldValue("WHERE"),D="";switch(d+" "+C){case"SET FROM_START":case"SET FROM_END":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":D=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==C||"FROM_END"==C)&&(D+="  "+e.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",a.workspace.options.oneBasedIndex?"#1":"#0")),D})},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT").type==e.INPUT_VALUE;return n.setAttribute("at",a),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var a=new e.FieldDropdown(this.WHERE_OPTIONS,function(d){var C="FROM_START"==d||"FROM_END"==d;if(C!=n){var D=this.getSourceBlock();return D.updateAt_(C),D.setFieldValue(d,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(a,"WHERE")}},e.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT1").type==e.INPUT_VALUE;return n.setAttribute("at1",a),a=this.getInput("AT2").type==e.INPUT_VALUE,n.setAttribute("at2",a),n},domToMutation:function(n){var a="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,a),this.updateAt_(2,n)},updateAt_:function(n,a){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),a?(this.appendValueInput("AT"+n).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var d=new e.FieldDropdown(this["WHERE_OPTIONS_"+n],function(C){var D="FROM_START"==C||"FROM_END"==C;if(D!=a){var B=this.getSourceBlock();return B.updateAt_(n,D),B.setFieldValue(C,"WHERE"+n),null}});this.getInput("AT"+n).appendField(d,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_sort={init:function(){this.jsonInit({message0:e.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[e.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[e.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[e.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[e.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[e.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:e.Msg.LISTS_SORT_TOOLTIP,helpUrl:e.Msg.LISTS_SORT_HELPURL})}},e.Blocks.lists_split={init:function(){var n=this,a=new e.FieldDropdown([[e.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[e.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(d){n.updateType_(d)});this.setHelpUrl(e.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(a,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(e.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var d=n.getFieldValue("MODE");if("SPLIT"==d)return e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==d)return e.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+d)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var a=this.getInput("INPUT").connection;a.setShadowDom(null);var d=a.targetBlock();d&&(a.disconnect(),d.isShadow()?d.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},e.Blocks.logic={},e.Constants.Logic={},e.Constants.Logic.HUE=210,e.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),e.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),e.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},e.Extensions.register("logic_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Logic.TOOLTIPS_BY_OP)),e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=e.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var a=n.newBlock("controls_if_if");a.initSvg();for(var d=a.nextConnection,C=1;C<=this.elseifCount_;C++){var D=n.newBlock("controls_if_elseif");D.initSvg(),d.connect(D.previousConnection),d=D.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),d.connect(n.previousConnection)),a},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var a=[null],d=[null],C=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,a.push(n.valueConnection_),d.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,C=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(a,d,C)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var a=1;n;){switch(n.type){case"controls_if_elseif":var d=this.getInput("IF"+a),C=this.getInput("DO"+a);n.valueConnection_=d&&d.connection.targetConnection,n.statementConnection_=C&&C.connection.targetConnection,a++;break;case"controls_if_else":C=this.getInput("ELSE"),n.statementConnection_=C&&C.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],a=[null],d=null;this.getInput("ELSE")&&(d=this.getInput("ELSE").connection.targetConnection);for(var C=1;this.getInput("IF"+C);){var D=this.getInput("IF"+C),B=this.getInput("DO"+C);n.push(D.connection.targetConnection),a.push(B.connection.targetConnection),C++}this.updateShape_(),this.reconnectChildBlocks_(n,a,d)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(e.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(e.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,a,d){for(var C=1;C<=this.elseifCount_;C++)e.Mutator.reconnect(n[C],this,"IF"+C),e.Mutator.reconnect(a[C],this,"DO"+C);e.Mutator.reconnect(d,this,"ELSE")}},e.Extensions.registerMutator("controls_if_mutator",e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_4:"":e.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},e.Extensions.register("controls_if_tooltip",e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var a=this.getInputTargetBlock("A"),d=this.getInputTargetBlock("B");a&&d&&!this.workspace.connectionChecker.doTypeChecks(a.outputConnection,d.outputConnection)&&(e.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==a&&(a.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(a=this.prevBlocks_[1])!==d&&(d.unplug(),!a||a.isDisposed()||a.isShadow()||this.getInput("B").connection.connect(a.outputConnection)),this.bumpNeighbours(),e.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},e.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},e.Extensions.register("logic_compare",e.Constants.Logic.LOGIC_COMPARE_EXTENSION),e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var a=this.getInputTargetBlock("THEN"),d=this.getInputTargetBlock("ELSE"),C=this.outputConnection.targetConnection;if((a||d)&&C)for(var D=0;2>D;D++){var B=1==D?a:d;B&&!B.workspace.connectionChecker.doTypeChecks(B.outputConnection,C)&&(e.Events.setGroup(n.group),C===this.prevParentConnection_?(this.unplug(),C.getSourceBlock().bumpNeighbours()):(B.unplug(),B.bumpNeighbours()),e.Events.setGroup(!1))}this.prevParentConnection_=C}},e.Extensions.registerMixin("logic_ternary",e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),e.Blocks.loops={},e.Constants.Loops={},e.Constants.Loops.HUE=120,e.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),e.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},e.Extensions.register("controls_whileUntil_tooltip",e.Extensions.buildTooltipForDropdown("MODE",e.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},e.Extensions.register("controls_flow_tooltip",e.Extensions.buildTooltipForDropdown("FLOW",e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var a=this.getField("VAR").getVariable(),d=a.name;if(!this.isCollapsed()&&null!=d){var C={enabled:!0};C.text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",d),a=e.Variables.generateVariableFieldDom(a),(d=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),d.appendChild(a),C.callback=e.ContextMenu.callbackFactory(this,d),n.push(C)}}}},e.Extensions.registerMixin("contextMenu_newGetVariableBlock",e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),e.Extensions.register("controls_for_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),e.Extensions.register("controls_forEach_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==e.Events.BLOCK_MOVE){var a=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(a?null:e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var d=e.Events.getGroup();e.Events.setGroup(n.group),this.setEnabled(a),e.Events.setGroup(d)}}}},e.Extensions.registerMixin("controls_flow_in_loop_check",e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),e.Blocks.math={},e.Constants.Math={},e.Constants.Math.HUE=230,e.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),e.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},e.Extensions.register("math_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Math.TOOLTIPS_BY_OP)),e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",a),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var a=this.getInput("DIVISOR");n?a||this.appendValueInput("DIVISOR").setCheck("Number"):a&&this.removeInput("DIVISOR")}},e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},e.Extensions.registerMutator("math_is_divisibleby_mutator",e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),e.Extensions.register("math_change_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),e.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},e.Extensions.registerMutator("math_modes_of_list_mutator",e.Constants.Math.LIST_MODES_MUTATOR_MIXIN,e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),e.Blocks.procedures={},e.Blocks.procedures_defnoreturn={init:function(){var n=e.Procedures.findLegalName("",this);(n=new e.FieldTextInput(n,e.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(e.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=e.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),e.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{e.Events.enable()}},mutationToDom:function(n){var a=e.utils.xml.createElement("mutation");n&&a.setAttribute("name",this.getFieldValue("NAME"));for(var d=0;d<this.argumentVarModels_.length;d++){var C=e.utils.xml.createElement("arg"),D=this.argumentVarModels_[d];C.setAttribute("name",D.name),C.setAttribute("varid",D.getId()),n&&this.paramIds_&&C.setAttribute("paramId",this.paramIds_[d]),a.appendChild(C)}return this.hasStatements_||a.setAttribute("statements","false"),a},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var d,a=0;d=n.childNodes[a];a++)if("arg"==d.nodeName.toLowerCase()){var C=d.getAttribute("name");d=d.getAttribute("varid")||d.getAttribute("varId"),this.arguments_.push(C),null!=(d=e.Variables.getOrCreateVariablePackage(this.workspace,d,C,""))?this.argumentVarModels_.push(d):console.log("Failed to create a variable with name "+C+", ignoring.")}this.updateParams_(),e.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var a=e.utils.xml.createElement("block");a.setAttribute("type","procedures_mutatorcontainer");var d=e.utils.xml.createElement("statement");d.setAttribute("name","STACK"),a.appendChild(d);for(var C=0;C<this.arguments_.length;C++){var D=e.utils.xml.createElement("block");D.setAttribute("type","procedures_mutatorarg");var B=e.utils.xml.createElement("field");B.setAttribute("name","NAME");var z=e.utils.xml.createTextNode(this.arguments_[C]);B.appendChild(z),D.appendChild(B),B=e.utils.xml.createElement("next"),D.appendChild(B),d.appendChild(D),d=B}return n=e.Xml.domToBlock(a,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),e.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var a=n.getInputTargetBlock("STACK");a&&!a.isInsertionMarker();){var d=a.getFieldValue("NAME");this.arguments_.push(d),d=this.workspace.getVariable(d,""),this.argumentVarModels_.push(d),this.paramIds_.push(a.id),a=a.nextConnection&&a.nextConnection.targetBlock()}this.updateParams_(),e.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),e.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,a){var d=this.workspace.getVariableById(n);if(""==d.type){d=d.name,a=this.workspace.getVariableById(a);for(var C=!1,D=0;D<this.argumentVarModels_.length;D++)this.argumentVarModels_[D].getId()==n&&(this.arguments_[D]=a.name,this.argumentVarModels_[D]=a,C=!0);C&&(this.displayRenamedVar_(d,a.name),e.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var a=n.name,d=!1,C=0;C<this.argumentVarModels_.length;C++)if(this.argumentVarModels_[C].getId()==n.getId()){var D=this.arguments_[C];this.arguments_[C]=a,d=!0}d&&(this.displayRenamedVar_(D,a),e.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,a){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var D,d=this.mutator.workspace_.getAllBlocks(!1),C=0;D=d[C];C++)"procedures_mutatorarg"==D.type&&e.Names.equals(n,D.getFieldValue("NAME"))&&D.setFieldValue(a,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var a={enabled:!0},d=this.getFieldValue("NAME");a.text=e.Msg.PROCEDURES_CREATE_DO.replace("%1",d);var C=e.utils.xml.createElement("mutation");for(C.setAttribute("name",d),d=0;d<this.arguments_.length;d++){var D=e.utils.xml.createElement("arg");D.setAttribute("name",this.arguments_[d]),C.appendChild(D)}if((d=e.utils.xml.createElement("block")).setAttribute("type",this.callType_),d.appendChild(C),a.callback=e.ContextMenu.callbackFactory(this,d),n.push(a),!this.isCollapsed())for(d=0;d<this.argumentVarModels_.length;d++)(a={enabled:!0}).text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(C=this.argumentVarModels_[d]).name),C=e.Variables.generateVariableFieldDom(C),(D=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),D.appendChild(C),a.callback=e.ContextMenu.callbackFactory(this,D),n.push(a)}},callType_:"procedures_callnoreturn"},e.Blocks.procedures_defreturn={init:function(){var n=e.Procedures.findLegalName("",this);(n=new e.FieldTextInput(n,e.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(e.ALIGN_RIGHT).appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:e.Blocks.procedures_defnoreturn.setStatements_,updateParams_:e.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:e.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_defnoreturn.domToMutation,decompose:e.Blocks.procedures_defnoreturn.decompose,compose:e.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:e.Blocks.procedures_defnoreturn.getVars,getVarModels:e.Blocks.procedures_defnoreturn.getVarModels,renameVarById:e.Blocks.procedures_defnoreturn.renameVarById,updateVarName:e.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:e.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:e.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},e.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(e.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new e.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.procedures_mutatorarg={init:function(){var n=new e.FieldTextInput(e.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var a=this.getSourceBlock(),d=e.Mutator.findParentWs(a.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var C=(a.workspace.targetWorkspace||a.workspace).getAllBlocks(!1),D=n.toLowerCase(),B=0;B<C.length;B++)if(C[B].id!=this.getSourceBlock().id){var z=C[B].getFieldValue("NAME");if(z&&z.toLowerCase()==D)return null}return a.isInFlyout||((a=d.getVariable(n,""))&&a.name!=n&&d.renameVariableById(a.getId(),n),a||(a=d.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(a)),n},deleteIntermediateVars_:function(n){var a=e.Mutator.findParentWs(this.getSourceBlock().workspace);if(a)for(var d=0;d<this.createdVariables_.length;d++){var C=this.createdVariables_[d];C.name!=n&&a.deleteVariableById(C.getId())}}},e.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,a){e.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(a,"NAME"),this.setTooltip((this.outputConnection?e.Msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",a)))},setProcedureParameters_:function(n,a){var d=e.Procedures.getDefinition(this.getProcedureCall(),this.workspace),C=d&&d.mutator&&d.mutator.isVisible();if(C||(this.quarkConnections_={},this.quarkIds_=null),a)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=a;else{if(a.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),d=this.rendered,this.rendered=!1;for(var D=0;D<this.arguments_.length;D++){var B=this.getInput("ARG"+D);B&&(this.quarkConnections_[this.quarkIds_[D]]=B=B.connection.targetConnection,C&&B&&-1==a.indexOf(this.quarkIds_[D])&&(B.disconnect(),B.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],D=0;D<this.arguments_.length;D++)n=e.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[D],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=a)for(D=0;D<this.arguments_.length;D++)(a=this.quarkIds_[D])in this.quarkConnections_&&(e.Mutator.reconnect(B=this.quarkConnections_[a],this,"ARG"+D)||delete this.quarkConnections_[a]);(this.rendered=d)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var a=this.getField("ARGNAME"+n);if(a){e.Events.disable();try{a.setValue(this.arguments_[n])}finally{e.Events.enable()}}else a=new e.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(e.ALIGN_RIGHT).appendField(a,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(e.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var a=0;a<this.arguments_.length;a++){var d=e.utils.xml.createElement("arg");d.setAttribute("name",this.arguments_[a]),n.appendChild(d)}return n},domToMutation:function(n){var a=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),a),a=[];for(var D,d=[],C=0;D=n.childNodes[C];C++)"arg"==D.nodeName.toLowerCase()&&(a.push(D.getAttribute("name")),d.push(D.getAttribute("paramId")));this.setProcedureParameters_(a,d)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==e.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var a=this.getProcedureCall();if(!(a=e.Procedures.getDefinition(a,this.workspace))||a.type==this.defType_&&JSON.stringify(a.getVars())==JSON.stringify(this.arguments_)||(a=null),!a){e.Events.setGroup(n.group),n=e.utils.xml.createElement("xml"),(a=e.utils.xml.createElement("block")).setAttribute("type",this.defType_);var d=this.getRelativeToSurfaceXY(),C=d.y+2*e.SNAP_RADIUS;a.setAttribute("x",d.x+e.SNAP_RADIUS*(this.RTL?-1:1)),a.setAttribute("y",C),d=this.mutationToDom(),a.appendChild(d),(d=e.utils.xml.createElement("field")).setAttribute("name","NAME"),(C=this.getProcedureCall())||(C=e.Procedures.findLegalName("",this),this.renameProcedure("",C)),d.appendChild(e.utils.xml.createTextNode(C)),a.appendChild(d),n.appendChild(a),e.Xml.domToWorkspace(n,this.workspace),e.Events.setGroup(!1)}}else n.type==e.Events.BLOCK_DELETE?(a=this.getProcedureCall(),(a=e.Procedures.getDefinition(a,this.workspace))||(e.Events.setGroup(n.group),this.dispose(!0),e.Events.setGroup(!1))):n.type==e.Events.CHANGE&&"disabled"==n.element&&(a=this.getProcedureCall(),(a=e.Procedures.getDefinition(a,this.workspace))&&a.id==n.blockId&&((a=e.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),e.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),e.Events.setGroup(a)))},customContextMenu:function(n){if(this.workspace.isMovable()){var a={enabled:!0};a.text=e.Msg.PROCEDURES_HIGHLIGHT_DEF;var d=this.getProcedureCall(),C=this.workspace;a.callback=function(){var D=e.Procedures.getDefinition(d,C);D&&(C.centerOnBlock(D.id),D.select())},n.push(a)}},defType_:"procedures_defnoreturn"},e.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:e.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:e.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:e.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:e.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:e.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_callnoreturn.domToMutation,getVars:e.Blocks.procedures_callnoreturn.getVars,getVarModels:e.Blocks.procedures_callnoreturn.getVarModels,onchange:e.Blocks.procedures_callnoreturn.onchange,customContextMenu:e.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},e.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var a=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(a.type)){n=!0;break}a=a.getSurroundParent()}while(a);n?("procedures_defnoreturn"==a.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=a.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(e.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},e.Blocks.texts={},e.Constants.Text={},e.Constants.Text.HUE=160,e.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),e.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT1").type==e.INPUT_VALUE;return n.setAttribute("at1",a),a=this.getInput("AT2").type==e.INPUT_VALUE,n.setAttribute("at2",a),n},domToMutation:function(n){var a="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,a),this.updateAt_(2,n)},updateAt_:function(n,a){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),a?(this.appendValueInput("AT"+n).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&e.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL));var d=new e.FieldDropdown(this["WHERE_OPTIONS_"+n],function(C){var D="FROM_START"==C||"FROM_END"==C;if(D!=a){var B=this.getSourceBlock();return B.updateAt_(n,D),B.setFieldValue(C,"WHERE"+n),null}});this.getInput("AT"+n).appendField(d,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},e.Blocks.text_changeCase={init:function(){var n=[[e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(e.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg.TEXT_CHANGECASE_TOOLTIP)}},e.Blocks.text_trim={init:function(){var n=[[e.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[e.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[e.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(e.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg.TEXT_TRIM_TOOLTIP)}},e.Blocks.text_print={init:function(){this.jsonInit({message0:e.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:e.Msg.TEXT_PRINT_TOOLTIP,helpUrl:e.Msg.TEXT_PRINT_HELPURL})}},e.Blocks.text_prompt_ext={init:function(){var n=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var a=this;n=new e.FieldDropdown(n,function(d){a.updateType_(d)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==a.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},e.Blocks.text_prompt={init:function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],a=this;this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new e.FieldDropdown(n,function(d){a.updateType_(d)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new e.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==a.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:e.Blocks.text_prompt_ext.updateType_,mutationToDom:e.Blocks.text_prompt_ext.mutationToDom,domToMutation:e.Blocks.text_prompt_ext.domToMutation},e.Blocks.text_count={init:function(){this.jsonInit({message0:e.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_COUNT_TOOLTIP,helpUrl:e.Msg.TEXT_COUNT_HELPURL})}},e.Blocks.text_replace={init:function(){this.jsonInit({message0:e.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:e.Msg.TEXT_REPLACE_HELPURL})}},e.Blocks.text_reverse={init:function(){this.jsonInit({message0:e.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:e.Msg.TEXT_REVERSE_HELPURL})}},e.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var d,a=0;d=this.inputList[a];a++)for(var D,C=0;D=d.fieldRow[C];C++)if(n==D.name)return d.insertFieldAt(C,this.newQuote_(!0)),void d.insertFieldAt(C+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new e.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},e.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var a=n.newBlock("text_create_join_container");a.initSvg();for(var d=a.getInput("STACK").connection,C=0;C<this.itemCount_;C++){var D=n.newBlock("text_create_join_item");D.initSvg(),d.connect(D.previousConnection),d=D.nextConnection}return a},compose:function(n){var a=n.getInputTargetBlock("STACK");for(n=[];a&&!a.isInsertionMarker();)n.push(a.valueConnection_),a=a.nextConnection&&a.nextConnection.targetBlock();for(a=0;a<this.itemCount_;a++){var d=this.getInput("ADD"+a).connection.targetConnection;d&&-1==n.indexOf(d)&&d.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),a=0;a<this.itemCount_;a++)e.Mutator.reconnect(n[a],this,"ADD"+a)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var a=0;n;){var d=this.getInput("ADD"+a);n.valueConnection_=d&&d.connection.targetConnection,a++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var a=this.appendValueInput("ADD"+n).setAlign(e.ALIGN_RIGHT);0==n&&a.appendField(e.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},e.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new e.Mutator(["text_create_join_item"]))},e.Extensions.register("text_append_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return e.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)),e.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},e.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(a){(a="FROM_START"==a||"FROM_END"==a)!=this.isAt_&&this.getSourceBlock().updateAt_(a)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var a=n.getFieldValue("WHERE"),d=e.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==a||"FROM_END"==a)&&(a="FROM_START"==a?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(d+="  "+a.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),d})},e.Extensions.register("text_indexOf_tooltip",e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),e.Extensions.register("text_quotes",e.Constants.Text.TEXT_QUOTES_EXTENSION),e.Extensions.registerMutator("text_join_mutator",e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,e.Constants.Text.TEXT_JOIN_EXTENSION),e.Extensions.registerMutator("text_charAt_mutator",e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,e.Constants.Text.TEXT_CHARAT_EXTENSION),e.Blocks.variables={},e.Constants.Variables={},e.Constants.Variables.HUE=330,e.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(a={text:e.Msg.RENAME_VARIABLE,enabled:!0,callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},D=this.getField("VAR").getText(),C={text:e.Msg.DELETE_VARIABLE.replace("%1",D),enabled:!0,callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(a),n.unshift(C));else{if("variables_get"==this.type)var a="variables_set",d=e.Msg.VARIABLES_GET_CREATE_SET;else a="variables_get",d=e.Msg.VARIABLES_SET_CREATE_GET;var C={enabled:0<this.workspace.remainingCapacity()},D=this.getField("VAR").getText();C.text=d.replace("%1",D),(d=e.utils.xml.createElement("field")).setAttribute("name","VAR"),d.appendChild(e.utils.xml.createTextNode(D)),(D=e.utils.xml.createElement("block")).setAttribute("type",a),D.appendChild(d),C.callback=e.ContextMenu.callbackFactory(this,D),n.push(C)}}},e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,d=n.getField("VAR").getVariable();e.Variables.renameVariable(a,d)}},e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,d=n.getField("VAR").getVariable();a.deleteVariableById(d.getId()),a.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableSetterGetter",e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Constants.VariablesDynamic={},e.Constants.VariablesDynamic.HUE=310,e.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(a={text:e.Msg.RENAME_VARIABLE,enabled:!0,callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},B=this.getField("VAR").getText(),D={text:e.Msg.DELETE_VARIABLE.replace("%1",B),enabled:!0,callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(a),n.unshift(D));else{var a=this.getFieldValue("VAR"),d=this.workspace.getVariableById(a).type;if("variables_get_dynamic"==this.type){a="variables_set_dynamic";var C=e.Msg.VARIABLES_GET_CREATE_SET}else a="variables_get_dynamic",C=e.Msg.VARIABLES_SET_CREATE_GET;var D={enabled:0<this.workspace.remainingCapacity()},B=this.getField("VAR").getText();D.text=C.replace("%1",B),(C=e.utils.xml.createElement("field")).setAttribute("name","VAR"),C.setAttribute("variabletype",d),C.appendChild(e.utils.xml.createTextNode(B)),(B=e.utils.xml.createElement("block")).setAttribute("type",a),B.appendChild(C),D.callback=e.ContextMenu.callbackFactory(this,B),n.push(D)}},onchange:function(n){n=this.getFieldValue("VAR"),n=e.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},e.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,d=n.getField("VAR").getVariable();e.Variables.renameVariable(a,d)}},e.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,d=n.getField("VAR").getVariable();a.deleteVariableById(d.getId()),a.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Blocks}.apply(Z,m))&&(V.exports=t)},25552:function(V,Z,g){var m,t;m=[g(68210),g(63266),g(18783),g(30069)],void 0!==(t=function(e,n,a,d){"use strict";return e.setLocale(n),e.Blocks=e.Blocks||{},Object.keys(a).forEach(function(C){e.Blocks[C]=a[C]}),e.JavaScript=d,e}.apply(Z,m))&&(V.exports=t)},68210:function(V,Z,g){var m,t;m=[g(86931)],void 0!==(t=function(e){"use strict";return e.setLocale=function(n){e.Msg=e.Msg||{},Object.keys(n).forEach(function(a){e.Msg[a]=n[a]})},e}.apply(Z,m))&&(V.exports=t)},76279:function(V,Z,g){var m,t;m=[g(25552)],void 0!==(t=function(e){"use strict";return e}.apply(Z,m))&&(V.exports=t)},30069:function(V,Z,g){var m,t;m=[g(68210),g(69957)],void 0!==(t=function(e,n){"use strict";return e.JavaScript=n,n}.apply(Z,m))&&(V.exports=t)},69957:function(V,Z,g){var m,t;m=[g(81069)],void 0!==(t=function(e){"use strict";return e.JavaScript=new e.Generator("JavaScript"),e.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(e.utils.global).join(",")),e.JavaScript.ORDER_ATOMIC=0,e.JavaScript.ORDER_NEW=1.1,e.JavaScript.ORDER_MEMBER=1.2,e.JavaScript.ORDER_FUNCTION_CALL=2,e.JavaScript.ORDER_INCREMENT=3,e.JavaScript.ORDER_DECREMENT=3,e.JavaScript.ORDER_BITWISE_NOT=4.1,e.JavaScript.ORDER_UNARY_PLUS=4.2,e.JavaScript.ORDER_UNARY_NEGATION=4.3,e.JavaScript.ORDER_LOGICAL_NOT=4.4,e.JavaScript.ORDER_TYPEOF=4.5,e.JavaScript.ORDER_VOID=4.6,e.JavaScript.ORDER_DELETE=4.7,e.JavaScript.ORDER_AWAIT=4.8,e.JavaScript.ORDER_EXPONENTIATION=5,e.JavaScript.ORDER_MULTIPLICATION=5.1,e.JavaScript.ORDER_DIVISION=5.2,e.JavaScript.ORDER_MODULUS=5.3,e.JavaScript.ORDER_SUBTRACTION=6.1,e.JavaScript.ORDER_ADDITION=6.2,e.JavaScript.ORDER_BITWISE_SHIFT=7,e.JavaScript.ORDER_RELATIONAL=8,e.JavaScript.ORDER_IN=8,e.JavaScript.ORDER_INSTANCEOF=8,e.JavaScript.ORDER_EQUALITY=9,e.JavaScript.ORDER_BITWISE_AND=10,e.JavaScript.ORDER_BITWISE_XOR=11,e.JavaScript.ORDER_BITWISE_OR=12,e.JavaScript.ORDER_LOGICAL_AND=13,e.JavaScript.ORDER_LOGICAL_OR=14,e.JavaScript.ORDER_CONDITIONAL=15,e.JavaScript.ORDER_ASSIGNMENT=16,e.JavaScript.ORDER_YIELD=17,e.JavaScript.ORDER_COMMA=18,e.JavaScript.ORDER_NONE=99,e.JavaScript.ORDER_OVERRIDES=[[e.JavaScript.ORDER_FUNCTION_CALL,e.JavaScript.ORDER_MEMBER],[e.JavaScript.ORDER_FUNCTION_CALL,e.JavaScript.ORDER_FUNCTION_CALL],[e.JavaScript.ORDER_MEMBER,e.JavaScript.ORDER_MEMBER],[e.JavaScript.ORDER_MEMBER,e.JavaScript.ORDER_FUNCTION_CALL],[e.JavaScript.ORDER_LOGICAL_NOT,e.JavaScript.ORDER_LOGICAL_NOT],[e.JavaScript.ORDER_MULTIPLICATION,e.JavaScript.ORDER_MULTIPLICATION],[e.JavaScript.ORDER_ADDITION,e.JavaScript.ORDER_ADDITION],[e.JavaScript.ORDER_LOGICAL_AND,e.JavaScript.ORDER_LOGICAL_AND],[e.JavaScript.ORDER_LOGICAL_OR,e.JavaScript.ORDER_LOGICAL_OR]],e.JavaScript.isInitialized=!1,e.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new e.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var a=[],d=e.Variables.allDeveloperVariables(n),C=0;C<d.length;C++)a.push(this.nameDB_.getName(d[C],e.Names.DEVELOPER_VARIABLE_TYPE));for(n=e.Variables.allUsedVarModels(n),C=0;C<n.length;C++)a.push(this.nameDB_.getName(n[C].getId(),e.VARIABLE_CATEGORY_NAME));a.length&&(this.definitions_.variables="var "+a.join(", ")+";"),this.isInitialized=!0},e.JavaScript.finish=function(n){var a=e.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),a.join("\n\n")+"\n\n\n"+n},e.JavaScript.scrubNakedValue=function(n){return n+";\n"},e.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},e.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},e.JavaScript.scrub_=function(n,a,d){var C="";if(!n.outputConnection||!n.outputConnection.targetConnection){var D=n.getCommentText();D&&(D=e.utils.string.wrap(D,this.COMMENT_WRAP-3),C+=this.prefixLines(D+"\n","// "));for(var B=0;B<n.inputList.length;B++)n.inputList[B].type==e.inputTypes.VALUE&&(D=n.inputList[B].connection.targetBlock())&&(D=this.allNestedComments(D))&&(C+=this.prefixLines(D,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),C+a+(d?"":this.blockToCode(n))},e.JavaScript.getAdjusted=function(n,a,d,C,D){d=d||0,D=D||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&d--;var B=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<d?this.valueToCode(n,a,this.ORDER_ADDITION)||B:0>d?this.valueToCode(n,a,this.ORDER_SUBTRACTION)||B:C?this.valueToCode(n,a,this.ORDER_UNARY_NEGATION)||B:this.valueToCode(n,a,D)||B,e.isNumber(n))n=Number(n)+d,C&&(n=-n);else{if(0<d){n=n+" + "+d;var z=this.ORDER_ADDITION}else 0>d&&(n=n+" - "+-d,z=this.ORDER_SUBTRACTION);C&&(n=d?"-("+n+")":"-"+n,z=this.ORDER_UNARY_NEGATION),z=Math.floor(z),D=Math.floor(D),z&&D>=z&&(n="("+n+")")}return n},e.JavaScript.colour={},e.JavaScript.colour_picker=function(n){return[e.JavaScript.quote_(n.getFieldValue("COLOUR")),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.colour_random=function(n){return[e.JavaScript.provideFunction_("colourRandom",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.colour_rgb=function(n){var a=e.JavaScript.valueToCode(n,"RED",e.JavaScript.ORDER_NONE)||0,d=e.JavaScript.valueToCode(n,"GREEN",e.JavaScript.ORDER_NONE)||0;return n=e.JavaScript.valueToCode(n,"BLUE",e.JavaScript.ORDER_NONE)||0,[e.JavaScript.provideFunction_("colourRgb",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+a+", "+d+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.colour_blend=function(n){var a=e.JavaScript.valueToCode(n,"COLOUR1",e.JavaScript.ORDER_NONE)||"'#000000'",d=e.JavaScript.valueToCode(n,"COLOUR2",e.JavaScript.ORDER_NONE)||"'#000000'";return n=e.JavaScript.valueToCode(n,"RATIO",e.JavaScript.ORDER_NONE)||.5,[e.JavaScript.provideFunction_("colourBlend",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+a+", "+d+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists={},e.JavaScript.lists_create_empty=function(n){return["[]",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.lists_create_with=function(n){for(var a=Array(n.itemCount_),d=0;d<n.itemCount_;d++)a[d]=e.JavaScript.valueToCode(n,"ADD"+d,e.JavaScript.ORDER_NONE)||"null";return["["+a.join(", ")+"]",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.lists_repeat=function(n){return[e.JavaScript.provideFunction_("listsRepeat",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(e.JavaScript.valueToCode(n,"ITEM",e.JavaScript.ORDER_NONE)||"null")+", "+(n=e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_NONE)||"0")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_length=function(n){return[(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+".length",e.JavaScript.ORDER_MEMBER]},e.JavaScript.lists_isEmpty=function(n){return["!"+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+".length",e.JavaScript.ORDER_LOGICAL_NOT]},e.JavaScript.lists_indexOf=function(n){var a="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",d=e.JavaScript.valueToCode(n,"FIND",e.JavaScript.ORDER_NONE)||"''";return a=(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+"."+a+"("+d+")",n.workspace.options.oneBasedIndex?[a+" + 1",e.JavaScript.ORDER_ADDITION]:[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_getIndex=function(n){var a=n.getFieldValue("MODE")||"GET",d=n.getFieldValue("WHERE")||"FROM_START",C=e.JavaScript.valueToCode(n,"VALUE","RANDOM"==d?e.JavaScript.ORDER_NONE:e.JavaScript.ORDER_MEMBER)||"[]";switch(d){case"FIRST":if("GET"==a)return[C+"[0]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[C+".shift()",e.JavaScript.ORDER_MEMBER];if("REMOVE"==a)return C+".shift();\n";break;case"LAST":if("GET"==a)return[C+".slice(-1)[0]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[C+".pop()",e.JavaScript.ORDER_MEMBER];if("REMOVE"==a)return C+".pop();\n";break;case"FROM_START":if(n=e.JavaScript.getAdjusted(n,"AT"),"GET"==a)return[C+"["+n+"]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[C+".splice("+n+", 1)[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return C+".splice("+n+", 1);\n";break;case"FROM_END":if(n=e.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==a)return[C+".slice("+n+")[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==a)return[C+".splice("+n+", 1)[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return C+".splice("+n+", 1);";break;case"RANDOM":if(C=e.JavaScript.provideFunction_("listsGetRandomItem",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+C+", "+("GET"!=a)+")","GET"==a||"GET_REMOVE"==a)return[C,e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return C+";\n"}throw Error("Unhandled combination (lists_getIndex).")},e.JavaScript.lists_setIndex=function(n){function a(){if(d.match(/^\w+$/))return"";var z=e.JavaScript.nameDB_.getDistinctName("tmpList",e.VARIABLE_CATEGORY_NAME),oe="var "+z+" = "+d+";\n";return d=z,oe}var d=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",C=n.getFieldValue("MODE")||"GET",D=n.getFieldValue("WHERE")||"FROM_START",B=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_ASSIGNMENT)||"null";switch(D){case"FIRST":if("SET"==C)return d+"[0] = "+B+";\n";if("INSERT"==C)return d+".unshift("+B+");\n";break;case"LAST":if("SET"==C)return(n=a())+(d+"[")+d+".length - 1] = "+B+";\n";if("INSERT"==C)return d+".push("+B+");\n";break;case"FROM_START":if(D=e.JavaScript.getAdjusted(n,"AT"),"SET"==C)return d+"["+D+"] = "+B+";\n";if("INSERT"==C)return d+".splice("+D+", 0, "+B+");\n";break;case"FROM_END":if(D=e.JavaScript.getAdjusted(n,"AT",1,!1,e.JavaScript.ORDER_SUBTRACTION),n=a(),"SET"==C)return n+(d+"[")+d+".length - "+D+"] = "+B+";\n";if("INSERT"==C)return n+(d+".splice(")+d+".length - "+D+", 0, "+B+");\n";break;case"RANDOM":if(n=a(),n+="var "+(D=e.JavaScript.nameDB_.getDistinctName("tmpX",e.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+d+".length);\n","SET"==C)return n+(d+"[")+D+"] = "+B+";\n";if("INSERT"==C)return n+(d+".splice(")+D+", 0, "+B+");\n"}throw Error("Unhandled combination (lists_setIndex).")},e.JavaScript.lists.getIndex_=function(n,a,d){return"FIRST"==a?"0":"FROM_END"==a?n+".length - 1 - "+d:"LAST"==a?n+".length - 1":d},e.JavaScript.lists_getSublist=function(n){var a=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",d=n.getFieldValue("WHERE1"),C=n.getFieldValue("WHERE2");if("FIRST"==d&&"LAST"==C)a+=".slice(0)";else if(a.match(/^\w+$/)||"FROM_END"!=d&&"FROM_START"==C){switch(d){case"FROM_START":var D=e.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":D=a+".length - "+(D=e.JavaScript.getAdjusted(n,"AT1",1,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":D="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(C){case"FROM_START":n=e.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=a+".length - "+(n=e.JavaScript.getAdjusted(n,"AT2",0,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=a+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}a=a+".slice("+D+", "+n+")"}else{D=e.JavaScript.getAdjusted(n,"AT1"),n=e.JavaScript.getAdjusted(n,"AT2");var B=e.JavaScript.lists.getIndex_,z={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};a=e.JavaScript.provideFunction_("subsequence"+z[d]+z[C],["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==d||"FROM_START"==d?", at1":"")+("FROM_END"==C||"FROM_START"==C?", at2":"")+") {","  var start = "+B("sequence",d,"at1")+";","  var end = "+B("sequence",C,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+a+("FROM_END"==d||"FROM_START"==d?", "+D:"")+("FROM_END"==C||"FROM_START"==C?", "+n:"")+")"}return[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_sort=function(n){var a=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_FUNCTION_CALL)||"[]",d="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[a+".slice().sort("+e.JavaScript.provideFunction_("listsGetSortCompare",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+d+"))",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_split=function(n){var a=e.JavaScript.valueToCode(n,"INPUT",e.JavaScript.ORDER_MEMBER),d=e.JavaScript.valueToCode(n,"DELIM",e.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))a||(a="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);a||(a="[]"),n="join"}return[a+"."+n+"("+d+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_reverse=function(n){return[(e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.logic={},e.JavaScript.controls_if=function(n){var a=0,d="";e.JavaScript.STATEMENT_PREFIX&&(d+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n));do{var C=e.JavaScript.valueToCode(n,"IF"+a,e.JavaScript.ORDER_NONE)||"false",D=e.JavaScript.statementToCode(n,"DO"+a);e.JavaScript.STATEMENT_SUFFIX&&(D=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)+D),d+=(0<a?" else ":"")+"if ("+C+") {\n"+D+"}",++a}while(n.getInput("IF"+a));return(n.getInput("ELSE")||e.JavaScript.STATEMENT_SUFFIX)&&(D=e.JavaScript.statementToCode(n,"ELSE"),e.JavaScript.STATEMENT_SUFFIX&&(D=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)+D),d+=" else {\n"+D+"}"),d+"\n"},e.JavaScript.controls_ifelse=e.JavaScript.controls_if,e.JavaScript.logic_compare=function(n){var a={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],d="=="==a||"!="==a?e.JavaScript.ORDER_EQUALITY:e.JavaScript.ORDER_RELATIONAL;return[(e.JavaScript.valueToCode(n,"A",d)||"0")+" "+a+" "+(n=e.JavaScript.valueToCode(n,"B",d)||"0"),d]},e.JavaScript.logic_operation=function(n){var a="AND"==n.getFieldValue("OP")?"&&":"||",d="&&"==a?e.JavaScript.ORDER_LOGICAL_AND:e.JavaScript.ORDER_LOGICAL_OR,C=e.JavaScript.valueToCode(n,"A",d);if(n=e.JavaScript.valueToCode(n,"B",d),C||n){var D="&&"==a?"true":"false";C||(C=D),n||(n=D)}else n=C="false";return[C+" "+a+" "+n,d]},e.JavaScript.logic_negate=function(n){var a=e.JavaScript.ORDER_LOGICAL_NOT;return["!"+(e.JavaScript.valueToCode(n,"BOOL",a)||"true"),a]},e.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.logic_null=function(n){return["null",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.logic_ternary=function(n){return[(e.JavaScript.valueToCode(n,"IF",e.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(e.JavaScript.valueToCode(n,"THEN",e.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=e.JavaScript.valueToCode(n,"ELSE",e.JavaScript.ORDER_CONDITIONAL)||"null"),e.JavaScript.ORDER_CONDITIONAL]},e.JavaScript.loops={},e.JavaScript.controls_repeat_ext=function(n){var a=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):e.JavaScript.valueToCode(n,"TIMES",e.JavaScript.ORDER_ASSIGNMENT)||"0",d=e.JavaScript.statementToCode(n,"DO");d=e.JavaScript.addLoopTrap(d,n),n="";var C=e.JavaScript.nameDB_.getDistinctName("count",e.VARIABLE_CATEGORY_NAME),D=a;return a.match(/^\w+$/)||e.isNumber(a)||(n+="var "+(D=e.JavaScript.nameDB_.getDistinctName("repeat_end",e.VARIABLE_CATEGORY_NAME))+" = "+a+";\n"),n+"for (var "+C+" = 0; "+C+" < "+D+"; "+C+"++) {\n"+d+"}\n"},e.JavaScript.controls_repeat=e.JavaScript.controls_repeat_ext,e.JavaScript.controls_whileUntil=function(n){var a="UNTIL"==n.getFieldValue("MODE"),d=e.JavaScript.valueToCode(n,"BOOL",a?e.JavaScript.ORDER_LOGICAL_NOT:e.JavaScript.ORDER_NONE)||"false",C=e.JavaScript.statementToCode(n,"DO");return a&&(d="!"+d),"while ("+d+") {\n"+(C=e.JavaScript.addLoopTrap(C,n))+"}\n"},e.JavaScript.controls_for=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),d=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_ASSIGNMENT)||"0",C=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_ASSIGNMENT)||"0",D=e.JavaScript.valueToCode(n,"BY",e.JavaScript.ORDER_ASSIGNMENT)||"1",B=e.JavaScript.statementToCode(n,"DO");if(B=e.JavaScript.addLoopTrap(B,n),e.isNumber(d)&&e.isNumber(C)&&e.isNumber(D)){var z=Number(d)<=Number(C);n="for ("+a+" = "+d+"; "+a+(z?" <= ":" >= ")+C+"; "+a,n=(1==(a=Math.abs(Number(D)))?n+(z?"++":"--"):n+(z?" += ":" -= ")+a)+") {\n"+B+"}\n"}else n="",z=d,d.match(/^\w+$/)||e.isNumber(d)||(n+="var "+(z=e.JavaScript.nameDB_.getDistinctName(a+"_start",e.VARIABLE_CATEGORY_NAME))+" = "+d+";\n"),d=C,C.match(/^\w+$/)||e.isNumber(C)||(n+="var "+(d=e.JavaScript.nameDB_.getDistinctName(a+"_end",e.VARIABLE_CATEGORY_NAME))+" = "+C+";\n"),n+="var "+(C=e.JavaScript.nameDB_.getDistinctName(a+"_inc",e.VARIABLE_CATEGORY_NAME))+" = ",n=(n=e.isNumber(D)?n+(Math.abs(D)+";\n"):n+"Math.abs("+D+");\n")+"if ("+z+" > "+d+") {\n"+(e.JavaScript.INDENT+C)+" = -"+C+";\n",n+="}\n",n+="for ("+a+" = "+z+"; "+C+" >= 0 ? "+a+" <= "+d+" : "+a+" >= "+d+"; "+a+" += "+C+") {\n"+B+"}\n";return n},e.JavaScript.controls_forEach=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),d=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_ASSIGNMENT)||"[]",C=e.JavaScript.statementToCode(n,"DO");C=e.JavaScript.addLoopTrap(C,n),n="";var D=d;return d.match(/^\w+$/)||(n+="var "+(D=e.JavaScript.nameDB_.getDistinctName(a+"_list",e.VARIABLE_CATEGORY_NAME))+" = "+d+";\n"),n+"for (var "+(d=e.JavaScript.nameDB_.getDistinctName(a+"_index",e.VARIABLE_CATEGORY_NAME))+" in "+D+") {\n"+(C=e.JavaScript.INDENT+a+" = "+D+"["+d+"];\n"+C)+"}\n"},e.JavaScript.controls_flow_statements=function(n){var a="";if(e.JavaScript.STATEMENT_PREFIX&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n)),e.JavaScript.STATEMENT_SUFFIX&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n)),e.JavaScript.STATEMENT_PREFIX){var d=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);d&&!d.suppressPrefixSuffix&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,d))}switch(n.getFieldValue("FLOW")){case"BREAK":return a+"break;\n";case"CONTINUE":return a+"continue;\n"}throw Error("Unknown flow statement.")},e.JavaScript.math={},e.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?e.JavaScript.ORDER_ATOMIC:e.JavaScript.ORDER_UNARY_NEGATION]},e.JavaScript.math_arithmetic=function(n){var a={ADD:[" + ",e.JavaScript.ORDER_ADDITION],MINUS:[" - ",e.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",e.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",e.JavaScript.ORDER_DIVISION],POWER:[null,e.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],d=a[0],C=e.JavaScript.valueToCode(n,"A",a=a[1])||"0";return n=e.JavaScript.valueToCode(n,"B",a)||"0",d?[C+d+n,a]:["Math.pow("+C+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_single=function(n){var a=n.getFieldValue("OP");if("NEG"==a)return"-"==(n=e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,e.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==a||"COS"==a||"TAN"==a?e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_DIVISION)||"0":e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_NONE)||"0",a){case"ABS":var d="Math.abs("+n+")";break;case"ROOT":d="Math.sqrt("+n+")";break;case"LN":d="Math.log("+n+")";break;case"EXP":d="Math.exp("+n+")";break;case"POW10":d="Math.pow(10,"+n+")";break;case"ROUND":d="Math.round("+n+")";break;case"ROUNDUP":d="Math.ceil("+n+")";break;case"ROUNDDOWN":d="Math.floor("+n+")";break;case"SIN":d="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":d="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":d="Math.tan("+n+" / 180 * Math.PI)"}if(d)return[d,e.JavaScript.ORDER_FUNCTION_CALL];switch(a){case"LOG10":d="Math.log("+n+") / Math.log(10)";break;case"ASIN":d="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":d="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":d="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+a)}return[d,e.JavaScript.ORDER_DIVISION]},e.JavaScript.math_constant=function(n){return{PI:["Math.PI",e.JavaScript.ORDER_MEMBER],E:["Math.E",e.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",e.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",e.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",e.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",e.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},e.JavaScript.math_number_property=function(n){var a=e.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",e.JavaScript.ORDER_MODULUS)||"0",d=n.getFieldValue("PROPERTY");if("PRIME"==d)return[e.JavaScript.provideFunction_("mathIsPrime",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+a+")",e.JavaScript.ORDER_FUNCTION_CALL];switch(d){case"EVEN":var C=a+" % 2 == 0";break;case"ODD":C=a+" % 2 == 1";break;case"WHOLE":C=a+" % 1 == 0";break;case"POSITIVE":C=a+" > 0";break;case"NEGATIVE":C=a+" < 0";break;case"DIVISIBLE_BY":C=a+" % "+(n=e.JavaScript.valueToCode(n,"DIVISOR",e.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[C,e.JavaScript.ORDER_EQUALITY]},e.JavaScript.math_change=function(n){var a=e.JavaScript.valueToCode(n,"DELTA",e.JavaScript.ORDER_ADDITION)||"0";return(n=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+a+";\n"},e.JavaScript.math_round=e.JavaScript.math_single,e.JavaScript.math_trig=e.JavaScript.math_single,e.JavaScript.math_on_list=function(n){var a=n.getFieldValue("OP");switch(a){case"SUM":n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(a=e.JavaScript.provideFunction_("mathMean",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(a=e.JavaScript.provideFunction_("mathMedian",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(a=e.JavaScript.provideFunction_("mathModes",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(a=e.JavaScript.provideFunction_("mathStandardDeviation",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(a=e.JavaScript.provideFunction_("mathRandomList",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+a)}return[n,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_modulo=function(n){return[(e.JavaScript.valueToCode(n,"DIVIDEND",e.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=e.JavaScript.valueToCode(n,"DIVISOR",e.JavaScript.ORDER_MODULUS)||"0"),e.JavaScript.ORDER_MODULUS]},e.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_NONE)||"0")+", "+(e.JavaScript.valueToCode(n,"LOW",e.JavaScript.ORDER_NONE)||"0")+"), "+(n=e.JavaScript.valueToCode(n,"HIGH",e.JavaScript.ORDER_NONE)||"Infinity")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_random_int=function(n){var a=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_NONE)||"0";return n=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_NONE)||"0",[e.JavaScript.provideFunction_("mathRandomInt",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+a+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_random_float=function(n){return["Math.random()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_atan2=function(n){var a=e.JavaScript.valueToCode(n,"X",e.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(e.JavaScript.valueToCode(n,"Y",e.JavaScript.ORDER_NONE)||"0")+", "+a+") / Math.PI * 180",e.JavaScript.ORDER_DIVISION]},e.JavaScript.procedures={},e.JavaScript.procedures_defreturn=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),e.PROCEDURE_CATEGORY_NAME),d="";e.JavaScript.STATEMENT_PREFIX&&(d+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n)),e.JavaScript.STATEMENT_SUFFIX&&(d+=e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n)),d&&(d=e.JavaScript.prefixLines(d,e.JavaScript.INDENT));var C="";e.JavaScript.INFINITE_LOOP_TRAP&&(C=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.INFINITE_LOOP_TRAP,n),e.JavaScript.INDENT));var D=e.JavaScript.statementToCode(n,"STACK"),B=e.JavaScript.valueToCode(n,"RETURN",e.JavaScript.ORDER_NONE)||"",z="";D&&B&&(z=d),B&&(B=e.JavaScript.INDENT+"return "+B+";\n");for(var oe=[],be=n.getVars(),se=0;se<be.length;se++)oe[se]=e.JavaScript.nameDB_.getName(be[se],e.VARIABLE_CATEGORY_NAME);return d="function "+a+"("+oe.join(", ")+") {\n"+d+C+D+z+B+"}",d=e.JavaScript.scrub_(n,d),e.JavaScript.definitions_["%"+a]=d,null},e.JavaScript.procedures_defnoreturn=e.JavaScript.procedures_defreturn,e.JavaScript.procedures_callreturn=function(n){for(var a=e.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),e.PROCEDURE_CATEGORY_NAME),d=[],C=n.getVars(),D=0;D<C.length;D++)d[D]=e.JavaScript.valueToCode(n,"ARG"+D,e.JavaScript.ORDER_NONE)||"null";return[a+"("+d.join(", ")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.procedures_callnoreturn=function(n){return e.JavaScript.procedures_callreturn(n)[0]+";\n"},e.JavaScript.procedures_ifreturn=function(n){var a="if ("+(e.JavaScript.valueToCode(n,"CONDITION",e.JavaScript.ORDER_NONE)||"false")+") {\n";return e.JavaScript.STATEMENT_SUFFIX&&(a+=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)),n.hasReturnValue_?(n=e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_NONE)||"null",a+=e.JavaScript.INDENT+"return "+n+";\n"):a+=e.JavaScript.INDENT+"return;\n",a+"}\n"},e.JavaScript.texts={},e.JavaScript.text=function(n){return[e.JavaScript.quote_(n.getFieldValue("TEXT")),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.text_multiline=function(n){var a=-1!=(n=e.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?e.JavaScript.ORDER_ADDITION:e.JavaScript.ORDER_ATOMIC;return[n,a]},e.JavaScript.text.forceString_=function(n){return e.JavaScript.text.forceString_.strRegExp.test(n)?[n,e.JavaScript.ORDER_ATOMIC]:["String("+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,e.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",e.JavaScript.ORDER_ATOMIC];case 1:return n=e.JavaScript.valueToCode(n,"ADD0",e.JavaScript.ORDER_NONE)||"''",e.JavaScript.text.forceString_(n);case 2:var a=e.JavaScript.valueToCode(n,"ADD0",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"ADD1",e.JavaScript.ORDER_NONE)||"''",[n=e.JavaScript.text.forceString_(a)[0]+" + "+e.JavaScript.text.forceString_(n)[0],e.JavaScript.ORDER_ADDITION];default:a=Array(n.itemCount_);for(var d=0;d<n.itemCount_;d++)a[d]=e.JavaScript.valueToCode(n,"ADD"+d,e.JavaScript.ORDER_NONE)||"''";return[n="["+a.join(",")+"].join('')",e.JavaScript.ORDER_FUNCTION_CALL]}},e.JavaScript.text_append=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME);return n=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''",a+" += "+e.JavaScript.text.forceString_(n)[0]+";\n"},e.JavaScript.text_length=function(n){return[(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+".length",e.JavaScript.ORDER_MEMBER]},e.JavaScript.text_isEmpty=function(n){return["!"+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+".length",e.JavaScript.ORDER_LOGICAL_NOT]},e.JavaScript.text_indexOf=function(n){var a="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",d=e.JavaScript.valueToCode(n,"FIND",e.JavaScript.ORDER_NONE)||"''";return a=(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+"."+a+"("+d+")",n.workspace.options.oneBasedIndex?[a+" + 1",e.JavaScript.ORDER_ADDITION]:[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_charAt=function(n){var a=n.getFieldValue("WHERE")||"FROM_START",d=e.JavaScript.valueToCode(n,"VALUE","RANDOM"==a?e.JavaScript.ORDER_NONE:e.JavaScript.ORDER_MEMBER)||"''";switch(a){case"FIRST":return[d+".charAt(0)",e.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[d+".slice(-1)",e.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[d+".charAt("+(n=e.JavaScript.getAdjusted(n,"AT"))+")",e.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[d+".slice("+(n=e.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",e.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[e.JavaScript.provideFunction_("textRandomLetter",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+d+")",e.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},e.JavaScript.text.getIndex_=function(n,a,d){return"FIRST"==a?"0":"FROM_END"==a?n+".length - 1 - "+d:"LAST"==a?n+".length - 1":d},e.JavaScript.text_getSubstring=function(n){var a=n.getFieldValue("WHERE1"),d=n.getFieldValue("WHERE2"),C="FROM_END"!=a&&"LAST"!=a&&"FROM_END"!=d&&"LAST"!=d,D=e.JavaScript.valueToCode(n,"STRING",C?e.JavaScript.ORDER_MEMBER:e.JavaScript.ORDER_NONE)||"''";if("FIRST"==a&&"LAST"==d)return[D,e.JavaScript.ORDER_NONE];if(D.match(/^'?\w+'?$/)||C){switch(a){case"FROM_START":C=e.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":C=D+".length - "+(C=e.JavaScript.getAdjusted(n,"AT1",1,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":C="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(d){case"FROM_START":n=e.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=D+".length - "+(n=e.JavaScript.getAdjusted(n,"AT2",0,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=D+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}a=D+".slice("+C+", "+n+")"}else{C=e.JavaScript.getAdjusted(n,"AT1"),n=e.JavaScript.getAdjusted(n,"AT2");var B=e.JavaScript.text.getIndex_,z={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};a=e.JavaScript.provideFunction_("subsequence"+z[a]+z[d],["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==a||"FROM_START"==a?", at1":"")+("FROM_END"==d||"FROM_START"==d?", at2":"")+") {","  var start = "+B("sequence",a,"at1")+";","  var end = "+B("sequence",d,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+D+("FROM_END"==a||"FROM_START"==a?", "+C:"")+("FROM_END"==d||"FROM_START"==d?", "+n:"")+")"}return[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_changeCase=function(n){var a={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=e.JavaScript.valueToCode(n,"TEXT",a?e.JavaScript.ORDER_MEMBER:e.JavaScript.ORDER_NONE)||"''",[a?n+a:e.JavaScript.provideFunction_("textToTitleCase",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_trim=function(n){var a={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_MEMBER)||"''")+a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_print=function(n){return"window.alert("+(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''")+");\n"},e.JavaScript.text_prompt_ext=function(n){var a="window.prompt("+(n.getField("TEXT")?e.JavaScript.quote_(n.getFieldValue("TEXT")):e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(a="Number("+a+")"),[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_prompt=e.JavaScript.text_prompt_ext,e.JavaScript.text_count=function(n){var a=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"SUB",e.JavaScript.ORDER_NONE)||"''",[e.JavaScript.provideFunction_("textCount",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+a+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_replace=function(n){var a=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''",d=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_NONE)||"''",[e.JavaScript.provideFunction_("textReplace",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+a+", "+d+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_reverse=function(n){return[(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.variables={},e.JavaScript.variables_get=function(n){return[e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.variables_set=function(n){var a=e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_ASSIGNMENT)||"0";return e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME)+" = "+a+";\n"},e.JavaScript.variablesDynamic={},e.JavaScript.variables_get_dynamic=e.JavaScript.variables_get,e.JavaScript.variables_set_dynamic=e.JavaScript.variables_set,e.JavaScript}.apply(Z,m))&&(V.exports=t)},63266:function(V,Z,g){var m,t;m=[g(68210)],void 0!==(t=function(e){return(e={Msg:{}}).Msg.ADD_COMMENT="Add Comment",e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",e.Msg.CHANGE_VALUE_TITLE="Change value:",e.Msg.CLEAN_UP="Clean up Blocks",e.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",e.Msg.COLLAPSE_ALL="Collapse Blocks",e.Msg.COLLAPSE_BLOCK="Collapse Block",e.Msg.COLOUR_BLEND_COLOUR1="colour 1",e.Msg.COLOUR_BLEND_COLOUR2="colour 2",e.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",e.Msg.COLOUR_BLEND_RATIO="ratio",e.Msg.COLOUR_BLEND_TITLE="blend",e.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",e.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",e.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="random colour",e.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",e.Msg.COLOUR_RGB_BLUE="blue",e.Msg.COLOUR_RGB_GREEN="green",e.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",e.Msg.COLOUR_RGB_RED="red",e.Msg.COLOUR_RGB_TITLE="colour with",e.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",e.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",e.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",e.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",e.Msg.CONTROLS_IF_MSG_ELSE="else",e.Msg.CONTROLS_IF_MSG_ELSEIF="else if",e.Msg.CONTROLS_IF_MSG_IF="if",e.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",e.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",e.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",e.Msg.CONTROLS_REPEAT_INPUT_DO="do",e.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",e.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",e.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",e.Msg.DELETE_BLOCK="Delete Block",e.Msg.DELETE_VARIABLE="Delete the '%1' variable",e.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",e.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",e.Msg.DISABLE_BLOCK="Disable Block",e.Msg.DUPLICATE_BLOCK="Duplicate",e.Msg.DUPLICATE_COMMENT="Duplicate Comment",e.Msg.ENABLE_BLOCK="Enable Block",e.Msg.EXPAND_ALL="Expand Blocks",e.Msg.EXPAND_BLOCK="Expand Block",e.Msg.EXTERNAL_INPUTS="External Inputs",e.Msg.HELP="Help",e.Msg.INLINE_INPUTS="Inline Inputs",e.Msg.IOS_CANCEL="Cancel",e.Msg.IOS_ERROR="Error",e.Msg.IOS_OK="OK",e.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",e.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",e.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",e.Msg.IOS_PROCEDURES_INPUTS="INPUTS",e.Msg.IOS_VARIABLES_ADD_BUTTON="Add",e.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",e.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",e.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",e.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",e.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",e.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",e.Msg.LISTS_GET_INDEX_FIRST="first",e.Msg.LISTS_GET_INDEX_FROM_END="# from end",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_GET="get",e.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",e.Msg.LISTS_GET_INDEX_LAST="last",e.Msg.LISTS_GET_INDEX_RANDOM="random",e.Msg.LISTS_GET_INDEX_REMOVE="remove",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",e.Msg.LISTS_GET_SUBLIST_END_LAST="to last",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",e.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",e.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",e.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",e.Msg.LISTS_INLIST="in list",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",e.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="length of %1",e.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",e.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",e.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_TO="as",e.Msg.LISTS_SET_INDEX_INSERT="insert at",e.Msg.LISTS_SET_INDEX_SET="set",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",e.Msg.LISTS_SORT_ORDER_DESCENDING="descending",e.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",e.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",e.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",e.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",e.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="not %1",e.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",e.Msg.LOGIC_NULL="null",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL_TOOLTIP="Returns null.",e.Msg.LOGIC_OPERATION_AND="and",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_OR="or",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",e.Msg.LOGIC_TERNARY_CONDITION="test",e.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",e.Msg.LOGIC_TERNARY_IF_FALSE="if false",e.Msg.LOGIC_TERNARY_IF_TRUE="if true",e.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",e.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",e.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",e.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",e.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",e.Msg.MATH_CHANGE_TITLE="change %1 by %2",e.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",e.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",e.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",e.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",e.Msg.MATH_DIVISION_SYMBOL="\xf7",e.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",e.Msg.MATH_IS_EVEN="is even",e.Msg.MATH_IS_NEGATIVE="is negative",e.Msg.MATH_IS_ODD="is odd",e.Msg.MATH_IS_POSITIVE="is positive",e.Msg.MATH_IS_PRIME="is prime",e.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",e.Msg.MATH_IS_WHOLE="is whole",e.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",e.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",e.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",e.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",e.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",e.Msg.MATH_NUMBER_TOOLTIP="A number.",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",e.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",e.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",e.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",e.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",e.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",e.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",e.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",e.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",e.Msg.MATH_ROUND_OPERATOR_ROUND="round",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",e.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",e.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",e.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",e.Msg.MATH_SINGLE_OP_ROOT="square root",e.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",e.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",e.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_TRIG_ACOS="acos",e.Msg.MATH_TRIG_ASIN="asin",e.Msg.MATH_TRIG_ATAN="atan",e.Msg.MATH_TRIG_COS="cos",e.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",e.Msg.MATH_TRIG_SIN="sin",e.Msg.MATH_TRIG_TAN="tan",e.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",e.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",e.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",e.Msg.NEW_NUMBER_VARIABLE="Create number variable...",e.Msg.NEW_STRING_VARIABLE="Create string variable...",e.Msg.NEW_VARIABLE="Create variable...",e.Msg.NEW_VARIABLE_TITLE="New variable name:",e.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",e.Msg.PROCEDURES_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CREATE_DO="Create '%1'",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",e.Msg.PROCEDURES_DEFNORETURN_TITLE="to",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFRETURN_RETURN="return",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",e.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",e.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",e.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",e.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",e.Msg.REDO="Redo",e.Msg.REMOVE_COMMENT="Remove Comment",e.Msg.RENAME_VARIABLE="Rename variable...",e.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TITLE="to %1 append text %2",e.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",e.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",e.Msg.TEXT_CHARAT_FIRST="get first letter",e.Msg.TEXT_CHARAT_FROM_END="get letter # from end",e.Msg.TEXT_CHARAT_FROM_START="get letter #",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_LAST="get last letter",e.Msg.TEXT_CHARAT_RANDOM="get random letter",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TITLE="in text %1 %2",e.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",e.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",e.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",e.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",e.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",e.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",e.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="length of %1",e.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="print %1",e.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",e.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",e.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",e.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",e.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",e.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",e.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",e.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",e.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",e.Msg.TODAY="Today",e.Msg.UNDO="Undo",e.Msg.UNNAMED_KEY="unnamed",e.Msg.VARIABLES_DEFAULT_NAME="item",e.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",e.Msg.VARIABLES_SET="set %1 to %2",e.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",e.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",e.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_GET_INDEX_HELPURL=e.Msg.LISTS_INDEX_OF_HELPURL,e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.MATH_HUE="230",e.Msg.LOOPS_HUE="120",e.Msg.LISTS_HUE="260",e.Msg.LOGIC_HUE="210",e.Msg.VARIABLES_HUE="330",e.Msg.TEXTS_HUE="160",e.Msg.PROCEDURES_HUE="290",e.Msg.COLOUR_HUE="20",e.Msg.VARIABLES_DYNAMIC_HUE="310",e.Msg}.apply(Z,m))&&(V.exports=t)},68266:function(V){V.exports=function(){"use strict";var Z=navigator.userAgent,g=navigator.platform,E=/gecko\/\d/i.test(Z),m=/MSIE \d/.test(Z),t=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Z),e=/Edge\/(\d+)/.exec(Z),n=m||t||e,a=n&&(m?document.documentMode||6:+(e||t)[1]),d=!e&&/WebKit\//.test(Z),C=d&&/Qt\/\d+\.\d+/.test(Z),D=!e&&/Chrome\//.test(Z),B=/Opera\//.test(Z),z=/Apple Computer/.test(navigator.vendor),oe=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Z),be=/PhantomJS/.test(Z),se=z&&(/Mobile\/\w+/.test(Z)||navigator.maxTouchPoints>2),Ie=/Android/.test(Z),Ge=se||Ie||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Z),_e=se||/Mac/.test(g),Le=/\bCrOS\b/.test(Z),We=/win/i.test(g),$e=B&&Z.match(/Version\/(\d*\.\d*)/);$e&&($e=Number($e[1])),$e&&$e>=15&&(B=!1,d=!0);var Te=_e&&(C||B&&(null==$e||$e<12.11)),ye=E||n&&a>=9;function ne(h){return new RegExp("(^|\\s)"+h+"(?:$|\\s)\\s*")}var ue,ge=function(h,y){var x=h.className,M=ne(y).exec(x);if(M){var L=x.slice(M.index+M[0].length);h.className=x.slice(0,M.index)+(L?M[1]+L:"")}};function ae(h){for(var y=h.childNodes.length;y>0;--y)h.removeChild(h.firstChild);return h}function He(h,y){return ae(h).appendChild(y)}function Se(h,y,x,M){var L=document.createElement(h);if(x&&(L.className=x),M&&(L.style.cssText=M),"string"==typeof y)L.appendChild(document.createTextNode(y));else if(y)for(var Y=0;Y<y.length;++Y)L.appendChild(y[Y]);return L}function Ee(h,y,x,M){var L=Se(h,y,x,M);return L.setAttribute("role","presentation"),L}function ie(h,y){if(3==y.nodeType&&(y=y.parentNode),h.contains)return h.contains(y);do{if(11==y.nodeType&&(y=y.host),y==h)return!0}while(y=y.parentNode)}function ht(){var h;try{h=document.activeElement}catch(y){h=document.body||null}for(;h&&h.shadowRoot&&h.shadowRoot.activeElement;)h=h.shadowRoot.activeElement;return h}function Oe(h,y){var x=h.className;ne(y).test(x)||(h.className+=(x?" ":"")+y)}function ke(h,y){for(var x=h.split(" "),M=0;M<x.length;M++)x[M]&&!ne(x[M]).test(y)&&(y+=" "+x[M]);return y}ue=document.createRange?function(h,y,x,M){var L=document.createRange();return L.setEnd(M||h,x),L.setStart(h,y),L}:function(h,y,x){var M=document.body.createTextRange();try{M.moveToElementText(h.parentNode)}catch(L){return M}return M.collapse(!0),M.moveEnd("character",x),M.moveStart("character",y),M};var dt=function(h){h.select()};function vt(h){var y=Array.prototype.slice.call(arguments,1);return function(){return h.apply(null,y)}}function lt(h,y,x){for(var M in y||(y={}),h)h.hasOwnProperty(M)&&(!1!==x||!y.hasOwnProperty(M))&&(y[M]=h[M]);return y}function Bt(h,y,x,M,L){null==y&&-1==(y=h.search(/[^\s\u00a0]/))&&(y=h.length);for(var Y=M||0,ce=L||0;;){var Ce=h.indexOf("\t",Y);if(Ce<0||Ce>=y)return ce+(y-Y);ce+=Ce-Y,ce+=x-ce%x,Y=Ce+1}}se?dt=function(h){h.selectionStart=0,h.selectionEnd=h.value.length}:n&&(dt=function(h){try{h.select()}catch(y){}});var Pt=function(){this.id=null,this.f=null,this.time=0,this.handler=vt(this.onTimeout,this)};function Zt(h,y){for(var x=0;x<h.length;++x)if(h[x]==y)return x;return-1}Pt.prototype.onTimeout=function(h){h.id=0,h.time<=+new Date?h.f():setTimeout(h.handler,h.time-+new Date)},Pt.prototype.set=function(h,y){this.f=y;var x=+new Date+h;(!this.id||x<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,h),this.time=x)};var ii={toString:function(){return"CodeMirror.Pass"}},Ct={scroll:!1},gi={origin:"*mouse"},Be={origin:"+move"};function Tt(h,y,x){for(var M=0,L=0;;){var Y=h.indexOf("\t",M);-1==Y&&(Y=h.length);var ce=Y-M;if(Y==h.length||L+ce>=y)return M+Math.min(ce,y-L);if(L+=Y-M,M=Y+1,(L+=x-L%x)>=y)return M}}var Je=[""];function _t(h){for(;Je.length<=h;)Je.push(xe(Je)+" ");return Je[h]}function xe(h){return h[h.length-1]}function pt(h,y){for(var x=[],M=0;M<h.length;M++)x[M]=y(h[M],M);return x}function di(){}function Rt(h,y){var x;return Object.create?x=Object.create(h):(di.prototype=h,x=new di),y&&lt(y,x),x}var et=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(h){return/\w/.test(h)||h>"\x80"&&(h.toUpperCase()!=h.toLowerCase()||et.test(h))}function Lt(h,y){return y?!!(y.source.indexOf("\\w")>-1&&tt(h))||y.test(h):tt(h)}function nt(h){for(var y in h)if(h.hasOwnProperty(y)&&h[y])return!1;return!0}var mt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function yt(h){return h.charCodeAt(0)>=768&&mt.test(h)}function Ze(h,y,x){for(;(x<0?y>0:y<h.length)&&yt(h.charAt(y));)y+=x;return y}function ut(h,y,x){for(var M=y>x?-1:1;;){if(y==x)return y;var L=(y+x)/2,Y=M<0?Math.ceil(L):Math.floor(L);if(Y==y)return h(Y)?y:x;h(Y)?x=Y:y=Y+M}}var ni=null;function Ni(h,y,x){var M;ni=null;for(var L=0;L<h.length;++L){var Y=h[L];if(Y.from<y&&Y.to>y)return L;Y.to==y&&(Y.from!=Y.to&&"before"==x?M=L:ni=L),Y.from==y&&(Y.from!=Y.to&&"before"!=x?M=L:ni=L)}return null!=M?M:ni}var wi=function(){function x(Ke){return Ke<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(Ke):1424<=Ke&&Ke<=1524?"R":1536<=Ke&&Ke<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(Ke-1536):1774<=Ke&&Ke<=2220?"r":8192<=Ke&&Ke<=8203?"w":8204==Ke?"b":"L"}var M=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,L=/[stwN]/,Y=/[LRr]/,ce=/[Lb1n]/,Ce=/[1n]/;function Ve(Ke,At,Xt){this.level=Ke,this.from=At,this.to=Xt}return function(Ke,At){var Xt="ltr"==At?"L":"R";if(0==Ke.length||"ltr"==At&&!M.test(Ke))return!1;for(var fi=Ke.length,ci=[],Pi=0;Pi<fi;++Pi)ci.push(x(Ke.charCodeAt(Pi)));for(var Xi=0,sn=Xt;Xi<fi;++Xi){var _n=ci[Xi];"m"==_n?ci[Xi]=sn:sn=_n}for(var Sn=0,hn=Xt;Sn<fi;++Sn){var Rn=ci[Sn];"1"==Rn&&"r"==hn?ci[Sn]="n":Y.test(Rn)&&(hn=Rn,"r"==Rn&&(ci[Sn]="R"))}for(var Jn=1,$n=ci[0];Jn<fi-1;++Jn){var br=ci[Jn];"+"==br&&"1"==$n&&"1"==ci[Jn+1]?ci[Jn]="1":","==br&&$n==ci[Jn+1]&&("1"==$n||"n"==$n)&&(ci[Jn]=$n),$n=br}for(var fo=0;fo<fi;++fo){var Es=ci[fo];if(","==Es)ci[fo]="N";else if("%"==Es){var Wo=void 0;for(Wo=fo+1;Wo<fi&&"%"==ci[Wo];++Wo);for(var Da=fo&&"!"==ci[fo-1]||Wo<fi&&"1"==ci[Wo]?"1":"N",Pa=fo;Pa<Wo;++Pa)ci[Pa]=Da;fo=Wo-1}}for(var Cs=0,Xr=Xt;Cs<fi;++Cs){var ks=ci[Cs];"L"==Xr&&"1"==ks?ci[Cs]="L":Y.test(ks)&&(Xr=ks)}for(var ls=0;ls<fi;++ls)if(L.test(ci[ls])){var T=void 0;for(T=ls+1;T<fi&&L.test(ci[T]);++T);for(var F="L"==(ls?ci[ls-1]:Xt),ee=F==("L"==(T<fi?ci[T]:Xt))?F?"L":"R":Xt,pe=ls;pe<T;++pe)ci[pe]=ee;ls=T-1}for(var ze,Ye=[],rt=0;rt<fi;)if(ce.test(ci[rt])){var St=rt;for(++rt;rt<fi&&ce.test(ci[rt]);++rt);Ye.push(new Ve(0,St,rt))}else{var Mt=rt,ri=Ye.length,ai="rtl"==At?1:0;for(++rt;rt<fi&&"L"!=ci[rt];++rt);for(var pi=Mt;pi<rt;)if(Ce.test(ci[pi])){Mt<pi&&(Ye.splice(ri,0,new Ve(1,Mt,pi)),ri+=ai);var Si=pi;for(++pi;pi<rt&&Ce.test(ci[pi]);++pi);Ye.splice(ri,0,new Ve(2,Si,pi)),ri+=ai,Mt=pi}else++pi;Mt<rt&&Ye.splice(ri,0,new Ve(1,Mt,rt))}return"ltr"==At&&(1==Ye[0].level&&(ze=Ke.match(/^\s+/))&&(Ye[0].from=ze[0].length,Ye.unshift(new Ve(0,0,ze[0].length))),1==xe(Ye).level&&(ze=Ke.match(/\s+$/))&&(xe(Ye).to-=ze[0].length,Ye.push(new Ve(0,fi-ze[0].length,fi)))),"rtl"==At?Ye.reverse():Ye}}();function yi(h,y){var x=h.order;return null==x&&(x=h.order=wi(h.text,y)),x}var pn=[],mi=function(h,y,x){if(h.addEventListener)h.addEventListener(y,x,!1);else if(h.attachEvent)h.attachEvent("on"+y,x);else{var M=h._handlers||(h._handlers={});M[y]=(M[y]||pn).concat(x)}};function Ji(h,y){return h._handlers&&h._handlers[y]||pn}function wt(h,y,x){if(h.removeEventListener)h.removeEventListener(y,x,!1);else if(h.detachEvent)h.detachEvent("on"+y,x);else{var M=h._handlers,L=M&&M[y];if(L){var Y=Zt(L,x);Y>-1&&(M[y]=L.slice(0,Y).concat(L.slice(Y+1)))}}}function Ot(h,y){var x=Ji(h,y);if(x.length)for(var M=Array.prototype.slice.call(arguments,2),L=0;L<x.length;++L)x[L].apply(null,M)}function Ci(h,y,x){return"string"==typeof y&&(y={type:y,preventDefault:function(){this.defaultPrevented=!0}}),Ot(h,x||y.type,h,y),ft(y)||y.codemirrorIgnore}function zt(h){var y=h._handlers&&h._handlers.cursorActivity;if(y)for(var x=h.curOp.cursorActivityHandlers||(h.curOp.cursorActivityHandlers=[]),M=0;M<y.length;++M)-1==Zt(x,y[M])&&x.push(y[M])}function Mi(h,y){return Ji(h,y).length>0}function _i(h){h.prototype.on=function(y,x){mi(this,y,x)},h.prototype.off=function(y,x){wt(this,y,x)}}function Bi(h){h.preventDefault?h.preventDefault():h.returnValue=!1}function Jt(h){h.stopPropagation?h.stopPropagation():h.cancelBubble=!0}function ft(h){return null!=h.defaultPrevented?h.defaultPrevented:0==h.returnValue}function Ae(h){Bi(h),Jt(h)}function le(h){return h.target||h.srcElement}function Pe(h){var y=h.which;return null==y&&(1&h.button?y=1:2&h.button?y=3:4&h.button&&(y=2)),_e&&h.ctrlKey&&1==y&&(y=3),y}var It,Zi,at=function(){if(n&&a<9)return!1;var h=Se("div");return"draggable"in h||"dragDrop"in h}();function Gi(h){if(null==It){var y=Se("span","\u200b");He(h,Se("span",[y,document.createTextNode("x")])),0!=h.firstChild.offsetHeight&&(It=y.offsetWidth<=1&&y.offsetHeight>2&&!(n&&a<8))}var x=It?Se("span","\u200b"):Se("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return x.setAttribute("cm-text",""),x}function En(h){if(null!=Zi)return Zi;var y=He(h,document.createTextNode("A\u062eA")),x=ue(y,0,1).getBoundingClientRect(),M=ue(y,1,2).getBoundingClientRect();return ae(h),!(!x||x.left==x.right)&&(Zi=M.right-x.right<3)}var h,nr=3!="\n\nb".split(/\n/).length?function(h){for(var y=0,x=[],M=h.length;y<=M;){var L=h.indexOf("\n",y);-1==L&&(L=h.length);var Y=h.slice(y,"\r"==h.charAt(L-1)?L-1:L),ce=Y.indexOf("\r");-1!=ce?(x.push(Y.slice(0,ce)),y+=ce+1):(x.push(Y),y=L+1)}return x}:function(h){return h.split(/\r\n?|\n/)},li=window.getSelection?function(h){try{return h.selectionStart!=h.selectionEnd}catch(y){return!1}}:function(h){var y;try{y=h.ownerDocument.selection.createRange()}catch(x){}return!(!y||y.parentElement()!=h)&&0!=y.compareEndPoints("StartToEnd",y)},$t="oncopy"in(h=Se("div"))||(h.setAttribute("oncopy","return;"),"function"==typeof h.oncopy),kt=null;var Oi={},fn={};function In(h,y){arguments.length>2&&(y.dependencies=Array.prototype.slice.call(arguments,2)),Oi[h]=y}function Tr(h){if("string"==typeof h&&fn.hasOwnProperty(h))h=fn[h];else if(h&&"string"==typeof h.name&&fn.hasOwnProperty(h.name)){var y=fn[h.name];"string"==typeof y&&(y={name:y}),(h=Rt(y,h)).name=y.name}else{if("string"==typeof h&&/^[\w\-]+\/[\w\-]+\+xml$/.test(h))return Tr("application/xml");if("string"==typeof h&&/^[\w\-]+\/[\w\-]+\+json$/.test(h))return Tr("application/json")}return"string"==typeof h?{name:h}:h||{name:"null"}}function eo(h,y){y=Tr(y);var x=Oi[y.name];if(!x)return eo(h,"text/plain");var M=x(h,y);if(no.hasOwnProperty(y.name)){var L=no[y.name];for(var Y in L)!L.hasOwnProperty(Y)||(M.hasOwnProperty(Y)&&(M["_"+Y]=M[Y]),M[Y]=L[Y])}if(M.name=y.name,y.helperType&&(M.helperType=y.helperType),y.modeProps)for(var ce in y.modeProps)M[ce]=y.modeProps[ce];return M}var no={};function mo(h,y){lt(y,no.hasOwnProperty(h)?no[h]:no[h]={})}function Lr(h,y){if(!0===y)return y;if(h.copyState)return h.copyState(y);var x={};for(var M in y){var L=y[M];L instanceof Array&&(L=L.concat([])),x[M]=L}return x}function pr(h,y){for(var x;h.innerMode&&(x=h.innerMode(y))&&x.mode!=h;)y=x.state,h=x.mode;return x||{mode:h,state:y}}function Ro(h,y,x){return!h.startState||h.startState(y,x)}var cr=function(h,y,x){this.pos=this.start=0,this.string=h,this.tabSize=y||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=x};function Ri(h,y){if((y-=h.first)<0||y>=h.size)throw new Error("There is no line "+(y+h.first)+" in the document.");for(var x=h;!x.lines;)for(var M=0;;++M){var L=x.children[M],Y=L.chunkSize();if(y<Y){x=L;break}y-=Y}return x.lines[y]}function Gn(h,y,x){var M=[],L=y.line;return h.iter(y.line,x.line+1,function(Y){var ce=Y.text;L==x.line&&(ce=ce.slice(0,x.ch)),L==y.line&&(ce=ce.slice(y.ch)),M.push(ce),++L}),M}function vr(h,y,x){var M=[];return h.iter(y,x,function(L){M.push(L.text)}),M}function Hr(h,y){var x=y-h.height;if(x)for(var M=h;M;M=M.parent)M.height+=x}function _r(h){if(null==h.parent)return null;for(var y=h.parent,x=Zt(y.lines,h),M=y.parent;M;y=M,M=M.parent)for(var L=0;M.children[L]!=y;++L)x+=M.children[L].chunkSize();return x+y.first}function xr(h,y){var x=h.first;e:do{for(var M=0;M<h.children.length;++M){var L=h.children[M],Y=L.height;if(y<Y){h=L;continue e}y-=Y,x+=L.chunkSize()}return x}while(!h.lines);for(var ce=0;ce<h.lines.length;++ce){var Ve=h.lines[ce].height;if(y<Ve)break;y-=Ve}return x+ce}function Qr(h,y){return y>=h.first&&y<h.first+h.size}function Rr(h,y){return String(h.lineNumberFormatter(y+h.firstLineNumber))}function Vi(h,y,x){if(void 0===x&&(x=null),!(this instanceof Vi))return new Vi(h,y,x);this.line=h,this.ch=y,this.sticky=x}function Dn(h,y){return h.line-y.line||h.ch-y.ch}function Wn(h,y){return h.sticky==y.sticky&&0==Dn(h,y)}function ot(h){return Vi(h.line,h.ch)}function Ht(h,y){return Dn(h,y)<0?y:h}function Ai(h,y){return Dn(h,y)<0?h:y}function Ki(h,y){return Math.max(h.first,Math.min(y,h.first+h.size-1))}function zi(h,y){if(y.line<h.first)return Vi(h.first,0);var x=h.first+h.size-1;return y.line>x?Vi(x,Ri(h,x).text.length):function(h,y){var x=h.ch;return null==x||x>y?Vi(h.line,y):x<0?Vi(h.line,0):h}(y,Ri(h,y.line).text.length)}function Yn(h,y){for(var x=[],M=0;M<y.length;M++)x[M]=zi(h,y[M]);return x}cr.prototype.eol=function(){return this.pos>=this.string.length},cr.prototype.sol=function(){return this.pos==this.lineStart},cr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},cr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},cr.prototype.eat=function(h){var y=this.string.charAt(this.pos);if("string"==typeof h?y==h:y&&(h.test?h.test(y):h(y)))return++this.pos,y},cr.prototype.eatWhile=function(h){for(var y=this.pos;this.eat(h););return this.pos>y},cr.prototype.eatSpace=function(){for(var h=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>h},cr.prototype.skipToEnd=function(){this.pos=this.string.length},cr.prototype.skipTo=function(h){var y=this.string.indexOf(h,this.pos);if(y>-1)return this.pos=y,!0},cr.prototype.backUp=function(h){this.pos-=h},cr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Bt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Bt(this.string,this.lineStart,this.tabSize):0)},cr.prototype.indentation=function(){return Bt(this.string,null,this.tabSize)-(this.lineStart?Bt(this.string,this.lineStart,this.tabSize):0)},cr.prototype.match=function(h,y,x){if("string"!=typeof h){var Y=this.string.slice(this.pos).match(h);return Y&&Y.index>0?null:(Y&&!1!==y&&(this.pos+=Y[0].length),Y)}var M=function(ce){return x?ce.toLowerCase():ce};if(M(this.string.substr(this.pos,h.length))==M(h))return!1!==y&&(this.pos+=h.length),!0},cr.prototype.current=function(){return this.string.slice(this.start,this.pos)},cr.prototype.hideFirstChars=function(h,y){this.lineStart+=h;try{return y()}finally{this.lineStart-=h}},cr.prototype.lookAhead=function(h){var y=this.lineOracle;return y&&y.lookAhead(h)},cr.prototype.baseToken=function(){var h=this.lineOracle;return h&&h.baseToken(this.pos)};var sr=function(h,y){this.state=h,this.lookAhead=y},Bn=function(h,y,x,M){this.state=y,this.doc=h,this.line=x,this.maxLookAhead=M||0,this.baseTokens=null,this.baseTokenPos=1};function Ao(h,y,x,M){var L=[h.state.modeGen],Y={};Ss(h,y.text,h.doc.mode,x,function(Ke,At){return L.push(Ke,At)},Y,M);for(var ce=x.state,Ce=function(Ke){x.baseTokens=L;var At=h.state.overlays[Ke],Xt=1,fi=0;x.state=!0,Ss(h,y.text,At.mode,x,function(ci,Pi){for(var Xi=Xt;fi<ci;){var sn=L[Xt];sn>ci&&L.splice(Xt,1,ci,L[Xt+1],sn),Xt+=2,fi=Math.min(ci,sn)}if(Pi)if(At.opaque)L.splice(Xi,Xt-Xi,ci,"overlay "+Pi),Xt=Xi+2;else for(;Xi<Xt;Xi+=2){var _n=L[Xi+1];L[Xi+1]=(_n?_n+" ":"")+"overlay "+Pi}},Y),x.state=ce,x.baseTokens=null,x.baseTokenPos=1},Ve=0;Ve<h.state.overlays.length;++Ve)Ce(Ve);return{styles:L,classes:Y.bgClass||Y.textClass?Y:null}}function Yo(h,y,x){if(!y.styles||y.styles[0]!=h.state.modeGen){var M=ro(h,_r(y)),L=y.text.length>h.options.maxHighlightLength&&Lr(h.doc.mode,M.state),Y=Ao(h,y,M);L&&(M.state=L),y.stateAfter=M.save(!L),y.styles=Y.styles,Y.classes?y.styleClasses=Y.classes:y.styleClasses&&(y.styleClasses=null),x===h.doc.highlightFrontier&&(h.doc.modeFrontier=Math.max(h.doc.modeFrontier,++h.doc.highlightFrontier))}return y.styles}function ro(h,y,x){var M=h.doc,L=h.display;if(!M.mode.startState)return new Bn(M,!0,y);var Y=function(h,y,x){for(var M,L,Y=h.doc,ce=x?-1:y-(h.doc.mode.innerMode?1e3:100),Ce=y;Ce>ce;--Ce){if(Ce<=Y.first)return Y.first;var Ve=Ri(Y,Ce-1),Ke=Ve.stateAfter;if(Ke&&(!x||Ce+(Ke instanceof sr?Ke.lookAhead:0)<=Y.modeFrontier))return Ce;var At=Bt(Ve.text,null,h.options.tabSize);(null==L||M>At)&&(L=Ce-1,M=At)}return L}(h,y,x),ce=Y>M.first&&Ri(M,Y-1).stateAfter,Ce=ce?Bn.fromSaved(M,ce,Y):new Bn(M,Ro(M.mode),Y);return M.iter(Y,y,function(Ve){_o(h,Ve.text,Ce);var Ke=Ce.line;Ve.stateAfter=Ke==y-1||Ke%5==0||Ke>=L.viewFrom&&Ke<L.viewTo?Ce.save():null,Ce.nextLine()}),x&&(M.modeFrontier=Ce.line),Ce}function _o(h,y,x,M){var L=h.doc.mode,Y=new cr(y,h.options.tabSize,x);for(Y.start=Y.pos=M||0,""==y&&Qs(L,x.state);!Y.eol();)dr(L,Y,x.state),Y.start=Y.pos}function Qs(h,y){if(h.blankLine)return h.blankLine(y);if(h.innerMode){var x=pr(h,y);if(x.mode.blankLine)return x.mode.blankLine(x.state)}}function dr(h,y,x,M){for(var L=0;L<10;L++){M&&(M[0]=pr(h,x).mode);var Y=h.token(y,x);if(y.pos>y.start)return Y}throw new Error("Mode "+h.name+" failed to advance stream.")}Bn.prototype.lookAhead=function(h){var y=this.doc.getLine(this.line+h);return null!=y&&h>this.maxLookAhead&&(this.maxLookAhead=h),y},Bn.prototype.baseToken=function(h){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=h;)this.baseTokenPos+=2;var y=this.baseTokens[this.baseTokenPos+1];return{type:y&&y.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-h}},Bn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Bn.fromSaved=function(h,y,x){return y instanceof sr?new Bn(h,Lr(h.mode,y.state),x,y.lookAhead):new Bn(h,Lr(h.mode,y),x)},Bn.prototype.save=function(h){var y=!1!==h?Lr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new sr(y,this.maxLookAhead):y};var Xo=function(h,y,x){this.start=h.start,this.end=h.pos,this.string=h.current(),this.type=y||null,this.state=x};function $r(h,y,x,M){var ce,At,L=h.doc,Y=L.mode,Ce=Ri(L,(y=zi(L,y)).line),Ve=ro(h,y.line,x),Ke=new cr(Ce.text,h.options.tabSize,Ve);for(M&&(At=[]);(M||Ke.pos<y.ch)&&!Ke.eol();)Ke.start=Ke.pos,ce=dr(Y,Ke,Ve.state),M&&At.push(new Xo(Ke,ce,Lr(L.mode,Ve.state)));return M?At:new Xo(Ke,ce,Ve.state)}function ws(h,y){if(h)for(;;){var x=h.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!x)break;h=h.slice(0,x.index)+h.slice(x.index+x[0].length);var M=x[1]?"bgClass":"textClass";null==y[M]?y[M]=x[2]:new RegExp("(?:^|\\s)"+x[2]+"(?:$|\\s)").test(y[M])||(y[M]+=" "+x[2])}return h}function Ss(h,y,x,M,L,Y,ce){var Ce=x.flattenSpans;null==Ce&&(Ce=h.options.flattenSpans);var Xt,Ve=0,Ke=null,At=new cr(y,h.options.tabSize,M),fi=h.options.addModeClass&&[null];for(""==y&&ws(Qs(x,M.state),Y);!At.eol();){if(At.pos>h.options.maxHighlightLength?(Ce=!1,ce&&_o(h,y,M,At.pos),At.pos=y.length,Xt=null):Xt=ws(dr(x,At,M.state,fi),Y),fi){var ci=fi[0].name;ci&&(Xt="m-"+(Xt?ci+" "+Xt:ci))}if(!Ce||Ke!=Xt){for(;Ve<At.start;)L(Ve=Math.min(At.start,Ve+5e3),Ke);Ke=Xt}At.start=At.pos}for(;Ve<At.pos;){var Pi=Math.min(At.pos,Ve+5e3);L(Pi,Ke),Ve=Pi}}var rs=!1,Ho=!1;function $a(h,y,x){this.marker=h,this.from=y,this.to=x}function qo(h,y){if(h)for(var x=0;x<h.length;++x){var M=h[x];if(M.marker==y)return M}}function ma(h,y){for(var x,M=0;M<h.length;++M)h[M]!=y&&(x||(x=[])).push(h[M]);return x}function Hs(h,y){if(y.full)return null;var x=Qr(h,y.from.line)&&Ri(h,y.from.line).markedSpans,M=Qr(h,y.to.line)&&Ri(h,y.to.line).markedSpans;if(!x&&!M)return null;var L=y.from.ch,Y=y.to.ch,ce=0==Dn(y.from,y.to),Ce=function(h,y,x){var M;if(h)for(var L=0;L<h.length;++L){var Y=h[L],ce=Y.marker;null!=Y.from&&!(ce.inclusiveLeft?Y.from<=y:Y.from<y)&&(Y.from!=y||"bookmark"!=ce.type||x&&Y.marker.insertLeft)||(M||(M=[])).push(new $a(ce,Y.from,null==Y.to||(ce.inclusiveRight?Y.to>=y:Y.to>y)?null:Y.to))}return M}(x,L,ce),Ve=function(h,y,x){var M;if(h)for(var L=0;L<h.length;++L){var Y=h[L],ce=Y.marker;(null==Y.to||(ce.inclusiveRight?Y.to>=y:Y.to>y)||Y.from==y&&"bookmark"==ce.type&&(!x||Y.marker.insertLeft))&&(M||(M=[])).push(new $a(ce,null==Y.from||(ce.inclusiveLeft?Y.from<=y:Y.from<y)?null:Y.from-y,null==Y.to?null:Y.to-y))}return M}(M,Y,ce),Ke=1==y.text.length,At=xe(y.text).length+(Ke?L:0);if(Ce)for(var Xt=0;Xt<Ce.length;++Xt){var fi=Ce[Xt];if(null==fi.to){var ci=qo(Ve,fi.marker);ci?Ke&&(fi.to=null==ci.to?null:ci.to+At):fi.to=L}}if(Ve)for(var Pi=0;Pi<Ve.length;++Pi){var Xi=Ve[Pi];null!=Xi.to&&(Xi.to+=At),null==Xi.from?qo(Ce,Xi.marker)||(Xi.from=At,Ke&&(Ce||(Ce=[])).push(Xi)):(Xi.from+=At,Ke&&(Ce||(Ce=[])).push(Xi))}Ce&&(Ce=fs(Ce)),Ve&&Ve!=Ce&&(Ve=fs(Ve));var _n=[Ce];if(!Ke){var hn,Sn=y.text.length-2;if(Sn>0&&Ce)for(var Rn=0;Rn<Ce.length;++Rn)null==Ce[Rn].to&&(hn||(hn=[])).push(new $a(Ce[Rn].marker,null,null));for(var Jn=0;Jn<Sn;++Jn)_n.push(hn);_n.push(Ve)}return _n}function fs(h){for(var y=0;y<h.length;++y){var x=h[y];null!=x.from&&x.from==x.to&&!1!==x.marker.clearWhenEmpty&&h.splice(y--,1)}return h.length?h:null}function _a(h){var y=h.markedSpans;if(y){for(var x=0;x<y.length;++x)y[x].marker.detachLine(h);h.markedSpans=null}}function qs(h,y){if(y){for(var x=0;x<y.length;++x)y[x].marker.attachLine(h);h.markedSpans=y}}function Io(h){return h.inclusiveLeft?-1:0}function jr(h){return h.inclusiveRight?1:0}function ao(h,y){var x=h.lines.length-y.lines.length;if(0!=x)return x;var M=h.find(),L=y.find(),Y=Dn(M.from,L.from)||Io(h)-Io(y);return Y?-Y:Dn(M.to,L.to)||jr(h)-jr(y)||y.id-h.id}function yo(h,y){var M,x=Ho&&h.markedSpans;if(x)for(var L=void 0,Y=0;Y<x.length;++Y)(L=x[Y]).marker.collapsed&&null==(y?L.from:L.to)&&(!M||ao(M,L.marker)<0)&&(M=L.marker);return M}function Vs(h){return yo(h,!0)}function Ko(h){return yo(h,!1)}function Ds(h,y){var M,x=Ho&&h.markedSpans;if(x)for(var L=0;L<x.length;++L){var Y=x[L];Y.marker.collapsed&&(null==Y.from||Y.from<y)&&(null==Y.to||Y.to>y)&&(!M||ao(M,Y.marker)<0)&&(M=Y.marker)}return M}function zo(h,y,x,M,L){var Y=Ri(h,y),ce=Ho&&Y.markedSpans;if(ce)for(var Ce=0;Ce<ce.length;++Ce){var Ve=ce[Ce];if(Ve.marker.collapsed){var Ke=Ve.marker.find(0),At=Dn(Ke.from,x)||Io(Ve.marker)-Io(L),Xt=Dn(Ke.to,M)||jr(Ve.marker)-jr(L);if(!(At>=0&&Xt<=0||At<=0&&Xt>=0)&&(At<=0&&(Ve.marker.inclusiveRight&&L.inclusiveLeft?Dn(Ke.to,x)>=0:Dn(Ke.to,x)>0)||At>=0&&(Ve.marker.inclusiveRight&&L.inclusiveLeft?Dn(Ke.from,M)<=0:Dn(Ke.from,M)<0)))return!0}}}function Oo(h){for(var y;y=Vs(h);)h=y.find(-1,!0).line;return h}function lo(h,y){var x=Ri(h,y),M=Oo(x);return x==M?y:_r(M)}function gs(h,y){if(y>h.lastLine())return y;var M,x=Ri(h,y);if(!Pr(h,x))return y;for(;M=Ko(x);)x=M.find(1,!0).line;return _r(x)+1}function Pr(h,y){var x=Ho&&y.markedSpans;if(x)for(var M=void 0,L=0;L<x.length;++L)if((M=x[L]).marker.collapsed){if(null==M.from)return!0;if(!M.marker.widgetNode&&0==M.from&&M.marker.inclusiveLeft&&la(h,y,M))return!0}}function la(h,y,x){if(null==x.to){var M=x.marker.find(1,!0);return la(h,M.line,qo(M.line.markedSpans,x.marker))}if(x.marker.inclusiveRight&&x.to==y.text.length)return!0;for(var L=void 0,Y=0;Y<y.markedSpans.length;++Y)if((L=y.markedSpans[Y]).marker.collapsed&&!L.marker.widgetNode&&L.from==x.to&&(null==L.to||L.to!=x.from)&&(L.marker.inclusiveLeft||x.marker.inclusiveRight)&&la(h,y,L))return!0}function zr(h){for(var y=0,x=(h=Oo(h)).parent,M=0;M<x.lines.length;++M){var L=x.lines[M];if(L==h)break;y+=L.height}for(var Y=x.parent;Y;Y=(x=Y).parent)for(var ce=0;ce<Y.children.length;++ce){var Ce=Y.children[ce];if(Ce==x)break;y+=Ce.height}return y}function ca(h){if(0==h.height)return 0;for(var x,y=h.text.length,M=h;x=Vs(M);){var L=x.find(0,!0);M=L.from.line,y+=L.from.ch-L.to.ch}for(M=h;x=Ko(M);){var Y=x.find(0,!0);y-=M.text.length-Y.from.ch,y+=(M=Y.to.line).text.length-Y.to.ch}return y}function bl(h){var y=h.display,x=h.doc;y.maxLine=Ri(x,x.first),y.maxLineLength=ca(y.maxLine),y.maxLineChanged=!0,x.iter(function(M){var L=ca(M);L>y.maxLineLength&&(y.maxLineLength=L,y.maxLine=M)})}var us=function(h,y,x){this.text=h,qs(this,y),this.height=x?x(this):1};function ms(h){h.parent=null,_a(h)}us.prototype.lineNo=function(){return _r(this)},_i(us);var yl={},Nr={};function kn(h,y){if(!h||/^\s*$/.test(h))return null;var x=y.addModeClass?Nr:yl;return x[h]||(x[h]=h.replace(/\S+/g,"cm-$&"))}function va(h,y){var x=Ee("span",null,null,d?"padding-right: .1px":null),M={pre:Ee("pre",[x],"CodeMirror-line"),content:x,col:0,pos:0,cm:h,trailingSpace:!1,splitSpaces:h.getOption("lineWrapping")};y.measure={};for(var L=0;L<=(y.rest?y.rest.length:0);L++){var Y=L?y.rest[L-1]:y.line,ce=void 0;M.pos=0,M.addToken=J,En(h.display.measure)&&(ce=yi(Y,h.doc.direction))&&(M.addToken=W(M.addToken,ce)),M.map=[],Ft(Y,M,Yo(h,Y,y!=h.display.externalMeasured&&_r(Y))),Y.styleClasses&&(Y.styleClasses.bgClass&&(M.bgClass=ke(Y.styleClasses.bgClass,M.bgClass||"")),Y.styleClasses.textClass&&(M.textClass=ke(Y.styleClasses.textClass,M.textClass||""))),0==M.map.length&&M.map.push(0,0,M.content.appendChild(Gi(h.display.measure))),0==L?(y.measure.map=M.map,y.measure.cache={}):((y.measure.maps||(y.measure.maps=[])).push(M.map),(y.measure.caches||(y.measure.caches=[])).push({}))}if(d){var Ve=M.content.lastChild;(/\bcm-tab\b/.test(Ve.className)||Ve.querySelector&&Ve.querySelector(".cm-tab"))&&(M.content.className="cm-tab-wrap-hack")}return Ot(h,"renderLine",h,y.line,M.pre),M.pre.className&&(M.textClass=ke(M.pre.className,M.textClass||"")),M}function Re(h){var y=Se("span","\u2022","cm-invalidchar");return y.title="\\u"+h.charCodeAt(0).toString(16),y.setAttribute("aria-label",y.title),y}function J(h,y,x,M,L,Y,ce){if(y){var At,Ce=h.splitSpaces?function(h,y){if(h.length>1&&!/  /.test(h))return h;for(var x=y,M="",L=0;L<h.length;L++){var Y=h.charAt(L);" "==Y&&x&&(L==h.length-1||32==h.charCodeAt(L+1))&&(Y="\xa0"),M+=Y,x=" "==Y}return M}(y,h.trailingSpace):y,Ve=h.cm.state.specialChars,Ke=!1;if(Ve.test(y)){At=document.createDocumentFragment();for(var Xt=0;;){Ve.lastIndex=Xt;var fi=Ve.exec(y),ci=fi?fi.index-Xt:y.length-Xt;if(ci){var Pi=document.createTextNode(Ce.slice(Xt,Xt+ci));At.appendChild(n&&a<9?Se("span",[Pi]):Pi),h.map.push(h.pos,h.pos+ci,Pi),h.col+=ci,h.pos+=ci}if(!fi)break;Xt+=ci+1;var Xi=void 0;if("\t"==fi[0]){var sn=h.cm.options.tabSize,_n=sn-h.col%sn;(Xi=At.appendChild(Se("span",_t(_n),"cm-tab"))).setAttribute("role","presentation"),Xi.setAttribute("cm-text","\t"),h.col+=_n}else"\r"==fi[0]||"\n"==fi[0]?((Xi=At.appendChild(Se("span","\r"==fi[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",fi[0]),h.col+=1):((Xi=h.cm.options.specialCharPlaceholder(fi[0])).setAttribute("cm-text",fi[0]),At.appendChild(n&&a<9?Se("span",[Xi]):Xi),h.col+=1);h.map.push(h.pos,h.pos+1,Xi),h.pos++}}else h.col+=y.length,At=document.createTextNode(Ce),h.map.push(h.pos,h.pos+y.length,At),n&&a<9&&(Ke=!0),h.pos+=y.length;if(h.trailingSpace=32==Ce.charCodeAt(y.length-1),x||M||L||Ke||Y||ce){var Sn=x||"";M&&(Sn+=M),L&&(Sn+=L);var hn=Se("span",[At],Sn,Y);if(ce)for(var Rn in ce)ce.hasOwnProperty(Rn)&&"style"!=Rn&&"class"!=Rn&&hn.setAttribute(Rn,ce[Rn]);return h.content.appendChild(hn)}h.content.appendChild(At)}}function W(h,y){return function(x,M,L,Y,ce,Ce,Ve){L=L?L+" cm-force-border":"cm-force-border";for(var Ke=x.pos,At=Ke+M.length;;){for(var Xt=void 0,fi=0;fi<y.length&&!((Xt=y[fi]).to>Ke&&Xt.from<=Ke);fi++);if(Xt.to>=At)return h(x,M,L,Y,ce,Ce,Ve);h(x,M.slice(0,Xt.to-Ke),L,Y,null,Ce,Ve),Y=null,M=M.slice(Xt.to-Ke),Ke=Xt.to}}}function Me(h,y,x,M){var L=!M&&x.widgetNode;L&&h.map.push(h.pos,h.pos+y,L),!M&&h.cm.display.input.needsContentAttribute&&(L||(L=h.content.appendChild(document.createElement("span"))),L.setAttribute("cm-marker",x.id)),L&&(h.cm.display.input.setUneditable(L),h.content.appendChild(L)),h.pos+=y,h.trailingSpace=!1}function Ft(h,y,x){var M=h.markedSpans,L=h.text,Y=0;if(M)for(var Xt,fi,Pi,Xi,sn,_n,Sn,Ce=L.length,Ve=0,Ke=1,At="",ci=0;;){if(ci==Ve){Pi=Xi=sn=fi="",Sn=null,_n=null,ci=1/0;for(var hn=[],Rn=void 0,Jn=0;Jn<M.length;++Jn){var $n=M[Jn],br=$n.marker;if("bookmark"==br.type&&$n.from==Ve&&br.widgetNode)hn.push(br);else if($n.from<=Ve&&(null==$n.to||$n.to>Ve||br.collapsed&&$n.to==Ve&&$n.from==Ve)){if(null!=$n.to&&$n.to!=Ve&&ci>$n.to&&(ci=$n.to,Xi=""),br.className&&(Pi+=" "+br.className),br.css&&(fi=(fi?fi+";":"")+br.css),br.startStyle&&$n.from==Ve&&(sn+=" "+br.startStyle),br.endStyle&&$n.to==ci&&(Rn||(Rn=[])).push(br.endStyle,$n.to),br.title&&((Sn||(Sn={})).title=br.title),br.attributes)for(var fo in br.attributes)(Sn||(Sn={}))[fo]=br.attributes[fo];br.collapsed&&(!_n||ao(_n.marker,br)<0)&&(_n=$n)}else $n.from>Ve&&ci>$n.from&&(ci=$n.from)}if(Rn)for(var Es=0;Es<Rn.length;Es+=2)Rn[Es+1]==ci&&(Xi+=" "+Rn[Es]);if(!_n||_n.from==Ve)for(var Wo=0;Wo<hn.length;++Wo)Me(y,0,hn[Wo]);if(_n&&(_n.from||0)==Ve){if(Me(y,(null==_n.to?Ce+1:_n.to)-Ve,_n.marker,null==_n.from),null==_n.to)return;_n.to==Ve&&(_n=!1)}}if(Ve>=Ce)break;for(var Da=Math.min(Ce,ci);;){if(At){var Pa=Ve+At.length;if(!_n){var Cs=Pa>Da?At.slice(0,Da-Ve):At;y.addToken(y,Cs,Xt?Xt+Pi:Pi,sn,Ve+Cs.length==ci?Xi:"",fi,Sn)}if(Pa>=Da){At=At.slice(Da-Ve),Ve=Da;break}Ve=Pa,sn=""}At=L.slice(Y,Y=x[Ke++]),Xt=kn(x[Ke++],y.cm.options)}}else for(var ce=1;ce<x.length;ce+=2)y.addToken(y,L.slice(Y,Y=x[ce]),kn(x[ce+1],y.cm.options))}function bi(h,y,x){this.line=y,this.rest=function(h){for(var y,x;y=Ko(h);)h=y.find(1,!0).line,(x||(x=[])).push(h);return x}(y),this.size=this.rest?_r(xe(this.rest))-x+1:1,this.node=this.text=null,this.hidden=Pr(h,y)}function cn(h,y,x){for(var L,M=[],Y=y;Y<x;Y=L){var ce=new bi(h.doc,Ri(h.doc,Y),Y);L=Y+ce.size,M.push(ce)}return M}var Xn=null;var to=null;function fr(h,y){var x=Ji(h,y);if(x.length){var L,M=Array.prototype.slice.call(arguments,2);Xn?L=Xn.delayedCallbacks:to?L=to:(L=to=[],setTimeout(es,0));for(var Y=function(Ce){L.push(function(){return x[Ce].apply(null,M)})},ce=0;ce<x.length;++ce)Y(ce)}}function es(){var h=to;to=null;for(var y=0;y<h.length;++y)h[y]()}function Vn(h,y,x,M){for(var L=0;L<y.changes.length;L++){var Y=y.changes[L];"text"==Y?cl(h,y):"gutter"==Y?ea(h,y,x,M):"class"==Y?Gs(h,y):"widget"==Y&&Hc(h,y,M)}y.changes=null}function Us(h){return h.node==h.text&&(h.node=Se("div",null,null,"position: relative"),h.text.parentNode&&h.text.parentNode.replaceChild(h.node,h.text),h.node.appendChild(h.text),n&&a<8&&(h.node.style.zIndex=2)),h.node}function ts(h,y){var x=h.display.externalMeasured;return x&&x.line==y.line?(h.display.externalMeasured=null,y.measure=x.measure,x.built):va(h,y)}function cl(h,y){var x=y.text.className,M=ts(h,y);y.text==y.node&&(y.node=M.pre),y.text.parentNode.replaceChild(M.pre,y.text),y.text=M.pre,M.bgClass!=y.bgClass||M.textClass!=y.textClass?(y.bgClass=M.bgClass,y.textClass=M.textClass,Gs(h,y)):x&&(y.text.className=x)}function Gs(h,y){(function(h,y){var x=y.bgClass?y.bgClass+" "+(y.line.bgClass||""):y.line.bgClass;if(x&&(x+=" CodeMirror-linebackground"),y.background)x?y.background.className=x:(y.background.parentNode.removeChild(y.background),y.background=null);else if(x){var M=Us(y);y.background=M.insertBefore(Se("div",null,x),M.firstChild),h.display.input.setUneditable(y.background)}})(h,y),y.line.wrapClass?Us(y).className=y.line.wrapClass:y.node!=y.text&&(y.node.className=""),y.text.className=(y.textClass?y.textClass+" "+(y.line.textClass||""):y.line.textClass)||""}function ea(h,y,x,M){if(y.gutter&&(y.node.removeChild(y.gutter),y.gutter=null),y.gutterBackground&&(y.node.removeChild(y.gutterBackground),y.gutterBackground=null),y.line.gutterClass){var L=Us(y);y.gutterBackground=Se("div",null,"CodeMirror-gutter-background "+y.line.gutterClass,"left: "+(h.options.fixedGutter?M.fixedPos:-M.gutterTotalWidth)+"px; width: "+M.gutterTotalWidth+"px"),h.display.input.setUneditable(y.gutterBackground),L.insertBefore(y.gutterBackground,y.text)}var Y=y.line.gutterMarkers;if(h.options.lineNumbers||Y){var ce=Us(y),Ce=y.gutter=Se("div",null,"CodeMirror-gutter-wrapper","left: "+(h.options.fixedGutter?M.fixedPos:-M.gutterTotalWidth)+"px");if(Ce.setAttribute("aria-hidden","true"),h.display.input.setUneditable(Ce),ce.insertBefore(Ce,y.text),y.line.gutterClass&&(Ce.className+=" "+y.line.gutterClass),h.options.lineNumbers&&(!Y||!Y["CodeMirror-linenumbers"])&&(y.lineNumber=Ce.appendChild(Se("div",Rr(h.options,x),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+M.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+h.display.lineNumInnerWidth+"px"))),Y)for(var Ve=0;Ve<h.display.gutterSpecs.length;++Ve){var Ke=h.display.gutterSpecs[Ve].className,At=Y.hasOwnProperty(Ke)&&Y[Ke];At&&Ce.appendChild(Se("div",[At],"CodeMirror-gutter-elt","left: "+M.gutterLeft[Ke]+"px; width: "+M.gutterWidth[Ke]+"px"))}}}function Hc(h,y,x){y.alignable&&(y.alignable=null);for(var M=ne("CodeMirror-linewidget"),L=y.node.firstChild,Y=void 0;L;L=Y)Y=L.nextSibling,M.test(L.className)&&y.node.removeChild(L);G(h,y,x)}function Ue(h,y,x,M){var L=ts(h,y);return y.text=y.node=L.pre,L.bgClass&&(y.bgClass=L.bgClass),L.textClass&&(y.textClass=L.textClass),Gs(h,y),ea(h,y,x,M),G(h,y,M),y.node}function G(h,y,x){if(K(h,y.line,y,x,!0),y.rest)for(var M=0;M<y.rest.length;M++)K(h,y.rest[M],y,x,!1)}function K(h,y,x,M,L){if(y.widgets)for(var Y=Us(x),ce=0,Ce=y.widgets;ce<Ce.length;++ce){var Ve=Ce[ce],Ke=Se("div",[Ve.node],"CodeMirror-linewidget"+(Ve.className?" "+Ve.className:""));Ve.handleMouseEvents||Ke.setAttribute("cm-ignore-events","true"),fe(Ve,Ke,x,M),h.display.input.setUneditable(Ke),L&&Ve.above?Y.insertBefore(Ke,x.gutter||x.text):Y.appendChild(Ke),fr(Ve,"redraw")}}function fe(h,y,x,M){if(h.noHScroll){(x.alignable||(x.alignable=[])).push(y);var L=M.wrapperWidth;y.style.left=M.fixedPos+"px",h.coverGutter||(L-=M.gutterTotalWidth,y.style.paddingLeft=M.gutterTotalWidth+"px"),y.style.width=L+"px"}h.coverGutter&&(y.style.zIndex=5,y.style.position="relative",h.noHScroll||(y.style.marginLeft=-M.gutterTotalWidth+"px"))}function Qe(h){if(null!=h.height)return h.height;var y=h.doc.cm;if(!y)return 0;if(!ie(document.body,h.node)){var x="position: relative;";h.coverGutter&&(x+="margin-left: -"+y.display.gutters.offsetWidth+"px;"),h.noHScroll&&(x+="width: "+y.display.wrapper.clientWidth+"px;"),He(y.display.measure,Se("div",[h.node],null,x))}return h.height=h.node.parentNode.offsetHeight}function bt(h,y){for(var x=le(y);x!=h.wrapper;x=x.parentNode)if(!x||1==x.nodeType&&"true"==x.getAttribute("cm-ignore-events")||x.parentNode==h.sizer&&x!=h.mover)return!0}function Yt(h){return h.lineSpace.offsetTop}function qt(h){return h.mover.offsetHeight-h.lineSpace.offsetHeight}function vi(h){if(h.cachedPaddingH)return h.cachedPaddingH;var y=He(h.measure,Se("pre","x","CodeMirror-line-like")),x=window.getComputedStyle?window.getComputedStyle(y):y.currentStyle,M={left:parseInt(x.paddingLeft),right:parseInt(x.paddingRight)};return!isNaN(M.left)&&!isNaN(M.right)&&(h.cachedPaddingH=M),M}function Fi(h){return 50-h.display.nativeBarWidth}function un(h){return h.display.scroller.clientWidth-Fi(h)-h.display.barWidth}function Cn(h){return h.display.scroller.clientHeight-Fi(h)-h.display.barHeight}function tr(h,y,x){if(h.line==y)return{map:h.measure.map,cache:h.measure.cache};if(h.rest){for(var M=0;M<h.rest.length;M++)if(h.rest[M]==y)return{map:h.measure.maps[M],cache:h.measure.caches[M]};for(var L=0;L<h.rest.length;L++)if(_r(h.rest[L])>x)return{map:h.measure.maps[L],cache:h.measure.caches[L],before:!0}}}function rr(h,y,x,M){return Yr(h,Dr(h,y),x,M)}function ar(h,y){if(y>=h.display.viewFrom&&y<h.display.viewTo)return h.display.view[vs(h,y)];var x=h.display.externalMeasured;return x&&y>=x.lineN&&y<x.lineN+x.size?x:void 0}function Dr(h,y){var x=_r(y),M=ar(h,x);M&&!M.text?M=null:M&&M.changes&&(Vn(h,M,x,zs(h)),h.curOp.forceUpdate=!0),M||(M=function(h,y){var x=_r(y=Oo(y)),M=h.display.externalMeasured=new bi(h.doc,y,x);M.lineN=x;var L=M.built=va(h,M);return M.text=L.pre,He(h.display.lineMeasure,L.pre),M}(h,y));var L=tr(M,y,x);return{line:y,view:M,rect:null,map:L.map,cache:L.cache,before:L.before,hasHeights:!1}}function Yr(h,y,x,M,L){y.before&&(x=-1);var ce,Y=x+(M||"");return y.cache.hasOwnProperty(Y)?ce=y.cache[Y]:(y.rect||(y.rect=y.view.text.getBoundingClientRect()),y.hasHeights||(function(h,y,x){var M=h.options.lineWrapping,L=M&&un(h);if(!y.measure.heights||M&&y.measure.width!=L){var Y=y.measure.heights=[];if(M){y.measure.width=L;for(var ce=y.text.firstChild.getClientRects(),Ce=0;Ce<ce.length-1;Ce++){var Ve=ce[Ce],Ke=ce[Ce+1];Math.abs(Ve.bottom-Ke.bottom)>2&&Y.push((Ve.bottom+Ke.top)/2-x.top)}}Y.push(x.bottom-x.top)}}(h,y.view,y.rect),y.hasHeights=!0),(ce=function(h,y,x,M){var Ke,L=ko(y.map,x,M),Y=L.node,ce=L.start,Ce=L.end,Ve=L.collapse;if(3==Y.nodeType){for(var At=0;At<4;At++){for(;ce&&yt(y.line.text.charAt(L.coverStart+ce));)--ce;for(;L.coverStart+Ce<L.coverEnd&&yt(y.line.text.charAt(L.coverStart+Ce));)++Ce;if((Ke=n&&a<9&&0==ce&&Ce==L.coverEnd-L.coverStart?Y.parentNode.getBoundingClientRect():Ha(ue(Y,ce,Ce).getClientRects(),M)).left||Ke.right||0==ce)break;Ce=ce,ce-=1,Ve="right"}n&&a<11&&(Ke=function(h,y){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(h){if(null!=kt)return kt;var y=He(h,Se("span","x")),x=y.getBoundingClientRect(),M=ue(y,0,1).getBoundingClientRect();return kt=Math.abs(x.left-M.left)>1}(h))return y;var x=screen.logicalXDPI/screen.deviceXDPI,M=screen.logicalYDPI/screen.deviceYDPI;return{left:y.left*x,right:y.right*x,top:y.top*M,bottom:y.bottom*M}}(h.display.measure,Ke))}else{var Xt;ce>0&&(Ve=M="right"),Ke=h.options.lineWrapping&&(Xt=Y.getClientRects()).length>1?Xt["right"==M?Xt.length-1:0]:Y.getBoundingClientRect()}if(n&&a<9&&!ce&&(!Ke||!Ke.left&&!Ke.right)){var fi=Y.parentNode.getClientRects()[0];Ke=fi?{left:fi.left,right:fi.left+_s(h.display),top:fi.top,bottom:fi.bottom}:oo}for(var ci=Ke.top-y.rect.top,Pi=Ke.bottom-y.rect.top,Xi=(ci+Pi)/2,sn=y.view.measure.heights,_n=0;_n<sn.length-1&&!(Xi<sn[_n]);_n++);var Rn={left:("right"==Ve?Ke.right:Ke.left)-y.rect.left,right:("left"==Ve?Ke.left:Ke.right)-y.rect.left,top:_n?sn[_n-1]:0,bottom:sn[_n]};return!Ke.left&&!Ke.right&&(Rn.bogus=!0),h.options.singleCursorHeightPerLine||(Rn.rtop=ci,Rn.rbottom=Pi),Rn}(h,y,x,M)).bogus||(y.cache[Y]=ce)),{left:ce.left,right:ce.right,top:L?ce.rtop:ce.top,bottom:L?ce.rbottom:ce.bottom}}var Ur,oo={left:0,right:0,top:0,bottom:0};function ko(h,y,x){for(var M,L,Y,ce,Ce,Ve,Ke=0;Ke<h.length;Ke+=3)if(Ve=h[Ke+1],y<(Ce=h[Ke])?(L=0,Y=1,ce="left"):y<Ve?Y=1+(L=y-Ce):(Ke==h.length-3||y==Ve&&h[Ke+3]>y)&&(L=(Y=Ve-Ce)-1,y>=Ve&&(ce="right")),null!=L){if(M=h[Ke+2],Ce==Ve&&x==(M.insertLeft?"left":"right")&&(ce=x),"left"==x&&0==L)for(;Ke&&h[Ke-2]==h[Ke-3]&&h[Ke-1].insertLeft;)M=h[2+(Ke-=3)],ce="left";if("right"==x&&L==Ve-Ce)for(;Ke<h.length-3&&h[Ke+3]==h[Ke+4]&&!h[Ke+5].insertLeft;)M=h[(Ke+=3)+2],ce="right";break}return{node:M,start:L,end:Y,collapse:ce,coverStart:Ce,coverEnd:Ve}}function Ha(h,y){var x=oo;if("left"==y)for(var M=0;M<h.length&&(x=h[M]).left==x.right;M++);else for(var L=h.length-1;L>=0&&(x=h[L]).left==x.right;L--);return x}function xs(h){if(h.measure&&(h.measure.cache={},h.measure.heights=null,h.rest))for(var y=0;y<h.rest.length;y++)h.measure.caches[y]={}}function os(h){h.display.externalMeasure=null,ae(h.display.lineMeasure);for(var y=0;y<h.display.view.length;y++)xs(h.display.view[y])}function Rs(h){os(h),h.display.cachedCharWidth=h.display.cachedTextHeight=h.display.cachedPaddingH=null,h.options.lineWrapping||(h.display.maxLineChanged=!0),h.display.lineNumChars=null}function ul(){return D&&Ie?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function xa(){return D&&Ie?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function js(h){var y=0;if(h.widgets)for(var x=0;x<h.widgets.length;++x)h.widgets[x].above&&(y+=Qe(h.widgets[x]));return y}function co(h,y,x,M,L){if(!L){var Y=js(y);x.top+=Y,x.bottom+=Y}if("line"==M)return x;M||(M="local");var ce=zr(y);if("local"==M?ce+=Yt(h.display):ce-=h.display.viewOffset,"page"==M||"window"==M){var Ce=h.display.lineSpace.getBoundingClientRect();ce+=Ce.top+("window"==M?0:xa());var Ve=Ce.left+("window"==M?0:ul());x.left+=Ve,x.right+=Ve}return x.top+=ce,x.bottom+=ce,x}function Ja(h,y,x){if("div"==x)return y;var M=y.left,L=y.top;if("page"==x)M-=ul(),L-=xa();else if("local"==x||!x){var Y=h.display.sizer.getBoundingClientRect();M+=Y.left,L+=Y.top}var ce=h.display.lineSpace.getBoundingClientRect();return{left:M-ce.left,top:L-ce.top}}function xn(h,y,x,M,L){return M||(M=Ri(h.doc,y.line)),co(h,M,rr(h,M,y.ch,L),x)}function On(h,y,x,M,L,Y){function ce(Pi,Xi){var sn=Yr(h,L,Pi,Xi?"right":"left",Y);return Xi?sn.left=sn.right:sn.right=sn.left,co(h,M,sn,x)}M=M||Ri(h.doc,y.line),L||(L=Dr(h,M));var Ce=yi(M,h.doc.direction),Ve=y.ch,Ke=y.sticky;if(Ve>=M.text.length?(Ve=M.text.length,Ke="before"):Ve<=0&&(Ve=0,Ke="after"),!Ce)return ce("before"==Ke?Ve-1:Ve,"before"==Ke);function At(Pi,Xi,sn){return ce(sn?Pi-1:Pi,1==Ce[Xi].level!=sn)}var Xt=Ni(Ce,Ve,Ke),fi=ni,ci=At(Ve,Xt,"before"==Ke);return null!=fi&&(ci.other=At(Ve,fi,"before"!=Ke)),ci}function lr(h,y){var x=0;y=zi(h.doc,y),h.options.lineWrapping||(x=_s(h.display)*y.ch);var M=Ri(h.doc,y.line),L=zr(M)+Yt(h.display);return{left:x,right:x,top:L,bottom:L+M.height}}function hr(h,y,x,M,L){var Y=Vi(h,y,x);return Y.xRel=L,M&&(Y.outside=M),Y}function Cr(h,y,x){var M=h.doc;if((x+=h.display.viewOffset)<0)return hr(M.first,0,null,-1,-1);var L=xr(M,x),Y=M.first+M.size-1;if(L>Y)return hr(M.first+M.size-1,Ri(M,Y).text.length,null,1,1);y<0&&(y=0);for(var ce=Ri(M,L);;){var Ce=To(h,ce,L,y,x),Ve=Ds(ce,Ce.ch+(Ce.xRel>0||Ce.outside>0?1:0));if(!Ve)return Ce;var Ke=Ve.find(1);if(Ke.line==L)return Ke;ce=Ri(M,L=Ke.line)}}function is(h,y,x,M){M-=js(y);var L=y.text.length,Y=ut(function(ce){return Yr(h,x,ce-1).bottom<=M},L,0);return{begin:Y,end:L=ut(function(ce){return Yr(h,x,ce).top>M},Y,L)}}function Ar(h,y,x,M){return x||(x=Dr(h,y)),is(h,y,x,co(h,y,Yr(h,x,M),"line").top)}function ta(h,y,x,M){return!(h.bottom<=x)&&(h.top>x||(M?h.left:h.right)>y)}function To(h,y,x,M,L){L-=zr(y);var Y=Dr(h,y),ce=js(y),Ce=0,Ve=y.text.length,Ke=!0,At=yi(y,h.doc.direction);if(At){var Xt=(h.options.lineWrapping?Za:El)(h,y,x,Y,At,M,L);Ce=(Ke=1!=Xt.level)?Xt.from:Xt.to-1,Ve=Ke?Xt.to:Xt.from-1}var Xi,sn,fi=null,ci=null,Pi=ut(function(Jn){var $n=Yr(h,Y,Jn);return $n.top+=ce,$n.bottom+=ce,!!ta($n,M,L,!1)&&($n.top<=L&&$n.left<=M&&(fi=Jn,ci=$n),!0)},Ce,Ve),_n=!1;if(ci){var Sn=M-ci.left<ci.right-M,hn=Sn==Ke;Pi=fi+(hn?0:1),sn=hn?"after":"before",Xi=Sn?ci.left:ci.right}else{!Ke&&(Pi==Ve||Pi==Ce)&&Pi++,sn=0==Pi?"after":Pi==y.text.length?"before":Yr(h,Y,Pi-(Ke?1:0)).bottom+ce<=L==Ke?"after":"before";var Rn=On(h,Vi(x,Pi,sn),"line",y,Y);Xi=Rn.left,_n=L<Rn.top?-1:L>=Rn.bottom?1:0}return hr(x,Pi=Ze(y.text,Pi,1),sn,_n,M-Xi)}function El(h,y,x,M,L,Y,ce){var Ce=ut(function(Xt){var fi=L[Xt],ci=1!=fi.level;return ta(On(h,Vi(x,ci?fi.to:fi.from,ci?"before":"after"),"line",y,M),Y,ce,!0)},0,L.length-1),Ve=L[Ce];if(Ce>0){var Ke=1!=Ve.level,At=On(h,Vi(x,Ke?Ve.from:Ve.to,Ke?"after":"before"),"line",y,M);ta(At,Y,ce,!0)&&At.top>ce&&(Ve=L[Ce-1])}return Ve}function Za(h,y,x,M,L,Y,ce){var Ce=is(h,y,M,ce),Ve=Ce.begin,Ke=Ce.end;/\s/.test(y.text.charAt(Ke-1))&&Ke--;for(var At=null,Xt=null,fi=0;fi<L.length;fi++){var ci=L[fi];if(!(ci.from>=Ke||ci.to<=Ve)){var Xi=Yr(h,M,1!=ci.level?Math.min(Ke,ci.to)-1:Math.max(Ve,ci.from)).right,sn=Xi<Y?Y-Xi+1e9:Xi-Y;(!At||Xt>sn)&&(At=ci,Xt=sn)}}return At||(At=L[L.length-1]),At.from<Ve&&(At={from:Ve,to:At.to,level:At.level}),At.to>Ke&&(At={from:At.from,to:Ke,level:At.level}),At}function ua(h){if(null!=h.cachedTextHeight)return h.cachedTextHeight;if(null==Ur){Ur=Se("pre",null,"CodeMirror-line-like");for(var y=0;y<49;++y)Ur.appendChild(document.createTextNode("x")),Ur.appendChild(Se("br"));Ur.appendChild(document.createTextNode("x"))}He(h.measure,Ur);var x=Ur.offsetHeight/50;return x>3&&(h.cachedTextHeight=x),ae(h.measure),x||1}function _s(h){if(null!=h.cachedCharWidth)return h.cachedCharWidth;var y=Se("span","xxxxxxxxxx"),x=Se("pre",[y],"CodeMirror-line-like");He(h.measure,x);var M=y.getBoundingClientRect(),L=(M.right-M.left)/10;return L>2&&(h.cachedCharWidth=L),L||10}function zs(h){for(var y=h.display,x={},M={},L=y.gutters.clientLeft,Y=y.gutters.firstChild,ce=0;Y;Y=Y.nextSibling,++ce){var Ce=h.display.gutterSpecs[ce].className;x[Ce]=Y.offsetLeft+Y.clientLeft+L,M[Ce]=Y.clientWidth}return{fixedPos:As(y),gutterTotalWidth:y.gutters.offsetWidth,gutterLeft:x,gutterWidth:M,wrapperWidth:y.wrapper.clientWidth}}function As(h){return h.scroller.getBoundingClientRect().left-h.sizer.getBoundingClientRect().left}function ba(h){var y=ua(h.display),x=h.options.lineWrapping,M=x&&Math.max(5,h.display.scroller.clientWidth/_s(h.display)-3);return function(L){if(Pr(h.doc,L))return 0;var Y=0;if(L.widgets)for(var ce=0;ce<L.widgets.length;ce++)L.widgets[ce].height&&(Y+=L.widgets[ce].height);return x?Y+(Math.ceil(L.text.length/M)||1)*y:Y+y}}function Ol(h){var y=h.doc,x=ba(h);y.iter(function(M){var L=x(M);L!=M.height&&Hr(M,L)})}function dl(h,y,x,M){var L=h.display;if(!x&&"true"==le(y).getAttribute("cm-not-content"))return null;var Y,ce,Ce=L.lineSpace.getBoundingClientRect();try{Y=y.clientX-Ce.left,ce=y.clientY-Ce.top}catch(Xt){return null}var Ke,Ve=Cr(h,Y,ce);if(M&&Ve.xRel>0&&(Ke=Ri(h.doc,Ve.line).text).length==Ve.ch){var At=Bt(Ke,Ke.length,h.options.tabSize)-Ke.length;Ve=Vi(Ve.line,Math.max(0,Math.round((Y-vi(h.display).left)/_s(h.display))-At))}return Ve}function vs(h,y){if(y>=h.display.viewTo||(y-=h.display.viewFrom)<0)return null;for(var x=h.display.view,M=0;M<x.length;M++)if((y-=x[M].size)<0)return M}function ns(h,y,x,M){null==y&&(y=h.doc.first),null==x&&(x=h.doc.first+h.doc.size),M||(M=0);var L=h.display;if(M&&x<L.viewTo&&(null==L.updateLineNumbers||L.updateLineNumbers>y)&&(L.updateLineNumbers=y),h.curOp.viewChanged=!0,y>=L.viewTo)Ho&&lo(h.doc,y)<L.viewTo&&Qa(h);else if(x<=L.viewFrom)Ho&&gs(h.doc,x+M)>L.viewFrom?Qa(h):(L.viewFrom+=M,L.viewTo+=M);else if(y<=L.viewFrom&&x>=L.viewTo)Qa(h);else if(y<=L.viewFrom){var Y=Ra(h,x,x+M,1);Y?(L.view=L.view.slice(Y.index),L.viewFrom=Y.lineN,L.viewTo+=M):Qa(h)}else if(x>=L.viewTo){var ce=Ra(h,y,y,-1);ce?(L.view=L.view.slice(0,ce.index),L.viewTo=ce.lineN):Qa(h)}else{var Ce=Ra(h,y,y,-1),Ve=Ra(h,x,x+M,1);Ce&&Ve?(L.view=L.view.slice(0,Ce.index).concat(cn(h,Ce.lineN,Ve.lineN)).concat(L.view.slice(Ve.index)),L.viewTo+=M):Qa(h)}var Ke=L.externalMeasured;Ke&&(x<Ke.lineN?Ke.lineN+=M:y<Ke.lineN+Ke.size&&(L.externalMeasured=null))}function ia(h,y,x){h.curOp.viewChanged=!0;var M=h.display,L=h.display.externalMeasured;if(L&&y>=L.lineN&&y<L.lineN+L.size&&(M.externalMeasured=null),!(y<M.viewFrom||y>=M.viewTo)){var Y=M.view[vs(h,y)];if(null!=Y.node){var ce=Y.changes||(Y.changes=[]);-1==Zt(ce,x)&&ce.push(x)}}}function Qa(h){h.display.viewFrom=h.display.viewTo=h.doc.first,h.display.view=[],h.display.viewOffset=0}function Ra(h,y,x,M){var Y,L=vs(h,y),ce=h.display.view;if(!Ho||x==h.doc.first+h.doc.size)return{index:L,lineN:x};for(var Ce=h.display.viewFrom,Ve=0;Ve<L;Ve++)Ce+=ce[Ve].size;if(Ce!=y){if(M>0){if(L==ce.length-1)return null;Y=Ce+ce[L].size-y,L++}else Y=Ce-y;y+=Y,x+=Y}for(;lo(h.doc,x)!=x;){if(L==(M<0?0:ce.length-1))return null;x+=M*ce[L-(M<0?1:0)].size,L+=M}return{index:L,lineN:x}}function Aa(h){for(var y=h.display.view,x=0,M=0;M<y.length;M++){var L=y[M];!L.hidden&&(!L.node||L.changes)&&++x}return x}function kl(h){h.display.input.showSelection(h.display.input.prepareSelection())}function jl(h,y){void 0===y&&(y=!0);var x=h.doc,M={},L=M.cursors=document.createDocumentFragment(),Y=M.selection=document.createDocumentFragment(),ce=h.options.$customCursor;ce&&(y=!0);for(var Ce=0;Ce<x.sel.ranges.length;Ce++)if(y||Ce!=x.sel.primIndex){var Ve=x.sel.ranges[Ce];if(!(Ve.from().line>=h.display.viewTo||Ve.to().line<h.display.viewFrom)){var Ke=Ve.empty();if(ce){var At=ce(h,Ve);At&&Va(h,At,L)}else(Ke||h.options.showCursorWhenSelecting)&&Va(h,Ve.head,L);Ke||_c(h,Ve,Y)}}return M}function Va(h,y,x){var M=On(h,y,"div",null,null,!h.options.singleCursorHeightPerLine),L=x.appendChild(Se("div","\xa0","CodeMirror-cursor"));if(L.style.left=M.left+"px",L.style.top=M.top+"px",L.style.height=Math.max(0,M.bottom-M.top)*h.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(h.getWrapperElement().className)){var Y=xn(h,y,"div",null,null),ce=Y.right-Y.left;L.style.width=(ce>0?ce:h.defaultCharWidth())+"px"}if(M.other){var Ce=x.appendChild(Se("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Ce.style.display="",Ce.style.left=M.other.left+"px",Ce.style.top=M.other.top+"px",Ce.style.height=.85*(M.other.bottom-M.other.top)+"px"}}function qa(h,y){return h.top-y.top||h.left-y.left}function _c(h,y,x){var M=h.display,L=h.doc,Y=document.createDocumentFragment(),ce=vi(h.display),Ce=ce.left,Ve=Math.max(M.sizerWidth,un(h)-M.sizer.offsetLeft)-ce.right,Ke="ltr"==L.direction;function At(hn,Rn,Jn,$n){Rn<0&&(Rn=0),Rn=Math.round(Rn),$n=Math.round($n),Y.appendChild(Se("div",null,"CodeMirror-selected","position: absolute; left: "+hn+"px;\n                             top: "+Rn+"px; width: "+(null==Jn?Ve-hn:Jn)+"px;\n                             height: "+($n-Rn)+"px"))}function Xt(hn,Rn,Jn){var fo,Es,$n=Ri(L,hn),br=$n.text.length;function Wo(Cs,Xr){return xn(h,Vi(hn,Cs),"div",$n,Xr)}function Da(Cs,Xr,ks){var ls=Ar(h,$n,null,Cs),T="ltr"==Xr==("after"==ks)?"left":"right";return Wo("after"==ks?ls.begin:ls.end-(/\s/.test($n.text.charAt(ls.end-1))?2:1),T)[T]}var Pa=yi($n,L.direction);return function(h,y,x,M){if(!h)return M(y,x,"ltr",0);for(var L=!1,Y=0;Y<h.length;++Y){var ce=h[Y];(ce.from<x&&ce.to>y||y==x&&ce.to==y)&&(M(Math.max(ce.from,y),Math.min(ce.to,x),1==ce.level?"rtl":"ltr",Y),L=!0)}L||M(y,x,"ltr")}(Pa,Rn||0,null==Jn?br:Jn,function(Cs,Xr,ks,ls){var T="ltr"==ks,F=Wo(Cs,T?"left":"right"),j=Wo(Xr-1,T?"right":"left"),ee=null==Rn&&0==Cs,pe=null==Jn&&Xr==br,Ye=0==ls,ze=!Pa||ls==Pa.length-1;if(j.top-F.top<=3){var Mt=(Ke?ee:pe)&&Ye?Ce:(T?F:j).left;At(Mt,F.top,((Ke?pe:ee)&&ze?Ve:(T?j:F).right)-Mt,F.bottom)}else{var ai,pi,Si,ji;T?(ai=Ke&&ee&&Ye?Ce:F.left,pi=Ke?Ve:Da(Cs,ks,"before"),Si=Ke?Ce:Da(Xr,ks,"after"),ji=Ke&&pe&&ze?Ve:j.right):(ai=Ke?Da(Cs,ks,"before"):Ce,pi=!Ke&&ee&&Ye?Ve:F.right,Si=!Ke&&pe&&ze?Ce:j.left,ji=Ke?Da(Xr,ks,"after"):Ve),At(ai,F.top,pi-ai,F.bottom),F.bottom<j.top&&At(Ce,F.bottom,null,j.top),At(Si,j.top,ji-Si,j.bottom)}(!fo||qa(F,fo)<0)&&(fo=F),qa(j,fo)<0&&(fo=j),(!Es||qa(F,Es)<0)&&(Es=F),qa(j,Es)<0&&(Es=j)}),{start:fo,end:Es}}var fi=y.from(),ci=y.to();if(fi.line==ci.line)Xt(fi.line,fi.ch,ci.ch);else{var Pi=Ri(L,fi.line),Xi=Ri(L,ci.line),sn=Oo(Pi)==Oo(Xi),_n=Xt(fi.line,fi.ch,sn?Pi.text.length+1:null).end,Sn=Xt(ci.line,sn?0:null,ci.ch).start;sn&&(_n.top<Sn.top-2?(At(_n.right,_n.top,null,_n.bottom),At(Ce,Sn.top,Sn.left,Sn.bottom)):At(_n.right,_n.top,Sn.left-_n.right,_n.bottom)),_n.bottom<Sn.top&&At(Ce,_n.bottom,null,Sn.top)}x.appendChild(Y)}function zl(h){if(h.state.focused){var y=h.display;clearInterval(y.blinker);var x=!0;y.cursorDiv.style.visibility="",h.options.cursorBlinkRate>0?y.blinker=setInterval(function(){h.hasFocus()||Ia(h),y.cursorDiv.style.visibility=(x=!x)?"":"hidden"},h.options.cursorBlinkRate):h.options.cursorBlinkRate<0&&(y.cursorDiv.style.visibility="hidden")}}function da(h){h.hasFocus()||(h.display.input.focus(),h.state.focused||Ys(h))}function Ua(h){h.state.delayingBlurEvent=!0,setTimeout(function(){h.state.delayingBlurEvent&&(h.state.delayingBlurEvent=!1,h.state.focused&&Ia(h))},100)}function Ys(h,y){h.state.delayingBlurEvent&&!h.state.draggingText&&(h.state.delayingBlurEvent=!1),"nocursor"!=h.options.readOnly&&(h.state.focused||(Ot(h,"focus",h,y),h.state.focused=!0,Oe(h.display.wrapper,"CodeMirror-focused"),!h.curOp&&h.display.selForContextMenu!=h.doc.sel&&(h.display.input.reset(),d&&setTimeout(function(){return h.display.input.reset(!0)},20)),h.display.input.receivedFocus()),zl(h))}function Ia(h,y){h.state.delayingBlurEvent||(h.state.focused&&(Ot(h,"blur",h,y),h.state.focused=!1,ge(h.display.wrapper,"CodeMirror-focused")),clearInterval(h.display.blinker),setTimeout(function(){h.state.focused||(h.display.shift=!1)},150))}function Is(h){for(var y=h.display,x=y.lineDiv.offsetTop,M=Math.max(0,y.scroller.getBoundingClientRect().top),L=y.lineDiv.getBoundingClientRect().top,Y=0,ce=0;ce<y.view.length;ce++){var Ce=y.view[ce],Ve=h.options.lineWrapping,Ke=void 0,At=0;if(!Ce.hidden){if(L+=Ce.line.height,n&&a<8){var Xt=Ce.node.offsetTop+Ce.node.offsetHeight;Ke=Xt-x,x=Xt}else{var fi=Ce.node.getBoundingClientRect();Ke=fi.bottom-fi.top,!Ve&&Ce.text.firstChild&&(At=Ce.text.firstChild.getBoundingClientRect().right-fi.left-1)}var ci=Ce.line.height-Ke;if((ci>.005||ci<-.005)&&(L<M&&(Y-=ci),Hr(Ce.line,Ke),Oa(Ce.line),Ce.rest))for(var Pi=0;Pi<Ce.rest.length;Pi++)Oa(Ce.rest[Pi]);if(At>h.display.sizerWidth){var Xi=Math.ceil(At/_s(h.display));Xi>h.display.maxLineLength&&(h.display.maxLineLength=Xi,h.display.maxLine=Ce.line,h.display.maxLineChanged=!0)}}}Math.abs(Y)>2&&(y.scroller.scrollTop+=Y)}function Oa(h){if(h.widgets)for(var y=0;y<h.widgets.length;++y){var x=h.widgets[y],M=x.node.parentNode;M&&(x.height=M.offsetHeight)}}function Cl(h,y,x){var M=x&&null!=x.top?Math.max(0,x.top):h.scroller.scrollTop;M=Math.floor(M-Yt(h));var L=x&&null!=x.bottom?x.bottom:M+h.wrapper.clientHeight,Y=xr(y,M),ce=xr(y,L);if(x&&x.ensure){var Ce=x.ensure.from.line,Ve=x.ensure.to.line;Ce<Y?(Y=Ce,ce=xr(y,zr(Ri(y,Ce))+h.wrapper.clientHeight)):Math.min(Ve,y.lastLine())>=ce&&(Y=xr(y,zr(Ri(y,Ve))-h.wrapper.clientHeight),ce=Ve)}return{from:Y,to:Math.max(ce,Y+1)}}function Vc(h,y){var x=h.display,M=ua(h.display);y.top<0&&(y.top=0);var L=h.curOp&&null!=h.curOp.scrollTop?h.curOp.scrollTop:x.scroller.scrollTop,Y=Cn(h),ce={};y.bottom-y.top>Y&&(y.bottom=y.top+Y);var Ce=h.doc.height+qt(x),Ke=y.bottom>Ce-M;if(y.top<L)ce.scrollTop=y.top<M?0:y.top;else if(y.bottom>L+Y){var At=Math.min(y.top,(Ke?Ce:y.bottom)-Y);At!=L&&(ce.scrollTop=At)}var Xt=h.options.fixedGutter?0:x.gutters.offsetWidth,fi=h.curOp&&null!=h.curOp.scrollLeft?h.curOp.scrollLeft:x.scroller.scrollLeft-Xt,ci=un(h)-x.gutters.offsetWidth,Pi=y.right-y.left>ci;return Pi&&(y.right=y.left+ci),y.left<10?ce.scrollLeft=0:y.left<fi?ce.scrollLeft=Math.max(0,y.left+Xt-(Pi?0:10)):y.right>ci+fi-3&&(ce.scrollLeft=y.right+(Pi?0:10)-ci),ce}function he(h,y){null!=y&&(je(h),h.curOp.scrollTop=(null==h.curOp.scrollTop?h.doc.scrollTop:h.curOp.scrollTop)+y)}function te(h){je(h);var y=h.getCursor();h.curOp.scrollToPos={from:y,to:y,margin:h.options.cursorScrollMargin}}function Q(h,y,x){(null!=y||null!=x)&&je(h),null!=y&&(h.curOp.scrollLeft=y),null!=x&&(h.curOp.scrollTop=x)}function je(h){var y=h.curOp.scrollToPos;y&&(h.curOp.scrollToPos=null,gt(h,lr(h,y.from),lr(h,y.to),y.margin))}function gt(h,y,x,M){var L=Vc(h,{left:Math.min(y.left,x.left),top:Math.min(y.top,x.top)-M,right:Math.max(y.right,x.right),bottom:Math.max(y.bottom,x.bottom)+M});Q(h,L.scrollLeft,L.scrollTop)}function Ut(h,y){Math.abs(h.doc.scrollTop-y)<2||(E||Gu(h,{top:y}),ti(h,y,!0),E&&Gu(h),tc(h,100))}function ti(h,y,x){y=Math.max(0,Math.min(h.display.scroller.scrollHeight-h.display.scroller.clientHeight,y)),(h.display.scroller.scrollTop!=y||x)&&(h.doc.scrollTop=y,h.display.scrollbars.setScrollTop(y),h.display.scroller.scrollTop!=y&&(h.display.scroller.scrollTop=y))}function Li(h,y,x,M){y=Math.max(0,Math.min(y,h.display.scroller.scrollWidth-h.display.scroller.clientWidth)),(!(x?y==h.doc.scrollLeft:Math.abs(h.doc.scrollLeft-y)<2)||M)&&(h.doc.scrollLeft=y,ss(h),h.display.scroller.scrollLeft!=y&&(h.display.scroller.scrollLeft=y),h.display.scrollbars.setScrollLeft(y))}function wn(h){var y=h.display,x=y.gutters.offsetWidth,M=Math.round(h.doc.height+qt(h.display));return{clientHeight:y.scroller.clientHeight,viewHeight:y.wrapper.clientHeight,scrollWidth:y.scroller.scrollWidth,clientWidth:y.scroller.clientWidth,viewWidth:y.wrapper.clientWidth,barLeft:h.options.fixedGutter?x:0,docHeight:M,scrollHeight:M+Fi(h)+y.barHeight,nativeBarWidth:y.nativeBarWidth,gutterWidth:x}}var yr=function(h,y,x){this.cm=x;var M=this.vert=Se("div",[Se("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),L=this.horiz=Se("div",[Se("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");M.tabIndex=L.tabIndex=-1,h(M),h(L),mi(M,"scroll",function(){M.clientHeight&&y(M.scrollTop,"vertical")}),mi(L,"scroll",function(){L.clientWidth&&y(L.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,n&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};yr.prototype.update=function(h){var y=h.scrollWidth>h.clientWidth+1,x=h.scrollHeight>h.clientHeight+1,M=h.nativeBarWidth;return x?(this.vert.style.display="block",this.vert.style.bottom=y?M+"px":"0",this.vert.firstChild.style.height=Math.max(0,h.scrollHeight-h.clientHeight+(h.viewHeight-(y?M:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),y?(this.horiz.style.display="block",this.horiz.style.right=x?M+"px":"0",this.horiz.style.left=h.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,h.scrollWidth-h.clientWidth+(h.viewWidth-h.barLeft-(x?M:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&h.clientHeight>0&&(0==M&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:x?M:0,bottom:y?M:0}},yr.prototype.setScrollLeft=function(h){this.horiz.scrollLeft!=h&&(this.horiz.scrollLeft=h),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},yr.prototype.setScrollTop=function(h){this.vert.scrollTop!=h&&(this.vert.scrollTop=h),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},yr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=_e&&!oe?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Pt,this.disableVert=new Pt},yr.prototype.enableZeroWidthBar=function(h,y,x){h.style.pointerEvents="auto",y.set(1e3,function M(){var L=h.getBoundingClientRect();("vert"==x?document.elementFromPoint(L.right-1,(L.top+L.bottom)/2):document.elementFromPoint((L.right+L.left)/2,L.bottom-1))!=h?h.style.pointerEvents="none":y.set(1e3,M)})},yr.prototype.clear=function(){var h=this.horiz.parentNode;h.removeChild(this.horiz),h.removeChild(this.vert)};var jn=function(){};function Jr(h,y){y||(y=wn(h));var x=h.display.barWidth,M=h.display.barHeight;uo(h,y);for(var L=0;L<4&&x!=h.display.barWidth||M!=h.display.barHeight;L++)x!=h.display.barWidth&&h.options.lineWrapping&&Is(h),uo(h,wn(h)),x=h.display.barWidth,M=h.display.barHeight}function uo(h,y){var x=h.display,M=x.scrollbars.update(y);x.sizer.style.paddingRight=(x.barWidth=M.right)+"px",x.sizer.style.paddingBottom=(x.barHeight=M.bottom)+"px",x.heightForcer.style.borderBottom=M.bottom+"px solid transparent",M.right&&M.bottom?(x.scrollbarFiller.style.display="block",x.scrollbarFiller.style.height=M.bottom+"px",x.scrollbarFiller.style.width=M.right+"px"):x.scrollbarFiller.style.display="",M.bottom&&h.options.coverGutterNextToScrollbar&&h.options.fixedGutter?(x.gutterFiller.style.display="block",x.gutterFiller.style.height=M.bottom+"px",x.gutterFiller.style.width=y.gutterWidth+"px"):x.gutterFiller.style.display=""}jn.prototype.update=function(){return{bottom:0,right:0}},jn.prototype.setScrollLeft=function(){},jn.prototype.setScrollTop=function(){},jn.prototype.clear=function(){};var Tl={native:yr,null:jn};function Xs(h){h.display.scrollbars&&(h.display.scrollbars.clear(),h.display.scrollbars.addClass&&ge(h.display.wrapper,h.display.scrollbars.addClass)),h.display.scrollbars=new Tl[h.options.scrollbarStyle](function(y){h.display.wrapper.insertBefore(y,h.display.scrollbarFiller),mi(y,"mousedown",function(){h.state.focused&&setTimeout(function(){return h.display.input.focus()},0)}),y.setAttribute("cm-not-content","true")},function(y,x){"horizontal"==x?Li(h,y):Ut(h,y)},h),h.display.scrollbars.addClass&&Oe(h.display.wrapper,h.display.scrollbars.addClass)}var ya=0;function Vo(h){h.curOp={cm:h,viewChanged:!1,startHeight:h.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ya,markArrays:null},function(h){Xn?Xn.ops.push(h):h.ownsGroup=Xn={ops:[h],delayedCallbacks:[]}}(h.curOp)}function el(h){var y=h.curOp;y&&function(h,y){var x=h.ownsGroup;if(x)try{!function(h){var y=h.delayedCallbacks,x=0;do{for(;x<y.length;x++)y[x].call(null);for(var M=0;M<h.ops.length;M++){var L=h.ops[M];if(L.cursorActivityHandlers)for(;L.cursorActivityCalled<L.cursorActivityHandlers.length;)L.cursorActivityHandlers[L.cursorActivityCalled++].call(null,L.cm)}}while(x<y.length)}(x)}finally{Xn=null,y(x)}}(y,function(x){for(var M=0;M<x.ops.length;M++)x.ops[M].cm.curOp=null;!function(h){for(var y=h.ops,x=0;x<y.length;x++)Ea(y[x]);for(var M=0;M<y.length;M++)Ga(y[M]);for(var L=0;L<y.length;L++)Cu(y[L]);for(var Y=0;Y<y.length;Y++)$s(y[Y]);for(var ce=0;ce<y.length;ce++)ec(y[ce])}(x)})}function Ea(h){var y=h.cm,x=y.display;(function(h){var y=h.display;!y.scrollbarsClipped&&y.scroller.offsetWidth&&(y.nativeBarWidth=y.scroller.offsetWidth-y.scroller.clientWidth,y.heightForcer.style.height=Fi(h)+"px",y.sizer.style.marginBottom=-y.nativeBarWidth+"px",y.sizer.style.borderRightWidth=Fi(h)+"px",y.scrollbarsClipped=!0)})(y),h.updateMaxLine&&bl(y),h.mustUpdate=h.viewChanged||h.forceUpdate||null!=h.scrollTop||h.scrollToPos&&(h.scrollToPos.from.line<x.viewFrom||h.scrollToPos.to.line>=x.viewTo)||x.maxLineChanged&&y.options.lineWrapping,h.update=h.mustUpdate&&new Uo(y,h.mustUpdate&&{top:h.scrollTop,ensure:h.scrollToPos},h.forceUpdate)}function Ga(h){h.updatedDisplay=h.mustUpdate&&bc(h.cm,h.update)}function Cu(h){var y=h.cm,x=y.display;h.updatedDisplay&&Is(y),h.barMeasure=wn(y),x.maxLineChanged&&!y.options.lineWrapping&&(h.adjustWidthTo=rr(y,x.maxLine,x.maxLine.text.length).left+3,y.display.sizerWidth=h.adjustWidthTo,h.barMeasure.scrollWidth=Math.max(x.scroller.clientWidth,x.sizer.offsetLeft+h.adjustWidthTo+Fi(y)+y.display.barWidth),h.maxScrollLeft=Math.max(0,x.sizer.offsetLeft+h.adjustWidthTo-un(y))),(h.updatedDisplay||h.selectionChanged)&&(h.preparedSelection=x.input.prepareSelection())}function $s(h){var y=h.cm;null!=h.adjustWidthTo&&(y.display.sizer.style.minWidth=h.adjustWidthTo+"px",h.maxScrollLeft<y.doc.scrollLeft&&Li(y,Math.min(y.display.scroller.scrollLeft,h.maxScrollLeft),!0),y.display.maxLineChanged=!1);var x=h.focus&&h.focus==ht();h.preparedSelection&&y.display.input.showSelection(h.preparedSelection,x),(h.updatedDisplay||h.startHeight!=y.doc.height)&&Jr(y,h.barMeasure),h.updatedDisplay&&tu(y,h.barMeasure),h.selectionChanged&&zl(y),y.state.focused&&h.updateInput&&y.display.input.reset(h.typing),x&&da(h.cm)}function ec(h){var y=h.cm,x=y.display,M=y.doc;h.updatedDisplay&&sd(y,h.update),null!=x.wheelStartX&&(null!=h.scrollTop||null!=h.scrollLeft||h.scrollToPos)&&(x.wheelStartX=x.wheelStartY=null),null!=h.scrollTop&&ti(y,h.scrollTop,h.forceScroll),null!=h.scrollLeft&&Li(y,h.scrollLeft,!0,!0),h.scrollToPos&&function(h,y){if(!Ci(h,"scrollCursorIntoView")){var x=h.display,M=x.sizer.getBoundingClientRect(),L=null;if(y.top+M.top<0?L=!0:y.bottom+M.top>(window.innerHeight||document.documentElement.clientHeight)&&(L=!1),null!=L&&!be){var Y=Se("div","\u200b",null,"position: absolute;\n                         top: "+(y.top-x.viewOffset-Yt(h.display))+"px;\n                         height: "+(y.bottom-y.top+Fi(h)+x.barHeight)+"px;\n                         left: "+y.left+"px; width: "+Math.max(2,y.right-y.left)+"px;");h.display.lineSpace.appendChild(Y),Y.scrollIntoView(L),h.display.lineSpace.removeChild(Y)}}}(y,function(h,y,x,M){var L;null==M&&(M=0),!h.options.lineWrapping&&y==x&&(x="before"==y.sticky?Vi(y.line,y.ch+1,"before"):y,y=y.ch?Vi(y.line,"before"==y.sticky?y.ch-1:y.ch,"after"):y);for(var Y=0;Y<5;Y++){var ce=!1,Ce=On(h,y),Ve=x&&x!=y?On(h,x):Ce,Ke=Vc(h,L={left:Math.min(Ce.left,Ve.left),top:Math.min(Ce.top,Ve.top)-M,right:Math.max(Ce.left,Ve.left),bottom:Math.max(Ce.bottom,Ve.bottom)+M}),At=h.doc.scrollTop,Xt=h.doc.scrollLeft;if(null!=Ke.scrollTop&&(Ut(h,Ke.scrollTop),Math.abs(h.doc.scrollTop-At)>1&&(ce=!0)),null!=Ke.scrollLeft&&(Li(h,Ke.scrollLeft),Math.abs(h.doc.scrollLeft-Xt)>1&&(ce=!0)),!ce)break}return L}(y,zi(M,h.scrollToPos.from),zi(M,h.scrollToPos.to),h.scrollToPos.margin));var Y=h.maybeHiddenMarkers,ce=h.maybeUnhiddenMarkers;if(Y)for(var Ce=0;Ce<Y.length;++Ce)Y[Ce].lines.length||Ot(Y[Ce],"hide");if(ce)for(var Ve=0;Ve<ce.length;++Ve)ce[Ve].lines.length&&Ot(ce[Ve],"unhide");x.wrapper.offsetHeight&&(M.scrollTop=y.display.scroller.scrollTop),h.changeObjs&&Ot(y,"changes",y,h.changeObjs),h.update&&h.update.finish()}function ds(h,y){if(h.curOp)return y();Vo(h);try{return y()}finally{el(h)}}function Lo(h,y){return function(){if(h.curOp)return y.apply(h,arguments);Vo(h);try{return y.apply(h,arguments)}finally{el(h)}}}function Po(h){return function(){if(this.curOp)return h.apply(this,arguments);Vo(this);try{return h.apply(this,arguments)}finally{el(this)}}}function qr(h){return function(){var y=this.cm;if(!y||y.curOp)return h.apply(this,arguments);Vo(y);try{return h.apply(this,arguments)}finally{el(y)}}}function tc(h,y){h.doc.highlightFrontier<h.display.viewTo&&h.state.highlight.set(y,vt(Tu,h))}function Tu(h){var y=h.doc;if(!(y.highlightFrontier>=h.display.viewTo)){var x=+new Date+h.options.workTime,M=ro(h,y.highlightFrontier),L=[];y.iter(M.line,Math.min(y.first+y.size,h.display.viewTo+500),function(Y){if(M.line>=h.display.viewFrom){var ce=Y.styles,Ce=Y.text.length>h.options.maxHighlightLength?Lr(y.mode,M.state):null,Ve=Ao(h,Y,M,!0);Ce&&(M.state=Ce),Y.styles=Ve.styles;var Ke=Y.styleClasses,At=Ve.classes;At?Y.styleClasses=At:Ke&&(Y.styleClasses=null);for(var Xt=!ce||ce.length!=Y.styles.length||Ke!=At&&(!Ke||!At||Ke.bgClass!=At.bgClass||Ke.textClass!=At.textClass),fi=0;!Xt&&fi<ce.length;++fi)Xt=ce[fi]!=Y.styles[fi];Xt&&L.push(M.line),Y.stateAfter=M.save(),M.nextLine()}else Y.text.length<=h.options.maxHighlightLength&&_o(h,Y.text,M),Y.stateAfter=M.line%5==0?M.save():null,M.nextLine();if(+new Date>x)return tc(h,h.options.workDelay),!0}),y.highlightFrontier=M.line,y.modeFrontier=Math.max(y.modeFrontier,M.line),L.length&&ds(h,function(){for(var Y=0;Y<L.length;Y++)ia(h,L[Y],"text")})}}var Uo=function(h,y,x){var M=h.display;this.viewport=y,this.visible=Cl(M,h.doc,y),this.editorIsHidden=!M.wrapper.offsetWidth,this.wrapperHeight=M.wrapper.clientHeight,this.wrapperWidth=M.wrapper.clientWidth,this.oldDisplayWidth=un(h),this.force=x,this.dims=zs(h),this.events=[]};function bc(h,y){var x=h.display,M=h.doc;if(y.editorIsHidden)return Qa(h),!1;if(!y.force&&y.visible.from>=x.viewFrom&&y.visible.to<=x.viewTo&&(null==x.updateLineNumbers||x.updateLineNumbers>=x.viewTo)&&x.renderedView==x.view&&0==Aa(h))return!1;yc(h)&&(Qa(h),y.dims=zs(h));var L=M.first+M.size,Y=Math.max(y.visible.from-h.options.viewportMargin,M.first),ce=Math.min(L,y.visible.to+h.options.viewportMargin);x.viewFrom<Y&&Y-x.viewFrom<20&&(Y=Math.max(M.first,x.viewFrom)),x.viewTo>ce&&x.viewTo-ce<20&&(ce=Math.min(L,x.viewTo)),Ho&&(Y=lo(h.doc,Y),ce=gs(h.doc,ce));var Ce=Y!=x.viewFrom||ce!=x.viewTo||x.lastWrapHeight!=y.wrapperHeight||x.lastWrapWidth!=y.wrapperWidth;(function(h,y,x){var M=h.display;0==M.view.length||y>=M.viewTo||x<=M.viewFrom?(M.view=cn(h,y,x),M.viewFrom=y):(M.viewFrom>y?M.view=cn(h,y,M.viewFrom).concat(M.view):M.viewFrom<y&&(M.view=M.view.slice(vs(h,y))),M.viewFrom=y,M.viewTo<x?M.view=M.view.concat(cn(h,M.viewTo,x)):M.viewTo>x&&(M.view=M.view.slice(0,vs(h,x)))),M.viewTo=x})(h,Y,ce),x.viewOffset=zr(Ri(h.doc,x.viewFrom)),h.display.mover.style.top=x.viewOffset+"px";var Ve=Aa(h);if(!Ce&&0==Ve&&!y.force&&x.renderedView==x.view&&(null==x.updateLineNumbers||x.updateLineNumbers>=x.viewTo))return!1;var Ke=function(h){if(h.hasFocus())return null;var y=ht();if(!y||!ie(h.display.lineDiv,y))return null;var x={activeElt:y};if(window.getSelection){var M=window.getSelection();M.anchorNode&&M.extend&&ie(h.display.lineDiv,M.anchorNode)&&(x.anchorNode=M.anchorNode,x.anchorOffset=M.anchorOffset,x.focusNode=M.focusNode,x.focusOffset=M.focusOffset)}return x}(h);return Ve>4&&(x.lineDiv.style.display="none"),function(h,y,x){var M=h.display,L=h.options.lineNumbers,Y=M.lineDiv,ce=Y.firstChild;function Ce(Pi){var Xi=Pi.nextSibling;return d&&_e&&h.display.currentWheelTarget==Pi?Pi.style.display="none":Pi.parentNode.removeChild(Pi),Xi}for(var Ve=M.view,Ke=M.viewFrom,At=0;At<Ve.length;At++){var Xt=Ve[At];if(!Xt.hidden)if(Xt.node&&Xt.node.parentNode==Y){for(;ce!=Xt.node;)ce=Ce(ce);var ci=L&&null!=y&&y<=Ke&&Xt.lineNumber;Xt.changes&&(Zt(Xt.changes,"gutter")>-1&&(ci=!1),Vn(h,Xt,Ke,x)),ci&&(ae(Xt.lineNumber),Xt.lineNumber.appendChild(document.createTextNode(Rr(h.options,Ke)))),ce=Xt.node.nextSibling}else{var fi=Ue(h,Xt,Ke,x);Y.insertBefore(fi,ce)}Ke+=Xt.size}for(;ce;)ce=Ce(ce)}(h,x.updateLineNumbers,y.dims),Ve>4&&(x.lineDiv.style.display=""),x.renderedView=x.view,function(h){if(h&&h.activeElt&&h.activeElt!=ht()&&(h.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(h.activeElt.nodeName)&&h.anchorNode&&ie(document.body,h.anchorNode)&&ie(document.body,h.focusNode))){var y=window.getSelection(),x=document.createRange();x.setEnd(h.anchorNode,h.anchorOffset),x.collapse(!1),y.removeAllRanges(),y.addRange(x),y.extend(h.focusNode,h.focusOffset)}}(Ke),ae(x.cursorDiv),ae(x.selectionDiv),x.gutters.style.height=x.sizer.style.minHeight=0,Ce&&(x.lastWrapHeight=y.wrapperHeight,x.lastWrapWidth=y.wrapperWidth,tc(h,400)),x.updateLineNumbers=null,!0}function sd(h,y){for(var x=y.viewport,M=!0;;M=!1){if(M&&h.options.lineWrapping&&y.oldDisplayWidth!=un(h))M&&(y.visible=Cl(h.display,h.doc,x));else if(x&&null!=x.top&&(x={top:Math.min(h.doc.height+qt(h.display)-Cn(h),x.top)}),y.visible=Cl(h.display,h.doc,x),y.visible.from>=h.display.viewFrom&&y.visible.to<=h.display.viewTo)break;if(!bc(h,y))break;Is(h);var L=wn(h);kl(h),Jr(h,L),tu(h,L),y.force=!1}y.signal(h,"update",h),(h.display.viewFrom!=h.display.reportedViewFrom||h.display.viewTo!=h.display.reportedViewTo)&&(y.signal(h,"viewportChange",h,h.display.viewFrom,h.display.viewTo),h.display.reportedViewFrom=h.display.viewFrom,h.display.reportedViewTo=h.display.viewTo)}function Gu(h,y){var x=new Uo(h,y);if(bc(h,x)){Is(h),sd(h,x);var M=wn(h);kl(h),Jr(h,M),tu(h,M),x.finish()}}function Yl(h){h.sizer.style.marginLeft=h.gutters.offsetWidth+"px",fr(h,"gutterChanged",h)}function tu(h,y){h.display.sizer.style.minHeight=y.docHeight+"px",h.display.heightForcer.style.top=y.docHeight+"px",h.display.gutters.style.height=y.docHeight+h.display.barHeight+Fi(h)+"px"}function ss(h){var y=h.display,x=y.view;if(y.alignWidgets||y.gutters.firstChild&&h.options.fixedGutter){for(var M=As(y)-y.scroller.scrollLeft+h.doc.scrollLeft,L=y.gutters.offsetWidth,Y=M+"px",ce=0;ce<x.length;ce++)if(!x[ce].hidden){h.options.fixedGutter&&(x[ce].gutter&&(x[ce].gutter.style.left=Y),x[ce].gutterBackground&&(x[ce].gutterBackground.style.left=Y));var Ce=x[ce].alignable;if(Ce)for(var Ve=0;Ve<Ce.length;Ve++)Ce[Ve].style.left=Y}h.options.fixedGutter&&(y.gutters.style.left=M+L+"px")}}function yc(h){if(!h.options.lineNumbers)return!1;var y=h.doc,x=Rr(h.options,y.first+y.size-1),M=h.display;if(x.length!=M.lineNumChars){var L=M.measure.appendChild(Se("div",[Se("div",x)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Y=L.firstChild.offsetWidth,ce=L.offsetWidth-Y;return M.lineGutter.style.width="",M.lineNumInnerWidth=Math.max(Y,M.lineGutter.offsetWidth-ce)+1,M.lineNumWidth=M.lineNumInnerWidth+ce,M.lineNumChars=M.lineNumInnerWidth?x.length:-1,M.lineGutter.style.width=M.lineNumWidth+"px",Yl(h.display),!0}return!1}function nc(h,y){for(var x=[],M=!1,L=0;L<h.length;L++){var Y=h[L],ce=null;if("string"!=typeof Y&&(ce=Y.style,Y=Y.className),"CodeMirror-linenumbers"==Y){if(!y)continue;M=!0}x.push({className:Y,style:ce})}return y&&!M&&x.push({className:"CodeMirror-linenumbers",style:null}),x}function Pl(h){var y=h.gutters,x=h.gutterSpecs;ae(y),h.lineGutter=null;for(var M=0;M<x.length;++M){var L=x[M],Y=L.className,ce=L.style,Ce=y.appendChild(Se("div",null,"CodeMirror-gutter "+Y));ce&&(Ce.style.cssText=ce),"CodeMirror-linenumbers"==Y&&(h.lineGutter=Ce,Ce.style.width=(h.lineNumWidth||1)+"px")}y.style.display=x.length?"":"none",Yl(h)}function Ca(h){Pl(h.display),ns(h),ss(h)}function ha(h,y,x,M){var L=this;this.input=x,L.scrollbarFiller=Se("div",null,"CodeMirror-scrollbar-filler"),L.scrollbarFiller.setAttribute("cm-not-content","true"),L.gutterFiller=Se("div",null,"CodeMirror-gutter-filler"),L.gutterFiller.setAttribute("cm-not-content","true"),L.lineDiv=Ee("div",null,"CodeMirror-code"),L.selectionDiv=Se("div",null,null,"position: relative; z-index: 1"),L.cursorDiv=Se("div",null,"CodeMirror-cursors"),L.measure=Se("div",null,"CodeMirror-measure"),L.lineMeasure=Se("div",null,"CodeMirror-measure"),L.lineSpace=Ee("div",[L.measure,L.lineMeasure,L.selectionDiv,L.cursorDiv,L.lineDiv],null,"position: relative; outline: none");var Y=Ee("div",[L.lineSpace],"CodeMirror-lines");L.mover=Se("div",[Y],null,"position: relative"),L.sizer=Se("div",[L.mover],"CodeMirror-sizer"),L.sizerWidth=null,L.heightForcer=Se("div",null,null,"position: absolute; height: 50px; width: 1px;"),L.gutters=Se("div",null,"CodeMirror-gutters"),L.lineGutter=null,L.scroller=Se("div",[L.sizer,L.heightForcer,L.gutters],"CodeMirror-scroll"),L.scroller.setAttribute("tabIndex","-1"),L.wrapper=Se("div",[L.scrollbarFiller,L.gutterFiller,L.scroller],"CodeMirror"),L.wrapper.setAttribute("translate","no"),n&&a<8&&(L.gutters.style.zIndex=-1,L.scroller.style.paddingRight=0),!d&&!(E&&Ge)&&(L.scroller.draggable=!0),h&&(h.appendChild?h.appendChild(L.wrapper):h(L.wrapper)),L.viewFrom=L.viewTo=y.first,L.reportedViewFrom=L.reportedViewTo=y.first,L.view=[],L.renderedView=null,L.externalMeasured=null,L.viewOffset=0,L.lastWrapHeight=L.lastWrapWidth=0,L.updateLineNumbers=null,L.nativeBarWidth=L.barHeight=L.barWidth=0,L.scrollbarsClipped=!1,L.lineNumWidth=L.lineNumInnerWidth=L.lineNumChars=null,L.alignWidgets=!1,L.cachedCharWidth=L.cachedTextHeight=L.cachedPaddingH=null,L.maxLine=null,L.maxLineLength=0,L.maxLineChanged=!1,L.wheelDX=L.wheelDY=L.wheelStartX=L.wheelStartY=null,L.shift=!1,L.selForContextMenu=null,L.activeTouch=null,L.gutterSpecs=nc(M.gutters,M.lineNumbers),Pl(L),x.init(L)}Uo.prototype.signal=function(h,y){Mi(h,y)&&this.events.push(arguments)},Uo.prototype.finish=function(){for(var h=0;h<this.events.length;h++)Ot.apply(null,this.events[h])};var wo=0,ka=null;function Wa(h){var y=h.wheelDeltaX,x=h.wheelDeltaY;return null==y&&h.detail&&h.axis==h.HORIZONTAL_AXIS&&(y=h.detail),null==x&&h.detail&&h.axis==h.VERTICAL_AXIS?x=h.detail:null==x&&(x=h.wheelDelta),{x:y,y:x}}function Nl(h){var y=Wa(h);return y.x*=ka,y.y*=ka,y}function iu(h,y){var x=Wa(y),M=x.x,L=x.y,Y=ka;0===y.deltaMode&&(M=y.deltaX,L=y.deltaY,Y=1);var ce=h.display,Ce=ce.scroller,Ke=Ce.scrollHeight>Ce.clientHeight;if(M&&Ce.scrollWidth>Ce.clientWidth||L&&Ke){if(L&&_e&&d)e:for(var At=y.target,Xt=ce.view;At!=Ce;At=At.parentNode)for(var fi=0;fi<Xt.length;fi++)if(Xt[fi].node==At){h.display.currentWheelTarget=At;break e}if(M&&!E&&!B&&null!=Y)return L&&Ke&&Ut(h,Math.max(0,Ce.scrollTop+L*Y)),Li(h,Math.max(0,Ce.scrollLeft+M*Y)),(!L||L&&Ke)&&Bi(y),void(ce.wheelStartX=null);if(L&&null!=Y){var ci=L*Y,Pi=h.doc.scrollTop,Xi=Pi+ce.wrapper.clientHeight;ci<0?Pi=Math.max(0,Pi+ci-50):Xi=Math.min(h.doc.height,Xi+ci+50),Gu(h,{top:Pi,bottom:Xi})}wo<20&&0!==y.deltaMode&&(null==ce.wheelStartX?(ce.wheelStartX=Ce.scrollLeft,ce.wheelStartY=Ce.scrollTop,ce.wheelDX=M,ce.wheelDY=L,setTimeout(function(){if(null!=ce.wheelStartX){var sn=Ce.scrollLeft-ce.wheelStartX,_n=Ce.scrollTop-ce.wheelStartY,Sn=_n&&ce.wheelDY&&_n/ce.wheelDY||sn&&ce.wheelDX&&sn/ce.wheelDX;ce.wheelStartX=ce.wheelStartY=null,Sn&&(ka=(ka*wo+Sn)/(wo+1),++wo)}},200)):(ce.wheelDX+=M,ce.wheelDY+=L))}}n?ka=-.53:E?ka=15:D?ka=-.7:z&&(ka=-1/3);var na=function(h,y){this.ranges=h,this.primIndex=y};na.prototype.primary=function(){return this.ranges[this.primIndex]},na.prototype.equals=function(h){if(h==this)return!0;if(h.primIndex!=this.primIndex||h.ranges.length!=this.ranges.length)return!1;for(var y=0;y<this.ranges.length;y++){var x=this.ranges[y],M=h.ranges[y];if(!Wn(x.anchor,M.anchor)||!Wn(x.head,M.head))return!1}return!0},na.prototype.deepCopy=function(){for(var h=[],y=0;y<this.ranges.length;y++)h[y]=new Gr(ot(this.ranges[y].anchor),ot(this.ranges[y].head));return new na(h,this.primIndex)},na.prototype.somethingSelected=function(){for(var h=0;h<this.ranges.length;h++)if(!this.ranges[h].empty())return!0;return!1},na.prototype.contains=function(h,y){y||(y=h);for(var x=0;x<this.ranges.length;x++){var M=this.ranges[x];if(Dn(y,M.from())>=0&&Dn(h,M.to())<=0)return x}return-1};var Gr=function(h,y){this.anchor=h,this.head=y};function Ta(h,y,x){var M=h&&h.options.selectionsMayTouch,L=y[x];y.sort(function(fi,ci){return Dn(fi.from(),ci.from())}),x=Zt(y,L);for(var Y=1;Y<y.length;Y++){var ce=y[Y],Ce=y[Y-1],Ve=Dn(Ce.to(),ce.from());if(M&&!ce.empty()?Ve>0:Ve>=0){var Ke=Ai(Ce.from(),ce.from()),At=Ht(Ce.to(),ce.to()),Xt=Ce.empty()?ce.from()==ce.head:Ce.from()==Ce.head;Y<=x&&--x,y.splice(--Y,2,new Gr(Xt?At:Ke,Xt?Ke:At))}}return new na(y,x)}function rc(h,y){return new na([new Gr(h,y||h)],0)}function Fl(h){return h.text?Vi(h.from.line+h.text.length-1,xe(h.text).length+(1==h.text.length?h.from.ch:0)):h.to}function bs(h,y){if(Dn(h,y.from)<0)return h;if(Dn(h,y.to)<=0)return Fl(y);var x=h.line+y.text.length-(y.to.line-y.from.line)-1,M=h.ch;return h.line==y.to.line&&(M+=Fl(y).ch-y.to.ch),Vi(x,M)}function tl(h,y){for(var x=[],M=0;M<h.sel.ranges.length;M++){var L=h.sel.ranges[M];x.push(new Gr(bs(L.anchor,y),bs(L.head,y)))}return Ta(h.cm,x,h.sel.primIndex)}function oc(h,y,x){return h.line==y.line?Vi(x.line,h.ch-y.ch+x.ch):Vi(x.line+(h.line-y.line),h.ch)}function La(h){h.doc.mode=eo(h.options,h.doc.modeOption),Bl(h)}function Bl(h){h.doc.iter(function(y){y.stateAfter&&(y.stateAfter=null),y.styles&&(y.styles=null)}),h.doc.modeFrontier=h.doc.highlightFrontier=h.doc.first,tc(h,100),h.state.modeGen++,h.curOp&&ns(h)}function sc(h,y){return 0==y.from.ch&&0==y.to.ch&&""==xe(y.text)&&(!h.cm||h.cm.options.wholeLineUpdateBefore)}function Os(h,y,x,M){function L(Sn){return x?x[Sn]:null}function Y(Sn,hn,Rn){(function(h,y,x,M){h.text=y,h.stateAfter&&(h.stateAfter=null),h.styles&&(h.styles=null),null!=h.order&&(h.order=null),_a(h),qs(h,x);var L=M?M(h):1;L!=h.height&&Hr(h,L)})(Sn,hn,Rn,M),fr(Sn,"change",Sn,y)}function ce(Sn,hn){for(var Rn=[],Jn=Sn;Jn<hn;++Jn)Rn.push(new us(Ke[Jn],L(Jn),M));return Rn}var Ce=y.from,Ve=y.to,Ke=y.text,At=Ri(h,Ce.line),Xt=Ri(h,Ve.line),fi=xe(Ke),ci=L(Ke.length-1),Pi=Ve.line-Ce.line;if(y.full)h.insert(0,ce(0,Ke.length)),h.remove(Ke.length,h.size-Ke.length);else if(sc(h,y)){var Xi=ce(0,Ke.length-1);Y(Xt,Xt.text,ci),Pi&&h.remove(Ce.line,Pi),Xi.length&&h.insert(Ce.line,Xi)}else if(At==Xt)if(1==Ke.length)Y(At,At.text.slice(0,Ce.ch)+fi+At.text.slice(Ve.ch),ci);else{var sn=ce(1,Ke.length-1);sn.push(new us(fi+At.text.slice(Ve.ch),ci,M)),Y(At,At.text.slice(0,Ce.ch)+Ke[0],L(0)),h.insert(Ce.line+1,sn)}else if(1==Ke.length)Y(At,At.text.slice(0,Ce.ch)+Ke[0]+Xt.text.slice(Ve.ch),L(0)),h.remove(Ce.line+1,Pi);else{Y(At,At.text.slice(0,Ce.ch)+Ke[0],L(0)),Y(Xt,fi+Xt.text.slice(Ve.ch),ci);var _n=ce(1,Ke.length-1);Pi>1&&h.remove(Ce.line+1,Pi-1),h.insert(Ce.line+1,_n)}fr(h,"change",h,y)}function hl(h,y,x){!function M(L,Y,ce){if(L.linked)for(var Ce=0;Ce<L.linked.length;++Ce){var Ve=L.linked[Ce];if(Ve.doc!=Y){var Ke=ce&&Ve.sharedHist;x&&!Ke||(y(Ve.doc,Ke),M(Ve.doc,L,Ke))}}}(h,null,!0)}function Ir(h,y){if(y.cm)throw new Error("This document is already in use.");h.doc=y,y.cm=h,Ol(h),La(h),ac(h),h.options.direction=y.direction,h.options.lineWrapping||bl(h),h.options.mode=y.modeOption,ns(h)}function ac(h){("rtl"==h.doc.direction?Oe:ge)(h.display.lineDiv,"CodeMirror-rtl")}function Ec(h){this.done=[],this.undone=[],this.undoDepth=h?h.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=h?h.maxGeneration:1}function Gc(h,y){var x={from:ot(y.from),to:Fl(y),text:Gn(h,y.from,y.to)};return uc(h,x,y.from.line,y.to.line+1),hl(h,function(M){return uc(M,x,y.from.line,y.to.line+1)},!0),x}function ra(h){for(;h.length&&xe(h).ranges;)h.pop()}function No(h,y,x,M){var L=h.history;L.undone.length=0;var ce,Ce,Y=+new Date;if((L.lastOp==M||L.lastOrigin==y.origin&&y.origin&&("+"==y.origin.charAt(0)&&L.lastModTime>Y-(h.cm?h.cm.options.historyEventDelay:500)||"*"==y.origin.charAt(0)))&&(ce=function(h,y){return y?(ra(h.done),xe(h.done)):h.done.length&&!xe(h.done).ranges?xe(h.done):h.done.length>1&&!h.done[h.done.length-2].ranges?(h.done.pop(),xe(h.done)):void 0}(L,L.lastOp==M)))Ce=xe(ce.changes),0==Dn(y.from,y.to)&&0==Dn(y.from,Ce.to)?Ce.to=Fl(y):ce.changes.push(Gc(h,y));else{var Ve=xe(L.done);for((!Ve||!Ve.ranges)&&nu(h.sel,L.done),ce={changes:[Gc(h,y)],generation:L.generation},L.done.push(ce);L.done.length>L.undoDepth;)L.done.shift(),L.done[0].ranges||L.done.shift()}L.done.push(x),L.generation=++L.maxGeneration,L.lastModTime=L.lastSelTime=Y,L.lastOp=L.lastSelOp=M,L.lastOrigin=L.lastSelOrigin=y.origin,Ce||Ot(h,"historyAdded")}function cc(h,y,x,M){var L=h.history,Y=M&&M.origin;x==L.lastSelOp||Y&&L.lastSelOrigin==Y&&(L.lastModTime==L.lastSelTime&&L.lastOrigin==Y||function(h,y,x,M){var L=y.charAt(0);return"*"==L||"+"==L&&x.ranges.length==M.ranges.length&&x.somethingSelected()==M.somethingSelected()&&new Date-h.history.lastSelTime<=(h.cm?h.cm.options.historyEventDelay:500)}(h,Y,xe(L.done),y))?L.done[L.done.length-1]=y:nu(y,L.done),L.lastSelTime=+new Date,L.lastSelOrigin=Y,L.lastSelOp=x,M&&!1!==M.clearRedo&&ra(L.undone)}function nu(h,y){var x=xe(y);x&&x.ranges&&x.equals(h)||y.push(h)}function uc(h,y,x,M){var L=y["spans_"+h.id],Y=0;h.iter(Math.max(h.first,x),Math.min(h.first+h.size,M),function(ce){ce.markedSpans&&((L||(L=y["spans_"+h.id]={}))[Y]=ce.markedSpans),++Y})}function ja(h){if(!h)return null;for(var y,x=0;x<h.length;++x)h[x].marker.explicitlyCleared?y||(y=h.slice(0,x)):y&&y.push(h[x]);return y?y.length?y:null:h}function dc(h,y){var x=function(h,y){var x=y["spans_"+h.id];if(!x)return null;for(var M=[],L=0;L<y.text.length;++L)M.push(ja(x[L]));return M}(h,y),M=Hs(h,y);if(!x)return M;if(!M)return x;for(var L=0;L<x.length;++L){var Y=x[L],ce=M[L];if(Y&&ce)e:for(var Ce=0;Ce<ce.length;++Ce){for(var Ve=ce[Ce],Ke=0;Ke<Y.length;++Ke)if(Y[Ke].marker==Ve.marker)continue e;Y.push(Ve)}else ce&&(x[L]=ce)}return x}function pl(h,y,x){for(var M=[],L=0;L<h.length;++L){var Y=h[L];if(Y.ranges)M.push(x?na.prototype.deepCopy.call(Y):Y);else{var ce=Y.changes,Ce=[];M.push({changes:Ce});for(var Ve=0;Ve<ce.length;++Ve){var Ke=ce[Ve],At=void 0;if(Ce.push({from:Ke.from,to:Ke.to,text:Ke.text}),y)for(var Xt in Ke)(At=Xt.match(/^spans_(\d+)$/))&&Zt(y,Number(At[1]))>-1&&(xe(Ce)[Xt]=Ke[Xt],delete Ke[Xt])}}}return M}function Jo(h,y,x,M){if(M){var L=h.anchor;if(x){var Y=Dn(y,L)<0;Y!=Dn(x,L)<0?(L=y,y=x):Y!=Dn(y,x)<0&&(y=x)}return new Gr(L,y)}return new Gr(x||y,y)}function fl(h,y,x,M,L){null==L&&(L=h.cm&&(h.cm.display.shift||h.extend)),oa(h,new na([Jo(h.sel.primary(),y,x,L)],0),M)}function il(h,y,x){for(var M=[],L=h.cm&&(h.cm.display.shift||h.extend),Y=0;Y<h.sel.ranges.length;Y++)M[Y]=Jo(h.sel.ranges[Y],y[Y],null,L);oa(h,Ta(h.cm,M,h.sel.primIndex),x)}function hc(h,y,x,M){var L=h.sel.ranges.slice(0);L[y]=x,oa(h,Ta(h.cm,L,h.sel.primIndex),M)}function wc(h,y,x,M){oa(h,rc(y,x),M)}function ru(h,y,x){var M=h.history.done,L=xe(M);L&&L.ranges?(M[M.length-1]=y,Hl(h,y,x)):oa(h,y,x)}function oa(h,y,x){Hl(h,y,x),cc(h,h.sel,h.cm?h.cm.curOp.id:NaN,x)}function Hl(h,y,x){(Mi(h,"beforeSelectionChange")||h.cm&&Mi(h.cm,"beforeSelectionChange"))&&(y=function(h,y,x){var M={ranges:y.ranges,update:function(L){this.ranges=[];for(var Y=0;Y<L.length;Y++)this.ranges[Y]=new Gr(zi(h,L[Y].anchor),zi(h,L[Y].head))},origin:x&&x.origin};return Ot(h,"beforeSelectionChange",h,M),h.cm&&Ot(h.cm,"beforeSelectionChange",h.cm,M),M.ranges!=y.ranges?Ta(h.cm,M.ranges,M.ranges.length-1):y}(h,y,x));var M=x&&x.bias||(Dn(y.primary().head,h.sel.primary().head)<0?-1:1);Xl(h,pa(h,y,M,!0)),(!x||!1!==x.scroll)&&h.cm&&"nocursor"!=h.cm.getOption("readOnly")&&te(h.cm)}function Xl(h,y){y.equals(h.sel)||(h.sel=y,h.cm&&(h.cm.curOp.updateInput=1,h.cm.curOp.selectionChanged=!0,zt(h.cm)),fr(h,"cursorActivity",h))}function Sc(h){Xl(h,pa(h,h.sel,null,!1))}function pa(h,y,x,M){for(var L,Y=0;Y<y.ranges.length;Y++){var ce=y.ranges[Y],Ce=y.ranges.length==h.sel.ranges.length&&h.sel.ranges[Y],Ve=jc(h,ce.anchor,Ce&&Ce.anchor,x,M),Ke=jc(h,ce.head,Ce&&Ce.head,x,M);(L||Ve!=ce.anchor||Ke!=ce.head)&&(L||(L=y.ranges.slice(0,Y)),L[Y]=new Gr(Ve,Ke))}return L?Ta(h.cm,L,y.primIndex):y}function nl(h,y,x,M,L){var Y=Ri(h,y.line);if(Y.markedSpans)for(var ce=0;ce<Y.markedSpans.length;++ce){var Ce=Y.markedSpans[ce],Ve=Ce.marker,Ke="selectLeft"in Ve?!Ve.selectLeft:Ve.inclusiveLeft,At="selectRight"in Ve?!Ve.selectRight:Ve.inclusiveRight;if((null==Ce.from||(Ke?Ce.from<=y.ch:Ce.from<y.ch))&&(null==Ce.to||(At?Ce.to>=y.ch:Ce.to>y.ch))){if(L&&(Ot(Ve,"beforeCursorEnter"),Ve.explicitlyCleared)){if(Y.markedSpans){--ce;continue}break}if(!Ve.atomic)continue;if(x){var Xt=Ve.find(M<0?1:-1),fi=void 0;if((M<0?At:Ke)&&(Xt=pc(h,Xt,-M,Xt&&Xt.line==y.line?Y:null)),Xt&&Xt.line==y.line&&(fi=Dn(Xt,x))&&(M<0?fi<0:fi>0))return nl(h,Xt,y,M,L)}var ci=Ve.find(M<0?-1:1);return(M<0?Ke:At)&&(ci=pc(h,ci,M,ci.line==y.line?Y:null)),ci?nl(h,ci,y,M,L):null}}return y}function jc(h,y,x,M,L){var Y=M||1;return nl(h,y,x,Y,L)||!L&&nl(h,y,x,Y,!0)||nl(h,y,x,-Y,L)||!L&&nl(h,y,x,-Y,!0)||(h.cantEdit=!0,Vi(h.first,0))}function pc(h,y,x,M){return x<0&&0==y.ch?y.line>h.first?zi(h,Vi(y.line-1)):null:x>0&&y.ch==(M||Ri(h,y.line)).text.length?y.line<h.first+h.size-1?Vi(y.line+1,0):null:new Vi(y.line,y.ch+x)}function zc(h){h.setSelection(Vi(h.firstLine(),0),Vi(h.lastLine()),Ct)}function Dc(h,y,x){var M={canceled:!1,from:y.from,to:y.to,text:y.text,origin:y.origin,cancel:function(){return M.canceled=!0}};return x&&(M.update=function(L,Y,ce,Ce){L&&(M.from=zi(h,L)),Y&&(M.to=zi(h,Y)),ce&&(M.text=ce),void 0!==Ce&&(M.origin=Ce)}),Ot(h,"beforeChange",h,M),h.cm&&Ot(h.cm,"beforeChange",h.cm,M),M.canceled?(h.cm&&(h.cm.curOp.updateInput=2),null):{from:M.from,to:M.to,text:M.text,origin:M.origin}}function wa(h,y,x){if(h.cm){if(!h.cm.curOp)return Lo(h.cm,wa)(h,y,x);if(h.cm.state.suppressEdits)return}if(!(Mi(h,"beforeChange")||h.cm&&Mi(h.cm,"beforeChange"))||(y=Dc(h,y,!0))){var M=rs&&!x&&function(h,y,x){var M=null;if(h.iter(y.line,x.line+1,function(ci){if(ci.markedSpans)for(var Pi=0;Pi<ci.markedSpans.length;++Pi){var Xi=ci.markedSpans[Pi].marker;Xi.readOnly&&(!M||-1==Zt(M,Xi))&&(M||(M=[])).push(Xi)}}),!M)return null;for(var L=[{from:y,to:x}],Y=0;Y<M.length;++Y)for(var ce=M[Y],Ce=ce.find(0),Ve=0;Ve<L.length;++Ve){var Ke=L[Ve];if(!(Dn(Ke.to,Ce.from)<0||Dn(Ke.from,Ce.to)>0)){var At=[Ve,1],Xt=Dn(Ke.from,Ce.from),fi=Dn(Ke.to,Ce.to);(Xt<0||!ce.inclusiveLeft&&!Xt)&&At.push({from:Ke.from,to:Ce.from}),(fi>0||!ce.inclusiveRight&&!fi)&&At.push({from:Ce.to,to:Ke.to}),L.splice.apply(L,At),Ve+=At.length-3}}return L}(h,y.from,y.to);if(M)for(var L=M.length-1;L>=0;--L)so(h,{from:M[L].from,to:M[L].to,text:L?[""]:y.text,origin:y.origin});else so(h,y)}}function so(h,y){if(1!=y.text.length||""!=y.text[0]||0!=Dn(y.from,y.to)){var x=tl(h,y);No(h,y,x,h.cm?h.cm.curOp.id:NaN),Mc(h,y,x,Hs(h,y));var M=[];hl(h,function(L,Y){!Y&&-1==Zt(M,L.history)&&(Mu(L.history,y),M.push(L.history)),Mc(L,y,null,Hs(L,y))})}}function Vl(h,y,x){var M=h.cm&&h.cm.state.suppressEdits;if(!M||x){for(var Y,L=h.history,ce=h.sel,Ce="undo"==y?L.done:L.undone,Ve="undo"==y?L.undone:L.done,Ke=0;Ke<Ce.length&&(Y=Ce[Ke],!(x?Y.ranges&&!Y.equals(h.sel):!Y.ranges));Ke++);if(Ke!=Ce.length){for(L.lastOrigin=L.lastSelOrigin=null;;){if(!(Y=Ce.pop()).ranges){if(M)return void Ce.push(Y);break}if(nu(Y,Ve),x&&!Y.equals(h.sel))return void oa(h,Y,{clearRedo:!1});ce=Y}var At=[];nu(ce,Ve),Ve.push({changes:At,generation:L.generation}),L.generation=Y.generation||++L.maxGeneration;for(var Xt=Mi(h,"beforeChange")||h.cm&&Mi(h.cm,"beforeChange"),fi=function(Xi){var sn=Y.changes[Xi];if(sn.origin=y,Xt&&!Dc(h,sn,!1))return Ce.length=0,{};At.push(Gc(h,sn));var _n=Xi?tl(h,sn):xe(Ce);Mc(h,sn,_n,dc(h,sn)),!Xi&&h.cm&&h.cm.scrollIntoView({from:sn.from,to:Fl(sn)});var Sn=[];hl(h,function(hn,Rn){!Rn&&-1==Zt(Sn,hn.history)&&(Mu(hn.history,sn),Sn.push(hn.history)),Mc(hn,sn,null,dc(hn,sn))})},ci=Y.changes.length-1;ci>=0;--ci){var Pi=fi(ci);if(Pi)return Pi.v}}}}function Kl(h,y){if(0!=y&&(h.first+=y,h.sel=new na(pt(h.sel.ranges,function(L){return new Gr(Vi(L.anchor.line+y,L.anchor.ch),Vi(L.head.line+y,L.head.ch))}),h.sel.primIndex),h.cm)){ns(h.cm,h.first,h.first-y,y);for(var x=h.cm.display,M=x.viewFrom;M<x.viewTo;M++)ia(h.cm,M,"gutter")}}function Mc(h,y,x,M){if(h.cm&&!h.cm.curOp)return Lo(h.cm,Mc)(h,y,x,M);if(y.to.line<h.first)Kl(h,y.text.length-1-(y.to.line-y.from.line));else if(!(y.from.line>h.lastLine())){if(y.from.line<h.first){var L=y.text.length-1-(h.first-y.from.line);Kl(h,L),y={from:Vi(h.first,0),to:Vi(y.to.line+L,y.to.ch),text:[xe(y.text)],origin:y.origin}}var Y=h.lastLine();y.to.line>Y&&(y={from:y.from,to:Vi(Y,Ri(h,Y).text.length),text:[y.text[0]],origin:y.origin}),y.removed=Gn(h,y.from,y.to),x||(x=tl(h,y)),h.cm?function(h,y,x){var M=h.doc,L=h.display,Y=y.from,ce=y.to,Ce=!1,Ve=Y.line;h.options.lineWrapping||(Ve=_r(Oo(Ri(M,Y.line))),M.iter(Ve,ce.line+1,function(ci){if(ci==L.maxLine)return Ce=!0,!0})),M.sel.contains(y.from,y.to)>-1&&zt(h),Os(M,y,x,ba(h)),h.options.lineWrapping||(M.iter(Ve,Y.line+y.text.length,function(ci){var Pi=ca(ci);Pi>L.maxLineLength&&(L.maxLine=ci,L.maxLineLength=Pi,L.maxLineChanged=!0,Ce=!1)}),Ce&&(h.curOp.updateMaxLine=!0)),function(h,y){if(h.modeFrontier=Math.min(h.modeFrontier,y),!(h.highlightFrontier<y-10)){for(var x=h.first,M=y-1;M>x;M--){var L=Ri(h,M).stateAfter;if(L&&(!(L instanceof sr)||M+L.lookAhead<y)){x=M+1;break}}h.highlightFrontier=Math.min(h.highlightFrontier,x)}}(M,Y.line),tc(h,400);var Ke=y.text.length-(ce.line-Y.line)-1;y.full?ns(h):Y.line!=ce.line||1!=y.text.length||sc(h.doc,y)?ns(h,Y.line,ce.line+1,Ke):ia(h,Y.line,"text");var At=Mi(h,"changes"),Xt=Mi(h,"change");if(Xt||At){var fi={from:Y,to:ce,text:y.text,removed:y.removed,origin:y.origin};Xt&&fr(h,"change",h,fi),At&&(h.curOp.changeObjs||(h.curOp.changeObjs=[])).push(fi)}h.display.selForContextMenu=null}(h.cm,y,M):Os(h,y,M),Hl(h,x,Ct),h.cantEdit&&jc(h,Vi(h.firstLine(),0))&&(h.cantEdit=!1)}}function gl(h,y,x,M,L){var Y;M||(M=x),Dn(M,x)<0&&(x=(Y=[M,x])[0],M=Y[1]),"string"==typeof y&&(y=h.splitLines(y)),wa(h,{from:x,to:M,text:y,origin:L})}function Du(h,y,x,M){x<h.line?h.line+=M:y<h.line&&(h.line=y,h.ch=0)}function $l(h,y,x,M){for(var L=0;L<h.length;++L){var Y=h[L],ce=!0;if(Y.ranges){Y.copied||((Y=h[L]=Y.deepCopy()).copied=!0);for(var Ce=0;Ce<Y.ranges.length;Ce++)Du(Y.ranges[Ce].anchor,y,x,M),Du(Y.ranges[Ce].head,y,x,M)}else{for(var Ve=0;Ve<Y.changes.length;++Ve){var Ke=Y.changes[Ve];if(x<Ke.from.line)Ke.from=Vi(Ke.from.line+M,Ke.from.ch),Ke.to=Vi(Ke.to.line+M,Ke.to.ch);else if(y<=Ke.to.line){ce=!1;break}}ce||(h.splice(0,L+1),L=0)}}}function Mu(h,y){var x=y.from.line,M=y.to.line,L=y.text.length-(M-x)-1;$l(h.done,x,M,L),$l(h.undone,x,M,L)}function fc(h,y,x,M){var L=y,Y=y;return"number"==typeof y?Y=Ri(h,Ki(h,y)):L=_r(y),null==L?null:(M(Y,L)&&h.cm&&ia(h.cm,L,x),Y)}function Yc(h){this.lines=h,this.parent=null;for(var y=0,x=0;x<h.length;++x)h[x].parent=this,y+=h[x].height;this.height=y}function wl(h){this.children=h;for(var y=0,x=0,M=0;M<h.length;++M){var L=h[M];y+=L.chunkSize(),x+=L.height,L.parent=this}this.size=y,this.height=x,this.parent=null}Gr.prototype.from=function(){return Ai(this.anchor,this.head)},Gr.prototype.to=function(){return Ht(this.anchor,this.head)},Gr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Yc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(h,y){for(var x=h,M=h+y;x<M;++x){var L=this.lines[x];this.height-=L.height,ms(L),fr(L,"delete")}this.lines.splice(h,y)},collapse:function(h){h.push.apply(h,this.lines)},insertInner:function(h,y,x){this.height+=x,this.lines=this.lines.slice(0,h).concat(y).concat(this.lines.slice(h));for(var M=0;M<y.length;++M)y[M].parent=this},iterN:function(h,y,x){for(var M=h+y;h<M;++h)if(x(this.lines[h]))return!0}},wl.prototype={chunkSize:function(){return this.size},removeInner:function(h,y){this.size-=y;for(var x=0;x<this.children.length;++x){var M=this.children[x],L=M.chunkSize();if(h<L){var Y=Math.min(y,L-h),ce=M.height;if(M.removeInner(h,Y),this.height-=ce-M.height,L==Y&&(this.children.splice(x--,1),M.parent=null),0==(y-=Y))break;h=0}else h-=L}if(this.size-y<25&&(this.children.length>1||!(this.children[0]instanceof Yc))){var Ce=[];this.collapse(Ce),this.children=[new Yc(Ce)],this.children[0].parent=this}},collapse:function(h){for(var y=0;y<this.children.length;++y)this.children[y].collapse(h)},insertInner:function(h,y,x){this.size+=y.length,this.height+=x;for(var M=0;M<this.children.length;++M){var L=this.children[M],Y=L.chunkSize();if(h<=Y){if(L.insertInner(h,y,x),L.lines&&L.lines.length>50){for(var ce=L.lines.length%25+25,Ce=ce;Ce<L.lines.length;){var Ve=new Yc(L.lines.slice(Ce,Ce+=25));L.height-=Ve.height,this.children.splice(++M,0,Ve),Ve.parent=this}L.lines=L.lines.slice(0,ce),this.maybeSpill()}break}h-=Y}},maybeSpill:function(){if(!(this.children.length<=10)){var h=this;do{var x=new wl(h.children.splice(h.children.length-5,5));if(h.parent){h.size-=x.size,h.height-=x.height;var L=Zt(h.parent.children,h);h.parent.children.splice(L+1,0,x)}else{var M=new wl(h.children);M.parent=h,h.children=[M,x],h=M}x.parent=h.parent}while(h.children.length>10);h.parent.maybeSpill()}},iterN:function(h,y,x){for(var M=0;M<this.children.length;++M){var L=this.children[M],Y=L.chunkSize();if(h<Y){var ce=Math.min(y,Y-h);if(L.iterN(h,ce,x))return!0;if(0==(y-=ce))break;h=0}else h-=Y}}};var Sl=function(h,y,x){if(x)for(var M in x)x.hasOwnProperty(M)&&(this[M]=x[M]);this.doc=h,this.node=y};function Dl(h,y,x){zr(y)<(h.curOp&&h.curOp.scrollTop||h.doc.scrollTop)&&he(h,x)}Sl.prototype.clear=function(){var h=this.doc.cm,y=this.line.widgets,x=this.line,M=_r(x);if(null!=M&&y){for(var L=0;L<y.length;++L)y[L]==this&&y.splice(L--,1);y.length||(x.widgets=null);var Y=Qe(this);Hr(x,Math.max(0,x.height-Y)),h&&(ds(h,function(){Dl(h,x,-Y),ia(h,M,"widget")}),fr(h,"lineWidgetCleared",h,this,M))}},Sl.prototype.changed=function(){var h=this,y=this.height,x=this.doc.cm,M=this.line;this.height=null;var L=Qe(this)-y;!L||(Pr(this.doc,M)||Hr(M,M.height+L),x&&ds(x,function(){x.curOp.forceUpdate=!0,Dl(x,M,L),fr(x,"lineWidgetChanged",x,h,_r(M))}))},_i(Sl);var xu=0,za=function(h,y){this.lines=[],this.type=y,this.doc=h,this.id=++xu};function Sa(h,y,x,M,L){if(M&&M.shared)return function(h,y,x,M,L){(M=lt(M)).shared=!1;var Y=[Sa(h,y,x,M,L)],ce=Y[0],Ce=M.widgetNode;return hl(h,function(Ve){Ce&&(M.widgetNode=Ce.cloneNode(!0)),Y.push(Sa(Ve,zi(Ve,y),zi(Ve,x),M,L));for(var Ke=0;Ke<Ve.linked.length;++Ke)if(Ve.linked[Ke].isParent)return;ce=xe(Y)}),new rl(Y,ce)}(h,y,x,M,L);if(h.cm&&!h.cm.curOp)return Lo(h.cm,Sa)(h,y,x,M,L);var Y=new za(h,L),ce=Dn(y,x);if(M&&lt(M,Y,!1),ce>0||0==ce&&!1!==Y.clearWhenEmpty)return Y;if(Y.replacedWith&&(Y.collapsed=!0,Y.widgetNode=Ee("span",[Y.replacedWith],"CodeMirror-widget"),M.handleMouseEvents||Y.widgetNode.setAttribute("cm-ignore-events","true"),M.insertLeft&&(Y.widgetNode.insertLeft=!0)),Y.collapsed){if(zo(h,y.line,y,x,Y)||y.line!=x.line&&zo(h,x.line,y,x,Y))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ho=!0}Y.addToHistory&&No(h,{from:y,to:x,origin:"markText"},h.sel,NaN);var Ke,Ce=y.line,Ve=h.cm;if(h.iter(Ce,x.line+1,function(Xt){Ve&&Y.collapsed&&!Ve.options.lineWrapping&&Oo(Xt)==Ve.display.maxLine&&(Ke=!0),Y.collapsed&&Ce!=y.line&&Hr(Xt,0),function(h,y,x){var M=x&&window.WeakSet&&(x.markedSpans||(x.markedSpans=new WeakSet));M&&M.has(h.markedSpans)?h.markedSpans.push(y):(h.markedSpans=h.markedSpans?h.markedSpans.concat([y]):[y],M&&M.add(h.markedSpans)),y.marker.attachLine(h)}(Xt,new $a(Y,Ce==y.line?y.ch:null,Ce==x.line?x.ch:null),h.cm&&h.cm.curOp),++Ce}),Y.collapsed&&h.iter(y.line,x.line+1,function(Xt){Pr(h,Xt)&&Hr(Xt,0)}),Y.clearOnEnter&&mi(Y,"beforeCursorEnter",function(){return Y.clear()}),Y.readOnly&&(rs=!0,(h.history.done.length||h.history.undone.length)&&h.clearHistory()),Y.collapsed&&(Y.id=++xu,Y.atomic=!0),Ve){if(Ke&&(Ve.curOp.updateMaxLine=!0),Y.collapsed)ns(Ve,y.line,x.line+1);else if(Y.className||Y.startStyle||Y.endStyle||Y.css||Y.attributes||Y.title)for(var At=y.line;At<=x.line;At++)ia(Ve,At,"text");Y.atomic&&Sc(Ve.doc),fr(Ve,"markerAdded",Ve,Y)}return Y}za.prototype.clear=function(){if(!this.explicitlyCleared){var h=this.doc.cm,y=h&&!h.curOp;if(y&&Vo(h),Mi(this,"clear")){var x=this.find();x&&fr(this,"clear",x.from,x.to)}for(var M=null,L=null,Y=0;Y<this.lines.length;++Y){var ce=this.lines[Y],Ce=qo(ce.markedSpans,this);h&&!this.collapsed?ia(h,_r(ce),"text"):h&&(null!=Ce.to&&(L=_r(ce)),null!=Ce.from&&(M=_r(ce))),ce.markedSpans=ma(ce.markedSpans,Ce),null==Ce.from&&this.collapsed&&!Pr(this.doc,ce)&&h&&Hr(ce,ua(h.display))}if(h&&this.collapsed&&!h.options.lineWrapping)for(var Ve=0;Ve<this.lines.length;++Ve){var Ke=Oo(this.lines[Ve]),At=ca(Ke);At>h.display.maxLineLength&&(h.display.maxLine=Ke,h.display.maxLineLength=At,h.display.maxLineChanged=!0)}null!=M&&h&&this.collapsed&&ns(h,M,L+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,h&&Sc(h.doc)),h&&fr(h,"markerCleared",h,this,M,L),y&&el(h),this.parent&&this.parent.clear()}},za.prototype.find=function(h,y){null==h&&"bookmark"==this.type&&(h=1);for(var x,M,L=0;L<this.lines.length;++L){var Y=this.lines[L],ce=qo(Y.markedSpans,this);if(null!=ce.from&&(x=Vi(y?Y:_r(Y),ce.from),-1==h))return x;if(null!=ce.to&&(M=Vi(y?Y:_r(Y),ce.to),1==h))return M}return x&&{from:x,to:M}},za.prototype.changed=function(){var h=this,y=this.find(-1,!0),x=this,M=this.doc.cm;!y||!M||ds(M,function(){var L=y.line,Y=_r(y.line),ce=ar(M,Y);if(ce&&(xs(ce),M.curOp.selectionChanged=M.curOp.forceUpdate=!0),M.curOp.updateMaxLine=!0,!Pr(x.doc,L)&&null!=x.height){var Ce=x.height;x.height=null;var Ve=Qe(x)-Ce;Ve&&Hr(L,L.height+Ve)}fr(M,"markerChanged",M,h)})},za.prototype.attachLine=function(h){if(!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(!y.maybeHiddenMarkers||-1==Zt(y.maybeHiddenMarkers,this))&&(y.maybeUnhiddenMarkers||(y.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(h)},za.prototype.detachLine=function(h){if(this.lines.splice(Zt(this.lines,h),1),!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(y.maybeHiddenMarkers||(y.maybeHiddenMarkers=[])).push(this)}},_i(za);var rl=function(h,y){this.markers=h,this.primary=y;for(var x=0;x<h.length;++x)h[x].parent=this};function fa(h){return h.findMarks(Vi(h.first,0),h.clipPos(Vi(h.lastLine())),function(y){return y.parent})}function Ul(h){for(var y=function(M){var L=h[M],Y=[L.primary.doc];hl(L.primary.doc,function(Ve){return Y.push(Ve)});for(var ce=0;ce<L.markers.length;ce++){var Ce=L.markers[ce];-1==Zt(Y,Ce.doc)&&(Ce.parent=null,L.markers.splice(ce--,1))}},x=0;x<h.length;x++)y(x)}rl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var h=0;h<this.markers.length;++h)this.markers[h].clear();fr(this,"clear")}},rl.prototype.find=function(h,y){return this.primary.find(h,y)},_i(rl);var ld=0,as=function(h,y,x,M,L){if(!(this instanceof as))return new as(h,y,x,M,L);null==x&&(x=0),wl.call(this,[new Yc([new us("",null)])]),this.first=x,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=x;var Y=Vi(x,0);this.sel=rc(Y),this.history=new Ec(null),this.id=++ld,this.modeOption=y,this.lineSep=M,this.direction="rtl"==L?"rtl":"ltr",this.extend=!1,"string"==typeof h&&(h=this.splitLines(h)),Os(this,{from:Y,to:Y,text:h}),oa(this,rc(Y),Ct)};as.prototype=Rt(wl.prototype,{constructor:as,iter:function(h,y,x){x?this.iterN(h-this.first,y-h,x):this.iterN(this.first,this.first+this.size,h)},insert:function(h,y){for(var x=0,M=0;M<y.length;++M)x+=y[M].height;this.insertInner(h-this.first,y,x)},remove:function(h,y){this.removeInner(h-this.first,y)},getValue:function(h){var y=vr(this,this.first,this.first+this.size);return!1===h?y:y.join(h||this.lineSeparator())},setValue:qr(function(h){var y=Vi(this.first,0),x=this.first+this.size-1;wa(this,{from:y,to:Vi(x,Ri(this,x).text.length),text:this.splitLines(h),origin:"setValue",full:!0},!0),this.cm&&Q(this.cm,0,0),oa(this,rc(y),Ct)}),replaceRange:function(h,y,x,M){gl(this,h,y=zi(this,y),x=x?zi(this,x):y,M)},getRange:function(h,y,x){var M=Gn(this,zi(this,h),zi(this,y));return!1===x?M:M.join(""===x?"":x||this.lineSeparator())},getLine:function(h){var y=this.getLineHandle(h);return y&&y.text},getLineHandle:function(h){if(Qr(this,h))return Ri(this,h)},getLineNumber:function(h){return _r(h)},getLineHandleVisualStart:function(h){return"number"==typeof h&&(h=Ri(this,h)),Oo(h)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(h){return zi(this,h)},getCursor:function(h){var y=this.sel.primary();return null==h||"head"==h?y.head:"anchor"==h?y.anchor:"end"==h||"to"==h||!1===h?y.to():y.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qr(function(h,y,x){wc(this,zi(this,"number"==typeof h?Vi(h,y||0):h),null,x)}),setSelection:qr(function(h,y,x){wc(this,zi(this,h),zi(this,y||h),x)}),extendSelection:qr(function(h,y,x){fl(this,zi(this,h),y&&zi(this,y),x)}),extendSelections:qr(function(h,y){il(this,Yn(this,h),y)}),extendSelectionsBy:qr(function(h,y){il(this,Yn(this,pt(this.sel.ranges,h)),y)}),setSelections:qr(function(h,y,x){if(h.length){for(var M=[],L=0;L<h.length;L++)M[L]=new Gr(zi(this,h[L].anchor),zi(this,h[L].head||h[L].anchor));null==y&&(y=Math.min(h.length-1,this.sel.primIndex)),oa(this,Ta(this.cm,M,y),x)}}),addSelection:qr(function(h,y,x){var M=this.sel.ranges.slice(0);M.push(new Gr(zi(this,h),zi(this,y||h))),oa(this,Ta(this.cm,M,M.length-1),x)}),getSelection:function(h){for(var x,y=this.sel.ranges,M=0;M<y.length;M++){var L=Gn(this,y[M].from(),y[M].to());x=x?x.concat(L):L}return!1===h?x:x.join(h||this.lineSeparator())},getSelections:function(h){for(var y=[],x=this.sel.ranges,M=0;M<x.length;M++){var L=Gn(this,x[M].from(),x[M].to());!1!==h&&(L=L.join(h||this.lineSeparator())),y[M]=L}return y},replaceSelection:function(h,y,x){for(var M=[],L=0;L<this.sel.ranges.length;L++)M[L]=h;this.replaceSelections(M,y,x||"+input")},replaceSelections:qr(function(h,y,x){for(var M=[],L=this.sel,Y=0;Y<L.ranges.length;Y++){var ce=L.ranges[Y];M[Y]={from:ce.from(),to:ce.to(),text:this.splitLines(h[Y]),origin:x}}for(var Ce=y&&"end"!=y&&function(h,y,x){for(var M=[],L=Vi(h.first,0),Y=L,ce=0;ce<y.length;ce++){var Ce=y[ce],Ve=oc(Ce.from,L,Y),Ke=oc(Fl(Ce),L,Y);if(L=Ce.to,Y=Ke,"around"==x){var At=h.sel.ranges[ce],Xt=Dn(At.head,At.anchor)<0;M[ce]=new Gr(Xt?Ke:Ve,Xt?Ve:Ke)}else M[ce]=new Gr(Ve,Ve)}return new na(M,h.sel.primIndex)}(this,M,y),Ve=M.length-1;Ve>=0;Ve--)wa(this,M[Ve]);Ce?ru(this,Ce):this.cm&&te(this.cm)}),undo:qr(function(){Vl(this,"undo")}),redo:qr(function(){Vl(this,"redo")}),undoSelection:qr(function(){Vl(this,"undo",!0)}),redoSelection:qr(function(){Vl(this,"redo",!0)}),setExtending:function(h){this.extend=h},getExtending:function(){return this.extend},historySize:function(){for(var h=this.history,y=0,x=0,M=0;M<h.done.length;M++)h.done[M].ranges||++y;for(var L=0;L<h.undone.length;L++)h.undone[L].ranges||++x;return{undo:y,redo:x}},clearHistory:function(){var h=this;this.history=new Ec(this.history),hl(this,function(y){return y.history=h.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(h){return h&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(h){return this.history.generation==(h||this.cleanGeneration)},getHistory:function(){return{done:pl(this.history.done),undone:pl(this.history.undone)}},setHistory:function(h){var y=this.history=new Ec(this.history);y.done=pl(h.done.slice(0),null,!0),y.undone=pl(h.undone.slice(0),null,!0)},setGutterMarker:qr(function(h,y,x){return fc(this,h,"gutter",function(M){var L=M.gutterMarkers||(M.gutterMarkers={});return L[y]=x,!x&&nt(L)&&(M.gutterMarkers=null),!0})}),clearGutter:qr(function(h){var y=this;this.iter(function(x){x.gutterMarkers&&x.gutterMarkers[h]&&fc(y,x,"gutter",function(){return x.gutterMarkers[h]=null,nt(x.gutterMarkers)&&(x.gutterMarkers=null),!0})})}),lineInfo:function(h){var y;if("number"==typeof h){if(!(Qr(this,h)&&(y=h,h=Ri(this,h))))return null}else if(null==(y=_r(h)))return null;return{line:y,handle:h,text:h.text,gutterMarkers:h.gutterMarkers,textClass:h.textClass,bgClass:h.bgClass,wrapClass:h.wrapClass,widgets:h.widgets}},addLineClass:qr(function(h,y,x){return fc(this,h,"gutter"==y?"gutter":"class",function(M){var L="text"==y?"textClass":"background"==y?"bgClass":"gutter"==y?"gutterClass":"wrapClass";if(M[L]){if(ne(x).test(M[L]))return!1;M[L]+=" "+x}else M[L]=x;return!0})}),removeLineClass:qr(function(h,y,x){return fc(this,h,"gutter"==y?"gutter":"class",function(M){var L="text"==y?"textClass":"background"==y?"bgClass":"gutter"==y?"gutterClass":"wrapClass",Y=M[L];if(!Y)return!1;if(null==x)M[L]=null;else{var ce=Y.match(ne(x));if(!ce)return!1;var Ce=ce.index+ce[0].length;M[L]=Y.slice(0,ce.index)+(ce.index&&Ce!=Y.length?" ":"")+Y.slice(Ce)||null}return!0})}),addLineWidget:qr(function(h,y,x){return function(h,y,x,M){var L=new Sl(h,x,M),Y=h.cm;return Y&&L.noHScroll&&(Y.display.alignWidgets=!0),fc(h,y,"widget",function(ce){var Ce=ce.widgets||(ce.widgets=[]);if(null==L.insertAt?Ce.push(L):Ce.splice(Math.min(Ce.length,Math.max(0,L.insertAt)),0,L),L.line=ce,Y&&!Pr(h,ce)){var Ve=zr(ce)<h.scrollTop;Hr(ce,ce.height+Qe(L)),Ve&&he(Y,L.height),Y.curOp.forceUpdate=!0}return!0}),Y&&fr(Y,"lineWidgetAdded",Y,L,"number"==typeof y?y:_r(y)),L}(this,h,y,x)}),removeLineWidget:function(h){h.clear()},markText:function(h,y,x){return Sa(this,zi(this,h),zi(this,y),x,x&&x.type||"range")},setBookmark:function(h,y){var x={replacedWith:y&&(null==y.nodeType?y.widget:y),insertLeft:y&&y.insertLeft,clearWhenEmpty:!1,shared:y&&y.shared,handleMouseEvents:y&&y.handleMouseEvents};return Sa(this,h=zi(this,h),h,x,"bookmark")},findMarksAt:function(h){var y=[],x=Ri(this,(h=zi(this,h)).line).markedSpans;if(x)for(var M=0;M<x.length;++M){var L=x[M];(null==L.from||L.from<=h.ch)&&(null==L.to||L.to>=h.ch)&&y.push(L.marker.parent||L.marker)}return y},findMarks:function(h,y,x){h=zi(this,h),y=zi(this,y);var M=[],L=h.line;return this.iter(h.line,y.line+1,function(Y){var ce=Y.markedSpans;if(ce)for(var Ce=0;Ce<ce.length;Ce++){var Ve=ce[Ce];!(null!=Ve.to&&L==h.line&&h.ch>=Ve.to||null==Ve.from&&L!=h.line||null!=Ve.from&&L==y.line&&Ve.from>=y.ch)&&(!x||x(Ve.marker))&&M.push(Ve.marker.parent||Ve.marker)}++L}),M},getAllMarks:function(){var h=[];return this.iter(function(y){var x=y.markedSpans;if(x)for(var M=0;M<x.length;++M)null!=x[M].from&&h.push(x[M].marker)}),h},posFromIndex:function(h){var y,x=this.first,M=this.lineSeparator().length;return this.iter(function(L){var Y=L.text.length+M;if(Y>h)return y=h,!0;h-=Y,++x}),zi(this,Vi(x,y))},indexFromPos:function(h){var y=(h=zi(this,h)).ch;if(h.line<this.first||h.ch<0)return 0;var x=this.lineSeparator().length;return this.iter(this.first,h.line,function(M){y+=M.text.length+x}),y},copy:function(h){var y=new as(vr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return y.scrollTop=this.scrollTop,y.scrollLeft=this.scrollLeft,y.sel=this.sel,y.extend=!1,h&&(y.history.undoDepth=this.history.undoDepth,y.setHistory(this.getHistory())),y},linkedDoc:function(h){h||(h={});var y=this.first,x=this.first+this.size;null!=h.from&&h.from>y&&(y=h.from),null!=h.to&&h.to<x&&(x=h.to);var M=new as(vr(this,y,x),h.mode||this.modeOption,y,this.lineSep,this.direction);return h.sharedHist&&(M.history=this.history),(this.linked||(this.linked=[])).push({doc:M,sharedHist:h.sharedHist}),M.linked=[{doc:this,isParent:!0,sharedHist:h.sharedHist}],function(h,y){for(var x=0;x<y.length;x++){var M=y[x],L=M.find(),Y=h.clipPos(L.from),ce=h.clipPos(L.to);if(Dn(Y,ce)){var Ce=Sa(h,Y,ce,M.primary,M.primary.type);M.markers.push(Ce),Ce.parent=M}}}(M,fa(this)),M},unlinkDoc:function(h){if(h instanceof Wr&&(h=h.doc),this.linked)for(var y=0;y<this.linked.length;++y)if(this.linked[y].doc==h){this.linked.splice(y,1),h.unlinkDoc(this),Ul(fa(this));break}if(h.history==this.history){var M=[h.id];hl(h,function(L){return M.push(L.id)},!0),h.history=new Ec(null),h.history.done=pl(this.history.done,M),h.history.undone=pl(this.history.undone,M)}},iterLinkedDocs:function(h){hl(this,h)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(h){return this.lineSep?h.split(this.lineSep):nr(h)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:qr(function(h){"rtl"!=h&&(h="ltr"),h!=this.direction&&(this.direction=h,this.iter(function(y){return y.order=null}),this.cm&&function(h){ds(h,function(){ac(h),ns(h)})}(this.cm))})}),as.prototype.eachLine=as.prototype.iter;var xc=0;function me(h){var y=this;if(Dt(y),!Ci(y,h)&&!bt(y.display,h)){Bi(h),n&&(xc=+new Date);var x=dl(y,h,!0),M=h.dataTransfer.files;if(x&&!y.isReadOnly())if(M&&M.length&&window.FileReader&&window.File)for(var L=M.length,Y=Array(L),ce=0,Ce=function(){++ce==L&&Lo(y,function(){var ci={from:x=zi(y.doc,x),to:x,text:y.doc.splitLines(Y.filter(function(Pi){return null!=Pi}).join(y.doc.lineSeparator())),origin:"paste"};wa(y.doc,ci),ru(y.doc,rc(zi(y.doc,x),zi(y.doc,Fl(ci))))})()},Ve=function(ci,Pi){if(y.options.allowDropFileTypes&&-1==Zt(y.options.allowDropFileTypes,ci.type))Ce();else{var Xi=new FileReader;Xi.onerror=function(){return Ce()},Xi.onload=function(){var sn=Xi.result;/[\x00-\x08\x0e-\x1f]{2}/.test(sn)||(Y[Pi]=sn),Ce()},Xi.readAsText(ci)}},Ke=0;Ke<M.length;Ke++)Ve(M[Ke],Ke);else{if(y.state.draggingText&&y.doc.sel.contains(x)>-1)return y.state.draggingText(h),void setTimeout(function(){return y.display.input.focus()},20);try{var At=h.dataTransfer.getData("Text");if(At){var Xt;if(y.state.draggingText&&!y.state.draggingText.copy&&(Xt=y.listSelections()),Hl(y.doc,rc(x,x)),Xt)for(var fi=0;fi<Xt.length;++fi)gl(y.doc,"",Xt[fi].anchor,Xt[fi].head,"drag");y.replaceSelection(At,"around","paste"),y.display.input.focus()}}catch(ci){}}}}function Dt(h){h.display.dragCursor&&(h.display.lineSpace.removeChild(h.display.dragCursor),h.display.dragCursor=null)}function Vt(h){if(document.getElementsByClassName){for(var y=document.getElementsByClassName("CodeMirror"),x=[],M=0;M<y.length;M++){var L=y[M].CodeMirror;L&&x.push(L)}x.length&&x[0].operation(function(){for(var Y=0;Y<x.length;Y++)h(x[Y])})}}var hi=!1;function Qt(){hi||(function(){var h;mi(window,"resize",function(){null==h&&(h=setTimeout(function(){h=null,Vt(ki)},100))}),mi(window,"blur",function(){return Vt(Ia)})}(),hi=!0)}function ki(h){var y=h.display;y.cachedCharWidth=y.cachedTextHeight=y.cachedPaddingH=null,y.scrollbarsClipped=!1,h.setSize()}for(var Ii={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Wi=0;Wi<10;Wi++)Ii[Wi+48]=Ii[Wi+96]=String(Wi);for(var Qn=65;Qn<=90;Qn++)Ii[Qn]=String.fromCharCode(Qn);for(var Un=1;Un<=12;Un++)Ii[Un+111]=Ii[Un+63235]="F"+Un;var ir={};function Zo(h){var y=h.split(/-(?!$)/);h=y[y.length-1];for(var x,M,L,Y,ce=0;ce<y.length-1;ce++){var Ce=y[ce];if(/^(cmd|meta|m)$/i.test(Ce))Y=!0;else if(/^a(lt)?$/i.test(Ce))x=!0;else if(/^(c|ctrl|control)$/i.test(Ce))M=!0;else{if(!/^s(hift)?$/i.test(Ce))throw new Error("Unrecognized modifier name: "+Ce);L=!0}}return x&&(h="Alt-"+h),M&&(h="Ctrl-"+h),Y&&(h="Cmd-"+h),L&&(h="Shift-"+h),h}function Mo(h){var y={};for(var x in h)if(h.hasOwnProperty(x)){var M=h[x];if(/^(name|fallthrough|(de|at)tach)$/.test(x))continue;if("..."==M){delete h[x];continue}for(var L=pt(x.split(" "),Zo),Y=0;Y<L.length;Y++){var ce=void 0,Ce=void 0;Y==L.length-1?(Ce=L.join(" "),ce=M):(Ce=L.slice(0,Y+1).join(" "),ce="...");var Ve=y[Ce];if(Ve){if(Ve!=ce)throw new Error("Inconsistent bindings for "+Ce)}else y[Ce]=ce}delete h[x]}for(var Ke in y)h[Ke]=y[Ke];return h}function Zr(h,y,x,M){var L=(y=sa(y)).call?y.call(h,M):y[h];if(!1===L)return"nothing";if("..."===L)return"multi";if(null!=L&&x(L))return"handled";if(y.fallthrough){if("[object Array]"!=Object.prototype.toString.call(y.fallthrough))return Zr(h,y.fallthrough,x,M);for(var Y=0;Y<y.fallthrough.length;Y++){var ce=Zr(h,y.fallthrough[Y],x,M);if(ce)return ce}}}function ho(h){var y="string"==typeof h?h:Ii[h.keyCode];return"Ctrl"==y||"Alt"==y||"Shift"==y||"Mod"==y}function Go(h,y,x){var M=h;return y.altKey&&"Alt"!=M&&(h="Alt-"+h),(Te?y.metaKey:y.ctrlKey)&&"Ctrl"!=M&&(h="Ctrl-"+h),(Te?y.ctrlKey:y.metaKey)&&"Mod"!=M&&(h="Cmd-"+h),!x&&y.shiftKey&&"Shift"!=M&&(h="Shift-"+h),h}function po(h,y){if(B&&34==h.keyCode&&h.char)return!1;var x=Ii[h.keyCode];return null!=x&&!h.altGraphKey&&(3==h.keyCode&&h.code&&(x=h.code),Go(x,h,y))}function sa(h){return"string"==typeof h?ir[h]:h}function ys(h,y){for(var x=h.doc.sel.ranges,M=[],L=0;L<x.length;L++){for(var Y=y(x[L]);M.length&&Dn(Y.from,xe(M).to)<=0;){var ce=M.pop();if(Dn(ce.from,Y.from)<0){Y.from=ce.from;break}}M.push(Y)}ds(h,function(){for(var Ce=M.length-1;Ce>=0;Ce--)gl(h.doc,"",M[Ce].from,M[Ce].to,"+delete");te(h)})}function hs(h,y,x){var M=Ze(h.text,y+x,x);return M<0||M>h.text.length?null:M}function ml(h,y,x){var M=hs(h,y.ch,x);return null==M?null:new Vi(y.line,M,x<0?"after":"before")}function ou(h,y,x,M,L){if(h){"rtl"==y.doc.direction&&(L=-L);var Y=yi(x,y.doc.direction);if(Y){var Ke,ce=L<0?xe(Y):Y[0],Ve=L<0==(1==ce.level)?"after":"before";if(ce.level>0||"rtl"==y.doc.direction){var At=Dr(y,x),Xt=Yr(y,At,Ke=L<0?x.text.length-1:0).top;Ke=ut(function(fi){return Yr(y,At,fi).top==Xt},L<0==(1==ce.level)?ce.from:ce.to-1,Ke),"before"==Ve&&(Ke=hs(x,Ke,1))}else Ke=L<0?ce.to:ce.from;return new Vi(M,Ke,Ve)}}return new Vi(M,L<0?x.text.length:0,L<0?"before":"after")}ir.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ir.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ir.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ir.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ir.default=_e?ir.macDefault:ir.pcDefault;var ju={selectAll:zc,singleSelection:function(h){return h.setSelection(h.getCursor("anchor"),h.getCursor("head"),Ct)},killLine:function(h){return ys(h,function(y){if(y.empty()){var x=Ri(h.doc,y.head.line).text.length;return y.head.ch==x&&y.head.line<h.lastLine()?{from:y.head,to:Vi(y.head.line+1,0)}:{from:y.head,to:Vi(y.head.line,x)}}return{from:y.from(),to:y.to()}})},deleteLine:function(h){return ys(h,function(y){return{from:Vi(y.from().line,0),to:zi(h.doc,Vi(y.to().line+1,0))}})},delLineLeft:function(h){return ys(h,function(y){return{from:Vi(y.from().line,0),to:y.from()}})},delWrappedLineLeft:function(h){return ys(h,function(y){var x=h.charCoords(y.head,"div").top+5;return{from:h.coordsChar({left:0,top:x},"div"),to:y.from()}})},delWrappedLineRight:function(h){return ys(h,function(y){var x=h.charCoords(y.head,"div").top+5,M=h.coordsChar({left:h.display.lineDiv.offsetWidth+100,top:x},"div");return{from:y.from(),to:M}})},undo:function(h){return h.undo()},redo:function(h){return h.redo()},undoSelection:function(h){return h.undoSelection()},redoSelection:function(h){return h.redoSelection()},goDocStart:function(h){return h.extendSelection(Vi(h.firstLine(),0))},goDocEnd:function(h){return h.extendSelection(Vi(h.lastLine()))},goLineStart:function(h){return h.extendSelectionsBy(function(y){return Au(h,y.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(h){return h.extendSelectionsBy(function(y){return Rc(h,y.head)},{origin:"+move",bias:1})},goLineEnd:function(h){return h.extendSelectionsBy(function(y){return function(h,y){var x=Ri(h.doc,y),M=function(h){for(var y;y=Ko(h);)h=y.find(1,!0).line;return h}(x);return M!=x&&(y=_r(M)),ou(!0,h,x,y,-1)}(h,y.head.line)},{origin:"+move",bias:-1})},goLineRight:function(h){return h.extendSelectionsBy(function(y){var x=h.cursorCoords(y.head,"div").top+5;return h.coordsChar({left:h.display.lineDiv.offsetWidth+100,top:x},"div")},Be)},goLineLeft:function(h){return h.extendSelectionsBy(function(y){var x=h.cursorCoords(y.head,"div").top+5;return h.coordsChar({left:0,top:x},"div")},Be)},goLineLeftSmart:function(h){return h.extendSelectionsBy(function(y){var x=h.cursorCoords(y.head,"div").top+5,M=h.coordsChar({left:0,top:x},"div");return M.ch<h.getLine(M.line).search(/\S/)?Rc(h,y.head):M},Be)},goLineUp:function(h){return h.moveV(-1,"line")},goLineDown:function(h){return h.moveV(1,"line")},goPageUp:function(h){return h.moveV(-1,"page")},goPageDown:function(h){return h.moveV(1,"page")},goCharLeft:function(h){return h.moveH(-1,"char")},goCharRight:function(h){return h.moveH(1,"char")},goColumnLeft:function(h){return h.moveH(-1,"column")},goColumnRight:function(h){return h.moveH(1,"column")},goWordLeft:function(h){return h.moveH(-1,"word")},goGroupRight:function(h){return h.moveH(1,"group")},goGroupLeft:function(h){return h.moveH(-1,"group")},goWordRight:function(h){return h.moveH(1,"word")},delCharBefore:function(h){return h.deleteH(-1,"codepoint")},delCharAfter:function(h){return h.deleteH(1,"char")},delWordBefore:function(h){return h.deleteH(-1,"word")},delWordAfter:function(h){return h.deleteH(1,"word")},delGroupBefore:function(h){return h.deleteH(-1,"group")},delGroupAfter:function(h){return h.deleteH(1,"group")},indentAuto:function(h){return h.indentSelection("smart")},indentMore:function(h){return h.indentSelection("add")},indentLess:function(h){return h.indentSelection("subtract")},insertTab:function(h){return h.replaceSelection("\t")},insertSoftTab:function(h){for(var y=[],x=h.listSelections(),M=h.options.tabSize,L=0;L<x.length;L++){var Y=x[L].from(),ce=Bt(h.getLine(Y.line),Y.ch,M);y.push(_t(M-ce%M))}h.replaceSelections(y)},defaultTab:function(h){h.somethingSelected()?h.indentSelection("add"):h.execCommand("insertTab")},transposeChars:function(h){return ds(h,function(){for(var y=h.listSelections(),x=[],M=0;M<y.length;M++)if(y[M].empty()){var L=y[M].head,Y=Ri(h.doc,L.line).text;if(Y)if(L.ch==Y.length&&(L=new Vi(L.line,L.ch-1)),L.ch>0)L=new Vi(L.line,L.ch+1),h.replaceRange(Y.charAt(L.ch-1)+Y.charAt(L.ch-2),Vi(L.line,L.ch-2),L,"+transpose");else if(L.line>h.doc.first){var ce=Ri(h.doc,L.line-1).text;ce&&(L=new Vi(L.line,1),h.replaceRange(Y.charAt(0)+h.doc.lineSeparator()+ce.charAt(ce.length-1),Vi(L.line-1,ce.length-1),L,"+transpose"))}x.push(new Gr(L,L))}h.setSelections(x)})},newlineAndIndent:function(h){return ds(h,function(){for(var y=h.listSelections(),x=y.length-1;x>=0;x--)h.replaceRange(h.doc.lineSeparator(),y[x].anchor,y[x].head,"+input");y=h.listSelections();for(var M=0;M<y.length;M++)h.indentLine(y[M].from().line,null,!0);te(h)})},openLine:function(h){return h.replaceSelection("\n","start")},toggleOverwrite:function(h){return h.toggleOverwrite()}};function Au(h,y){var x=Ri(h.doc,y),M=Oo(x);return M!=x&&(y=_r(M)),ou(!0,h,M,y,1)}function Rc(h,y){var x=Au(h,y.line),M=Ri(h.doc,x.line),L=yi(M,h.doc.direction);if(!L||0==L[0].level){var Y=Math.max(x.ch,M.text.search(/\S/));return Vi(x.line,y.line==x.line&&y.ch<=Y&&y.ch?0:Y,x.sticky)}return x}function su(h,y,x){if("string"==typeof y&&!(y=ju[y]))return!1;h.display.input.ensurePolled();var M=h.display.shift,L=!1;try{h.isReadOnly()&&(h.state.suppressEdits=!0),x&&(h.display.shift=!1),L=y(h)!=ii}finally{h.display.shift=M,h.state.suppressEdits=!1}return L}var zu=new Pt;function Ou(h,y,x,M){var L=h.state.keySeq;if(L){if(ho(y))return"handled";if(/\'$/.test(y)?h.state.keySeq=null:zu.set(50,function(){h.state.keySeq==L&&(h.state.keySeq=null,h.display.input.reset())}),Yu(h,L+" "+y,x,M))return!0}return Yu(h,y,x,M)}function Yu(h,y,x,M){var L=function(h,y,x){for(var M=0;M<h.state.keyMaps.length;M++){var L=Zr(y,h.state.keyMaps[M],x,h);if(L)return L}return h.options.extraKeys&&Zr(y,h.options.extraKeys,x,h)||Zr(y,h.options.keyMap,x,h)}(h,y,M);return"multi"==L&&(h.state.keySeq=y),"handled"==L&&fr(h,"keyHandled",h,y,x),("handled"==L||"multi"==L)&&(Bi(x),zl(h)),!!L}function gc(h,y){var x=po(y,!0);return!!x&&(y.shiftKey&&!h.state.keySeq?Ou(h,"Shift-"+x,y,function(M){return su(h,M,!0)})||Ou(h,x,y,function(M){if("string"==typeof M?/^go[A-Z]/.test(M):M.motion)return su(h,M)}):Ou(h,x,y,function(M){return su(h,M)}))}var au=null;function Xc(h){var y=this;if(!(h.target&&h.target!=y.display.input.getField()||(y.curOp.focus=ht(),Ci(y,h)))){n&&a<11&&27==h.keyCode&&(h.returnValue=!1);var x=h.keyCode;y.display.shift=16==x||h.shiftKey;var M=gc(y,h);B&&(au=M?x:null,!M&&88==x&&!$t&&(_e?h.metaKey:h.ctrlKey)&&y.replaceSelection("",null,"cut")),E&&!_e&&!M&&46==x&&h.shiftKey&&!h.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==x&&!/\bCodeMirror-crosshair\b/.test(y.display.lineDiv.className)&&function(h){var y=h.display.lineDiv;function x(M){(18==M.keyCode||!M.altKey)&&(ge(y,"CodeMirror-crosshair"),wt(document,"keyup",x),wt(document,"mouseover",x))}Oe(y,"CodeMirror-crosshair"),mi(document,"keyup",x),mi(document,"mouseover",x)}(y)}}function Xu(h){16==h.keyCode&&(this.doc.sel.shift=!1),Ci(this,h)}function Td(h){var y=this;if(!(h.target&&h.target!=y.display.input.getField()||bt(y.display,h)||Ci(y,h)||h.ctrlKey&&!h.altKey||_e&&h.metaKey)){var x=h.keyCode,M=h.charCode;if(B&&x==au)return au=null,void Bi(h);if(!B||h.which&&!(h.which<10)||!gc(y,h)){var L=String.fromCharCode(null==M?x:M);"\b"!=L&&(function(h,y,x){return Ou(h,"'"+x+"'",y,function(M){return su(h,M,!0)})}(y,h,L)||y.display.input.onKeyPress(h))}}}var Lu,Kc,lu=function(h,y,x){this.time=h,this.pos=y,this.button=x};function Ku(h){var y=this,x=y.display;if(!(Ci(y,h)||x.activeTouch&&x.input.supportsTouch())){if(x.input.ensurePolled(),x.shift=h.shiftKey,bt(x,h))return void(d||(x.scroller.draggable=!1,setTimeout(function(){return x.scroller.draggable=!0},100)));if(!$c(y,h)){var M=dl(y,h),L=Pe(h),Y=M?function(h,y){var x=+new Date;return Kc&&Kc.compare(x,h,y)?(Lu=Kc=null,"triple"):Lu&&Lu.compare(x,h,y)?(Kc=new lu(x,h,y),Lu=null,"double"):(Lu=new lu(x,h,y),Kc=null,"single")}(M,L):"single";window.focus(),1==L&&y.state.selectingText&&y.state.selectingText(h),(!M||!function(h,y,x,M,L){var Y="Click";return"double"==M?Y="Double"+Y:"triple"==M&&(Y="Triple"+Y),Ou(h,Go(Y=(1==y?"Left":2==y?"Middle":"Right")+Y,L),L,function(ce){if("string"==typeof ce&&(ce=ju[ce]),!ce)return!1;var Ce=!1;try{h.isReadOnly()&&(h.state.suppressEdits=!0),Ce=ce(h,x)!=ii}finally{h.state.suppressEdits=!1}return Ce})}(y,L,M,Y,h))&&(1==L?M?function(h,y,x,M){n?setTimeout(vt(da,h),0):h.curOp.focus=ht();var ce,L=function(h,y,x){var M=h.getOption("configureMouse"),L=M?M(h,y,x):{};return null==L.unit&&(L.unit=(Le?x.shiftKey&&x.metaKey:x.altKey)?"rectangle":"single"==y?"char":"double"==y?"word":"line"),(null==L.extend||h.doc.extend)&&(L.extend=h.doc.extend||x.shiftKey),null==L.addNew&&(L.addNew=_e?x.metaKey:x.ctrlKey),null==L.moveOnDrag&&(L.moveOnDrag=!(_e?x.altKey:x.ctrlKey)),L}(h,x,M),Y=h.doc.sel;h.options.dragDrop&&at&&!h.isReadOnly()&&"single"==x&&(ce=Y.contains(y))>-1&&(Dn((ce=Y.ranges[ce]).from(),y)<0||y.xRel>0)&&(Dn(ce.to(),y)>0||y.xRel<0)?function(h,y,x,M){var L=h.display,Y=!1,ce=Lo(h,function(Ke){d&&(L.scroller.draggable=!1),h.state.draggingText=!1,h.state.delayingBlurEvent&&(h.hasFocus()?h.state.delayingBlurEvent=!1:Ua(h)),wt(L.wrapper.ownerDocument,"mouseup",ce),wt(L.wrapper.ownerDocument,"mousemove",Ce),wt(L.scroller,"dragstart",Ve),wt(L.scroller,"drop",ce),Y||(Bi(Ke),M.addNew||fl(h.doc,x,null,null,M.extend),d&&!z||n&&9==a?setTimeout(function(){L.wrapper.ownerDocument.body.focus({preventScroll:!0}),L.input.focus()},20):L.input.focus())}),Ce=function(Ke){Y=Y||Math.abs(y.clientX-Ke.clientX)+Math.abs(y.clientY-Ke.clientY)>=10},Ve=function(){return Y=!0};d&&(L.scroller.draggable=!0),h.state.draggingText=ce,ce.copy=!M.moveOnDrag,mi(L.wrapper.ownerDocument,"mouseup",ce),mi(L.wrapper.ownerDocument,"mousemove",Ce),mi(L.scroller,"dragstart",Ve),mi(L.scroller,"drop",ce),h.state.delayingBlurEvent=!0,setTimeout(function(){return L.input.focus()},20),L.scroller.dragDrop&&L.scroller.dragDrop()}(h,M,y,L):function(h,y,x,M){n&&Ua(h);var L=h.display,Y=h.doc;Bi(y);var ce,Ce,Ve=Y.sel,Ke=Ve.ranges;if(M.addNew&&!M.extend?(Ce=Y.sel.contains(x),ce=Ce>-1?Ke[Ce]:new Gr(x,x)):(ce=Y.sel.primary(),Ce=Y.sel.primIndex),"rectangle"==M.unit)M.addNew||(ce=new Gr(x,x)),x=dl(h,y,!0,!0),Ce=-1;else{var At=Pu(h,x,M.unit);ce=M.extend?Jo(ce,At.anchor,At.head,M.extend):At}M.addNew?-1==Ce?(Ce=Ke.length,oa(Y,Ta(h,Ke.concat([ce]),Ce),{scroll:!1,origin:"*mouse"})):Ke.length>1&&Ke[Ce].empty()&&"char"==M.unit&&!M.extend?(oa(Y,Ta(h,Ke.slice(0,Ce).concat(Ke.slice(Ce+1)),0),{scroll:!1,origin:"*mouse"}),Ve=Y.sel):hc(Y,Ce,ce,gi):(Ce=0,oa(Y,new na([ce],0),gi),Ve=Y.sel);var Xt=x;function fi(hn){if(0!=Dn(Xt,hn))if(Xt=hn,"rectangle"==M.unit){for(var Rn=[],Jn=h.options.tabSize,$n=Bt(Ri(Y,x.line).text,x.ch,Jn),br=Bt(Ri(Y,hn.line).text,hn.ch,Jn),fo=Math.min($n,br),Es=Math.max($n,br),Wo=Math.min(x.line,hn.line),Da=Math.min(h.lastLine(),Math.max(x.line,hn.line));Wo<=Da;Wo++){var Pa=Ri(Y,Wo).text,Cs=Tt(Pa,fo,Jn);fo==Es?Rn.push(new Gr(Vi(Wo,Cs),Vi(Wo,Cs))):Pa.length>Cs&&Rn.push(new Gr(Vi(Wo,Cs),Vi(Wo,Tt(Pa,Es,Jn))))}Rn.length||Rn.push(new Gr(x,x)),oa(Y,Ta(h,Ve.ranges.slice(0,Ce).concat(Rn),Ce),{origin:"*mouse",scroll:!1}),h.scrollIntoView(hn)}else{var T,Xr=ce,ks=Pu(h,hn,M.unit),ls=Xr.anchor;Dn(ks.anchor,ls)>0?(T=ks.head,ls=Ai(Xr.from(),ks.anchor)):(T=ks.anchor,ls=Ht(Xr.to(),ks.head));var F=Ve.ranges.slice(0);F[Ce]=function(h,y){var x=y.anchor,M=y.head,L=Ri(h.doc,x.line);if(0==Dn(x,M)&&x.sticky==M.sticky)return y;var Y=yi(L);if(!Y)return y;var ce=Ni(Y,x.ch,x.sticky),Ce=Y[ce];if(Ce.from!=x.ch&&Ce.to!=x.ch)return y;var Ke,Ve=ce+(Ce.from==x.ch==(1!=Ce.level)?0:1);if(0==Ve||Ve==Y.length)return y;if(M.line!=x.line)Ke=(M.line-x.line)*("ltr"==h.doc.direction?1:-1)>0;else{var At=Ni(Y,M.ch,M.sticky),Xt=At-ce||(M.ch-x.ch)*(1==Ce.level?-1:1);Ke=At==Ve-1||At==Ve?Xt<0:Xt>0}var fi=Y[Ve+(Ke?-1:0)],ci=Ke==(1==fi.level),Pi=ci?fi.from:fi.to,Xi=ci?"after":"before";return x.ch==Pi&&x.sticky==Xi?y:new Gr(new Vi(x.line,Pi,Xi),M)}(h,new Gr(zi(Y,ls),T)),oa(Y,Ta(h,F,Ce),gi)}}var ci=L.wrapper.getBoundingClientRect(),Pi=0;function Xi(hn){var Rn=++Pi,Jn=dl(h,hn,!0,"rectangle"==M.unit);if(Jn)if(0!=Dn(Jn,Xt)){h.curOp.focus=ht(),fi(Jn);var $n=Cl(L,Y);(Jn.line>=$n.to||Jn.line<$n.from)&&setTimeout(Lo(h,function(){Pi==Rn&&Xi(hn)}),150)}else{var br=hn.clientY<ci.top?-20:hn.clientY>ci.bottom?20:0;br&&setTimeout(Lo(h,function(){Pi==Rn&&(L.scroller.scrollTop+=br,Xi(hn))}),50)}}function sn(hn){h.state.selectingText=!1,Pi=1/0,hn&&(Bi(hn),L.input.focus()),wt(L.wrapper.ownerDocument,"mousemove",_n),wt(L.wrapper.ownerDocument,"mouseup",Sn),Y.history.lastSelOrigin=null}var _n=Lo(h,function(hn){0!==hn.buttons&&Pe(hn)?Xi(hn):sn(hn)}),Sn=Lo(h,sn);h.state.selectingText=Sn,mi(L.wrapper.ownerDocument,"mousemove",_n),mi(L.wrapper.ownerDocument,"mouseup",Sn)}(h,M,y,L)}(y,M,Y,h):le(h)==x.scroller&&Bi(h):2==L?(M&&fl(y.doc,M),setTimeout(function(){return x.input.focus()},20)):3==L&&(ye?y.display.input.onContextMenu(h):Ua(y)))}}}function Pu(h,y,x){if("char"==x)return new Gr(y,y);if("word"==x)return h.findWordAt(y);if("line"==x)return new Gr(Vi(y.line,0),zi(h.doc,Vi(y.line+1,0)));var M=x(h,y);return new Gr(M.from,M.to)}function ga(h,y,x,M){var L,Y;if(y.touches)L=y.touches[0].clientX,Y=y.touches[0].clientY;else try{L=y.clientX,Y=y.clientY}catch(fi){return!1}if(L>=Math.floor(h.display.gutters.getBoundingClientRect().right))return!1;M&&Bi(y);var ce=h.display,Ce=ce.lineDiv.getBoundingClientRect();if(Y>Ce.bottom||!Mi(h,x))return ft(y);Y-=Ce.top-ce.viewOffset;for(var Ve=0;Ve<h.display.gutterSpecs.length;++Ve){var Ke=ce.gutters.childNodes[Ve];if(Ke&&Ke.getBoundingClientRect().right>=L)return Ot(h,x,h,xr(h.doc,Y),h.display.gutterSpecs[Ve].className,y),ft(y)}}function $c(h,y){return ga(h,y,"gutterClick",!0)}function Gl(h,y){bt(h.display,y)||function(h,y){return!!Mi(h,"gutterContextMenu")&&ga(h,y,"gutterContextMenu",!1)}(h,y)||Ci(h,y,"contextmenu")||ye||h.display.input.onContextMenu(y)}function aa(h){h.display.wrapper.className=h.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+h.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Rs(h)}lu.prototype.compare=function(h,y,x){return this.time+400>h&&0==Dn(y,this.pos)&&x==this.button};var Ml={toString:function(){return"CodeMirror.Init"}},cu={},uu={};function du(h,y,x){if(!y!=!(x&&x!=Ml)){var L=h.display.dragFunctions,Y=y?mi:wt;Y(h.display.scroller,"dragstart",L.start),Y(h.display.scroller,"dragenter",L.enter),Y(h.display.scroller,"dragover",L.over),Y(h.display.scroller,"dragleave",L.leave),Y(h.display.scroller,"drop",L.drop)}}function pd(h){h.options.lineWrapping?(Oe(h.display.wrapper,"CodeMirror-wrap"),h.display.sizer.style.minWidth="",h.display.sizerWidth=null):(ge(h.display.wrapper,"CodeMirror-wrap"),bl(h)),Ol(h),ns(h),Rs(h),setTimeout(function(){return Jr(h)},100)}function Wr(h,y){var x=this;if(!(this instanceof Wr))return new Wr(h,y);this.options=y=y?lt(y):{},lt(cu,y,!1);var M=y.value;"string"==typeof M?M=new as(M,y.mode,null,y.lineSeparator,y.direction):y.mode&&(M.modeOption=y.mode),this.doc=M;var L=new Wr.inputStyles[y.inputStyle](this),Y=this.display=new ha(h,M,L,y);for(var ce in Y.wrapper.CodeMirror=this,aa(this),y.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Xs(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Pt,keySeq:null,specialChars:null},y.autofocus&&!Ge&&Y.input.focus(),n&&a<11&&setTimeout(function(){return x.display.input.reset(!0)},20),function(h){var y=h.display;mi(y.scroller,"mousedown",Lo(h,Ku)),mi(y.scroller,"dblclick",n&&a<11?Lo(h,function(Ve){if(!Ci(h,Ve)){var Ke=dl(h,Ve);if(Ke&&!$c(h,Ve)&&!bt(h.display,Ve)){Bi(Ve);var At=h.findWordAt(Ke);fl(h.doc,At.anchor,At.head)}}}):function(Ve){return Ci(h,Ve)||Bi(Ve)}),mi(y.scroller,"contextmenu",function(Ve){return Gl(h,Ve)}),mi(y.input.getField(),"contextmenu",function(Ve){y.scroller.contains(Ve.target)||Gl(h,Ve)});var x,M={end:0};function L(){y.activeTouch&&(x=setTimeout(function(){return y.activeTouch=null},1e3),(M=y.activeTouch).end=+new Date)}function Y(Ve){if(1!=Ve.touches.length)return!1;var Ke=Ve.touches[0];return Ke.radiusX<=1&&Ke.radiusY<=1}function ce(Ve,Ke){if(null==Ke.left)return!0;var At=Ke.left-Ve.left,Xt=Ke.top-Ve.top;return At*At+Xt*Xt>400}mi(y.scroller,"touchstart",function(Ve){if(!Ci(h,Ve)&&!Y(Ve)&&!$c(h,Ve)){y.input.ensurePolled(),clearTimeout(x);var Ke=+new Date;y.activeTouch={start:Ke,moved:!1,prev:Ke-M.end<=300?M:null},1==Ve.touches.length&&(y.activeTouch.left=Ve.touches[0].pageX,y.activeTouch.top=Ve.touches[0].pageY)}}),mi(y.scroller,"touchmove",function(){y.activeTouch&&(y.activeTouch.moved=!0)}),mi(y.scroller,"touchend",function(Ve){var Ke=y.activeTouch;if(Ke&&!bt(y,Ve)&&null!=Ke.left&&!Ke.moved&&new Date-Ke.start<300){var Xt,At=h.coordsChar(y.activeTouch,"page");Xt=!Ke.prev||ce(Ke,Ke.prev)?new Gr(At,At):!Ke.prev.prev||ce(Ke,Ke.prev.prev)?h.findWordAt(At):new Gr(Vi(At.line,0),zi(h.doc,Vi(At.line+1,0))),h.setSelection(Xt.anchor,Xt.head),h.focus(),Bi(Ve)}L()}),mi(y.scroller,"touchcancel",L),mi(y.scroller,"scroll",function(){y.scroller.clientHeight&&(Ut(h,y.scroller.scrollTop),Li(h,y.scroller.scrollLeft,!0),Ot(h,"scroll",h))}),mi(y.scroller,"mousewheel",function(Ve){return iu(h,Ve)}),mi(y.scroller,"DOMMouseScroll",function(Ve){return iu(h,Ve)}),mi(y.wrapper,"scroll",function(){return y.wrapper.scrollTop=y.wrapper.scrollLeft=0}),y.dragFunctions={enter:function(Ve){Ci(h,Ve)||Ae(Ve)},over:function(Ve){Ci(h,Ve)||(function(h,y){var x=dl(h,y);if(x){var M=document.createDocumentFragment();Va(h,x,M),h.display.dragCursor||(h.display.dragCursor=Se("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),h.display.lineSpace.insertBefore(h.display.dragCursor,h.display.cursorDiv)),He(h.display.dragCursor,M)}}(h,Ve),Ae(Ve))},start:function(Ve){return function(h,y){if(n&&(!h.state.draggingText||+new Date-xc<100))Ae(y);else if(!Ci(h,y)&&!bt(h.display,y)&&(y.dataTransfer.setData("Text",h.getSelection()),y.dataTransfer.effectAllowed="copyMove",y.dataTransfer.setDragImage&&!z)){var x=Se("img",null,null,"position: fixed; left: 0; top: 0;");x.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",B&&(x.width=x.height=1,h.display.wrapper.appendChild(x),x._top=x.offsetTop),y.dataTransfer.setDragImage(x,0,0),B&&x.parentNode.removeChild(x)}}(h,Ve)},drop:Lo(h,me),leave:function(Ve){Ci(h,Ve)||Dt(h)}};var Ce=y.input.getField();mi(Ce,"keyup",function(Ve){return Xu.call(h,Ve)}),mi(Ce,"keydown",Lo(h,Xc)),mi(Ce,"keypress",Lo(h,Td)),mi(Ce,"focus",function(Ve){return Ys(h,Ve)}),mi(Ce,"blur",function(Ve){return Ia(h,Ve)})}(this),Qt(),Vo(this),this.curOp.forceUpdate=!0,Ir(this,M),y.autofocus&&!Ge||this.hasFocus()?setTimeout(function(){x.hasFocus()&&!x.state.focused&&Ys(x)},20):Ia(this),uu)uu.hasOwnProperty(ce)&&uu[ce](this,y[ce],Ml);yc(this),y.finishInit&&y.finishInit(this);for(var Ce=0;Ce<Jc.length;++Ce)Jc[Ce](this);el(this),d&&y.lineWrapping&&"optimizelegibility"==getComputedStyle(Y.lineDiv).textRendering&&(Y.lineDiv.style.textRendering="auto")}Wr.defaults=cu,Wr.optionHandlers=uu;var Jc=[];function Ic(h,y,x,M){var Y,L=h.doc;null==x&&(x="add"),"smart"==x&&(L.mode.indent?Y=ro(h,y).state:x="prev");var ce=h.options.tabSize,Ce=Ri(L,y),Ve=Bt(Ce.text,null,ce);Ce.stateAfter&&(Ce.stateAfter=null);var At,Ke=Ce.text.match(/^\s*/)[0];if(M||/\S/.test(Ce.text)){if("smart"==x&&((At=L.mode.indent(Y,Ce.text.slice(Ke.length),Ce.text))==ii||At>150)){if(!M)return;x="prev"}}else At=0,x="not";"prev"==x?At=y>L.first?Bt(Ri(L,y-1).text,null,ce):0:"add"==x?At=Ve+h.options.indentUnit:"subtract"==x?At=Ve-h.options.indentUnit:"number"==typeof x&&(At=Ve+x),At=Math.max(0,At);var Xt="",fi=0;if(h.options.indentWithTabs)for(var ci=Math.floor(At/ce);ci;--ci)fi+=ce,Xt+="\t";if(fi<At&&(Xt+=_t(At-fi)),Xt!=Ke)return gl(L,Xt,Vi(y,0),Vi(y,Ke.length),"+input"),Ce.stateAfter=null,!0;for(var Pi=0;Pi<L.sel.ranges.length;Pi++){var Xi=L.sel.ranges[Pi];if(Xi.head.line==y&&Xi.head.ch<Ke.length){var sn=Vi(y,Ke.length);hc(L,Pi,new Gr(sn,sn));break}}}Wr.defineInitHook=function(h){return Jc.push(h)};var _l=null;function hu(h){_l=h}function Zc(h,y,x,M,L){var Y=h.doc;h.display.shift=!1,M||(M=Y.sel);var ce=+new Date-200,Ce="paste"==L||h.state.pasteIncoming>ce,Ve=nr(y),Ke=null;if(Ce&&M.ranges.length>1)if(_l&&_l.text.join("\n")==y){if(M.ranges.length%_l.text.length==0){Ke=[];for(var At=0;At<_l.text.length;At++)Ke.push(Y.splitLines(_l.text[At]))}}else Ve.length==M.ranges.length&&h.options.pasteLinesPerSelection&&(Ke=pt(Ve,function(_n){return[_n]}));for(var Xt=h.curOp.updateInput,fi=M.ranges.length-1;fi>=0;fi--){var ci=M.ranges[fi],Pi=ci.from(),Xi=ci.to();ci.empty()&&(x&&x>0?Pi=Vi(Pi.line,Pi.ch-x):h.state.overwrite&&!Ce?Xi=Vi(Xi.line,Math.min(Ri(Y,Xi.line).text.length,Xi.ch+xe(Ve).length)):Ce&&_l&&_l.lineWise&&_l.text.join("\n")==Ve.join("\n")&&(Pi=Xi=Vi(Pi.line,0)));var sn={from:Pi,to:Xi,text:Ke?Ke[fi%Ke.length]:Ve,origin:L||(Ce?"paste":h.state.cutIncoming>ce?"cut":"+input")};wa(h.doc,sn),fr(h,"inputRead",h,sn)}y&&!Ce&&gd(h,y),te(h),h.curOp.updateInput<2&&(h.curOp.updateInput=Xt),h.curOp.typing=!0,h.state.pasteIncoming=h.state.cutIncoming=-1}function Nu(h,y){var x=h.clipboardData&&h.clipboardData.getData("Text");if(x)return h.preventDefault(),!y.isReadOnly()&&!y.options.disableInput&&ds(y,function(){return Zc(y,x,0,null,"paste")}),!0}function gd(h,y){if(h.options.electricChars&&h.options.smartIndent)for(var x=h.doc.sel,M=x.ranges.length-1;M>=0;M--){var L=x.ranges[M];if(!(L.head.ch>100||M&&x.ranges[M-1].head.line==L.head.line)){var Y=h.getModeAt(L.head),ce=!1;if(Y.electricChars){for(var Ce=0;Ce<Y.electricChars.length;Ce++)if(y.indexOf(Y.electricChars.charAt(Ce))>-1){ce=Ic(h,L.head.line,"smart");break}}else Y.electricInput&&Y.electricInput.test(Ri(h.doc,L.head.line).text.slice(0,L.head.ch))&&(ce=Ic(h,L.head.line,"smart"));ce&&fr(h,"electricInput",h,L.head.line)}}}function xl(h){for(var y=[],x=[],M=0;M<h.doc.sel.ranges.length;M++){var L=h.doc.sel.ranges[M].head.line,Y={anchor:Vi(L,0),head:Vi(L+1,0)};x.push(Y),y.push(h.getRange(Y.anchor,Y.head))}return{text:y,ranges:x}}function pu(h,y,x,M){h.setAttribute("autocorrect",x?"":"off"),h.setAttribute("autocapitalize",M?"":"off"),h.setAttribute("spellcheck",!!y)}function Oc(){var h=Se("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),y=Se("div",[h],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return d?h.style.width="1000px":h.setAttribute("wrap","off"),se&&(h.style.border="1px solid black"),pu(h),y}function Zl(h,y,x,M,L){var Y=y,ce=x,Ce=Ri(h,y.line),Ve=L&&"rtl"==h.direction?-x:x;function At(Sn){var hn;if("codepoint"==M){var Rn=Ce.text.charCodeAt(y.ch+(x>0?0:-1));hn=isNaN(Rn)?null:new Vi(y.line,Math.max(0,Math.min(Ce.text.length,y.ch+x*((x>0?Rn>=55296&&Rn<56320:Rn>=56320&&Rn<57343)?2:1))),-x)}else hn=L?function(h,y,x,M){var L=yi(y,h.doc.direction);if(!L)return ml(y,x,M);x.ch>=y.text.length?(x.ch=y.text.length,x.sticky="before"):x.ch<=0&&(x.ch=0,x.sticky="after");var Y=Ni(L,x.ch,x.sticky),ce=L[Y];if("ltr"==h.doc.direction&&ce.level%2==0&&(M>0?ce.to>x.ch:ce.from<x.ch))return ml(y,x,M);var Ve,Ce=function(_n,Sn){return hs(y,_n instanceof Vi?_n.ch:_n,Sn)},Ke=function(_n){return h.options.lineWrapping?(Ve=Ve||Dr(h,y),Ar(h,y,Ve,_n)):{begin:0,end:y.text.length}},At=Ke("before"==x.sticky?Ce(x,-1):x.ch);if("rtl"==h.doc.direction||1==ce.level){var Xt=1==ce.level==M<0,fi=Ce(x,Xt?1:-1);if(null!=fi&&(Xt?fi<=ce.to&&fi<=At.end:fi>=ce.from&&fi>=At.begin))return new Vi(x.line,fi,Xt?"before":"after")}var Pi=function(_n,Sn,hn){for(;_n>=0&&_n<L.length;_n+=Sn){var Jn=L[_n],$n=Sn>0==(1!=Jn.level),br=$n?hn.begin:Ce(hn.end,-1);if(Jn.from<=br&&br<Jn.to||(br=$n?Jn.from:Ce(Jn.to,-1),hn.begin<=br&&br<hn.end))return fo=br,$n?new Vi(x.line,Ce(fo,1),"before"):new Vi(x.line,fo,"after")}var fo},Xi=Pi(Y+M,M,At);if(Xi)return Xi;var sn=M>0?At.end:Ce(At.begin,-1);return null==sn||M>0&&sn==y.text.length||!(Xi=Pi(M>0?0:L.length-1,M,Ke(sn)))?null:Xi}(h.cm,Ce,y,x):ml(Ce,y,x);if(null==hn){if(Sn||!function(){var Sn=y.line+Ve;return!(Sn<h.first||Sn>=h.first+h.size)&&(y=new Vi(Sn,y.ch,y.sticky),Ce=Ri(h,Sn))}())return!1;y=ou(L,h.cm,Ce,y.line,Ve)}else y=hn;return!0}if("char"==M||"codepoint"==M)At();else if("column"==M)At(!0);else if("word"==M||"group"==M)for(var Xt=null,fi="group"==M,ci=h.cm&&h.cm.getHelper(y,"wordChars"),Pi=!0;!(x<0)||At(!Pi);Pi=!1){var Xi=Ce.text.charAt(y.ch)||"\n",sn=Lt(Xi,ci)?"w":fi&&"\n"==Xi?"n":!fi||/\s/.test(Xi)?null:"p";if(fi&&!Pi&&!sn&&(sn="s"),Xt&&Xt!=sn){x<0&&(x=1,At(),y.sticky="after");break}if(sn&&(Xt=sn),x>0&&!At(!Pi))break}var _n=jc(h,y,Y,ce,!0);return Wn(Y,_n)&&(_n.hitSide=!0),_n}function fu(h,y,x,M){var ce,Ke,L=h.doc,Y=y.left;if("page"==M){var Ce=Math.min(h.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),Ve=Math.max(Ce-.5*ua(h.display),3);ce=(x>0?y.bottom:y.top)+x*Ve}else"line"==M&&(ce=x>0?y.bottom+3:y.top-3);for(;(Ke=Cr(h,Y,ce)).outside;){if(x<0?ce<=0:ce>=L.height){Ke.hitSide=!0;break}ce+=5*x}return Ke}var So=function(h){this.cm=h,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Pt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Zu(h,y){var x=ar(h,y.line);if(!x||x.hidden)return null;var M=Ri(h.doc,y.line),L=tr(x,M,y.line),Y=yi(M,h.doc.direction),ce="left";Y&&(ce=Ni(Y,y.ch)%2?"right":"left");var Ve=ko(L.map,y.ch,ce);return Ve.offset="right"==Ve.collapse?Ve.end:Ve.start,Ve}function Qc(h,y){return y&&(h.bad=!0),h}function Fu(h,y,x){var M;if(y==h.display.lineDiv){if(!(M=h.display.lineDiv.childNodes[x]))return Qc(h.clipPos(Vi(h.display.viewTo-1)),!0);y=null,x=0}else for(M=y;;M=M.parentNode){if(!M||M==h.display.lineDiv)return null;if(M.parentNode&&M.parentNode==h.display.lineDiv)break}for(var L=0;L<h.display.view.length;L++){var Y=h.display.view[L];if(Y.node==M)return gu(Y,y,x)}}function gu(h,y,x){var M=h.text.firstChild,L=!1;if(!y||!ie(M,y))return Qc(Vi(_r(h.line),0),!0);if(y==M&&(L=!0,y=M.childNodes[x],x=0,!y)){var Y=h.rest?xe(h.rest):h.line;return Qc(Vi(_r(Y),Y.text.length),L)}var ce=3==y.nodeType?y:null,Ce=y;for(!ce&&1==y.childNodes.length&&3==y.firstChild.nodeType&&(ce=y.firstChild,x&&(x=ce.nodeValue.length));Ce.parentNode!=M;)Ce=Ce.parentNode;var Ve=h.measure,Ke=Ve.maps;function At(sn,_n,Sn){for(var hn=-1;hn<(Ke?Ke.length:0);hn++)for(var Rn=hn<0?Ve.map:Ke[hn],Jn=0;Jn<Rn.length;Jn+=3){var $n=Rn[Jn+2];if($n==sn||$n==_n){var br=_r(hn<0?h.line:h.rest[hn]),fo=Rn[Jn]+Sn;return(Sn<0||$n!=sn)&&(fo=Rn[Jn+(Sn?1:0)]),Vi(br,fo)}}}var Xt=At(ce,Ce,x);if(Xt)return Qc(Xt,L);for(var fi=Ce.nextSibling,ci=ce?ce.nodeValue.length-x:0;fi;fi=fi.nextSibling){if(Xt=At(fi,fi.firstChild,0))return Qc(Vi(Xt.line,Xt.ch-ci),L);ci+=fi.textContent.length}for(var Pi=Ce.previousSibling,Xi=x;Pi;Pi=Pi.previousSibling){if(Xt=At(Pi,Pi.firstChild,-1))return Qc(Vi(Xt.line,Xt.ch+Xi),L);Xi+=Pi.textContent.length}}So.prototype.init=function(h){var y=this,x=this,M=x.cm,L=x.div=h.lineDiv;function Y(Ce){for(var Ve=Ce.target;Ve;Ve=Ve.parentNode){if(Ve==L)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Ve.className))break}return!1}function ce(Ce){if(Y(Ce)&&!Ci(M,Ce)){if(M.somethingSelected())hu({lineWise:!1,text:M.getSelections()}),"cut"==Ce.type&&M.replaceSelection("",null,"cut");else{if(!M.options.lineWiseCopyCut)return;var Ve=xl(M);hu({lineWise:!0,text:Ve.text}),"cut"==Ce.type&&M.operation(function(){M.setSelections(Ve.ranges,0,Ct),M.replaceSelection("",null,"cut")})}if(Ce.clipboardData){Ce.clipboardData.clearData();var Ke=_l.text.join("\n");if(Ce.clipboardData.setData("Text",Ke),Ce.clipboardData.getData("Text")==Ke)return void Ce.preventDefault()}var At=Oc(),Xt=At.firstChild;M.display.lineSpace.insertBefore(At,M.display.lineSpace.firstChild),Xt.value=_l.text.join("\n");var fi=ht();dt(Xt),setTimeout(function(){M.display.lineSpace.removeChild(At),fi.focus(),fi==L&&x.showPrimarySelection()},50)}}L.contentEditable=!0,pu(L,M.options.spellcheck,M.options.autocorrect,M.options.autocapitalize),mi(L,"paste",function(Ce){!Y(Ce)||Ci(M,Ce)||Nu(Ce,M)||a<=11&&setTimeout(Lo(M,function(){return y.updateFromDOM()}),20)}),mi(L,"compositionstart",function(Ce){y.composing={data:Ce.data,done:!1}}),mi(L,"compositionupdate",function(Ce){y.composing||(y.composing={data:Ce.data,done:!1})}),mi(L,"compositionend",function(Ce){y.composing&&(Ce.data!=y.composing.data&&y.readFromDOMSoon(),y.composing.done=!0)}),mi(L,"touchstart",function(){return x.forceCompositionEnd()}),mi(L,"input",function(){y.composing||y.readFromDOMSoon()}),mi(L,"copy",ce),mi(L,"cut",ce)},So.prototype.screenReaderLabelChanged=function(h){h?this.div.setAttribute("aria-label",h):this.div.removeAttribute("aria-label")},So.prototype.prepareSelection=function(){var h=jl(this.cm,!1);return h.focus=ht()==this.div,h},So.prototype.showSelection=function(h,y){!h||!this.cm.display.view.length||((h.focus||y)&&this.showPrimarySelection(),this.showMultipleSelections(h))},So.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},So.prototype.showPrimarySelection=function(){var h=this.getSelection(),y=this.cm,x=y.doc.sel.primary(),M=x.from(),L=x.to();if(y.display.viewTo==y.display.viewFrom||M.line>=y.display.viewTo||L.line<y.display.viewFrom)h.removeAllRanges();else{var Y=Fu(y,h.anchorNode,h.anchorOffset),ce=Fu(y,h.focusNode,h.focusOffset);if(!Y||Y.bad||!ce||ce.bad||0!=Dn(Ai(Y,ce),M)||0!=Dn(Ht(Y,ce),L)){var Ce=y.display.view,Ve=M.line>=y.display.viewFrom&&Zu(y,M)||{node:Ce[0].measure.map[2],offset:0},Ke=L.line<y.display.viewTo&&Zu(y,L);if(!Ke){var At=Ce[Ce.length-1].measure,Xt=At.maps?At.maps[At.maps.length-1]:At.map;Ke={node:Xt[Xt.length-1],offset:Xt[Xt.length-2]-Xt[Xt.length-3]}}if(!Ve||!Ke)return void h.removeAllRanges();var ci,fi=h.rangeCount&&h.getRangeAt(0);try{ci=ue(Ve.node,Ve.offset,Ke.offset,Ke.node)}catch(Pi){}ci&&(!E&&y.state.focused?(h.collapse(Ve.node,Ve.offset),ci.collapsed||(h.removeAllRanges(),h.addRange(ci))):(h.removeAllRanges(),h.addRange(ci)),fi&&null==h.anchorNode?h.addRange(fi):E&&this.startGracePeriod()),this.rememberSelection()}}},So.prototype.startGracePeriod=function(){var h=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){h.gracePeriod=!1,h.selectionChanged()&&h.cm.operation(function(){return h.cm.curOp.selectionChanged=!0})},20)},So.prototype.showMultipleSelections=function(h){He(this.cm.display.cursorDiv,h.cursors),He(this.cm.display.selectionDiv,h.selection)},So.prototype.rememberSelection=function(){var h=this.getSelection();this.lastAnchorNode=h.anchorNode,this.lastAnchorOffset=h.anchorOffset,this.lastFocusNode=h.focusNode,this.lastFocusOffset=h.focusOffset},So.prototype.selectionInEditor=function(){var h=this.getSelection();if(!h.rangeCount)return!1;var y=h.getRangeAt(0).commonAncestorContainer;return ie(this.div,y)},So.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||ht()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},So.prototype.blur=function(){this.div.blur()},So.prototype.getField=function(){return this.div},So.prototype.supportsTouch=function(){return!0},So.prototype.receivedFocus=function(){var h=this,y=this;this.selectionInEditor()?setTimeout(function(){return h.pollSelection()},20):ds(this.cm,function(){return y.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function x(){y.cm.state.focused&&(y.pollSelection(),y.polling.set(y.cm.options.pollInterval,x))})},So.prototype.selectionChanged=function(){var h=this.getSelection();return h.anchorNode!=this.lastAnchorNode||h.anchorOffset!=this.lastAnchorOffset||h.focusNode!=this.lastFocusNode||h.focusOffset!=this.lastFocusOffset},So.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var h=this.getSelection(),y=this.cm;if(Ie&&D&&this.cm.display.gutterSpecs.length&&function(h){for(var y=h;y;y=y.parentNode)if(/CodeMirror-gutter-wrapper/.test(y.className))return!0;return!1}(h.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var x=Fu(y,h.anchorNode,h.anchorOffset),M=Fu(y,h.focusNode,h.focusOffset);x&&M&&ds(y,function(){oa(y.doc,rc(x,M),Ct),(x.bad||M.bad)&&(y.curOp.selectionChanged=!0)})}}},So.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var Y,ce,Ce,h=this.cm,y=h.display,x=h.doc.sel.primary(),M=x.from(),L=x.to();if(0==M.ch&&M.line>h.firstLine()&&(M=Vi(M.line-1,Ri(h.doc,M.line-1).length)),L.ch==Ri(h.doc,L.line).text.length&&L.line<h.lastLine()&&(L=Vi(L.line+1,0)),M.line<y.viewFrom||L.line>y.viewTo-1)return!1;M.line==y.viewFrom||0==(Y=vs(h,M.line))?(ce=_r(y.view[0].line),Ce=y.view[0].node):(ce=_r(y.view[Y].line),Ce=y.view[Y-1].node.nextSibling);var Ke,At,Ve=vs(h,L.line);if(Ve==y.view.length-1?(Ke=y.viewTo-1,At=y.lineDiv.lastChild):(Ke=_r(y.view[Ve+1].line)-1,At=y.view[Ve+1].node.previousSibling),!Ce)return!1;for(var Xt=h.doc.splitLines(function(h,y,x,M,L){var Y="",ce=!1,Ce=h.doc.lineSeparator(),Ve=!1;function At(){ce&&(Y+=Ce,Ve&&(Y+=Ce),ce=Ve=!1)}function Xt(ci){ci&&(At(),Y+=ci)}function fi(ci){if(1==ci.nodeType){var Pi=ci.getAttribute("cm-text");if(Pi)return void Xt(Pi);var sn,Xi=ci.getAttribute("cm-marker");if(Xi){var _n=h.findMarks(Vi(M,0),Vi(L+1,0),function(ci){return function(Pi){return Pi.id==ci}}(+Xi));return void(_n.length&&(sn=_n[0].find(0))&&Xt(Gn(h.doc,sn.from,sn.to).join(Ce)))}if("false"==ci.getAttribute("contenteditable"))return;var Sn=/^(pre|div|p|li|table|br)$/i.test(ci.nodeName);if(!/^br$/i.test(ci.nodeName)&&0==ci.textContent.length)return;Sn&&At();for(var hn=0;hn<ci.childNodes.length;hn++)fi(ci.childNodes[hn]);/^(pre|p)$/i.test(ci.nodeName)&&(Ve=!0),Sn&&(ce=!0)}else 3==ci.nodeType&&Xt(ci.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;fi(y),y!=x;)y=y.nextSibling,Ve=!1;return Y}(h,Ce,At,ce,Ke)),fi=Gn(h.doc,Vi(ce,0),Vi(Ke,Ri(h.doc,Ke).text.length));Xt.length>1&&fi.length>1;)if(xe(Xt)==xe(fi))Xt.pop(),fi.pop(),Ke--;else{if(Xt[0]!=fi[0])break;Xt.shift(),fi.shift(),ce++}for(var ci=0,Pi=0,Xi=Xt[0],sn=fi[0],_n=Math.min(Xi.length,sn.length);ci<_n&&Xi.charCodeAt(ci)==sn.charCodeAt(ci);)++ci;for(var Sn=xe(Xt),hn=xe(fi),Rn=Math.min(Sn.length-(1==Xt.length?ci:0),hn.length-(1==fi.length?ci:0));Pi<Rn&&Sn.charCodeAt(Sn.length-Pi-1)==hn.charCodeAt(hn.length-Pi-1);)++Pi;if(1==Xt.length&&1==fi.length&&ce==M.line)for(;ci&&ci>M.ch&&Sn.charCodeAt(Sn.length-Pi-1)==hn.charCodeAt(hn.length-Pi-1);)ci--,Pi++;Xt[Xt.length-1]=Sn.slice(0,Sn.length-Pi).replace(/^\u200b+/,""),Xt[0]=Xt[0].slice(ci).replace(/\u200b+$/,"");var Jn=Vi(ce,ci),$n=Vi(Ke,fi.length?xe(fi).length-Pi:0);return Xt.length>1||Xt[0]||Dn(Jn,$n)?(gl(h.doc,Xt,Jn,$n,"+input"),!0):void 0},So.prototype.ensurePolled=function(){this.forceCompositionEnd()},So.prototype.reset=function(){this.forceCompositionEnd()},So.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},So.prototype.readFromDOMSoon=function(){var h=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(h.readDOMTimeout=null,h.composing){if(!h.composing.done)return;h.composing=null}h.updateFromDOM()},80))},So.prototype.updateFromDOM=function(){var h=this;(this.cm.isReadOnly()||!this.pollContent())&&ds(this.cm,function(){return ns(h.cm)})},So.prototype.setUneditable=function(h){h.contentEditable="false"},So.prototype.onKeyPress=function(h){0==h.charCode||this.composing||(h.preventDefault(),this.cm.isReadOnly()||Lo(this.cm,Zc)(this.cm,String.fromCharCode(null==h.charCode?h.keyCode:h.charCode),0))},So.prototype.readOnlyChanged=function(h){this.div.contentEditable=String("nocursor"!=h)},So.prototype.onContextMenu=function(){},So.prototype.resetPosition=function(){},So.prototype.needsContentAttribute=!0;var vo=function(h){this.cm=h,this.prevInput="",this.pollingFast=!1,this.polling=new Pt,this.hasSelection=!1,this.composing=null};vo.prototype.init=function(h){var y=this,x=this,M=this.cm;this.createField(h);var L=this.textarea;function Y(ce){if(!Ci(M,ce)){if(M.somethingSelected())hu({lineWise:!1,text:M.getSelections()});else{if(!M.options.lineWiseCopyCut)return;var Ce=xl(M);hu({lineWise:!0,text:Ce.text}),"cut"==ce.type?M.setSelections(Ce.ranges,null,Ct):(x.prevInput="",L.value=Ce.text.join("\n"),dt(L))}"cut"==ce.type&&(M.state.cutIncoming=+new Date)}}h.wrapper.insertBefore(this.wrapper,h.wrapper.firstChild),se&&(L.style.width="0px"),mi(L,"input",function(){n&&a>=9&&y.hasSelection&&(y.hasSelection=null),x.poll()}),mi(L,"paste",function(ce){Ci(M,ce)||Nu(ce,M)||(M.state.pasteIncoming=+new Date,x.fastPoll())}),mi(L,"cut",Y),mi(L,"copy",Y),mi(h.scroller,"paste",function(ce){if(!bt(h,ce)&&!Ci(M,ce)){if(!L.dispatchEvent)return M.state.pasteIncoming=+new Date,void x.focus();var Ce=new Event("paste");Ce.clipboardData=ce.clipboardData,L.dispatchEvent(Ce)}}),mi(h.lineSpace,"selectstart",function(ce){bt(h,ce)||Bi(ce)}),mi(L,"compositionstart",function(){var ce=M.getCursor("from");x.composing&&x.composing.range.clear(),x.composing={start:ce,range:M.markText(ce,M.getCursor("to"),{className:"CodeMirror-composing"})}}),mi(L,"compositionend",function(){x.composing&&(x.poll(),x.composing.range.clear(),x.composing=null)})},vo.prototype.createField=function(h){this.wrapper=Oc(),this.textarea=this.wrapper.firstChild},vo.prototype.screenReaderLabelChanged=function(h){h?this.textarea.setAttribute("aria-label",h):this.textarea.removeAttribute("aria-label")},vo.prototype.prepareSelection=function(){var h=this.cm,y=h.display,x=h.doc,M=jl(h);if(h.options.moveInputWithCursor){var L=On(h,x.sel.primary().head,"div"),Y=y.wrapper.getBoundingClientRect(),ce=y.lineDiv.getBoundingClientRect();M.teTop=Math.max(0,Math.min(y.wrapper.clientHeight-10,L.top+ce.top-Y.top)),M.teLeft=Math.max(0,Math.min(y.wrapper.clientWidth-10,L.left+ce.left-Y.left))}return M},vo.prototype.showSelection=function(h){var x=this.cm.display;He(x.cursorDiv,h.cursors),He(x.selectionDiv,h.selection),null!=h.teTop&&(this.wrapper.style.top=h.teTop+"px",this.wrapper.style.left=h.teLeft+"px")},vo.prototype.reset=function(h){if(!this.contextMenuPending&&!this.composing){var y=this.cm;if(y.somethingSelected()){this.prevInput="";var x=y.getSelection();this.textarea.value=x,y.state.focused&&dt(this.textarea),n&&a>=9&&(this.hasSelection=x)}else h||(this.prevInput=this.textarea.value="",n&&a>=9&&(this.hasSelection=null))}},vo.prototype.getField=function(){return this.textarea},vo.prototype.supportsTouch=function(){return!1},vo.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Ge||ht()!=this.textarea))try{this.textarea.focus()}catch(h){}},vo.prototype.blur=function(){this.textarea.blur()},vo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},vo.prototype.receivedFocus=function(){this.slowPoll()},vo.prototype.slowPoll=function(){var h=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){h.poll(),h.cm.state.focused&&h.slowPoll()})},vo.prototype.fastPoll=function(){var h=!1,y=this;y.pollingFast=!0,y.polling.set(20,function x(){y.poll()||h?(y.pollingFast=!1,y.slowPoll()):(h=!0,y.polling.set(60,x))})},vo.prototype.poll=function(){var h=this,y=this.cm,x=this.textarea,M=this.prevInput;if(this.contextMenuPending||!y.state.focused||li(x)&&!M&&!this.composing||y.isReadOnly()||y.options.disableInput||y.state.keySeq)return!1;var L=x.value;if(L==M&&!y.somethingSelected())return!1;if(n&&a>=9&&this.hasSelection===L||_e&&/[\uf700-\uf7ff]/.test(L))return y.display.input.reset(),!1;if(y.doc.sel==y.display.selForContextMenu){var Y=L.charCodeAt(0);if(8203==Y&&!M&&(M="\u200b"),8666==Y)return this.reset(),this.cm.execCommand("undo")}for(var ce=0,Ce=Math.min(M.length,L.length);ce<Ce&&M.charCodeAt(ce)==L.charCodeAt(ce);)++ce;return ds(y,function(){Zc(y,L.slice(ce),M.length-ce,null,h.composing?"*compose":null),L.length>1e3||L.indexOf("\n")>-1?x.value=h.prevInput="":h.prevInput=L,h.composing&&(h.composing.range.clear(),h.composing.range=y.markText(h.composing.start,y.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},vo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},vo.prototype.onKeyPress=function(){n&&a>=9&&(this.hasSelection=null),this.fastPoll()},vo.prototype.onContextMenu=function(h){var y=this,x=y.cm,M=x.display,L=y.textarea;y.contextMenuPending&&y.contextMenuPending();var Y=dl(x,h),ce=M.scroller.scrollTop;if(Y&&!B){x.options.resetSelectionOnContextMenu&&-1==x.doc.sel.contains(Y)&&Lo(x,oa)(x.doc,rc(Y),Ct);var Xt,Ve=L.style.cssText,Ke=y.wrapper.style.cssText,At=y.wrapper.offsetParent.getBoundingClientRect();if(y.wrapper.style.cssText="position: static",L.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(h.clientY-At.top-5)+"px; left: "+(h.clientX-At.left-5)+"px;\n      z-index: 1000; background: "+(n?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",d&&(Xt=window.scrollY),M.input.focus(),d&&window.scrollTo(null,Xt),M.input.reset(),x.somethingSelected()||(L.value=y.prevInput=" "),y.contextMenuPending=ci,M.selForContextMenu=x.doc.sel,clearTimeout(M.detectingSelectAll),n&&a>=9&&fi(),ye){Ae(h);var Pi=function(){wt(window,"mouseup",Pi),setTimeout(ci,20)};mi(window,"mouseup",Pi)}else setTimeout(ci,50)}function fi(){if(null!=L.selectionStart){var Xi=x.somethingSelected(),sn="\u200b"+(Xi?L.value:"");L.value="\u21da",L.value=sn,y.prevInput=Xi?"":"\u200b",L.selectionStart=1,L.selectionEnd=sn.length,M.selForContextMenu=x.doc.sel}}function ci(){if(y.contextMenuPending==ci&&(y.contextMenuPending=!1,y.wrapper.style.cssText=Ke,L.style.cssText=Ve,n&&a<9&&M.scrollbars.setScrollTop(M.scroller.scrollTop=ce),null!=L.selectionStart)){(!n||n&&a<9)&&fi();var Xi=0,sn=function(){M.selForContextMenu==x.doc.sel&&0==L.selectionStart&&L.selectionEnd>0&&"\u200b"==y.prevInput?Lo(x,zc)(x):Xi++<10?M.detectingSelectAll=setTimeout(sn,500):(M.selForContextMenu=null,M.input.reset())};M.detectingSelectAll=setTimeout(sn,200)}}},vo.prototype.readOnlyChanged=function(h){h||this.reset(),this.textarea.disabled="nocursor"==h,this.textarea.readOnly=!!h},vo.prototype.setUneditable=function(){},vo.prototype.needsContentAttribute=!1,function(h){var y=h.optionHandlers;function x(M,L,Y,ce){h.defaults[M]=L,Y&&(y[M]=ce?function(Ce,Ve,Ke){Ke!=Ml&&Y(Ce,Ve,Ke)}:Y)}h.defineOption=x,h.Init=Ml,x("value","",function(M,L){return M.setValue(L)},!0),x("mode",null,function(M,L){M.doc.modeOption=L,La(M)},!0),x("indentUnit",2,La,!0),x("indentWithTabs",!1),x("smartIndent",!0),x("tabSize",4,function(M){Bl(M),Rs(M),ns(M)},!0),x("lineSeparator",null,function(M,L){if(M.doc.lineSep=L,L){var Y=[],ce=M.doc.first;M.doc.iter(function(Ve){for(var Ke=0;;){var At=Ve.text.indexOf(L,Ke);if(-1==At)break;Ke=At+L.length,Y.push(Vi(ce,At))}ce++});for(var Ce=Y.length-1;Ce>=0;Ce--)gl(M.doc,L,Y[Ce],Vi(Y[Ce].line,Y[Ce].ch+L.length))}}),x("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(M,L,Y){M.state.specialChars=new RegExp(L.source+(L.test("\t")?"":"|\t"),"g"),Y!=Ml&&M.refresh()}),x("specialCharPlaceholder",Re,function(M){return M.refresh()},!0),x("electricChars",!0),x("inputStyle",Ge?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),x("spellcheck",!1,function(M,L){return M.getInputField().spellcheck=L},!0),x("autocorrect",!1,function(M,L){return M.getInputField().autocorrect=L},!0),x("autocapitalize",!1,function(M,L){return M.getInputField().autocapitalize=L},!0),x("rtlMoveVisually",!We),x("wholeLineUpdateBefore",!0),x("theme","default",function(M){aa(M),Ca(M)},!0),x("keyMap","default",function(M,L,Y){var ce=sa(L),Ce=Y!=Ml&&sa(Y);Ce&&Ce.detach&&Ce.detach(M,ce),ce.attach&&ce.attach(M,Ce||null)}),x("extraKeys",null),x("configureMouse",null),x("lineWrapping",!1,pd,!0),x("gutters",[],function(M,L){M.display.gutterSpecs=nc(L,M.options.lineNumbers),Ca(M)},!0),x("fixedGutter",!0,function(M,L){M.display.gutters.style.left=L?As(M.display)+"px":"0",M.refresh()},!0),x("coverGutterNextToScrollbar",!1,function(M){return Jr(M)},!0),x("scrollbarStyle","native",function(M){Xs(M),Jr(M),M.display.scrollbars.setScrollTop(M.doc.scrollTop),M.display.scrollbars.setScrollLeft(M.doc.scrollLeft)},!0),x("lineNumbers",!1,function(M,L){M.display.gutterSpecs=nc(M.options.gutters,L),Ca(M)},!0),x("firstLineNumber",1,Ca,!0),x("lineNumberFormatter",function(M){return M},Ca,!0),x("showCursorWhenSelecting",!1,kl,!0),x("resetSelectionOnContextMenu",!0),x("lineWiseCopyCut",!0),x("pasteLinesPerSelection",!0),x("selectionsMayTouch",!1),x("readOnly",!1,function(M,L){"nocursor"==L&&(Ia(M),M.display.input.blur()),M.display.input.readOnlyChanged(L)}),x("screenReaderLabel",null,function(M,L){M.display.input.screenReaderLabelChanged(L=""===L?null:L)}),x("disableInput",!1,function(M,L){L||M.display.input.reset()},!0),x("dragDrop",!0,du),x("allowDropFileTypes",null),x("cursorBlinkRate",530),x("cursorScrollMargin",0),x("cursorHeight",1,kl,!0),x("singleCursorHeightPerLine",!0,kl,!0),x("workTime",100),x("workDelay",100),x("flattenSpans",!0,Bl,!0),x("addModeClass",!1,Bl,!0),x("pollInterval",100),x("undoDepth",200,function(M,L){return M.doc.history.undoDepth=L}),x("historyEventDelay",1250),x("viewportMargin",10,function(M){return M.refresh()},!0),x("maxHighlightLength",1e4,Bl,!0),x("moveInputWithCursor",!0,function(M,L){L||M.display.input.resetPosition()}),x("tabindex",null,function(M,L){return M.display.input.getField().tabIndex=L||""}),x("autofocus",null),x("direction","ltr",function(M,L){return M.doc.setDirection(L)},!0),x("phrases",null)}(Wr),function(h){var y=h.optionHandlers,x=h.helpers={};h.prototype={constructor:h,focus:function(){window.focus(),this.display.input.focus()},setOption:function(M,L){var Y=this.options,ce=Y[M];Y[M]==L&&"mode"!=M||(Y[M]=L,y.hasOwnProperty(M)&&Lo(this,y[M])(this,L,ce),Ot(this,"optionChange",this,M))},getOption:function(M){return this.options[M]},getDoc:function(){return this.doc},addKeyMap:function(M,L){this.state.keyMaps[L?"push":"unshift"](sa(M))},removeKeyMap:function(M){for(var L=this.state.keyMaps,Y=0;Y<L.length;++Y)if(L[Y]==M||L[Y].name==M)return L.splice(Y,1),!0},addOverlay:Po(function(M,L){var Y=M.token?M:h.getMode(this.options,M);if(Y.startState)throw new Error("Overlays may not be stateful.");(function(h,y,x){for(var M=0,L=x(y);M<h.length&&x(h[M])<=L;)M++;h.splice(M,0,y)})(this.state.overlays,{mode:Y,modeSpec:M,opaque:L&&L.opaque,priority:L&&L.priority||0},function(ce){return ce.priority}),this.state.modeGen++,ns(this)}),removeOverlay:Po(function(M){for(var L=this.state.overlays,Y=0;Y<L.length;++Y){var ce=L[Y].modeSpec;if(ce==M||"string"==typeof M&&ce.name==M)return L.splice(Y,1),this.state.modeGen++,void ns(this)}}),indentLine:Po(function(M,L,Y){"string"!=typeof L&&"number"!=typeof L&&(L=null==L?this.options.smartIndent?"smart":"prev":L?"add":"subtract"),Qr(this.doc,M)&&Ic(this,M,L,Y)}),indentSelection:Po(function(M){for(var L=this.doc.sel.ranges,Y=-1,ce=0;ce<L.length;ce++){var Ce=L[ce];if(Ce.empty())Ce.head.line>Y&&(Ic(this,Ce.head.line,M,!0),Y=Ce.head.line,ce==this.doc.sel.primIndex&&te(this));else{var Ve=Ce.from(),Ke=Ce.to(),At=Math.max(Y,Ve.line);Y=Math.min(this.lastLine(),Ke.line-(Ke.ch?0:1))+1;for(var Xt=At;Xt<Y;++Xt)Ic(this,Xt,M);var fi=this.doc.sel.ranges;0==Ve.ch&&L.length==fi.length&&fi[ce].from().ch>0&&hc(this.doc,ce,new Gr(Ve,fi[ce].to()),Ct)}}}),getTokenAt:function(M,L){return $r(this,M,L)},getLineTokens:function(M,L){return $r(this,Vi(M),L,!0)},getTokenTypeAt:function(M){M=zi(this.doc,M);var Ve,L=Yo(this,Ri(this.doc,M.line)),Y=0,ce=(L.length-1)/2,Ce=M.ch;if(0==Ce)Ve=L[2];else for(;;){var Ke=Y+ce>>1;if((Ke?L[2*Ke-1]:0)>=Ce)ce=Ke;else{if(!(L[2*Ke+1]<Ce)){Ve=L[2*Ke+2];break}Y=Ke+1}}var At=Ve?Ve.indexOf("overlay "):-1;return At<0?Ve:0==At?null:Ve.slice(0,At-1)},getModeAt:function(M){var L=this.doc.mode;return L.innerMode?h.innerMode(L,this.getTokenAt(M).state).mode:L},getHelper:function(M,L){return this.getHelpers(M,L)[0]},getHelpers:function(M,L){var Y=[];if(!x.hasOwnProperty(L))return Y;var ce=x[L],Ce=this.getModeAt(M);if("string"==typeof Ce[L])ce[Ce[L]]&&Y.push(ce[Ce[L]]);else if(Ce[L])for(var Ve=0;Ve<Ce[L].length;Ve++){var Ke=ce[Ce[L][Ve]];Ke&&Y.push(Ke)}else Ce.helperType&&ce[Ce.helperType]?Y.push(ce[Ce.helperType]):ce[Ce.name]&&Y.push(ce[Ce.name]);for(var At=0;At<ce._global.length;At++){var Xt=ce._global[At];Xt.pred(Ce,this)&&-1==Zt(Y,Xt.val)&&Y.push(Xt.val)}return Y},getStateAfter:function(M,L){var Y=this.doc;return ro(this,(M=Ki(Y,null==M?Y.first+Y.size-1:M))+1,L).state},cursorCoords:function(M,L){var ce=this.doc.sel.primary();return On(this,null==M?ce.head:"object"==typeof M?zi(this.doc,M):M?ce.from():ce.to(),L||"page")},charCoords:function(M,L){return xn(this,zi(this.doc,M),L||"page")},coordsChar:function(M,L){return Cr(this,(M=Ja(this,M,L||"page")).left,M.top)},lineAtHeight:function(M,L){return M=Ja(this,{top:M,left:0},L||"page").top,xr(this.doc,M+this.display.viewOffset)},heightAtLine:function(M,L,Y){var Ce,ce=!1;if("number"==typeof M){var Ve=this.doc.first+this.doc.size-1;M<this.doc.first?M=this.doc.first:M>Ve&&(M=Ve,ce=!0),Ce=Ri(this.doc,M)}else Ce=M;return co(this,Ce,{top:0,left:0},L||"page",Y||ce).top+(ce?this.doc.height-zr(Ce):0)},defaultTextHeight:function(){return ua(this.display)},defaultCharWidth:function(){return _s(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(M,L,Y,ce,Ce){var Ve=this.display,Ke=(M=On(this,zi(this.doc,M))).bottom,At=M.left;if(L.style.position="absolute",L.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(L),Ve.sizer.appendChild(L),"over"==ce)Ke=M.top;else if("above"==ce||"near"==ce){var Xt=Math.max(Ve.wrapper.clientHeight,this.doc.height),fi=Math.max(Ve.sizer.clientWidth,Ve.lineSpace.clientWidth);("above"==ce||M.bottom+L.offsetHeight>Xt)&&M.top>L.offsetHeight?Ke=M.top-L.offsetHeight:M.bottom+L.offsetHeight<=Xt&&(Ke=M.bottom),At+L.offsetWidth>fi&&(At=fi-L.offsetWidth)}L.style.top=Ke+"px",L.style.left=L.style.right="","right"==Ce?(At=Ve.sizer.clientWidth-L.offsetWidth,L.style.right="0px"):("left"==Ce?At=0:"middle"==Ce&&(At=(Ve.sizer.clientWidth-L.offsetWidth)/2),L.style.left=At+"px"),Y&&function(h,y){var x=Vc(h,y);null!=x.scrollTop&&Ut(h,x.scrollTop),null!=x.scrollLeft&&Li(h,x.scrollLeft)}(this,{left:At,top:Ke,right:At+L.offsetWidth,bottom:Ke+L.offsetHeight})},triggerOnKeyDown:Po(Xc),triggerOnKeyPress:Po(Td),triggerOnKeyUp:Xu,triggerOnMouseDown:Po(Ku),execCommand:function(M){if(ju.hasOwnProperty(M))return ju[M].call(null,this)},triggerElectric:Po(function(M){gd(this,M)}),findPosH:function(M,L,Y,ce){var Ce=1;L<0&&(Ce=-1,L=-L);for(var Ve=zi(this.doc,M),Ke=0;Ke<L&&!(Ve=Zl(this.doc,Ve,Ce,Y,ce)).hitSide;++Ke);return Ve},moveH:Po(function(M,L){var Y=this;this.extendSelectionsBy(function(ce){return Y.display.shift||Y.doc.extend||ce.empty()?Zl(Y.doc,ce.head,M,L,Y.options.rtlMoveVisually):M<0?ce.from():ce.to()},Be)}),deleteH:Po(function(M,L){var ce=this.doc;this.doc.sel.somethingSelected()?ce.replaceSelection("",null,"+delete"):ys(this,function(Ce){var Ve=Zl(ce,Ce.head,M,L,!1);return M<0?{from:Ve,to:Ce.head}:{from:Ce.head,to:Ve}})}),findPosV:function(M,L,Y,ce){var Ce=1,Ve=ce;L<0&&(Ce=-1,L=-L);for(var Ke=zi(this.doc,M),At=0;At<L;++At){var Xt=On(this,Ke,"div");if(null==Ve?Ve=Xt.left:Xt.left=Ve,(Ke=fu(this,Xt,Ce,Y)).hitSide)break}return Ke},moveV:Po(function(M,L){var Y=this,ce=this.doc,Ce=[],Ve=!this.display.shift&&!ce.extend&&ce.sel.somethingSelected();if(ce.extendSelectionsBy(function(At){if(Ve)return M<0?At.from():At.to();var Xt=On(Y,At.head,"div");null!=At.goalColumn&&(Xt.left=At.goalColumn),Ce.push(Xt.left);var fi=fu(Y,Xt,M,L);return"page"==L&&At==ce.sel.primary()&&he(Y,xn(Y,fi,"div").top-Xt.top),fi},Be),Ce.length)for(var Ke=0;Ke<ce.sel.ranges.length;Ke++)ce.sel.ranges[Ke].goalColumn=Ce[Ke]}),findWordAt:function(M){var Y=Ri(this.doc,M.line).text,ce=M.ch,Ce=M.ch;if(Y){var Ve=this.getHelper(M,"wordChars");"before"!=M.sticky&&Ce!=Y.length||!ce?++Ce:--ce;for(var Ke=Y.charAt(ce),At=Lt(Ke,Ve)?function(Xt){return Lt(Xt,Ve)}:/\s/.test(Ke)?function(Xt){return/\s/.test(Xt)}:function(Xt){return!/\s/.test(Xt)&&!Lt(Xt)};ce>0&&At(Y.charAt(ce-1));)--ce;for(;Ce<Y.length&&At(Y.charAt(Ce));)++Ce}return new Gr(Vi(M.line,ce),Vi(M.line,Ce))},toggleOverwrite:function(M){null!=M&&M==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Oe(this.display.cursorDiv,"CodeMirror-overwrite"):ge(this.display.cursorDiv,"CodeMirror-overwrite"),Ot(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ht()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Po(function(M,L){Q(this,M,L)}),getScrollInfo:function(){var M=this.display.scroller;return{left:M.scrollLeft,top:M.scrollTop,height:M.scrollHeight-Fi(this)-this.display.barHeight,width:M.scrollWidth-Fi(this)-this.display.barWidth,clientHeight:Cn(this),clientWidth:un(this)}},scrollIntoView:Po(function(M,L){null==M?(M={from:this.doc.sel.primary().head,to:null},null==L&&(L=this.options.cursorScrollMargin)):"number"==typeof M?M={from:Vi(M,0),to:null}:null==M.from&&(M={from:M,to:null}),M.to||(M.to=M.from),M.margin=L||0,null!=M.from.line?function(h,y){je(h),h.curOp.scrollToPos=y}(this,M):gt(this,M.from,M.to,M.margin)}),setSize:Po(function(M,L){var Y=this,ce=function(Ve){return"number"==typeof Ve||/^\d+$/.test(String(Ve))?Ve+"px":Ve};null!=M&&(this.display.wrapper.style.width=ce(M)),null!=L&&(this.display.wrapper.style.height=ce(L)),this.options.lineWrapping&&os(this);var Ce=this.display.viewFrom;this.doc.iter(Ce,this.display.viewTo,function(Ve){if(Ve.widgets)for(var Ke=0;Ke<Ve.widgets.length;Ke++)if(Ve.widgets[Ke].noHScroll){ia(Y,Ce,"widget");break}++Ce}),this.curOp.forceUpdate=!0,Ot(this,"refresh",this)}),operation:function(M){return ds(this,M)},startOperation:function(){return Vo(this)},endOperation:function(){return el(this)},refresh:Po(function(){var M=this.display.cachedTextHeight;ns(this),this.curOp.forceUpdate=!0,Rs(this),Q(this,this.doc.scrollLeft,this.doc.scrollTop),Yl(this.display),(null==M||Math.abs(M-ua(this.display))>.5||this.options.lineWrapping)&&Ol(this),Ot(this,"refresh",this)}),swapDoc:Po(function(M){var L=this.doc;return L.cm=null,this.state.selectingText&&this.state.selectingText(),Ir(this,M),Rs(this),this.display.input.reset(),Q(this,M.scrollLeft,M.scrollTop),this.curOp.forceScroll=!0,fr(this,"swapDoc",this,L),L}),phrase:function(M){var L=this.options.phrases;return L&&Object.prototype.hasOwnProperty.call(L,M)?L[M]:M},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},_i(h),h.registerHelper=function(M,L,Y){x.hasOwnProperty(M)||(x[M]=h[M]={_global:[]}),x[M][L]=Y},h.registerGlobalHelper=function(M,L,Y,ce){h.registerHelper(M,L,ce),x[M]._global.push({pred:Y,val:ce})}}(Wr);var _d="iter insert remove copy getEditor constructor".split(" ");for(var Bu in as.prototype)as.prototype.hasOwnProperty(Bu)&&Zt(_d,Bu)<0&&(Wr.prototype[Bu]=function(h){return function(){return h.apply(this.doc,arguments)}}(as.prototype[Bu]));return _i(as),Wr.inputStyles={textarea:vo,contenteditable:So},Wr.defineMode=function(h){!Wr.defaults.mode&&"null"!=h&&(Wr.defaults.mode=h),In.apply(this,arguments)},Wr.defineMIME=function(h,y){fn[h]=y},Wr.defineMode("null",function(){return{token:function(h){return h.skipToEnd()}}}),Wr.defineMIME("text/plain","null"),Wr.defineExtension=function(h,y){Wr.prototype[h]=y},Wr.defineDocExtension=function(h,y){as.prototype[h]=y},Wr.fromTextArea=function(h,y){if((y=y?lt(y):{}).value=h.value,!y.tabindex&&h.tabIndex&&(y.tabindex=h.tabIndex),!y.placeholder&&h.placeholder&&(y.placeholder=h.placeholder),null==y.autofocus){var x=ht();y.autofocus=x==h||null!=h.getAttribute("autofocus")&&x==document.body}function M(){h.value=Ce.getValue()}var L;if(h.form&&(mi(h.form,"submit",M),!y.leaveSubmitMethodAlone)){var Y=h.form;L=Y.submit;try{var ce=Y.submit=function(){M(),Y.submit=L,Y.submit(),Y.submit=ce}}catch(Ve){}}y.finishInit=function(Ve){Ve.save=M,Ve.getTextArea=function(){return h},Ve.toTextArea=function(){Ve.toTextArea=isNaN,M(),h.parentNode.removeChild(Ve.getWrapperElement()),h.style.display="",h.form&&(wt(h.form,"submit",M),!y.leaveSubmitMethodAlone&&"function"==typeof h.form.submit&&(h.form.submit=L))}},h.style.display="none";var Ce=Wr(function(Ve){return h.parentNode.insertBefore(Ve,h.nextSibling)},y);return Ce},function(h){h.off=wt,h.on=mi,h.wheelEventPixels=Nl,h.Doc=as,h.splitLines=nr,h.countColumn=Bt,h.findColumn=Tt,h.isWordChar=tt,h.Pass=ii,h.signal=Ot,h.Line=us,h.changeEnd=Fl,h.scrollbarModel=Tl,h.Pos=Vi,h.cmpPos=Dn,h.modes=Oi,h.mimeModes=fn,h.resolveMode=Tr,h.getMode=eo,h.modeExtensions=no,h.extendMode=mo,h.copyState=Lr,h.startState=Ro,h.innerMode=pr,h.commands=ju,h.keyMap=ir,h.keyName=po,h.isModifierKey=ho,h.lookupKey=Zr,h.normalizeKeyMap=Mo,h.StringStream=cr,h.SharedTextMarker=rl,h.TextMarker=za,h.LineWidget=Sl,h.e_preventDefault=Bi,h.e_stopPropagation=Jt,h.e_stop=Ae,h.addClass=Oe,h.contains=ie,h.rmClass=ge,h.keyNames=Ii}(Wr),Wr.version="5.65.0",Wr}()},64166:(V,Z,g)=>{!function(E){"use strict";E.defineMode("javascript",function(m,t){var Ie,Ge,e=m.indentUnit,n=t.statementIndent,a=t.jsonld,d=t.json||a,C=!1!==t.trackScope,D=t.typescript,B=t.wordCharacters||/[\w$\xa1-\uffff]/,z=function(){function ot(sr){return{type:sr,style:"keyword"}}var Ht=ot("keyword a"),Ai=ot("keyword b"),Ki=ot("keyword c"),zi=ot("keyword d"),Zn=ot("operator"),Yn={type:"atom",style:"atom"};return{if:ot("if"),while:Ht,with:Ht,else:Ai,do:Ai,try:Ai,finally:Ai,return:zi,break:zi,continue:zi,new:ot("new"),delete:Ki,void:Ki,throw:Ki,debugger:ot("debugger"),var:ot("var"),const:ot("var"),let:ot("var"),function:ot("function"),catch:ot("catch"),for:ot("for"),switch:ot("switch"),case:ot("case"),default:ot("default"),in:Zn,typeof:Zn,instanceof:Zn,true:Yn,false:Yn,null:Yn,undefined:Yn,NaN:Yn,Infinity:Yn,this:ot("this"),class:ot("class"),super:ot("atom"),yield:Ki,export:ot("export"),import:ot("import"),extends:Ki,await:Ki}}(),oe=/[+\-*&%=<>!?|~^@]/,be=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function _e(ot,Ht,Ai){return Ie=ot,Ge=Ai,Ht}function Le(ot,Ht){var Ai=ot.next();if('"'==Ai||"'"==Ai)return Ht.tokenize=function(ot){return function(Ht,Ai){var zi,Ki=!1;if(a&&"@"==Ht.peek()&&Ht.match(be))return Ai.tokenize=Le,_e("jsonld-keyword","meta");for(;null!=(zi=Ht.next())&&(zi!=ot||Ki);)Ki=!Ki&&"\\"==zi;return Ki||(Ai.tokenize=Le),_e("string","string")}}(Ai),Ht.tokenize(ot,Ht);if("."==Ai&&ot.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return _e("number","number");if("."==Ai&&ot.match(".."))return _e("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ai))return _e(Ai);if("="==Ai&&ot.eat(">"))return _e("=>","operator");if("0"==Ai&&ot.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return _e("number","number");if(/\d/.test(Ai))return ot.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),_e("number","number");if("/"==Ai)return ot.eat("*")?(Ht.tokenize=$e,$e(ot,Ht)):ot.eat("/")?(ot.skipToEnd(),_e("comment","comment")):Wn(ot,Ht,1)?(function(ot){for(var Ai,Ht=!1,Ki=!1;null!=(Ai=ot.next());){if(!Ht){if("/"==Ai&&!Ki)return;"["==Ai?Ki=!0:Ki&&"]"==Ai&&(Ki=!1)}Ht=!Ht&&"\\"==Ai}}(ot),ot.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),_e("regexp","string-2")):(ot.eat("="),_e("operator","operator",ot.current()));if("`"==Ai)return Ht.tokenize=Te,Te(ot,Ht);if("#"==Ai&&"!"==ot.peek())return ot.skipToEnd(),_e("meta","meta");if("#"==Ai&&ot.eatWhile(B))return _e("variable","property");if("<"==Ai&&ot.match("!--")||"-"==Ai&&ot.match("->")&&!/\S/.test(ot.string.slice(0,ot.start)))return ot.skipToEnd(),_e("comment","comment");if(oe.test(Ai))return(">"!=Ai||!Ht.lexical||">"!=Ht.lexical.type)&&(ot.eat("=")?("!"==Ai||"="==Ai)&&ot.eat("="):/[<>*+\-|&?]/.test(Ai)&&(ot.eat(Ai),">"==Ai&&ot.eat(Ai))),"?"==Ai&&ot.eat(".")?_e("."):_e("operator","operator",ot.current());if(B.test(Ai)){ot.eatWhile(B);var Ki=ot.current();if("."!=Ht.lastType){if(z.propertyIsEnumerable(Ki)){var zi=z[Ki];return _e(zi.type,zi.style,Ki)}if("async"==Ki&&ot.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return _e("async","keyword",Ki)}return _e("variable","variable",Ki)}}function $e(ot,Ht){for(var Ki,Ai=!1;Ki=ot.next();){if("/"==Ki&&Ai){Ht.tokenize=Le;break}Ai="*"==Ki}return _e("comment","comment")}function Te(ot,Ht){for(var Ki,Ai=!1;null!=(Ki=ot.next());){if(!Ai&&("`"==Ki||"$"==Ki&&ot.eat("{"))){Ht.tokenize=Le;break}Ai=!Ai&&"\\"==Ki}return _e("quasi","string-2",ot.current())}function ne(ot,Ht){Ht.fatArrowAt&&(Ht.fatArrowAt=null);var Ai=ot.string.indexOf("=>",ot.start);if(!(Ai<0)){if(D){var Ki=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(ot.string.slice(ot.start,Ai));Ki&&(Ai=Ki.index)}for(var zi=0,Zn=!1,Yn=Ai-1;Yn>=0;--Yn){var sr=ot.string.charAt(Yn),Bn="([{}])".indexOf(sr);if(Bn>=0&&Bn<3){if(!zi){++Yn;break}if(0==--zi){"("==sr&&(Zn=!0);break}}else if(Bn>=3&&Bn<6)++zi;else if(B.test(sr))Zn=!0;else if(/["'\/`]/.test(sr))for(;;--Yn){if(0==Yn)return;if(ot.string.charAt(Yn-1)==sr&&"\\"!=ot.string.charAt(Yn-2)){Yn--;break}}else if(Zn&&!zi){++Yn;break}}Zn&&!zi&&(Ht.fatArrowAt=Yn)}}var ge={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ae(ot,Ht,Ai,Ki,zi,Zn){this.indented=ot,this.column=Ht,this.type=Ai,this.prev=zi,this.info=Zn,null!=Ki&&(this.align=Ki)}function He(ot,Ht){if(!C)return!1;for(var Ai=ot.localVars;Ai;Ai=Ai.next)if(Ai.name==Ht)return!0;for(var Ki=ot.context;Ki;Ki=Ki.prev)for(Ai=Ki.vars;Ai;Ai=Ai.next)if(Ai.name==Ht)return!0}function Se(ot,Ht,Ai,Ki,zi){var Zn=ot.cc;for(Ee.state=ot,Ee.stream=zi,Ee.marked=null,Ee.cc=Zn,Ee.style=Ht,ot.lexical.hasOwnProperty("align")||(ot.lexical.align=!0);;)if((Zn.length?Zn.pop():d?Je:Be)(Ai,Ki)){for(;Zn.length&&Zn[Zn.length-1].lex;)Zn.pop()();return Ee.marked?Ee.marked:"variable"==Ai&&He(ot,Ki)?"variable-2":Ht}}var Ee={state:null,column:null,marked:null,cc:null};function ue(){for(var ot=arguments.length-1;ot>=0;ot--)Ee.cc.push(arguments[ot])}function ie(){return ue.apply(null,arguments),!0}function ht(ot,Ht){for(var Ai=Ht;Ai;Ai=Ai.next)if(Ai.name==ot)return!0;return!1}function Oe(ot){var Ht=Ee.state;if(Ee.marked="def",C){if(Ht.context)if("var"==Ht.lexical.info&&Ht.context&&Ht.context.block){var Ai=ke(ot,Ht.context);if(null!=Ai)return void(Ht.context=Ai)}else if(!ht(ot,Ht.localVars))return void(Ht.localVars=new lt(ot,Ht.localVars));t.globalVars&&!ht(ot,Ht.globalVars)&&(Ht.globalVars=new lt(ot,Ht.globalVars))}}function ke(ot,Ht){if(Ht){if(Ht.block){var Ai=ke(ot,Ht.prev);return Ai?Ai==Ht.prev?Ht:new vt(Ai,Ht.vars,!0):null}return ht(ot,Ht.vars)?Ht:new vt(Ht.prev,new lt(ot,Ht.vars),!1)}return null}function dt(ot){return"public"==ot||"private"==ot||"protected"==ot||"abstract"==ot||"readonly"==ot}function vt(ot,Ht,Ai){this.prev=ot,this.vars=Ht,this.block=Ai}function lt(ot,Ht){this.name=ot,this.next=Ht}var Bt=new lt("this",new lt("arguments",null));function Pt(){Ee.state.context=new vt(Ee.state.context,Ee.state.localVars,!1),Ee.state.localVars=Bt}function Zt(){Ee.state.context=new vt(Ee.state.context,Ee.state.localVars,!0),Ee.state.localVars=null}function Di(){Ee.state.localVars=Ee.state.context.vars,Ee.state.context=Ee.state.context.prev}function ii(ot,Ht){var Ai=function(){var Ki=Ee.state,zi=Ki.indented;if("stat"==Ki.lexical.type)zi=Ki.lexical.indented;else for(var Zn=Ki.lexical;Zn&&")"==Zn.type&&Zn.align;Zn=Zn.prev)zi=Zn.indented;Ki.lexical=new ae(zi,Ee.stream.column(),ot,null,Ki.lexical,Ht)};return Ai.lex=!0,Ai}function Ct(){var ot=Ee.state;ot.lexical.prev&&(")"==ot.lexical.type&&(ot.indented=ot.lexical.indented),ot.lexical=ot.lexical.prev)}function gi(ot){return function Ht(Ai){return Ai==ot?ie():";"==ot||"}"==Ai||")"==Ai||"]"==Ai?ue():ie(Ht)}}function Be(ot,Ht){return"var"==ot?ie(ii("vardef",Ht),Gi,gi(";"),Ct):"keyword a"==ot?ie(ii("form"),xe,Be,Ct):"keyword b"==ot?ie(ii("form"),Be,Ct):"keyword d"==ot?Ee.stream.match(/^\s*$/,!1)?ie():ie(ii("stat"),jt,gi(";"),Ct):"debugger"==ot?ie(gi(";")):"{"==ot?ie(ii("}"),Zt,mi,Ct,Di):";"==ot?ie():"if"==ot?("else"==Ee.state.lexical.info&&Ee.state.cc[Ee.state.cc.length-1]==Ct&&Ee.state.cc.pop()(),ie(ii("form"),xe,Be,Ct,kt)):"function"==ot?ie(In):"for"==ot?ie(ii("form"),Zt,ui,Be,Di,Ct):"class"==ot||D&&"interface"==Ht?(Ee.marked="keyword",ie(ii("form","class"==ot?ot:Ht),mo,Ct)):"variable"==ot?D&&"declare"==Ht?(Ee.marked="keyword",ie(Be)):D&&("module"==Ht||"enum"==Ht||"type"==Ht)&&Ee.stream.match(/^\s*\w/,!1)?(Ee.marked="keyword","enum"==Ht?ie(Rr):"type"==Ht?ie(Tr,gi("operator"),zt,gi(";")):ie(ii("form"),Zi,gi("{"),ii("}"),mi,Ct,Ct)):D&&"namespace"==Ht?(Ee.marked="keyword",ie(ii("form"),Je,Be,Ct)):D&&"abstract"==Ht?(Ee.marked="keyword",ie(Be)):ie(ii("stat"),ut):"switch"==ot?ie(ii("form"),xe,gi("{"),ii("}","switch"),Zt,mi,Ct,Ct,Di):"case"==ot?ie(Je,gi(":")):"default"==ot?ie(gi(":")):"catch"==ot?ie(ii("form"),Pt,Tt,Be,Ct,Di):"export"==ot?ie(ii("stat"),cr,Ct):"import"==ot?ie(ii("stat"),Gn,Ct):"async"==ot?ie(Be):"@"==Ht?ie(Je,Be):ue(ii("stat"),Je,gi(";"),Ct)}function Tt(ot){if("("==ot)return ie(eo,gi(")"))}function Je(ot,Ht){return pt(ot,Ht,!1)}function _t(ot,Ht){return pt(ot,Ht,!0)}function xe(ot){return"("!=ot?ue():ie(ii(")"),jt,gi(")"),Ct)}function pt(ot,Ht,Ai){if(Ee.state.fatArrowAt==Ee.stream.start){var Ki=Ai?nt:Lt;if("("==ot)return ie(Pt,ii(")"),yi(eo,")"),Ct,gi("=>"),Ki,Di);if("variable"==ot)return ue(Pt,Zi,gi("=>"),Ki,Di)}var zi=Ai?Rt:di;return ge.hasOwnProperty(ot)?ie(zi):"function"==ot?ie(In,zi):"class"==ot||D&&"interface"==Ht?(Ee.marked="keyword",ie(ii("form"),no,Ct)):"keyword c"==ot||"async"==ot?ie(Ai?_t:Je):"("==ot?ie(ii(")"),jt,gi(")"),Ct,zi):"operator"==ot||"spread"==ot?ie(Ai?_t:Je):"["==ot?ie(ii("]"),Qr,Ct,zi):"{"==ot?pn(ni,"}",null,zi):"quasi"==ot?ue(et,zi):"new"==ot?ie(function(ot){return function(Ht){return"."==Ht?ie(ot?Ze:yt):"variable"==Ht&&D?ie(Pe,ot?Rt:di):ue(ot?_t:Je)}}(Ai)):ie()}function jt(ot){return ot.match(/[;\}\)\],]/)?ue():ue(Je)}function di(ot,Ht){return","==ot?ie(jt):Rt(ot,Ht,!1)}function Rt(ot,Ht,Ai){var Ki=0==Ai?di:Rt,zi=0==Ai?Je:_t;if("=>"==ot)return ie(Pt,Ai?nt:Lt,Di);if("operator"==ot)return/\+\+|--/.test(Ht)||D&&"!"==Ht?ie(Ki):D&&"<"==Ht&&Ee.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?ie(ii(">"),yi(zt,">"),Ct,Ki):"?"==Ht?ie(Je,gi(":"),zi):ie(zi);if("quasi"==ot)return ue(et,Ki);if(";"!=ot){if("("==ot)return pn(_t,")","call",Ki);if("."==ot)return ie(ei,Ki);if("["==ot)return ie(ii("]"),jt,gi("]"),Ct,Ki);if(D&&"as"==Ht)return Ee.marked="keyword",ie(zt,Ki);if("regexp"==ot)return Ee.state.lastType=Ee.marked="operator",Ee.stream.backUp(Ee.stream.pos-Ee.stream.start-1),ie(zi)}}function et(ot,Ht){return"quasi"!=ot?ue():"${"!=Ht.slice(Ht.length-2)?ie(et):ie(jt,tt)}function tt(ot){if("}"==ot)return Ee.marked="string-2",Ee.state.tokenize=Te,ie(et)}function Lt(ot){return ne(Ee.stream,Ee.state),ue("{"==ot?Be:Je)}function nt(ot){return ne(Ee.stream,Ee.state),ue("{"==ot?Be:_t)}function yt(ot,Ht){if("target"==Ht)return Ee.marked="keyword",ie(di)}function Ze(ot,Ht){if("target"==Ht)return Ee.marked="keyword",ie(Rt)}function ut(ot){return":"==ot?ie(Ct,Be):ue(di,gi(";"),Ct)}function ei(ot){if("variable"==ot)return Ee.marked="property",ie()}function ni(ot,Ht){return"async"==ot?(Ee.marked="property",ie(ni)):"variable"==ot||"keyword"==Ee.style?(Ee.marked="property","get"==Ht||"set"==Ht?ie(Ni):(D&&Ee.state.fatArrowAt==Ee.stream.start&&(Ai=Ee.stream.match(/^\s*:\s*/,!1))&&(Ee.state.fatArrowAt=Ee.stream.pos+Ai[0].length),ie(wi))):"number"==ot||"string"==ot?(Ee.marked=a?"property":Ee.style+" property",ie(wi)):"jsonld-keyword"==ot?ie(wi):D&&dt(Ht)?(Ee.marked="keyword",ie(ni)):"["==ot?ie(Je,Ji,gi("]"),wi):"spread"==ot?ie(_t,wi):"*"==Ht?(Ee.marked="keyword",ie(ni)):":"==ot?ue(wi):void 0;var Ai}function Ni(ot){return"variable"!=ot?ue(wi):(Ee.marked="property",ie(In))}function wi(ot){return":"==ot?ie(_t):"("==ot?ue(In):void 0}function yi(ot,Ht,Ai){function Ki(zi,Zn){if(Ai?Ai.indexOf(zi)>-1:","==zi){var Yn=Ee.state.lexical;return"call"==Yn.info&&(Yn.pos=(Yn.pos||0)+1),ie(function(sr,Bn){return sr==Ht||Bn==Ht?ue():ue(ot)},Ki)}return zi==Ht||Zn==Ht?ie():Ai&&Ai.indexOf(";")>-1?ue(ot):ie(gi(Ht))}return function(zi,Zn){return zi==Ht||Zn==Ht?ie():ue(ot,Ki)}}function pn(ot,Ht,Ai){for(var Ki=3;Ki<arguments.length;Ki++)Ee.cc.push(arguments[Ki]);return ie(ii(Ht,Ai),yi(ot,Ht),Ct)}function mi(ot){return"}"==ot?ie():ue(Be,mi)}function Ji(ot,Ht){if(D){if(":"==ot)return ie(zt);if("?"==Ht)return ie(Ji)}}function wt(ot,Ht){if(D&&(":"==ot||"in"==Ht))return ie(zt)}function Ot(ot){if(D&&":"==ot)return Ee.stream.match(/^\s*\w+\s+is\b/,!1)?ie(Je,Ci,zt):ie(zt)}function Ci(ot,Ht){if("is"==Ht)return Ee.marked="keyword",ie()}function zt(ot,Ht){return"keyof"==Ht||"typeof"==Ht||"infer"==Ht||"readonly"==Ht?(Ee.marked="keyword",ie("typeof"==Ht?_t:zt)):"variable"==ot||"void"==Ht?(Ee.marked="type",ie(le)):"|"==Ht||"&"==Ht?ie(zt):"string"==ot||"number"==ot||"atom"==ot?ie(le):"["==ot?ie(ii("]"),yi(zt,"]",","),Ct,le):"{"==ot?ie(ii("}"),_i,Ct,le):"("==ot?ie(yi(Ae,")"),Mi,le):"<"==ot?ie(yi(zt,">"),zt):"quasi"==ot?ue(Jt,le):void 0}function Mi(ot){if("=>"==ot)return ie(zt)}function _i(ot){return ot.match(/[\}\)\]]/)?ie():","==ot||";"==ot?ie(_i):ue(Bi,_i)}function Bi(ot,Ht){return"variable"==ot||"keyword"==Ee.style?(Ee.marked="property",ie(Bi)):"?"==Ht||"number"==ot||"string"==ot?ie(Bi):":"==ot?ie(zt):"["==ot?ie(gi("variable"),wt,gi("]"),Bi):"("==ot?ue(ur,Bi):ot.match(/[;\}\)\],]/)?void 0:ie()}function Jt(ot,Ht){return"quasi"!=ot?ue():"${"!=Ht.slice(Ht.length-2)?ie(Jt):ie(zt,ft)}function ft(ot){if("}"==ot)return Ee.marked="string-2",Ee.state.tokenize=Te,ie(Jt)}function Ae(ot,Ht){return"variable"==ot&&Ee.stream.match(/^\s*[?:]/,!1)||"?"==Ht?ie(Ae):":"==ot?ie(zt):"spread"==ot?ie(Ae):ue(zt)}function le(ot,Ht){return"<"==Ht?ie(ii(">"),yi(zt,">"),Ct,le):"|"==Ht||"."==ot||"&"==Ht?ie(zt):"["==ot?ie(zt,gi("]"),le):"extends"==Ht||"implements"==Ht?(Ee.marked="keyword",ie(zt)):"?"==Ht?ie(zt,gi(":"),zt):void 0}function Pe(ot,Ht){if("<"==Ht)return ie(ii(">"),yi(zt,">"),Ct,le)}function at(){return ue(zt,It)}function It(ot,Ht){if("="==Ht)return ie(zt)}function Gi(ot,Ht){return"enum"==Ht?(Ee.marked="keyword",ie(Rr)):ue(Zi,Ji,li,$t)}function Zi(ot,Ht){return D&&dt(Ht)?(Ee.marked="keyword",ie(Zi)):"variable"==ot?(Oe(Ht),ie()):"spread"==ot?ie(Zi):"["==ot?pn(nr,"]"):"{"==ot?pn(En,"}"):void 0}function En(ot,Ht){return"variable"!=ot||Ee.stream.match(/^\s*:/,!1)?("variable"==ot&&(Ee.marked="property"),"spread"==ot?ie(Zi):"}"==ot?ue():"["==ot?ie(Je,gi("]"),gi(":"),En):ie(gi(":"),Zi,li)):(Oe(Ht),ie(li))}function nr(){return ue(Zi,li)}function li(ot,Ht){if("="==Ht)return ie(_t)}function $t(ot){if(","==ot)return ie(Gi)}function kt(ot,Ht){if("keyword b"==ot&&"else"==Ht)return ie(ii("form","else"),Be,Ct)}function ui(ot,Ht){return"await"==Ht?ie(ui):"("==ot?ie(ii(")"),Oi,Ct):void 0}function Oi(ot){return"var"==ot?ie(Gi,fn):"variable"==ot?ie(fn):ue(fn)}function fn(ot,Ht){return")"==ot?ie():";"==ot?ie(fn):"in"==Ht||"of"==Ht?(Ee.marked="keyword",ie(Je,fn)):ue(Je,fn)}function In(ot,Ht){return"*"==Ht?(Ee.marked="keyword",ie(In)):"variable"==ot?(Oe(Ht),ie(In)):"("==ot?ie(Pt,ii(")"),yi(eo,")"),Ct,Ot,Be,Di):D&&"<"==Ht?ie(ii(">"),yi(at,">"),Ct,In):void 0}function ur(ot,Ht){return"*"==Ht?(Ee.marked="keyword",ie(ur)):"variable"==ot?(Oe(Ht),ie(ur)):"("==ot?ie(Pt,ii(")"),yi(eo,")"),Ct,Ot,Di):D&&"<"==Ht?ie(ii(">"),yi(at,">"),Ct,ur):void 0}function Tr(ot,Ht){return"keyword"==ot||"variable"==ot?(Ee.marked="type",ie(Tr)):"<"==Ht?ie(ii(">"),yi(at,">"),Ct):void 0}function eo(ot,Ht){return"@"==Ht&&ie(Je,eo),"spread"==ot?ie(eo):D&&dt(Ht)?(Ee.marked="keyword",ie(eo)):D&&"this"==ot?ie(Ji,li):ue(Zi,Ji,li)}function no(ot,Ht){return"variable"==ot?mo(ot,Ht):Lr(ot,Ht)}function mo(ot,Ht){if("variable"==ot)return Oe(Ht),ie(Lr)}function Lr(ot,Ht){return"<"==Ht?ie(ii(">"),yi(at,">"),Ct,Lr):"extends"==Ht||"implements"==Ht||D&&","==ot?("implements"==Ht&&(Ee.marked="keyword"),ie(D?zt:Je,Lr)):"{"==ot?ie(ii("}"),pr,Ct):void 0}function pr(ot,Ht){return"async"==ot||"variable"==ot&&("static"==Ht||"get"==Ht||"set"==Ht||D&&dt(Ht))&&Ee.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Ee.marked="keyword",ie(pr)):"variable"==ot||"keyword"==Ee.style?(Ee.marked="property",ie(Ro,pr)):"number"==ot||"string"==ot?ie(Ro,pr):"["==ot?ie(Je,Ji,gi("]"),Ro,pr):"*"==Ht?(Ee.marked="keyword",ie(pr)):D&&"("==ot?ue(ur,pr):";"==ot||","==ot?ie(pr):"}"==ot?ie():"@"==Ht?ie(Je,pr):void 0}function Ro(ot,Ht){if("!"==Ht||"?"==Ht)return ie(Ro);if(":"==ot)return ie(zt,li);if("="==Ht)return ie(_t);var Ai=Ee.state.lexical.prev;return ue(Ai&&"interface"==Ai.info?ur:In)}function cr(ot,Ht){return"*"==Ht?(Ee.marked="keyword",ie(xr,gi(";"))):"default"==Ht?(Ee.marked="keyword",ie(Je,gi(";"))):"{"==ot?ie(yi(Ri,"}"),xr,gi(";")):ue(Be)}function Ri(ot,Ht){return"as"==Ht?(Ee.marked="keyword",ie(gi("variable"))):"variable"==ot?ue(_t,Ri):void 0}function Gn(ot){return"string"==ot?ie():"("==ot?ue(Je):"."==ot?ue(di):ue(vr,Hr,xr)}function vr(ot,Ht){return"{"==ot?pn(vr,"}"):("variable"==ot&&Oe(Ht),"*"==Ht&&(Ee.marked="keyword"),ie(_r))}function Hr(ot){if(","==ot)return ie(vr,Hr)}function _r(ot,Ht){if("as"==Ht)return Ee.marked="keyword",ie(vr)}function xr(ot,Ht){if("from"==Ht)return Ee.marked="keyword",ie(Je)}function Qr(ot){return"]"==ot?ie():ue(yi(_t,"]"))}function Rr(){return ue(ii("form"),Zi,gi("{"),ii("}"),yi(Vi,"}"),Ct,Ct)}function Vi(){return ue(Zi,li)}function Wn(ot,Ht,Ai){return Ht.tokenize==Le&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Ht.lastType)||"quasi"==Ht.lastType&&/\{\s*$/.test(ot.string.slice(0,ot.pos-(Ai||0)))}return Di.lex=!0,Ct.lex=!0,{startState:function(ot){var Ht={tokenize:Le,lastType:"sof",cc:[],lexical:new ae((ot||0)-e,0,"block",!1),localVars:t.localVars,context:t.localVars&&new vt(null,null,!1),indented:ot||0};return t.globalVars&&"object"==typeof t.globalVars&&(Ht.globalVars=t.globalVars),Ht},token:function(ot,Ht){if(ot.sol()&&(Ht.lexical.hasOwnProperty("align")||(Ht.lexical.align=!1),Ht.indented=ot.indentation(),ne(ot,Ht)),Ht.tokenize!=$e&&ot.eatSpace())return null;var Ai=Ht.tokenize(ot,Ht);return"comment"==Ie?Ai:(Ht.lastType="operator"!=Ie||"++"!=Ge&&"--"!=Ge?Ie:"incdec",Se(Ht,Ai,Ie,Ge,ot))},indent:function(ot,Ht){if(ot.tokenize==$e||ot.tokenize==Te)return E.Pass;if(ot.tokenize!=Le)return 0;var zi,Ai=Ht&&Ht.charAt(0),Ki=ot.lexical;if(!/^\s*else\b/.test(Ht))for(var Zn=ot.cc.length-1;Zn>=0;--Zn){var Yn=ot.cc[Zn];if(Yn==Ct)Ki=Ki.prev;else if(Yn!=kt&&Yn!=Di)break}for(;("stat"==Ki.type||"form"==Ki.type)&&("}"==Ai||(zi=ot.cc[ot.cc.length-1])&&(zi==di||zi==Rt)&&!/^[,\.=+\-*:?[\(]/.test(Ht));)Ki=Ki.prev;n&&")"==Ki.type&&"stat"==Ki.prev.type&&(Ki=Ki.prev);var sr=Ki.type,Bn=Ai==sr;return"vardef"==sr?Ki.indented+("operator"==ot.lastType||","==ot.lastType?Ki.info.length+1:0):"form"==sr&&"{"==Ai?Ki.indented:"form"==sr?Ki.indented+e:"stat"==sr?Ki.indented+(function(ot,Ht){return"operator"==ot.lastType||","==ot.lastType||oe.test(Ht.charAt(0))||/[,.]/.test(Ht.charAt(0))}(ot,Ht)?n||e:0):"switch"!=Ki.info||Bn||0==t.doubleIndentSwitch?Ki.align?Ki.column+(Bn?0:1):Ki.indented+(Bn?0:e):Ki.indented+(/^(?:case|default)\b/.test(Ht)?e:2*e)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:a,jsonMode:d,expressionAllowed:Wn,skipExpression:function(ot){Se(ot,"atom","atom","true",new E.StringStream("",2,null))}}}),E.registerHelper("wordChars","javascript",/[\w$]/),E.defineMIME("text/javascript","javascript"),E.defineMIME("text/ecmascript","javascript"),E.defineMIME("application/javascript","javascript"),E.defineMIME("application/x-javascript","javascript"),E.defineMIME("application/ecmascript","javascript"),E.defineMIME("application/json",{name:"javascript",json:!0}),E.defineMIME("application/x-json",{name:"javascript",json:!0}),E.defineMIME("application/manifest+json",{name:"javascript",json:!0}),E.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),E.defineMIME("text/typescript",{name:"javascript",typescript:!0}),E.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(g(68266))},70697:function(V){V.exports=function(){"use strict";function Z(me){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(we){return typeof we}:function(we){return we&&"function"==typeof Symbol&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we})(me)}var me,E=(me={},function(it){var Dt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return me[Dt]=me[Dt]||0,void 0===it[Dt]&&(it[Dt]=me[Dt]++),it[Dt]});function m(me,we,it){if(me)for(var Dt=0,Vt=me.length;Dt<Vt;Dt++)we(me[Dt],Dt);"function"==typeof it&&it()}var t=new function(){var we="introjs_event";this._id=function(it,Dt,Vt,hi){return Dt+E(Vt)+(hi?"_".concat(E(hi)):"")},this.on=function(it,Dt,Vt,hi,Qt){var si=this._id.apply(this,arguments),ki=function(Wi){return Vt.call(hi||it,Wi||window.event)};"addEventListener"in it?it.addEventListener(Dt,ki,Qt):"attachEvent"in it&&it.attachEvent("on".concat(Dt),ki),it[we]=it[we]||{},it[we][si]=ki},this.off=function(it,Dt,Vt,hi,Qt){var si=this._id.apply(this,arguments),ki=it[we]&&it[we][si];!ki||("removeEventListener"in it?it.removeEventListener(Dt,ki,Qt):"detachEvent"in it&&it.detachEvent("on".concat(Dt),ki),it[we][si]=null)}},e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(me,we){return me(we={exports:{}},we.exports),we.exports}var Ct,gi,a=function(me){return me&&me.Math==Math&&me},d=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof e&&e)||function(){return this}()||Function("return this")(),C=function(me){try{return!!me()}catch(we){return!0}},D=!C(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),B=Function.prototype.call,z=B.bind?B.bind(B):function(){return B.apply(B,arguments)},oe={}.propertyIsEnumerable,be=Object.getOwnPropertyDescriptor,Ge={f:be&&!oe.call({1:2},1)?function(we){var it=be(this,we);return!!it&&it.enumerable}:oe},_e=function(me,we){return{enumerable:!(1&me),configurable:!(2&me),writable:!(4&me),value:we}},Le=Function.prototype,We=Le.bind,$e=Le.call,Te=We&&We.bind($e),ye=We?function(me){return me&&Te($e,me)}:function(me){return me&&function(){return $e.apply(me,arguments)}},ne=ye({}.toString),ge=ye("".slice),ae=function(me){return ge(ne(me),8,-1)},He=d.Object,Se=ye("".split),Ee=C(function(){return!He("z").propertyIsEnumerable(0)})?function(me){return"String"==ae(me)?Se(me,""):He(me)}:He,ue=d.TypeError,ie=function(me){if(null==me)throw ue("Can't call method on "+me);return me},ht=function(me){return Ee(ie(me))},Oe=function(me){return"function"==typeof me},ke=function(me){return"object"==typeof me?null!==me:Oe(me)},dt=function(me){return Oe(me)?me:void 0},vt=function(me,we){return arguments.length<2?dt(d[me]):d[me]&&d[me][we]},lt=ye({}.isPrototypeOf),Bt=vt("navigator","userAgent")||"",Pt=d.process,Zt=d.Deno,Di=Pt&&Pt.versions||Zt&&Zt.version,ii=Di&&Di.v8;ii&&(gi=(Ct=ii.split("."))[0]>0&&Ct[0]<4?1:+(Ct[0]+Ct[1])),!gi&&Bt&&(!(Ct=Bt.match(/Edge\/(\d+)/))||Ct[1]>=74)&&(Ct=Bt.match(/Chrome\/(\d+)/))&&(gi=+Ct[1]);var Be=gi,Tt=!!Object.getOwnPropertySymbols&&!C(function(){var me=Symbol();return!String(me)||!(Object(me)instanceof Symbol)||!Symbol.sham&&Be&&Be<41}),Je=Tt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_t=d.Object,xe=Je?function(me){return"symbol"==typeof me}:function(me){var we=vt("Symbol");return Oe(we)&&lt(we.prototype,_t(me))},pt=d.String,jt=function(me){try{return pt(me)}catch(we){return"Object"}},di=d.TypeError,Rt=function(me){if(Oe(me))return me;throw di(jt(me)+" is not a function")},et=function(me,we){var it=me[we];return null==it?void 0:Rt(it)},tt=d.TypeError,nt=Object.defineProperty,mt=function(me,we){try{nt(d,me,{value:we,configurable:!0,writable:!0})}catch(it){d[me]=we}return we},yt="__core-js_shared__",ut=d[yt]||mt(yt,{}),ei=n(function(me){(me.exports=function(we,it){return ut[we]||(ut[we]=void 0!==it?it:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),ni=d.Object,Ni=function(me){return ni(ie(me))},wi=ye({}.hasOwnProperty),yi=Object.hasOwn||function(we,it){return wi(Ni(we),it)},pn=0,mi=Math.random(),Ji=ye(1..toString),wt=function(me){return"Symbol("+(void 0===me?"":me)+")_"+Ji(++pn+mi,36)},Ot=ei("wks"),Ci=d.Symbol,zt=Ci&&Ci.for,Mi=Je?Ci:Ci&&Ci.withoutSetter||wt,_i=function(me){if(!yi(Ot,me)||!Tt&&"string"!=typeof Ot[me]){var we="Symbol."+me;Ot[me]=Tt&&yi(Ci,me)?Ci[me]:Je&&zt?zt(we):Mi(we)}return Ot[me]},Bi=d.TypeError,Jt=_i("toPrimitive"),ft=function(me,we){if(!ke(me)||xe(me))return me;var Dt,it=et(me,Jt);if(it){if(void 0===we&&(we="default"),Dt=z(it,me,we),!ke(Dt)||xe(Dt))return Dt;throw Bi("Can't convert object to primitive value")}return void 0===we&&(we="number"),function(me,we){var it,Dt;if("string"===we&&Oe(it=me.toString)&&!ke(Dt=z(it,me))||Oe(it=me.valueOf)&&!ke(Dt=z(it,me))||"string"!==we&&Oe(it=me.toString)&&!ke(Dt=z(it,me)))return Dt;throw tt("Can't convert object to primitive value")}(me,we)},Ae=function(me){var we=ft(me,"string");return xe(we)?we:we+""},le=d.document,Pe=ke(le)&&ke(le.createElement),at=function(me){return Pe?le.createElement(me):{}},It=!D&&!C(function(){return 7!=Object.defineProperty(at("div"),"a",{get:function(){return 7}}).a}),Gi=Object.getOwnPropertyDescriptor,En={f:D?Gi:function(we,it){if(we=ht(we),it=Ae(it),It)try{return Gi(we,it)}catch(Dt){}if(yi(we,it))return _e(!z(Ge.f,we,it),we[it])}},nr=d.String,li=d.TypeError,$t=function(me){if(ke(me))return me;throw li(nr(me)+" is not an object")},kt=d.TypeError,ui=Object.defineProperty,fn={f:D?ui:function(we,it,Dt){if($t(we),it=Ae(it),$t(Dt),It)try{return ui(we,it,Dt)}catch(Vt){}if("get"in Dt||"set"in Dt)throw kt("Accessors not supported");return"value"in Dt&&(we[it]=Dt.value),we}},In=D?function(me,we,it){return fn.f(me,we,_e(1,it))}:function(me,we,it){return me[we]=it,me},ur=ye(Function.toString);Oe(ut.inspectSource)||(ut.inspectSource=function(me){return ur(me)});var Gn,vr,Hr,Tr=ut.inspectSource,eo=d.WeakMap,no=Oe(eo)&&/native code/.test(Tr(eo)),mo=ei("keys"),Lr=function(me){return mo[me]||(mo[me]=wt(me))},pr={},Ro="Object already initialized",cr=d.TypeError;if(no||ut.state){var Qr=ut.state||(ut.state=new(0,d.WeakMap)),Rr=ye(Qr.get),Vi=ye(Qr.has),Dn=ye(Qr.set);Gn=function(me,we){if(Vi(Qr,me))throw new cr(Ro);return we.facade=me,Dn(Qr,me,we),we},vr=function(me){return Rr(Qr,me)||{}},Hr=function(me){return Vi(Qr,me)}}else{var Wn=Lr("state");pr[Wn]=!0,Gn=function(me,we){if(yi(me,Wn))throw new cr(Ro);return we.facade=me,In(me,Wn,we),we},vr=function(me){return yi(me,Wn)?me[Wn]:{}},Hr=function(me){return yi(me,Wn)}}var ot={set:Gn,get:vr,has:Hr,enforce:function(me){return Hr(me)?vr(me):Gn(me,{})},getterFor:function(me){return function(we){var it;if(!ke(we)||(it=vr(we)).type!==me)throw cr("Incompatible receiver, "+me+" required");return it}}},Ht=Function.prototype,Ai=D&&Object.getOwnPropertyDescriptor,Ki=yi(Ht,"name"),Yn={EXISTS:Ki,PROPER:Ki&&"something"===function(){}.name,CONFIGURABLE:Ki&&(!D||D&&Ai(Ht,"name").configurable)},sr=n(function(me){var we=Yn.CONFIGURABLE,it=ot.get,Dt=ot.enforce,Vt=String(String).split("String");(me.exports=function(hi,Qt,si,ki){var ir,Ii=!!ki&&!!ki.unsafe,Wi=!!ki&&!!ki.enumerable,Qn=!!ki&&!!ki.noTargetGet,Un=ki&&void 0!==ki.name?ki.name:Qt;Oe(si)&&("Symbol("===String(Un).slice(0,7)&&(Un="["+String(Un).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!yi(si,"name")||we&&si.name!==Un)&&In(si,"name",Un),(ir=Dt(si)).source||(ir.source=Vt.join("string"==typeof Un?Un:""))),hi!==d?(Ii?!Qn&&hi[Qt]&&(Wi=!0):delete hi[Qt],Wi?hi[Qt]=si:In(hi,Qt,si)):Wi?hi[Qt]=si:mt(Qt,si)})(Function.prototype,"toString",function(){return Oe(this)&&it(this).source||Tr(this)})}),Bn=Math.ceil,Ao=Math.floor,Yo=function(me){var we=+me;return we!=we||0===we?0:(we>0?Ao:Bn)(we)},ro=Math.max,_o=Math.min,Qs=function(me,we){var it=Yo(me);return it<0?ro(it+we,0):_o(it,we)},dr=Math.min,Xo=function(me){return me>0?dr(Yo(me),9007199254740991):0},$r=function(me){return Xo(me.length)},ws=function(me){return function(we,it,Dt){var si,Vt=ht(we),hi=$r(Vt),Qt=Qs(Dt,hi);if(me&&it!=it){for(;hi>Qt;)if((si=Vt[Qt++])!=si)return!0}else for(;hi>Qt;Qt++)if((me||Qt in Vt)&&Vt[Qt]===it)return me||Qt||0;return!me&&-1}},Ss={includes:ws(!0),indexOf:ws(!1)},Bo=Ss.indexOf,Do=ye([].push),rs=function(me,we){var hi,it=ht(me),Dt=0,Vt=[];for(hi in it)!yi(pr,hi)&&yi(it,hi)&&Do(Vt,hi);for(;we.length>Dt;)yi(it,hi=we[Dt++])&&(~Bo(Vt,hi)||Do(Vt,hi));return Vt},Ho=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Xa=Ho.concat("length","prototype"),$a={f:Object.getOwnPropertyNames||function(we){return rs(we,Xa)}},ma={f:Object.getOwnPropertySymbols},vl=ye([].concat),Bs=vt("Reflect","ownKeys")||function(we){var it=$a.f($t(we)),Dt=ma.f;return Dt?vl(it,Dt(we)):it},Fa=function(me,we){for(var it=Bs(we),Dt=fn.f,Vt=En.f,hi=0;hi<it.length;hi++){var Qt=it[hi];yi(me,Qt)||Dt(me,Qt,Vt(we,Qt))}},Hs=/#|\.prototype\./,fs=function(me,we){var it=_a[ll(me)];return it==Io||it!=qs&&(Oe(we)?C(we):!!we)},ll=fs.normalize=function(me){return String(me).replace(Hs,".").toLowerCase()},_a=fs.data={},qs=fs.NATIVE="N",Io=fs.POLYFILL="P",jr=fs,ao=En.f,yo=function(me,we){var Qt,si,ki,Ii,Wi,it=me.target,Dt=me.global,Vt=me.stat;if(Qt=Dt?d:Vt?d[it]||mt(it,{}):(d[it]||{}).prototype)for(si in we){if(Ii=we[si],ki=me.noTargetGet?(Wi=ao(Qt,si))&&Wi.value:Qt[si],!jr(Dt?si:it+(Vt?".":"#")+si,me.forced)&&void 0!==ki){if(typeof Ii==typeof ki)continue;Fa(Ii,ki)}(me.sham||ki&&ki.sham)&&In(Ii,"sham",!0),sr(Qt,si,Ii,me)}},Ko={};Ko[_i("toStringTag")]="z";var bi,Ds="[object z]"===String(Ko),zo=_i("toStringTag"),Oo=d.Object,Eo="Arguments"==ae(function(){return arguments}()),lo=Ds?ae:function(me){var we,it,Dt;return void 0===me?"Undefined":null===me?"Null":"string"==typeof(it=function(me,we){try{return me[we]}catch(it){}}(we=Oo(me),zo))?it:Eo?ae(we):"Object"==(Dt=ae(we))&&Oe(we.callee)?"Arguments":Dt},gs=d.String,Pr=function(me){if("Symbol"===lo(me))throw TypeError("Cannot convert a Symbol value to a string");return gs(me)},la=function(){var me=$t(this),we="";return me.global&&(we+="g"),me.ignoreCase&&(we+="i"),me.multiline&&(we+="m"),me.dotAll&&(we+="s"),me.unicode&&(we+="u"),me.sticky&&(we+="y"),we},zr=d.RegExp,ca=C(function(){var me=zr("a","y");return me.lastIndex=2,null!=me.exec("abcd")}),bl=C(function(){var me=zr("^r","gy");return me.lastIndex=2,null!=me.exec("str")}),us={UNSUPPORTED_Y:ca,BROKEN_CARET:bl},$o=Object.keys||function(we){return rs(we,Ho)},ms=D?Object.defineProperties:function(we,it){$t(we);for(var si,Dt=ht(it),Vt=$o(it),hi=Vt.length,Qt=0;hi>Qt;)fn.f(we,si=Vt[Qt++],Dt[si]);return we},yl=vt("document","documentElement"),va="prototype",Re="script",J=Lr("IE_PROTO"),H=function(){},W=function(me){return"<script>"+me+"</"+Re+">"},Me=function(me){me.write(W("")),me.close();var we=me.parentWindow.Object;return me=null,we},cn=function(){try{bi=new ActiveXObject("htmlfile")}catch(we){}cn="undefined"!=typeof document?document.domain&&bi?Me(bi):function(){var it,me=at("iframe");return me.style.display="none",yl.appendChild(me),me.src=String("javascript:"),(it=me.contentWindow.document).open(),it.write(W("document.F=Object")),it.close(),it.F}():Me(bi);for(var me=Ho.length;me--;)delete cn[va][Ho[me]];return cn()};pr[J]=!0;var Xn=Object.create||function(we,it){var Dt;return null!==we?(H[va]=$t(we),Dt=new H,H[va]=null,Dt[J]=we):Dt=cn(),void 0===it?Dt:ms(Dt,it)},wr=d.RegExp,Vr=C(function(){var me=wr(".","s");return!(me.dotAll&&me.exec("\n")&&"s"===me.flags)}),Fr=d.RegExp,to=C(function(){var me=Fr("(?<a>b)","g");return"b"!==me.exec("b").groups.a||"bc"!=="b".replace(me,"$<a>c")}),fr=ot.get,es=ei("native-string-replace",String.prototype.replace),Vn=RegExp.prototype.exec,Us=Vn,Ba=ye("".charAt),ts=ye("".indexOf),cl=ye("".replace),Gs=ye("".slice),ea=function(){var me=/a/,we=/b*/g;return z(Vn,me,"a"),z(Vn,we,"a"),0!==me.lastIndex||0!==we.lastIndex}(),Hc=us.UNSUPPORTED_Y||us.BROKEN_CARET,Ue=void 0!==/()??/.exec("")[1];(ea||Ue||Hc||Vr||to)&&(Us=function(we){var Qt,si,ki,Ii,Wi,Qn,Un,it=this,Dt=fr(it),Vt=Pr(we),hi=Dt.raw;if(hi)return hi.lastIndex=it.lastIndex,Qt=z(Us,hi,Vt),it.lastIndex=hi.lastIndex,Qt;var ir=Dt.groups,Zo=Hc&&it.sticky,Mo=z(la,it),Zr=it.source,ho=0,Go=Vt;if(Zo&&(Mo=cl(Mo,"y",""),-1===ts(Mo,"g")&&(Mo+="g"),Go=Gs(Vt,it.lastIndex),it.lastIndex>0&&(!it.multiline||it.multiline&&"\n"!==Ba(Vt,it.lastIndex-1))&&(Zr="(?: "+Zr+")",Go=" "+Go,ho++),si=new RegExp("^(?:"+Zr+")",Mo)),Ue&&(si=new RegExp("^"+Zr+"$(?!\\s)",Mo)),ea&&(ki=it.lastIndex),Ii=z(Vn,Zo?si:it,Go),Zo?Ii?(Ii.input=Gs(Ii.input,ho),Ii[0]=Gs(Ii[0],ho),Ii.index=it.lastIndex,it.lastIndex+=Ii[0].length):it.lastIndex=0:ea&&Ii&&(it.lastIndex=it.global?Ii.index+Ii[0].length:ki),Ue&&Ii&&Ii.length>1&&z(es,Ii[0],si,function(){for(Wi=1;Wi<arguments.length-2;Wi++)void 0===arguments[Wi]&&(Ii[Wi]=void 0)}),Ii&&ir)for(Ii.groups=Qn=Xn(null),Wi=0;Wi<ir.length;Wi++)Qn[(Un=ir[Wi])[0]]=Ii[Un[1]];return Ii});var K=Us;yo({target:"RegExp",proto:!0,forced:/./.exec!==K},{exec:K});var fe=_i("species"),Qe=RegExp.prototype,bt=function(me,we,it,Dt){var Vt=_i(me),hi=!C(function(){var Ii={};return Ii[Vt]=function(){return 7},7!=""[me](Ii)}),Qt=hi&&!C(function(){var Ii=!1,Wi=/a/;return"split"===me&&((Wi={}).constructor={},Wi.constructor[fe]=function(){return Wi},Wi.flags="",Wi[Vt]=/./[Vt]),Wi.exec=function(){return Ii=!0,null},Wi[Vt](""),!Ii});if(!hi||!Qt||it){var si=ye(/./[Vt]),ki=we(Vt,""[me],function(Ii,Wi,Qn,Un,ir){var Zo=ye(Ii),Mo=Wi.exec;return Mo===K||Mo===Qe.exec?hi&&!ir?{done:!0,value:si(Wi,Qn,Un)}:{done:!0,value:Zo(Qn,Wi,Un)}:{done:!1}});sr(String.prototype,me,ki[0]),sr(Qe,Vt,ki[1])}Dt&&In(Qe[Vt],"sham",!0)},Yt=ye("".charAt),qt=ye("".charCodeAt),vi=ye("".slice),Fi=function(me){return function(we,it){var Qt,si,Dt=Pr(ie(we)),Vt=Yo(it),hi=Dt.length;return Vt<0||Vt>=hi?me?"":void 0:(Qt=qt(Dt,Vt))<55296||Qt>56319||Vt+1===hi||(si=qt(Dt,Vt+1))<56320||si>57343?me?Yt(Dt,Vt):Qt:me?vi(Dt,Vt,Vt+2):si-56320+(Qt-55296<<10)+65536}},Cn=(Fi(!1),Fi(!0)),er=function(me,we,it){return we+(it?Cn(me,we).length:1)},tr=d.TypeError,Pn=function(me,we){var it=me.exec;if(Oe(it)){var Dt=z(it,me,we);return null!==Dt&&$t(Dt),Dt}if("RegExp"===ae(me))return z(K,me,we);throw tr("RegExp#exec called on incompatible receiver")};bt("match",function(me,we,it){return[function(Vt){var hi=ie(this),Qt=null==Vt?void 0:et(Vt,me);return Qt?z(Qt,Vt,hi):new RegExp(Vt)[me](Pr(hi))},function(Dt){var Vt=$t(this),hi=Pr(Dt),Qt=it(we,Vt,hi);if(Qt.done)return Qt.value;if(!Vt.global)return Pn(Vt,hi);var si=Vt.unicode;Vt.lastIndex=0;for(var Wi,ki=[],Ii=0;null!==(Wi=Pn(Vt,hi));){var Qn=Pr(Wi[0]);ki[Ii]=Qn,""===Qn&&(Vt.lastIndex=er(hi,Xo(Vt.lastIndex),si)),Ii++}return 0===Ii?null:ki}]});var rr=Array.isArray||function(we){return"Array"==ae(we)},ar=function(me,we,it){var Dt=Ae(we);Dt in me?fn.f(me,Dt,_e(0,it)):me[Dt]=it},Dr=function(){},Yr=[],oo=vt("Reflect","construct"),ko=/^\s*(?:class|function)\b/,Ha=ye(ko.exec),Ws=!ko.exec(Dr),Co=function(me){if(!Oe(me))return!1;try{return oo(Dr,Yr,me),!0}catch(we){return!1}},os=!oo||C(function(){var me;return Co(Co.call)||!Co(Object)||!Co(function(){me=!0})||me})?function(me){if(!Oe(me))return!1;switch(lo(me)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Ws||!!Ha(ko,Tr(me))}:Co,Rs=_i("species"),ul=d.Array,js=function(me,we){return new(function(me){var we;return rr(me)&&(os(we=me.constructor)&&(we===ul||rr(we.prototype))||ke(we)&&null===(we=we[Rs]))&&(we=void 0),void 0===we?ul:we}(me))(0===we?0:we)},co=_i("species"),Ja=function(me){return Be>=51||!C(function(){var we=[];return(we.constructor={})[co]=function(){return{foo:1}},1!==we[me](Boolean).foo})},xn=_i("isConcatSpreadable"),On=9007199254740991,lr="Maximum allowed index exceeded",hr=d.TypeError,Cr=Be>=51||!C(function(){var me=[];return me[xn]=!1,me.concat()[0]!==me}),is=Ja("concat"),Ar=function(me){if(!ke(me))return!1;var we=me[xn];return void 0!==we?!!we:rr(me)};yo({target:"Array",proto:!0,forced:!Cr||!is},{concat:function(we){var hi,Qt,si,ki,Ii,it=Ni(this),Dt=js(it,0),Vt=0;for(hi=-1,si=arguments.length;hi<si;hi++)if(Ar(Ii=-1===hi?it:arguments[hi])){if(Vt+(ki=$r(Ii))>On)throw hr(lr);for(Qt=0;Qt<ki;Qt++,Vt++)Qt in Ii&&ar(Dt,Vt,Ii[Qt])}else{if(Vt>=On)throw hr(lr);ar(Dt,Vt++,Ii)}return Dt.length=Vt,Dt}}),Ds||sr(Object.prototype,"toString",Ds?{}.toString:function(){return"[object "+lo(this)+"]"},{unsafe:!0});var El=Yn.PROPER,Za="toString",Ur=RegExp.prototype,ua=Ur[Za],_s=ye(la);(C(function(){return"/a/b"!=ua.call({source:"a",flags:"b"})})||El&&ua.name!=Za)&&sr(RegExp.prototype,Za,function(){var we=$t(this),it=Pr(we.source),Dt=we.flags;return"/"+it+"/"+Pr(void 0===Dt&&lt(Ur,we)&&!("flags"in Ur)?_s(we):Dt)},{unsafe:!0});var ba=Function.prototype,Ol=ba.apply,vs=ba.call,ns="object"==typeof Reflect&&Reflect.apply||(ba.bind?vs.bind(Ol):function(){return vs.apply(Ol,arguments)}),ia=_i("match"),Qa=function(me){var we;return ke(me)&&(void 0!==(we=me[ia])?!!we:"RegExp"==ae(me))},Ra=d.TypeError,Aa=_i("species"),kl=function(me,we){var Dt,it=$t(me).constructor;return void 0===it||null==(Dt=$t(it)[Aa])?we:function(me){if(os(me))return me;throw Ra(jt(me)+" is not a constructor")}(Dt)},jl=ye([].slice),Va=us.UNSUPPORTED_Y,qa=4294967295,_c=Math.min,zl=[].push,da=ye(/./.exec),Ua=ye(zl),Ys=ye("".slice),Ia=!C(function(){var me=/(?:)/,we=me.exec;me.exec=function(){return we.apply(this,arguments)};var it="ab".split(me);return 2!==it.length||"a"!==it[0]||"b"!==it[1]});function Is(me,we){if(me instanceof SVGElement){var it=me.getAttribute("class")||"";it.match(we)||me.setAttribute("class","".concat(it," ").concat(we))}else void 0!==me.classList?m(we.split(" "),function(Vt){me.classList.add(Vt)}):me.className.match(we)||(me.className+=" ".concat(we))}function Oa(me,we){var it="";return me.currentStyle?it=me.currentStyle[we]:document.defaultView&&document.defaultView.getComputedStyle&&(it=document.defaultView.getComputedStyle(me,null).getPropertyValue(we)),it&&it.toLowerCase?it.toLowerCase():it}function Ll(me){var we=me.element;if(this._options.scrollToElement){var it=function(me){var we=window.getComputedStyle(me),it="absolute"===we.position,Dt=/(auto|scroll)/;if("fixed"===we.position)return document.body;for(var Vt=me;Vt=Vt.parentElement;)if(we=window.getComputedStyle(Vt),(!it||"static"!==we.position)&&Dt.test(we.overflow+we.overflowY+we.overflowX))return Vt;return document.body}(we);it!==document.body&&(it.scrollTop=we.offsetTop-it.offsetTop)}}function vc(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var me=document.documentElement;return{width:me.clientWidth,height:me.clientHeight}}function he(me,we,it){var Vt,Dt=we.element;if("off"!==me&&this._options.scrollToElement&&(Vt="tooltip"===me?it.getBoundingClientRect():Dt.getBoundingClientRect(),!function(me){var we=me.getBoundingClientRect();return we.top>=0&&we.left>=0&&we.bottom+80<=window.innerHeight&&we.right<=window.innerWidth}(Dt))){var hi=vc().height;Vt.bottom-(Vt.bottom-Vt.top)<0||Dt.clientHeight>hi?window.scrollBy(0,Vt.top-(hi/2-Vt.height/2)-this._options.scrollPadding):window.scrollBy(0,Vt.top-(hi/2-Vt.height/2)+this._options.scrollPadding)}}function te(me){me.setAttribute("role","button"),me.tabIndex=0}bt("split",function(me,we,it){var Dt;return Dt="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Vt,hi){var Qt=Pr(ie(this)),si=void 0===hi?qa:hi>>>0;if(0===si)return[];if(void 0===Vt)return[Qt];if(!Qa(Vt))return z(we,Qt,Vt,si);for(var Un,ir,Zo,ki=[],Wi=0,Qn=new RegExp(Vt.source,(Vt.ignoreCase?"i":"")+(Vt.multiline?"m":"")+(Vt.unicode?"u":"")+(Vt.sticky?"y":"")+"g");(Un=z(K,Qn,Qt))&&!((ir=Qn.lastIndex)>Wi&&(Ua(ki,Ys(Qt,Wi,Un.index)),Un.length>1&&Un.index<Qt.length&&ns(zl,ki,jl(Un,1)),Zo=Un[0].length,Wi=ir,ki.length>=si));)Qn.lastIndex===Un.index&&Qn.lastIndex++;return Wi===Qt.length?(Zo||!da(Qn,""))&&Ua(ki,""):Ua(ki,Ys(Qt,Wi)),ki.length>si?jl(ki,0,si):ki}:"0".split(void 0,0).length?function(Vt,hi){return void 0===Vt&&0===hi?[]:z(we,this,Vt,hi)}:we,[function(hi,Qt){var si=ie(this),ki=null==hi?void 0:et(hi,me);return ki?z(ki,hi,si,Qt):z(Dt,Pr(si),hi,Qt)},function(Vt,hi){var Qt=$t(this),si=Pr(Vt),ki=it(Dt,Qt,si,hi,Dt!==we);if(ki.done)return ki.value;var Ii=kl(Qt,RegExp),Wi=Qt.unicode,Un=new Ii(Va?"^(?:"+Qt.source+")":Qt,(Qt.ignoreCase?"i":"")+(Qt.multiline?"m":"")+(Qt.unicode?"u":"")+(Va?"g":"y")),ir=void 0===hi?qa:hi>>>0;if(0===ir)return[];if(0===si.length)return null===Pn(Un,si)?[si]:[];for(var Zo=0,Mo=0,Zr=[];Mo<si.length;){Un.lastIndex=Va?0:Mo;var Go,ho=Pn(Un,Va?Ys(si,Mo):si);if(null===ho||(Go=_c(Xo(Un.lastIndex+(Va?Mo:0)),si.length))===Zo)Mo=er(si,Mo,Wi);else{if(Ua(Zr,Ys(si,Zo,Mo)),Zr.length===ir)return Zr;for(var po=1;po<=ho.length-1;po++)if(Ua(Zr,ho[po]),Zr.length===ir)return Zr;Mo=Zo=Go}}return Ua(Zr,Ys(si,Zo)),Zr}]},!Ia,Va);var Q=Object.assign,De=Object.defineProperty,je=ye([].concat),gt=!Q||C(function(){if(D&&1!==Q({b:1},Q(De({},"a",{enumerable:!0,get:function(){De(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var me={},we={},it=Symbol(),Dt="abcdefghijklmnopqrst";return me[it]=7,Dt.split("").forEach(function(Vt){we[Vt]=Vt}),7!=Q({},me)[it]||$o(Q({},we)).join("")!=Dt})?function(we,it){for(var Dt=Ni(we),Vt=arguments.length,hi=1,Qt=ma.f,si=Ge.f;Vt>hi;)for(var Un,ki=Ee(arguments[hi++]),Ii=Qt?je($o(ki),Qt(ki)):$o(ki),Wi=Ii.length,Qn=0;Wi>Qn;)Un=Ii[Qn++],(!D||z(si,ki,Un))&&(Dt[Un]=ki[Un]);return Dt}:Q;function Ut(me){var we=me.parentNode;return!(!we||"HTML"===we.nodeName)&&("fixed"===Oa(me,"position")||Ut(we))}function ti(me,we){var it=document.body,Dt=document.documentElement,Vt=window.pageYOffset||Dt.scrollTop||it.scrollTop,hi=window.pageXOffset||Dt.scrollLeft||it.scrollLeft;we=we||it;var Qt=me.getBoundingClientRect(),si=we.getBoundingClientRect(),ki=Oa(we,"position"),Ii={width:Qt.width,height:Qt.height};return"body"!==we.tagName.toLowerCase()&&"relative"===ki||"sticky"===ki?Object.assign(Ii,{top:Qt.top-si.top,left:Qt.left-si.left}):Ut(me)?Object.assign(Ii,{top:Qt.top,left:Qt.left}):Object.assign(Ii,{top:Qt.top+Vt,left:Qt.left+hi})}yo({target:"Object",stat:!0,forced:Object.assign!==gt},{assign:gt});var Li=Math.floor,wn=ye("".charAt),yr=ye("".replace),jn=ye("".slice),Jr=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,uo=/\$([$&'`]|\d{1,2})/g,Tl=function(me,we,it,Dt,Vt,hi){var Qt=it+me.length,si=Dt.length,ki=uo;return void 0!==Vt&&(Vt=Ni(Vt),ki=Jr),yr(hi,ki,function(Ii,Wi){var Qn;switch(wn(Wi,0)){case"$":return"$";case"&":return me;case"`":return jn(we,0,it);case"'":return jn(we,Qt);case"<":Qn=Vt[jn(Wi,1,-1)];break;default:var Un=+Wi;if(0===Un)return Ii;if(Un>si){var ir=Li(Un/10);return 0===ir?Ii:ir<=si?void 0===Dt[ir-1]?wn(Wi,1):Dt[ir-1]+wn(Wi,1):Ii}Qn=Dt[Un-1]}return void 0===Qn?"":Qn})},Xs=_i("replace"),ya=Math.max,Vo=Math.min,el=ye([].concat),Ks=ye([].push),Ea=ye("".indexOf),Ga=ye("".slice),Cu=function(me){return void 0===me?me:String(me)},$s="$0"==="a".replace(/./,"$0"),ec=!!/./[Xs]&&""===/./[Xs]("a","$0"),ds=!C(function(){var me=/./;return me.exec=function(){var we=[];return we.groups={a:"7"},we},"7"!=="".replace(me,"$<a>")});function Lo(me,we){if(me instanceof SVGElement){var it=me.getAttribute("class")||"";me.setAttribute("class",it.replace(we,"").replace(/^\s+|\s+$/g,""))}else me.className=me.className.replace(we,"").replace(/^\s+|\s+$/g,"")}function Po(me,we){var it="";if(me.style.cssText&&(it+=me.style.cssText),"string"==typeof we)it+=we;else for(var Dt in we)it+="".concat(Dt,":").concat(we[Dt],";");me.style.cssText=it}function qr(me){if(me){if(!this._introItems[this._currentStep])return;var we=this._introItems[this._currentStep],it=ti(we.element,this._targetElement),Dt=this._options.helperElementPadding;Ut(we.element)?Is(me,"introjs-fixedTooltip"):Lo(me,"introjs-fixedTooltip"),"floating"===we.position&&(Dt=0),Po(me,{width:"".concat(it.width+Dt,"px"),height:"".concat(it.height+Dt,"px"),top:"".concat(it.top-Dt/2,"px"),left:"".concat(it.left-Dt/2,"px")})}}bt("replace",function(me,we,it){var Dt=ec?"$":"$0";return[function(hi,Qt){var si=ie(this),ki=null==hi?void 0:et(hi,Xs);return ki?z(ki,hi,si,Qt):z(we,Pr(si),hi,Qt)},function(Vt,hi){var Qt=$t(this),si=Pr(Vt);if("string"==typeof hi&&-1===Ea(hi,Dt)&&-1===Ea(hi,"$<")){var ki=it(we,Qt,si,hi);if(ki.done)return ki.value}var Ii=Oe(hi);Ii||(hi=Pr(hi));var Wi=Qt.global;if(Wi){var Qn=Qt.unicode;Qt.lastIndex=0}for(var Un=[];;){var ir=Pn(Qt,si);if(null===ir||(Ks(Un,ir),!Wi))break;""===Pr(ir[0])&&(Qt.lastIndex=er(si,Xo(Qt.lastIndex),Qn))}for(var Mo="",Zr=0,ho=0;ho<Un.length;ho++){for(var Go=Pr((ir=Un[ho])[0]),po=ya(Vo(Yo(ir.index),si.length),0),sa=[],ys=1;ys<ir.length;ys++)Ks(sa,Cu(ir[ys]));var hs=ir.groups;if(Ii){var ml=el([Go],sa,po,si);void 0!==hs&&Ks(ml,hs);var ou=Pr(ns(hi,void 0,ml))}else ou=Tl(Go,si,po,sa,hs,hi);po>=Zr&&(Mo+=Ga(si,Zr,po)+ou,Zr=po+Go.length)}return Mo+Ga(si,Zr)}]},!ds||!$s||ec);var tc=_i("unscopables"),Tu=Array.prototype;null==Tu[tc]&&fn.f(Tu,tc,{configurable:!0,value:Xn(null)});var Uc=Ss.includes;yo({target:"Array",proto:!0},{includes:function(we){return Uc(this,we,arguments.length>1?arguments[1]:void 0)}}),function(me){Tu[tc][me]=!0}("includes");var wu=Ja("slice"),ic=_i("species"),bc=d.Array,sd=Math.max;yo({target:"Array",proto:!0,forced:!wu},{slice:function(we,it){var si,ki,Ii,Dt=ht(this),Vt=$r(Dt),hi=Qs(we,Vt),Qt=Qs(void 0===it?Vt:it,Vt);if(rr(Dt)&&((os(si=Dt.constructor)&&(si===bc||rr(si.prototype))||ke(si)&&null===(si=si[ic]))&&(si=void 0),si===bc||void 0===si))return jl(Dt,hi,Qt);for(ki=new(void 0===si?bc:si)(sd(Qt-hi,0)),Ii=0;hi<Qt;hi++,Ii++)hi in Dt&&ar(ki,Ii,Dt[hi]);return ki.length=Ii,ki}});var Gu=d.TypeError,ad=function(me){if(Qa(me))throw Gu("The method doesn't accept regular expressions");return me},Yl=_i("match"),ss=ye("".indexOf);yo({target:"String",proto:!0,forced:!function(me){var we=/./;try{"/./"[me](we)}catch(it){try{return we[Yl]=!1,"/./"[me](we)}catch(Dt){}}return!1}("includes")},{includes:function(we){return!!~ss(Pr(ie(this)),Pr(ad(we)),arguments.length>1?arguments[1]:void 0)}});var yc=function(me,we){var it=[][me];return!!it&&C(function(){it.call(null,we||function(){throw 1},1)})},nc=ye([].join),Pl=Ee!=Object,Ca=yc("join",",");yo({target:"Array",proto:!0,forced:Pl||!Ca},{join:function(we){return nc(ht(this),void 0===we?",":we)}});var ha=ye(ye.bind),ka=ye([].push),Wa=function(me){var we=1==me,it=2==me,Dt=3==me,Vt=4==me,hi=6==me,Qt=7==me,si=5==me||hi;return function(ki,Ii,Wi,Qn){for(var po,sa,Un=Ni(ki),ir=Ee(Un),Zo=function(me,we){return Rt(me),void 0===we?me:ha?ha(me,we):function(){return me.apply(we,arguments)}}(Ii,Wi),Mo=$r(ir),Zr=0,ho=Qn||js,Go=we?ho(ki,Mo):it||Qt?ho(ki,0):void 0;Mo>Zr;Zr++)if((si||Zr in ir)&&(sa=Zo(po=ir[Zr],Zr,Un),me))if(we)Go[Zr]=sa;else if(sa)switch(me){case 3:return!0;case 5:return po;case 6:return Zr;case 2:ka(Go,po)}else switch(me){case 4:return!1;case 7:ka(Go,po)}return hi?-1:Dt||Vt?Vt:Go}},iu=[Wa(0),Wa(1),Wa(2),Wa(3),Wa(4),Wa(5),Wa(6),Wa(7)][2];function Gr(me,we,it,Dt,Vt){return me.left+we+it.width>Dt.width?(Vt.style.left="".concat(Dt.width-it.width-me.left,"px"),!1):(Vt.style.left="".concat(we,"px"),!0)}function Ta(me,we,it,Dt){return me.left+me.width-we-it.width<0?(Dt.style.left="".concat(-me.left,"px"),!1):(Dt.style.right="".concat(we,"px"),!0)}yo({target:"Array",proto:!0,forced:!Ja("filter")},{filter:function(we){return iu(this,we,arguments.length>1?arguments[1]:void 0)}});var rc=Ja("splice"),Fl=d.TypeError,bs=Math.max,tl=Math.min,oc=9007199254740991,Cd="Maximum allowed length exceeded";function La(me,we){me.includes(we)&&me.splice(me.indexOf(we),1)}function sc(me,we,it){var Dt=this._options.positionPrecedence.slice(),Vt=vc(),hi=ti(we).height+10,Qt=ti(we).width+20,si=me.getBoundingClientRect(),ki="floating";si.bottom+hi>Vt.height&&La(Dt,"bottom"),si.top-hi<0&&La(Dt,"top"),si.right+Qt>Vt.width&&La(Dt,"right"),si.left-Qt<0&&La(Dt,"left");var Wi,Qn,Ii=-1!==(Qn=(Wi=it||"").indexOf("-"))?Wi.substr(Qn):"";return it&&(it=it.split("-")[0]),Dt.length&&(ki=Dt.includes(it)?it:Dt[0]),["top","bottom"].includes(ki)&&(ki+=function(me,we,it,Dt){var hi=we/2,Qt=Math.min(it.width,window.screen.width),si=["-left-aligned","-middle-aligned","-right-aligned"];return Qt-me<we&&La(si,"-left-aligned"),(me<hi||Qt-me<hi)&&La(si,"-middle-aligned"),me<we&&La(si,"-right-aligned"),si.length?si.includes(Dt)?Dt:si[0]:"-middle-aligned"}(si.left,Qt,Vt,Ii)),ki}function Os(me,we,it,Dt){var hi,Qt,si,ki,Ii;if(Dt=Dt||!1,we.style.top=null,we.style.right=null,we.style.bottom=null,we.style.left=null,we.style.marginLeft=null,we.style.marginTop=null,it.style.display="inherit",this._introItems[this._currentStep])switch(we.className=["introjs-tooltip","string"==typeof(hi=this._introItems[this._currentStep]).tooltipClass?hi.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),we.setAttribute("role","dialog"),"floating"!==(Ii=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(Ii=sc.call(this,me,we,Ii)),si=ti(me),Qt=ti(we),ki=vc(),Is(we,"introjs-".concat(Ii)),Ii){case"top-right-aligned":it.className="introjs-arrow bottom-right";var Qn=0;Ta(si,Qn,Qt,we),we.style.bottom="".concat(si.height+20,"px");break;case"top-middle-aligned":it.className="introjs-arrow bottom-middle";var Un=si.width/2-Qt.width/2;Dt&&(Un+=5),Ta(si,Un,Qt,we)&&(we.style.right=null,Gr(si,Un,Qt,ki,we)),we.style.bottom="".concat(si.height+20,"px");break;case"top-left-aligned":case"top":it.className="introjs-arrow bottom",Gr(si,Dt?0:15,Qt,ki,we),we.style.bottom="".concat(si.height+20,"px");break;case"right":we.style.left="".concat(si.width+20,"px"),si.top+Qt.height>ki.height?(it.className="introjs-arrow left-bottom",we.style.top="-".concat(Qt.height-si.height-20,"px")):it.className="introjs-arrow left";break;case"left":!Dt&&!0===this._options.showStepNumbers&&(we.style.top="15px"),si.top+Qt.height>ki.height?(we.style.top="-".concat(Qt.height-si.height-20,"px"),it.className="introjs-arrow right-bottom"):it.className="introjs-arrow right",we.style.right="".concat(si.width+20,"px");break;case"floating":it.style.display="none",we.style.left="50%",we.style.top="50%",we.style.marginLeft="-".concat(Qt.width/2,"px"),we.style.marginTop="-".concat(Qt.height/2,"px");break;case"bottom-right-aligned":it.className="introjs-arrow top-right",Ta(si,Qn=0,Qt,we),we.style.top="".concat(si.height+20,"px");break;case"bottom-middle-aligned":it.className="introjs-arrow top-middle",Un=si.width/2-Qt.width/2,Dt&&(Un+=5),Ta(si,Un,Qt,we)&&(we.style.right=null,Gr(si,Un,Qt,ki,we)),we.style.top="".concat(si.height+20,"px");break;default:it.className="introjs-arrow top",Gr(si,0,Qt,ki,we),we.style.top="".concat(si.height+20,"px")}}function hl(){m(document.querySelectorAll(".introjs-showElement"),function(we){Lo(we,/introjs-[a-zA-Z]+/g)})}function Ir(me,we){var it=document.createElement(me);we=we||{};var Dt=/^(?:role|data-|aria-)/;for(var Vt in we){var hi=we[Vt];"style"===Vt?Po(it,hi):Vt.match(Dt)?it.setAttribute(Vt,hi):it[Vt]=hi}return it}function ac(me,we,it){if(it){var Dt=we.style.opacity||"1";Po(we,{opacity:"0"}),window.setTimeout(function(){Po(we,{opacity:Dt})},10)}me.appendChild(we)}function lc(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function Ec(){var me=document.querySelector(".introjs-disableInteraction");null===me&&(me=Ir("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(me)),qr.call(this,me)}function Gc(me){var we=this,it=Ir("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(it.style.display="none");var Dt=Ir("ul");Dt.setAttribute("role","tablist");var Vt=function(){we.goToStep(this.getAttribute("data-stepnumber"))};return m(this._introItems,function(hi,Qt){var si=hi.step,ki=Ir("li"),Ii=Ir("a");ki.setAttribute("role","presentation"),Ii.setAttribute("role","tab"),Ii.onclick=Vt,Qt===me.step-1&&(Ii.className="active"),te(Ii),Ii.innerHTML="&nbsp;",Ii.setAttribute("data-stepnumber",si),ki.appendChild(Ii),Dt.appendChild(ki)}),it.appendChild(Dt),it}function ra(me,we){if(this._options.showBullets){var it=document.querySelector(".introjs-bullets");it.parentNode.replaceChild(Gc.call(this,we),it)}}function Cc(me,we){this._options.showBullets&&(me.querySelector(".introjs-bullets li > a.active").className="",me.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(we.step,'"]')).className="active")}function No(){var me=Ir("div");me.className="introjs-progress",!1===this._options.showProgress&&(me.style.display="none");var we=Ir("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(we.className+=" "+this._options.progressBarAdditionalClass),we.setAttribute("role","progress"),we.setAttribute("aria-valuemin",0),we.setAttribute("aria-valuemax",100),we.setAttribute("aria-valuenow",lc.call(this)),we.style.cssText="width:".concat(lc.call(this),"%;"),me.appendChild(we),me}function Tc(me){me.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(lc.call(this),"%;"),me.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",lc.call(this))}function cc(me){var we=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,me.element);var Qt,si,ki,it=this,Dt=document.querySelector(".introjs-helperLayer"),Vt=document.querySelector(".introjs-tooltipReferenceLayer"),hi="introjs-helperLayer";if("string"==typeof me.highlightClass&&(hi+=" ".concat(me.highlightClass)),"string"==typeof this._options.highlightClass&&(hi+=" ".concat(this._options.highlightClass)),null!==Dt&&null!==Vt){var Ii=Vt.querySelector(".introjs-helperNumberLayer"),Wi=Vt.querySelector(".introjs-tooltiptext"),Qn=Vt.querySelector(".introjs-tooltip-title"),Un=Vt.querySelector(".introjs-arrow"),ir=Vt.querySelector(".introjs-tooltip");ki=Vt.querySelector(".introjs-skipbutton"),si=Vt.querySelector(".introjs-prevbutton"),Qt=Vt.querySelector(".introjs-nextbutton"),Dt.className=hi,ir.style.opacity=0,ir.style.display="none",Ll.call(it,me),qr.call(it,Dt),qr.call(it,Vt),hl(),it._lastShowElementTimer&&window.clearTimeout(it._lastShowElementTimer),it._lastShowElementTimer=window.setTimeout(function(){null!==Ii&&(Ii.innerHTML="".concat(me.step," of ").concat(we._introItems.length)),Wi.innerHTML=me.intro,Qn.innerHTML=me.title,ir.style.display="block",Os.call(it,me.element,ir,Un),Cc.call(it,Vt,me),Tc.call(it,Vt),ir.style.opacity=1,(null!=Qt&&/introjs-donebutton/gi.test(Qt.className)||null!=Qt)&&Qt.focus(),he.call(it,me.scrollTo,me,Wi)},350)}else{var Zo=Ir("div",{className:hi}),Mo=Ir("div",{className:"introjs-tooltipReferenceLayer"}),Zr=Ir("div",{className:"introjs-arrow"}),ho=Ir("div",{className:"introjs-tooltip"}),Go=Ir("div",{className:"introjs-tooltiptext"}),po=Ir("div",{className:"introjs-tooltip-header"}),sa=Ir("h1",{className:"introjs-tooltip-title"}),ys=Ir("div");Po(Zo,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(it._options.overlayOpacity.toString(),") 0 0 0 5000px")}),Ll.call(it,me),qr.call(it,Zo),qr.call(it,Mo),ac(this._targetElement,Zo,!0),ac(this._targetElement,Mo),Go.innerHTML=me.intro,sa.innerHTML=me.title,ys.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(ys.style.display="none"),po.appendChild(sa),ho.appendChild(po),ho.appendChild(Go),ho.appendChild(Gc.call(this,me)),ho.appendChild(No.call(this));var hs=Ir("div");!0===this._options.showStepNumbers&&(hs.className="introjs-helperNumberLayer",hs.innerHTML="".concat(me.step," of ").concat(this._introItems.length),ho.appendChild(hs)),ho.appendChild(Zr),Mo.appendChild(ho),(Qt=Ir("a")).onclick=function(){it._introItems.length-1!==it._currentStep?ja.call(it):/introjs-donebutton/gi.test(Qt.className)&&("function"==typeof it._introCompleteCallback&&it._introCompleteCallback.call(it,it._currentStep,"done"),fa.call(it,it._targetElement))},te(Qt),Qt.innerHTML=this._options.nextLabel,(si=Ir("a")).onclick=function(){0!==it._currentStep&&Js.call(it)},te(si),si.innerHTML=this._options.prevLabel,te(ki=Ir("a",{className:"introjs-skipbutton"})),ki.innerHTML=this._options.skipLabel,ki.onclick=function(){it._introItems.length-1===it._currentStep&&"function"==typeof it._introCompleteCallback&&it._introCompleteCallback.call(it,it._currentStep,"skip"),"function"==typeof it._introSkipCallback&&it._introSkipCallback.call(it),fa.call(it,it._targetElement)},po.appendChild(ki),this._introItems.length>1&&ys.appendChild(si),ys.appendChild(Qt),ho.appendChild(ys),Os.call(it,me.element,ho,Zr),he.call(this,me.scrollTo,me,ho)}var ml=it._targetElement.querySelector(".introjs-disableInteraction");ml&&ml.parentNode.removeChild(ml),me.disableInteraction&&Ec.call(it),0===this._currentStep&&this._introItems.length>1?(null!=Qt&&(Qt.className="".concat(this._options.buttonClass," introjs-nextbutton"),Qt.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=si&&(si.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=Qt&&Is(Qt,"introjs-fullbutton")):null!=si&&(si.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=si&&(si.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=Qt&&(Qt.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=si&&Is(si,"introjs-fullbutton")):null!=Qt&&(!0===this._options.nextToDone?(Qt.innerHTML=this._options.doneLabel,Is(Qt,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):Qt.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=si&&(si.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=Qt&&(Qt.className="".concat(this._options.buttonClass," introjs-nextbutton"),Qt.innerHTML=this._options.nextLabel)),null!=si&&si.setAttribute("role","button"),null!=Qt&&Qt.setAttribute("role","button"),null!=ki&&ki.setAttribute("role","button"),null!=Qt&&Qt.focus(),function(me){var we=me.element;Is(we,"introjs-showElement");var it=Oa(we,"position");"absolute"!==it&&"relative"!==it&&"sticky"!==it&&"fixed"!==it&&Is(we,"introjs-relativePosition")}(me),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,me.element)}function nu(me){this._currentStep=me-2,void 0!==this._introItems&&ja.call(this)}function uc(me){this._currentStepNumber=me,void 0!==this._introItems&&ja.call(this)}function ja(){var me=this;this._direction="forward",void 0!==this._currentStepNumber&&m(this._introItems,function(Dt,Vt){Dt.step===me._currentStepNumber&&(me._currentStep=Vt-1,me._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var we=this._introItems[this._currentStep],it=!0;return void 0!==this._introBeforeChangeCallback&&(it=this._introBeforeChangeCallback.call(this,we&&we.element)),!1===it?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void fa.call(this,this._targetElement)):void cc.call(this,we)}function Js(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var me=this._introItems[this._currentStep],we=!0;if(void 0!==this._introBeforeChangeCallback&&(we=this._introBeforeChangeCallback.call(this,me&&me.element)),!1===we)return++this._currentStep,!1;cc.call(this,me)}function dc(){return this._currentStep}function pl(me){var we=void 0===me.code?me.which:me.code;if(null===we&&(we=null===me.charCode?me.keyCode:me.charCode),"Escape"!==we&&27!==we||!0!==this._options.exitOnEsc){if("ArrowLeft"===we||37===we)Js.call(this);else if("ArrowRight"===we||39===we)ja.call(this);else if("Enter"===we||"NumpadEnter"===we||13===we){var it=me.target||me.srcElement;it&&it.className.match("introjs-prevbutton")?Js.call(this):it&&it.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),fa.call(this,this._targetElement)):it&&it.getAttribute("data-stepnumber")?it.click():ja.call(this),me.preventDefault?me.preventDefault():me.returnValue=!1}}else fa.call(this,this._targetElement)}function Jo(me){if(null===me||"object"!==Z(me)||void 0!==me.nodeType)return me;var we={};for(var it in me)we[it]=void 0!==window.jQuery&&me[it]instanceof window.jQuery?me[it]:Jo(me[it]);return we}function il(me){var we=document.querySelector(".introjs-hints");return we?we.querySelectorAll(me):[]}function hc(me){var we=il('.introjs-hint[data-step="'.concat(me,'"]'))[0];nl.call(this),we&&Is(we,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,me)}function wc(){var me=this;m(il(".introjs-hint"),function(it){hc.call(me,it.getAttribute("data-step"))})}function Wc(){var me=this,we=il(".introjs-hint");we&&we.length?m(we,function(it){ru.call(me,it.getAttribute("data-step"))}):jc.call(this,this._targetElement)}function ru(me){var we=il('.introjs-hint[data-step="'.concat(me,'"]'))[0];we&&Lo(we,/introjs-hidehint/g)}function oa(){var me=this;m(il(".introjs-hint"),function(it){Hl.call(me,it.getAttribute("data-step"))}),t.off(document,"click",nl,this,!1),t.off(window,"resize",pc,this,!0),this._hintsAutoRefreshFunction&&t.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function Hl(me){var we=il('.introjs-hint[data-step="'.concat(me,'"]'))[0];we&&we.parentNode.removeChild(we)}function Xl(){var me=this,we=this,it=document.querySelector(".introjs-hints");null===it&&(it=Ir("div",{className:"introjs-hints"}));m(this._introItems,function(Vt,hi){if(!document.querySelector('.introjs-hint[data-step="'.concat(hi,'"]'))){var Qt=Ir("a",{className:"introjs-hint"});te(Qt),Qt.onclick=function(hi){return function(Qt){var si=Qt||window.event;si.stopPropagation&&si.stopPropagation(),null!==si.cancelBubble&&(si.cancelBubble=!0),pa.call(we,hi)}}(hi),Vt.hintAnimation||Is(Qt,"introjs-hint-no-anim"),Ut(Vt.element)&&Is(Qt,"introjs-fixedhint");var si=Ir("div",{className:"introjs-hint-dot"}),ki=Ir("div",{className:"introjs-hint-pulse"});Qt.appendChild(si),Qt.appendChild(ki),Qt.setAttribute("data-step",hi),Vt.targetElement=Vt.element,Vt.element=Qt,Sc.call(me,Vt.hintPosition,Qt,Vt.targetElement),it.appendChild(Qt)}}),document.body.appendChild(it),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(me,we){var Dt,it=this;return function(){for(var Vt=arguments.length,hi=new Array(Vt),Qt=0;Qt<Vt;Qt++)hi[Qt]=arguments[Qt];clearTimeout(Dt),Dt=setTimeout(function(){me.apply(it,hi)},we)}}(function(){return pc.call(me)},this._options.hintAutoRefreshInterval),t.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function Sc(me,we,it){var Dt=we.style,Vt=ti.call(this,it);switch(me){default:case"top-left":Dt.left="".concat(Vt.left,"px"),Dt.top="".concat(Vt.top,"px");break;case"top-right":Dt.left="".concat(Vt.left+Vt.width-20,"px"),Dt.top="".concat(Vt.top,"px");break;case"bottom-left":Dt.left="".concat(Vt.left,"px"),Dt.top="".concat(Vt.top+Vt.height-20,"px");break;case"bottom-right":Dt.left="".concat(Vt.left+Vt.width-20,"px"),Dt.top="".concat(Vt.top+Vt.height-20,"px");break;case"middle-left":Dt.left="".concat(Vt.left,"px"),Dt.top="".concat(Vt.top+(Vt.height-20)/2,"px");break;case"middle-right":Dt.left="".concat(Vt.left+Vt.width-20,"px"),Dt.top="".concat(Vt.top+(Vt.height-20)/2,"px");break;case"middle-middle":Dt.left="".concat(Vt.left+(Vt.width-20)/2,"px"),Dt.top="".concat(Vt.top+(Vt.height-20)/2,"px");break;case"bottom-middle":Dt.left="".concat(Vt.left+(Vt.width-20)/2,"px"),Dt.top="".concat(Vt.top+Vt.height-20,"px");break;case"top-middle":Dt.left="".concat(Vt.left+(Vt.width-20)/2,"px"),Dt.top="".concat(Vt.top,"px")}}function pa(me){var we=document.querySelector('.introjs-hint[data-step="'.concat(me,'"]')),it=this._introItems[me];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,we,it,me);var Dt=nl.call(this);if(parseInt(Dt,10)!==me){var Vt=Ir("div",{className:"introjs-tooltip"}),hi=Ir("div"),Qt=Ir("div"),si=Ir("div");Vt.onclick=function(Wi){Wi.stopPropagation?Wi.stopPropagation():Wi.cancelBubble=!0},hi.className="introjs-tooltiptext";var ki=Ir("p");if(ki.innerHTML=it.hint,hi.appendChild(ki),this._options.hintShowButton){var Ii=Ir("a");Ii.className=this._options.buttonClass,Ii.setAttribute("role","button"),Ii.innerHTML=this._options.hintButtonLabel,Ii.onclick=hc.bind(this,me),hi.appendChild(Ii)}Qt.className="introjs-arrow",Vt.appendChild(Qt),Vt.appendChild(hi),this._currentStep=we.getAttribute("data-step"),si.className="introjs-tooltipReferenceLayer introjs-hintReference",si.setAttribute("data-step",we.getAttribute("data-step")),qr.call(this,si),si.appendChild(Vt),document.body.appendChild(si),Os.call(this,we,Vt,Qt,!0)}}function nl(){var me=document.querySelector(".introjs-hintReference");if(me){var we=me.getAttribute("data-step");return me.parentNode.removeChild(me),we}}function jc(me){var we=this;if(this._introItems=[],this._options.hints)m(this._options.hints,function(Dt){var Vt=Jo(Dt);"string"==typeof Vt.element&&(Vt.element=document.querySelector(Vt.element)),Vt.hintPosition=Vt.hintPosition||we._options.hintPosition,Vt.hintAnimation=Vt.hintAnimation||we._options.hintAnimation,null!==Vt.element&&we._introItems.push(Vt)});else{var it=me.querySelectorAll("*[data-hint]");if(!it||!it.length)return!1;m(it,function(Dt){var Vt=Dt.getAttribute("data-hintanimation");Vt=Vt?"true"===Vt:we._options.hintAnimation,we._introItems.push({element:Dt,hint:Dt.getAttribute("data-hint"),hintPosition:Dt.getAttribute("data-hintposition")||we._options.hintPosition,hintAnimation:Vt,tooltipClass:Dt.getAttribute("data-tooltipclass"),position:Dt.getAttribute("data-position")||we._options.tooltipPosition})})}Xl.call(this),t.on(document,"click",nl,this,!1),t.on(window,"resize",pc,this,!0)}function pc(){var me=this;m(this._introItems,function(we){var it=we.targetElement;void 0!==it&&Sc.call(me,we.hintPosition,we.element,it)})}yo({target:"Array",proto:!0,forced:!rc},{splice:function(we,it){var si,ki,Ii,Wi,Qn,Un,Dt=Ni(this),Vt=$r(Dt),hi=Qs(we,Vt),Qt=arguments.length;if(0===Qt?si=ki=0:1===Qt?(si=0,ki=Vt-hi):(si=Qt-2,ki=tl(bs(Yo(it),0),Vt-hi)),Vt+si-ki>oc)throw Fl(Cd);for(Ii=js(Dt,ki),Wi=0;Wi<ki;Wi++)(Qn=hi+Wi)in Dt&&ar(Ii,Wi,Dt[Qn]);if(Ii.length=ki,si<ki){for(Wi=hi;Wi<Vt-ki;Wi++)Un=Wi+si,(Qn=Wi+ki)in Dt?Dt[Un]=Dt[Qn]:delete Dt[Un];for(Wi=Vt;Wi>Vt-ki+si;Wi--)delete Dt[Wi-1]}else if(si>ki)for(Wi=Vt-ki;Wi>hi;Wi--)Un=Wi+si-1,(Qn=Wi+ki-1)in Dt?Dt[Un]=Dt[Qn]:delete Dt[Un];for(Wi=0;Wi<si;Wi++)Dt[Wi+hi]=arguments[Wi+2];return Dt.length=Vt-ki+si,Ii}});var zc=Math.floor,Dc=function(me,we){var it=me.length,Dt=zc(it/2);return it<8?wa(me,we):so(me,Dc(jl(me,0,Dt),we),Dc(jl(me,Dt),we),we)},wa=function(me,we){for(var Vt,hi,it=me.length,Dt=1;Dt<it;){for(hi=Dt,Vt=me[Dt];hi&&we(me[hi-1],Vt)>0;)me[hi]=me[--hi];hi!==Dt++&&(me[hi]=Vt)}return me},so=function(me,we,it,Dt){for(var Vt=we.length,hi=it.length,Qt=0,si=0;Qt<Vt||si<hi;)me[Qt+si]=Qt<Vt&&si<hi?Dt(we[Qt],it[si])<=0?we[Qt++]:it[si++]:Qt<Vt?we[Qt++]:it[si++];return me},Vl=Dc,Kl=Bt.match(/firefox\/(\d+)/i),Mc=!!Kl&&+Kl[1],Su=/MSIE|Trident/.test(Bt),gl=Bt.match(/AppleWebKit\/(\d+)\./),Du=!!gl&&+gl[1],$l=[],Mu=ye($l.sort),fc=ye($l.push),Yc=C(function(){$l.sort(void 0)}),wl=C(function(){$l.sort(null)}),Sl=yc("sort"),Dl=!C(function(){if(Be)return Be<70;if(!(Mc&&Mc>3)){if(Su)return!0;if(Du)return Du<603;var we,it,Dt,Vt,me="";for(we=65;we<76;we++){switch(it=String.fromCharCode(we),we){case 66:case 69:case 70:case 72:Dt=3;break;case 68:case 71:Dt=4;break;default:Dt=2}for(Vt=0;Vt<47;Vt++)$l.push({k:it+Vt,v:Dt})}for($l.sort(function(hi,Qt){return Qt.v-hi.v}),Vt=0;Vt<$l.length;Vt++)it=$l[Vt].k.charAt(0),me.charAt(me.length-1)!==it&&(me+=it);return"DGBEFHACIJK"!==me}});function za(me){var we=this,it=me.querySelectorAll("*[data-intro]"),Dt=[];if(this._options.steps)m(this._options.steps,function(Ii){var Wi=Jo(Ii);if(Wi.step=Dt.length+1,Wi.title=Wi.title||"","string"==typeof Wi.element&&(Wi.element=document.querySelector(Wi.element)),null==Wi.element){var Qn=document.querySelector(".introjsFloatingElement");null===Qn&&(Qn=Ir("div",{className:"introjsFloatingElement"}),document.body.appendChild(Qn)),Wi.element=Qn,Wi.position="floating"}Wi.position=Wi.position||we._options.tooltipPosition,Wi.scrollTo=Wi.scrollTo||we._options.scrollTo,void 0===Wi.disableInteraction&&(Wi.disableInteraction=we._options.disableInteraction),null!==Wi.element&&Dt.push(Wi)});else{var hi;if(it.length<1)return[];m(it,function(Ii){if((!we._options.group||Ii.getAttribute("data-intro-group")===we._options.group)&&"none"!==Ii.style.display){var Wi=parseInt(Ii.getAttribute("data-step"),10);hi=Ii.hasAttribute("data-disable-interaction")?!!Ii.getAttribute("data-disable-interaction"):we._options.disableInteraction,Wi>0&&(Dt[Wi-1]={element:Ii,title:Ii.getAttribute("data-title")||"",intro:Ii.getAttribute("data-intro"),step:parseInt(Ii.getAttribute("data-step"),10),tooltipClass:Ii.getAttribute("data-tooltipclass"),highlightClass:Ii.getAttribute("data-highlightclass"),position:Ii.getAttribute("data-position")||we._options.tooltipPosition,scrollTo:Ii.getAttribute("data-scrollto")||we._options.scrollTo,disableInteraction:hi})}});var Qt=0;m(it,function(Ii){if((!we._options.group||Ii.getAttribute("data-intro-group")===we._options.group)&&null===Ii.getAttribute("data-step")){for(;void 0!==Dt[Qt];)Qt++;hi=Ii.hasAttribute("data-disable-interaction")?!!Ii.getAttribute("data-disable-interaction"):we._options.disableInteraction,Dt[Qt]={element:Ii,title:Ii.getAttribute("data-title")||"",intro:Ii.getAttribute("data-intro"),step:Qt+1,tooltipClass:Ii.getAttribute("data-tooltipclass"),highlightClass:Ii.getAttribute("data-highlightclass"),position:Ii.getAttribute("data-position")||we._options.tooltipPosition,scrollTo:Ii.getAttribute("data-scrollto")||we._options.scrollTo,disableInteraction:hi}}})}for(var si=[],ki=0;ki<Dt.length;ki++)Dt[ki]&&si.push(Dt[ki]);return(Dt=si).sort(function(Ii,Wi){return Ii.step-Wi.step}),Dt}function Sa(me){var we=document.querySelector(".introjs-tooltipReferenceLayer"),it=document.querySelector(".introjs-helperLayer"),Dt=document.querySelector(".introjs-disableInteraction");if(qr.call(this,it),qr.call(this,we),qr.call(this,Dt),me&&(this._introItems=za.call(this,this._targetElement),ra.call(this,we,this._introItems[this._currentStep]),Tc.call(this,we)),null!=this._currentStep){var Vt=document.querySelector(".introjs-arrow"),hi=document.querySelector(".introjs-tooltip");hi&&Vt&&Os.call(this,this._introItems[this._currentStep].element,hi,Vt)}return pc.call(this),this}function rl(){Sa.call(this)}function Jl(me,we){if(me&&me.parentElement){var it=me.parentElement;we?(Po(me,{opacity:"0"}),window.setTimeout(function(){try{it.removeChild(me)}catch(Dt){}},500)):it.removeChild(me)}}function fa(me,we){var it=!0;if(void 0!==this._introBeforeExitCallback&&(it=this._introBeforeExitCallback.call(this)),we||!1!==it){var Dt=me.querySelectorAll(".introjs-overlay");Dt&&Dt.length&&m(Dt,function(ki){return Jl(ki)}),Jl(me.querySelector(".introjs-helperLayer"),!0),Jl(me.querySelector(".introjs-tooltipReferenceLayer")),Jl(me.querySelector(".introjs-disableInteraction")),Jl(document.querySelector(".introjsFloatingElement")),hl(),t.off(window,"keydown",pl,this,!0),t.off(window,"resize",rl,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function Ru(me){var we=this,it=Ir("div",{className:"introjs-overlay"});return Po(it,{top:0,bottom:0,left:0,right:0,position:"fixed"}),me.appendChild(it),!0===this._options.exitOnOverlayClick&&(Po(it,{cursor:"pointer"}),it.onclick=function(){fa.call(we,me)}),!0}function Ul(me){void 0!==this._introStartCallback&&this._introStartCallback.call(this,me);var we=za.call(this,me);return 0===we.length||(this._introItems=we,Ru.call(this,me)&&(ja.call(this),this._options.keyboardNavigation&&t.on(window,"keydown",pl,this,!0),t.on(window,"resize",rl,this,!0))),!1}function as(me){this._targetElement=me,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}yo({target:"Array",proto:!0,forced:Yc||!wl||!Sl||!Dl},{sort:function(we){void 0!==we&&Rt(we);var it=Ni(this);if(Dl)return void 0===we?Mu(it):Mu(it,we);var hi,Qt,Dt=[],Vt=$r(it);for(Qt=0;Qt<Vt;Qt++)Qt in it&&fc(Dt,it[Qt]);for(Vl(Dt,function(me){return function(we,it){return void 0===it?-1:void 0===we?1:void 0!==me?+me(we,it)||0:Pr(we)>Pr(it)?1:-1}}(we)),hi=Dt.length,Qt=0;Qt<hi;)it[Qt]=Dt[Qt++];for(;Qt<Vt;)delete it[Qt++];return it}});var xc=function me(we){var it;if("object"===Z(we))it=new as(we);else if("string"==typeof we){var Dt=document.querySelector(we);if(!Dt)throw new Error("There is no element with given selector.");it=new as(Dt)}else it=new as(document.body);return me.instances[E(it,"introjs-instance")]=it,it};return xc.version="4.3.0",xc.instances={},xc.fn=as.prototype={clone:function(){return new as(this)},setOption:function(we,it){return this._options[we]=it,this},setOptions:function(we){return this._options=function(me,we){var Dt,it={};for(Dt in me)it[Dt]=me[Dt];for(Dt in we)it[Dt]=we[Dt];return it}(this._options,we),this},start:function(){return Ul.call(this,this._targetElement),this},goToStep:function(we){return nu.call(this,we),this},addStep:function(we){return this._options.steps||(this._options.steps=[]),this._options.steps.push(we),this},addSteps:function(we){if(we.length){for(var it=0;it<we.length;it++)this.addStep(we[it]);return this}},goToStepNumber:function(we){return uc.call(this,we),this},nextStep:function(){return ja.call(this),this},previousStep:function(){return Js.call(this),this},currentStep:function(){return dc.call(this)},exit:function(we){return fa.call(this,this._targetElement,we),this},refresh:function(we){return Sa.call(this,we),this},onbeforechange:function(we){if("function"!=typeof we)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=we,this},onchange:function(we){if("function"!=typeof we)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=we,this},onafterchange:function(we){if("function"!=typeof we)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=we,this},oncomplete:function(we){if("function"!=typeof we)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=we,this},onhintsadded:function(we){if("function"!=typeof we)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=we,this},onhintclick:function(we){if("function"!=typeof we)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=we,this},onhintclose:function(we){if("function"!=typeof we)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=we,this},onstart:function(we){if("function"!=typeof we)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=we,this},onexit:function(we){if("function"!=typeof we)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=we,this},onskip:function(we){if("function"!=typeof we)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=we,this},onbeforeexit:function(we){if("function"!=typeof we)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=we,this},addHints:function(){return jc.call(this,this._targetElement),this},hideHint:function(we){return hc.call(this,we),this},hideHints:function(){return wc.call(this),this},showHint:function(we){return ru.call(this,we),this},showHints:function(){return Wc.call(this),this},removeHints:function(){return oa.call(this),this},removeHint:function(we){return Hl().call(this,we),this},showHintDialog:function(we){return pa.call(this,we),this}},xc}()},61135:(V,Z,g)=>{"use strict";g.d(Z,{X:()=>m});var E=g(77579);class m extends E.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:a}=this;if(e)throw n;return this._throwIfClosed(),a}next(e){super.next(this._value=e)}}},68306:(V,Z,g)=>{"use strict";g.d(Z,{y:()=>B});var E=g(70930),m=g(50727),t=g(48822),e=g(44671);var d=g(42416),C=g(30576),D=g(72806);let B=(()=>{class se{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const _e=new se;return _e.source=this,_e.operator=Ge,_e}subscribe(Ge,_e,Le){const We=function(se){return se&&se instanceof E.Lv||function(se){return se&&(0,C.m)(se.next)&&(0,C.m)(se.error)&&(0,C.m)(se.complete)}(se)&&(0,m.Nn)(se)}(Ge)?Ge:new E.Hp(Ge,_e,Le);return(0,D.x)(()=>{const{operator:$e,source:Te}=this;We.add($e?$e.call(We,Te):Te?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(_e){Ge.error(_e)}}forEach(Ge,_e){return new(_e=z(_e))((Le,We)=>{let $e;$e=this.subscribe(Te=>{try{Ge(Te)}catch(ye){We(ye),null==$e||$e.unsubscribe()}},We,Le)})}_subscribe(Ge){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(Ge)}[t.L](){return this}pipe(...Ge){return function(se){return 0===se.length?e.y:1===se.length?se[0]:function(Ge){return se.reduce((_e,Le)=>Le(_e),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=z(Ge))((_e,Le)=>{let We;this.subscribe($e=>We=$e,$e=>Le($e),()=>_e(We))})}}return se.create=Ie=>new se(Ie),se})();function z(se){var Ie;return null!==(Ie=null!=se?se:d.v.Promise)&&void 0!==Ie?Ie:Promise}},77579:(V,Z,g)=>{"use strict";g.d(Z,{x:()=>d});var E=g(68306),m=g(50727);const e=(0,g(83888).d)(D=>function(){D(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var n=g(38737),a=g(72806);let d=(()=>{class D extends E.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const oe=new C(this,this);return oe.operator=z,oe}_throwIfClosed(){if(this.closed)throw new e}next(z){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const oe=this.observers.slice();for(const be of oe)be.next(z)}})}error(z){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:oe}=this;for(;oe.length;)oe.shift().error(z)}})}complete(){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:oe,isStopped:be,observers:se}=this;return oe||be?m.Lc:(se.push(z),new m.w0(()=>(0,n.P)(se,z)))}_checkFinalizedStatuses(z){const{hasError:oe,thrownError:be,isStopped:se}=this;oe?z.error(be):se&&z.complete()}asObservable(){const z=new E.y;return z.source=this,z}}return D.create=(B,z)=>new C(B,z),D})();class C extends d{constructor(B,z){super(),this.destination=B,this.source=z}next(B){var z,oe;null===(oe=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===oe||oe.call(z,B)}error(B){var z,oe;null===(oe=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===oe||oe.call(z,B)}complete(){var B,z;null===(z=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===z||z.call(B)}_subscribe(B){var z,oe;return null!==(oe=null===(z=this.source)||void 0===z?void 0:z.subscribe(B))&&void 0!==oe?oe:m.Lc}}},70930:(V,Z,g)=>{"use strict";g.d(Z,{Hp:()=>be,Lv:()=>oe});var E=g(30576),m=g(50727),t=g(42416),e=g(87849),n=g(25032);const a=D("C",void 0,void 0);function D(Le,We,$e){return{kind:Le,value:We,error:$e}}var B=g(43410),z=g(72806);class oe extends m.w0{constructor(We){super(),this.isStopped=!1,We?(this.destination=We,(0,m.Nn)(We)&&We.add(this)):this.destination=_e}static create(We,$e,Te){return new be(We,$e,Te)}next(We){this.isStopped?Ge(D("N",We,void 0),this):this._next(We)}error(We){this.isStopped?Ge(D("E",void 0,We),this):(this.isStopped=!0,this._error(We))}complete(){this.isStopped?Ge(a,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(We){this.destination.next(We)}_error(We){try{this.destination.error(We)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class be extends oe{constructor(We,$e,Te){let ye;if(super(),(0,E.m)(We))ye=We;else if(We){let ne;({next:ye,error:$e,complete:Te}=We),this&&t.v.useDeprecatedNextContext?(ne=Object.create(We),ne.unsubscribe=()=>this.unsubscribe()):ne=We,ye=null==ye?void 0:ye.bind(ne),$e=null==$e?void 0:$e.bind(ne),Te=null==Te?void 0:Te.bind(ne)}this.destination={next:ye?se(ye):n.Z,error:se(null!=$e?$e:Ie),complete:Te?se(Te):n.Z}}}function se(Le,We){return(...$e)=>{try{Le(...$e)}catch(Te){t.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Te):(0,e.h)(Te)}}}function Ie(Le){throw Le}function Ge(Le,We){const{onStoppedNotification:$e}=t.v;$e&&B.z.setTimeout(()=>$e(Le,We))}const _e={closed:!0,next:n.Z,error:Ie,complete:n.Z}},50727:(V,Z,g)=>{"use strict";g.d(Z,{Lc:()=>a,w0:()=>n,Nn:()=>d});var E=g(30576);const t=(0,g(83888).d)(D=>function(z){D(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((oe,be)=>`${be+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var e=g(38737);class n{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const se of z)se.remove(this);else z.remove(this);const{initialTeardown:oe}=this;if((0,E.m)(oe))try{oe()}catch(se){B=se instanceof t?se.errors:[se]}const{_teardowns:be}=this;if(be){this._teardowns=null;for(const se of be)try{C(se)}catch(Ie){B=null!=B?B:[],Ie instanceof t?B=[...B,...Ie.errors]:B.push(Ie)}}if(B)throw new t(B)}}add(B){var z;if(B&&B!==this)if(this.closed)C(B);else{if(B instanceof n){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._teardowns=null!==(z=this._teardowns)&&void 0!==z?z:[]).push(B)}}_hasParent(B){const{_parentage:z}=this;return z===B||Array.isArray(z)&&z.includes(B)}_addParent(B){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(B),z):z?[z,B]:B}_removeParent(B){const{_parentage:z}=this;z===B?this._parentage=null:Array.isArray(z)&&(0,e.P)(z,B)}remove(B){const{_teardowns:z}=this;z&&(0,e.P)(z,B),B instanceof n&&B._removeParent(this)}}n.EMPTY=(()=>{const D=new n;return D.closed=!0,D})();const a=n.EMPTY;function d(D){return D instanceof n||D&&"closed"in D&&(0,E.m)(D.remove)&&(0,E.m)(D.add)&&(0,E.m)(D.unsubscribe)}function C(D){(0,E.m)(D)?D():D.unsubscribe()}},42416:(V,Z,g)=>{"use strict";g.d(Z,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},39841:(V,Z,g)=>{"use strict";g.d(Z,{a:()=>B});var E=g(68306),m=g(54742),t=g(32076),e=g(44671),n=g(83268),a=g(63269),d=g(31810),C=g(25403),D=g(39672);function B(...be){const se=(0,a.yG)(be),Ie=(0,a.jO)(be),{args:Ge,keys:_e}=(0,m.D)(be);if(0===Ge.length)return(0,t.D)([],se);const Le=new E.y(function(be,se,Ie=e.y){return Ge=>{oe(se,()=>{const{length:_e}=be,Le=new Array(_e);let We=_e,$e=_e;for(let Te=0;Te<_e;Te++)oe(se,()=>{const ye=(0,t.D)(be[Te],se);let ne=!1;ye.subscribe(new C.Q(Ge,ge=>{Le[Te]=ge,ne||(ne=!0,$e--),$e||Ge.next(Ie(Le.slice()))},()=>{--We||Ge.complete()}))},Ge)},Ge)}}(Ge,se,_e?We=>(0,d.n)(_e,We):e.y));return Ie?Le.pipe((0,n.Z)(Ie)):Le}function oe(be,se,Ie){be?(0,D.f)(Ie,be,se):se()}},97272:(V,Z,g)=>{"use strict";g.d(Z,{z:()=>n});var E=g(8189),t=g(63269),e=g(32076);function n(...a){return(0,E.J)(1)((0,e.D)(a,(0,t.yG)(a)))}},49770:(V,Z,g)=>{"use strict";g.d(Z,{P:()=>t});var E=g(68306),m=g(38421);function t(e){return new E.y(n=>{(0,m.Xf)(e()).subscribe(n)})}},60515:(V,Z,g)=>{"use strict";g.d(Z,{E:()=>m});const m=new(g(68306).y)(n=>n.complete())},4128:(V,Z,g)=>{"use strict";g.d(Z,{D:()=>C});var E=g(68306),m=g(54742),t=g(38421),e=g(63269),n=g(25403),a=g(83268),d=g(31810);function C(...D){const B=(0,e.jO)(D),{args:z,keys:oe}=(0,m.D)(D),be=new E.y(se=>{const{length:Ie}=z;if(!Ie)return void se.complete();const Ge=new Array(Ie);let _e=Ie,Le=Ie;for(let We=0;We<Ie;We++){let $e=!1;(0,t.Xf)(z[We]).subscribe(new n.Q(se,Te=>{$e||($e=!0,Le--),Ge[We]=Te},()=>_e--,void 0,()=>{(!_e||!$e)&&(Le||se.next(oe?(0,d.n)(oe,Ge):Ge),se.complete())}))}});return B?be.pipe((0,a.Z)(B)):be}},32076:(V,Z,g)=>{"use strict";g.d(Z,{D:()=>ge});var E=g(38421),m=g(39672),t=g(54482),e=g(25403);function n(ae,He=0){return(0,t.e)((Se,Ee)=>{Se.subscribe(new e.Q(Ee,ue=>(0,m.f)(Ee,ae,()=>Ee.next(ue),He),()=>(0,m.f)(Ee,ae,()=>Ee.complete(),He),ue=>(0,m.f)(Ee,ae,()=>Ee.error(ue),He)))})}function a(ae,He=0){return(0,t.e)((Se,Ee)=>{Ee.add(ae.schedule(()=>Se.subscribe(Ee),He))})}var D=g(68306),z=g(2202),oe=g(30576);function se(ae,He){if(!ae)throw new Error("Iterable cannot be null");return new D.y(Se=>{(0,m.f)(Se,He,()=>{const Ee=ae[Symbol.asyncIterator]();(0,m.f)(Se,He,()=>{Ee.next().then(ue=>{ue.done?Se.complete():Se.next(ue.value)})},0,!0)})})}var Ie=g(93670),Ge=g(28239),_e=g(81144),Le=g(26495),We=g(12206),$e=g(44532),Te=g(53260);function ge(ae,He){return He?function(ae,He){if(null!=ae){if((0,Ie.c)(ae))return function(ae,He){return(0,E.Xf)(ae).pipe(a(He),n(He))}(ae,He);if((0,_e.z)(ae))return function(ae,He){return new D.y(Se=>{let Ee=0;return He.schedule(function(){Ee===ae.length?Se.complete():(Se.next(ae[Ee++]),Se.closed||this.schedule())})})}(ae,He);if((0,Ge.t)(ae))return function(ae,He){return(0,E.Xf)(ae).pipe(a(He),n(He))}(ae,He);if((0,We.D)(ae))return se(ae,He);if((0,Le.T)(ae))return function(ae,He){return new D.y(Se=>{let Ee;return(0,m.f)(Se,He,()=>{Ee=ae[z.h](),(0,m.f)(Se,He,()=>{let ue,ie;try{({value:ue,done:ie}=Ee.next())}catch(ht){return void Se.error(ht)}ie?Se.complete():Se.next(ue)},0,!0)}),()=>(0,oe.m)(null==Ee?void 0:Ee.return)&&Ee.return()})}(ae,He);if((0,Te.L)(ae))return function(ae,He){return se((0,Te.Q)(ae),He)}(ae,He)}throw(0,$e.z)(ae)}(ae,He):(0,E.Xf)(ae)}},54968:(V,Z,g)=>{"use strict";g.d(Z,{R:()=>B});var E=g(38421),m=g(68306),t=g(95577),e=g(81144),n=g(30576),a=g(83268);const d=["addListener","removeListener"],C=["addEventListener","removeEventListener"],D=["on","off"];function B(Ie,Ge,_e,Le){if((0,n.m)(_e)&&(Le=_e,_e=void 0),Le)return B(Ie,Ge,_e).pipe((0,a.Z)(Le));const[We,$e]=function(Ie){return(0,n.m)(Ie.addEventListener)&&(0,n.m)(Ie.removeEventListener)}(Ie)?C.map(Te=>ye=>Ie[Te](Ge,ye,_e)):function(Ie){return(0,n.m)(Ie.addListener)&&(0,n.m)(Ie.removeListener)}(Ie)?d.map(z(Ie,Ge)):function(Ie){return(0,n.m)(Ie.on)&&(0,n.m)(Ie.off)}(Ie)?D.map(z(Ie,Ge)):[];if(!We&&(0,e.z)(Ie))return(0,t.z)(Te=>B(Te,Ge,_e))((0,E.Xf)(Ie));if(!We)throw new TypeError("Invalid event target");return new m.y(Te=>{const ye=(...ne)=>Te.next(1<ne.length?ne:ne[0]);return We(ye),()=>$e(ye)})}function z(Ie,Ge){return _e=>Le=>Ie[_e](Ge,Le)}},38421:(V,Z,g)=>{"use strict";g.d(Z,{Xf:()=>be});var E=g(35987),m=g(81144),t=g(28239),e=g(68306),n=g(93670),a=g(12206),d=g(44532),C=g(26495),D=g(53260),B=g(30576),z=g(87849),oe=g(48822);function be(Te){if(Te instanceof e.y)return Te;if(null!=Te){if((0,n.c)(Te))return function(Te){return new e.y(ye=>{const ne=Te[oe.L]();if((0,B.m)(ne.subscribe))return ne.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,m.z)(Te))return function(Te){return new e.y(ye=>{for(let ne=0;ne<Te.length&&!ye.closed;ne++)ye.next(Te[ne]);ye.complete()})}(Te);if((0,t.t)(Te))return function(Te){return new e.y(ye=>{Te.then(ne=>{ye.closed||(ye.next(ne),ye.complete())},ne=>ye.error(ne)).then(null,z.h)})}(Te);if((0,a.D)(Te))return Le(Te);if((0,C.T)(Te))return function(Te){return new e.y(ye=>{for(const ne of Te)if(ye.next(ne),ye.closed)return;ye.complete()})}(Te);if((0,D.L)(Te))return function(Te){return Le((0,D.Q)(Te))}(Te)}throw(0,d.z)(Te)}function Le(Te){return new e.y(ye=>{(function(Te,ye){var ne,ge,ae,He;return(0,E.mG)(this,void 0,void 0,function*(){try{for(ne=(0,E.KL)(Te);!(ge=yield ne.next()).done;)if(ye.next(ge.value),ye.closed)return}catch(Se){ae={error:Se}}finally{try{ge&&!ge.done&&(He=ne.return)&&(yield He.call(ne))}finally{if(ae)throw ae.error}}ye.complete()})})(Te,ye).catch(ne=>ye.error(ne))})}},56451:(V,Z,g)=>{"use strict";g.d(Z,{T:()=>a});var E=g(8189),m=g(38421),t=g(60515),e=g(63269),n=g(32076);function a(...d){const C=(0,e.yG)(d),D=(0,e._6)(d,1/0),B=d;return B.length?1===B.length?(0,m.Xf)(B[0]):(0,E.J)(D)((0,n.D)(B,C)):t.E}},39646:(V,Z,g)=>{"use strict";g.d(Z,{of:()=>t});var E=g(63269),m=g(32076);function t(...e){const n=(0,E.yG)(e);return(0,m.D)(e,n)}},5963:(V,Z,g)=>{"use strict";g.d(Z,{H:()=>n});var E=g(68306),m=g(34986),t=g(93532);function n(a=0,d,C=m.P){let D=-1;return null!=d&&((0,t.K)(d)?C=d:D=d),new E.y(B=>{let z=function(a){return a instanceof Date&&!isNaN(a)}(a)?+a-C.now():a;z<0&&(z=0);let oe=0;return C.schedule(function(){B.closed||(B.next(oe++),0<=D?this.schedule(void 0,D):B.complete())},z)})}},25403:(V,Z,g)=>{"use strict";g.d(Z,{Q:()=>m});var E=g(70930);class m extends E.Lv{constructor(e,n,a,d,C){super(e),this.onFinalize=C,this._next=n?function(D){try{n(D)}catch(B){e.error(B)}}:super._next,this._error=d?function(D){try{d(D)}catch(B){e.error(B)}finally{this.unsubscribe()}}:super._error,this._complete=a?function(){try{a()}catch(D){e.error(D)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}},70262:(V,Z,g)=>{"use strict";g.d(Z,{K:()=>e});var E=g(38421),m=g(25403),t=g(54482);function e(n){return(0,t.e)((a,d)=>{let B,C=null,D=!1;C=a.subscribe(new m.Q(d,void 0,void 0,z=>{B=(0,E.Xf)(n(z,e(n)(a))),C?(C.unsubscribe(),C=null,B.subscribe(d)):D=!0})),D&&(C.unsubscribe(),C=null,B.subscribe(d))})}},24351:(V,Z,g)=>{"use strict";g.d(Z,{b:()=>t});var E=g(95577),m=g(30576);function t(e,n){return(0,m.m)(n)?(0,E.z)(e,n,1):(0,E.z)(e,1)}},78372:(V,Z,g)=>{"use strict";g.d(Z,{b:()=>e});var E=g(34986),m=g(54482),t=g(25403);function e(n,a=E.z){return(0,m.e)((d,C)=>{let D=null,B=null,z=null;const oe=()=>{if(D){D.unsubscribe(),D=null;const se=B;B=null,C.next(se)}};function be(){const se=z+n,Ie=a.now();if(Ie<se)return D=this.schedule(void 0,se-Ie),void C.add(D);oe()}d.subscribe(new t.Q(C,se=>{B=se,z=a.now(),D||(D=a.schedule(be,n),C.add(D))},()=>{oe(),C.complete()},void 0,()=>{B=D=null}))})}},91005:(V,Z,g)=>{"use strict";g.d(Z,{g:()=>oe});var E=g(34986),m=g(97272),t=g(95698),e=g(54482),n=g(25403),a=g(25032),C=g(69718),D=g(95577);function B(be,se){return se?Ie=>(0,m.z)(se.pipe((0,t.q)(1),(0,e.e)((be,se)=>{be.subscribe(new n.Q(se,a.Z))})),Ie.pipe(B(be))):(0,D.z)((Ie,Ge)=>be(Ie,Ge).pipe((0,t.q)(1),(0,C.h)(Ie)))}var z=g(5963);function oe(be,se=E.z){const Ie=(0,z.H)(be,se);return B(()=>Ie)}},71884:(V,Z,g)=>{"use strict";g.d(Z,{x:()=>e});var E=g(44671),m=g(54482),t=g(25403);function e(a,d=E.y){return a=null!=a?a:n,(0,m.e)((C,D)=>{let B,z=!0;C.subscribe(new t.Q(D,oe=>{const be=d(oe);(z||!a(B,be))&&(z=!1,B=be,D.next(oe))}))})}function n(a,d){return a===d}},39300:(V,Z,g)=>{"use strict";g.d(Z,{h:()=>t});var E=g(54482),m=g(25403);function t(e,n){return(0,E.e)((a,d)=>{let C=0;a.subscribe(new m.Q(d,D=>e.call(n,D,C++)&&d.next(D)))})}},28746:(V,Z,g)=>{"use strict";g.d(Z,{x:()=>m});var E=g(54482);function m(t){return(0,E.e)((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}},54004:(V,Z,g)=>{"use strict";g.d(Z,{U:()=>t});var E=g(54482),m=g(25403);function t(e,n){return(0,E.e)((a,d)=>{let C=0;a.subscribe(new m.Q(d,D=>{d.next(e.call(n,D,C++))}))})}},69718:(V,Z,g)=>{"use strict";g.d(Z,{h:()=>m});var E=g(54004);function m(t){return(0,E.U)(()=>t)}},8189:(V,Z,g)=>{"use strict";g.d(Z,{J:()=>t});var E=g(95577),m=g(44671);function t(e=1/0){return(0,E.z)(m.y,e)}},95577:(V,Z,g)=>{"use strict";g.d(Z,{z:()=>C});var E=g(54004),m=g(38421),t=g(54482),n=(g(39672),g(25403)),d=g(30576);function C(D,B,z=1/0){return(0,d.m)(B)?C((oe,be)=>(0,E.U)((se,Ie)=>B(oe,se,be,Ie))((0,m.Xf)(D(oe,be))),z):("number"==typeof B&&(z=B),(0,t.e)((oe,be)=>function(D,B,z,oe,be,se,Ie,Ge){const _e=[];let Le=0,We=0,$e=!1;const Te=()=>{$e&&!_e.length&&!Le&&B.complete()},ye=ge=>Le<oe?ne(ge):_e.push(ge),ne=ge=>{Le++;let ae=!1;(0,m.Xf)(z(ge,We++)).subscribe(new n.Q(B,He=>{B.next(He)},()=>{ae=!0},void 0,()=>{if(ae)try{for(Le--;_e.length&&Le<oe;){const He=_e.shift();ne(He)}Te()}catch(He){B.error(He)}}))};return D.subscribe(new n.Q(B,ye,()=>{$e=!0,Te()})),()=>{}}(oe,be,D,z)))}},13099:(V,Z,g)=>{"use strict";g.d(Z,{B:()=>a});var E=g(32076),m=g(95698),t=g(77579),e=g(70930),n=g(54482);function a(C={}){const{connector:D=(()=>new t.x),resetOnError:B=!0,resetOnComplete:z=!0,resetOnRefCountZero:oe=!0}=C;return be=>{let se=null,Ie=null,Ge=null,_e=0,Le=!1,We=!1;const $e=()=>{null==Ie||Ie.unsubscribe(),Ie=null},Te=()=>{$e(),se=Ge=null,Le=We=!1},ye=()=>{const ne=se;Te(),null==ne||ne.unsubscribe()};return(0,n.e)((ne,ge)=>{_e++,!We&&!Le&&$e();const ae=Ge=null!=Ge?Ge:D();ge.add(()=>{_e--,0===_e&&!We&&!Le&&(Ie=d(ye,oe))}),ae.subscribe(ge),se||(se=new e.Hp({next:He=>ae.next(He),error:He=>{We=!0,$e(),Ie=d(Te,B,He),ae.error(He)},complete:()=>{Le=!0,$e(),Ie=d(Te,z),ae.complete()}}),(0,E.D)(ne).subscribe(se))})(be)}}function d(C,D,...B){return!0===D?(C(),null):!1===D?null:D(...B).pipe((0,m.q)(1)).subscribe(()=>C())}},35684:(V,Z,g)=>{"use strict";g.d(Z,{T:()=>m});var E=g(39300);function m(t){return(0,E.h)((e,n)=>t<=n)}},68675:(V,Z,g)=>{"use strict";g.d(Z,{O:()=>e});var E=g(97272),m=g(63269),t=g(54482);function e(...n){const a=(0,m.yG)(n);return(0,t.e)((d,C)=>{(a?(0,E.z)(n,d,a):(0,E.z)(n,d)).subscribe(C)})}},63900:(V,Z,g)=>{"use strict";g.d(Z,{w:()=>e});var E=g(38421),m=g(54482),t=g(25403);function e(n,a){return(0,m.e)((d,C)=>{let D=null,B=0,z=!1;const oe=()=>z&&!D&&C.complete();d.subscribe(new t.Q(C,be=>{null==D||D.unsubscribe();let se=0;const Ie=B++;(0,E.Xf)(n(be,Ie)).subscribe(D=new t.Q(C,Ge=>C.next(a?a(be,Ge,Ie,se++):Ge),()=>{D=null,oe()}))},()=>{z=!0,oe()}))})}},95698:(V,Z,g)=>{"use strict";g.d(Z,{q:()=>e});var E=g(60515),m=g(54482),t=g(25403);function e(n){return n<=0?()=>E.E:(0,m.e)((a,d)=>{let C=0;a.subscribe(new t.Q(d,D=>{++C<=n&&(d.next(D),n<=C&&d.complete())}))})}},82722:(V,Z,g)=>{"use strict";g.d(Z,{R:()=>n});var E=g(54482),m=g(25403),t=g(38421),e=g(25032);function n(a){return(0,E.e)((d,C)=>{(0,t.Xf)(a).subscribe(new m.Q(C,()=>C.complete(),e.Z)),!C.closed&&d.subscribe(C)})}},18505:(V,Z,g)=>{"use strict";g.d(Z,{b:()=>n});var E=g(30576),m=g(54482),t=g(25403),e=g(44671);function n(a,d,C){const D=(0,E.m)(a)||d||C?{next:a,error:d,complete:C}:a;return D?(0,m.e)((B,z)=>{var oe;null===(oe=D.subscribe)||void 0===oe||oe.call(D);let be=!0;B.subscribe(new t.Q(z,se=>{var Ie;null===(Ie=D.next)||void 0===Ie||Ie.call(D,se),z.next(se)},()=>{var se;be=!1,null===(se=D.complete)||void 0===se||se.call(D),z.complete()},se=>{var Ie;be=!1,null===(Ie=D.error)||void 0===Ie||Ie.call(D,se),z.error(se)},()=>{var se,Ie;be&&(null===(se=D.unsubscribe)||void 0===se||se.call(D)),null===(Ie=D.finalize)||void 0===Ie||Ie.call(D)}))}):e.y}},84408:(V,Z,g)=>{"use strict";g.d(Z,{o:()=>n});var E=g(50727);class m extends E.w0{constructor(d,C){super()}schedule(d,C=0){return this}}const t={setInterval(...a){const{delegate:d}=t;return((null==d?void 0:d.setInterval)||setInterval)(...a)},clearInterval(a){const{delegate:d}=t;return((null==d?void 0:d.clearInterval)||clearInterval)(a)},delegate:void 0};var e=g(38737);class n extends m{constructor(d,C){super(d,C),this.scheduler=d,this.work=C,this.pending=!1}schedule(d,C=0){if(this.closed)return this;this.state=d;const D=this.id,B=this.scheduler;return null!=D&&(this.id=this.recycleAsyncId(B,D,C)),this.pending=!0,this.delay=C,this.id=this.id||this.requestAsyncId(B,this.id,C),this}requestAsyncId(d,C,D=0){return t.setInterval(d.flush.bind(d,this),D)}recycleAsyncId(d,C,D=0){if(null!=D&&this.delay===D&&!1===this.pending)return C;t.clearInterval(C)}execute(d,C){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const D=this._execute(d,C);if(D)return D;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(d,C){let B,D=!1;try{this.work(d)}catch(z){D=!0,B=z||new Error("Scheduled action threw falsy error")}if(D)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:d,scheduler:C}=this,{actions:D}=C;this.work=this.state=this.scheduler=null,this.pending=!1,(0,e.P)(D,this),null!=d&&(this.id=this.recycleAsyncId(C,d,null)),this.delay=null,super.unsubscribe()}}}},97565:(V,Z,g)=>{"use strict";g.d(Z,{v:()=>t});var E=g(26063);class m{constructor(n,a=m.now){this.schedulerActionCtor=n,this.now=a}schedule(n,a=0,d){return new this.schedulerActionCtor(this,n).schedule(d,a)}}m.now=E.l.now;class t extends m{constructor(n,a=m.now){super(n,a),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:a}=this;if(this._active)return void a.push(n);let d;this._active=!0;do{if(d=n.execute(n.state,n.delay))break}while(n=a.shift());if(this._active=!1,d){for(;n=a.shift();)n.unsubscribe();throw d}}}},53101:(V,Z,g)=>{"use strict";g.d(Z,{E:()=>se});var E=g(84408);let t,m=1;const e={};function n(Ge){return Ge in e&&(delete e[Ge],!0)}const a={setImmediate(Ge){const _e=m++;return e[_e]=!0,t||(t=Promise.resolve()),t.then(()=>n(_e)&&Ge()),_e},clearImmediate(Ge){n(Ge)}},{setImmediate:C,clearImmediate:D}=a,B={setImmediate(...Ge){const{delegate:_e}=B;return((null==_e?void 0:_e.setImmediate)||C)(...Ge)},clearImmediate(Ge){const{delegate:_e}=B;return((null==_e?void 0:_e.clearImmediate)||D)(Ge)},delegate:void 0};var oe=g(97565);const se=new class extends oe.v{flush(_e){this._active=!0,this._scheduled=void 0;const{actions:Le}=this;let We,$e=-1;_e=_e||Le.shift();const Te=Le.length;do{if(We=_e.execute(_e.state,_e.delay))break}while(++$e<Te&&(_e=Le.shift()));if(this._active=!1,We){for(;++$e<Te&&(_e=Le.shift());)_e.unsubscribe();throw We}}}(class extends E.o{constructor(_e,Le){super(_e,Le),this.scheduler=_e,this.work=Le}requestAsyncId(_e,Le,We=0){return null!==We&&We>0?super.requestAsyncId(_e,Le,We):(_e.actions.push(this),_e._scheduled||(_e._scheduled=B.setImmediate(_e.flush.bind(_e,void 0))))}recycleAsyncId(_e,Le,We=0){if(null!=We&&We>0||null==We&&this.delay>0)return super.recycleAsyncId(_e,Le,We);0===_e.actions.length&&(B.clearImmediate(Le),_e._scheduled=void 0)}})},34986:(V,Z,g)=>{"use strict";g.d(Z,{z:()=>t,P:()=>e});var E=g(84408);const t=new(g(97565).v)(E.o),e=t},26063:(V,Z,g)=>{"use strict";g.d(Z,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},43410:(V,Z,g)=>{"use strict";g.d(Z,{z:()=>E});const E={setTimeout(...m){const{delegate:t}=E;return((null==t?void 0:t.setTimeout)||setTimeout)(...m)},clearTimeout(m){const{delegate:t}=E;return((null==t?void 0:t.clearTimeout)||clearTimeout)(m)},delegate:void 0}},2202:(V,Z,g)=>{"use strict";g.d(Z,{h:()=>m});const m="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},48822:(V,Z,g)=>{"use strict";g.d(Z,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},63269:(V,Z,g)=>{"use strict";g.d(Z,{jO:()=>e,yG:()=>n,_6:()=>a});var E=g(30576),m=g(93532);function t(d){return d[d.length-1]}function e(d){return(0,E.m)(t(d))?d.pop():void 0}function n(d){return(0,m.K)(t(d))?d.pop():void 0}function a(d,C){return"number"==typeof t(d)?d.pop():C}},54742:(V,Z,g)=>{"use strict";g.d(Z,{D:()=>n});const{isArray:E}=Array,{getPrototypeOf:m,prototype:t,keys:e}=Object;function n(d){if(1===d.length){const C=d[0];if(E(C))return{args:C,keys:null};if(function(d){return d&&"object"==typeof d&&m(d)===t}(C)){const D=e(C);return{args:D.map(B=>C[B]),keys:D}}}return{args:d,keys:null}}},38737:(V,Z,g)=>{"use strict";function E(m,t){if(m){const e=m.indexOf(t);0<=e&&m.splice(e,1)}}g.d(Z,{P:()=>E})},83888:(V,Z,g)=>{"use strict";function E(m){const e=m(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}g.d(Z,{d:()=>E})},31810:(V,Z,g)=>{"use strict";function E(m,t){return m.reduce((e,n,a)=>(e[n]=t[a],e),{})}g.d(Z,{n:()=>E})},72806:(V,Z,g)=>{"use strict";g.d(Z,{x:()=>t,O:()=>e});var E=g(42416);let m=null;function t(n){if(E.v.useDeprecatedSynchronousErrorHandling){const a=!m;if(a&&(m={errorThrown:!1,error:null}),n(),a){const{errorThrown:d,error:C}=m;if(m=null,d)throw C}}else n()}function e(n){E.v.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=n)}},39672:(V,Z,g)=>{"use strict";function E(m,t,e,n=0,a=!1){const d=t.schedule(function(){e(),a?m.add(this.schedule(null,n)):this.unsubscribe()},n);if(m.add(d),!a)return d}g.d(Z,{f:()=>E})},44671:(V,Z,g)=>{"use strict";function E(m){return m}g.d(Z,{y:()=>E})},81144:(V,Z,g)=>{"use strict";g.d(Z,{z:()=>E});const E=m=>m&&"number"==typeof m.length&&"function"!=typeof m},12206:(V,Z,g)=>{"use strict";g.d(Z,{D:()=>m});var E=g(30576);function m(t){return Symbol.asyncIterator&&(0,E.m)(null==t?void 0:t[Symbol.asyncIterator])}},30576:(V,Z,g)=>{"use strict";function E(m){return"function"==typeof m}g.d(Z,{m:()=>E})},93670:(V,Z,g)=>{"use strict";g.d(Z,{c:()=>t});var E=g(48822),m=g(30576);function t(e){return(0,m.m)(e[E.L])}},26495:(V,Z,g)=>{"use strict";g.d(Z,{T:()=>t});var E=g(2202),m=g(30576);function t(e){return(0,m.m)(null==e?void 0:e[E.h])}},28239:(V,Z,g)=>{"use strict";g.d(Z,{t:()=>m});var E=g(30576);function m(t){return(0,E.m)(null==t?void 0:t.then)}},53260:(V,Z,g)=>{"use strict";g.d(Z,{Q:()=>t,L:()=>e});var E=g(35987),m=g(30576);function t(n){return(0,E.FC)(this,arguments,function*(){const d=n.getReader();try{for(;;){const{value:C,done:D}=yield(0,E.qq)(d.read());if(D)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(C)}}finally{d.releaseLock()}})}function e(n){return(0,m.m)(null==n?void 0:n.getReader)}},93532:(V,Z,g)=>{"use strict";g.d(Z,{K:()=>m});var E=g(30576);function m(t){return t&&(0,E.m)(t.schedule)}},54482:(V,Z,g)=>{"use strict";g.d(Z,{A:()=>m,e:()=>t});var E=g(30576);function m(e){return(0,E.m)(null==e?void 0:e.lift)}function t(e){return n=>{if(m(n))return n.lift(function(a){try{return e(a,this)}catch(d){this.error(d)}});throw new TypeError("Unable to lift unknown Observable type")}}},83268:(V,Z,g)=>{"use strict";g.d(Z,{Z:()=>e});var E=g(54004);const{isArray:m}=Array;function e(n){return(0,E.U)(a=>function(n,a){return m(a)?n(...a):n(a)}(n,a))}},25032:(V,Z,g)=>{"use strict";function E(){}g.d(Z,{Z:()=>E})},87849:(V,Z,g)=>{"use strict";g.d(Z,{h:()=>t});var E=g(42416),m=g(43410);function t(e){m.z.setTimeout(()=>{const{onUnhandledError:n}=E.v;if(!n)throw e;n(e)})}},44532:(V,Z,g)=>{"use strict";function E(m){return new TypeError(`You provided ${null!==m&&"object"==typeof m?"an invalid object":`'${m}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}g.d(Z,{z:()=>E})},82734:function(V,Z){var m;void 0!==(m=function(){"use strict";function e(B,z,oe){var be=new XMLHttpRequest;be.open("GET",B),be.responseType="blob",be.onload=function(){D(be.response,z,oe)},be.onerror=function(){console.error("could not download file")},be.send()}function n(B){var z=new XMLHttpRequest;z.open("HEAD",B,!1);try{z.send()}catch(oe){}return 200<=z.status&&299>=z.status}function a(B){try{B.dispatchEvent(new MouseEvent("click"))}catch(oe){var z=document.createEvent("MouseEvents");z.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),B.dispatchEvent(z)}}var d="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,C=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),D=d.saveAs||("object"!=typeof window||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(B,z,oe){var be=d.URL||d.webkitURL,se=document.createElement("a");se.download=z=z||B.name||"download",se.rel="noopener","string"==typeof B?(se.href=B,se.origin===location.origin?a(se):n(se.href)?e(B,z,oe):a(se,se.target="_blank")):(se.href=be.createObjectURL(B),setTimeout(function(){be.revokeObjectURL(se.href)},4e4),setTimeout(function(){a(se)},0))}:"msSaveOrOpenBlob"in navigator?function(B,z,oe){if(z=z||B.name||"download","string"!=typeof B)navigator.msSaveOrOpenBlob(function(B,z){return void 0===z?z={autoBom:!1}:"object"!=typeof z&&(console.warn("Deprecated: Expected third argument to be a object"),z={autoBom:!z}),z.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(B.type)?new Blob(["\ufeff",B],{type:B.type}):B}(B,oe),z);else if(n(B))e(B,z,oe);else{var be=document.createElement("a");be.href=B,be.target="_blank",setTimeout(function(){a(be)})}}:function(B,z,oe,be){if((be=be||open("","_blank"))&&(be.document.title=be.document.body.innerText="downloading..."),"string"==typeof B)return e(B,z,oe);var se="application/octet-stream"===B.type,Ie=/constructor/i.test(d.HTMLElement)||d.safari,Ge=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ge||se&&Ie||C)&&"undefined"!=typeof FileReader){var _e=new FileReader;_e.onloadend=function(){var $e=_e.result;$e=Ge?$e:$e.replace(/^data:[^;]*;/,"data:attachment/file;"),be?be.location.href=$e:location=$e,be=null},_e.readAsDataURL(B)}else{var Le=d.URL||d.webkitURL,We=Le.createObjectURL(B);be?be.location=We:location.href=We,be=null,setTimeout(function(){Le.revokeObjectURL(We)},4e4)}});d.saveAs=D.saveAs=D,V.exports=D}.apply(Z,[]))&&(V.exports=m)},86942:(V,Z,g)=>{"use strict";var E,m,t;g.r(Z),g.d(Z,{Synth:()=>E}),function(){var e=window.URL||window.webkitURL,n=window.Blob;if(!e||!n)throw new Error("This browser does not support AudioSynth");var a=!1,d=null,C=function(be,se){return[new Uint8Array([se,se>>8]),new Uint8Array([se,se>>8,se>>16,se>>24])][be]},D=function(be,se,Ie,Ge){Object.defineProperty(this,be,{value:se,writable:!!Ie,enumerable:!!Ge})},B=function(be,se,Ie){D.call(this,be,se,Ie,!0)};t=function(){this.__init__.apply(this,arguments)};var z=D.bind(t.prototype),oe=B.bind(t.prototype);z("__init__",function(be,se,Ie){if(!a)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");D.call(this,"_parent",be),B.call(this,"name",se),D.call(this,"_soundID",Ie)}),oe("play",function(be,se,Ie){return this._parent.play(this._soundID,be,se,Ie)}),oe("generate",function(be,se,Ie){return this._parent.generate(this._soundID,be,se,Ie)}),z=D.bind((m=function be(){return d instanceof be?d:(this.__init__(),this)}).prototype),oe=B.bind(m.prototype),z("_debug",!1,!0),z("_bitsPerSample",16),z("_channels",1),z("_sampleRate",44100,!0),oe("setSampleRate",function(be){return this._sampleRate=Math.max(Math.min(0|be,44100),4e3),this._clearCache(),this._sampleRate}),oe("getSampleRate",function(){return this._sampleRate}),z("_volume",32768,!0),oe("setVolume",function(be){return be=parseFloat(be),isNaN(be)&&(be=0),be=Math.round(32768*be),this._volume=Math.max(Math.min(0|be,32768),0),this._clearCache(),this._volume}),oe("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),z("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),z("_fileCache",[],!0),z("_temp",{},!0),z("_sounds",[],!0),z("_mod",[function(be,se,Ie,Ge){return Math.sin(2*Math.PI*(be/se)*Ie+Ge)}]),z("_resizeCache",function(){for(var be=this._fileCache,se=this._sounds.length;be.length<se;){for(var Ie=[],Ge=0;Ge<8;Ge++){var _e={};for(var Le in this._notes)_e[Le]={};Ie.push(_e)}be.push(Ie)}}),z("_clearCache",function(){this._fileCache=[],this._resizeCache()}),oe("generate",function(be,se,Ie,Ge){var _e=this._sounds[be];if(!_e)for(var Le=0;Le<this._sounds.length;Le++)if(this._sounds[Le].name==be){_e=this._sounds[Le],be=Le;break}if(!_e)throw new Error("Invalid sound or sound ID: "+be);var We=(new Date).valueOf();this._temp={},Ie|=0,Ie=Math.min(8,Math.max(1,Ie));var $e=Ge?parseFloat(Ge):2;if(void 0===this._notes[se])throw new Error(se+" is not a valid note.");if(void 0!==this._fileCache[be][Ie-1][se][$e])return this._debug&&console.log((new Date).valueOf()-We,"ms to retrieve (cached)"),this._fileCache[be][Ie-1][se][$e];var Te=this._notes[se]*Math.pow(2,Ie-4),ye=this._sampleRate,ne=this._volume,ge=this._channels,ae=this._bitsPerSample,He=_e.attack(ye,Te,ne),Se=_e.dampen(ye,Te,ne),Ee=_e.wave,ue={modulate:this._mod,vars:this._temp},ie=0,Oe=new Uint8Array(new ArrayBuffer(Math.ceil(ye*$e*2))),ke=ye*He|0,dt=ye*$e|0;for(Le=0;Le!==ke;Le++)ie=ne*(Le/(ye*He))*Ee.call(ue,Le,ye,Te,ne),Oe[Le<<1]=ie,Oe[1+(Le<<1)]=ie>>8;for(;Le!==dt;Le++)ie=ne*Math.pow(1-(Le-ye*He)/(ye*($e-He)),Se)*Ee.call(ue,Le,ye,Te,ne),Oe[Le<<1]=ie,Oe[1+(Le<<1)]=ie>>8;var vt=["RIFF",C(1,52),"WAVE","fmt ",C(1,16),C(0,1),C(0,ge),C(1,ye),C(1,ye*ge*ae/8),C(0,ge*ae/8),C(0,ae),"data",C(1,Oe.length*ge*ae/8),Oe],lt=new n(vt,{type:"audio/wav"}),Bt=e.createObjectURL(lt);return this._fileCache[be][Ie-1][se][$e]=Bt,this._debug&&console.log((new Date).valueOf()-We,"ms to generate"),Bt}),oe("play",function(be,se,Ie,Ge){var _e=this.generate(be,se,Ie,Ge);return new Audio(_e).play(),!0}),oe("debug",function(){this._debug=!0}),oe("createInstrument",function(be){var se=0,Ie=!1;if("string"==typeof be){for(var Ge=0;Ge<this._sounds.length;Ge++)if(this._sounds[Ge].name==be){Ie=!0,se=Ge;break}}else this._sounds[be]&&(be=this._sounds[se=be].name,Ie=!0);if(!Ie)throw new Error("Invalid sound or sound ID: "+be);a=!0;var _e=new t(this,be,se);return a=!1,_e}),oe("listSounds",function(){for(var be=[],se=0;se<this._sounds.length;se++)be.push(this._sounds[se].name);return be}),z("__init__",function(){this._resizeCache()}),oe("loadSoundProfile",function(){for(var be=0,se=arguments.length;be<se;be++){var Ie=arguments[be];if(!(Ie instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push(Ie)}return this._resizeCache(),!0}),oe("loadModulationFunction",function(){for(var be=0,se=arguments.length;be<se;be++){var Ie=arguments[be];if("function"!=typeof Ie)throw new Error("Invalid modulation function.");this._mod.push(Ie)}return!0}),d=new m,E=d}(),E.loadModulationFunction(function(e,n,a,d){return 1*Math.sin(2*Math.PI*(e/n*a)+d)},function(e,n,a,d){return 1*Math.sin(4*Math.PI*(e/n*a)+d)},function(e,n,a,d){return 1*Math.sin(8*Math.PI*(e/n*a)+d)},function(e,n,a,d){return 1*Math.sin(.5*Math.PI*(e/n*a)+d)},function(e,n,a,d){return 1*Math.sin(.25*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(2*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(4*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(8*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(.5*Math.PI*(e/n*a)+d)},function(e,n,a,d){return.5*Math.sin(.25*Math.PI*(e/n*a)+d)}),E.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(e,n,a){return Math.pow(.5*Math.log(n*a/e),2)},wave:function(e,n,a,d){var C=this.modulate[0];return this.modulate[1](e,n,a,Math.pow(C(e,n,a,0),2)+.75*C(e,n,a,.25)+.1*C(e,n,a,.5))}},{name:"organ",attack:function(){return.3},dampen:function(e,n){return 1+.01*n},wave:function(e,n,a){var d=this.modulate[0];return this.modulate[1](e,n,a,d(e,n,a,0)+.5*d(e,n,a,.25)+.25*d(e,n,a,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(e,n,a){var d=this.vars;d.valueTable=d.valueTable?d.valueTable:[],void 0===d.playVal&&(d.playVal=0),void 0===d.periodCount&&(d.periodCount=0);var C=d.valueTable,D=d.playVal,B=d.periodCount,z=n/a,oe=Math.floor(100*(z-Math.floor(z))),be=!1;if(C.length<=Math.ceil(z))return C.push(2*Math.round(Math.random())-1),C[C.length-1];C[D]=.5*(C[D>=C.length-1?0:D+1]+C[D]),D>=Math.floor(z)&&(D<Math.ceil(z)?B%100>=oe&&(be=!0,C[D+1]=.5*(C[0]+C[D+1]),d.periodCount++):be=!0);var se=C[D];return be?d.playVal=0:d.playVal++,se}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(e,n,a){var d=this.modulate[0],C=this.modulate.slice(1);return C[0](e,n,a,C[9](e,n,a,C[2](e,n,a,Math.pow(d(e,n,a,0),3)+Math.pow(d(e,n,a,.5),5)+Math.pow(d(e,n,a,1),7)))+C[8](e,n,a,d(e,n,a,1.75)))}})},34686:V=>{!function(){"use strict";V.exports=function(g){return(g instanceof Buffer?g:Buffer.from(g.toString(),"binary")).toString("base64")}}()},72167:(V,Z,g)=>{"use strict";var E=g(23141),m=g(74141),t=m(E("String.prototype.indexOf"));V.exports=function(n,a){var d=E(n,!!a);return"function"==typeof d&&t(n,".prototype.")>-1?m(d):d}},74141:(V,Z,g)=>{"use strict";var E=g(37341),m=g(23141),t=m("%Function.prototype.apply%"),e=m("%Function.prototype.call%"),n=m("%Reflect.apply%",!0)||E.call(e,t),a=m("%Object.getOwnPropertyDescriptor%",!0),d=m("%Object.defineProperty%",!0),C=m("%Math.max%");if(d)try{d({},"a",{value:1})}catch(B){d=null}V.exports=function(z){var oe=n(E,e,arguments);if(a&&d){var be=a(oe,"length");be.configurable&&d(oe,"length",{value:1+C(0,z.length-(arguments.length-1))})}return oe};var D=function(){return n(E,t,arguments)};d?d(V.exports,"apply",{value:D}):V.exports.apply=D},88941:(V,Z)=>{"use strict";Z.parse=function(d,C){if("string"!=typeof d)throw new TypeError("argument str must be a string");for(var D={},B=C||{},z=d.split(m),oe=B.decode||g,be=0;be<z.length;be++){var se=z[be],Ie=se.indexOf("=");if(!(Ie<0)){var Ge=se.substr(0,Ie).trim(),_e=se.substr(++Ie,se.length).trim();'"'==_e[0]&&(_e=_e.slice(1,-1)),null==D[Ge]&&(D[Ge]=a(_e,oe))}}return D},Z.serialize=function(d,C,D){var B=D||{},z=B.encode||E;if("function"!=typeof z)throw new TypeError("option encode is invalid");if(!t.test(d))throw new TypeError("argument name is invalid");var oe=z(C);if(oe&&!t.test(oe))throw new TypeError("argument val is invalid");var be=d+"="+oe;if(null!=B.maxAge){var se=B.maxAge-0;if(isNaN(se)||!isFinite(se))throw new TypeError("option maxAge is invalid");be+="; Max-Age="+Math.floor(se)}if(B.domain){if(!t.test(B.domain))throw new TypeError("option domain is invalid");be+="; Domain="+B.domain}if(B.path){if(!t.test(B.path))throw new TypeError("option path is invalid");be+="; Path="+B.path}if(B.expires){if("function"!=typeof B.expires.toUTCString)throw new TypeError("option expires is invalid");be+="; Expires="+B.expires.toUTCString()}if(B.httpOnly&&(be+="; HttpOnly"),B.secure&&(be+="; Secure"),B.sameSite)switch("string"==typeof B.sameSite?B.sameSite.toLowerCase():B.sameSite){case!0:be+="; SameSite=Strict";break;case"lax":be+="; SameSite=Lax";break;case"strict":be+="; SameSite=Strict";break;case"none":be+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return be};var g=decodeURIComponent,E=encodeURIComponent,m=/; */,t=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(d,C){try{return C(d)}catch(D){return d}}},25491:(V,Z,g)=>{var E=g(47471);V.exports=E},73223:(V,Z,g)=>{var E=g(37722);V.exports=E},14053:(V,Z,g)=>{var E=g(91081);V.exports=E},23997:(V,Z,g)=>{var E=g(3352);V.exports=E},38806:(V,Z,g)=>{var E=g(35558);V.exports=E},62347:(V,Z,g)=>{var E=g(49127);V.exports=E},69803:(V,Z,g)=>{var E=g(46726);V.exports=E},52944:(V,Z,g)=>{var E=g(87968);V.exports=E},11072:(V,Z,g)=>{var E=g(81040);V.exports=E},78562:(V,Z,g)=>{var E=g(18047);V.exports=E},84120:(V,Z,g)=>{var E=g(16521);V.exports=E},84377:(V,Z,g)=>{var E=g(32825);V.exports=E},54012:(V,Z,g)=>{var E=g(70977);V.exports=E},2687:(V,Z,g)=>{var E=g(35019);V.exports=E},49949:(V,Z,g)=>{var E=g(11830);V.exports=E},15525:(V,Z,g)=>{var E=g(61453);V.exports=E},75426:(V,Z,g)=>{g(80651),g(48161);var E=g(35060);V.exports=E.Array.from},11529:(V,Z,g)=>{g(71006);var E=g(35060);V.exports=E.Array.isArray},73534:(V,Z,g)=>{g(56874);var E=g(15547);V.exports=E("Array").concat},66213:(V,Z,g)=>{g(71420),g(42271);var E=g(15547);V.exports=E("Array").entries},60212:(V,Z,g)=>{g(7100);var E=g(15547);V.exports=E("Array").filter},67373:(V,Z,g)=>{g(96648);var E=g(15547);V.exports=E("Array").find},88191:(V,Z,g)=>{g(58665);var E=g(15547);V.exports=E("Array").forEach},41581:(V,Z,g)=>{g(85124);var E=g(15547);V.exports=E("Array").includes},91855:(V,Z,g)=>{g(89815);var E=g(15547);V.exports=E("Array").indexOf},77466:(V,Z,g)=>{g(81171);var E=g(15547);V.exports=E("Array").map},68097:(V,Z,g)=>{g(21311);var E=g(15547);V.exports=E("Array").slice},70747:(V,Z,g)=>{g(19314);var E=g(15547);V.exports=E("Array").splice},45347:(V,Z,g)=>{g(71420),g(80651);var E=g(56958);V.exports=E},36022:(V,Z,g)=>{var E=g(76185),m=g(73534),t=Array.prototype;V.exports=function(e){var n=e.concat;return e===t||E(t,e)&&n===t.concat?m:n}},73301:(V,Z,g)=>{var E=g(76185),m=g(60212),t=Array.prototype;V.exports=function(e){var n=e.filter;return e===t||E(t,e)&&n===t.filter?m:n}},38387:(V,Z,g)=>{var E=g(76185),m=g(67373),t=Array.prototype;V.exports=function(e){var n=e.find;return e===t||E(t,e)&&n===t.find?m:n}},1629:(V,Z,g)=>{var E=g(76185),m=g(41581),t=g(73459),e=Array.prototype,n=String.prototype;V.exports=function(a){var d=a.includes;return a===e||E(e,a)&&d===e.includes?m:"string"==typeof a||a===n||E(n,a)&&d===n.includes?t:d}},66338:(V,Z,g)=>{var E=g(76185),m=g(91855),t=Array.prototype;V.exports=function(e){var n=e.indexOf;return e===t||E(t,e)&&n===t.indexOf?m:n}},57378:(V,Z,g)=>{var E=g(76185),m=g(77466),t=Array.prototype;V.exports=function(e){var n=e.map;return e===t||E(t,e)&&n===t.map?m:n}},70093:(V,Z,g)=>{var E=g(76185),m=g(68097),t=Array.prototype;V.exports=function(e){var n=e.slice;return e===t||E(t,e)&&n===t.slice?m:n}},16172:(V,Z,g)=>{var E=g(76185),m=g(70747),t=Array.prototype;V.exports=function(e){var n=e.splice;return e===t||E(t,e)&&n===t.splice?m:n}},7706:(V,Z,g)=>{var E=g(76185),m=g(9464),t=String.prototype;V.exports=function(e){var n=e.startsWith;return"string"==typeof e||e===t||E(t,e)&&n===t.startsWith?m:n}},22730:(V,Z,g)=>{g(86061);var E=g(35060),m=g(30547);E.JSON||(E.JSON={stringify:JSON.stringify}),V.exports=function(e,n,a){return m(E.JSON.stringify,null,arguments)}},66619:(V,Z,g)=>{g(7923);var E=g(35060);V.exports=E.Object.assign},4040:(V,Z,g)=>{g(13227);var m=g(35060).Object,t=V.exports=function(n,a){return m.defineProperties(n,a)};m.defineProperties.sham&&(t.sham=!0)},7420:(V,Z,g)=>{g(24526);var m=g(35060).Object,t=V.exports=function(n,a,d){return m.defineProperty(n,a,d)};m.defineProperty.sham&&(t.sham=!0)},2011:(V,Z,g)=>{g(50042);var E=g(35060);V.exports=E.Object.entries},95595:(V,Z,g)=>{g(49711);var m=g(35060).Object,t=V.exports=function(n,a){return m.getOwnPropertyDescriptor(n,a)};m.getOwnPropertyDescriptor.sham&&(t.sham=!0)},42093:(V,Z,g)=>{g(10130);var E=g(35060);V.exports=E.Object.getOwnPropertyDescriptors},93296:(V,Z,g)=>{g(83136);var E=g(35060);V.exports=E.Object.getOwnPropertySymbols},31159:(V,Z,g)=>{g(68126);var E=g(35060);V.exports=E.Object.keys},9850:(V,Z,g)=>{g(84722),g(71420),g(42271),g(17569),g(52568),g(64111),g(1395),g(80651);var E=g(35060);V.exports=E.Promise},73459:(V,Z,g)=>{g(11568);var E=g(15547);V.exports=E("String").includes},9464:(V,Z,g)=>{g(72068);var E=g(15547);V.exports=E("String").startsWith},18297:(V,Z,g)=>{g(56874),g(42271),g(83136),g(9266),g(87189),g(94898),g(57133),g(3766),g(49342),g(84765),g(83606),g(25909),g(42383),g(98547),g(73418),g(82266),g(30797),g(85504),g(15551),g(61897);var E=g(35060);V.exports=E.Symbol},5933:(V,Z,g)=>{g(71420),g(42271),g(80651),g(3766);var E=g(14525);V.exports=E.f("iterator")},70238:(V,Z,g)=>{g(71420),g(42271),g(29960);var E=g(35060);V.exports=E.WeakMap},4517:(V,Z,g)=>{var E=g(25491);V.exports=E},31584:(V,Z,g)=>{var E=g(73223);V.exports=E},46025:(V,Z,g)=>{var E=g(14053);V.exports=E},81613:(V,Z,g)=>{var E=g(23997);V.exports=E},19775:(V,Z,g)=>{var E=g(38806);V.exports=E},9483:(V,Z,g)=>{var E=g(62347);V.exports=E},60061:(V,Z,g)=>{var E=g(69803);V.exports=E},27254:(V,Z,g)=>{var E=g(52944);V.exports=E},62691:(V,Z,g)=>{var E=g(11072);V.exports=E},98244:(V,Z,g)=>{var E=g(78562);V.exports=E},79668:(V,Z,g)=>{var E=g(84120);V.exports=E},5797:(V,Z,g)=>{var E=g(84377);V.exports=E},35248:(V,Z,g)=>{var E=g(54012);V.exports=E},58316:(V,Z,g)=>{var E=g(2687);g(38669),g(33483),g(65193),g(30389),V.exports=E},51479:(V,Z,g)=>{var E=g(49949);g(59108),g(98488),g(65802),g(38772),g(96398),g(79699),g(86669),V.exports=E},35392:(V,Z,g)=>{var E=g(15525);V.exports=E},80866:(V,Z,g)=>{var E=g(22743),m=g(24732),t=g(99727),e=E.TypeError;V.exports=function(n){if(m(n))return n;throw e(t(n)+" is not a function")}},77498:(V,Z,g)=>{var E=g(22743),m=g(67459),t=g(99727),e=E.TypeError;V.exports=function(n){if(m(n))return n;throw e(t(n)+" is not a constructor")}},58995:(V,Z,g)=>{var E=g(22743),m=g(24732),t=E.String,e=E.TypeError;V.exports=function(n){if("object"==typeof n||m(n))return n;throw e("Can't set "+t(n)+" as a prototype")}},70677:V=>{V.exports=function(){}},43017:(V,Z,g)=>{var E=g(22743),m=g(76185),t=E.TypeError;V.exports=function(e,n){if(m(n,e))return e;throw t("Incorrect invocation")}},10157:(V,Z,g)=>{var E=g(22743),m=g(78103),t=E.String,e=E.TypeError;V.exports=function(n){if(m(n))return n;throw e(t(n)+" is not an object")}},35877:(V,Z,g)=>{var E=g(31469);V.exports=E(function(){if("function"==typeof ArrayBuffer){var m=new ArrayBuffer(8);Object.isExtensible(m)&&Object.defineProperty(m,"a",{value:8})}})},19875:(V,Z,g)=>{"use strict";var E=g(53877).forEach,t=g(52995)("forEach");V.exports=t?[].forEach:function(n){return E(this,n,arguments.length>1?arguments[1]:void 0)}},96397:(V,Z,g)=>{"use strict";var E=g(22743),m=g(21137),t=g(85246),e=g(49402),n=g(3570),a=g(83672),d=g(67459),C=g(33706),D=g(3115),B=g(74471),z=g(56958),oe=E.Array;V.exports=function(se){var Ie=e(se),Ge=d(this),_e=arguments.length,Le=_e>1?arguments[1]:void 0,We=void 0!==Le;We&&(Le=m(Le,_e>2?arguments[2]:void 0));var ye,ne,ge,ae,He,Se,$e=z(Ie),Te=0;if(!$e||this==oe&&a($e))for(ye=C(Ie),ne=Ge?new this(ye):oe(ye);ye>Te;Te++)Se=We?Le(Ie[Te],Te):Ie[Te],D(ne,Te,Se);else for(He=(ae=B(Ie,$e)).next,ne=Ge?new this:[];!(ge=t(He,ae)).done;Te++)Se=We?n(ae,Le,[ge.value,Te],!0):ge.value,D(ne,Te,Se);return ne.length=Te,ne}},68047:(V,Z,g)=>{var E=g(35197),m=g(83889),t=g(33706),e=function(n){return function(a,d,C){var oe,D=E(a),B=t(D),z=m(C,B);if(n&&d!=d){for(;B>z;)if((oe=D[z++])!=oe)return!0}else for(;B>z;z++)if((n||z in D)&&D[z]===d)return n||z||0;return!n&&-1}};V.exports={includes:e(!0),indexOf:e(!1)}},53877:(V,Z,g)=>{var E=g(21137),m=g(31588),t=g(23767),e=g(49402),n=g(33706),a=g(4414),d=m([].push),C=function(D){var B=1==D,z=2==D,oe=3==D,be=4==D,se=6==D,Ie=7==D,Ge=5==D||se;return function(_e,Le,We,$e){for(var Ee,ue,Te=e(_e),ye=t(Te),ne=E(Le,We),ge=n(ye),ae=0,He=$e||a,Se=B?He(_e,ge):z||Ie?He(_e,0):void 0;ge>ae;ae++)if((Ge||ae in ye)&&(ue=ne(Ee=ye[ae],ae,Te),D))if(B)Se[ae]=ue;else if(ue)switch(D){case 3:return!0;case 5:return Ee;case 6:return ae;case 2:d(Se,Ee)}else switch(D){case 4:return!1;case 7:d(Se,Ee)}return se?-1:oe||be?be:Se}};V.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6),filterReject:C(7)}},85367:(V,Z,g)=>{var E=g(31469),m=g(7084),t=g(10322),e=m("species");V.exports=function(n){return t>=51||!E(function(){var a=[];return(a.constructor={})[e]=function(){return{foo:1}},1!==a[n](Boolean).foo})}},52995:(V,Z,g)=>{"use strict";var E=g(31469);V.exports=function(m,t){var e=[][m];return!!e&&E(function(){e.call(null,t||function(){throw 1},1)})}},11566:(V,Z,g)=>{var E=g(22743),m=g(83889),t=g(33706),e=g(3115),n=E.Array,a=Math.max;V.exports=function(d,C,D){for(var B=t(d),z=m(C,B),oe=m(void 0===D?B:D,B),be=n(a(oe-z,0)),se=0;z<oe;z++,se++)e(be,se,d[z]);return be.length=se,be}},90840:(V,Z,g)=>{var E=g(31588);V.exports=E([].slice)},69274:(V,Z,g)=>{var E=g(11566),m=Math.floor,t=function(a,d){var C=a.length,D=m(C/2);return C<8?e(a,d):n(a,t(E(a,0,D),d),t(E(a,D),d),d)},e=function(a,d){for(var B,z,C=a.length,D=1;D<C;){for(z=D,B=a[D];z&&d(a[z-1],B)>0;)a[z]=a[--z];z!==D++&&(a[z]=B)}return a},n=function(a,d,C,D){for(var B=d.length,z=C.length,oe=0,be=0;oe<B||be<z;)a[oe+be]=oe<B&&be<z?D(d[oe],C[be])<=0?d[oe++]:C[be++]:oe<B?d[oe++]:C[be++];return a};V.exports=t},68921:(V,Z,g)=>{var E=g(22743),m=g(10371),t=g(67459),e=g(78103),a=g(7084)("species"),d=E.Array;V.exports=function(C){var D;return m(C)&&(t(D=C.constructor)&&(D===d||m(D.prototype))||e(D)&&null===(D=D[a]))&&(D=void 0),void 0===D?d:D}},4414:(V,Z,g)=>{var E=g(68921);V.exports=function(m,t){return new(E(m))(0===t?0:t)}},3570:(V,Z,g)=>{var E=g(10157),m=g(14964);V.exports=function(t,e,n,a){try{return a?e(E(n)[0],n[1]):e(n)}catch(d){m(t,"throw",d)}}},4402:(V,Z,g)=>{var m=g(7084)("iterator"),t=!1;try{var e=0,n={next:function(){return{done:!!e++}},return:function(){t=!0}};n[m]=function(){return this},Array.from(n,function(){throw 2})}catch(a){}V.exports=function(a,d){if(!d&&!t)return!1;var C=!1;try{var D={};D[m]=function(){return{next:function(){return{done:C=!0}}}},a(D)}catch(B){}return C}},50181:(V,Z,g)=>{var E=g(31588),m=E({}.toString),t=E("".slice);V.exports=function(e){return t(m(e),8,-1)}},80063:(V,Z,g)=>{var E=g(22743),m=g(57575),t=g(24732),e=g(50181),a=g(7084)("toStringTag"),d=E.Object,C="Arguments"==e(function(){return arguments}());V.exports=m?e:function(B){var z,oe,be;return void 0===B?"Undefined":null===B?"Null":"string"==typeof(oe=function(B,z){try{return B[z]}catch(oe){}}(z=d(B),a))?oe:C?e(z):"Object"==(be=e(z))&&t(z.callee)?"Arguments":be}},79087:(V,Z,g)=>{var m=g(31588)("".replace),t=String(Error("zxcasd").stack),e=/\n\s*at [^:]*:[^\n]*/,n=e.test(t);V.exports=function(a,d){if(n&&"string"==typeof a)for(;d--;)a=m(a,e,"");return a}},75925:(V,Z,g)=>{"use strict";var E=g(31588),m=g(70658),t=g(33613).getWeakData,e=g(10157),n=g(78103),a=g(43017),d=g(99883),C=g(53877),D=g(44030),B=g(34520),z=B.set,oe=B.getterFor,be=C.find,se=C.findIndex,Ie=E([].splice),Ge=0,_e=function($e){return $e.frozen||($e.frozen=new Le)},Le=function(){this.entries=[]},We=function($e,Te){return be($e.entries,function(ye){return ye[0]===Te})};Le.prototype={get:function($e){var Te=We(this,$e);if(Te)return Te[1]},has:function($e){return!!We(this,$e)},set:function($e,Te){var ye=We(this,$e);ye?ye[1]=Te:this.entries.push([$e,Te])},delete:function($e){var Te=se(this.entries,function(ye){return ye[0]===$e});return~Te&&Ie(this.entries,Te,1),!!~Te}},V.exports={getConstructor:function($e,Te,ye,ne){var ge=$e(function(Ee,ue){a(Ee,ae),z(Ee,{type:Te,id:Ge++,frozen:void 0}),null!=ue&&d(ue,Ee[ne],{that:Ee,AS_ENTRIES:ye})}),ae=ge.prototype,He=oe(Te),Se=function(Ee,ue,ie){var ht=He(Ee),Oe=t(e(ue),!0);return!0===Oe?_e(ht).set(ue,ie):Oe[ht.id]=ie,Ee};return m(ae,{delete:function(Ee){var ue=He(this);if(!n(Ee))return!1;var ie=t(Ee);return!0===ie?_e(ue).delete(Ee):ie&&D(ie,ue.id)&&delete ie[ue.id]},has:function(ue){var ie=He(this);if(!n(ue))return!1;var ht=t(ue);return!0===ht?_e(ie).has(ue):ht&&D(ht,ie.id)}}),m(ae,ye?{get:function(ue){var ie=He(this);if(n(ue)){var ht=t(ue);return!0===ht?_e(ie).get(ue):ht?ht[ie.id]:void 0}},set:function(ue,ie){return Se(this,ue,ie)}}:{add:function(ue){return Se(this,ue,!0)}}),ge}}},66657:(V,Z,g)=>{"use strict";var E=g(70147),m=g(22743),t=g(33613),e=g(31469),n=g(78204),a=g(99883),d=g(43017),C=g(24732),D=g(78103),B=g(63598),z=g(13528).f,oe=g(53877).forEach,be=g(25847),se=g(34520),Ie=se.set,Ge=se.getterFor;V.exports=function(_e,Le,We){var He,$e=-1!==_e.indexOf("Map"),Te=-1!==_e.indexOf("Weak"),ye=$e?"set":"add",ne=m[_e],ge=ne&&ne.prototype,ae={};if(be&&C(ne)&&(Te||ge.forEach&&!e(function(){(new ne).entries().next()}))){var Se=(He=Le(function(ue,ie){Ie(d(ue,Se),{type:_e,collection:new ne}),null!=ie&&a(ie,ue[ye],{that:ue,AS_ENTRIES:$e})})).prototype,Ee=Ge(_e);oe(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(ue){var ie="add"==ue||"set"==ue;ue in ge&&(!Te||"clear"!=ue)&&n(Se,ue,function(ht,Oe){var ke=Ee(this).collection;if(!ie&&Te&&!D(ht))return"get"==ue&&void 0;var dt=ke[ue](0===ht?0:ht,Oe);return ie?this:dt})}),Te||z(Se,"size",{configurable:!0,get:function(){return Ee(this).collection.size}})}else He=We.getConstructor(Le,_e,$e,ye),t.enable();return B(He,_e,!1,!0),ae[_e]=He,E({global:!0,forced:!0},ae),Te||We.setStrong(He,_e,$e),He}},47902:(V,Z,g)=>{var E=g(44030),m=g(68566),t=g(26552),e=g(13528);V.exports=function(n,a,d){for(var C=m(a),D=e.f,B=t.f,z=0;z<C.length;z++){var oe=C[z];!E(n,oe)&&(!d||!E(d,oe))&&D(n,oe,B(a,oe))}}},15268:(V,Z,g)=>{var m=g(7084)("match");V.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[m]=!1,"/./"[t](e)}catch(a){}}return!1}},87275:(V,Z,g)=>{var E=g(31469);V.exports=!E(function(){function m(){}return m.prototype.constructor=null,Object.getPrototypeOf(new m)!==m.prototype})},690:(V,Z,g)=>{"use strict";var E=g(39336).IteratorPrototype,m=g(80332),t=g(41137),e=g(63598),n=g(44362),a=function(){return this};V.exports=function(d,C,D,B){var z=C+" Iterator";return d.prototype=m(E,{next:t(+!B,D)}),e(d,z,!1,!0),n[z]=a,d}},78204:(V,Z,g)=>{var E=g(25847),m=g(13528),t=g(41137);V.exports=E?function(e,n,a){return m.f(e,n,t(1,a))}:function(e,n,a){return e[n]=a,e}},41137:V=>{V.exports=function(Z,g){return{enumerable:!(1&Z),configurable:!(2&Z),writable:!(4&Z),value:g}}},3115:(V,Z,g)=>{"use strict";var E=g(73540),m=g(13528),t=g(41137);V.exports=function(e,n,a){var d=E(n);d in e?m.f(e,d,t(0,a)):e[d]=a}},52928:(V,Z,g)=>{"use strict";var E=g(70147),m=g(85246),t=g(92838),e=g(56089),n=g(24732),a=g(690),d=g(84361),C=g(91100),D=g(63598),B=g(78204),z=g(51121),oe=g(7084),be=g(44362),se=g(39336),Ie=e.PROPER,Ge=e.CONFIGURABLE,_e=se.IteratorPrototype,Le=se.BUGGY_SAFARI_ITERATORS,We=oe("iterator"),Te="values",ye="entries",ne=function(){return this};V.exports=function(ge,ae,He,Se,Ee,ue,ie){a(He,ae,Se);var Pt,Zt,Di,ht=function(ii){if(ii===Ee&&lt)return lt;if(!Le&&ii in dt)return dt[ii];switch(ii){case"keys":case Te:case ye:return function(){return new He(this,ii)}}return function(){return new He(this)}},Oe=ae+" Iterator",ke=!1,dt=ge.prototype,vt=dt[We]||dt["@@iterator"]||Ee&&dt[Ee],lt=!Le&&vt||ht(Ee),Bt="Array"==ae&&dt.entries||vt;if(Bt&&(Pt=d(Bt.call(new ge)))!==Object.prototype&&Pt.next&&(!t&&d(Pt)!==_e&&(C?C(Pt,_e):n(Pt[We])||z(Pt,We,ne)),D(Pt,Oe,!0,!0),t&&(be[Oe]=ne)),Ie&&Ee==Te&&vt&&vt.name!==Te&&(!t&&Ge?B(dt,"name",Te):(ke=!0,lt=function(){return m(vt,this)})),Ee)if(Zt={values:ht(Te),keys:ue?lt:ht("keys"),entries:ht(ye)},ie)for(Di in Zt)(Le||ke||!(Di in dt))&&z(dt,Di,Zt[Di]);else E({target:ae,proto:!0,forced:Le||ke},Zt);return(!t||ie)&&dt[We]!==lt&&z(dt,We,lt,{name:Ee}),be[ae]=lt,Zt}},59478:(V,Z,g)=>{var E=g(35060),m=g(44030),t=g(14525),e=g(13528).f;V.exports=function(n){var a=E.Symbol||(E.Symbol={});m(a,n)||e(a,n,{value:t.f(n)})}},25847:(V,Z,g)=>{var E=g(31469);V.exports=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},97947:(V,Z,g)=>{var E=g(22743),m=g(78103),t=E.document,e=m(t)&&m(t.createElement);V.exports=function(n){return e?t.createElement(n):{}}},9113:V=>{V.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},28150:V=>{V.exports="object"==typeof window},93221:(V,Z,g)=>{var E=g(91339),m=g(22743);V.exports=/ipad|iphone|ipod/i.test(E)&&void 0!==m.Pebble},49612:(V,Z,g)=>{var E=g(91339);V.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(E)},70751:(V,Z,g)=>{var E=g(50181),m=g(22743);V.exports="process"==E(m.process)},25330:(V,Z,g)=>{var E=g(91339);V.exports=/web0s(?!.*chrome)/i.test(E)},91339:(V,Z,g)=>{var E=g(85697);V.exports=E("navigator","userAgent")||""},10322:(V,Z,g)=>{var d,C,E=g(22743),m=g(91339),t=E.process,e=E.Deno,n=t&&t.versions||e&&e.version,a=n&&n.v8;a&&(C=(d=a.split("."))[0]>0&&d[0]<4?1:+(d[0]+d[1])),!C&&m&&(!(d=m.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=m.match(/Chrome\/(\d+)/))&&(C=+d[1]),V.exports=C},15547:(V,Z,g)=>{var E=g(35060);V.exports=function(m){return E[m+"Prototype"]}},44169:V=>{V.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},92335:(V,Z,g)=>{var E=g(31469),m=g(41137);V.exports=!E(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",m(1,7)),7!==t.stack)})},70147:(V,Z,g)=>{"use strict";var E=g(22743),m=g(30547),t=g(31588),e=g(24732),n=g(26552).f,a=g(35059),d=g(35060),C=g(21137),D=g(78204),B=g(44030),z=function(oe){var be=function(se,Ie,Ge){if(this instanceof be){switch(arguments.length){case 0:return new oe;case 1:return new oe(se);case 2:return new oe(se,Ie)}return new oe(se,Ie,Ge)}return m(oe,this,arguments)};return be.prototype=oe.prototype,be};V.exports=function(oe,be){var ye,ne,ge,ae,He,Se,Ee,ue,se=oe.target,Ie=oe.global,Ge=oe.stat,_e=oe.proto,Le=Ie?E:Ge?E[se]:(E[se]||{}).prototype,We=Ie?d:d[se]||D(d,se,{})[se],$e=We.prototype;for(ge in be)ye=!a(Ie?ge:se+(Ge?".":"#")+ge,oe.forced)&&Le&&B(Le,ge),He=We[ge],ye&&(Se=oe.noTargetGet?(ue=n(Le,ge))&&ue.value:Le[ge]),ae=ye&&Se?Se:be[ge],(!ye||typeof He!=typeof ae)&&(Ee=oe.bind&&ye?C(ae,E):oe.wrap&&ye?z(ae):_e&&e(ae)?t(ae):ae,(oe.sham||ae&&ae.sham||He&&He.sham)&&D(Ee,"sham",!0),D(We,ge,Ee),_e&&(B(d,ne=se+"Prototype")||D(d,ne,{}),D(d[ne],ge,ae),oe.real&&$e&&!$e[ge]&&D($e,ge,ae)))}},31469:V=>{V.exports=function(Z){try{return!!Z()}catch(g){return!0}}},23216:(V,Z,g)=>{var E=g(31469);V.exports=!E(function(){return Object.isExtensible(Object.preventExtensions({}))})},30547:V=>{var Z=Function.prototype,g=Z.apply,m=Z.call;V.exports="object"==typeof Reflect&&Reflect.apply||(Z.bind?m.bind(g):function(){return m.apply(g,arguments)})},21137:(V,Z,g)=>{var E=g(31588),m=g(80866),t=E(E.bind);V.exports=function(e,n){return m(e),void 0===n?e:t?t(e,n):function(){return e.apply(n,arguments)}}},85246:V=>{var Z=Function.prototype.call;V.exports=Z.bind?Z.bind(Z):function(){return Z.apply(Z,arguments)}},56089:(V,Z,g)=>{var E=g(25847),m=g(44030),t=Function.prototype,e=E&&Object.getOwnPropertyDescriptor,n=m(t,"name"),a=n&&"something"===function(){}.name,d=n&&(!E||E&&e(t,"name").configurable);V.exports={EXISTS:n,PROPER:a,CONFIGURABLE:d}},31588:V=>{var Z=Function.prototype,g=Z.bind,E=Z.call,m=g&&g.bind(E);V.exports=g?function(t){return t&&m(E,t)}:function(t){return t&&function(){return E.apply(t,arguments)}}},85697:(V,Z,g)=>{var E=g(35060),m=g(22743),t=g(24732),e=function(n){return t(n)?n:void 0};V.exports=function(n,a){return arguments.length<2?e(E[n])||e(m[n]):E[n]&&E[n][a]||m[n]&&m[n][a]}},56958:(V,Z,g)=>{var E=g(80063),m=g(30047),t=g(44362),n=g(7084)("iterator");V.exports=function(a){if(null!=a)return m(a,n)||m(a,"@@iterator")||t[E(a)]}},74471:(V,Z,g)=>{var E=g(22743),m=g(85246),t=g(80866),e=g(10157),n=g(99727),a=g(56958),d=E.TypeError;V.exports=function(C,D){var B=arguments.length<2?a(C):D;if(t(B))return e(m(B,C));throw d(n(C)+" is not iterable")}},30047:(V,Z,g)=>{var E=g(80866);V.exports=function(m,t){var e=m[t];return null==e?void 0:E(e)}},22743:V=>{var Z=function(g){return g&&g.Math==Math&&g};V.exports=Z("object"==typeof globalThis&&globalThis)||Z("object"==typeof window&&window)||Z("object"==typeof self&&self)||Z("object"==typeof global&&global)||function(){return this}()||Function("return this")()},44030:(V,Z,g)=>{var E=g(31588),m=g(49402),t=E({}.hasOwnProperty);V.exports=Object.hasOwn||function(n,a){return t(m(n),a)}},89675:V=>{V.exports={}},18819:(V,Z,g)=>{var E=g(22743);V.exports=function(m,t){var e=E.console;e&&e.error&&(1==arguments.length?e.error(m):e.error(m,t))}},93074:(V,Z,g)=>{var E=g(85697);V.exports=E("document","documentElement")},5223:(V,Z,g)=>{var E=g(25847),m=g(31469),t=g(97947);V.exports=!E&&!m(function(){return 7!=Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a})},23767:(V,Z,g)=>{var E=g(22743),m=g(31588),t=g(31469),e=g(50181),n=E.Object,a=m("".split);V.exports=t(function(){return!n("z").propertyIsEnumerable(0)})?function(d){return"String"==e(d)?a(d,""):n(d)}:n},13271:(V,Z,g)=>{var E=g(31588),m=g(24732),t=g(65732),e=E(Function.toString);m(t.inspectSource)||(t.inspectSource=function(n){return e(n)}),V.exports=t.inspectSource},42783:(V,Z,g)=>{var E=g(78103),m=g(78204);V.exports=function(t,e){E(e)&&"cause"in e&&m(t,"cause",e.cause)}},33613:(V,Z,g)=>{var E=g(70147),m=g(31588),t=g(89675),e=g(78103),n=g(44030),a=g(13528).f,d=g(42769),C=g(24281),D=g(19086),B=g(7226),z=g(23216),oe=!1,be=B("meta"),se=0,Ie=function(Te){a(Te,be,{value:{objectID:"O"+se++,weakData:{}}})},$e=V.exports={enable:function(){$e.enable=function(){},oe=!0;var Te=d.f,ye=m([].splice),ne={};ne[be]=1,Te(ne).length&&(d.f=function(ge){for(var ae=Te(ge),He=0,Se=ae.length;He<Se;He++)if(ae[He]===be){ye(ae,He,1);break}return ae},E({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:C.f}))},fastKey:function(Te,ye){if(!e(Te))return"symbol"==typeof Te?Te:("string"==typeof Te?"S":"P")+Te;if(!n(Te,be)){if(!D(Te))return"F";if(!ye)return"E";Ie(Te)}return Te[be].objectID},getWeakData:function(Te,ye){if(!n(Te,be)){if(!D(Te))return!0;if(!ye)return!1;Ie(Te)}return Te[be].weakData},onFreeze:function(Te){return z&&oe&&D(Te)&&!n(Te,be)&&Ie(Te),Te}};t[be]=!0},34520:(V,Z,g)=>{var be,se,Ie,E=g(63185),m=g(22743),t=g(31588),e=g(78103),n=g(78204),a=g(44030),d=g(65732),C=g(35027),D=g(89675),B="Object already initialized",z=m.TypeError;if(E||d.state){var Le=d.state||(d.state=new(0,m.WeakMap)),We=t(Le.get),$e=t(Le.has),Te=t(Le.set);be=function(ne,ge){if($e(Le,ne))throw new z(B);return ge.facade=ne,Te(Le,ne,ge),ge},se=function(ne){return We(Le,ne)||{}},Ie=function(ne){return $e(Le,ne)}}else{var ye=C("state");D[ye]=!0,be=function(ne,ge){if(a(ne,ye))throw new z(B);return ge.facade=ne,n(ne,ye,ge),ge},se=function(ne){return a(ne,ye)?ne[ye]:{}},Ie=function(ne){return a(ne,ye)}}V.exports={set:be,get:se,has:Ie,enforce:function(ne){return Ie(ne)?se(ne):be(ne,{})},getterFor:function(ne){return function(ge){var ae;if(!e(ge)||(ae=se(ge)).type!==ne)throw z("Incompatible receiver, "+ne+" required");return ae}}}},83672:(V,Z,g)=>{var E=g(7084),m=g(44362),t=E("iterator"),e=Array.prototype;V.exports=function(n){return void 0!==n&&(m.Array===n||e[t]===n)}},10371:(V,Z,g)=>{var E=g(50181);V.exports=Array.isArray||function(t){return"Array"==E(t)}},24732:V=>{V.exports=function(Z){return"function"==typeof Z}},67459:(V,Z,g)=>{var E=g(31588),m=g(31469),t=g(24732),e=g(80063),n=g(85697),a=g(13271),d=function(){},C=[],D=n("Reflect","construct"),B=/^\s*(?:class|function)\b/,z=E(B.exec),oe=!B.exec(d),be=function(Ge){if(!t(Ge))return!1;try{return D(d,C,Ge),!0}catch(_e){return!1}},se=function(Ge){if(!t(Ge))return!1;switch(e(Ge)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return oe||!!z(B,a(Ge))}catch(_e){return!0}};se.sham=!0,V.exports=!D||m(function(){var Ie;return be(be.call)||!be(Object)||!be(function(){Ie=!0})||Ie})?se:be},35059:(V,Z,g)=>{var E=g(31469),m=g(24732),t=/#|\.prototype\./,e=function(D,B){var z=a[n(D)];return z==C||z!=d&&(m(B)?E(B):!!B)},n=e.normalize=function(D){return String(D).replace(t,".").toLowerCase()},a=e.data={},d=e.NATIVE="N",C=e.POLYFILL="P";V.exports=e},78103:(V,Z,g)=>{var E=g(24732);V.exports=function(m){return"object"==typeof m?null!==m:E(m)}},92838:V=>{V.exports=!0},82888:(V,Z,g)=>{var E=g(78103),m=g(50181),e=g(7084)("match");V.exports=function(n){var a;return E(n)&&(void 0!==(a=n[e])?!!a:"RegExp"==m(n))}},90094:(V,Z,g)=>{var E=g(22743),m=g(85697),t=g(24732),e=g(76185),n=g(43587),a=E.Object;V.exports=n?function(d){return"symbol"==typeof d}:function(d){var C=m("Symbol");return t(C)&&e(C.prototype,a(d))}},99883:(V,Z,g)=>{var E=g(22743),m=g(21137),t=g(85246),e=g(10157),n=g(99727),a=g(83672),d=g(33706),C=g(76185),D=g(74471),B=g(56958),z=g(14964),oe=E.TypeError,be=function(Ie,Ge){this.stopped=Ie,this.result=Ge},se=be.prototype;V.exports=function(Ie,Ge,_e){var ne,ge,ae,He,Se,Ee,ue,We=!(!_e||!_e.AS_ENTRIES),$e=!(!_e||!_e.IS_ITERATOR),Te=!(!_e||!_e.INTERRUPTED),ye=m(Ge,_e&&_e.that),ie=function(Oe){return ne&&z(ne,"normal",Oe),new be(!0,Oe)},ht=function(Oe){return We?(e(Oe),Te?ye(Oe[0],Oe[1],ie):ye(Oe[0],Oe[1])):Te?ye(Oe,ie):ye(Oe)};if($e)ne=Ie;else{if(!(ge=B(Ie)))throw oe(n(Ie)+" is not iterable");if(a(ge)){for(ae=0,He=d(Ie);He>ae;ae++)if((Se=ht(Ie[ae]))&&C(se,Se))return Se;return new be(!1)}ne=D(Ie,ge)}for(Ee=ne.next;!(ue=t(Ee,ne)).done;){try{Se=ht(ue.value)}catch(Oe){z(ne,"throw",Oe)}if("object"==typeof Se&&Se&&C(se,Se))return Se}return new be(!1)}},14964:(V,Z,g)=>{var E=g(85246),m=g(10157),t=g(30047);V.exports=function(e,n,a){var d,C;m(e);try{if(!(d=t(e,"return"))){if("throw"===n)throw a;return a}d=E(d,e)}catch(D){C=!0,d=D}if("throw"===n)throw a;if(C)throw d;return m(d),a}},39336:(V,Z,g)=>{"use strict";var B,z,oe,E=g(31469),m=g(24732),t=g(80332),e=g(84361),n=g(51121),a=g(7084),d=g(92838),C=a("iterator"),D=!1;[].keys&&("next"in(oe=[].keys())?(z=e(e(oe)))!==Object.prototype&&(B=z):D=!0),null==B||E(function(){var se={};return B[C].call(se)!==se})?B={}:d&&(B=t(B)),m(B[C])||n(B,C,function(){return this}),V.exports={IteratorPrototype:B,BUGGY_SAFARI_ITERATORS:D}},44362:V=>{V.exports={}},33706:(V,Z,g)=>{var E=g(61468);V.exports=function(m){return E(m.length)}},72845:(V,Z,g)=>{var Ie,Ge,_e,Le,We,$e,Te,ye,E=g(22743),m=g(21137),t=g(26552).f,e=g(76401).set,n=g(49612),a=g(93221),d=g(25330),C=g(70751),D=E.MutationObserver||E.WebKitMutationObserver,B=E.document,z=E.process,oe=E.Promise,be=t(E,"queueMicrotask"),se=be&&be.value;se||(Ie=function(){var ne,ge;for(C&&(ne=z.domain)&&ne.exit();Ge;){ge=Ge.fn,Ge=Ge.next;try{ge()}catch(ae){throw Ge?Le():_e=void 0,ae}}_e=void 0,ne&&ne.enter()},n||C||d||!D||!B?!a&&oe&&oe.resolve?((Te=oe.resolve(void 0)).constructor=oe,ye=m(Te.then,Te),Le=function(){ye(Ie)}):C?Le=function(){z.nextTick(Ie)}:(e=m(e,E),Le=function(){e(Ie)}):(We=!0,$e=B.createTextNode(""),new D(Ie).observe($e,{characterData:!0}),Le=function(){$e.data=We=!We})),V.exports=se||function(ne){var ge={fn:ne,next:void 0};_e&&(_e.next=ge),Ge||(Ge=ge,Le()),_e=ge}},38977:(V,Z,g)=>{var E=g(22743);V.exports=E.Promise},62581:(V,Z,g)=>{var E=g(10322),m=g(31469);V.exports=!!Object.getOwnPropertySymbols&&!m(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&E&&E<41})},2049:(V,Z,g)=>{var E=g(31469),m=g(7084),t=g(92838),e=m("iterator");V.exports=!E(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),a=n.searchParams,d="";return n.pathname="c%20d",a.forEach(function(C,D){a.delete("b"),d+=D+C}),t&&!n.toJSON||!a.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==a.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!a[e]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==d||"x"!==new URL("http://x",void 0).host})},63185:(V,Z,g)=>{var E=g(22743),m=g(24732),t=g(13271),e=E.WeakMap;V.exports=m(e)&&/native code/.test(t(e))},39802:(V,Z,g)=>{"use strict";var E=g(80866),m=function(t){var e,n;this.promise=new t(function(a,d){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=a,n=d}),this.resolve=E(e),this.reject=E(n)};V.exports.f=function(t){return new m(t)}},58823:(V,Z,g)=>{var E=g(94506);V.exports=function(m,t){return void 0===m?arguments.length<2?"":t:E(m)}},43353:(V,Z,g)=>{var E=g(22743),m=g(82888),t=E.TypeError;V.exports=function(e){if(m(e))throw t("The method doesn't accept regular expressions");return e}},94347:(V,Z,g)=>{"use strict";var E=g(25847),m=g(31588),t=g(85246),e=g(31469),n=g(77978),a=g(30233),d=g(19664),C=g(49402),D=g(23767),B=Object.assign,z=Object.defineProperty,oe=m([].concat);V.exports=!B||e(function(){if(E&&1!==B({b:1},B(z({},"a",{enumerable:!0,get:function(){z(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var be={},se={},Ie=Symbol(),Ge="abcdefghijklmnopqrst";return be[Ie]=7,Ge.split("").forEach(function(_e){se[_e]=_e}),7!=B({},be)[Ie]||n(B({},se)).join("")!=Ge})?function(se,Ie){for(var Ge=C(se),_e=arguments.length,Le=1,We=a.f,$e=d.f;_e>Le;)for(var ae,Te=D(arguments[Le++]),ye=We?oe(n(Te),We(Te)):n(Te),ne=ye.length,ge=0;ne>ge;)ae=ye[ge++],(!E||t($e,Te,ae))&&(Ge[ae]=Te[ae]);return Ge}:B},80332:(V,Z,g)=>{var _e,E=g(10157),m=g(68453),t=g(44169),e=g(89675),n=g(93074),a=g(97947),d=g(35027),B="prototype",z="script",oe=d("IE_PROTO"),be=function(){},se=function(We){return"<"+z+">"+We+"</"+z+">"},Ie=function(We){We.write(se("")),We.close();var $e=We.parentWindow.Object;return We=null,$e},Le=function(){try{_e=new ActiveXObject("htmlfile")}catch($e){}Le="undefined"!=typeof document?document.domain&&_e?Ie(_e):function(){var Te,We=a("iframe");return We.style.display="none",n.appendChild(We),We.src=String("javascript:"),(Te=We.contentWindow.document).open(),Te.write(se("document.F=Object")),Te.close(),Te.F}():Ie(_e);for(var We=t.length;We--;)delete Le[B][t[We]];return Le()};e[oe]=!0,V.exports=Object.create||function($e,Te){var ye;return null!==$e?(be[B]=E($e),ye=new be,be[B]=null,ye[oe]=$e):ye=Le(),void 0===Te?ye:m(ye,Te)}},68453:(V,Z,g)=>{var E=g(25847),m=g(13528),t=g(10157),e=g(35197),n=g(77978);V.exports=E?Object.defineProperties:function(d,C){t(d);for(var be,D=e(C),B=n(C),z=B.length,oe=0;z>oe;)m.f(d,be=B[oe++],D[be]);return d}},13528:(V,Z,g)=>{var E=g(22743),m=g(25847),t=g(5223),e=g(10157),n=g(73540),a=E.TypeError,d=Object.defineProperty;Z.f=m?d:function(D,B,z){if(e(D),B=n(B),e(z),t)try{return d(D,B,z)}catch(oe){}if("get"in z||"set"in z)throw a("Accessors not supported");return"value"in z&&(D[B]=z.value),D}},26552:(V,Z,g)=>{var E=g(25847),m=g(85246),t=g(19664),e=g(41137),n=g(35197),a=g(73540),d=g(44030),C=g(5223),D=Object.getOwnPropertyDescriptor;Z.f=E?D:function(z,oe){if(z=n(z),oe=a(oe),C)try{return D(z,oe)}catch(be){}if(d(z,oe))return e(!m(t.f,z,oe),z[oe])}},24281:(V,Z,g)=>{var E=g(50181),m=g(35197),t=g(42769).f,e=g(11566),n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];V.exports.f=function(C){return n&&"Window"==E(C)?function(d){try{return t(d)}catch(C){return e(n)}}(C):t(m(C))}},42769:(V,Z,g)=>{var E=g(1991),t=g(44169).concat("length","prototype");Z.f=Object.getOwnPropertyNames||function(n){return E(n,t)}},30233:(V,Z)=>{Z.f=Object.getOwnPropertySymbols},84361:(V,Z,g)=>{var E=g(22743),m=g(44030),t=g(24732),e=g(49402),n=g(35027),a=g(87275),d=n("IE_PROTO"),C=E.Object,D=C.prototype;V.exports=a?C.getPrototypeOf:function(B){var z=e(B);if(m(z,d))return z[d];var oe=z.constructor;return t(oe)&&z instanceof oe?oe.prototype:z instanceof C?D:null}},19086:(V,Z,g)=>{var E=g(31469),m=g(78103),t=g(50181),e=g(35877),n=Object.isExtensible,a=E(function(){n(1)});V.exports=a||e?function(C){return!(!m(C)||e&&"ArrayBuffer"==t(C))&&(!n||n(C))}:n},76185:(V,Z,g)=>{var E=g(31588);V.exports=E({}.isPrototypeOf)},1991:(V,Z,g)=>{var E=g(31588),m=g(44030),t=g(35197),e=g(68047).indexOf,n=g(89675),a=E([].push);V.exports=function(d,C){var oe,D=t(d),B=0,z=[];for(oe in D)!m(n,oe)&&m(D,oe)&&a(z,oe);for(;C.length>B;)m(D,oe=C[B++])&&(~e(z,oe)||a(z,oe));return z}},77978:(V,Z,g)=>{var E=g(1991),m=g(44169);V.exports=Object.keys||function(e){return E(e,m)}},19664:(V,Z)=>{"use strict";var g={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,m=E&&!g.call({1:2},1);Z.f=m?function(e){var n=E(this,e);return!!n&&n.enumerable}:g},91100:(V,Z,g)=>{var E=g(31588),m=g(10157),t=g(58995);V.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,e=!1,n={};try{(a=E(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(d){}return function(C,D){return m(C),t(D),e?a(C,D):C.__proto__=D,C}}():void 0)},6936:(V,Z,g)=>{var E=g(25847),m=g(31588),t=g(77978),e=g(35197),a=m(g(19664).f),d=m([].push),C=function(D){return function(B){for(var Ge,z=e(B),oe=t(z),be=oe.length,se=0,Ie=[];be>se;)Ge=oe[se++],(!E||a(z,Ge))&&d(Ie,D?[Ge,z[Ge]]:z[Ge]);return Ie}};V.exports={entries:C(!0),values:C(!1)}},93005:(V,Z,g)=>{"use strict";var E=g(57575),m=g(80063);V.exports=E?{}.toString:function(){return"[object "+m(this)+"]"}},75671:(V,Z,g)=>{var E=g(22743),m=g(85246),t=g(24732),e=g(78103),n=E.TypeError;V.exports=function(a,d){var C,D;if("string"===d&&t(C=a.toString)&&!e(D=m(C,a))||t(C=a.valueOf)&&!e(D=m(C,a))||"string"!==d&&t(C=a.toString)&&!e(D=m(C,a)))return D;throw n("Can't convert object to primitive value")}},68566:(V,Z,g)=>{var E=g(85697),m=g(31588),t=g(42769),e=g(30233),n=g(10157),a=m([].concat);V.exports=E("Reflect","ownKeys")||function(C){var D=t.f(n(C)),B=e.f;return B?a(D,B(C)):D}},35060:V=>{V.exports={}},50819:V=>{V.exports=function(Z){try{return{error:!1,value:Z()}}catch(g){return{error:!0,value:g}}}},92273:(V,Z,g)=>{var E=g(10157),m=g(78103),t=g(39802);V.exports=function(e,n){if(E(e),m(n)&&n.constructor===e)return n;var a=t.f(e);return(0,a.resolve)(n),a.promise}},75893:V=>{var Z=function(){this.head=null,this.tail=null};Z.prototype={add:function(g){var E={item:g,next:null};this.head?this.tail.next=E:this.head=E,this.tail=E},get:function(){var g=this.head;if(g)return this.head=g.next,this.tail===g&&(this.tail=null),g.item}},V.exports=Z},70658:(V,Z,g)=>{var E=g(51121);V.exports=function(m,t,e){for(var n in t)e&&e.unsafe&&m[n]?m[n]=t[n]:E(m,n,t[n],e);return m}},51121:(V,Z,g)=>{var E=g(78204);V.exports=function(m,t,e,n){n&&n.enumerable?m[t]=e:E(m,t,e)}},86213:(V,Z,g)=>{var m=g(22743).TypeError;V.exports=function(t){if(null==t)throw m("Can't call method on "+t);return t}},41728:(V,Z,g)=>{var E=g(22743),m=Object.defineProperty;V.exports=function(t,e){try{m(E,t,{value:e,configurable:!0,writable:!0})}catch(n){E[t]=e}return e}},13961:(V,Z,g)=>{"use strict";var E=g(85697),m=g(13528),t=g(7084),e=g(25847),n=t("species");V.exports=function(a){var d=E(a);e&&d&&!d[n]&&(0,m.f)(d,n,{configurable:!0,get:function(){return this}})}},63598:(V,Z,g)=>{var E=g(57575),m=g(13528).f,t=g(78204),e=g(44030),n=g(93005),d=g(7084)("toStringTag");V.exports=function(C,D,B,z){if(C){var oe=B?C:C.prototype;e(oe,d)||m(oe,d,{configurable:!0,value:D}),z&&!E&&t(oe,"toString",n)}}},35027:(V,Z,g)=>{var E=g(843),m=g(7226),t=E("keys");V.exports=function(e){return t[e]||(t[e]=m(e))}},65732:(V,Z,g)=>{var E=g(22743),m=g(41728),t="__core-js_shared__",e=E[t]||m(t,{});V.exports=e},843:(V,Z,g)=>{var E=g(92838),m=g(65732);(V.exports=function(t,e){return m[t]||(m[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.1",mode:E?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},85972:(V,Z,g)=>{var E=g(10157),m=g(77498),e=g(7084)("species");V.exports=function(n,a){var C,d=E(n).constructor;return void 0===d||null==(C=E(d)[e])?a:m(C)}},93071:(V,Z,g)=>{var E=g(31588),m=g(21524),t=g(94506),e=g(86213),n=E("".charAt),a=E("".charCodeAt),d=E("".slice),C=function(D){return function(B,z){var Ie,Ge,oe=t(e(B)),be=m(z),se=oe.length;return be<0||be>=se?D?"":void 0:(Ie=a(oe,be))<55296||Ie>56319||be+1===se||(Ge=a(oe,be+1))<56320||Ge>57343?D?n(oe,be):Ie:D?d(oe,be,be+2):Ge-56320+(Ie-55296<<10)+65536}};V.exports={codeAt:C(!1),charAt:C(!0)}},76401:(V,Z,g)=>{var ye,ne,ge,ae,E=g(22743),m=g(30547),t=g(21137),e=g(24732),n=g(44030),a=g(31469),d=g(93074),C=g(90840),D=g(97947),B=g(49612),z=g(70751),oe=E.setImmediate,be=E.clearImmediate,se=E.process,Ie=E.Dispatch,Ge=E.Function,_e=E.MessageChannel,Le=E.String,We=0,$e={},Te="onreadystatechange";try{ye=E.location}catch(ie){}var He=function(ie){if(n($e,ie)){var ht=$e[ie];delete $e[ie],ht()}},Se=function(ie){return function(){He(ie)}},Ee=function(ie){He(ie.data)},ue=function(ie){E.postMessage(Le(ie),ye.protocol+"//"+ye.host)};(!oe||!be)&&(oe=function(ht){var Oe=C(arguments,1);return $e[++We]=function(){m(e(ht)?ht:Ge(ht),void 0,Oe)},ne(We),We},be=function(ht){delete $e[ht]},z?ne=function(ie){se.nextTick(Se(ie))}:Ie&&Ie.now?ne=function(ie){Ie.now(Se(ie))}:_e&&!B?(ae=(ge=new _e).port2,ge.port1.onmessage=Ee,ne=t(ae.postMessage,ae)):E.addEventListener&&e(E.postMessage)&&!E.importScripts&&ye&&"file:"!==ye.protocol&&!a(ue)?(ne=ue,E.addEventListener("message",Ee,!1)):ne=Te in D("script")?function(ie){d.appendChild(D("script"))[Te]=function(){d.removeChild(this),He(ie)}}:function(ie){setTimeout(Se(ie),0)}),V.exports={set:oe,clear:be}},83889:(V,Z,g)=>{var E=g(21524),m=Math.max,t=Math.min;V.exports=function(e,n){var a=E(e);return a<0?m(a+n,0):t(a,n)}},35197:(V,Z,g)=>{var E=g(23767),m=g(86213);V.exports=function(t){return E(m(t))}},21524:V=>{var Z=Math.ceil,g=Math.floor;V.exports=function(E){var m=+E;return m!=m||0===m?0:(m>0?g:Z)(m)}},61468:(V,Z,g)=>{var E=g(21524),m=Math.min;V.exports=function(t){return t>0?m(E(t),9007199254740991):0}},49402:(V,Z,g)=>{var E=g(22743),m=g(86213),t=E.Object;V.exports=function(e){return t(m(e))}},25696:(V,Z,g)=>{var E=g(22743),m=g(85246),t=g(78103),e=g(90094),n=g(30047),a=g(75671),d=g(7084),C=E.TypeError,D=d("toPrimitive");V.exports=function(B,z){if(!t(B)||e(B))return B;var be,oe=n(B,D);if(oe){if(void 0===z&&(z="default"),be=m(oe,B,z),!t(be)||e(be))return be;throw C("Can't convert object to primitive value")}return void 0===z&&(z="number"),a(B,z)}},73540:(V,Z,g)=>{var E=g(25696),m=g(90094);V.exports=function(t){var e=E(t,"string");return m(e)?e:e+""}},57575:(V,Z,g)=>{var t={};t[g(7084)("toStringTag")]="z",V.exports="[object z]"===String(t)},94506:(V,Z,g)=>{var E=g(22743),m=g(80063),t=E.String;V.exports=function(e){if("Symbol"===m(e))throw TypeError("Cannot convert a Symbol value to a string");return t(e)}},99727:(V,Z,g)=>{var m=g(22743).String;V.exports=function(t){try{return m(t)}catch(e){return"Object"}}},7226:(V,Z,g)=>{var E=g(31588),m=0,t=Math.random(),e=E(1..toString);V.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+e(++m+t,36)}},43587:(V,Z,g)=>{var E=g(62581);V.exports=E&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},14525:(V,Z,g)=>{var E=g(7084);Z.f=E},7084:(V,Z,g)=>{var E=g(22743),m=g(843),t=g(44030),e=g(7226),n=g(62581),a=g(43587),d=m("wks"),C=E.Symbol,D=C&&C.for,B=a?C:C&&C.withoutSetter||e;V.exports=function(z){if(!t(d,z)||!n&&"string"!=typeof d[z]){var oe="Symbol."+z;d[z]=n&&t(C,z)?C[z]:a&&D?D(oe):B(oe)}return d[z]}},84722:(V,Z,g)=>{"use strict";var E=g(70147),m=g(22743),t=g(76185),e=g(84361),n=g(91100),a=g(47902),d=g(80332),C=g(78204),D=g(41137),B=g(79087),z=g(42783),oe=g(99883),be=g(58823),se=g(7084),Ie=g(92335),Ge=se("toStringTag"),_e=m.Error,Le=[].push,We=function(ye,ne){var He,ge=arguments.length>2?arguments[2]:void 0,ae=t($e,this);n?He=n(new _e,ae?e(this):$e):(He=ae?this:d($e),C(He,Ge,"Error")),void 0!==ne&&C(He,"message",be(ne)),Ie&&C(He,"stack",B(He.stack,1)),z(He,ge);var Se=[];return oe(ye,Le,{that:Se}),C(He,"errors",Se),He};n?n(We,_e):a(We,_e,{name:!0});var $e=We.prototype=d(_e.prototype,{constructor:D(1,We),message:D(1,""),name:D(1,"AggregateError")});E({global:!0},{AggregateError:We})},56874:(V,Z,g)=>{"use strict";var E=g(70147),m=g(22743),t=g(31469),e=g(10371),n=g(78103),a=g(49402),d=g(33706),C=g(3115),D=g(4414),B=g(85367),z=g(7084),oe=g(10322),be=z("isConcatSpreadable"),se=9007199254740991,Ie="Maximum allowed index exceeded",Ge=m.TypeError,_e=oe>=51||!t(function(){var Te=[];return Te[be]=!1,Te.concat()[0]!==Te}),Le=B("concat"),We=function(Te){if(!n(Te))return!1;var ye=Te[be];return void 0!==ye?!!ye:e(Te)};E({target:"Array",proto:!0,forced:!_e||!Le},{concat:function(ye){var He,Se,Ee,ue,ie,ne=a(this),ge=D(ne,0),ae=0;for(He=-1,Ee=arguments.length;He<Ee;He++)if(We(ie=-1===He?ne:arguments[He])){if(ae+(ue=d(ie))>se)throw Ge(Ie);for(Se=0;Se<ue;Se++,ae++)Se in ie&&C(ge,ae,ie[Se])}else{if(ae>=se)throw Ge(Ie);C(ge,ae++,ie)}return ge.length=ae,ge}})},7100:(V,Z,g)=>{"use strict";var E=g(70147),m=g(53877).filter;E({target:"Array",proto:!0,forced:!g(85367)("filter")},{filter:function(a){return m(this,a,arguments.length>1?arguments[1]:void 0)}})},96648:(V,Z,g)=>{"use strict";var E=g(70147),m=g(53877).find,t=g(70677),e="find",n=!0;e in[]&&Array(1)[e](function(){n=!1}),E({target:"Array",proto:!0,forced:n},{find:function(d){return m(this,d,arguments.length>1?arguments[1]:void 0)}}),t(e)},58665:(V,Z,g)=>{"use strict";var E=g(70147),m=g(19875);E({target:"Array",proto:!0,forced:[].forEach!=m},{forEach:m})},48161:(V,Z,g)=>{var E=g(70147),m=g(96397);E({target:"Array",stat:!0,forced:!g(4402)(function(n){Array.from(n)})},{from:m})},85124:(V,Z,g)=>{"use strict";var E=g(70147),m=g(68047).includes,t=g(70677);E({target:"Array",proto:!0},{includes:function(n){return m(this,n,arguments.length>1?arguments[1]:void 0)}}),t("includes")},89815:(V,Z,g)=>{"use strict";var E=g(70147),m=g(31588),t=g(68047).indexOf,e=g(52995),n=m([].indexOf),a=!!n&&1/n([1],1,-0)<0,d=e("indexOf");E({target:"Array",proto:!0,forced:a||!d},{indexOf:function(D){var B=arguments.length>1?arguments[1]:void 0;return a?n(this,D,B)||0:t(this,D,B)}})},71006:(V,Z,g)=>{g(70147)({target:"Array",stat:!0},{isArray:g(10371)})},71420:(V,Z,g)=>{"use strict";var E=g(35197),m=g(70677),t=g(44362),e=g(34520),n=g(13528).f,a=g(52928),d=g(92838),C=g(25847),D="Array Iterator",B=e.set,z=e.getterFor(D);V.exports=a(Array,"Array",function(be,se){B(this,{type:D,target:E(be),index:0,kind:se})},function(){var be=z(this),se=be.target,Ie=be.kind,Ge=be.index++;return!se||Ge>=se.length?(be.target=void 0,{value:void 0,done:!0}):"keys"==Ie?{value:Ge,done:!1}:"values"==Ie?{value:se[Ge],done:!1}:{value:[Ge,se[Ge]],done:!1}},"values");var oe=t.Arguments=t.Array;if(m("keys"),m("values"),m("entries"),!d&&C&&"values"!==oe.name)try{n(oe,"name",{value:"values"})}catch(be){}},81171:(V,Z,g)=>{"use strict";var E=g(70147),m=g(53877).map;E({target:"Array",proto:!0,forced:!g(85367)("map")},{map:function(a){return m(this,a,arguments.length>1?arguments[1]:void 0)}})},21311:(V,Z,g)=>{"use strict";var E=g(70147),m=g(22743),t=g(10371),e=g(67459),n=g(78103),a=g(83889),d=g(33706),C=g(35197),D=g(3115),B=g(7084),z=g(85367),oe=g(90840),be=z("slice"),se=B("species"),Ie=m.Array,Ge=Math.max;E({target:"Array",proto:!0,forced:!be},{slice:function(Le,We){var ge,ae,He,$e=C(this),Te=d($e),ye=a(Le,Te),ne=a(void 0===We?Te:We,Te);if(t($e)&&((e(ge=$e.constructor)&&(ge===Ie||t(ge.prototype))||n(ge)&&null===(ge=ge[se]))&&(ge=void 0),ge===Ie||void 0===ge))return oe($e,ye,ne);for(ae=new(void 0===ge?Ie:ge)(Ge(ne-ye,0)),He=0;ye<ne;ye++,He++)ye in $e&&D(ae,He,$e[ye]);return ae.length=He,ae}})},19314:(V,Z,g)=>{"use strict";var E=g(70147),m=g(22743),t=g(83889),e=g(21524),n=g(33706),a=g(49402),d=g(4414),C=g(3115),B=g(85367)("splice"),z=m.TypeError,oe=Math.max,be=Math.min,se=9007199254740991,Ie="Maximum allowed length exceeded";E({target:"Array",proto:!0,forced:!B},{splice:function(_e,Le){var ne,ge,ae,He,Se,Ee,We=a(this),$e=n(We),Te=t(_e,$e),ye=arguments.length;if(0===ye?ne=ge=0:1===ye?(ne=0,ge=$e-Te):(ne=ye-2,ge=be(oe(e(Le),0),$e-Te)),$e+ne-ge>se)throw z(Ie);for(ae=d(We,ge),He=0;He<ge;He++)(Se=Te+He)in We&&C(ae,He,We[Se]);if(ae.length=ge,ne<ge){for(He=Te;He<$e-ge;He++)Ee=He+ne,(Se=He+ge)in We?We[Ee]=We[Se]:delete We[Ee];for(He=$e;He>$e-ge+ne;He--)delete We[He-1]}else if(ne>ge)for(He=$e-ge;He>Te;He--)Ee=He+ne-1,(Se=He+ge-1)in We?We[Ee]=We[Se]:delete We[Ee];for(He=0;He<ne;He++)We[He+Te]=arguments[He+2];return We.length=$e-ge+ne,ae}})},86061:(V,Z,g)=>{var E=g(70147),m=g(22743),t=g(85697),e=g(30547),n=g(31588),a=g(31469),d=m.Array,C=t("JSON","stringify"),D=n(/./.exec),B=n("".charAt),z=n("".charCodeAt),oe=n("".replace),be=n(1..toString),se=/[\uD800-\uDFFF]/g,Ie=/^[\uD800-\uDBFF]$/,Ge=/^[\uDC00-\uDFFF]$/,_e=function(We,$e,Te){var ye=B(Te,$e-1),ne=B(Te,$e+1);return D(Ie,We)&&!D(Ge,ne)||D(Ge,We)&&!D(Ie,ye)?"\\u"+be(z(We,0),16):We},Le=a(function(){return'"\\udf06\\ud834"'!==C("\udf06\ud834")||'"\\udead"'!==C("\udead")});C&&E({target:"JSON",stat:!0,forced:Le},{stringify:function($e,Te,ye){for(var ne=0,ge=arguments.length,ae=d(ge);ne<ge;ne++)ae[ne]=arguments[ne];var He=e(C,null,ae);return"string"==typeof He?oe(He,se,_e):He}})},85504:(V,Z,g)=>{var E=g(22743);g(63598)(E.JSON,"JSON",!0)},15551:()=>{},7923:(V,Z,g)=>{var E=g(70147),m=g(94347);E({target:"Object",stat:!0,forced:Object.assign!==m},{assign:m})},13227:(V,Z,g)=>{var E=g(70147),m=g(25847);E({target:"Object",stat:!0,forced:!m,sham:!m},{defineProperties:g(68453)})},24526:(V,Z,g)=>{var E=g(70147),m=g(25847);E({target:"Object",stat:!0,forced:!m,sham:!m},{defineProperty:g(13528).f})},50042:(V,Z,g)=>{var E=g(70147),m=g(6936).entries;E({target:"Object",stat:!0},{entries:function(e){return m(e)}})},49711:(V,Z,g)=>{var E=g(70147),m=g(31469),t=g(35197),e=g(26552).f,n=g(25847),a=m(function(){e(1)});E({target:"Object",stat:!0,forced:!n||a,sham:!n},{getOwnPropertyDescriptor:function(D,B){return e(t(D),B)}})},10130:(V,Z,g)=>{var E=g(70147),m=g(25847),t=g(68566),e=g(35197),n=g(26552),a=g(3115);E({target:"Object",stat:!0,sham:!m},{getOwnPropertyDescriptors:function(C){for(var se,Ie,D=e(C),B=n.f,z=t(D),oe={},be=0;z.length>be;)void 0!==(Ie=B(D,se=z[be++]))&&a(oe,se,Ie);return oe}})},68126:(V,Z,g)=>{var E=g(70147),m=g(49402),t=g(77978);E({target:"Object",stat:!0,forced:g(31469)(function(){t(1)})},{keys:function(d){return t(m(d))}})},42271:()=>{},52568:(V,Z,g)=>{"use strict";var E=g(70147),m=g(85246),t=g(80866),e=g(39802),n=g(50819),a=g(99883);E({target:"Promise",stat:!0},{allSettled:function(C){var D=this,B=e.f(D),z=B.resolve,oe=B.reject,be=n(function(){var se=t(D.resolve),Ie=[],Ge=0,_e=1;a(C,function(Le){var We=Ge++,$e=!1;_e++,m(se,D,Le).then(function(Te){$e||($e=!0,Ie[We]={status:"fulfilled",value:Te},--_e||z(Ie))},function(Te){$e||($e=!0,Ie[We]={status:"rejected",reason:Te},--_e||z(Ie))})}),--_e||z(Ie)});return be.error&&oe(be.value),B.promise}})},64111:(V,Z,g)=>{"use strict";var E=g(70147),m=g(80866),t=g(85697),e=g(85246),n=g(39802),a=g(50819),d=g(99883),C="No one promise resolved";E({target:"Promise",stat:!0},{any:function(B){var z=this,oe=t("AggregateError"),be=n.f(z),se=be.resolve,Ie=be.reject,Ge=a(function(){var _e=m(z.resolve),Le=[],We=0,$e=1,Te=!1;d(B,function(ye){var ne=We++,ge=!1;$e++,e(_e,z,ye).then(function(ae){ge||Te||(Te=!0,se(ae))},function(ae){ge||Te||(ge=!0,Le[ne]=ae,--$e||Ie(new oe(Le,C)))})}),--$e||Ie(new oe(Le,C))});return Ge.error&&Ie(Ge.value),be.promise}})},1395:(V,Z,g)=>{"use strict";var E=g(70147),m=g(92838),t=g(38977),e=g(31469),n=g(85697),a=g(24732),d=g(85972),C=g(92273),D=g(51121);if(E({target:"Promise",proto:!0,real:!0,forced:!!t&&e(function(){t.prototype.finally.call({then:function(){}},function(){})})},{finally:function(oe){var be=d(this,n("Promise")),se=a(oe);return this.then(se?function(Ie){return C(be,oe()).then(function(){return Ie})}:oe,se?function(Ie){return C(be,oe()).then(function(){throw Ie})}:oe)}}),!m&&a(t)){var z=n("Promise").prototype.finally;t.prototype.finally!==z&&D(t.prototype,"finally",z,{unsafe:!0})}},17569:(V,Z,g)=>{"use strict";var nt,mt,yt,Ze,E=g(70147),m=g(92838),t=g(22743),e=g(85697),n=g(85246),a=g(38977),d=g(51121),C=g(70658),D=g(91100),B=g(63598),z=g(13961),oe=g(80866),be=g(24732),se=g(78103),Ie=g(43017),Ge=g(13271),_e=g(99883),Le=g(4402),We=g(85972),$e=g(76401).set,Te=g(72845),ye=g(92273),ne=g(18819),ge=g(39802),ae=g(50819),He=g(75893),Se=g(34520),Ee=g(35059),ue=g(7084),ie=g(28150),ht=g(70751),Oe=g(10322),ke=ue("species"),dt="Promise",vt=Se.getterFor(dt),lt=Se.set,Bt=Se.getterFor(dt),Pt=a&&a.prototype,Zt=a,Di=Pt,ii=t.TypeError,Ct=t.document,gi=t.process,Be=ge.f,Tt=Be,Je=!!(Ct&&Ct.createEvent&&t.dispatchEvent),_t=be(t.PromiseRejectionEvent),xe="unhandledrejection",Lt=!1,ut=Ee(dt,function(){var zt=Ge(Zt),Mi=zt!==String(Zt);if(!Mi&&66===Oe||m&&!Di.finally)return!0;if(Oe>=51&&/native code/.test(zt))return!1;var _i=new Zt(function(ft){ft(1)}),Bi=function(ft){ft(function(){},function(){})};return(_i.constructor={})[ke]=Bi,!(Lt=_i.then(function(){})instanceof Bi)||!Mi&&ie&&!_t}),ei=ut||!Le(function(zt){Zt.all(zt).catch(function(){})}),ni=function(zt){var Mi;return!(!se(zt)||!be(Mi=zt.then))&&Mi},Ni=function(zt,Mi){var Pe,at,It,_i=Mi.value,Bi=1==Mi.state,Jt=Bi?zt.ok:zt.fail,ft=zt.resolve,Ae=zt.reject,le=zt.domain;try{Jt?(Bi||(2===Mi.rejection&&Ji(Mi),Mi.rejection=1),!0===Jt?Pe=_i:(le&&le.enter(),Pe=Jt(_i),le&&(le.exit(),It=!0)),Pe===zt.promise?Ae(ii("Promise-chain cycle")):(at=ni(Pe))?n(at,Pe,ft,Ae):ft(Pe)):Ae(_i)}catch(Gi){le&&!It&&le.exit(),Ae(Gi)}},wi=function(zt,Mi){zt.notified||(zt.notified=!0,Te(function(){for(var Bi,_i=zt.reactions;Bi=_i.get();)Ni(Bi,zt);zt.notified=!1,Mi&&!zt.rejection&&pn(zt)}))},yi=function(zt,Mi,_i){var Bi,Jt;Je?((Bi=Ct.createEvent("Event")).promise=Mi,Bi.reason=_i,Bi.initEvent(zt,!1,!0),t.dispatchEvent(Bi)):Bi={promise:Mi,reason:_i},!_t&&(Jt=t["on"+zt])?Jt(Bi):zt===xe&&ne("Unhandled promise rejection",_i)},pn=function(zt){n($e,t,function(){var Jt,Mi=zt.facade,_i=zt.value;if(mi(zt)&&(Jt=ae(function(){ht?gi.emit("unhandledRejection",_i,Mi):yi(xe,Mi,_i)}),zt.rejection=ht||mi(zt)?2:1,Jt.error))throw Jt.value})},mi=function(zt){return 1!==zt.rejection&&!zt.parent},Ji=function(zt){n($e,t,function(){var Mi=zt.facade;ht?gi.emit("rejectionHandled",Mi):yi("rejectionhandled",Mi,zt.value)})},wt=function(zt,Mi,_i){return function(Bi){zt(Mi,Bi,_i)}},Ot=function(zt,Mi,_i){zt.done||(zt.done=!0,_i&&(zt=_i),zt.value=Mi,zt.state=2,wi(zt,!0))},Ci=function(zt,Mi,_i){if(!zt.done){zt.done=!0,_i&&(zt=_i);try{if(zt.facade===Mi)throw ii("Promise can't be resolved itself");var Bi=ni(Mi);Bi?Te(function(){var Jt={done:!1};try{n(Bi,Mi,wt(Ci,Jt,zt),wt(Ot,Jt,zt))}catch(ft){Ot(Jt,ft,zt)}}):(zt.value=Mi,zt.state=1,wi(zt,!1))}catch(Jt){Ot({done:!1},Jt,zt)}}};if(ut&&(Zt=function(Mi){Ie(this,Di),oe(Mi),n(nt,this);var _i=vt(this);try{Mi(wt(Ci,_i),wt(Ot,_i))}catch(Bi){Ot(_i,Bi)}},(nt=function(Mi){lt(this,{type:dt,done:!1,notified:!1,parent:!1,reactions:new He,rejection:!1,state:0,value:void 0})}).prototype=C(Di=Zt.prototype,{then:function(Mi,_i){var Bi=Bt(this),Jt=Be(We(this,Zt));return Bi.parent=!0,Jt.ok=!be(Mi)||Mi,Jt.fail=be(_i)&&_i,Jt.domain=ht?gi.domain:void 0,0==Bi.state?Bi.reactions.add(Jt):Te(function(){Ni(Jt,Bi)}),Jt.promise},catch:function(zt){return this.then(void 0,zt)}}),mt=function(){var zt=new nt,Mi=vt(zt);this.promise=zt,this.resolve=wt(Ci,Mi),this.reject=wt(Ot,Mi)},ge.f=Be=function(zt){return zt===Zt||zt===yt?new mt(zt):Tt(zt)},!m&&be(a)&&Pt!==Object.prototype)){Ze=Pt.then,Lt||(d(Pt,"then",function(Mi,_i){var Bi=this;return new Zt(function(Jt,ft){n(Ze,Bi,Jt,ft)}).then(Mi,_i)},{unsafe:!0}),d(Pt,"catch",Di.catch,{unsafe:!0}));try{delete Pt.constructor}catch(zt){}D&&D(Pt,Di)}E({global:!0,wrap:!0,forced:ut},{Promise:Zt}),B(Zt,dt,!1,!0),z(dt),yt=e(dt),E({target:dt,stat:!0,forced:ut},{reject:function(Mi){var _i=Be(this);return n(_i.reject,void 0,Mi),_i.promise}}),E({target:dt,stat:!0,forced:m||ut},{resolve:function(Mi){return ye(m&&this===yt?Zt:this,Mi)}}),E({target:dt,stat:!0,forced:ei},{all:function(Mi){var _i=this,Bi=Be(_i),Jt=Bi.resolve,ft=Bi.reject,Ae=ae(function(){var le=oe(_i.resolve),Pe=[],at=0,It=1;_e(Mi,function(Gi){var Zi=at++,En=!1;It++,n(le,_i,Gi).then(function(nr){En||(En=!0,Pe[Zi]=nr,--It||Jt(Pe))},ft)}),--It||Jt(Pe)});return Ae.error&&ft(Ae.value),Bi.promise},race:function(Mi){var _i=this,Bi=Be(_i),Jt=Bi.reject,ft=ae(function(){var Ae=oe(_i.resolve);_e(Mi,function(le){n(Ae,_i,le).then(Bi.resolve,Jt)})});return ft.error&&Jt(ft.value),Bi.promise}})},61897:()=>{},11568:(V,Z,g)=>{"use strict";var E=g(70147),m=g(31588),t=g(43353),e=g(86213),n=g(94506),a=g(15268),d=m("".indexOf);E({target:"String",proto:!0,forced:!a("includes")},{includes:function(D){return!!~d(n(e(this)),n(t(D)),arguments.length>1?arguments[1]:void 0)}})},80651:(V,Z,g)=>{"use strict";var E=g(93071).charAt,m=g(94506),t=g(34520),e=g(52928),n="String Iterator",a=t.set,d=t.getterFor(n);e(String,"String",function(C){a(this,{type:n,string:m(C),index:0})},function(){var oe,D=d(this),B=D.string,z=D.index;return z>=B.length?{value:void 0,done:!0}:(oe=E(B,z),D.index+=oe.length,{value:oe,done:!1})})},72068:(V,Z,g)=>{"use strict";var Ie,E=g(70147),m=g(31588),t=g(26552).f,e=g(61468),n=g(94506),a=g(43353),d=g(86213),C=g(15268),D=g(92838),B=m("".startsWith),z=m("".slice),oe=Math.min,be=C("startsWith");E({target:"String",proto:!0,forced:!(!D&&!be&&(Ie=t(String.prototype,"startsWith"),Ie&&!Ie.writable)||be)},{startsWith:function(Ge){var _e=n(d(this));a(Ge);var Le=e(oe(arguments.length>1?arguments[1]:void 0,_e.length)),We=n(Ge);return B?B(_e,We,Le):z(_e,Le,Le+We.length)===We}})},9266:(V,Z,g)=>{g(59478)("asyncIterator")},87189:()=>{},94898:(V,Z,g)=>{g(59478)("hasInstance")},57133:(V,Z,g)=>{g(59478)("isConcatSpreadable")},3766:(V,Z,g)=>{g(59478)("iterator")},83136:(V,Z,g)=>{"use strict";var E=g(70147),m=g(22743),t=g(85697),e=g(30547),n=g(85246),a=g(31588),d=g(92838),C=g(25847),D=g(62581),B=g(31469),z=g(44030),oe=g(10371),be=g(24732),se=g(78103),Ie=g(76185),Ge=g(90094),_e=g(10157),Le=g(49402),We=g(35197),$e=g(73540),Te=g(94506),ye=g(41137),ne=g(80332),ge=g(77978),ae=g(42769),He=g(24281),Se=g(30233),Ee=g(26552),ue=g(13528),ie=g(19664),ht=g(90840),Oe=g(51121),ke=g(843),dt=g(35027),vt=g(89675),lt=g(7226),Bt=g(7084),Pt=g(14525),Zt=g(59478),Di=g(63598),ii=g(34520),Ct=g(53877).forEach,gi=dt("hidden"),Be="Symbol",Tt="prototype",Je=Bt("toPrimitive"),_t=ii.set,xe=ii.getterFor(Be),pt=Object[Tt],jt=m.Symbol,di=jt&&jt[Tt],Rt=m.TypeError,et=m.QObject,tt=t("JSON","stringify"),Lt=Ee.f,nt=ue.f,mt=He.f,yt=ie.f,Ze=a([].push),ut=ke("symbols"),ei=ke("op-symbols"),ni=ke("string-to-symbol-registry"),Ni=ke("symbol-to-string-registry"),wi=ke("wks"),yi=!et||!et[Tt]||!et[Tt].findChild,pn=C&&B(function(){return 7!=ne(nt({},"a",{get:function(){return nt(this,"a",{value:7}).a}})).a})?function(ft,Ae,le){var Pe=Lt(pt,Ae);Pe&&delete pt[Ae],nt(ft,Ae,le),Pe&&ft!==pt&&nt(pt,Ae,Pe)}:nt,mi=function(ft,Ae){var le=ut[ft]=ne(di);return _t(le,{type:Be,tag:ft,description:Ae}),C||(le.description=Ae),le},Ji=function(Ae,le,Pe){Ae===pt&&Ji(ei,le,Pe),_e(Ae);var at=$e(le);return _e(Pe),z(ut,at)?(Pe.enumerable?(z(Ae,gi)&&Ae[gi][at]&&(Ae[gi][at]=!1),Pe=ne(Pe,{enumerable:ye(0,!1)})):(z(Ae,gi)||nt(Ae,gi,ye(1,{})),Ae[gi][at]=!0),pn(Ae,at,Pe)):nt(Ae,at,Pe)},wt=function(Ae,le){_e(Ae);var Pe=We(le),at=ge(Pe).concat(_i(Pe));return Ct(at,function(It){(!C||n(Ci,Pe,It))&&Ji(Ae,It,Pe[It])}),Ae},Ci=function(Ae){var le=$e(Ae),Pe=n(yt,this,le);return!(this===pt&&z(ut,le)&&!z(ei,le))&&(!(Pe||!z(this,le)||!z(ut,le)||z(this,gi)&&this[gi][le])||Pe)},zt=function(Ae,le){var Pe=We(Ae),at=$e(le);if(Pe!==pt||!z(ut,at)||z(ei,at)){var It=Lt(Pe,at);return It&&z(ut,at)&&!(z(Pe,gi)&&Pe[gi][at])&&(It.enumerable=!0),It}},Mi=function(Ae){var le=mt(We(Ae)),Pe=[];return Ct(le,function(at){!z(ut,at)&&!z(vt,at)&&Ze(Pe,at)}),Pe},_i=function(Ae){var le=Ae===pt,Pe=mt(le?ei:We(Ae)),at=[];return Ct(Pe,function(It){z(ut,It)&&(!le||z(pt,It))&&Ze(at,ut[It])}),at};if(D||(Oe(di=(jt=function(){if(Ie(di,this))throw Rt("Symbol is not a constructor");var Ae=arguments.length&&void 0!==arguments[0]?Te(arguments[0]):void 0,le=lt(Ae),Pe=function(at){this===pt&&n(Pe,ei,at),z(this,gi)&&z(this[gi],le)&&(this[gi][le]=!1),pn(this,le,ye(1,at))};return C&&yi&&pn(pt,le,{configurable:!0,set:Pe}),mi(le,Ae)})[Tt],"toString",function(){return xe(this).tag}),Oe(jt,"withoutSetter",function(ft){return mi(lt(ft),ft)}),ie.f=Ci,ue.f=Ji,Ee.f=zt,ae.f=He.f=Mi,Se.f=_i,Pt.f=function(ft){return mi(Bt(ft),ft)},C&&(nt(di,"description",{configurable:!0,get:function(){return xe(this).description}}),d||Oe(pt,"propertyIsEnumerable",Ci,{unsafe:!0}))),E({global:!0,wrap:!0,forced:!D,sham:!D},{Symbol:jt}),Ct(ge(wi),function(ft){Zt(ft)}),E({target:Be,stat:!0,forced:!D},{for:function(ft){var Ae=Te(ft);if(z(ni,Ae))return ni[Ae];var le=jt(Ae);return ni[Ae]=le,Ni[le]=Ae,le},keyFor:function(Ae){if(!Ge(Ae))throw Rt(Ae+" is not a symbol");if(z(Ni,Ae))return Ni[Ae]},useSetter:function(){yi=!0},useSimple:function(){yi=!1}}),E({target:"Object",stat:!0,forced:!D,sham:!C},{create:function(Ae,le){return void 0===le?ne(Ae):wt(ne(Ae),le)},defineProperty:Ji,defineProperties:wt,getOwnPropertyDescriptor:zt}),E({target:"Object",stat:!0,forced:!D},{getOwnPropertyNames:Mi,getOwnPropertySymbols:_i}),E({target:"Object",stat:!0,forced:B(function(){Se.f(1)})},{getOwnPropertySymbols:function(Ae){return Se.f(Le(Ae))}}),tt&&E({target:"JSON",stat:!0,forced:!D||B(function(){var ft=jt();return"[null]"!=tt([ft])||"{}"!=tt({a:ft})||"{}"!=tt(Object(ft))})},{stringify:function(Ae,le,Pe){var at=ht(arguments),It=le;if((se(le)||void 0!==Ae)&&!Ge(Ae))return oe(le)||(le=function(Gi,Zi){if(be(It)&&(Zi=n(It,this,Gi,Zi)),!Ge(Zi))return Zi}),at[1]=le,e(tt,null,at)}}),!di[Je]){var Jt=di.valueOf;Oe(di,Je,function(ft){return n(Jt,this)})}Di(jt,Be),vt[gi]=!0},84765:(V,Z,g)=>{g(59478)("matchAll")},49342:(V,Z,g)=>{g(59478)("match")},83606:(V,Z,g)=>{g(59478)("replace")},25909:(V,Z,g)=>{g(59478)("search")},42383:(V,Z,g)=>{g(59478)("species")},98547:(V,Z,g)=>{g(59478)("split")},73418:(V,Z,g)=>{g(59478)("toPrimitive")},82266:(V,Z,g)=>{g(59478)("toStringTag")},30797:(V,Z,g)=>{g(59478)("unscopables")},29960:(V,Z,g)=>{"use strict";var oe,E=g(22743),m=g(31588),t=g(70658),e=g(33613),n=g(66657),a=g(75925),d=g(78103),C=g(19086),D=g(34520).enforce,B=g(63185),z=!E.ActiveXObject&&"ActiveXObject"in E,be=function($e){return function(){return $e(this,arguments.length?arguments[0]:void 0)}},se=n("WeakMap",be,a);if(B&&z){oe=a.getConstructor(be,"WeakMap",!0),e.enable();var Ie=se.prototype,Ge=m(Ie.delete),_e=m(Ie.has),Le=m(Ie.get),We=m(Ie.set);t(Ie,{delete:function($e){if(d($e)&&!C($e)){var Te=D(this);return Te.frozen||(Te.frozen=new oe),Ge(this,$e)||Te.frozen.delete($e)}return Ge(this,$e)},has:function(Te){if(d(Te)&&!C(Te)){var ye=D(this);return ye.frozen||(ye.frozen=new oe),_e(this,Te)||ye.frozen.has(Te)}return _e(this,Te)},get:function(Te){if(d(Te)&&!C(Te)){var ye=D(this);return ye.frozen||(ye.frozen=new oe),_e(this,Te)?Le(this,Te):ye.frozen.get(Te)}return Le(this,Te)},set:function(Te,ye){if(d(Te)&&!C(Te)){var ne=D(this);ne.frozen||(ne.frozen=new oe),_e(this,Te)?We(this,Te,ye):ne.frozen.set(Te,ye)}else We(this,Te,ye);return this}})}},38669:(V,Z,g)=>{g(84722)},33483:(V,Z,g)=>{g(52568)},30389:(V,Z,g)=>{g(64111)},65193:(V,Z,g)=>{"use strict";var E=g(70147),m=g(39802),t=g(50819);E({target:"Promise",stat:!0},{try:function(e){var n=m.f(this),a=t(e);return(a.error?n.reject:n.resolve)(a.value),n.promise}})},59108:(V,Z,g)=>{g(59478)("asyncDispose")},98488:(V,Z,g)=>{g(59478)("dispose")},65802:(V,Z,g)=>{g(59478)("matcher")},38772:(V,Z,g)=>{g(59478)("metadata")},96398:(V,Z,g)=>{g(59478)("observable")},79699:(V,Z,g)=>{g(59478)("patternMatch")},86669:(V,Z,g)=>{g(59478)("replaceAll")},72760:(V,Z,g)=>{g(71420);var E=g(9113),m=g(22743),t=g(80063),e=g(78204),n=g(44362),d=g(7084)("toStringTag");for(var C in E){var D=m[C],B=D&&D.prototype;B&&t(B)!==d&&e(B,d,C),n[C]=n.Array}},17606:(V,Z,g)=>{"use strict";g(71420);var E=g(70147),m=g(22743),t=g(85697),e=g(85246),n=g(31588),a=g(2049),d=g(51121),C=g(70658),D=g(63598),B=g(690),z=g(34520),oe=g(43017),be=g(24732),se=g(44030),Ie=g(21137),Ge=g(80063),_e=g(10157),Le=g(78103),We=g(94506),$e=g(80332),Te=g(41137),ye=g(74471),ne=g(56958),ge=g(7084),ae=g(69274),He=ge("iterator"),Se="URLSearchParams",Ee=Se+"Iterator",ue=z.set,ie=z.getterFor(Se),ht=z.getterFor(Ee),Oe=t("fetch"),ke=t("Request"),dt=t("Headers"),vt=ke&&ke.prototype,lt=dt&&dt.prototype,Bt=m.RegExp,Pt=m.TypeError,Zt=m.decodeURIComponent,Di=m.encodeURIComponent,ii=n("".charAt),Ct=n([].join),gi=n([].push),Be=n("".replace),Tt=n([].shift),Je=n([].splice),_t=n("".split),xe=n("".slice),pt=/\+/g,jt=Array(4),di=function(mi){return jt[mi-1]||(jt[mi-1]=Bt("((?:%[\\da-f]{2}){"+mi+"})","gi"))},Rt=function(mi){try{return Zt(mi)}catch(Ji){return mi}},et=function(mi){var Ji=Be(mi,pt," "),wt=4;try{return Zt(Ji)}catch(Ot){for(;wt;)Ji=Be(Ji,di(wt--),Rt);return Ji}},tt=/[!'()~]|%20/g,Lt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},nt=function(mi){return Lt[mi]},mt=function(mi){return Be(Di(mi),tt,nt)},yt=function(mi,Ji){if(mi<Ji)throw Pt("Not enough arguments")},Ze=B(function(Ji,wt){ue(this,{type:Ee,iterator:ye(ie(Ji).entries),kind:wt})},"Iterator",function(){var Ji=ht(this),wt=Ji.kind,Ot=Ji.iterator.next(),Ci=Ot.value;return Ot.done||(Ot.value="keys"===wt?Ci.key:"values"===wt?Ci.value:[Ci.key,Ci.value]),Ot},!0),ut=function(mi){this.entries=[],this.url=null,void 0!==mi&&(Le(mi)?this.parseObject(mi):this.parseQuery("string"==typeof mi?"?"===ii(mi,0)?xe(mi,1):mi:We(mi)))};ut.prototype={type:Se,bindURL:function(mi){this.url=mi,this.update()},parseObject:function(mi){var wt,Ot,Ci,zt,Mi,_i,Bi,Ji=ne(mi);if(Ji)for(Ot=(wt=ye(mi,Ji)).next;!(Ci=e(Ot,wt)).done;){if(zt=ye(_e(Ci.value)),(_i=e(Mi=zt.next,zt)).done||(Bi=e(Mi,zt)).done||!e(Mi,zt).done)throw Pt("Expected sequence with length 2");gi(this.entries,{key:We(_i.value),value:We(Bi.value)})}else for(var Jt in mi)se(mi,Jt)&&gi(this.entries,{key:Jt,value:We(mi[Jt])})},parseQuery:function(mi){if(mi)for(var Ot,Ci,Ji=_t(mi,"&"),wt=0;wt<Ji.length;)(Ot=Ji[wt++]).length&&(Ci=_t(Ot,"="),gi(this.entries,{key:et(Tt(Ci)),value:et(Ct(Ci,"="))}))},serialize:function(){for(var Ot,mi=this.entries,Ji=[],wt=0;wt<mi.length;)Ot=mi[wt++],gi(Ji,mt(Ot.key)+"="+mt(Ot.value));return Ct(Ji,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ei=function(){oe(this,ni);var Ji=arguments.length>0?arguments[0]:void 0;ue(this,new ut(Ji))},ni=ei.prototype;if(C(ni,{append:function(Ji,wt){yt(arguments.length,2);var Ot=ie(this);gi(Ot.entries,{key:We(Ji),value:We(wt)}),Ot.updateURL()},delete:function(mi){yt(arguments.length,1);for(var Ji=ie(this),wt=Ji.entries,Ot=We(mi),Ci=0;Ci<wt.length;)wt[Ci].key===Ot?Je(wt,Ci,1):Ci++;Ji.updateURL()},get:function(Ji){yt(arguments.length,1);for(var wt=ie(this).entries,Ot=We(Ji),Ci=0;Ci<wt.length;Ci++)if(wt[Ci].key===Ot)return wt[Ci].value;return null},getAll:function(Ji){yt(arguments.length,1);for(var wt=ie(this).entries,Ot=We(Ji),Ci=[],zt=0;zt<wt.length;zt++)wt[zt].key===Ot&&gi(Ci,wt[zt].value);return Ci},has:function(Ji){yt(arguments.length,1);for(var wt=ie(this).entries,Ot=We(Ji),Ci=0;Ci<wt.length;)if(wt[Ci++].key===Ot)return!0;return!1},set:function(Ji,wt){yt(arguments.length,1);for(var Jt,Ot=ie(this),Ci=Ot.entries,zt=!1,Mi=We(Ji),_i=We(wt),Bi=0;Bi<Ci.length;Bi++)(Jt=Ci[Bi]).key===Mi&&(zt?Je(Ci,Bi--,1):(zt=!0,Jt.value=_i));zt||gi(Ci,{key:Mi,value:_i}),Ot.updateURL()},sort:function(){var Ji=ie(this);ae(Ji.entries,function(wt,Ot){return wt.key>Ot.key?1:-1}),Ji.updateURL()},forEach:function(Ji){for(var zt,wt=ie(this).entries,Ot=Ie(Ji,arguments.length>1?arguments[1]:void 0),Ci=0;Ci<wt.length;)Ot((zt=wt[Ci++]).value,zt.key,this)},keys:function(){return new Ze(this,"keys")},values:function(){return new Ze(this,"values")},entries:function(){return new Ze(this,"entries")}},{enumerable:!0}),d(ni,He,ni.entries,{name:"entries"}),d(ni,"toString",function(){return ie(this).serialize()},{enumerable:!0}),D(ei,Se),E({global:!0,forced:!a},{URLSearchParams:ei}),!a&&be(dt)){var Ni=n(lt.has),wi=n(lt.set),yi=function(mi){if(Le(mi)){var wt,Ji=mi.body;if(Ge(Ji)===Se)return wt=mi.headers?new dt(mi.headers):new dt,Ni(wt,"content-type")||wi(wt,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),$e(mi,{body:Te(0,We(Ji)),headers:Te(0,wt)})}return mi};if(be(Oe)&&E({global:!0,enumerable:!0,forced:!0},{fetch:function(Ji){return Oe(Ji,arguments.length>1?yi(arguments[1]):{})}}),be(ke)){var pn=function(Ji){return oe(this,vt),new ke(Ji,arguments.length>1?yi(arguments[1]):{})};vt.constructor=pn,pn.prototype=vt,E({global:!0,forced:!0},{Request:pn})}}V.exports={URLSearchParams:ei,getState:ie}},47471:(V,Z,g)=>{var E=g(75426);V.exports=E},37722:(V,Z,g)=>{var E=g(11529);V.exports=E},93049:(V,Z,g)=>{var E=g(66213);V.exports=E},34863:(V,Z,g)=>{var E=g(88191);V.exports=E},91081:(V,Z,g)=>{var E=g(45347);g(72760),V.exports=E},21049:(V,Z,g)=>{var E=g(36022);V.exports=E},43175:(V,Z,g)=>{g(72760);var E=g(80063),m=g(44030),t=g(76185),e=g(93049),n=Array.prototype,a={DOMTokenList:!0,NodeList:!0};V.exports=function(d){var C=d.entries;return d===n||t(n,d)&&C===n.entries||m(a,E(d))?e:C}},3352:(V,Z,g)=>{var E=g(73301);V.exports=E},13566:(V,Z,g)=>{var E=g(38387);V.exports=E},35558:(V,Z,g)=>{g(72760);var E=g(80063),m=g(44030),t=g(76185),e=g(34863),n=Array.prototype,a={DOMTokenList:!0,NodeList:!0};V.exports=function(d){var C=d.forEach;return d===n||t(n,d)&&C===n.forEach||m(a,E(d))?e:C}},70201:(V,Z,g)=>{var E=g(1629);V.exports=E},49127:(V,Z,g)=>{var E=g(66338);V.exports=E},21570:(V,Z,g)=>{var E=g(57378);V.exports=E},46726:(V,Z,g)=>{var E=g(70093);V.exports=E},38366:(V,Z,g)=>{var E=g(16172);V.exports=E},63317:(V,Z,g)=>{var E=g(7706);V.exports=E},68687:(V,Z,g)=>{var E=g(22730);V.exports=E},15256:(V,Z,g)=>{var E=g(66619);V.exports=E},87968:(V,Z,g)=>{var E=g(4040);V.exports=E},81040:(V,Z,g)=>{var E=g(7420);V.exports=E},21929:(V,Z,g)=>{var E=g(2011);V.exports=E},18047:(V,Z,g)=>{var E=g(95595);V.exports=E},16521:(V,Z,g)=>{var E=g(42093);V.exports=E},32825:(V,Z,g)=>{var E=g(93296);V.exports=E},70977:(V,Z,g)=>{var E=g(31159);V.exports=E},35019:(V,Z,g)=>{var E=g(9850);g(72760),V.exports=E},11830:(V,Z,g)=>{var E=g(18297);g(72760),V.exports=E},61453:(V,Z,g)=>{var E=g(5933);g(72760),V.exports=E},24733:(V,Z,g)=>{var E=g(74107);g(72760),V.exports=E},65623:(V,Z,g)=>{var E=g(70238);g(72760),V.exports=E},74107:(V,Z,g)=>{g(17606);var E=g(35060);V.exports=E.URLSearchParams},76400:function(){var V;V="undefined"!=typeof self?self:this,function(g){var E_searchParams="URLSearchParams"in V,E_iterable="Symbol"in V&&"iterator"in Symbol,E_blob="FileReader"in V&&"Blob"in V&&function(){try{return new Blob,!0}catch(ge){return!1}}(),E_formData="FormData"in V,E_arrayBuffer="ArrayBuffer"in V;if(E_arrayBuffer)var t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],e=ArrayBuffer.isView||function(ge){return ge&&t.indexOf(Object.prototype.toString.call(ge))>-1};function n(ge){if("string"!=typeof ge&&(ge=String(ge)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(ge))throw new TypeError("Invalid character in header field name");return ge.toLowerCase()}function a(ge){return"string"!=typeof ge&&(ge=String(ge)),ge}function d(ge){var ae={next:function(){var He=ge.shift();return{done:void 0===He,value:He}}};return E_iterable&&(ae[Symbol.iterator]=function(){return ae}),ae}function C(ge){this.map={},ge instanceof C?ge.forEach(function(ae,He){this.append(He,ae)},this):Array.isArray(ge)?ge.forEach(function(ae){this.append(ae[0],ae[1])},this):ge&&Object.getOwnPropertyNames(ge).forEach(function(ae){this.append(ae,ge[ae])},this)}function D(ge){if(ge.bodyUsed)return Promise.reject(new TypeError("Already read"));ge.bodyUsed=!0}function B(ge){return new Promise(function(ae,He){ge.onload=function(){ae(ge.result)},ge.onerror=function(){He(ge.error)}})}function z(ge){var ae=new FileReader,He=B(ae);return ae.readAsArrayBuffer(ge),He}function se(ge){if(ge.slice)return ge.slice(0);var ae=new Uint8Array(ge.byteLength);return ae.set(new Uint8Array(ge)),ae.buffer}function Ie(){return this.bodyUsed=!1,this._initBody=function(ge){this._bodyInit=ge,ge?"string"==typeof ge?this._bodyText=ge:E_blob&&Blob.prototype.isPrototypeOf(ge)?this._bodyBlob=ge:E_formData&&FormData.prototype.isPrototypeOf(ge)?this._bodyFormData=ge:E_searchParams&&URLSearchParams.prototype.isPrototypeOf(ge)?this._bodyText=ge.toString():E_arrayBuffer&&E_blob&&function(ge){return ge&&DataView.prototype.isPrototypeOf(ge)}(ge)?(this._bodyArrayBuffer=se(ge.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):E_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ge)||e(ge))?this._bodyArrayBuffer=se(ge):this._bodyText=ge=Object.prototype.toString.call(ge):this._bodyText="",this.headers.get("content-type")||("string"==typeof ge?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):E_searchParams&&URLSearchParams.prototype.isPrototypeOf(ge)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},E_blob&&(this.blob=function(){var ge=D(this);if(ge)return ge;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?D(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(z)}),this.text=function(){var ge=D(this);if(ge)return ge;if(this._bodyBlob)return function(ge){var ae=new FileReader,He=B(ae);return ae.readAsText(ge),He}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(ge){for(var ae=new Uint8Array(ge),He=new Array(ae.length),Se=0;Se<ae.length;Se++)He[Se]=String.fromCharCode(ae[Se]);return He.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},E_formData&&(this.formData=function(){return this.text().then(We)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(ge,ae){ge=n(ge),ae=a(ae);var He=this.map[ge];this.map[ge]=He?He+", "+ae:ae},C.prototype.delete=function(ge){delete this.map[n(ge)]},C.prototype.get=function(ge){return ge=n(ge),this.has(ge)?this.map[ge]:null},C.prototype.has=function(ge){return this.map.hasOwnProperty(n(ge))},C.prototype.set=function(ge,ae){this.map[n(ge)]=a(ae)},C.prototype.forEach=function(ge,ae){for(var He in this.map)this.map.hasOwnProperty(He)&&ge.call(ae,this.map[He],He,this)},C.prototype.keys=function(){var ge=[];return this.forEach(function(ae,He){ge.push(He)}),d(ge)},C.prototype.values=function(){var ge=[];return this.forEach(function(ae){ge.push(ae)}),d(ge)},C.prototype.entries=function(){var ge=[];return this.forEach(function(ae,He){ge.push([He,ae])}),d(ge)},E_iterable&&(C.prototype[Symbol.iterator]=C.prototype.entries);var Ge=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Le(ge,ae){var He=(ae=ae||{}).body;if(ge instanceof Le){if(ge.bodyUsed)throw new TypeError("Already read");this.url=ge.url,this.credentials=ge.credentials,ae.headers||(this.headers=new C(ge.headers)),this.method=ge.method,this.mode=ge.mode,this.signal=ge.signal,!He&&null!=ge._bodyInit&&(He=ge._bodyInit,ge.bodyUsed=!0)}else this.url=String(ge);if(this.credentials=ae.credentials||this.credentials||"same-origin",(ae.headers||!this.headers)&&(this.headers=new C(ae.headers)),this.method=function(ge){var ae=ge.toUpperCase();return Ge.indexOf(ae)>-1?ae:ge}(ae.method||this.method||"GET"),this.mode=ae.mode||this.mode||null,this.signal=ae.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&He)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(He)}function We(ge){var ae=new FormData;return ge.trim().split("&").forEach(function(He){if(He){var Se=He.split("="),Ee=Se.shift().replace(/\+/g," "),ue=Se.join("=").replace(/\+/g," ");ae.append(decodeURIComponent(Ee),decodeURIComponent(ue))}}),ae}function $e(ge){var ae=new C;return ge.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Se){var Ee=Se.split(":"),ue=Ee.shift().trim();if(ue){var ie=Ee.join(":").trim();ae.append(ue,ie)}}),ae}function Te(ge,ae){ae||(ae={}),this.type="default",this.status=void 0===ae.status?200:ae.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ae?ae.statusText:"OK",this.headers=new C(ae.headers),this.url=ae.url||"",this._initBody(ge)}Le.prototype.clone=function(){return new Le(this,{body:this._bodyInit})},Ie.call(Le.prototype),Ie.call(Te.prototype),Te.prototype.clone=function(){return new Te(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},Te.error=function(){var ge=new Te(null,{status:0,statusText:""});return ge.type="error",ge};var ye=[301,302,303,307,308];Te.redirect=function(ge,ae){if(-1===ye.indexOf(ae))throw new RangeError("Invalid status code");return new Te(null,{status:ae,headers:{location:ge}})},g.DOMException=V.DOMException;try{new g.DOMException}catch(ge){g.DOMException=function(ae,He){this.message=ae,this.name=He;var Se=Error(ae);this.stack=Se.stack},g.DOMException.prototype=Object.create(Error.prototype),g.DOMException.prototype.constructor=g.DOMException}function ne(ge,ae){return new Promise(function(He,Se){var Ee=new Le(ge,ae);if(Ee.signal&&Ee.signal.aborted)return Se(new g.DOMException("Aborted","AbortError"));var ue=new XMLHttpRequest;function ie(){ue.abort()}ue.onload=function(){var ht={status:ue.status,statusText:ue.statusText,headers:$e(ue.getAllResponseHeaders()||"")};ht.url="responseURL"in ue?ue.responseURL:ht.headers.get("X-Request-URL"),He(new Te("response"in ue?ue.response:ue.responseText,ht))},ue.onerror=function(){Se(new TypeError("Network request failed"))},ue.ontimeout=function(){Se(new TypeError("Network request failed"))},ue.onabort=function(){Se(new g.DOMException("Aborted","AbortError"))},ue.open(Ee.method,Ee.url,!0),"include"===Ee.credentials?ue.withCredentials=!0:"omit"===Ee.credentials&&(ue.withCredentials=!1),"responseType"in ue&&E_blob&&(ue.responseType="blob"),Ee.headers.forEach(function(ht,Oe){ue.setRequestHeader(Oe,ht)}),Ee.signal&&(Ee.signal.addEventListener("abort",ie),ue.onreadystatechange=function(){4===ue.readyState&&Ee.signal.removeEventListener("abort",ie)}),ue.send(void 0===Ee._bodyInit?null:Ee._bodyInit)})}ne.polyfill=!0,V.fetch||(V.fetch=ne,V.Headers=C,V.Request=Le,V.Response=Te),g.Headers=C,g.Request=Le,g.Response=Te,g.fetch=ne,Object.defineProperty(g,"__esModule",{value:!0})}({})},89986:V=>{"use strict";function Z(e){return e instanceof Buffer||e instanceof Date||e instanceof RegExp}function g(e){if(e instanceof Buffer){var n=Buffer.alloc?Buffer.alloc(e.length):new Buffer(e.length);return e.copy(n),n}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new Error("Unexpected situation")}function E(e){var n=[];return e.forEach(function(a,d){n[d]="object"==typeof a&&null!==a?Array.isArray(a)?E(a):Z(a)?g(a):t({},a):a}),n}function m(e,n){return"__proto__"===n?void 0:e[n]}var t=V.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var a,d,e=arguments[0],n=Array.prototype.slice.call(arguments,1);return n.forEach(function(D){"object"!=typeof D||null===D||Array.isArray(D)||Object.keys(D).forEach(function(B){if(d=m(e,B),(a=m(D,B))!==e)return"object"!=typeof a||null===a?void(e[B]=a):Array.isArray(a)?void(e[B]=E(a)):Z(a)?void(e[B]=g(a)):"object"!=typeof d||null===d||Array.isArray(d)?void(e[B]=t({},a)):void(e[B]=t(d,a))})}),e}},66939:V=>{"use strict";var Z="Function.prototype.bind called on incompatible ",g=Array.prototype.slice,E=Object.prototype.toString,m="[object Function]";V.exports=function(e){var n=this;if("function"!=typeof n||E.call(n)!==m)throw new TypeError(Z+n);for(var d,a=g.call(arguments,1),C=function(){if(this instanceof d){var be=n.apply(this,a.concat(g.call(arguments)));return Object(be)===be?be:this}return n.apply(e,a.concat(g.call(arguments)))},D=Math.max(0,n.length-a.length),B=[],z=0;z<D;z++)B.push("$"+z);if(d=Function("binder","return function ("+B.join(",")+"){ return binder.apply(this,arguments); }")(C),n.prototype){var oe=function(){};oe.prototype=n.prototype,d.prototype=new oe,oe.prototype=null}return d}},37341:(V,Z,g)=>{"use strict";var E=g(66939);V.exports=Function.prototype.bind||E},23141:(V,Z,g)=>{"use strict";var E,m=SyntaxError,t=Function,e=TypeError,n=function(He){try{return t('"use strict"; return ('+He+").constructor;")()}catch(Se){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(He){a=null}var d=function(){throw new e},C=a?function(){try{return d}catch(He){try{return a(arguments,"callee").get}catch(Se){return d}}}():d,D=g(73165)(),B=Object.getPrototypeOf||function(He){return He.__proto__},z={},oe="undefined"==typeof Uint8Array?E:B(Uint8Array),be={"%AggregateError%":"undefined"==typeof AggregateError?E:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?E:ArrayBuffer,"%ArrayIteratorPrototype%":D?B([][Symbol.iterator]()):E,"%AsyncFromSyncIteratorPrototype%":E,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":"undefined"==typeof Atomics?E:Atomics,"%BigInt%":"undefined"==typeof BigInt?E:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?E:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?E:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?E:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?E:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":z,"%Int8Array%":"undefined"==typeof Int8Array?E:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?E:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?E:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":D?B(B([][Symbol.iterator]())):E,"%JSON%":"object"==typeof JSON?JSON:E,"%Map%":"undefined"==typeof Map?E:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&D?B((new Map)[Symbol.iterator]()):E,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?E:Promise,"%Proxy%":"undefined"==typeof Proxy?E:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?E:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?E:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&D?B((new Set)[Symbol.iterator]()):E,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?E:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":D?B(""[Symbol.iterator]()):E,"%Symbol%":D?Symbol:E,"%SyntaxError%":m,"%ThrowTypeError%":C,"%TypedArray%":oe,"%TypeError%":e,"%Uint8Array%":"undefined"==typeof Uint8Array?E:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?E:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?E:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?E:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?E:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?E:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?E:WeakSet},se=function He(Se){var Ee;if("%AsyncFunction%"===Se)Ee=n("async function () {}");else if("%GeneratorFunction%"===Se)Ee=n("function* () {}");else if("%AsyncGeneratorFunction%"===Se)Ee=n("async function* () {}");else if("%AsyncGenerator%"===Se){var ue=He("%AsyncGeneratorFunction%");ue&&(Ee=ue.prototype)}else if("%AsyncIteratorPrototype%"===Se){var ie=He("%AsyncGenerator%");ie&&(Ee=B(ie.prototype))}return be[Se]=Ee,Ee},Ie={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ge=g(37341),_e=g(91279),Le=Ge.call(Function.call,Array.prototype.concat),We=Ge.call(Function.apply,Array.prototype.splice),$e=Ge.call(Function.call,String.prototype.replace),Te=Ge.call(Function.call,String.prototype.slice),ye=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ne=/\\(\\)?/g,ge=function(Se){var Ee=Te(Se,0,1),ue=Te(Se,-1);if("%"===Ee&&"%"!==ue)throw new m("invalid intrinsic syntax, expected closing `%`");if("%"===ue&&"%"!==Ee)throw new m("invalid intrinsic syntax, expected opening `%`");var ie=[];return $e(Se,ye,function(ht,Oe,ke,dt){ie[ie.length]=ke?$e(dt,ne,"$1"):Oe||ht}),ie},ae=function(Se,Ee){var ie,ue=Se;if(_e(Ie,ue)&&(ue="%"+(ie=Ie[ue])[0]+"%"),_e(be,ue)){var ht=be[ue];if(ht===z&&(ht=se(ue)),void 0===ht&&!Ee)throw new e("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:ie,name:ue,value:ht}}throw new m("intrinsic "+Se+" does not exist!")};V.exports=function(Se,Ee){if("string"!=typeof Se||0===Se.length)throw new e("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Ee)throw new e('"allowMissing" argument must be a boolean');var ue=ge(Se),ie=ue.length>0?ue[0]:"",ht=ae("%"+ie+"%",Ee),Oe=ht.name,ke=ht.value,dt=!1,vt=ht.alias;vt&&(ie=vt[0],We(ue,Le([0,1],vt)));for(var lt=1,Bt=!0;lt<ue.length;lt+=1){var Pt=ue[lt],Zt=Te(Pt,0,1),Di=Te(Pt,-1);if(('"'===Zt||"'"===Zt||"`"===Zt||'"'===Di||"'"===Di||"`"===Di)&&Zt!==Di)throw new m("property names with quotes must have matching quotes");if(("constructor"===Pt||!Bt)&&(dt=!0),_e(be,Oe="%"+(ie+="."+Pt)+"%"))ke=be[Oe];else if(null!=ke){if(!(Pt in ke)){if(!Ee)throw new e("base intrinsic for "+Se+" exists, but the property is not available.");return}if(a&&lt+1>=ue.length){var ii=a(ke,Pt);ke=(Bt=!!ii)&&"get"in ii&&!("originalValue"in ii.get)?ii.get:ke[Pt]}else Bt=_e(ke,Pt),ke=ke[Pt];Bt&&!dt&&(be[Oe]=ke)}}return ke}},73165:(V,Z,g)=>{"use strict";var E="undefined"!=typeof Symbol&&Symbol,m=g(43918);V.exports=function(){return"function"==typeof E&&"function"==typeof Symbol&&"symbol"==typeof E("foo")&&"symbol"==typeof Symbol("bar")&&m()}},43918:V=>{"use strict";V.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var g={},E=Symbol("test"),m=Object(E);if("string"==typeof E||"[object Symbol]"!==Object.prototype.toString.call(E)||"[object Symbol]"!==Object.prototype.toString.call(m))return!1;for(E in g[E]=42,g)return!1;if("function"==typeof Object.keys&&0!==Object.keys(g).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(g).length)return!1;var e=Object.getOwnPropertySymbols(g);if(1!==e.length||e[0]!==E||!Object.prototype.propertyIsEnumerable.call(g,E))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(g,E);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},91279:(V,Z,g)=>{"use strict";var E=g(37341);V.exports=E.call(Function.call,Object.prototype.hasOwnProperty)},9976:(V,Z,g)=>{var t=g(66463)(g(75719),"DataView");V.exports=t},35705:(V,Z,g)=>{var E=g(51089),m=g(2564),t=g(65929),e=g(1422),n=g(24795);function a(d){var C=-1,D=null==d?0:d.length;for(this.clear();++C<D;){var B=d[C];this.set(B[0],B[1])}}a.prototype.clear=E,a.prototype.delete=m,a.prototype.get=t,a.prototype.has=e,a.prototype.set=n,V.exports=a},64616:(V,Z,g)=>{var E=g(45909),m=g(62578),t=g(20701),e=g(17438),n=g(60369);function a(d){var C=-1,D=null==d?0:d.length;for(this.clear();++C<D;){var B=d[C];this.set(B[0],B[1])}}a.prototype.clear=E,a.prototype.delete=m,a.prototype.get=t,a.prototype.has=e,a.prototype.set=n,V.exports=a},61805:(V,Z,g)=>{var t=g(66463)(g(75719),"Map");V.exports=t},90923:(V,Z,g)=>{var E=g(68791),m=g(3805),t=g(9274),e=g(31967),n=g(27537);function a(d){var C=-1,D=null==d?0:d.length;for(this.clear();++C<D;){var B=d[C];this.set(B[0],B[1])}}a.prototype.clear=E,a.prototype.delete=m,a.prototype.get=t,a.prototype.has=e,a.prototype.set=n,V.exports=a},49845:(V,Z,g)=>{var t=g(66463)(g(75719),"Promise");V.exports=t},79716:(V,Z,g)=>{var t=g(66463)(g(75719),"Set");V.exports=t},3824:(V,Z,g)=>{var E=g(64616),m=g(25411),t=g(79582),e=g(26415),n=g(30666),a=g(58669);function d(C){var D=this.__data__=new E(C);this.size=D.size}d.prototype.clear=m,d.prototype.delete=t,d.prototype.get=e,d.prototype.has=n,d.prototype.set=a,V.exports=d},87425:(V,Z,g)=>{var E=g(75719);V.exports=E.Symbol},2236:(V,Z,g)=>{var E=g(75719);V.exports=E.Uint8Array},65626:(V,Z,g)=>{var t=g(66463)(g(75719),"WeakMap");V.exports=t},57990:V=>{V.exports=function(g,E){for(var m=-1,t=null==g?0:g.length;++m<t&&!1!==E(g[m],m,g););return g}},92161:V=>{V.exports=function(g,E){for(var m=-1,t=null==g?0:g.length,e=0,n=[];++m<t;){var a=g[m];E(a,m,g)&&(n[e++]=a)}return n}},75715:(V,Z,g)=>{var E=g(93784),m=g(93832),t=g(83684),e=g(18666),n=g(28207),a=g(78558),C=Object.prototype.hasOwnProperty;V.exports=function(B,z){var oe=t(B),be=!oe&&m(B),se=!oe&&!be&&e(B),Ie=!oe&&!be&&!se&&a(B),Ge=oe||be||se||Ie,_e=Ge?E(B.length,String):[],Le=_e.length;for(var We in B)(z||C.call(B,We))&&(!Ge||!("length"==We||se&&("offset"==We||"parent"==We)||Ie&&("buffer"==We||"byteLength"==We||"byteOffset"==We)||n(We,Le)))&&_e.push(We);return _e}},72437:V=>{V.exports=function(g,E){for(var m=-1,t=null==g?0:g.length,e=Array(t);++m<t;)e[m]=E(g[m],m,g);return e}},85271:V=>{V.exports=function(g,E){for(var m=-1,t=E.length,e=g.length;++m<t;)g[e+m]=E[m];return g}},82407:(V,Z,g)=>{var E=g(92034),m=g(79106),e=Object.prototype.hasOwnProperty;V.exports=function(a,d,C){var D=a[d];(!e.call(a,d)||!m(D,C)||void 0===C&&!(d in a))&&E(a,d,C)}},84760:(V,Z,g)=>{var E=g(79106);V.exports=function(t,e){for(var n=t.length;n--;)if(E(t[n][0],e))return n;return-1}},54883:(V,Z,g)=>{var E=g(21492),m=g(63344);V.exports=function(e,n){return e&&E(n,m(n),e)}},26031:(V,Z,g)=>{var E=g(21492),m=g(39479);V.exports=function(e,n){return e&&E(n,m(n),e)}},92034:(V,Z,g)=>{var E=g(90086);V.exports=function(t,e,n){"__proto__"==e&&E?E(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},74857:(V,Z,g)=>{var E=g(3824),m=g(57990),t=g(82407),e=g(54883),n=g(26031),a=g(20416),d=g(14601),C=g(36377),D=g(54646),B=g(20419),z=g(80553),oe=g(40691),be=g(49965),se=g(40349),Ie=g(31743),Ge=g(83684),_e=g(18666),Le=g(15261),We=g(6264),$e=g(57221),Te=g(63344),ye=g(39479),He="[object Arguments]",ht="[object Function]",vt="[object Object]",Rt={};Rt[He]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object DataView]"]=Rt["[object Boolean]"]=Rt["[object Date]"]=Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt[vt]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object Symbol]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Error]"]=Rt[ht]=Rt["[object WeakMap]"]=!1,V.exports=function et(tt,Lt,nt,mt,yt,Ze){var ut,ei=1&Lt,ni=2&Lt,Ni=4&Lt;if(nt&&(ut=yt?nt(tt,mt,yt,Ze):nt(tt)),void 0!==ut)return ut;if(!We(tt))return tt;var wi=Ge(tt);if(wi){if(ut=be(tt),!ei)return d(tt,ut)}else{var yi=oe(tt),pn=yi==ht||"[object GeneratorFunction]"==yi;if(_e(tt))return a(tt,ei);if(yi==vt||yi==He||pn&&!yt){if(ut=ni||pn?{}:Ie(tt),!ei)return ni?D(tt,n(ut,tt)):C(tt,e(ut,tt))}else{if(!Rt[yi])return yt?tt:{};ut=se(tt,yi,ei)}}Ze||(Ze=new E);var mi=Ze.get(tt);if(mi)return mi;Ze.set(tt,ut),$e(tt)?tt.forEach(function(Ot){ut.add(et(Ot,Lt,nt,Ot,tt,Ze))}):Le(tt)&&tt.forEach(function(Ot,Ci){ut.set(Ci,et(Ot,Lt,nt,Ci,tt,Ze))});var wt=wi?void 0:(Ni?ni?z:B:ni?ye:Te)(tt);return m(wt||tt,function(Ot,Ci){wt&&(Ot=tt[Ci=Ot]),t(ut,Ci,et(Ot,Lt,nt,Ci,tt,Ze))}),ut}},85602:(V,Z,g)=>{var E=g(6264),m=Object.create,t=function(){function e(){}return function(n){if(!E(n))return{};if(m)return m(n);e.prototype=n;var a=new e;return e.prototype=void 0,a}}();V.exports=t},17046:(V,Z,g)=>{var E=g(57783),m=g(97046);V.exports=function(e,n){for(var a=0,d=(n=E(n,e)).length;null!=e&&a<d;)e=e[m(n[a++])];return a&&a==d?e:void 0}},27879:(V,Z,g)=>{var E=g(85271),m=g(83684);V.exports=function(e,n,a){var d=n(e);return m(e)?d:E(d,a(e))}},40232:(V,Z,g)=>{var E=g(87425),m=g(98329),t=g(78295),a=E?E.toStringTag:void 0;V.exports=function(C){return null==C?void 0===C?"[object Undefined]":"[object Null]":a&&a in Object(C)?m(C):t(C)}},81065:(V,Z,g)=>{var E=g(40232),m=g(22308);V.exports=function(n){return m(n)&&"[object Arguments]"==E(n)}},16612:(V,Z,g)=>{var E=g(40691),m=g(22308);V.exports=function(n){return m(n)&&"[object Map]"==E(n)}},23796:(V,Z,g)=>{var E=g(88066),m=g(98031),t=g(6264),e=g(65295),a=/^\[object .+?Constructor\]$/,z=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");V.exports=function(be){return!(!t(be)||m(be))&&(E(be)?z:a).test(e(be))}},26987:(V,Z,g)=>{var E=g(40691),m=g(22308);V.exports=function(n){return m(n)&&"[object Set]"==E(n)}},11264:(V,Z,g)=>{var E=g(40232),m=g(67818),t=g(22308),Ee={};Ee["[object Float32Array]"]=Ee["[object Float64Array]"]=Ee["[object Int8Array]"]=Ee["[object Int16Array]"]=Ee["[object Int32Array]"]=Ee["[object Uint8Array]"]=Ee["[object Uint8ClampedArray]"]=Ee["[object Uint16Array]"]=Ee["[object Uint32Array]"]=!0,Ee["[object Arguments]"]=Ee["[object Array]"]=Ee["[object ArrayBuffer]"]=Ee["[object Boolean]"]=Ee["[object DataView]"]=Ee["[object Date]"]=Ee["[object Error]"]=Ee["[object Function]"]=Ee["[object Map]"]=Ee["[object Number]"]=Ee["[object Object]"]=Ee["[object RegExp]"]=Ee["[object Set]"]=Ee["[object String]"]=Ee["[object WeakMap]"]=!1,V.exports=function(ie){return t(ie)&&m(ie.length)&&!!Ee[E(ie)]}},16249:(V,Z,g)=>{var E=g(27877),m=g(73595),e=Object.prototype.hasOwnProperty;V.exports=function(a){if(!E(a))return m(a);var d=[];for(var C in Object(a))e.call(a,C)&&"constructor"!=C&&d.push(C);return d}},90374:(V,Z,g)=>{var E=g(6264),m=g(27877),t=g(47098),n=Object.prototype.hasOwnProperty;V.exports=function(d){if(!E(d))return t(d);var C=m(d),D=[];for(var B in d)"constructor"==B&&(C||!n.call(d,B))||D.push(B);return D}},93784:V=>{V.exports=function(g,E){for(var m=-1,t=Array(g);++m<g;)t[m]=E(m);return t}},15825:(V,Z,g)=>{var E=g(87425),m=g(72437),t=g(83684),e=g(38380),a=E?E.prototype:void 0,d=a?a.toString:void 0;V.exports=function C(D){if("string"==typeof D)return D;if(t(D))return m(D,C)+"";if(e(D))return d?d.call(D):"";var B=D+"";return"0"==B&&1/D==-1/0?"-0":B}},81279:V=>{V.exports=function(g){return function(E){return g(E)}}},57783:(V,Z,g)=>{var E=g(83684),m=g(92615),t=g(4113),e=g(30381);V.exports=function(a,d){return E(a)?a:m(a,d)?[a]:t(e(a))}},2050:(V,Z,g)=>{var E=g(2236);V.exports=function(t){var e=new t.constructor(t.byteLength);return new E(e).set(new E(t)),e}},20416:(V,Z,g)=>{V=g.nmd(V);var E=g(75719),m=Z&&!Z.nodeType&&Z,t=m&&V&&!V.nodeType&&V,n=t&&t.exports===m?E.Buffer:void 0,a=n?n.allocUnsafe:void 0;V.exports=function(C,D){if(D)return C.slice();var B=C.length,z=a?a(B):new C.constructor(B);return C.copy(z),z}},85975:(V,Z,g)=>{var E=g(2050);V.exports=function(t,e){var n=e?E(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},57092:V=>{var Z=/\w*$/;V.exports=function(E){var m=new E.constructor(E.source,Z.exec(E));return m.lastIndex=E.lastIndex,m}},954:(V,Z,g)=>{var E=g(87425),m=E?E.prototype:void 0,t=m?m.valueOf:void 0;V.exports=function(n){return t?Object(t.call(n)):{}}},76009:(V,Z,g)=>{var E=g(2050);V.exports=function(t,e){var n=e?E(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},14601:V=>{V.exports=function(g,E){var m=-1,t=g.length;for(E||(E=Array(t));++m<t;)E[m]=g[m];return E}},21492:(V,Z,g)=>{var E=g(82407),m=g(92034);V.exports=function(e,n,a,d){var C=!a;a||(a={});for(var D=-1,B=n.length;++D<B;){var z=n[D],oe=d?d(a[z],e[z],z,a,e):void 0;void 0===oe&&(oe=e[z]),C?m(a,z,oe):E(a,z,oe)}return a}},36377:(V,Z,g)=>{var E=g(21492),m=g(640);V.exports=function(e,n){return E(e,m(e),n)}},54646:(V,Z,g)=>{var E=g(21492),m=g(87884);V.exports=function(e,n){return E(e,m(e),n)}},66092:(V,Z,g)=>{var E=g(75719);V.exports=E["__core-js_shared__"]},90086:(V,Z,g)=>{var E=g(66463),m=function(){try{var t=E(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();V.exports=m},15307:V=>{var Z="object"==typeof global&&global&&global.Object===Object&&global;V.exports=Z},20419:(V,Z,g)=>{var E=g(27879),m=g(640),t=g(63344);V.exports=function(n){return E(n,t,m)}},80553:(V,Z,g)=>{var E=g(27879),m=g(87884),t=g(39479);V.exports=function(n){return E(n,t,m)}},90327:(V,Z,g)=>{var E=g(40497);V.exports=function(t,e){var n=t.__data__;return E(e)?n["string"==typeof e?"string":"hash"]:n.map}},66463:(V,Z,g)=>{var E=g(23796),m=g(47820);V.exports=function(e,n){var a=m(e,n);return E(a)?a:void 0}},566:(V,Z,g)=>{var m=g(75854)(Object.getPrototypeOf,Object);V.exports=m},98329:(V,Z,g)=>{var E=g(87425),m=Object.prototype,t=m.hasOwnProperty,e=m.toString,n=E?E.toStringTag:void 0;V.exports=function(d){var C=t.call(d,n),D=d[n];try{d[n]=void 0;var B=!0}catch(oe){}var z=e.call(d);return B&&(C?d[n]=D:delete d[n]),z}},640:(V,Z,g)=>{var E=g(92161),m=g(35587),e=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;V.exports=n?function(d){return null==d?[]:(d=Object(d),E(n(d),function(C){return e.call(d,C)}))}:m},87884:(V,Z,g)=>{var E=g(85271),m=g(566),t=g(640),e=g(35587);V.exports=Object.getOwnPropertySymbols?function(d){for(var C=[];d;)E(C,t(d)),d=m(d);return C}:e},40691:(V,Z,g)=>{var E=g(9976),m=g(61805),t=g(49845),e=g(79716),n=g(65626),a=g(40232),d=g(65295),C="[object Map]",B="[object Promise]",z="[object Set]",oe="[object WeakMap]",be="[object DataView]",se=d(E),Ie=d(m),Ge=d(t),_e=d(e),Le=d(n),We=a;(E&&We(new E(new ArrayBuffer(1)))!=be||m&&We(new m)!=C||t&&We(t.resolve())!=B||e&&We(new e)!=z||n&&We(new n)!=oe)&&(We=function($e){var Te=a($e),ye="[object Object]"==Te?$e.constructor:void 0,ne=ye?d(ye):"";if(ne)switch(ne){case se:return be;case Ie:return C;case Ge:return B;case _e:return z;case Le:return oe}return Te}),V.exports=We},47820:V=>{V.exports=function(g,E){return null==g?void 0:g[E]}},51089:(V,Z,g)=>{var E=g(13947);V.exports=function(){this.__data__=E?E(null):{},this.size=0}},2564:V=>{V.exports=function(g){var E=this.has(g)&&delete this.__data__[g];return this.size-=E?1:0,E}},65929:(V,Z,g)=>{var E=g(13947),e=Object.prototype.hasOwnProperty;V.exports=function(a){var d=this.__data__;if(E){var C=d[a];return"__lodash_hash_undefined__"===C?void 0:C}return e.call(d,a)?d[a]:void 0}},1422:(V,Z,g)=>{var E=g(13947),t=Object.prototype.hasOwnProperty;V.exports=function(n){var a=this.__data__;return E?void 0!==a[n]:t.call(a,n)}},24795:(V,Z,g)=>{var E=g(13947);V.exports=function(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=E&&void 0===n?"__lodash_hash_undefined__":n,this}},49965:V=>{var g=Object.prototype.hasOwnProperty;V.exports=function(m){var t=m.length,e=new m.constructor(t);return t&&"string"==typeof m[0]&&g.call(m,"index")&&(e.index=m.index,e.input=m.input),e}},40349:(V,Z,g)=>{var E=g(2050),m=g(85975),t=g(57092),e=g(954),n=g(76009);V.exports=function(He,Se,Ee){var ue=He.constructor;switch(Se){case"[object ArrayBuffer]":return E(He);case"[object Boolean]":case"[object Date]":return new ue(+He);case"[object DataView]":return m(He,Ee);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(He,Ee);case"[object Map]":case"[object Set]":return new ue;case"[object Number]":case"[object String]":return new ue(He);case"[object RegExp]":return t(He);case"[object Symbol]":return e(He)}}},31743:(V,Z,g)=>{var E=g(85602),m=g(566),t=g(27877);V.exports=function(n){return"function"!=typeof n.constructor||t(n)?{}:E(m(n))}},28207:V=>{var g=/^(?:0|[1-9]\d*)$/;V.exports=function(m,t){var e=typeof m;return!!(t=null==t?9007199254740991:t)&&("number"==e||"symbol"!=e&&g.test(m))&&m>-1&&m%1==0&&m<t}},92615:(V,Z,g)=>{var E=g(83684),m=g(38380),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e=/^\w*$/;V.exports=function(a,d){if(E(a))return!1;var C=typeof a;return!("number"!=C&&"symbol"!=C&&"boolean"!=C&&null!=a&&!m(a))||e.test(a)||!t.test(a)||null!=d&&a in Object(d)}},40497:V=>{V.exports=function(g){var E=typeof g;return"string"==E||"number"==E||"symbol"==E||"boolean"==E?"__proto__"!==g:null===g}},98031:(V,Z,g)=>{var e,E=g(66092),m=(e=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";V.exports=function(e){return!!m&&m in e}},27877:V=>{var Z=Object.prototype;V.exports=function(E){var m=E&&E.constructor;return E===("function"==typeof m&&m.prototype||Z)}},45909:V=>{V.exports=function(){this.__data__=[],this.size=0}},62578:(V,Z,g)=>{var E=g(84760),t=Array.prototype.splice;V.exports=function(n){var a=this.__data__,d=E(a,n);return!(d<0||(d==a.length-1?a.pop():t.call(a,d,1),--this.size,0))}},20701:(V,Z,g)=>{var E=g(84760);V.exports=function(t){var e=this.__data__,n=E(e,t);return n<0?void 0:e[n][1]}},17438:(V,Z,g)=>{var E=g(84760);V.exports=function(t){return E(this.__data__,t)>-1}},60369:(V,Z,g)=>{var E=g(84760);V.exports=function(t,e){var n=this.__data__,a=E(n,t);return a<0?(++this.size,n.push([t,e])):n[a][1]=e,this}},68791:(V,Z,g)=>{var E=g(35705),m=g(64616),t=g(61805);V.exports=function(){this.size=0,this.__data__={hash:new E,map:new(t||m),string:new E}}},3805:(V,Z,g)=>{var E=g(90327);V.exports=function(t){var e=E(this,t).delete(t);return this.size-=e?1:0,e}},9274:(V,Z,g)=>{var E=g(90327);V.exports=function(t){return E(this,t).get(t)}},31967:(V,Z,g)=>{var E=g(90327);V.exports=function(t){return E(this,t).has(t)}},27537:(V,Z,g)=>{var E=g(90327);V.exports=function(t,e){var n=E(this,t),a=n.size;return n.set(t,e),this.size+=n.size==a?0:1,this}},48815:(V,Z,g)=>{var E=g(40917);V.exports=function(e){var n=E(e,function(d){return 500===a.size&&a.clear(),d}),a=n.cache;return n}},13947:(V,Z,g)=>{var m=g(66463)(Object,"create");V.exports=m},73595:(V,Z,g)=>{var m=g(75854)(Object.keys,Object);V.exports=m},47098:V=>{V.exports=function(g){var E=[];if(null!=g)for(var m in Object(g))E.push(m);return E}},56520:(V,Z,g)=>{V=g.nmd(V);var E=g(15307),m=Z&&!Z.nodeType&&Z,t=m&&V&&!V.nodeType&&V,n=t&&t.exports===m&&E.process,a=function(){try{return t&&t.require&&t.require("util").types||n&&n.binding&&n.binding("util")}catch(C){}}();V.exports=a},78295:V=>{var g=Object.prototype.toString;V.exports=function(m){return g.call(m)}},75854:V=>{V.exports=function(g,E){return function(m){return g(E(m))}}},75719:(V,Z,g)=>{var E=g(15307),m="object"==typeof self&&self&&self.Object===Object&&self,t=E||m||Function("return this")();V.exports=t},25411:(V,Z,g)=>{var E=g(64616);V.exports=function(){this.__data__=new E,this.size=0}},79582:V=>{V.exports=function(g){var E=this.__data__,m=E.delete(g);return this.size=E.size,m}},26415:V=>{V.exports=function(g){return this.__data__.get(g)}},30666:V=>{V.exports=function(g){return this.__data__.has(g)}},58669:(V,Z,g)=>{var E=g(64616),m=g(61805),t=g(90923);V.exports=function(a,d){var C=this.__data__;if(C instanceof E){var D=C.__data__;if(!m||D.length<199)return D.push([a,d]),this.size=++C.size,this;C=this.__data__=new t(D)}return C.set(a,d),this.size=C.size,this}},4113:(V,Z,g)=>{var E=g(48815),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,e=E(function(n){var a=[];return 46===n.charCodeAt(0)&&a.push(""),n.replace(m,function(d,C,D,B){a.push(D?B.replace(t,"$1"):C||d)}),a});V.exports=e},97046:(V,Z,g)=>{var E=g(38380);V.exports=function(e){if("string"==typeof e||E(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},65295:V=>{var g=Function.prototype.toString;V.exports=function(m){if(null!=m){try{return g.call(m)}catch(t){}try{return m+""}catch(t){}}return""}},69380:(V,Z,g)=>{var E=g(74857);V.exports=function(n){return E(n,5)}},79106:V=>{V.exports=function(g,E){return g===E||g!=g&&E!=E}},36817:(V,Z,g)=>{var E=g(17046);V.exports=function(t,e,n){var a=null==t?void 0:E(t,e);return void 0===a?n:a}},93832:(V,Z,g)=>{var E=g(81065),m=g(22308),t=Object.prototype,e=t.hasOwnProperty,n=t.propertyIsEnumerable,a=E(function(){return arguments}())?E:function(d){return m(d)&&e.call(d,"callee")&&!n.call(d,"callee")};V.exports=a},83684:V=>{V.exports=Array.isArray},49300:(V,Z,g)=>{var E=g(88066),m=g(67818);V.exports=function(e){return null!=e&&m(e.length)&&!E(e)}},18666:(V,Z,g)=>{V=g.nmd(V);var E=g(75719),m=g(93320),t=Z&&!Z.nodeType&&Z,e=t&&V&&!V.nodeType&&V,a=e&&e.exports===t?E.Buffer:void 0;V.exports=(a?a.isBuffer:void 0)||m},65359:(V,Z,g)=>{var E=g(16249),m=g(40691),t=g(93832),e=g(83684),n=g(49300),a=g(18666),d=g(27877),C=g(78558),oe=Object.prototype.hasOwnProperty;V.exports=function(se){if(null==se)return!0;if(n(se)&&(e(se)||"string"==typeof se||"function"==typeof se.splice||a(se)||C(se)||t(se)))return!se.length;var Ie=m(se);if("[object Map]"==Ie||"[object Set]"==Ie)return!se.size;if(d(se))return!E(se).length;for(var Ge in se)if(oe.call(se,Ge))return!1;return!0}},88066:(V,Z,g)=>{var E=g(40232),m=g(6264);V.exports=function(C){if(!m(C))return!1;var D=E(C);return"[object Function]"==D||"[object GeneratorFunction]"==D||"[object AsyncFunction]"==D||"[object Proxy]"==D}},67818:V=>{V.exports=function(E){return"number"==typeof E&&E>-1&&E%1==0&&E<=9007199254740991}},15261:(V,Z,g)=>{var E=g(16612),m=g(81279),t=g(56520),e=t&&t.isMap,n=e?m(e):E;V.exports=n},6264:V=>{V.exports=function(g){var E=typeof g;return null!=g&&("object"==E||"function"==E)}},22308:V=>{V.exports=function(g){return null!=g&&"object"==typeof g}},27935:(V,Z,g)=>{var E=g(40232),m=g(566),t=g(22308),d=Function.prototype.toString,C=Object.prototype.hasOwnProperty,D=d.call(Object);V.exports=function(z){if(!t(z)||"[object Object]"!=E(z))return!1;var oe=m(z);if(null===oe)return!0;var be=C.call(oe,"constructor")&&oe.constructor;return"function"==typeof be&&be instanceof be&&d.call(be)==D}},57221:(V,Z,g)=>{var E=g(26987),m=g(81279),t=g(56520),e=t&&t.isSet,n=e?m(e):E;V.exports=n},38380:(V,Z,g)=>{var E=g(40232),m=g(22308);V.exports=function(n){return"symbol"==typeof n||m(n)&&"[object Symbol]"==E(n)}},78558:(V,Z,g)=>{var E=g(11264),m=g(81279),t=g(56520),e=t&&t.isTypedArray,n=e?m(e):E;V.exports=n},63344:(V,Z,g)=>{var E=g(75715),m=g(16249),t=g(49300);V.exports=function(n){return t(n)?E(n):m(n)}},39479:(V,Z,g)=>{var E=g(75715),m=g(90374),t=g(49300);V.exports=function(n){return t(n)?E(n,!0):m(n)}},40917:(V,Z,g)=>{var E=g(90923);function t(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var a=function(){var d=arguments,C=n?n.apply(this,d):d[0],D=a.cache;if(D.has(C))return D.get(C);var B=e.apply(this,d);return a.cache=D.set(C,B)||D,B};return a.cache=new(t.Cache||E),a}t.Cache=E,V.exports=t},35587:V=>{V.exports=function(){return[]}},93320:V=>{V.exports=function(){return!1}},30381:(V,Z,g)=>{var E=g(15825);V.exports=function(t){return null==t?"":E(t)}},50847:(V,Z,g)=>{var E="function"==typeof Map&&Map.prototype,m=Object.getOwnPropertyDescriptor&&E?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=E&&m&&"function"==typeof m.get?m.get:null,e=E&&Map.prototype.forEach,n="function"==typeof Set&&Set.prototype,a=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,d=n&&a&&"function"==typeof a.get?a.get:null,C=n&&Set.prototype.forEach,B="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,oe="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,se="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Ie=Boolean.prototype.valueOf,Ge=Object.prototype.toString,_e=Function.prototype.toString,Le=String.prototype.match,We=String.prototype.slice,$e=String.prototype.replace,Te=String.prototype.toUpperCase,ye=String.prototype.toLowerCase,ne=RegExp.prototype.test,ge=Array.prototype.concat,ae=Array.prototype.join,He=Array.prototype.slice,Se=Math.floor,Ee="function"==typeof BigInt?BigInt.prototype.valueOf:null,ue=Object.getOwnPropertySymbols,ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ht="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Oe="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,ke=Object.prototype.propertyIsEnumerable,dt=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(wt){return wt.__proto__}:null);function vt(wt,Ot){if(wt===1/0||wt===-1/0||wt!=wt||wt&&wt>-1e3&&wt<1e3||ne.call(/e/,Ot))return Ot;var Ci=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof wt){var zt=wt<0?-Se(-wt):Se(wt);if(zt!==wt){var Mi=String(zt),_i=We.call(Ot,Mi.length+1);return $e.call(Mi,Ci,"$&_")+"."+$e.call($e.call(_i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $e.call(Ot,Ci,"$&_")}var lt=g(52175).custom,Bt=lt&&_t(lt)?lt:null;function Pt(wt,Ot,Ci){var zt="double"===(Ci.quoteStyle||Ot)?'"':"'";return zt+wt+zt}function Zt(wt){return $e.call(String(wt),/"/g,"&quot;")}function Di(wt){return!("[object Array]"!==di(wt)||Oe&&"object"==typeof wt&&Oe in wt)}function _t(wt){if(ht)return wt&&"object"==typeof wt&&wt instanceof Symbol;if("symbol"==typeof wt)return!0;if(!wt||"object"!=typeof wt||!ie)return!1;try{return ie.call(wt),!0}catch(Ot){}return!1}V.exports=function wt(Ot,Ci,zt,Mi){var _i=Ci||{};if(jt(_i,"quoteStyle")&&"single"!==_i.quoteStyle&&"double"!==_i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(jt(_i,"maxStringLength")&&("number"==typeof _i.maxStringLength?_i.maxStringLength<0&&_i.maxStringLength!==1/0:null!==_i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Bi=!jt(_i,"customInspect")||_i.customInspect;if("boolean"!=typeof Bi&&"symbol"!==Bi)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(jt(_i,"indent")&&null!==_i.indent&&"\t"!==_i.indent&&!(parseInt(_i.indent,10)===_i.indent&&_i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(jt(_i,"numericSeparator")&&"boolean"!=typeof _i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Jt=_i.numericSeparator;if(void 0===Ot)return"undefined";if(null===Ot)return"null";if("boolean"==typeof Ot)return Ot?"true":"false";if("string"==typeof Ot)return ut(Ot,_i);if("number"==typeof Ot){if(0===Ot)return 1/0/Ot>0?"0":"-0";var ft=String(Ot);return Jt?vt(Ot,ft):ft}if("bigint"==typeof Ot){var Ae=String(Ot)+"n";return Jt?vt(Ot,Ae):Ae}var le=void 0===_i.depth?5:_i.depth;if(void 0===zt&&(zt=0),zt>=le&&le>0&&"object"==typeof Ot)return Di(Ot)?"[Array]":"[Object]";var Pe=function(wt,Ot){var Ci;if("\t"===wt.indent)Ci="\t";else{if(!("number"==typeof wt.indent&&wt.indent>0))return null;Ci=ae.call(Array(wt.indent+1)," ")}return{base:Ci,prev:ae.call(Array(Ot+1),Ci)}}(_i,zt);if(void 0===Mi)Mi=[];else if(et(Mi,Ot)>=0)return"[Circular]";function at(mo,Lr,pr){if(Lr&&(Mi=He.call(Mi)).push(Lr),pr){var Ro={depth:_i.depth};return jt(_i,"quoteStyle")&&(Ro.quoteStyle=_i.quoteStyle),wt(mo,Ro,zt+1,Mi)}return wt(mo,_i,zt+1,Mi)}if("function"==typeof Ot){var It=function(wt){if(wt.name)return wt.name;var Ot=Le.call(_e.call(wt),/^function\s*([\w$]+)/);return Ot?Ot[1]:null}(Ot),Gi=Ji(Ot,at);return"[Function"+(It?": "+It:" (anonymous)")+"]"+(Gi.length>0?" { "+ae.call(Gi,", ")+" }":"")}if(_t(Ot)){var Zi=ht?$e.call(String(Ot),/^(Symbol\(.*\))_[^)]*$/,"$1"):ie.call(Ot);return"object"!=typeof Ot||ht?Zi:ni(Zi)}if(function(wt){return!(!wt||"object"!=typeof wt)&&("undefined"!=typeof HTMLElement&&wt instanceof HTMLElement||"string"==typeof wt.nodeName&&"function"==typeof wt.getAttribute)}(Ot)){for(var En="<"+ye.call(String(Ot.nodeName)),nr=Ot.attributes||[],li=0;li<nr.length;li++)En+=" "+nr[li].name+"="+Pt(Zt(nr[li].value),"double",_i);return En+=">",Ot.childNodes&&Ot.childNodes.length&&(En+="..."),En+"</"+ye.call(String(Ot.nodeName))+">"}if(Di(Ot)){if(0===Ot.length)return"[]";var $t=Ji(Ot,at);return Pe&&!function(wt){for(var Ot=0;Ot<wt.length;Ot++)if(et(wt[Ot],"\n")>=0)return!1;return!0}($t)?"["+mi($t,Pe)+"]":"[ "+ae.call($t,", ")+" ]"}if(function(wt){return!("[object Error]"!==di(wt)||Oe&&"object"==typeof wt&&Oe in wt)}(Ot)){var kt=Ji(Ot,at);return"cause"in Ot&&!ke.call(Ot,"cause")?"{ ["+String(Ot)+"] "+ae.call(ge.call("[cause]: "+at(Ot.cause),kt),", ")+" }":0===kt.length?"["+String(Ot)+"]":"{ ["+String(Ot)+"] "+ae.call(kt,", ")+" }"}if("object"==typeof Ot&&Bi){if(Bt&&"function"==typeof Ot[Bt])return Ot[Bt]();if("symbol"!==Bi&&"function"==typeof Ot.inspect)return Ot.inspect()}if(function(wt){if(!t||!wt||"object"!=typeof wt)return!1;try{t.call(wt);try{d.call(wt)}catch(Ot){return!0}return wt instanceof Map}catch(Ot){}return!1}(Ot)){var ui=[];return e.call(Ot,function(mo,Lr){ui.push(at(Lr,Ot,!0)+" => "+at(mo,Ot))}),wi("Map",t.call(Ot),ui,Pe)}if(function(wt){if(!d||!wt||"object"!=typeof wt)return!1;try{d.call(wt);try{t.call(wt)}catch(Ot){return!0}return wt instanceof Set}catch(Ot){}return!1}(Ot)){var Oi=[];return C.call(Ot,function(mo){Oi.push(at(mo,Ot))}),wi("Set",d.call(Ot),Oi,Pe)}if(function(wt){if(!B||!wt||"object"!=typeof wt)return!1;try{B.call(wt,B);try{oe.call(wt,oe)}catch(Ot){return!0}return wt instanceof WeakMap}catch(Ot){}return!1}(Ot))return Ni("WeakMap");if(function(wt){if(!oe||!wt||"object"!=typeof wt)return!1;try{oe.call(wt,oe);try{B.call(wt,B)}catch(Ot){return!0}return wt instanceof WeakSet}catch(Ot){}return!1}(Ot))return Ni("WeakSet");if(function(wt){if(!se||!wt||"object"!=typeof wt)return!1;try{return se.call(wt),!0}catch(Ot){}return!1}(Ot))return Ni("WeakRef");if(function(wt){return!("[object Number]"!==di(wt)||Oe&&"object"==typeof wt&&Oe in wt)}(Ot))return ni(at(Number(Ot)));if(function(wt){if(!wt||"object"!=typeof wt||!Ee)return!1;try{return Ee.call(wt),!0}catch(Ot){}return!1}(Ot))return ni(at(Ee.call(Ot)));if(function(wt){return!("[object Boolean]"!==di(wt)||Oe&&"object"==typeof wt&&Oe in wt)}(Ot))return ni(Ie.call(Ot));if(function(wt){return!("[object String]"!==di(wt)||Oe&&"object"==typeof wt&&Oe in wt)}(Ot))return ni(at(String(Ot)));if(!function(wt){return!("[object Date]"!==di(wt)||Oe&&"object"==typeof wt&&Oe in wt)}(Ot)&&!function(wt){return!("[object RegExp]"!==di(wt)||Oe&&"object"==typeof wt&&Oe in wt)}(Ot)){var fn=Ji(Ot,at),In=dt?dt(Ot)===Object.prototype:Ot instanceof Object||Ot.constructor===Object,ur=Ot instanceof Object?"":"null prototype",Tr=!In&&Oe&&Object(Ot)===Ot&&Oe in Ot?We.call(di(Ot),8,-1):ur?"Object":"",no=(In||"function"!=typeof Ot.constructor?"":Ot.constructor.name?Ot.constructor.name+" ":"")+(Tr||ur?"["+ae.call(ge.call([],Tr||[],ur||[]),": ")+"] ":"");return 0===fn.length?no+"{}":Pe?no+"{"+mi(fn,Pe)+"}":no+"{ "+ae.call(fn,", ")+" }"}return String(Ot)};var pt=Object.prototype.hasOwnProperty||function(wt){return wt in this};function jt(wt,Ot){return pt.call(wt,Ot)}function di(wt){return Ge.call(wt)}function et(wt,Ot){if(wt.indexOf)return wt.indexOf(Ot);for(var Ci=0,zt=wt.length;Ci<zt;Ci++)if(wt[Ci]===Ot)return Ci;return-1}function ut(wt,Ot){if(wt.length>Ot.maxStringLength){var Ci=wt.length-Ot.maxStringLength,zt="... "+Ci+" more character"+(Ci>1?"s":"");return ut(We.call(wt,0,Ot.maxStringLength),Ot)+zt}return Pt($e.call($e.call(wt,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ei),"single",Ot)}function ei(wt){var Ot=wt.charCodeAt(0),Ci={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ot];return Ci?"\\"+Ci:"\\x"+(Ot<16?"0":"")+Te.call(Ot.toString(16))}function ni(wt){return"Object("+wt+")"}function Ni(wt){return wt+" { ? }"}function wi(wt,Ot,Ci,zt){return wt+" ("+Ot+") {"+(zt?mi(Ci,zt):ae.call(Ci,", "))+"}"}function mi(wt,Ot){if(0===wt.length)return"";var Ci="\n"+Ot.prev+Ot.base;return Ci+ae.call(wt,","+Ci)+"\n"+Ot.prev}function Ji(wt,Ot){var Ci=Di(wt),zt=[];if(Ci){zt.length=wt.length;for(var Mi=0;Mi<wt.length;Mi++)zt[Mi]=jt(wt,Mi)?Ot(wt[Mi],wt):""}var Bi,_i="function"==typeof ue?ue(wt):[];if(ht){Bi={};for(var Jt=0;Jt<_i.length;Jt++)Bi["$"+_i[Jt]]=_i[Jt]}for(var ft in wt)!jt(wt,ft)||Ci&&String(Number(ft))===ft&&ft<wt.length||ht&&Bi["$"+ft]instanceof Symbol||(ne.call(/[^\w$]/,ft)?zt.push(Ot(ft,wt)+": "+Ot(wt[ft],wt)):zt.push(ft+": "+Ot(wt[ft],wt)));if("function"==typeof ue)for(var Ae=0;Ae<_i.length;Ae++)ke.call(wt,_i[Ae])&&zt.push("["+Ot(_i[Ae])+"]: "+Ot(wt[_i[Ae]],wt));return zt}},66352:V=>{"use strict";function Z(g,E){return Object.prototype.hasOwnProperty.call(g,E)}V.exports=function(g,E,m,t){m=m||"=";var e={};if("string"!=typeof g||0===g.length)return e;var n=/\+/g;g=g.split(E=E||"&");var a=1e3;t&&"number"==typeof t.maxKeys&&(a=t.maxKeys);var d=g.length;a>0&&d>a&&(d=a);for(var C=0;C<d;++C){var z,oe,be,se,D=g[C].replace(n,"%20"),B=D.indexOf(m);B>=0?(z=D.substr(0,B),oe=D.substr(B+1)):(z=D,oe=""),be=decodeURIComponent(z),se=decodeURIComponent(oe),Z(e,be)?Array.isArray(e[be])?e[be].push(se):e[be]=[e[be],se]:e[be]=se}return e}},17519:V=>{"use strict";var Z=function(g){switch(typeof g){case"string":return g;case"boolean":return g?"true":"false";case"number":return isFinite(g)?g:"";default:return""}};V.exports=function(g,E,m,t){return E=E||"&",m=m||"=",null===g&&(g=void 0),"object"==typeof g?Object.keys(g).map(function(e){var n=encodeURIComponent(Z(e))+m;return Array.isArray(g[e])?g[e].map(function(a){return n+encodeURIComponent(Z(a))}).join(E):n+encodeURIComponent(Z(g[e]))}).join(E):t?encodeURIComponent(Z(t))+m+encodeURIComponent(Z(g)):""}},10569:(V,Z,g)=>{"use strict";Z.decode=Z.parse=g(66352),Z.encode=Z.stringify=g(17519)},43510:V=>{var Z=function(g){"use strict";var t,E=Object.prototype,m=E.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",d=e.toStringTag||"@@toStringTag";function C(Oe,ke,dt){return Object.defineProperty(Oe,ke,{value:dt,enumerable:!0,configurable:!0,writable:!0}),Oe[ke]}try{C({},"")}catch(Oe){C=function(ke,dt,vt){return ke[dt]=vt}}function D(Oe,ke,dt,vt){var Bt=Object.create((ke&&ke.prototype instanceof Ge?ke:Ge).prototype),Pt=new ue(vt||[]);return Bt._invoke=function(Oe,ke,dt){var vt=z;return function(Bt,Pt){if(vt===be)throw new Error("Generator is already running");if(vt===se){if("throw"===Bt)throw Pt;return ht()}for(dt.method=Bt,dt.arg=Pt;;){var Zt=dt.delegate;if(Zt){var Di=He(Zt,dt);if(Di){if(Di===Ie)continue;return Di}}if("next"===dt.method)dt.sent=dt._sent=dt.arg;else if("throw"===dt.method){if(vt===z)throw vt=se,dt.arg;dt.dispatchException(dt.arg)}else"return"===dt.method&&dt.abrupt("return",dt.arg);vt=be;var ii=B(Oe,ke,dt);if("normal"===ii.type){if(vt=dt.done?se:oe,ii.arg===Ie)continue;return{value:ii.arg,done:dt.done}}"throw"===ii.type&&(vt=se,dt.method="throw",dt.arg=ii.arg)}}}(Oe,dt,Pt),Bt}function B(Oe,ke,dt){try{return{type:"normal",arg:Oe.call(ke,dt)}}catch(vt){return{type:"throw",arg:vt}}}g.wrap=D;var z="suspendedStart",oe="suspendedYield",be="executing",se="completed",Ie={};function Ge(){}function _e(){}function Le(){}var We={};C(We,n,function(){return this});var $e=Object.getPrototypeOf,Te=$e&&$e($e(ie([])));Te&&Te!==E&&m.call(Te,n)&&(We=Te);var ye=Le.prototype=Ge.prototype=Object.create(We);function ne(Oe){["next","throw","return"].forEach(function(ke){C(Oe,ke,function(dt){return this._invoke(ke,dt)})})}function ge(Oe,ke){function dt(Bt,Pt,Zt,Di){var ii=B(Oe[Bt],Oe,Pt);if("throw"!==ii.type){var Ct=ii.arg,gi=Ct.value;return gi&&"object"==typeof gi&&m.call(gi,"__await")?ke.resolve(gi.__await).then(function(Be){dt("next",Be,Zt,Di)},function(Be){dt("throw",Be,Zt,Di)}):ke.resolve(gi).then(function(Be){Ct.value=Be,Zt(Ct)},function(Be){return dt("throw",Be,Zt,Di)})}Di(ii.arg)}var vt;this._invoke=function(Bt,Pt){function Zt(){return new ke(function(Di,ii){dt(Bt,Pt,Di,ii)})}return vt=vt?vt.then(Zt,Zt):Zt()}}function He(Oe,ke){var dt=Oe.iterator[ke.method];if(dt===t){if(ke.delegate=null,"throw"===ke.method){if(Oe.iterator.return&&(ke.method="return",ke.arg=t,He(Oe,ke),"throw"===ke.method))return Ie;ke.method="throw",ke.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ie}var vt=B(dt,Oe.iterator,ke.arg);if("throw"===vt.type)return ke.method="throw",ke.arg=vt.arg,ke.delegate=null,Ie;var lt=vt.arg;return lt?lt.done?(ke[Oe.resultName]=lt.value,ke.next=Oe.nextLoc,"return"!==ke.method&&(ke.method="next",ke.arg=t),ke.delegate=null,Ie):lt:(ke.method="throw",ke.arg=new TypeError("iterator result is not an object"),ke.delegate=null,Ie)}function Se(Oe){var ke={tryLoc:Oe[0]};1 in Oe&&(ke.catchLoc=Oe[1]),2 in Oe&&(ke.finallyLoc=Oe[2],ke.afterLoc=Oe[3]),this.tryEntries.push(ke)}function Ee(Oe){var ke=Oe.completion||{};ke.type="normal",delete ke.arg,Oe.completion=ke}function ue(Oe){this.tryEntries=[{tryLoc:"root"}],Oe.forEach(Se,this),this.reset(!0)}function ie(Oe){if(Oe){var ke=Oe[n];if(ke)return ke.call(Oe);if("function"==typeof Oe.next)return Oe;if(!isNaN(Oe.length)){var dt=-1,vt=function lt(){for(;++dt<Oe.length;)if(m.call(Oe,dt))return lt.value=Oe[dt],lt.done=!1,lt;return lt.value=t,lt.done=!0,lt};return vt.next=vt}}return{next:ht}}function ht(){return{value:t,done:!0}}return _e.prototype=Le,C(ye,"constructor",Le),C(Le,"constructor",_e),_e.displayName=C(Le,d,"GeneratorFunction"),g.isGeneratorFunction=function(Oe){var ke="function"==typeof Oe&&Oe.constructor;return!!ke&&(ke===_e||"GeneratorFunction"===(ke.displayName||ke.name))},g.mark=function(Oe){return Object.setPrototypeOf?Object.setPrototypeOf(Oe,Le):(Oe.__proto__=Le,C(Oe,d,"GeneratorFunction")),Oe.prototype=Object.create(ye),Oe},g.awrap=function(Oe){return{__await:Oe}},ne(ge.prototype),C(ge.prototype,a,function(){return this}),g.AsyncIterator=ge,g.async=function(Oe,ke,dt,vt,lt){void 0===lt&&(lt=Promise);var Bt=new ge(D(Oe,ke,dt,vt),lt);return g.isGeneratorFunction(ke)?Bt:Bt.next().then(function(Pt){return Pt.done?Pt.value:Bt.next()})},ne(ye),C(ye,d,"Generator"),C(ye,n,function(){return this}),C(ye,"toString",function(){return"[object Generator]"}),g.keys=function(Oe){var ke=[];for(var dt in Oe)ke.push(dt);return ke.reverse(),function vt(){for(;ke.length;){var lt=ke.pop();if(lt in Oe)return vt.value=lt,vt.done=!1,vt}return vt.done=!0,vt}},g.values=ie,ue.prototype={constructor:ue,reset:function(Oe){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(Ee),!Oe)for(var ke in this)"t"===ke.charAt(0)&&m.call(this,ke)&&!isNaN(+ke.slice(1))&&(this[ke]=t)},stop:function(){this.done=!0;var ke=this.tryEntries[0].completion;if("throw"===ke.type)throw ke.arg;return this.rval},dispatchException:function(Oe){if(this.done)throw Oe;var ke=this;function dt(Di,ii){return Bt.type="throw",Bt.arg=Oe,ke.next=Di,ii&&(ke.method="next",ke.arg=t),!!ii}for(var vt=this.tryEntries.length-1;vt>=0;--vt){var lt=this.tryEntries[vt],Bt=lt.completion;if("root"===lt.tryLoc)return dt("end");if(lt.tryLoc<=this.prev){var Pt=m.call(lt,"catchLoc"),Zt=m.call(lt,"finallyLoc");if(Pt&&Zt){if(this.prev<lt.catchLoc)return dt(lt.catchLoc,!0);if(this.prev<lt.finallyLoc)return dt(lt.finallyLoc)}else if(Pt){if(this.prev<lt.catchLoc)return dt(lt.catchLoc,!0)}else{if(!Zt)throw new Error("try statement without catch or finally");if(this.prev<lt.finallyLoc)return dt(lt.finallyLoc)}}}},abrupt:function(Oe,ke){for(var dt=this.tryEntries.length-1;dt>=0;--dt){var vt=this.tryEntries[dt];if(vt.tryLoc<=this.prev&&m.call(vt,"finallyLoc")&&this.prev<vt.finallyLoc){var lt=vt;break}}lt&&("break"===Oe||"continue"===Oe)&&lt.tryLoc<=ke&&ke<=lt.finallyLoc&&(lt=null);var Bt=lt?lt.completion:{};return Bt.type=Oe,Bt.arg=ke,lt?(this.method="next",this.next=lt.finallyLoc,Ie):this.complete(Bt)},complete:function(Oe,ke){if("throw"===Oe.type)throw Oe.arg;return"break"===Oe.type||"continue"===Oe.type?this.next=Oe.arg:"return"===Oe.type?(this.rval=this.arg=Oe.arg,this.method="return",this.next="end"):"normal"===Oe.type&&ke&&(this.next=ke),Ie},finish:function(Oe){for(var ke=this.tryEntries.length-1;ke>=0;--ke){var dt=this.tryEntries[ke];if(dt.finallyLoc===Oe)return this.complete(dt.completion,dt.afterLoc),Ee(dt),Ie}},catch:function(Oe){for(var ke=this.tryEntries.length-1;ke>=0;--ke){var dt=this.tryEntries[ke];if(dt.tryLoc===Oe){var vt=dt.completion;if("throw"===vt.type){var lt=vt.arg;Ee(dt)}return lt}}throw new Error("illegal catch attempt")},delegateYield:function(Oe,ke,dt){return this.delegate={iterator:ie(Oe),resultName:ke,nextLoc:dt},"next"===this.method&&(this.arg=t),Ie}},g}(V.exports);try{regeneratorRuntime=Z}catch(g){"object"==typeof globalThis?globalThis.regeneratorRuntime=Z:Function("r","regeneratorRuntime = r")(Z)}},83030:(V,Z,g)=>{"use strict";var E=g(23141),m=g(72167),t=g(50847),e=E("%TypeError%"),n=E("%WeakMap%",!0),a=E("%Map%",!0),d=m("WeakMap.prototype.get",!0),C=m("WeakMap.prototype.set",!0),D=m("WeakMap.prototype.has",!0),B=m("Map.prototype.get",!0),z=m("Map.prototype.set",!0),oe=m("Map.prototype.has",!0),be=function(_e,Le){for(var $e,We=_e;null!==($e=We.next);We=$e)if($e.key===Le)return We.next=$e.next,$e.next=_e.next,_e.next=$e,$e};V.exports=function(){var Le,We,$e,Te={assert:function(ye){if(!Te.has(ye))throw new e("Side channel does not contain "+t(ye))},get:function(ye){if(n&&ye&&("object"==typeof ye||"function"==typeof ye)){if(Le)return d(Le,ye)}else if(a){if(We)return B(We,ye)}else if($e)return function(_e,Le){var We=be(_e,Le);return We&&We.value}($e,ye)},has:function(ye){if(n&&ye&&("object"==typeof ye||"function"==typeof ye)){if(Le)return D(Le,ye)}else if(a){if(We)return oe(We,ye)}else if($e)return function(_e,Le){return!!be(_e,Le)}($e,ye);return!1},set:function(ye,ne){n&&ye&&("object"==typeof ye||"function"==typeof ye)?(Le||(Le=new n),C(Le,ye,ne)):a?(We||(We=new a),z(We,ye,ne)):($e||($e={key:{},next:null}),function(_e,Le,We){var $e=be(_e,Le);$e?$e.value=We:_e.next={key:Le,next:_e.next,value:We}}($e,ye,ne))}};return Te}},10695:(V,Z,g)=>{"use strict";g.r(Z),g.d(Z,{default:()=>ls,helpers:()=>ks});var E={};g.r(E),g.d(E,{JsonPatchError:()=>No,_areEquals:()=>fl,applyOperation:()=>ja,applyPatch:()=>Js,applyReducer:()=>dc,deepClone:()=>Tc,getValueByPointer:()=>uc,validate:()=>Jo,validator:()=>pl});var m={};g.r(m),g.d(m,{compare:()=>nl,generate:()=>Sc,observe:()=>Xl,unobserve:()=>Hl});var t={};g.r(t),g.d(t,{cookie:()=>Ke,header:()=>Ve,path:()=>Y,query:()=>ce});var e=g(90986),n=g(96915),a=g(40715),d=g(77901),C=g(88577),D=g(95942),B=g(46188),z=g(8797);function oe(T,F,j){return F in T?z(T,F,{value:j,enumerable:!0,configurable:!0,writable:!0}):T[F]=j,T}function be(T,F){var j=e(T);if(n){var ee=n(T);F&&(ee=a(ee).call(ee,function(pe){return d(T,pe).enumerable})),j.push.apply(j,ee)}return j}function se(T){for(var F=1;F<arguments.length;F++){var j,ee,pe=null!=arguments[F]?arguments[F]:{};F%2?C(j=be(Object(pe),!0)).call(j,function(Ye){oe(T,Ye,pe[Ye])}):D?B(T,D(pe)):C(ee=be(Object(pe))).call(ee,function(Ye){z(T,Ye,d(pe,Ye))})}return T}var Ie=g(12782),Ge=g.n(Ie),_e=g(81836),Le=g.n(_e),We=g(20434),$e=g(45698),Te=g(92909),ye=g(10278),ne=g(48735),ge=g(49067);function ae(T,F){(null==F||F>T.length)&&(F=T.length);for(var j=0,ee=new Array(F);j<F;j++)ee[j]=T[j];return ee}function He(T,F){var j;if(T){if("string"==typeof T)return ae(T,F);var ee=ne(j=Object.prototype.toString.call(T)).call(j,8,-1);if("Object"===ee&&T.constructor&&(ee=T.constructor.name),"Map"===ee||"Set"===ee)return ge(T);if("Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return ae(T,F)}}function Se(T,F){var j=void 0!==$e&&Te(T)||T["@@iterator"];if(!j){if(ye(T)||(j=He(T))||F&&T&&"number"==typeof T.length){j&&(T=j);var ee=0,pe=function(){};return{s:pe,n:function(){return ee>=T.length?{done:!0}:{done:!1,value:T[ee++]}},e:function(Mt){throw Mt},f:pe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var rt,Ye=!0,ze=!1;return{s:function(){j=j.call(T)},n:function(){var Mt=j.next();return Ye=Mt.done,Mt},e:function(Mt){ze=!0,rt=Mt},f:function(){try{!Ye&&null!=j.return&&j.return()}finally{if(ze)throw rt}}}}var Ee=g(48972);function ue(T){return(ue="function"==typeof $e&&"symbol"==typeof Ee?function(F){return typeof F}:function(F){return F&&"function"==typeof $e&&F.constructor===$e&&F!==$e.prototype?"symbol":typeof F})(T)}function ke(T,F){return function(T){if(ye(T))return T}(T)||function(T,F){var j=null==T?null:void 0!==$e&&Te(T)||T["@@iterator"];if(null!=j){var ze,rt,ee=[],pe=!0,Ye=!1;try{for(j=j.call(T);!(pe=(ze=j.next()).done)&&(ee.push(ze.value),!F||ee.length!==F);pe=!0);}catch(St){Ye=!0,rt=St}finally{try{!pe&&null!=j.return&&j.return()}finally{if(Ye)throw rt}}return ee}}(T,F)||He(T,F)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dt=g(62917);function vt(T,F,j,ee,pe,Ye,ze){try{var rt=T[Ye](ze),St=rt.value}catch(Mt){return void j(Mt)}rt.done?F(St):dt.resolve(St).then(ee,pe)}function lt(T){return function(){var F=this,j=arguments;return new dt(function(ee,pe){var Ye=T.apply(F,j);function ze(St){vt(Ye,ee,pe,ze,rt,"next",St)}function rt(St){vt(Ye,ee,pe,ze,rt,"throw",St)}ze(void 0)})}}var Bt=g(59680),Pt=g.n(Bt),Zt=g(40750),Di=g.n(Zt),ii=g(20036),Ct=g.n(ii),gi=g(70433),Be=g.n(gi),Tt=g(25710),Je=g.n(Tt),_t=g(55742),xe=g.n(_t),pt=g(32472),jt=g.n(pt),di=g(82476),Rt=g.n(di),et=g(27733),tt=g.n(et),Lt=g(55672),nt=g.n(Lt),yt=(g(76400),g(7029)),Ze=g.n(yt);function ut(T){return null==T}var zt={isNothing:ut,isObject:function(T){return"object"==typeof T&&null!==T},toArray:function(T){return Array.isArray(T)?T:ut(T)?[]:[T]},repeat:function(T,F){var ee,j="";for(ee=0;ee<F;ee+=1)j+=T;return j},isNegativeZero:function(T){return 0===T&&Number.NEGATIVE_INFINITY===1/T},extend:function(T,F){var j,ee,pe,Ye;if(F)for(j=0,ee=(Ye=Object.keys(F)).length;j<ee;j+=1)T[pe=Ye[j]]=F[pe];return T}};function Mi(T,F){var j="",ee=T.reason||"(unknown reason)";return T.mark?(T.mark.name&&(j+='in "'+T.mark.name+'" '),j+="("+(T.mark.line+1)+":"+(T.mark.column+1)+")",!F&&T.mark.snippet&&(j+="\n\n"+T.mark.snippet),ee+" "+j):ee}function _i(T,F){Error.call(this),this.name="YAMLException",this.reason=T,this.mark=F,this.message=Mi(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(_i.prototype=Object.create(Error.prototype)).constructor=_i,_i.prototype.toString=function(F){return this.name+": "+Mi(this,F)};var Bi=_i;function Jt(T,F,j,ee,pe){var Ye="",ze="",rt=Math.floor(pe/2)-1;return ee-F>rt&&(F=ee-rt+(Ye=" ... ").length),j-ee>rt&&(j=ee+rt-(ze=" ...").length),{str:Ye+T.slice(F,j).replace(/\t/g,"\u2192")+ze,pos:ee-F+Ye.length}}function ft(T,F){return zt.repeat(" ",F-T.length)+T}var Pe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],at=["scalar","sequence","mapping"],Zi=function(T,F){if(F=F||{},Object.keys(F).forEach(function(j){if(-1===Pe.indexOf(j))throw new Bi('Unknown option "'+j+'" is met in definition of "'+T+'" YAML type.')}),this.options=F,this.tag=T,this.kind=F.kind||null,this.resolve=F.resolve||function(){return!0},this.construct=F.construct||function(j){return j},this.instanceOf=F.instanceOf||null,this.predicate=F.predicate||null,this.represent=F.represent||null,this.representName=F.representName||null,this.defaultStyle=F.defaultStyle||null,this.multi=F.multi||!1,this.styleAliases=function(T){var F={};return null!==T&&Object.keys(T).forEach(function(j){T[j].forEach(function(ee){F[String(ee)]=j})}),F}(F.styleAliases||null),-1===at.indexOf(this.kind))throw new Bi('Unknown kind "'+this.kind+'" is specified for "'+T+'" YAML type.')};function En(T,F){var j=[];return T[F].forEach(function(ee){var pe=j.length;j.forEach(function(Ye,ze){Ye.tag===ee.tag&&Ye.kind===ee.kind&&Ye.multi===ee.multi&&(pe=ze)}),j[pe]=ee}),j}function li(T){return this.extend(T)}li.prototype.extend=function(F){var j=[],ee=[];if(F instanceof Zi)ee.push(F);else if(Array.isArray(F))ee=ee.concat(F);else{if(!F||!Array.isArray(F.implicit)&&!Array.isArray(F.explicit))throw new Bi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");F.implicit&&(j=j.concat(F.implicit)),F.explicit&&(ee=ee.concat(F.explicit))}j.forEach(function(Ye){if(!(Ye instanceof Zi))throw new Bi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Ye.loadKind&&"scalar"!==Ye.loadKind)throw new Bi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Ye.multi)throw new Bi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),ee.forEach(function(Ye){if(!(Ye instanceof Zi))throw new Bi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var pe=Object.create(li.prototype);return pe.implicit=(this.implicit||[]).concat(j),pe.explicit=(this.explicit||[]).concat(ee),pe.compiledImplicit=En(pe,"implicit"),pe.compiledExplicit=En(pe,"explicit"),pe.compiledTypeMap=function(){var F,j,T={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function ee(pe){pe.multi?(T.multi[pe.kind].push(pe),T.multi.fallback.push(pe)):T[pe.kind][pe.tag]=T.fallback[pe.tag]=pe}for(F=0,j=arguments.length;F<j;F+=1)arguments[F].forEach(ee);return T}(pe.compiledImplicit,pe.compiledExplicit),pe};var $t=li,kt=new Zi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(T){return null!==T?T:""}}),ui=new Zi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(T){return null!==T?T:[]}}),Oi=new Zi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(T){return null!==T?T:{}}}),fn=new $t({explicit:[kt,ui,Oi]}),eo=new Zi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(T){if(null===T)return!0;var F=T.length;return 1===F&&"~"===T||4===F&&("null"===T||"Null"===T||"NULL"===T)},construct:function(){return null},predicate:function(T){return null===T},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),pr=new Zi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(T){if(null===T)return!1;var F=T.length;return 4===F&&("true"===T||"True"===T||"TRUE"===T)||5===F&&("false"===T||"False"===T||"FALSE"===T)},construct:function(T){return"true"===T||"True"===T||"TRUE"===T},predicate:function(T){return"[object Boolean]"===Object.prototype.toString.call(T)},represent:{lowercase:function(T){return T?"true":"false"},uppercase:function(T){return T?"TRUE":"FALSE"},camelcase:function(T){return T?"True":"False"}},defaultStyle:"lowercase"});function Ro(T){return 48<=T&&T<=57||65<=T&&T<=70||97<=T&&T<=102}function cr(T){return 48<=T&&T<=55}function Ri(T){return 48<=T&&T<=57}var _r=new Zi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(T){if(null===T)return!1;var pe,F=T.length,j=0,ee=!1;if(!F)return!1;if(("-"===(pe=T[j])||"+"===pe)&&(pe=T[++j]),"0"===pe){if(j+1===F)return!0;if("b"===(pe=T[++j])){for(j++;j<F;j++)if("_"!==(pe=T[j])){if("0"!==pe&&"1"!==pe)return!1;ee=!0}return ee&&"_"!==pe}if("x"===pe){for(j++;j<F;j++)if("_"!==(pe=T[j])){if(!Ro(T.charCodeAt(j)))return!1;ee=!0}return ee&&"_"!==pe}if("o"===pe){for(j++;j<F;j++)if("_"!==(pe=T[j])){if(!cr(T.charCodeAt(j)))return!1;ee=!0}return ee&&"_"!==pe}}if("_"===pe)return!1;for(;j<F;j++)if("_"!==(pe=T[j])){if(!Ri(T.charCodeAt(j)))return!1;ee=!0}return!(!ee||"_"===pe)},construct:function(T){var ee,F=T,j=1;if(-1!==F.indexOf("_")&&(F=F.replace(/_/g,"")),("-"===(ee=F[0])||"+"===ee)&&("-"===ee&&(j=-1),ee=(F=F.slice(1))[0]),"0"===F)return 0;if("0"===ee){if("b"===F[1])return j*parseInt(F.slice(2),2);if("x"===F[1])return j*parseInt(F.slice(2),16);if("o"===F[1])return j*parseInt(F.slice(2),8)}return j*parseInt(F,10)},predicate:function(T){return"[object Number]"===Object.prototype.toString.call(T)&&T%1==0&&!zt.isNegativeZero(T)},represent:{binary:function(T){return T>=0?"0b"+T.toString(2):"-0b"+T.toString(2).slice(1)},octal:function(T){return T>=0?"0o"+T.toString(8):"-0o"+T.toString(8).slice(1)},decimal:function(T){return T.toString(10)},hexadecimal:function(T){return T>=0?"0x"+T.toString(16).toUpperCase():"-0x"+T.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),xr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Vi=/^[-+]?[0-9]+e/,ot=new Zi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(T){return!(null===T||!xr.test(T)||"_"===T[T.length-1])},construct:function(T){var F,j;return j="-"===(F=T.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(F[0])>=0&&(F=F.slice(1)),".inf"===F?1===j?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===F?NaN:j*parseFloat(F,10)},predicate:function(T){return"[object Number]"===Object.prototype.toString.call(T)&&(T%1!=0||zt.isNegativeZero(T))},represent:function(T,F){var j;if(isNaN(T))switch(F){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===T)switch(F){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===T)switch(F){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(zt.isNegativeZero(T))return"-0.0";return j=T.toString(10),Vi.test(j)?j.replace("e",".e"):j},defaultStyle:"lowercase"}),Ht=fn.extend({implicit:[eo,pr,_r,ot]}),Ai=Ht,Ki=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),zi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Bn=new Zi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(T){return null!==T&&(null!==Ki.exec(T)||null!==zi.exec(T))},construct:function(T){var F,j,ee,pe,Ye,ze,rt,pi,St=0,Mt=null;if(null===(F=Ki.exec(T))&&(F=zi.exec(T)),null===F)throw new Error("Date resolve error");if(j=+F[1],ee=+F[2]-1,pe=+F[3],!F[4])return new Date(Date.UTC(j,ee,pe));if(Ye=+F[4],ze=+F[5],rt=+F[6],F[7]){for(St=F[7].slice(0,3);St.length<3;)St+="0";St=+St}return F[9]&&(Mt=6e4*(60*+F[10]+ +(F[11]||0)),"-"===F[9]&&(Mt=-Mt)),pi=new Date(Date.UTC(j,ee,pe,Ye,ze,rt,St)),Mt&&pi.setTime(pi.getTime()-Mt),pi},instanceOf:Date,represent:function(T){return T.toISOString()}}),Yo=new Zi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(T){return"<<"===T||null===T}}),ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",$r=new Zi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(T){if(null===T)return!1;var F,j,ee=0,pe=T.length,Ye=ro;for(j=0;j<pe;j++)if(!((F=Ye.indexOf(T.charAt(j)))>64)){if(F<0)return!1;ee+=6}return ee%8==0},construct:function(T){var F,j,ee=T.replace(/[\r\n=]/g,""),pe=ee.length,Ye=ro,ze=0,rt=[];for(F=0;F<pe;F++)F%4==0&&F&&(rt.push(ze>>16&255),rt.push(ze>>8&255),rt.push(255&ze)),ze=ze<<6|Ye.indexOf(ee.charAt(F));return 0==(j=pe%4*6)?(rt.push(ze>>16&255),rt.push(ze>>8&255),rt.push(255&ze)):18===j?(rt.push(ze>>10&255),rt.push(ze>>2&255)):12===j&&rt.push(ze>>4&255),new Uint8Array(rt)},predicate:function(T){return"[object Uint8Array]"===Object.prototype.toString.call(T)},represent:function(T){var ee,pe,F="",j=0,Ye=T.length,ze=ro;for(ee=0;ee<Ye;ee++)ee%3==0&&ee&&(F+=ze[j>>18&63],F+=ze[j>>12&63],F+=ze[j>>6&63],F+=ze[63&j]),j=(j<<8)+T[ee];return 0==(pe=Ye%3)?(F+=ze[j>>18&63],F+=ze[j>>12&63],F+=ze[j>>6&63],F+=ze[63&j]):2===pe?(F+=ze[j>>10&63],F+=ze[j>>4&63],F+=ze[j<<2&63],F+=ze[64]):1===pe&&(F+=ze[j>>2&63],F+=ze[j<<4&63],F+=ze[64],F+=ze[64]),F}}),ws=Object.prototype.hasOwnProperty,Ss=Object.prototype.toString,rs=new Zi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(T){if(null===T)return!0;var j,ee,pe,Ye,ze,F=[],rt=T;for(j=0,ee=rt.length;j<ee;j+=1){if(ze=!1,"[object Object]"!==Ss.call(pe=rt[j]))return!1;for(Ye in pe)if(ws.call(pe,Ye)){if(ze)return!1;ze=!0}if(!ze)return!1;if(-1!==F.indexOf(Ye))return!1;F.push(Ye)}return!0},construct:function(T){return null!==T?T:[]}}),Ho=Object.prototype.toString,$a=new Zi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(T){if(null===T)return!0;var F,j,ee,pe,Ye,ze=T;for(Ye=new Array(ze.length),F=0,j=ze.length;F<j;F+=1){if("[object Object]"!==Ho.call(ee=ze[F])||1!==(pe=Object.keys(ee)).length)return!1;Ye[F]=[pe[0],ee[pe[0]]]}return!0},construct:function(T){if(null===T)return[];var F,j,ee,pe,Ye,ze=T;for(Ye=new Array(ze.length),F=0,j=ze.length;F<j;F+=1)ee=ze[F],pe=Object.keys(ee),Ye[F]=[pe[0],ee[pe[0]]];return Ye}}),qo=Object.prototype.hasOwnProperty,Bs=new Zi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(T){if(null===T)return!0;var F,j=T;for(F in j)if(qo.call(j,F)&&null!==j[F])return!1;return!0},construct:function(T){return null!==T?T:{}}}),Fa=Ai.extend({implicit:[Bn,Yo],explicit:[$r,rs,$a,Bs]}),Hs=Object.prototype.hasOwnProperty,yo=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Vs=/[\x85\u2028\u2029]/,Ko=/[,\[\]\{\}]/,Ds=/^(?:!|!!|![a-z\-]+!)$/i,zo=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Oo(T){return Object.prototype.toString.call(T)}function Eo(T){return 10===T||13===T}function Ms(T){return 9===T||32===T}function lo(T){return 9===T||32===T||10===T||13===T}function gs(T){return 44===T||91===T||93===T||123===T||125===T}function Pr(T){var F;return 48<=T&&T<=57?T-48:97<=(F=32|T)&&F<=102?F-97+10:-1}function la(T){return 120===T?2:117===T?4:85===T?8:0}function zr(T){return 48<=T&&T<=57?T-48:-1}function ca(T){return 48===T?"\0":97===T?"\x07":98===T?"\b":116===T||9===T?"\t":110===T?"\n":118===T?"\v":102===T?"\f":114===T?"\r":101===T?"\x1b":32===T?" ":34===T?'"':47===T?"/":92===T?"\\":78===T?"\x85":95===T?"\xa0":76===T?"\u2028":80===T?"\u2029":""}function bl(T){return T<=65535?String.fromCharCode(T):String.fromCharCode(55296+(T-65536>>10),56320+(T-65536&1023))}for(var us=new Array(256),$o=new Array(256),ms=0;ms<256;ms++)us[ms]=ca(ms)?1:0,$o[ms]=ca(ms);function yl(T,F){this.input=T,this.filename=F.filename||null,this.schema=F.schema||Fa,this.onWarning=F.onWarning||null,this.legacy=F.legacy||!1,this.json=F.json||!1,this.listener=F.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=T.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Nr(T,F){var j={name:T.filename,buffer:T.input.slice(0,-1),position:T.position,line:T.line,column:T.position-T.lineStart};return j.snippet=function(T,F){if(F=Object.create(F||null),!T.buffer)return null;F.maxLength||(F.maxLength=79),"number"!=typeof F.indent&&(F.indent=1),"number"!=typeof F.linesBefore&&(F.linesBefore=3),"number"!=typeof F.linesAfter&&(F.linesAfter=2);for(var Ye,j=/\r?\n|\r|\0/g,ee=[0],pe=[],ze=-1;Ye=j.exec(T.buffer);)pe.push(Ye.index),ee.push(Ye.index+Ye[0].length),T.position<=Ye.index&&ze<0&&(ze=ee.length-2);ze<0&&(ze=ee.length-1);var St,Mt,rt="",ri=Math.min(T.line+F.linesAfter,pe.length).toString().length,ai=F.maxLength-(F.indent+ri+3);for(St=1;St<=F.linesBefore&&!(ze-St<0);St++)Mt=Jt(T.buffer,ee[ze-St],pe[ze-St],T.position-(ee[ze]-ee[ze-St]),ai),rt=zt.repeat(" ",F.indent)+ft((T.line-St+1).toString(),ri)+" | "+Mt.str+"\n"+rt;for(Mt=Jt(T.buffer,ee[ze],pe[ze],T.position,ai),rt+=zt.repeat(" ",F.indent)+ft((T.line+1).toString(),ri)+" | "+Mt.str+"\n",rt+=zt.repeat("-",F.indent+ri+3+Mt.pos)+"^\n",St=1;St<=F.linesAfter&&!(ze+St>=pe.length);St++)Mt=Jt(T.buffer,ee[ze+St],pe[ze+St],T.position-(ee[ze]-ee[ze+St]),ai),rt+=zt.repeat(" ",F.indent)+ft((T.line+St+1).toString(),ri)+" | "+Mt.str+"\n";return rt.replace(/\n$/,"")}(j),new Bi(F,j)}function kn(T,F){throw Nr(T,F)}function va(T,F){T.onWarning&&T.onWarning.call(null,Nr(T,F))}var Re={YAML:function(F,j,ee){var pe,Ye,ze;null!==F.version&&kn(F,"duplication of %YAML directive"),1!==ee.length&&kn(F,"YAML directive accepts exactly one argument"),null===(pe=/^([0-9]+)\.([0-9]+)$/.exec(ee[0]))&&kn(F,"ill-formed argument of the YAML directive"),Ye=parseInt(pe[1],10),ze=parseInt(pe[2],10),1!==Ye&&kn(F,"unacceptable YAML version of the document"),F.version=ee[0],F.checkLineBreaks=ze<2,1!==ze&&2!==ze&&va(F,"unsupported YAML version of the document")},TAG:function(F,j,ee){var pe,Ye;2!==ee.length&&kn(F,"TAG directive accepts exactly two arguments"),Ye=ee[1],Ds.test(pe=ee[0])||kn(F,"ill-formed tag handle (first argument) of the TAG directive"),Hs.call(F.tagMap,pe)&&kn(F,'there is a previously declared suffix for "'+pe+'" tag handle'),zo.test(Ye)||kn(F,"ill-formed tag prefix (second argument) of the TAG directive");try{Ye=decodeURIComponent(Ye)}catch(ze){kn(F,"tag prefix is malformed: "+Ye)}F.tagMap[pe]=Ye}};function J(T,F,j,ee){var pe,Ye,ze,rt;if(F<j){if(rt=T.input.slice(F,j),ee)for(pe=0,Ye=rt.length;pe<Ye;pe+=1)9===(ze=rt.charCodeAt(pe))||32<=ze&&ze<=1114111||kn(T,"expected valid JSON character");else yo.test(rt)&&kn(T,"the stream contains non-printable characters");T.result+=rt}}function H(T,F,j,ee){var pe,Ye,ze,rt;for(zt.isObject(j)||kn(T,"cannot merge mappings; the provided source object is unacceptable"),ze=0,rt=(pe=Object.keys(j)).length;ze<rt;ze+=1)Hs.call(F,Ye=pe[ze])||(F[Ye]=j[Ye],ee[Ye]=!0)}function W(T,F,j,ee,pe,Ye,ze,rt,St){var Mt,ri;if(Array.isArray(pe))for(Mt=0,ri=(pe=Array.prototype.slice.call(pe)).length;Mt<ri;Mt+=1)Array.isArray(pe[Mt])&&kn(T,"nested arrays are not supported inside keys"),"object"==typeof pe&&"[object Object]"===Oo(pe[Mt])&&(pe[Mt]="[object Object]");if("object"==typeof pe&&"[object Object]"===Oo(pe)&&(pe="[object Object]"),pe=String(pe),null===F&&(F={}),"tag:yaml.org,2002:merge"===ee)if(Array.isArray(Ye))for(Mt=0,ri=Ye.length;Mt<ri;Mt+=1)H(T,F,Ye[Mt],j);else H(T,F,Ye,j);else!T.json&&!Hs.call(j,pe)&&Hs.call(F,pe)&&(T.line=ze||T.line,T.lineStart=rt||T.lineStart,T.position=St||T.position,kn(T,"duplicated mapping key")),"__proto__"===pe?Object.defineProperty(F,pe,{configurable:!0,enumerable:!0,writable:!0,value:Ye}):F[pe]=Ye,delete j[pe];return F}function Me(T){var F;10===(F=T.input.charCodeAt(T.position))?T.position++:13===F?(T.position++,10===T.input.charCodeAt(T.position)&&T.position++):kn(T,"a line break is expected"),T.line+=1,T.lineStart=T.position,T.firstTabInLine=-1}function Ft(T,F,j){for(var ee=0,pe=T.input.charCodeAt(T.position);0!==pe;){for(;Ms(pe);)9===pe&&-1===T.firstTabInLine&&(T.firstTabInLine=T.position),pe=T.input.charCodeAt(++T.position);if(F&&35===pe)do{pe=T.input.charCodeAt(++T.position)}while(10!==pe&&13!==pe&&0!==pe);if(!Eo(pe))break;for(Me(T),pe=T.input.charCodeAt(T.position),ee++,T.lineIndent=0;32===pe;)T.lineIndent++,pe=T.input.charCodeAt(++T.position)}return-1!==j&&0!==ee&&T.lineIndent<j&&va(T,"deficient indentation"),ee}function bi(T){var j,F=T.position;return!(45!==(j=T.input.charCodeAt(F))&&46!==j||j!==T.input.charCodeAt(F+1)||j!==T.input.charCodeAt(F+2)||(F+=3,j=T.input.charCodeAt(F),0!==j&&!lo(j)))}function cn(T,F){1===F?T.result+=" ":F>1&&(T.result+=zt.repeat("\n",F-1))}function fr(T,F){var j,St,ee=T.tag,pe=T.anchor,Ye=[],rt=!1;if(-1!==T.firstTabInLine)return!1;for(null!==T.anchor&&(T.anchorMap[T.anchor]=Ye),St=T.input.charCodeAt(T.position);0!==St&&(-1!==T.firstTabInLine&&(T.position=T.firstTabInLine,kn(T,"tab characters must not be used in indentation")),45===St&&lo(T.input.charCodeAt(T.position+1)));)if(rt=!0,T.position++,Ft(T,!0,-1)&&T.lineIndent<=F)Ye.push(null),St=T.input.charCodeAt(T.position);else if(j=T.line,ts(T,F,3,!1,!0),Ye.push(T.result),Ft(T,!0,-1),St=T.input.charCodeAt(T.position),(T.line===j||T.lineIndent>F)&&0!==St)kn(T,"bad indentation of a sequence entry");else if(T.lineIndent<F)break;return!!rt&&(T.tag=ee,T.anchor=pe,T.kind="sequence",T.result=Ye,!0)}function Vn(T){var F,pe,Ye,ze,j=!1,ee=!1;if(33!==(ze=T.input.charCodeAt(T.position)))return!1;if(null!==T.tag&&kn(T,"duplication of a tag property"),60===(ze=T.input.charCodeAt(++T.position))?(j=!0,ze=T.input.charCodeAt(++T.position)):33===ze?(ee=!0,pe="!!",ze=T.input.charCodeAt(++T.position)):pe="!",F=T.position,j){do{ze=T.input.charCodeAt(++T.position)}while(0!==ze&&62!==ze);T.position<T.length?(Ye=T.input.slice(F,T.position),ze=T.input.charCodeAt(++T.position)):kn(T,"unexpected end of the stream within a verbatim tag")}else{for(;0!==ze&&!lo(ze);)33===ze&&(ee?kn(T,"tag suffix cannot contain exclamation marks"):(pe=T.input.slice(F-1,T.position+1),Ds.test(pe)||kn(T,"named tag handle cannot contain such characters"),ee=!0,F=T.position+1)),ze=T.input.charCodeAt(++T.position);Ye=T.input.slice(F,T.position),Ko.test(Ye)&&kn(T,"tag suffix cannot contain flow indicator characters")}Ye&&!zo.test(Ye)&&kn(T,"tag name cannot contain such characters: "+Ye);try{Ye=decodeURIComponent(Ye)}catch(rt){kn(T,"tag name is malformed: "+Ye)}return j?T.tag=Ye:Hs.call(T.tagMap,pe)?T.tag=T.tagMap[pe]+Ye:"!"===pe?T.tag="!"+Ye:"!!"===pe?T.tag="tag:yaml.org,2002:"+Ye:kn(T,'undeclared tag handle "'+pe+'"'),!0}function Us(T){var F,j;if(38!==(j=T.input.charCodeAt(T.position)))return!1;for(null!==T.anchor&&kn(T,"duplication of an anchor property"),j=T.input.charCodeAt(++T.position),F=T.position;0!==j&&!lo(j)&&!gs(j);)j=T.input.charCodeAt(++T.position);return T.position===F&&kn(T,"name of an anchor node must contain at least one character"),T.anchor=T.input.slice(F,T.position),!0}function ts(T,F,j,ee,pe){var Ye,ze,rt,ai,pi,Si,ji,tn,nn,St=1,Mt=!1,ri=!1;if(null!==T.listener&&T.listener("open",T),T.tag=null,T.anchor=null,T.kind=null,T.result=null,Ye=ze=rt=4===j||3===j,ee&&Ft(T,!0,-1)&&(Mt=!0,T.lineIndent>F?St=1:T.lineIndent===F?St=0:T.lineIndent<F&&(St=-1)),1===St)for(;Vn(T)||Us(T);)Ft(T,!0,-1)?(Mt=!0,rt=Ye,T.lineIndent>F?St=1:T.lineIndent===F?St=0:T.lineIndent<F&&(St=-1)):rt=!1;if(rt&&(rt=Mt||pe),(1===St||4===j)&&(tn=1===j||2===j?F:F+1,nn=T.position-T.lineStart,1===St?rt&&(fr(T,nn)||function(T,F,j){var ee,pe,Ye,ze,rt,St,rn,Mt=T.tag,ri=T.anchor,ai={},pi=Object.create(null),Si=null,ji=null,tn=null,nn=!1,An=!1;if(-1!==T.firstTabInLine)return!1;for(null!==T.anchor&&(T.anchorMap[T.anchor]=ai),rn=T.input.charCodeAt(T.position);0!==rn;){if(!nn&&-1!==T.firstTabInLine&&(T.position=T.firstTabInLine,kn(T,"tab characters must not be used in indentation")),ee=T.input.charCodeAt(T.position+1),Ye=T.line,63!==rn&&58!==rn||!lo(ee)){if(ze=T.line,rt=T.lineStart,St=T.position,!ts(T,j,2,!1,!0))break;if(T.line===Ye){for(rn=T.input.charCodeAt(T.position);Ms(rn);)rn=T.input.charCodeAt(++T.position);if(58===rn)lo(rn=T.input.charCodeAt(++T.position))||kn(T,"a whitespace character is expected after the key-value separator within a block mapping"),nn&&(W(T,ai,pi,Si,ji,null,ze,rt,St),Si=ji=tn=null),An=!0,nn=!1,pe=!1,Si=T.tag,ji=T.result;else{if(!An)return T.tag=Mt,T.anchor=ri,!0;kn(T,"can not read an implicit mapping pair; a colon is missed")}}else{if(!An)return T.tag=Mt,T.anchor=ri,!0;kn(T,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===rn?(nn&&(W(T,ai,pi,Si,ji,null,ze,rt,St),Si=ji=tn=null),An=!0,nn=!0,pe=!0):nn?(nn=!1,pe=!0):kn(T,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),T.position+=1,rn=ee;if((T.line===Ye||T.lineIndent>F)&&(nn&&(ze=T.line,rt=T.lineStart,St=T.position),ts(T,F,4,!0,pe)&&(nn?ji=T.result:tn=T.result),nn||(W(T,ai,pi,Si,ji,tn,ze,rt,St),Si=ji=tn=null),Ft(T,!0,-1),rn=T.input.charCodeAt(T.position)),(T.line===Ye||T.lineIndent>F)&&0!==rn)kn(T,"bad indentation of a mapping entry");else if(T.lineIndent<F)break}return nn&&W(T,ai,pi,Si,ji,null,ze,rt,St),An&&(T.tag=Mt,T.anchor=ri,T.kind="mapping",T.result=ai),An}(T,nn,tn))||function(T,F){var ee,pe,Ye,rt,ri,ai,pi,Si,tn,nn,An,rn,j=!0,ze=T.tag,St=T.anchor,ji=Object.create(null);if(91===(rn=T.input.charCodeAt(T.position)))ri=93,Si=!1,rt=[];else{if(123!==rn)return!1;ri=125,Si=!0,rt={}}for(null!==T.anchor&&(T.anchorMap[T.anchor]=rt),rn=T.input.charCodeAt(++T.position);0!==rn;){if(Ft(T,!0,F),(rn=T.input.charCodeAt(T.position))===ri)return T.position++,T.tag=ze,T.anchor=St,T.kind=Si?"mapping":"sequence",T.result=rt,!0;j?44===rn&&kn(T,"expected the node content, but found ','"):kn(T,"missed comma between flow collection entries"),An=null,ai=pi=!1,63===rn&&lo(T.input.charCodeAt(T.position+1))&&(ai=pi=!0,T.position++,Ft(T,!0,F)),ee=T.line,pe=T.lineStart,Ye=T.position,ts(T,F,1,!1,!0),nn=T.tag,tn=T.result,Ft(T,!0,F),rn=T.input.charCodeAt(T.position),(pi||T.line===ee)&&58===rn&&(ai=!0,rn=T.input.charCodeAt(++T.position),Ft(T,!0,F),ts(T,F,1,!1,!0),An=T.result),Si?W(T,rt,ji,nn,tn,An,ee,pe,Ye):rt.push(ai?W(T,null,ji,nn,tn,An,ee,pe,Ye):tn),Ft(T,!0,F),44===(rn=T.input.charCodeAt(T.position))?(j=!0,rn=T.input.charCodeAt(++T.position)):j=!1}kn(T,"unexpected end of the stream within a flow collection")}(T,tn)?ri=!0:(ze&&function(T,F){var j,ee,ri,ai,pe=1,Ye=!1,ze=!1,rt=F,St=0,Mt=!1;if(124===(ai=T.input.charCodeAt(T.position)))ee=!1;else{if(62!==ai)return!1;ee=!0}for(T.kind="scalar",T.result="";0!==ai;)if(43===(ai=T.input.charCodeAt(++T.position))||45===ai)1===pe?pe=43===ai?3:2:kn(T,"repeat of a chomping mode identifier");else{if(!((ri=zr(ai))>=0))break;0===ri?kn(T,"bad explicit indentation width of a block scalar; it cannot be less than one"):ze?kn(T,"repeat of an indentation width identifier"):(rt=F+ri-1,ze=!0)}if(Ms(ai)){do{ai=T.input.charCodeAt(++T.position)}while(Ms(ai));if(35===ai)do{ai=T.input.charCodeAt(++T.position)}while(!Eo(ai)&&0!==ai)}for(;0!==ai;){for(Me(T),T.lineIndent=0,ai=T.input.charCodeAt(T.position);(!ze||T.lineIndent<rt)&&32===ai;)T.lineIndent++,ai=T.input.charCodeAt(++T.position);if(!ze&&T.lineIndent>rt&&(rt=T.lineIndent),Eo(ai))St++;else{if(T.lineIndent<rt){3===pe?T.result+=zt.repeat("\n",Ye?1+St:St):1===pe&&Ye&&(T.result+="\n");break}for(ee?Ms(ai)?(Mt=!0,T.result+=zt.repeat("\n",Ye?1+St:St)):Mt?(Mt=!1,T.result+=zt.repeat("\n",St+1)):0===St?Ye&&(T.result+=" "):T.result+=zt.repeat("\n",St):T.result+=zt.repeat("\n",Ye?1+St:St),Ye=!0,ze=!0,St=0,j=T.position;!Eo(ai)&&0!==ai;)ai=T.input.charCodeAt(++T.position);J(T,j,T.position,!1)}}return!0}(T,tn)||function(T,F){var j,ee,pe;if(39!==(j=T.input.charCodeAt(T.position)))return!1;for(T.kind="scalar",T.result="",T.position++,ee=pe=T.position;0!==(j=T.input.charCodeAt(T.position));)if(39===j){if(J(T,ee,T.position,!0),39!==(j=T.input.charCodeAt(++T.position)))return!0;ee=T.position,T.position++,pe=T.position}else Eo(j)?(J(T,ee,pe,!0),cn(T,Ft(T,!1,F)),ee=pe=T.position):T.position===T.lineStart&&bi(T)?kn(T,"unexpected end of the document within a single quoted scalar"):(T.position++,pe=T.position);kn(T,"unexpected end of the stream within a single quoted scalar")}(T,tn)||function(T,F){var j,ee,pe,Ye,ze,rt;if(34!==(rt=T.input.charCodeAt(T.position)))return!1;for(T.kind="scalar",T.result="",T.position++,j=ee=T.position;0!==(rt=T.input.charCodeAt(T.position));){if(34===rt)return J(T,j,T.position,!0),T.position++,!0;if(92===rt){if(J(T,j,T.position,!0),Eo(rt=T.input.charCodeAt(++T.position)))Ft(T,!1,F);else if(rt<256&&us[rt])T.result+=$o[rt],T.position++;else if((ze=la(rt))>0){for(pe=ze,Ye=0;pe>0;pe--)(ze=Pr(rt=T.input.charCodeAt(++T.position)))>=0?Ye=(Ye<<4)+ze:kn(T,"expected hexadecimal character");T.result+=bl(Ye),T.position++}else kn(T,"unknown escape sequence");j=ee=T.position}else Eo(rt)?(J(T,j,ee,!0),cn(T,Ft(T,!1,F)),j=ee=T.position):T.position===T.lineStart&&bi(T)?kn(T,"unexpected end of the document within a double quoted scalar"):(T.position++,ee=T.position)}kn(T,"unexpected end of the stream within a double quoted scalar")}(T,tn)?ri=!0:function(T){var F,j,ee;if(42!==(ee=T.input.charCodeAt(T.position)))return!1;for(ee=T.input.charCodeAt(++T.position),F=T.position;0!==ee&&!lo(ee)&&!gs(ee);)ee=T.input.charCodeAt(++T.position);return T.position===F&&kn(T,"name of an alias node must contain at least one character"),j=T.input.slice(F,T.position),Hs.call(T.anchorMap,j)||kn(T,'unidentified alias "'+j+'"'),T.result=T.anchorMap[j],Ft(T,!0,-1),!0}(T)?(ri=!0,(null!==T.tag||null!==T.anchor)&&kn(T,"alias node should not have any properties")):function(T,F,j){var pe,Ye,ze,rt,St,Mt,ri,Si,ai=T.kind,pi=T.result;if(lo(Si=T.input.charCodeAt(T.position))||gs(Si)||35===Si||38===Si||42===Si||33===Si||124===Si||62===Si||39===Si||34===Si||37===Si||64===Si||96===Si||(63===Si||45===Si)&&(lo(pe=T.input.charCodeAt(T.position+1))||j&&gs(pe)))return!1;for(T.kind="scalar",T.result="",Ye=ze=T.position,rt=!1;0!==Si;){if(58===Si){if(lo(pe=T.input.charCodeAt(T.position+1))||j&&gs(pe))break}else if(35===Si){if(lo(T.input.charCodeAt(T.position-1)))break}else{if(T.position===T.lineStart&&bi(T)||j&&gs(Si))break;if(Eo(Si)){if(St=T.line,Mt=T.lineStart,ri=T.lineIndent,Ft(T,!1,-1),T.lineIndent>=F){rt=!0,Si=T.input.charCodeAt(T.position);continue}T.position=ze,T.line=St,T.lineStart=Mt,T.lineIndent=ri;break}}rt&&(J(T,Ye,ze,!1),cn(T,T.line-St),Ye=ze=T.position,rt=!1),Ms(Si)||(ze=T.position+1),Si=T.input.charCodeAt(++T.position)}return J(T,Ye,ze,!1),!!T.result||(T.kind=ai,T.result=pi,!1)}(T,tn,1===j)&&(ri=!0,null===T.tag&&(T.tag="?")),null!==T.anchor&&(T.anchorMap[T.anchor]=T.result)):0===St&&(ri=rt&&fr(T,nn))),null===T.tag)null!==T.anchor&&(T.anchorMap[T.anchor]=T.result);else if("?"===T.tag){for(null!==T.result&&"scalar"!==T.kind&&kn(T,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+T.kind+'"'),ai=0,pi=T.implicitTypes.length;ai<pi;ai+=1)if((ji=T.implicitTypes[ai]).resolve(T.result)){T.result=ji.construct(T.result),T.tag=ji.tag,null!==T.anchor&&(T.anchorMap[T.anchor]=T.result);break}}else if("!"!==T.tag){if(Hs.call(T.typeMap[T.kind||"fallback"],T.tag))ji=T.typeMap[T.kind||"fallback"][T.tag];else for(ji=null,ai=0,pi=(Si=T.typeMap.multi[T.kind||"fallback"]).length;ai<pi;ai+=1)if(T.tag.slice(0,Si[ai].tag.length)===Si[ai].tag){ji=Si[ai];break}ji||kn(T,"unknown tag !<"+T.tag+">"),null!==T.result&&ji.kind!==T.kind&&kn(T,"unacceptable node kind for !<"+T.tag+'> tag; it should be "'+ji.kind+'", not "'+T.kind+'"'),ji.resolve(T.result,T.tag)?(T.result=ji.construct(T.result,T.tag),null!==T.anchor&&(T.anchorMap[T.anchor]=T.result)):kn(T,"cannot resolve a node with !<"+T.tag+"> explicit tag")}return null!==T.listener&&T.listener("close",T),null!==T.tag||null!==T.anchor||ri}function cl(T){var j,ee,pe,ze,F=T.position,Ye=!1;for(T.version=null,T.checkLineBreaks=T.legacy,T.tagMap=Object.create(null),T.anchorMap=Object.create(null);0!==(ze=T.input.charCodeAt(T.position))&&(Ft(T,!0,-1),ze=T.input.charCodeAt(T.position),!(T.lineIndent>0||37!==ze));){for(Ye=!0,ze=T.input.charCodeAt(++T.position),j=T.position;0!==ze&&!lo(ze);)ze=T.input.charCodeAt(++T.position);for(pe=[],(ee=T.input.slice(j,T.position)).length<1&&kn(T,"directive name must not be less than one character in length");0!==ze;){for(;Ms(ze);)ze=T.input.charCodeAt(++T.position);if(35===ze){do{ze=T.input.charCodeAt(++T.position)}while(0!==ze&&!Eo(ze));break}if(Eo(ze))break;for(j=T.position;0!==ze&&!lo(ze);)ze=T.input.charCodeAt(++T.position);pe.push(T.input.slice(j,T.position))}0!==ze&&Me(T),Hs.call(Re,ee)?Re[ee](T,ee,pe):va(T,'unknown document directive "'+ee+'"')}Ft(T,!0,-1),0===T.lineIndent&&45===T.input.charCodeAt(T.position)&&45===T.input.charCodeAt(T.position+1)&&45===T.input.charCodeAt(T.position+2)?(T.position+=3,Ft(T,!0,-1)):Ye&&kn(T,"directives end mark is expected"),ts(T,T.lineIndent-1,4,!1,!0),Ft(T,!0,-1),T.checkLineBreaks&&Vs.test(T.input.slice(F,T.position))&&va(T,"non-ASCII line breaks are interpreted as content"),T.documents.push(T.result),T.position===T.lineStart&&bi(T)?46===T.input.charCodeAt(T.position)&&(T.position+=3,Ft(T,!0,-1)):T.position<T.length-1&&kn(T,"end of the stream or a document separator is expected")}function Gs(T,F){F=F||{},0!==(T=String(T)).length&&(10!==T.charCodeAt(T.length-1)&&13!==T.charCodeAt(T.length-1)&&(T+="\n"),65279===T.charCodeAt(0)&&(T=T.slice(1)));var j=new yl(T,F),ee=T.indexOf("\0");for(-1!==ee&&(j.position=ee,kn(j,"null byte is not allowed in input")),j.input+="\0";32===j.input.charCodeAt(j.position);)j.lineIndent+=1,j.position+=1;for(;j.position<j.length-1;)cl(j);return j.documents}var K={loadAll:function(T,F,j){null!==F&&"object"==typeof F&&void 0===j&&(j=F,F=null);var ee=Gs(T,j);if("function"!=typeof F)return ee;for(var pe=0,Ye=ee.length;pe<Ye;pe+=1)F(ee[pe])},load:function(T,F){var j=Gs(T,F);if(0!==j.length){if(1===j.length)return j[0];throw new Bi("expected a single document in the stream, but found more")}}},fe=Object.prototype.toString,Qe=Object.prototype.hasOwnProperty,co={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Ja=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],xn=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function lr(T){var F,j,ee;if(F=T.toString(16).toUpperCase(),T<=255)j="x",ee=2;else if(T<=65535)j="u",ee=4;else{if(!(T<=4294967295))throw new Bi("code point within a string may not be greater than 0xFFFFFFFF");j="U",ee=8}return"\\"+j+zt.repeat("0",ee-F.length)+F}function is(T){this.schema=T.schema||Fa,this.indent=Math.max(1,T.indent||2),this.noArrayIndent=T.noArrayIndent||!1,this.skipInvalid=T.skipInvalid||!1,this.flowLevel=zt.isNothing(T.flowLevel)?-1:T.flowLevel,this.styleMap=function(T,F){var j,ee,pe,Ye,ze,rt,St;if(null===F)return{};for(j={},pe=0,Ye=(ee=Object.keys(F)).length;pe<Ye;pe+=1)ze=ee[pe],rt=String(F[ze]),"!!"===ze.slice(0,2)&&(ze="tag:yaml.org,2002:"+ze.slice(2)),(St=T.compiledTypeMap.fallback[ze])&&Qe.call(St.styleAliases,rt)&&(rt=St.styleAliases[rt]),j[ze]=rt;return j}(this.schema,T.styles||null),this.sortKeys=T.sortKeys||!1,this.lineWidth=T.lineWidth||80,this.noRefs=T.noRefs||!1,this.noCompatMode=T.noCompatMode||!1,this.condenseFlow=T.condenseFlow||!1,this.quotingType='"'===T.quotingType?2:1,this.forceQuotes=T.forceQuotes||!1,this.replacer="function"==typeof T.replacer?T.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ar(T,F){for(var ze,j=zt.repeat(" ",F),ee=0,pe=-1,Ye="",rt=T.length;ee<rt;)-1===(pe=T.indexOf("\n",ee))?(ze=T.slice(ee),ee=rt):(ze=T.slice(ee,pe+1),ee=pe+1),ze.length&&"\n"!==ze&&(Ye+=j),Ye+=ze;return Ye}function ta(T,F){return"\n"+zt.repeat(" ",T.indent*F)}function El(T){return 32===T||9===T}function Za(T){return 32<=T&&T<=126||161<=T&&T<=55295&&8232!==T&&8233!==T||57344<=T&&T<=65533&&65279!==T||65536<=T&&T<=1114111}function Ur(T){return Za(T)&&65279!==T&&13!==T&&10!==T}function ua(T,F,j){var ee=Ur(T),pe=ee&&!El(T);return(j?ee:ee&&44!==T&&91!==T&&93!==T&&123!==T&&125!==T)&&35!==T&&!(58===F&&!pe)||Ur(F)&&!El(F)&&35===T||58===F&&pe}function As(T,F){var ee,j=T.charCodeAt(F);return j>=55296&&j<=56319&&F+1<T.length&&(ee=T.charCodeAt(F+1))>=56320&&ee<=57343?1024*(j-55296)+ee-56320+65536:j}function ba(T){return/^\n* /.test(T)}function Ra(T,F,j,ee,pe){T.dump=function(){if(0===F.length)return 2===T.quotingType?'""':"''";if(!T.noCompatMode&&(-1!==Ja.indexOf(F)||xn.test(F)))return 2===T.quotingType?'"'+F+'"':"'"+F+"'";var Ye=T.indent*Math.max(1,j),ze=-1===T.lineWidth?-1:Math.max(Math.min(T.lineWidth,40),T.lineWidth-Ye);switch(function(T,F,j,ee,pe,Ye,ze,rt){var St,Mt=0,ri=null,ai=!1,pi=!1,Si=-1!==ee,ji=-1,tn=function(T){return Za(T)&&65279!==T&&!El(T)&&45!==T&&63!==T&&58!==T&&44!==T&&91!==T&&93!==T&&123!==T&&125!==T&&35!==T&&38!==T&&42!==T&&33!==T&&124!==T&&61!==T&&62!==T&&39!==T&&34!==T&&37!==T&&64!==T&&96!==T}(As(T,0))&&function(T){return!El(T)&&58!==T}(As(T,T.length-1));if(F||ze)for(St=0;St<T.length;Mt>=65536?St+=2:St++){if(!Za(Mt=As(T,St)))return 5;tn=tn&&ua(Mt,ri,rt),ri=Mt}else{for(St=0;St<T.length;Mt>=65536?St+=2:St++){if(10===(Mt=As(T,St)))ai=!0,Si&&(pi=pi||St-ji-1>ee&&" "!==T[ji+1],ji=St);else if(!Za(Mt))return 5;tn=tn&&ua(Mt,ri,rt),ri=Mt}pi=pi||Si&&St-ji-1>ee&&" "!==T[ji+1]}return ai||pi?j>9&&ba(T)?5:ze?2===Ye?5:2:pi?4:3:!tn||ze||pe(T)?2===Ye?5:2:1}(F,ee||T.flowLevel>-1&&j>=T.flowLevel,T.indent,ze,function(Mt){return function(T,F){var j,ee;for(j=0,ee=T.implicitTypes.length;j<ee;j+=1)if(T.implicitTypes[j].resolve(F))return!0;return!1}(T,Mt)},T.quotingType,T.forceQuotes&&!ee,pe)){case 1:return F;case 2:return"'"+F.replace(/'/g,"''")+"'";case 3:return"|"+Ql(F,T.indent)+Aa(Ar(F,Ye));case 4:return">"+Ql(F,T.indent)+Aa(Ar(function(T,F){for(var Ye,ze,j=/(\n+)([^\n]*)/g,ee=(Mt=void 0,Mt=T.indexOf("\n"),j.lastIndex=Mt=-1!==Mt?Mt:T.length,jl(T.slice(0,Mt),F)),pe="\n"===T[0]||" "===T[0];ze=j.exec(T);){var St=ze[2];Ye=" "===St[0],ee+=ze[1]+(pe||Ye||""===St?"":"\n")+jl(St,F),pe=Ye}var Mt;return ee}(F,ze),Ye));case 5:return'"'+function(T){for(var ee,F="",j=0,pe=0;pe<T.length;j>=65536?pe+=2:pe++)j=As(T,pe),!(ee=co[j])&&Za(j)?(F+=T[pe],j>=65536&&(F+=T[pe+1])):F+=ee||lr(j);return F}(F)+'"';default:throw new Bi("impossible error: invalid scalar style")}}()}function Ql(T,F){var j=ba(T)?String(F):"",ee="\n"===T[T.length-1];return j+(!ee||"\n"!==T[T.length-2]&&"\n"!==T?ee?"":"-":"+")+"\n"}function Aa(T){return"\n"===T[T.length-1]?T.slice(0,-1):T}function jl(T,F){if(""===T||" "===T[0])return T;for(var ee,Ye,j=/ [^ ]/g,pe=0,ze=0,rt=0,St="";ee=j.exec(T);)(rt=ee.index)-pe>F&&(St+="\n"+T.slice(pe,Ye=ze>pe?ze:rt),pe=Ye+1),ze=rt;return St+="\n",(St+=T.length-pe>F&&ze>pe?T.slice(pe,ze)+"\n"+T.slice(ze+1):T.slice(pe)).slice(1)}function Ua(T,F,j){var ee,pe,Ye,ze,rt,St;for(Ye=0,ze=(pe=j?T.explicitTypes:T.implicitTypes).length;Ye<ze;Ye+=1)if(((rt=pe[Ye]).instanceOf||rt.predicate)&&(!rt.instanceOf||"object"==typeof F&&F instanceof rt.instanceOf)&&(!rt.predicate||rt.predicate(F))){if(T.tag=j?rt.multi&&rt.representName?rt.representName(F):rt.tag:"?",rt.represent){if(St=T.styleMap[rt.tag]||rt.defaultStyle,"[object Function]"===fe.call(rt.represent))ee=rt.represent(F,St);else{if(!Qe.call(rt.represent,St))throw new Bi("!<"+rt.tag+'> tag resolver accepts not "'+St+'" style');ee=rt.represent[St](F,St)}T.dump=ee}return!0}return!1}function Ys(T,F,j,ee,pe,Ye,ze){T.tag=null,T.dump=j,Ua(T,j,!1)||Ua(T,j,!0);var Mt,rt=fe.call(T.dump),St=ee;ee&&(ee=T.flowLevel<0||T.flowLevel>F);var ai,pi,ri="[object Object]"===rt||"[object Array]"===rt;if(ri&&(pi=-1!==(ai=T.duplicates.indexOf(j))),(null!==T.tag&&"?"!==T.tag||pi||2!==T.indent&&F>0)&&(pe=!1),pi&&T.usedDuplicates[ai])T.dump="*ref_"+ai;else{if(ri&&pi&&!T.usedDuplicates[ai]&&(T.usedDuplicates[ai]=!0),"[object Object]"===rt)ee&&0!==Object.keys(T.dump).length?(function(T,F,j,ee){var rt,St,Mt,ri,ai,pi,pe="",Ye=T.tag,ze=Object.keys(j);if(!0===T.sortKeys)ze.sort();else if("function"==typeof T.sortKeys)ze.sort(T.sortKeys);else if(T.sortKeys)throw new Bi("sortKeys must be a boolean or a function");for(rt=0,St=ze.length;rt<St;rt+=1)pi="",(!ee||""!==pe)&&(pi+=ta(T,F)),ri=j[Mt=ze[rt]],T.replacer&&(ri=T.replacer.call(j,Mt,ri)),Ys(T,F+1,Mt,!0,!0,!0)&&((ai=null!==T.tag&&"?"!==T.tag||T.dump&&T.dump.length>1024)&&(T.dump&&10===T.dump.charCodeAt(0)?pi+="?":pi+="? "),pi+=T.dump,ai&&(pi+=ta(T,F)),Ys(T,F+1,ri,!0,ai)&&(T.dump&&10===T.dump.charCodeAt(0)?pi+=":":pi+=": ",pe+=pi+=T.dump));T.tag=Ye,T.dump=pe||"{}"}(T,F,T.dump,pe),pi&&(T.dump="&ref_"+ai+T.dump)):(function(T,F,j){var ze,rt,St,Mt,ri,ee="",pe=T.tag,Ye=Object.keys(j);for(ze=0,rt=Ye.length;ze<rt;ze+=1)ri="",""!==ee&&(ri+=", "),T.condenseFlow&&(ri+='"'),Mt=j[St=Ye[ze]],T.replacer&&(Mt=T.replacer.call(j,St,Mt)),Ys(T,F,St,!1,!1)&&(T.dump.length>1024&&(ri+="? "),ri+=T.dump+(T.condenseFlow?'"':"")+":"+(T.condenseFlow?"":" "),Ys(T,F,Mt,!1,!1)&&(ee+=ri+=T.dump));T.tag=pe,T.dump="{"+ee+"}"}(T,F,T.dump),pi&&(T.dump="&ref_"+ai+" "+T.dump));else if("[object Array]"===rt)ee&&0!==T.dump.length?(function(T,F,j,ee){var ze,rt,St,pe="",Ye=T.tag;for(ze=0,rt=j.length;ze<rt;ze+=1)St=j[ze],T.replacer&&(St=T.replacer.call(j,String(ze),St)),(Ys(T,F+1,St,!0,!0,!1,!0)||void 0===St&&Ys(T,F+1,null,!0,!0,!1,!0))&&((!ee||""!==pe)&&(pe+=ta(T,F)),T.dump&&10===T.dump.charCodeAt(0)?pe+="-":pe+="- ",pe+=T.dump);T.tag=Ye,T.dump=pe||"[]"}(T,T.noArrayIndent&&!ze&&F>0?F-1:F,T.dump,pe),pi&&(T.dump="&ref_"+ai+T.dump)):(function(T,F,j){var Ye,ze,rt,ee="",pe=T.tag;for(Ye=0,ze=j.length;Ye<ze;Ye+=1)rt=j[Ye],T.replacer&&(rt=T.replacer.call(j,String(Ye),rt)),(Ys(T,F,rt,!1,!1)||void 0===rt&&Ys(T,F,null,!1,!1))&&(""!==ee&&(ee+=","+(T.condenseFlow?"":" ")),ee+=T.dump);T.tag=pe,T.dump="["+ee+"]"}(T,F,T.dump),pi&&(T.dump="&ref_"+ai+" "+T.dump));else{if("[object String]"!==rt){if("[object Undefined]"===rt)return!1;if(T.skipInvalid)return!1;throw new Bi("unacceptable kind of an object to dump "+rt)}"?"!==T.tag&&Ra(T,T.dump,F,Ye,St)}null!==T.tag&&"?"!==T.tag&&(Mt=encodeURI("!"===T.tag[0]?T.tag.slice(1):T.tag).replace(/!/g,"%21"),Mt="!"===T.tag[0]?"!"+Mt:"tag:yaml.org,2002:"===Mt.slice(0,18)?"!!"+Mt.slice(18):"!<"+Mt+">",T.dump=Mt+" "+T.dump)}return!0}function Ia(T,F){var pe,Ye,j=[],ee=[];for(Is(T,j,ee),pe=0,Ye=ee.length;pe<Ye;pe+=1)F.duplicates.push(j[ee[pe]]);F.usedDuplicates=new Array(Ye)}function Is(T,F,j){var ee,pe,Ye;if(null!==T&&"object"==typeof T)if(-1!==(pe=F.indexOf(T)))-1===j.indexOf(pe)&&j.push(pe);else if(F.push(T),Array.isArray(T))for(pe=0,Ye=T.length;pe<Ye;pe+=1)Is(T[pe],F,j);else for(pe=0,Ye=(ee=Object.keys(T)).length;pe<Ye;pe+=1)Is(T[ee[pe]],F,j)}function Ll(T,F){return function(){throw new Error("Function yaml."+T+" is removed in js-yaml 4. Use yaml."+F+" instead, which is now safe by default.")}}const uo={Type:Zi,Schema:$t,FAILSAFE_SCHEMA:fn,JSON_SCHEMA:Ht,CORE_SCHEMA:Ai,DEFAULT_SCHEMA:Fa,load:K.load,loadAll:K.loadAll,dump:function(T,F){var j=new is(F=F||{});j.noRefs||Ia(T,j);var ee=T;return j.replacer&&(ee=j.replacer.call({"":ee},"",ee)),Ys(j,0,ee,!0,!0)?j.dump+"\n":""},YAMLException:Bi,types:{binary:$r,float:ot,map:Oi,null:eo,pairs:$a,set:Bs,timestamp:Bn,bool:pr,int:_r,merge:Yo,omap:rs,seq:ui,str:kt},safeLoad:Ll("safeLoad","load"),safeLoadAll:Ll("safeLoadAll","loadAll"),safeDump:Ll("safeDump","dump")},Tl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Xs,Blob:ya,File:Vo}=Tl;function Ga(T){return function(T){if(ye(T))return ae(T)}(T)||function(T){if(void 0!==$e&&null!=Te(T)||null!=T["@@iterator"])return ge(T)}(T)||He(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Cu=g(63759),$s=g.n(Cu),ec=function(F){return":/?#[]@!$&'()*+,;=".indexOf(F)>-1},ds=function(F){return/^[a-z0-9\-._~]+$/i.test(F)};function Lo(T){var F,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ee=j.escape,pe=arguments.length>2?arguments[2]:void 0;return"number"==typeof T&&(T=T.toString()),"string"==typeof T&&T.length&&ee?pe?JSON.parse(T):xe()(F=Ga(T)).call(F,function(Ye){var ze,rt;if(ds(Ye)||ec(Ye)&&"unsafe"===ee)return Ye;var St=new TextEncoder;return xe()(ze=xe()(rt=Be()(St.encode(Ye))).call(rt,function(ri){var ai;return $s()(ai="0".concat(ri.toString(16).toUpperCase())).call(ai,-2)})).call(ze,function(ri){return"%".concat(ri)}).join("")}).join(""):T}function Po(T){var F=T.value;return Array.isArray(F)?function(T){var F=T.key,j=T.value,ee=T.style,pe=T.explode,Ye=T.escape,ze=function(ai){return Lo(ai,{escape:Ye})};if("simple"===ee)return xe()(j).call(j,function(ri){return ze(ri)}).join(",");if("label"===ee)return".".concat(xe()(j).call(j,function(ri){return ze(ri)}).join("."));if("matrix"===ee)return xe()(j).call(j,function(ri){return ze(ri)}).reduce(function(ri,ai){var pi,Si,ji;return!ri||pe?Rt()(Si=Rt()(ji="".concat(ri||"",";")).call(ji,F,"=")).call(Si,ai):Rt()(pi="".concat(ri,",")).call(pi,ai)},"");if("form"===ee){var rt=pe?"&".concat(F,"="):",";return xe()(j).call(j,function(ri){return ze(ri)}).join(rt)}if("spaceDelimited"===ee){var St=pe?"".concat(F,"="):"";return xe()(j).call(j,function(ri){return ze(ri)}).join(" ".concat(St))}if("pipeDelimited"===ee){var Mt=pe?"".concat(F,"="):"";return xe()(j).call(j,function(ri){return ze(ri)}).join("|".concat(Mt))}}(T):"object"===ue(F)?function(T){var F=T.key,j=T.value,ee=T.style,pe=T.explode,Ye=T.escape,ze=function(Mt){return Lo(Mt,{escape:Ye})},rt=jt()(j);return"simple"===ee?rt.reduce(function(St,Mt){var ri,ai,pi,Si=ze(j[Mt]),ji=pe?"=":",",tn=St?"".concat(St,","):"";return Rt()(ri=Rt()(ai=Rt()(pi="".concat(tn)).call(pi,Mt)).call(ai,ji)).call(ri,Si)},""):"label"===ee?rt.reduce(function(St,Mt){var ri,ai,pi,Si=ze(j[Mt]),ji=pe?"=":".",tn=St?"".concat(St,"."):".";return Rt()(ri=Rt()(ai=Rt()(pi="".concat(tn)).call(pi,Mt)).call(ai,ji)).call(ri,Si)},""):"matrix"===ee&&pe?rt.reduce(function(St,Mt){var ri,ai,pi=ze(j[Mt]),Si=St?"".concat(St,";"):";";return Rt()(ri=Rt()(ai="".concat(Si)).call(ai,Mt,"=")).call(ri,pi)},""):"matrix"===ee?rt.reduce(function(St,Mt){var ri,ai,pi=ze(j[Mt]),Si=St?"".concat(St,","):";".concat(F,"=");return Rt()(ri=Rt()(ai="".concat(Si)).call(ai,Mt,",")).call(ri,pi)},""):"form"===ee?rt.reduce(function(St,Mt){var ri,ai,pi,Si,ji=ze(j[Mt]),tn=St?Rt()(ri="".concat(St)).call(ri,pe?"&":","):"",nn=pe?"=":",";return Rt()(ai=Rt()(pi=Rt()(Si="".concat(tn)).call(Si,Mt)).call(pi,nn)).call(ai,ji)},""):void 0}(T):function(T){var ze,F=T.key,j=T.value,ee=T.style,pe=T.escape,Ye=function(St){return Lo(St,{escape:pe})};return"simple"===ee?Ye(j):"label"===ee?".".concat(Ye(j)):"matrix"===ee?Rt()(ze=";".concat(F,"=")).call(ze,Ye(j)):"form"===ee||"deepObject"===ee?Ye(j):void 0}(T)}const Uc=function(F,j){j.body=F};var wu={serializeRes:ad,mergeInQueryOrForm:Wa};function ic(T){return bc.apply(this,arguments)}function bc(){return bc=lt(Pt().mark(function T(F){var j,pe,Ye,ze,rt=arguments;return Pt().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(j=rt.length>1&&void 0!==rt[1]?rt[1]:{},"object"===ue(F)&&(F=(j=F).url),j.headers=j.headers||{},wu.mergeInQueryOrForm(j),j.headers&&jt()(j.headers).forEach(function(ri){var ai=j.headers[ri];"string"==typeof ai&&(j.headers[ri]=ai.replace(/\n+/g," "))}),!j.requestInterceptor){Mt.next=12;break}return Mt.next=8,j.requestInterceptor(j);case 8:if(Mt.t0=Mt.sent,Mt.t0){Mt.next=11;break}Mt.t0=j;case 11:j=Mt.t0;case 12:return/multipart\/form-data/i.test(j.headers["content-type"]||j.headers["Content-Type"])&&j.body instanceof Xs&&(delete j.headers["content-type"],delete j.headers["Content-Type"]),Mt.prev=14,Mt.next=17,(j.userFetch||fetch)(j.url,j);case 17:return pe=Mt.sent,Mt.next=20,wu.serializeRes(pe,F,j);case 20:if(pe=Mt.sent,!j.responseInterceptor){Mt.next=28;break}return Mt.next=24,j.responseInterceptor(pe);case 24:if(Mt.t1=Mt.sent,Mt.t1){Mt.next=27;break}Mt.t1=pe;case 27:pe=Mt.t1;case 28:Mt.next=39;break;case 30:if(Mt.prev=30,Mt.t2=Mt.catch(14),pe){Mt.next=34;break}throw Mt.t2;case 34:throw(Ye=new Error(pe.statusText||"response status is ".concat(pe.status))).status=pe.status,Ye.statusCode=pe.status,Ye.responseError=Mt.t2,Ye;case 39:if(pe.ok){Mt.next=45;break}throw(ze=new Error(pe.statusText||"response status is ".concat(pe.status))).status=pe.status,ze.statusCode=pe.status,ze.response=pe,ze;case 45:return Mt.abrupt("return",pe);case 46:case"end":return Mt.stop()}},T,null,[[14,30]])})),bc.apply(this,arguments)}var sd=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(F)};function Gu(T,F){return F&&(0===F.indexOf("application/json")||F.indexOf("+json")>0)?JSON.parse(T):uo.load(T)}function ad(T,F){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ee=j.loadSpec,pe=void 0!==ee&&ee,Ye={ok:T.ok,url:T.url||F,status:T.status,statusText:T.statusText,headers:tu(T.headers)},ze=Ye.headers["content-type"],rt=pe||sd(ze),St=rt?T.text:T.blob||T.buffer;return St.call(T).then(function(Mt){if(Ye.text=Mt,Ye.data=Mt,rt)try{var ri=Gu(Mt,ze);Ye.body=ri,Ye.obj=ri}catch(ai){Ye.parseError=ai}return Ye})}function Yl(T){return Di()(T).call(T,", ")?T.split(", "):T}function tu(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof Ct()(T)?{}:Be()(Ct()(T).call(T)).reduce(function(F,j){var ee=ke(j,2);return F[ee[0]]=Yl(ee[1]),F},{})}function ss(T,F){return!F&&"undefined"!=typeof navigator&&(F=navigator),F&&"ReactNative"===F.product?!(!T||"object"!==ue(T)||"string"!=typeof T.uri):!!(void 0!==Vo&&T instanceof Vo||void 0!==ya&&T instanceof ya||ArrayBuffer.isView(T))||null!==T&&"object"===ue(T)&&"function"==typeof T.pipe}function yc(T,F){return Array.isArray(T)&&T.some(function(j){return ss(j,F)})}var nc={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Pl={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Ca(T,F){var j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],ee=F.collectionFormat,pe=F.allowEmptyValue,Ye=F.serializationOption,ze=F.encoding,rt="object"!==ue(F)||Array.isArray(F)?F:F.value,St=j?function(ji){return ji.toString()}:function(ji){return encodeURIComponent(ji)},Mt=St(T);if(void 0===rt&&pe)return[[Mt,""]];if(ss(rt)||yc(rt))return[[Mt,rt]];if(Ye)return ha(T,rt,j,Ye);if(ze){if([ue(ze.style),ue(ze.explode),ue(ze.allowReserved)].some(function(ji){return"undefined"!==ji})){var ri=ze.style,ai=ze.explode,pi=ze.allowReserved;return ha(T,rt,j,{style:ri,explode:ai,allowReserved:pi})}if(ze.contentType){if("application/json"===ze.contentType){var Si="string"==typeof rt?rt:Je()(rt);return[[Mt,St(Si)]]}return[[Mt,St(rt.toString())]]}return"object"!==ue(rt)?[[Mt,St(rt)]]:Array.isArray(rt)&&rt.every(function(ji){return"object"!==ue(ji)})?[[Mt,xe()(rt).call(rt,St).join(",")]]:[[Mt,St(Je()(rt))]]}return"object"!==ue(rt)?[[Mt,St(rt)]]:Array.isArray(rt)?"multi"===ee?[[Mt,xe()(rt).call(rt,St)]]:[[Mt,xe()(rt).call(rt,St).join(Pl[ee||"csv"])]]:[[Mt,""]]}function ha(T,F,j,ee){var pe,ri,ai,Ye=ee.style||"form",ze=void 0===ee.explode?"form"===Ye:ee.explode,rt=!j&&(ee&&ee.allowReserved?"unsafe":"reserved"),St=function(Si){return Lo(Si,{escape:rt})},Mt=j?function(pi){return pi}:function(pi){return Lo(pi,{escape:rt})};return"object"!==ue(F)?[[Mt(T),St(F)]]:Array.isArray(F)?ze?[[Mt(T),xe()(F).call(F,St)]]:[[Mt(T),xe()(F).call(F,St).join(nc[Ye])]]:"deepObject"===Ye?xe()(ri=jt()(F)).call(ri,function(pi){var Si;return[Mt(Rt()(Si="".concat(T,"[")).call(Si,pi,"]")),St(F[pi])]}):ze?xe()(ai=jt()(F)).call(ai,function(pi){return[Mt(pi),St(F[pi])]}):[[Mt(T),xe()(pe=jt()(F)).call(pe,function(pi){var Si;return[Rt()(Si="".concat(Mt(pi),",")).call(Si,St(F[pi]))]}).join(",")]]}function wo(T){return tt()(T).reduce(function(F,j){var rt,ee=ke(j,2),ze=Se(Ca(ee[0],ee[1],!0));try{for(ze.s();!(rt=ze.n()).done;){var St=ke(rt.value,2),Mt=St[0],ri=St[1];if(Array.isArray(ri)){var pi,ai=Se(ri);try{for(ai.s();!(pi=ai.n()).done;){var Si=pi.value;if(ArrayBuffer.isView(Si)){var ji=new ya([Si]);F.append(Mt,ji)}else F.append(Mt,Si)}}catch(nn){ai.e(nn)}finally{ai.f()}}else if(ArrayBuffer.isView(ri)){var tn=new ya([ri]);F.append(Mt,tn)}else F.append(Mt,ri)}}catch(nn){ze.e(nn)}finally{ze.f()}return F},new Xs)}function ka(T){var F=jt()(T).reduce(function(j,ee){var Ye,pe=Se(Ca(ee,T[ee]));try{for(pe.s();!(Ye=pe.n()).done;){var ze=ke(Ye.value,2);j[ze[0]]=ze[1]}}catch(Mt){pe.e(Mt)}finally{pe.f()}return j},{});return Ze().stringify(F,{encode:!1,indices:!1})||""}function Wa(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},F=T.url,j=void 0===F?"":F,ee=T.query,pe=T.form,Ye=function(){for(var rn=arguments.length,Or=new Array(rn),Kr=0;Kr<rn;Kr++)Or[Kr]=arguments[Kr];var cs=nt()(Or).call(Or,function(go){return go}).join("&");return cs?"?".concat(cs):""};if(pe){var ze=jt()(pe).some(function(An){var rn=pe[An].value;return ss(rn)||yc(rn)}),rt=T.headers["content-type"]||T.headers["Content-Type"];if(ze||/multipart\/form-data/i.test(rt)){var St=wo(T.form);Uc(St,T)}else T.body=ka(pe);delete T.form}if(ee){var Mt=j.split("?"),ri=ke(Mt,2),ai=ri[0],pi=ri[1],Si="";if(pi){var ji=Ze().parse(pi),tn=jt()(ee);tn.forEach(function(An){return delete ji[An]}),Si=Ze().stringify(ji,{encode:!0})}var nn=Ye(Si,ka(ee));T.url=ai+nn,delete T.query}return T}function iu(T,F){if(!(T instanceof F))throw new TypeError("Cannot call a class as a function")}function na(T,F){for(var j=0;j<F.length;j++){var ee=F[j];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),z(T,ee.key,ee)}}function Gr(T,F,j){return F&&na(T.prototype,F),j&&na(T,j),z(T,"prototype",{writable:!1}),T}var T,Ta=g(77464),rc=g.n(Ta),Fl=g(78927),bs=g.n(Fl),tl=g(67489),oc=g.n(tl),Cd=(T=function(F,j){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,pe){ee.__proto__=pe}||function(ee,pe){for(var Ye in pe)pe.hasOwnProperty(Ye)&&(ee[Ye]=pe[Ye])})(F,j)},function(F,j){function ee(){this.constructor=F}T(F,j),F.prototype=null===j?Object.create(j):(ee.prototype=j.prototype,new ee)}),La=Object.prototype.hasOwnProperty;function Bl(T,F){return La.call(T,F)}function sc(T){if(Array.isArray(T)){for(var j=new Array(T.length),F=0;F<j.length;F++)j[F]=""+F;return j}if(Object.keys)return Object.keys(T);for(var ee in j=[],T)Bl(T,ee)&&j.push(ee);return j}function Os(T){switch(typeof T){case"object":return JSON.parse(JSON.stringify(T));case"undefined":return null;default:return T}}function hl(T){for(var ee,F=0,j=T.length;F<j;){if(!((ee=T.charCodeAt(F))>=48&&ee<=57))return!1;F++}return!0}function Ir(T){return-1===T.indexOf("/")&&-1===T.indexOf("~")?T:T.replace(/~/g,"~0").replace(/\//g,"~1")}function ac(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}function Gc(T){if(void 0===T)return!0;if(T)if(Array.isArray(T)){for(var F=0,j=T.length;F<j;F++)if(Gc(T[F]))return!0}else if("object"==typeof T){var ee=sc(T),pe=ee.length;for(F=0;F<pe;F++)if(Gc(T[ee[F]]))return!0}return!1}function ra(T,F){var j=[T];for(var ee in F){var pe="object"==typeof F[ee]?JSON.stringify(F[ee],null,2):F[ee];void 0!==pe&&j.push(ee+": "+pe)}return j.join("\n")}var Cc=function(T){function F(j,ee,pe,Ye,ze){var rt=this.constructor,St=T.call(this,ra(j,{name:ee,index:pe,operation:Ye,tree:ze}))||this;return St.name=ee,St.index=pe,St.operation=Ye,St.tree=ze,Object.setPrototypeOf(St,rt.prototype),St.message=ra(j,{name:ee,index:pe,operation:Ye,tree:ze}),St}return Cd(F,T),F}(Error),No=Cc,Tc=Os,cc={add:function(T,F,j){return T[F]=this.value,{newDocument:j}},remove:function(T,F,j){var ee=T[F];return delete T[F],{newDocument:j,removed:ee}},replace:function(T,F,j){var ee=T[F];return T[F]=this.value,{newDocument:j,removed:ee}},move:function(T,F,j){var ee=uc(j,this.path);ee&&(ee=Os(ee));var pe=ja(j,{op:"remove",path:this.from}).removed;return ja(j,{op:"add",path:this.path,value:pe}),{newDocument:j,removed:ee}},copy:function(T,F,j){var ee=uc(j,this.from);return ja(j,{op:"add",path:this.path,value:Os(ee)}),{newDocument:j}},test:function(T,F,j){return{newDocument:j,test:fl(T[F],this.value)}},_get:function(T,F,j){return this.value=T[F],{newDocument:j}}},nu={add:function(T,F,j){return hl(F)?T.splice(F,0,this.value):T[F]=this.value,{newDocument:j,index:F}},remove:function(T,F,j){return{newDocument:j,removed:T.splice(F,1)[0]}},replace:function(T,F,j){var ee=T[F];return T[F]=this.value,{newDocument:j,removed:ee}},move:cc.move,copy:cc.copy,test:cc.test,_get:cc._get};function uc(T,F){if(""==F)return T;var j={op:"_get",path:F};return ja(T,j),j.value}function ja(T,F,j,ee,pe,Ye){if(void 0===j&&(j=!1),void 0===ee&&(ee=!0),void 0===pe&&(pe=!0),void 0===Ye&&(Ye=0),j&&("function"==typeof j?j(F,0,T,F.path):pl(F,0)),""===F.path){var ze={newDocument:T};if("add"===F.op)return ze.newDocument=F.value,ze;if("replace"===F.op)return ze.newDocument=F.value,ze.removed=T,ze;if("move"===F.op||"copy"===F.op)return ze.newDocument=uc(T,F.from),"move"===F.op&&(ze.removed=T),ze;if("test"===F.op){if(ze.test=fl(T,F.value),!1===ze.test)throw new No("Test operation failed","TEST_OPERATION_FAILED",Ye,F,T);return ze.newDocument=T,ze}if("remove"===F.op)return ze.removed=T,ze.newDocument=null,ze;if("_get"===F.op)return F.value=T,ze;if(j)throw new No("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",Ye,F,T);return ze}ee||(T=Os(T));var St=(F.path||"").split("/"),Mt=T,ri=1,ai=St.length,pi=void 0,Si=void 0,ji=void 0;for(ji="function"==typeof j?j:pl;;){if((Si=St[ri])&&-1!=Si.indexOf("~")&&(Si=ac(Si)),pe&&"__proto__"==Si)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(j&&void 0===pi&&(void 0===Mt[Si]?pi=St.slice(0,ri).join("/"):ri==ai-1&&(pi=F.path),void 0!==pi&&ji(F,0,T,pi)),ri++,Array.isArray(Mt)){if("-"===Si)Si=Mt.length;else{if(j&&!hl(Si))throw new No("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",Ye,F,T);hl(Si)&&(Si=~~Si)}if(ri>=ai){if(j&&"add"===F.op&&Si>Mt.length)throw new No("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",Ye,F,T);if(!1===(ze=nu[F.op].call(F,Mt,Si,T)).test)throw new No("Test operation failed","TEST_OPERATION_FAILED",Ye,F,T);return ze}}else if(ri>=ai){if(!1===(ze=cc[F.op].call(F,Mt,Si,T)).test)throw new No("Test operation failed","TEST_OPERATION_FAILED",Ye,F,T);return ze}if(Mt=Mt[Si],j&&ri<ai&&(!Mt||"object"!=typeof Mt))throw new No("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",Ye,F,T)}}function Js(T,F,j,ee,pe){if(void 0===ee&&(ee=!0),void 0===pe&&(pe=!0),j&&!Array.isArray(F))throw new No("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");ee||(T=Os(T));for(var Ye=new Array(F.length),ze=0,rt=F.length;ze<rt;ze++)Ye[ze]=ja(T,F[ze],j,!0,pe,ze),T=Ye[ze].newDocument;return Ye.newDocument=T,Ye}function dc(T,F,j){var ee=ja(T,F);if(!1===ee.test)throw new No("Test operation failed","TEST_OPERATION_FAILED",j,F,T);return ee.newDocument}function pl(T,F,j,ee){if("object"!=typeof T||null===T||Array.isArray(T))throw new No("Operation is not an object","OPERATION_NOT_AN_OBJECT",F,T,j);if(!cc[T.op])throw new No("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",F,T,j);if("string"!=typeof T.path)throw new No("Operation `path` property is not a string","OPERATION_PATH_INVALID",F,T,j);if(0!==T.path.indexOf("/")&&T.path.length>0)throw new No('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",F,T,j);if(("move"===T.op||"copy"===T.op)&&"string"!=typeof T.from)throw new No("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",F,T,j);if(("add"===T.op||"replace"===T.op||"test"===T.op)&&void 0===T.value)throw new No("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",F,T,j);if(("add"===T.op||"replace"===T.op||"test"===T.op)&&Gc(T.value))throw new No("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",F,T,j);if(j)if("add"==T.op){var pe=T.path.split("/").length,Ye=ee.split("/").length;if(pe!==Ye+1&&pe!==Ye)throw new No("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",F,T,j)}else if("replace"===T.op||"remove"===T.op||"_get"===T.op){if(T.path!==ee)throw new No("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",F,T,j)}else if("move"===T.op||"copy"===T.op){var rt=Jo([{op:"_get",path:T.from,value:void 0}],j);if(rt&&"OPERATION_PATH_UNRESOLVABLE"===rt.name)throw new No("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",F,T,j)}}function Jo(T,F,j){try{if(!Array.isArray(T))throw new No("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(F)Js(Os(F),Os(T),j||!0);else{j=j||pl;for(var ee=0;ee<T.length;ee++)j(T[ee],ee,F,void 0)}}catch(pe){if(pe instanceof No)return pe;throw pe}}function fl(T,F){if(T===F)return!0;if(T&&F&&"object"==typeof T&&"object"==typeof F){var pe,Ye,ze,j=Array.isArray(T),ee=Array.isArray(F);if(j&&ee){if((Ye=T.length)!=F.length)return!1;for(pe=Ye;0!=pe--;)if(!fl(T[pe],F[pe]))return!1;return!0}if(j!=ee)return!1;var rt=Object.keys(T);if((Ye=rt.length)!==Object.keys(F).length)return!1;for(pe=Ye;0!=pe--;)if(!F.hasOwnProperty(rt[pe]))return!1;for(pe=Ye;0!=pe--;)if(!fl(T[ze=rt[pe]],F[ze]))return!1;return!0}return T!=T&&F!=F}var il=new WeakMap,hc=function(F){this.observers=new Map,this.obj=F},wc=function(F,j){this.callback=F,this.observer=j};function Hl(T,F){F.unobserve()}function Xl(T,F){var ee,pe=function(T){return il.get(T)}(T);if(pe){var Ye=function(T,F){return T.observers.get(F)}(pe,F);ee=Ye&&Ye.observer}else pe=new hc(T),il.set(T,pe);if(ee)return ee;if(ee={},pe.value=Os(T),F){ee.callback=F,ee.next=null;var ze=function(){Sc(ee)},rt=function(){clearTimeout(ee.next),ee.next=setTimeout(ze)};"undefined"!=typeof window&&(window.addEventListener("mouseup",rt),window.addEventListener("keyup",rt),window.addEventListener("mousedown",rt),window.addEventListener("keydown",rt),window.addEventListener("change",rt))}return ee.patches=[],ee.object=T,ee.unobserve=function(){Sc(ee),clearTimeout(ee.next),function(T,F){T.observers.delete(F.callback)}(pe,ee),"undefined"!=typeof window&&(window.removeEventListener("mouseup",rt),window.removeEventListener("keyup",rt),window.removeEventListener("mousedown",rt),window.removeEventListener("keydown",rt),window.removeEventListener("change",rt))},pe.observers.set(F,new wc(F,ee)),ee}function Sc(T,F){void 0===F&&(F=!1);var j=il.get(T.object);pa(j.value,T.object,T.patches,"",F),T.patches.length&&Js(j.value,T.patches);var ee=T.patches;return ee.length>0&&(T.patches=[],T.callback&&T.callback(ee)),ee}function pa(T,F,j,ee,pe){if(F!==T){"function"==typeof F.toJSON&&(F=F.toJSON());for(var Ye=sc(F),ze=sc(T),St=!1,Mt=ze.length-1;Mt>=0;Mt--){var ai=T[ri=ze[Mt]];if(!Bl(F,ri)||void 0===F[ri]&&void 0!==ai&&!1===Array.isArray(F))Array.isArray(T)===Array.isArray(F)?(pe&&j.push({op:"test",path:ee+"/"+Ir(ri),value:Os(ai)}),j.push({op:"remove",path:ee+"/"+Ir(ri)}),St=!0):(pe&&j.push({op:"test",path:ee,value:T}),j.push({op:"replace",path:ee,value:F}));else{var pi=F[ri];"object"==typeof ai&&null!=ai&&"object"==typeof pi&&null!=pi&&Array.isArray(ai)===Array.isArray(pi)?pa(ai,pi,j,ee+"/"+Ir(ri),pe):ai!==pi&&(pe&&j.push({op:"test",path:ee+"/"+Ir(ri),value:Os(ai)}),j.push({op:"replace",path:ee+"/"+Ir(ri),value:Os(pi)}))}}if(St||Ye.length!=ze.length)for(Mt=0;Mt<Ye.length;Mt++){var ri;!Bl(T,ri=Ye[Mt])&&void 0!==F[ri]&&j.push({op:"add",path:ee+"/"+Ir(ri),value:Os(F[ri])})}}}function nl(T,F,j){void 0===j&&(j=!1);var ee=[];return pa(T,F,ee,"",j),ee}Object.assign({},E,m,{JsonPatchError:Cc,deepClone:Os,escapePathComponent:Ir,unescapePathComponent:ac});var pc=g(89986),zc=g.n(pc),Dc=g(69380),wa=g.n(Dc);const so={add:function(T,F){return{op:"add",path:T,value:F}},replace:Su,remove:function(T){return{op:"remove",path:T}},merge:function(T,F){return{type:"mutation",op:"merge",path:T,value:F}},mergeDeep:function(T,F){return{type:"mutation",op:"mergeDeep",path:T,value:F}},context:function(T,F){return{type:"context",path:T,value:F}},getIn:function(T,F){return F.reduce(function(j,ee){return void 0!==ee&&j?j[ee]:j},T)},applyPatch:function(T,F,j){if(j=j||{},"merge"===(F=se(se({},F),{},{path:F.path&&Kl(F.path)})).op){var ee=Vt(T,F.path);Ge()(ee,F.value),Js(T,[Su(F.path,ee)])}else if("mergeDeep"===F.op){var pe=Vt(T,F.path);for(var Ye in F.value){var ze=F.value[Ye],rt=Array.isArray(ze);if(rt){var St=pe[Ye]||[];pe[Ye]=Rt()(St).call(St,ze)}else if(fa(ze)&&!rt){var Mt=se({},pe[Ye]);for(var ri in ze){if(Object.prototype.hasOwnProperty.call(Mt,ri)){Mt=zc()(wa()(Mt),ze);break}Ge()(Mt,oe({},ri,ze[ri]))}pe[Ye]=Mt}else pe[Ye]=ze}}else if("add"===F.op&&""===F.path&&fa(F.value)){Js(T,jt()(F.value).reduce(function(nn,An){return nn.push({op:"add",path:"/".concat(Kl(An)),value:F.value[An]}),nn},[]))}else if("replace"===F.op&&""===F.path){var Si=F.value;j.allowMetaPatches&&F.meta&&we(F)&&(Array.isArray(F.value)||fa(F.value))&&(Si=se(se({},Si),F.meta)),T=Si}else if(Js(T,[F]),j.allowMetaPatches&&F.meta&&we(F)&&(Array.isArray(F.value)||fa(F.value))){var tn=se(se({},Vt(T,F.path)),F.meta);Js(T,[Su(F.path,tn)])}return T},parentPathMatch:function(T,F){if(!Array.isArray(F))return!1;for(var j=0,ee=F.length;j<ee;j+=1)if(F[j]!==T[j])return!1;return!0},flatten:rl,fullyNormalizeArray:function(T){return Jl(rl(Sa(T)))},normalizeArray:Sa,isPromise:function(T){return fa(T)&&Ul(T.then)},forEachNew:function(T,F){try{return wl(T,Dl,F)}catch(j){return j}},forEachNewPrimitive:function(T,F){try{return wl(T,Sl,F)}catch(j){return j}},isJsonPatch:as,isContextPatch:function(T){return Dt(T)&&"context"===T.type},isPatch:Dt,isMutation:me,isAdditiveMutation:we,isGenerator:function(T){return"[object GeneratorFunction]"===Object.prototype.toString.call(T)},isFunction:Ul,isObject:fa,isError:function(T){return T instanceof Error}};function Kl(T){return Array.isArray(T)?T.length<1?"":"/".concat(xe()(T).call(T,function(F){return(F+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):T}function Su(T,F,j){return{op:"replace",path:T,value:F,meta:j}}function wl(T,F,j){var ee;return Jl(rl(xe()(ee=nt()(T).call(T,we)).call(ee,function(rt){return F(rt.value,j,rt.path)})||[]))}function Sl(T,F,j){return j=j||[],Array.isArray(T)?xe()(T).call(T,function(pe,Ye){return Sl(pe,F,Rt()(j).call(j,Ye))}):fa(T)?xe()(ee=jt()(T)).call(ee,function(pe){return Sl(T[pe],F,Rt()(j).call(j,pe))}):F(T,j[j.length-1],j);var ee}function Dl(T,F,j){var ee=[];if((j=j||[]).length>0){var pe=F(T,j[j.length-1],j);pe&&(ee=Rt()(ee).call(ee,pe))}if(Array.isArray(T)){var Ye=xe()(T).call(T,function(St,Mt){return Dl(St,F,Rt()(j).call(j,Mt))});Ye&&(ee=Rt()(ee).call(ee,Ye))}else if(fa(T)){var ze,rt=xe()(ze=jt()(T)).call(ze,function(St){return Dl(T[St],F,Rt()(j).call(j,St))});rt&&(ee=Rt()(ee).call(ee,rt))}return rl(ee)}function Sa(T){return Array.isArray(T)?T:[T]}function rl(T){var F;return Rt()(F=[]).apply(F,Ga(xe()(T).call(T,function(j){return Array.isArray(j)?rl(j):j})))}function Jl(T){return nt()(T).call(T,function(F){return void 0!==F})}function fa(T){return T&&"object"===ue(T)}function Ul(T){return T&&"function"==typeof T}function as(T){if(Dt(T)){var F=T.op;return"add"===F||"remove"===F||"replace"===F}return!1}function me(T){return as(T)||Dt(T)&&"mutation"===T.type}function we(T){return me(T)&&("add"===T.op||"replace"===T.op||"merge"===T.op||"mergeDeep"===T.op)}function Dt(T){return T&&"object"===ue(T)}function Vt(T,F){try{return uc(T,F)}catch(j){return console.error(j),{}}}var hi=g(74580),Qt=g.n(hi),si=g(79921),ki=g.n(si);function Ii(T,F){function j(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var ee=arguments.length,pe=new Array(ee),Ye=0;Ye<ee;Ye++)pe[Ye]=arguments[Ye];this.message=pe[0],F&&F.apply(this,pe)}return(j.prototype=new Error).name=T,j.prototype.constructor=j,j}var Wi=g(3394),Qn=g.n(Wi),Un=["properties"],ir=["properties"],Zo=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],Mo=["schema/example","items/example"];function Zr(T){var F=T[T.length-1],j=T[T.length-2],ee=T.join("/");return Un.indexOf(F)>-1&&-1===ir.indexOf(j)||Zo.indexOf(ee)>-1||Mo.some(function(pe){return ee.indexOf(pe)>-1})}function Go(T,F){var j,pe=ke(T.split("#"),2),ze=pe[1],rt=We.resolve(pe[0]||"",F||"");return ze?Rt()(j="".concat(rt,"#")).call(j,ze):rt}var po="application/json, application/yaml",sa=new RegExp("^([a-z]+://|//)","i"),ys=Ii("JSONRefError",function(F,j,ee){this.originalError=ee,Ge()(this,j||{})}),hs={},ml=new(Qt()),ou=[function(T){return"paths"===T[0]&&"responses"===T[3]&&"examples"===T[5]},function(T){return"paths"===T[0]&&"responses"===T[3]&&"content"===T[5]&&"example"===T[7]},function(T){return"paths"===T[0]&&"responses"===T[3]&&"content"===T[5]&&"examples"===T[7]&&"value"===T[9]},function(T){return"paths"===T[0]&&"requestBody"===T[3]&&"content"===T[4]&&"example"===T[6]},function(T){return"paths"===T[0]&&"requestBody"===T[3]&&"content"===T[4]&&"examples"===T[6]&&"value"===T[8]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"example"===T[4]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"example"===T[5]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"examples"===T[4]&&"value"===T[6]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"examples"===T[5]&&"value"===T[7]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"content"===T[4]&&"example"===T[6]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"content"===T[4]&&"examples"===T[6]&&"value"===T[8]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"content"===T[4]&&"example"===T[7]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"content"===T[5]&&"examples"===T[7]&&"value"===T[9]}],ju={key:"$ref",plugin:function(F,j,ee,pe){var Ye=pe.getInstance(),ze=$s()(ee).call(ee,0,-1);if(!Zr(ze)&&!function(F){return ou.some(function(j){return j(F)})}(ze)){var St=pe.getContext(ee).baseDoc;if("string"!=typeof F)return new ys("$ref: must be a string (JSON-Ref)",{$ref:F,baseDoc:St,fullPath:ee});var pi,Si,ji,Mt=Iu(F),ri=Mt[0],ai=Mt[1]||"";try{pi=St||ri?Rc(ri,St):null}catch(rn){return su(rn,{pointer:ai,$ref:F,basePath:pi,fullPath:ee})}if(function(T,F,j,ee){var pe,Ye,ze=ml.get(ee);ze||ml.set(ee,ze={});var rt=function(T){return 0===T.length?"":"/".concat(xe()(T).call(T,ku).join("/"))}(j),St=Rt()(pe="".concat(F||"<specmap-base>","#")).call(pe,T),Mt=rt.replace(/allOf\/\d+\/?/g,"");if(F===ee.contextTree.get([]).baseDoc&&Qo(Mt,T))return!0;var ai="",pi=j.some(function(Si){var ji;return ai=Rt()(ji="".concat(ai,"/")).call(ji,ku(Si)),ze[ai]&&ze[ai].some(function(tn){return Qo(tn,St)||Qo(St,tn)})});if(pi)return!0;ze[Mt]=Rt()(Ye=ze[Mt]||[]).call(Ye,St)}(ai,pi,ze,pe)&&!Ye.useCircularStructures){var tn=Go(F,pi);return F===tn?null:so.replace(ee,tn)}if(null==pi?(ji=au(ai),void 0===(Si=pe.get(ji))&&(Si=new ys("Could not resolve reference: ".concat(F),{pointer:ai,$ref:F,baseDoc:St,fullPath:ee}))):Si=null!=(Si=zu(pi,ai)).__value?Si.__value:Si.catch(function(rn){throw su(rn,{pointer:ai,$ref:F,baseDoc:St,fullPath:ee})}),Si instanceof Error)return[so.remove(ee),Si];var nn=Go(F,pi),An=so.replace(ze,Si,{$$ref:nn});if(pi&&pi!==St)return[An,so.context(ze,{baseDoc:pi})];try{if(!function(T,F){var j=[T];return F.path.reduce(function(pe,Ye){return j.push(pe[Ye]),pe[Ye]},T),function ee(pe){return so.isObject(pe)&&(j.indexOf(pe)>=0||jt()(pe).some(function(Ye){return ee(pe[Ye])}))}(F.value)}(pe.state,An)||Ye.useCircularStructures)return An}catch(rn){return null}}}},Au=Ge()(ju,{docCache:hs,absoluteify:Rc,clearCache:function(T){void 0!==T?delete hs[T]:jt()(hs).forEach(function(F){delete hs[F]})},JSONRefError:ys,wrapError:su,getDoc:Yu,split:Iu,extractFromDoc:zu,fetchJSON:function(T){return fetch(T,{headers:{Accept:po},loadSpec:!0}).then(function(F){return F.text()}).then(function(F){return uo.load(F)})},extract:dd,jsonPointerToArray:au,unescapeJsonPointerToken:Xc});const ud=Au;function Rc(T,F){if(!sa.test(T)){var j;if(!F)throw new ys(Rt()(j="Tried to resolve a relative URL, without having a basePath. path: '".concat(T,"' basePath: '")).call(j,F,"'"));return We.resolve(F,T)}return T}function su(T,F){var j,ee;return j=T&&T.response&&T.response.body?Rt()(ee="".concat(T.response.body.code," ")).call(ee,T.response.body.message):T.message,new ys("Could not resolve reference: ".concat(j),F,T)}function Iu(T){return(T+"").split("#")}function zu(T,F){var j=hs[T];if(j&&!so.isPromise(j))try{var ee=dd(F,j);return Ge()(bs().resolve(ee),{__value:ee})}catch(pe){return bs().reject(pe)}return Yu(T).then(function(pe){return dd(F,pe)})}function Yu(T){var F=hs[T];return F?so.isPromise(F)?F:bs().resolve(F):(hs[T]=Au.fetchJSON(T).then(function(j){return hs[T]=j,j}),hs[T])}function dd(T,F){var j=au(T);if(j.length<1)return F;var ee=so.getIn(F,j);if(void 0===ee)throw new ys("Could not resolve pointer: ".concat(T," does not exist in document"),{pointer:T});return ee}function au(T){var F;if("string"!=typeof T)throw new TypeError("Expected a string, got a ".concat(ue(T)));return"/"===T[0]&&(T=T.substr(1)),""===T?[]:xe()(F=T.split("/")).call(F,Xc)}function Xc(T){return"string"!=typeof T?T:new(ki())("=".concat(T.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function ku(T){var F,j=new(ki())([["",T.replace(/~/g,"~0").replace(/\//g,"~1")]]);return $s()(F=j.toString()).call(F,1)}function Qo(T,F){if(function(F){return!F||"/"===F||"#"===F}(F))return!0;var j=T.charAt(F.length),ee=$s()(F).call(F,-1);return 0===T.indexOf(F)&&(!j||"/"===j||"#"===j)&&"#"!==ee}var Kc=g(65359),wd=g.n(Kc);const Ku={key:"allOf",plugin:function(F,j,ee,pe,Ye){if(!Ye.meta||!Ye.meta.$$ref){var ze=$s()(ee).call(ee,0,-1);if(!Zr(ze)){if(!Array.isArray(F)){var rt=new TypeError("allOf must be an array");return rt.fullPath=ee,rt}var St=!1,Mt=Ye.value;if(ze.forEach(function(pi){!Mt||(Mt=Mt[pi])}),Mt=se({},Mt),!wd()(Mt)){delete Mt.allOf;var ai,ri=[];return ri.push(pe.replace(ze,{})),F.forEach(function(pi,Si){if(!pe.isObject(pi)){if(St)return null;St=!0;var ji=new TypeError("Elements in allOf must be objects");return ji.fullPath=ee,ri.push(ji)}ri.push(pe.mergeDeep(ze,pi));var nn=function(T,F){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ee=j.specmap,pe=j.getBaseUrlForNodePath,Ye=void 0===pe?function(Mt){var ri;return ee.getContext(Rt()(ri=[]).call(ri,Ga(F),Ga(Mt))).baseDoc}:pe,ze=j.targetKeys,rt=void 0===ze?["$ref","$$ref"]:ze,St=[];return Qn()(T).forEach(function(){if(Di()(rt).call(rt,this.key)&&"string"==typeof this.node){var ri=this.path,ai=Rt()(F).call(F,this.path),pi=Go(this.node,Ye(ri));St.push(ee.replace(ai,pi))}}),St}(pi,$s()(ee).call(ee,0,-1),{getBaseUrlForNodePath:function(rn){var Or;return pe.getContext(Rt()(Or=[]).call(Or,Ga(ee),[Si],Ga(rn))).baseDoc},specmap:pe});ri.push.apply(ri,Ga(nn))}),ri.push(pe.mergeDeep(ze,Mt)),Mt.$$ref||ri.push(pe.remove(Rt()(ai=[]).call(ai,ze,"$$ref"))),ri}}}}},hd={key:"parameters",plugin:function(F,j,ee,pe){if(Array.isArray(F)&&F.length){var Ye=Ge()([],F),ze=$s()(ee).call(ee,0,-1),rt=se({},so.getIn(pe.spec,ze));return F.forEach(function(St,Mt){try{Ye[Mt].default=pe.parameterMacro(rt,St)}catch(ai){var ri=new Error(ai);return ri.fullPath=ee,ri}}),so.replace(ee,Ye)}return so.replace(ee,F)}},Sd={key:"properties",plugin:function(F,j,ee,pe){var Ye=se({},F);for(var ze in F)try{Ye[ze].default=pe.modelPropertyMacro(Ye[ze])}catch(Mt){var rt=new Error(Mt);return rt.fullPath=ee,rt}return so.replace(ee,Ye)}};var Dd=function(){function T(F){iu(this,T),this.root=$u(F||{})}return Gr(T,[{key:"set",value:function(j,ee){var pe=this.getParent(j,!0);if(pe){var Ye=j[j.length-1],ze=pe.children;ze[Ye]?Pu(ze[Ye],ee,pe):ze[Ye]=$u(ee,pe)}else Pu(this.root,ee,null)}},{key:"get",value:function(j){if((j=j||[]).length<1)return this.root.value;for(var pe,Ye,ee=this.root,ze=0;ze<j.length&&(pe=ee.children)[Ye=j[ze]];ze+=1)ee=pe[Ye];return ee&&ee.protoValue}},{key:"getParent",value:function(j,ee){return!j||j.length<1?null:j.length<2?this.root:$s()(j).call(j,0,-1).reduce(function(pe,Ye){if(!pe)return pe;var ze=pe.children;return!ze[Ye]&&ee&&(ze[Ye]=$u(null,pe)),ze[Ye]},this.root)}}]),T}();function $u(T,F){return Pu({children:{}},T,F)}function Pu(T,F,j){return T.value=F||{},T.protoValue=j?se(se({},j.protoValue),T.value):T.value,jt()(T.children).forEach(function(ee){var pe=T.children[ee];T.children[ee]=Pu(pe,pe.value,T)}),T}var Ac=function(){},ga=function(){function T(F){var ee,pe,j=this;iu(this,T),Ge()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Dd,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Ge()(Object.create(this),so,{getInstance:function(){return j}}),allowMetaPatches:!1},F),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=nt()(ee=xe()(pe=this.plugins).call(pe,this.wrapPlugin.bind(this))).call(ee,so.isFunction),this.patches.push(so.add([],this.spec)),this.patches.push(so.context([],this.context)),this.updatePatches(this.patches)}return Gr(T,[{key:"debug",value:function(j){if(this.debugLevel===j){for(var ee,pe=arguments.length,Ye=new Array(pe>1?pe-1:0),ze=1;ze<pe;ze++)Ye[ze-1]=arguments[ze];(ee=console).log.apply(ee,Ye)}}},{key:"verbose",value:function(j){if("verbose"===this.debugLevel){for(var ee,pe,Ye=arguments.length,ze=new Array(Ye>1?Ye-1:0),rt=1;rt<Ye;rt++)ze[rt-1]=arguments[rt];(ee=console).log.apply(ee,Rt()(pe=["[".concat(j,"]   ")]).call(pe,ze))}}},{key:"wrapPlugin",value:function(j,ee){var ze,St,Mt,pe=this.pathDiscriminator,Ye=null;return j[this.pluginProp]?(Ye=j,ze=j[this.pluginProp]):so.isFunction(j)?ze=j:so.isObject(j)&&(St=j,Mt=function(ai,pi){return!Array.isArray(ai)||ai.every(function(Si,ji){return Si===pi[ji]})},ze=Pt().mark(function ri(ai,pi){var Si,ji,tn,nn,An,rn;return Pt().wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:rn=function(go,kr,Fo){var Ma,Ls,st,Br,Ps,Zs,kc,Lc,Hu,Qu,Ad,Rl,oh;return Pt().wrap(function(Na){for(;;)switch(Na.prev=Na.next){case 0:if(so.isObject(go)){Na.next=6;break}if(St.key!==kr[kr.length-1]){Na.next=4;break}return Na.next=4,St.plugin(go,St.key,kr,pi);case 4:Na.next=30;break;case 6:Ls=kr[Ma=kr.length-1],st=kr.indexOf("properties"),Br="properties"===Ls&&Ma===st,Ps=pi.allowMetaPatches&&ji[go.$$ref],Zs=0,kc=jt()(go);case 12:if(!(Zs<kc.length)){Na.next=30;break}if(Hu=go[Lc=kc[Zs]],Qu=Rt()(kr).call(kr,Lc),Ad=so.isObject(Hu),Rl=go.$$ref,Ps){Na.next=22;break}if(!Ad){Na.next=22;break}return pi.allowMetaPatches&&Rl&&(ji[Rl]=!0),Na.delegateYield(rn(Hu,Qu,Fo),"t0",22);case 22:if(Br||Lc!==St.key){Na.next=27;break}if(oh=Mt(pe,kr),pe&&!oh){Na.next=27;break}return Na.next=27,St.plugin(Hu,Lc,Qu,pi,Fo);case 27:Zs++,Na.next=12;break;case 30:case"end":return Na.stop()}},Si)},Si=Pt().mark(rn),ji={},tn=Se(nt()(ai).call(ai,so.isAdditiveMutation)),Kr.prev=4,tn.s();case 6:if((nn=tn.n()).done){Kr.next=11;break}return Kr.delegateYield(rn((An=nn.value).value,An.path,An),"t0",9);case 9:Kr.next=6;break;case 11:Kr.next=16;break;case 13:Kr.prev=13,Kr.t1=Kr.catch(4),tn.e(Kr.t1);case 16:return Kr.prev=16,tn.f(),Kr.finish(16);case 19:case"end":return Kr.stop()}},ri,null,[[4,13,16,19]])})),Ge()(ze.bind(Ye),{pluginName:j.name||ee,isGenerator:so.isGenerator(ze)})}},{key:"nextPlugin",value:function(){var j,ee=this;return rc()(j=this.wrappedPlugins).call(j,function(pe){return ee.getMutationsForPlugin(pe).length>0})}},{key:"nextPromisedPatch",value:function(){var j;if(this.promisedPatches.length>0)return bs().race(xe()(j=this.promisedPatches).call(j,function(ee){return ee.value}))}},{key:"getPluginHistory",value:function(j){var ee=this.constructor.getPluginName(j);return this.pluginHistory[ee]||[]}},{key:"getPluginRunCount",value:function(j){return this.getPluginHistory(j).length}},{key:"getPluginHistoryTip",value:function(j){var ee=this.getPluginHistory(j);return ee&&ee[ee.length-1]||{}}},{key:"getPluginMutationIndex",value:function(j){var ee=this.getPluginHistoryTip(j).mutationIndex;return"number"!=typeof ee?-1:ee}},{key:"updatePluginHistory",value:function(j,ee){var pe=this.constructor.getPluginName(j);this.pluginHistory[pe]=this.pluginHistory[pe]||[],this.pluginHistory[pe].push(ee)}},{key:"updatePatches",value:function(j){var ee=this;so.normalizeArray(j).forEach(function(pe){if(pe instanceof Error)ee.errors.push(pe);else try{if(!so.isObject(pe))return void ee.debug("updatePatches","Got a non-object patch",pe);if(ee.showDebug&&ee.allPatches.push(pe),so.isPromise(pe.value))return ee.promisedPatches.push(pe),void ee.promisedPatchThen(pe);if(so.isContextPatch(pe))return void ee.setContext(pe.path,pe.value);if(so.isMutation(pe))return void ee.updateMutations(pe)}catch(Ye){console.error(Ye),ee.errors.push(Ye)}})}},{key:"updateMutations",value:function(j){"object"===ue(j.value)&&!Array.isArray(j.value)&&this.allowMetaPatches&&(j.value=se({},j.value));var ee=so.applyPatch(this.state,j,{allowMetaPatches:this.allowMetaPatches});ee&&(this.mutations.push(j),this.state=ee)}},{key:"removePromisedPatch",value:function(j){var ee,pe=this.promisedPatches.indexOf(j);pe<0?this.debug("Tried to remove a promisedPatch that isn't there!"):oc()(ee=this.promisedPatches).call(ee,pe,1)}},{key:"promisedPatchThen",value:function(j){var ee=this;return j.value=j.value.then(function(pe){var Ye=se(se({},j),{},{value:pe});ee.removePromisedPatch(j),ee.updatePatches(Ye)}).catch(function(pe){ee.removePromisedPatch(j),ee.updatePatches(pe)}),j.value}},{key:"getMutations",value:function(j,ee){var pe;return j=j||0,"number"!=typeof ee&&(ee=this.mutations.length),$s()(pe=this.mutations).call(pe,j,ee)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(j){var ee=this.getPluginMutationIndex(j);return this.getMutations(ee+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(j){return so.getIn(this.state,j)}},{key:"_getContext",value:function(j){return this.contextTree.get(j)}},{key:"setContext",value:function(j,ee){return this.contextTree.set(j,ee)}},{key:"_hasRun",value:function(j){return this.getPluginRunCount(this.getCurrentPlugin())>(j||0)}},{key:"dispatch",value:function(){var rt,j=this,ee=this,pe=this.nextPlugin();if(!pe){var Ye=this.nextPromisedPatch();if(Ye)return Ye.then(function(){return j.dispatch()}).catch(function(){return j.dispatch()});var ze={spec:this.state,errors:this.errors};return this.showDebug&&(ze.patches=this.allPatches),bs().resolve(ze)}if(ee.pluginCount=ee.pluginCount||{},ee.pluginCount[pe]=(ee.pluginCount[pe]||0)+1,ee.pluginCount[pe]>100)return bs().resolve({spec:ee.state,errors:Rt()(rt=ee.errors).call(rt,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(pe!==this.currentPlugin&&this.promisedPatches.length){var St,Mt=xe()(St=this.promisedPatches).call(St,function(pi){return pi.value});return bs().all(xe()(Mt).call(Mt,function(pi){return pi.then(Ac,Ac)})).then(function(){return j.dispatch()})}return function(){ee.currentPlugin=pe;var pi=ee.getCurrentMutations(),Si=ee.mutations.length-1;try{if(pe.isGenerator){var tn,ji=Se(pe(pi,ee.getLib()));try{for(ji.s();!(tn=ji.n()).done;)ai(tn.value)}catch(rn){ji.e(rn)}finally{ji.f()}}else ai(pe(pi,ee.getLib()))}catch(rn){console.error(rn),ai([Ge()(Object.create(rn),{plugin:pe})])}finally{ee.updatePluginHistory(pe,{mutationIndex:Si})}return ee.dispatch()}();function ai(pi){pi&&(pi=so.fullyNormalizeArray(pi),ee.updatePatches(pi,pe))}}}],[{key:"getPluginName",value:function(j){return j.pluginName}},{key:"getPatchesOfType",value:function(j,ee){return nt()(j).call(j,ee)}}]),T}(),Gl={refs:ud,allOf:Ku,parameters:hd,properties:Sd},Ju=g(6264),aa=g.n(Ju),Ml=function(F){return String.prototype.toLowerCase.call(F)},cu=function(F){return F.replace(/[^\w]/gi,"_")};function uu(T){var F=T.openapi;return!!F&&Le()(F).call(F,"3")}function du(T,F){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",ee=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},pe=ee.v2OperationIdCompatibilityMode;if(!T||"object"!==ue(T))return null;var Ye=(T.operationId||"").replace(/\s/g,"");return Ye.length?cu(T.operationId):pd(F,j,{v2OperationIdCompatibilityMode:pe})}function pd(T,F){var j,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},pe=ee.v2OperationIdCompatibilityMode;if(pe){var Ye,ze,rt=Rt()(Ye="".concat(F.toLowerCase(),"_")).call(Ye,T).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(rt=rt||Rt()(ze="".concat(T.substring(1),"_")).call(ze,F)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Rt()(j="".concat(Ml(F))).call(j,cu(T))}function Wr(T,F){var j;return Rt()(j="".concat(Ml(F),"-")).call(j,T)}function Ic(T,F,j){if(!T||"object"!==ue(T)||!T.paths||"object"!==ue(T.paths))return null;var ee=T.paths;for(var pe in ee)for(var Ye in ee[pe])if("PARAMETERS"!==Ye.toUpperCase()){var ze=ee[pe][Ye];if(ze&&"object"===ue(ze)){var rt={spec:T,pathName:pe,method:Ye.toUpperCase(),operation:ze},St=F(rt);if(j&&St)return rt}}}function _l(T){var F=T.spec,j=F.paths,ee={};if(!j||F.$$normalized)return T;for(var pe in j){var Ye=j[pe];if(aa()(Ye)){var ze=Ye.parameters,rt=function(ai){var pi=Ye[ai];if(!aa()(pi))return"continue";var Si=du(pi,pe,ai);if(Si){ee[Si]?ee[Si].push(pi):ee[Si]=[pi];var ji=ee[Si];if(ji.length>1)ji.forEach(function(Ls,st){var Br;Ls.__originalOperationId=Ls.__originalOperationId||Ls.operationId,Ls.operationId=Rt()(Br="".concat(Si)).call(Br,st+1)});else if(void 0!==pi.operationId){var tn=ji[0];tn.__originalOperationId=tn.__originalOperationId||pi.operationId,tn.operationId=Si}}if("parameters"!==ai){var nn=[],An={};for(var rn in F)("produces"===rn||"consumes"===rn||"security"===rn)&&(An[rn]=F[rn],nn.push(An));if(ze&&(An.parameters=ze,nn.push(An)),nn.length){var Kr,Or=Se(nn);try{for(Or.s();!(Kr=Or.n()).done;){var cs=Kr.value;for(var go in cs)if(pi[go]){if("parameters"===go){var Fo,kr=Se(cs[go]);try{var Ma=function(){var st=Fo.value;pi[go].some(function(Ps){return Ps.name&&Ps.name===st.name||Ps.$ref&&Ps.$ref===st.$ref||Ps.$$ref&&Ps.$$ref===st.$$ref||Ps===st})||pi[go].push(st)};for(kr.s();!(Fo=kr.n()).done;)Ma()}catch(Ls){kr.e(Ls)}finally{kr.f()}}}else pi[go]=cs[go]}}catch(Ls){Or.e(Ls)}finally{Or.f()}}}};for(var St in Ye)rt(St)}}return F.$$normalized=!0,T}function hu(T){var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=F.requestInterceptor,ee=F.responseInterceptor,pe=T.withCredentials?"include":"same-origin";return function(Ye){return T({url:Ye,loadSpec:!0,requestInterceptor:j,responseInterceptor:ee,headers:{Accept:po},credentials:pe}).then(function(ze){return ze.body})}}function Nu(T){var j=T.spec,pe=T.mode,Ye=T.allowMetaPatches,ze=void 0===Ye||Ye,rt=T.pathDiscriminator,St=T.modelPropertyMacro,Mt=T.parameterMacro,ri=T.requestInterceptor,ai=T.responseInterceptor,pi=T.skipNormalization,Si=T.useCircularStructures,ji=T.http,tn=T.baseDoc;return tn=tn||T.url,ji=T.fetch||ji||ic,j?nn(j):hu(ji,{requestInterceptor:ri,responseInterceptor:ai})(tn).then(nn);function nn(An){tn&&(Gl.refs.docCache[tn]=An),Gl.refs.fetchJSON=hu(ji,{requestInterceptor:ri,responseInterceptor:ai});var rn=[Gl.refs];return"function"==typeof Mt&&rn.push(Gl.parameters),"function"==typeof St&&rn.push(Gl.properties),"strict"!==pe&&rn.push(Gl.allOf),function(T){return new ga(T).dispatch()}({spec:An,context:{baseDoc:tn},plugins:rn,allowMetaPatches:ze,pathDiscriminator:rt,parameterMacro:Mt,modelPropertyMacro:St,useCircularStructures:Si}).then(pi?function(){var Or=lt(Pt().mark(function Kr(cs){return Pt().wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:return kr.abrupt("return",cs);case 1:case"end":return kr.stop()}},Kr)}));return function(Kr){return Or.apply(this,arguments)}}():_l)}}var gd=g(36817),xl=g.n(gd);function Oc(){return Oc=lt(Pt().mark(function T(F,j){var ee,pe,ai,pi,Si,ji,tn=arguments;return Pt().wrap(function(An){for(;;)switch(An.prev=An.next){case 0:return pe=(ee=tn.length>2&&void 0!==tn[2]?tn[2]:{}).returnEntireTree,ai={pathDiscriminator:j,baseDoc:ee.baseDoc,requestInterceptor:ee.requestInterceptor,responseInterceptor:ee.responseInterceptor,parameterMacro:ee.parameterMacro,modelPropertyMacro:ee.modelPropertyMacro,useCircularStructures:ee.useCircularStructures},pi=_l({spec:F}),Si=pi.spec,An.next=6,Nu(se(se({},ai),{},{spec:Si,allowMetaPatches:!0,skipNormalization:!0}));case 6:return ji=An.sent,!pe&&Array.isArray(j)&&j.length&&(ji.spec=xl()(ji.spec,j)||null),An.abrupt("return",ji);case 9:case"end":return An.stop()}},T)})),Oc.apply(this,arguments)}var xd=function(){return null},fu_mapTagOperations=function(T){var F=T.spec,j=T.cb,ee=void 0===j?xd:j,pe=T.defaultTag,Ye=void 0===pe?"default":pe,ze=T.v2OperationIdCompatibilityMode,rt={},St={};return Ic(F,function(Mt){var ri=Mt.pathName,ai=Mt.method,pi=Mt.operation,Si=pi.tags?function(F){return Array.isArray(F)?F:[F]}(pi.tags):[Ye];Si.forEach(function(ji){if("string"==typeof ji){St[ji]=St[ji]||{};var rn,tn=St[ji],nn=du(pi,ri,ai,{v2OperationIdCompatibilityMode:ze}),An=ee({spec:F,pathName:ri,method:ai,operation:pi,operationId:nn});if(rt[nn])rt[nn]+=1,tn[Rt()(rn="".concat(nn)).call(rn,rt[nn])]=An;else if(void 0!==tn[nn]){var Or,Kr,cs=rt[nn]||1;rt[nn]=cs+1,tn[Rt()(Or="".concat(nn)).call(Or,rt[nn])]=An;var go=tn[nn];delete tn[nn],tn[Rt()(Kr="".concat(nn)).call(Kr,cs)]=go}else tn[nn]=An}})}),St},fu_makeExecute=function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(F){var j=F.pathName,ee=F.method,pe=F.operationId;return function(Ye){var ze=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},rt=T.requestInterceptor,St=T.responseInterceptor,Mt=T.userFetch;return T.execute(se({spec:T.spec,requestInterceptor:rt,responseInterceptor:St,userFetch:Mt,pathName:j,method:ee,parameters:Ye,operationId:pe},ze))}}},qc=g(25918);var vo=g(27935),Wl=g.n(vo),md=g(88941);const _d={body:function(T){T.req.body=T.value},header:function(T){var F=T.req,j=T.parameter,ee=T.value;F.headers=F.headers||{},void 0!==ee&&(F.headers[j.name]=ee)},query:function(T){var F=T.req,j=T.value,ee=T.parameter;if(F.query=F.query||{},!1===j&&"boolean"===ee.type&&(j="false"),0===j&&["number","integer"].indexOf(ee.type)>-1&&(j="0"),j)F.query[ee.name]={collectionFormat:ee.collectionFormat,value:j};else if(ee.allowEmptyValue&&void 0!==j){var pe=ee.name;F.query[pe]=F.query[pe]||{},F.query[pe].allowEmptyValue=!0}},path:function(T){var F=T.req,j=T.value;F.url=F.url.split("{".concat(T.parameter.name,"}")).join(encodeURIComponent(j))},formData:function(T){var F=T.req,j=T.value,ee=T.parameter;(j||ee.allowEmptyValue)&&(F.form=F.form||{},F.form[ee.name]={value:j,allowEmptyValue:ee.allowEmptyValue,collectionFormat:ee.collectionFormat})}};function L(T,F){return Di()(F).call(F,"application/json")?"string"==typeof T?T:Je()(T):T.toString()}function Y(T){var F=T.req,j=T.value,ee=T.parameter,pe=ee.name,Ye=ee.style,ze=ee.explode,rt=ee.content;if(rt){var St=jt()(rt)[0];F.url=F.url.split("{".concat(pe,"}")).join(Lo(L(j,St),{escape:!0}))}else{var Mt=Po({key:ee.name,value:j,style:Ye||"simple",explode:ze||!1,escape:!0});F.url=F.url.split("{".concat(pe,"}")).join(Mt)}}function ce(T){var F=T.req,j=T.value,ee=T.parameter;if(F.query=F.query||{},ee.content){var pe=jt()(ee.content)[0];F.query[ee.name]=L(j,pe)}else if(!1===j&&(j="false"),0===j&&(j="0"),j)F.query[ee.name]={value:j,serializationOption:{style:ee.style,explode:ee.explode,allowReserved:ee.allowReserved}};else if(ee.allowEmptyValue&&void 0!==j){var St=ee.name;F.query[St]=F.query[St]||{},F.query[St].allowEmptyValue=!0}}var Ce=["accept","authorization","content-type"];function Ve(T){var F=T.req,j=T.parameter,ee=T.value;if(F.headers=F.headers||{},!(Ce.indexOf(j.name.toLowerCase())>-1)){if(j.content){var pe=jt()(j.content)[0];return void(F.headers[j.name]=L(ee,pe))}void 0!==ee&&(F.headers[j.name]=Po({key:j.name,value:ee,style:j.style||"simple",explode:void 0!==j.explode&&j.explode,escape:!1}))}}function Ke(T){var F=T.req,j=T.parameter,ee=T.value;F.headers=F.headers||{};var pe=ue(ee);if(j.content){var Ye,ze=jt()(j.content)[0];F.headers.Cookie=Rt()(Ye="".concat(j.name,"=")).call(Ye,L(ee,ze))}else if("undefined"!==pe){var rt="object"===pe&&!Array.isArray(ee)&&j.explode?"":"".concat(j.name,"=");F.headers.Cookie=rt+Po({key:j.name,value:ee,escape:!1,style:j.style||"form",explode:void 0!==j.explode&&j.explode})}}var At=g(34686),Xt=g.n(At);var sn=["http","fetch","spec","operationId","pathName","method","parameters","securities"],_n=function(F){return Array.isArray(F)?F:[]},Sn=Ii("OperationNotFoundError",function(F,j,ee){this.originalError=ee,Ge()(this,j||{})}),Jn={buildRequest:br};function br(T){var F,j,ee=T.spec,pe=T.operationId,Ye=T.responseContentType,ze=T.scheme,rt=T.requestInterceptor,St=T.responseInterceptor,Mt=T.contextUrl,ri=T.userFetch,ai=T.server,pi=T.serverVariables,Si=T.http,ji=T.parameters,tn=T.parameterBuilders,nn=uu(ee);tn||(tn=nn?t:_d);var rn={url:"",credentials:Si&&Si.withCredentials?"include":"same-origin",headers:{},cookies:{}};rt&&(rn.requestInterceptor=rt),St&&(rn.responseInterceptor=St),ri&&(rn.userFetch=ri);var Or=function(T,F){return T&&T.paths?function(T,F){return Ic(T,F,!0)||null}(T,function(j){var ee=j.pathName,pe=j.method,Ye=j.operation;if(!Ye||"object"!==ue(Ye))return!1;var ze=Ye.operationId;return[du(Ye,ee,pe),Wr(ee,pe),ze].some(function(Mt){return Mt&&Mt===F})}):null}(ee,pe);if(!Or)throw new Sn("Operation ".concat(pe," not found"));var Kr=Or.operation,cs=void 0===Kr?{}:Kr,go=Or.method,kr=Or.pathName;if(rn.url+=Es({spec:ee,scheme:ze,contextUrl:Mt,server:ai,serverVariables:pi,pathName:kr,method:go}),!pe)return delete rn.cookies,rn;rn.url+=kr,rn.method="".concat(go).toUpperCase(),ji=ji||{};var Fo=ee.paths[kr]||{};Ye&&(rn.headers.accept=Ye);var Ma=function(F){var j={};F.forEach(function(pe){j[pe.in]||(j[pe.in]={}),j[pe.in][pe.name]=pe});var ee=[];return jt()(j).forEach(function(pe){jt()(j[pe]).forEach(function(Ye){ee.push(j[pe][Ye])})}),ee}(Rt()(F=Rt()(j=[]).call(j,_n(cs.parameters))).call(F,_n(Fo.parameters)));Ma.forEach(function(Br){var Zs,kc,Ps=tn[Br.in];if("body"===Br.in&&Br.schema&&Br.schema.properties&&(Zs=ji),void 0===(Zs=Br&&Br.name&&ji[Br.name]))Zs=Br&&Br.name&&ji[Rt()(kc="".concat(Br.in,".")).call(kc,Br.name)];else if(function(F,j){return nt()(j).call(j,function(ee){return ee.name===F})}(Br.name,Ma).length>1){var Lc;console.warn(Rt()(Lc="Parameter '".concat(Br.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(Lc,Br.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==Zs){if(void 0!==Br.default&&void 0===Zs&&(Zs=Br.default),void 0===Zs&&Br.required&&!Br.allowEmptyValue)throw new Error("Required parameter ".concat(Br.name," is not provided"));if(nn&&Br.schema&&"object"===Br.schema.type&&"string"==typeof Zs)try{Zs=JSON.parse(Zs)}catch(Hu){throw new Error("Could not parse object parameter value string as JSON")}Ps&&Ps({req:rn,parameter:Br,value:Zs,operation:cs,spec:ee})}});var Ls=se(se({},T),{},{operation:cs});if((rn=nn?function(T,F){var j=T.operation,ee=T.requestBody,ze=T.attachContentTypeForEmptyPayload,rt=T.requestContentType;F=function(T){var F=T.request,j=T.securities,ee=void 0===j?{}:j,pe=T.operation,Ye=void 0===pe?{}:pe,ze=T.spec,rt=se({},F),St=ee.authorized,Mt=void 0===St?{}:St,ri=Ye.security||ze.security||[],ai=Mt&&!!jt()(Mt).length,pi=xl()(ze,["components","securitySchemes"])||{};return rt.headers=rt.headers||{},rt.query=rt.query||{},jt()(ee).length&&ai&&ri&&(!Array.isArray(Ye.security)||Ye.security.length)?(ri.forEach(function(Si){jt()(Si).forEach(function(ji){var tn=Mt[ji],nn=pi[ji];if(tn){var An=tn.value||tn,rn=nn.type;if(tn)if("apiKey"===rn)"query"===nn.in&&(rt.query[nn.name]=An),"header"===nn.in&&(rt.headers[nn.name]=An),"cookie"===nn.in&&(rt.cookies[nn.name]=An);else if("http"===rn){if(/^basic$/i.test(nn.scheme)){var Or,Kr=An.username||"",cs=An.password||"",go=Xt()(Rt()(Or="".concat(Kr,":")).call(Or,cs));rt.headers.Authorization="Basic ".concat(go)}/^bearer$/i.test(nn.scheme)&&(rt.headers.Authorization="Bearer ".concat(An))}else if("oauth2"===rn||"openIdConnect"===rn){var kr,Fo=tn.token||{},Ls=Fo[nn["x-tokenName"]||"access_token"],st=Fo.token_type;(!st||"bearer"===st.toLowerCase())&&(st="Bearer"),rt.headers.Authorization=Rt()(kr="".concat(st," ")).call(kr,Ls)}}})}),rt):F}({request:F,securities:T.securities,operation:j,spec:T.spec});var St=j.requestBody||{},Mt=jt()(St.content||{}),ri=rt&&Mt.indexOf(rt)>-1;if(ee||ze){if(rt&&ri)F.headers["Content-Type"]=rt;else if(!rt){var ai=Mt[0];ai&&(F.headers["Content-Type"]=ai,rt=ai)}}else rt&&ri&&(F.headers["Content-Type"]=rt);if(!T.responseContentType&&j.responses){var pi,Si=nt()(pi=tt()(j.responses)).call(pi,function(tn){var nn=ke(tn,2),rn=nn[1],Or=parseInt(nn[0],10);return Or>=200&&Or<300&&Wl()(rn.content)}).reduce(function(tn,nn){var rn=ke(nn,2)[1];return Rt()(tn).call(tn,jt()(rn.content))},[]);Si.length>0&&(F.headers.accept=Si.join(", "))}if(ee)if(rt){if(Mt.indexOf(rt)>-1)if("application/x-www-form-urlencoded"===rt||"multipart/form-data"===rt)if("object"===ue(ee)){var ji=(St.content[rt]||{}).encoding||{};F.form={},jt()(ee).forEach(function(tn){F.form[tn]={value:ee[tn],encoding:ji[tn]||{}}})}else F.form=ee;else F.body=ee}else F.body=ee;return F}(Ls,rn):function(T,F){var St,Mt,j=T.spec,ee=T.operation,Ye=T.requestContentType,ze=T.responseContentType,rt=T.attachContentTypeForEmptyPayload;if(F=function(T){var F=T.request,j=T.securities,ee=void 0===j?{}:j,pe=T.operation,Ye=void 0===pe?{}:pe,ze=T.spec,rt=se({},F),St=ee.authorized,Mt=void 0===St?{}:St,ri=ee.specSecurity,pi=Ye.security||(void 0===ri?[]:ri),Si=Mt&&!!jt()(Mt).length,ji=ze.securityDefinitions;return rt.headers=rt.headers||{},rt.query=rt.query||{},jt()(ee).length&&Si&&pi&&(!Array.isArray(Ye.security)||Ye.security.length)?(pi.forEach(function(tn){jt()(tn).forEach(function(nn){var An=Mt[nn];if(An){var rn=An.token,Or=An.value||An,Kr=ji[nn],cs=Kr.type,kr=rn&&rn[Kr["x-tokenName"]||"access_token"],Fo=rn&&rn.token_type;if(An)if("apiKey"===cs){var Ma="query"===Kr.in?"query":"headers";rt[Ma]=rt[Ma]||{},rt[Ma][Kr.name]=Or}else if("basic"===cs)if(Or.header)rt.headers.authorization=Or.header;else{var Ls,st=Or.username||"",Br=Or.password||"";Or.base64=Xt()(Rt()(Ls="".concat(st,":")).call(Ls,Br)),rt.headers.authorization="Basic ".concat(Or.base64)}else if("oauth2"===cs&&kr){var Ps;Fo=Fo&&"bearer"!==Fo.toLowerCase()?Fo:"Bearer",rt.headers.authorization=Rt()(Ps="".concat(Fo," ")).call(Ps,kr)}}})}),rt):F}({request:F,securities:T.securities,operation:ee,spec:j}),F.body||F.form||rt)if(Ye)F.headers["Content-Type"]=Ye;else if(Array.isArray(ee.consumes)){var ri=ke(ee.consumes,1);F.headers["Content-Type"]=ri[0]}else if(Array.isArray(j.consumes)){var ai=ke(j.consumes,1);F.headers["Content-Type"]=ai[0]}else ee.parameters&&nt()(St=ee.parameters).call(St,function(nn){return"file"===nn.type}).length?F.headers["Content-Type"]="multipart/form-data":ee.parameters&&nt()(Mt=ee.parameters).call(Mt,function(nn){return"formData"===nn.in}).length&&(F.headers["Content-Type"]="application/x-www-form-urlencoded");else if(Ye){var pi,Si,ji=ee.parameters&&nt()(pi=ee.parameters).call(pi,function(nn){return"body"===nn.in}).length>0,tn=ee.parameters&&nt()(Si=ee.parameters).call(Si,function(nn){return"formData"===nn.in}).length>0;(ji||tn)&&(F.headers["Content-Type"]=Ye)}return!ze&&Array.isArray(ee.produces)&&ee.produces.length>0&&(F.headers.accept=ee.produces.join(", ")),F}(Ls,rn)).cookies&&jt()(rn.cookies).length){var st=jt()(rn.cookies).reduce(function(Br,Ps){return Br+(Br?"&":"")+md.serialize(Ps,rn.cookies[Ps])},"");rn.headers.Cookie=st}return rn.cookies&&delete rn.cookies,Wa(rn),rn}var fo=function(F){return F?F.replace(/\W/g,""):null};function Es(T){return uu(T.spec)?function(T){var F=T.spec,j=T.pathName,ee=T.method,pe=T.server,Ye=T.contextUrl,ze=T.serverVariables,rt=void 0===ze?{}:ze,St=xl()(F,["paths",j,(ee||"").toLowerCase(),"servers"])||xl()(F,["paths",j,"servers"])||xl()(F,["servers"]),Mt="",ri=null;if(pe&&St&&St.length){var ai=xe()(St).call(St,function(ji){return ji.url});ai.indexOf(pe)>-1&&(Mt=pe,ri=St[ai.indexOf(pe)])}if(!Mt&&St&&St.length){Mt=St[0].url;var pi=ke(St,1);ri=pi[0]}if(Mt.indexOf("{")>-1){var Si=function(T){for(var ee,F=[],j=/{([^}]+)}/g;ee=j.exec(T);)F.push(ee[1]);return F}(Mt);Si.forEach(function(ji){if(ri.variables&&ri.variables[ji]){var nn=rt[ji]||ri.variables[ji].default,An=new RegExp("{".concat(ji,"}"),"g");Mt=Mt.replace(An,nn)}})}return function(){var rt,St,T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",j=We.parse(T&&F?We.resolve(F,T):T),ee=We.parse(F),pe=fo(j.protocol)||fo(ee.protocol)||"",Ye=j.host||ee.host,ze=j.pathname||"";return"/"===(rt=pe&&Ye?Rt()(St="".concat(pe,"://")).call(St,Ye+ze):ze)[rt.length-1]?$s()(rt).call(rt,0,-1):rt}(Mt,Ye)}(T):function(T){var ri,ai,F=T.spec,j=T.scheme,ee=T.contextUrl,Ye=We.parse(void 0===ee?"":ee),ze=Array.isArray(F.schemes)?F.schemes[0]:null,rt=j||ze||fo(Ye.protocol)||"http",St=F.host||Ye.host||"",Mt=F.basePath||"";return"/"===(ri=rt&&St?Rt()(ai="".concat(rt,"://")).call(ai,St+Mt):Mt)[ri.length-1]?$s()(ri).call(ri,0,-1):ri}(T)}function Xr(T){var F=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof T?j.url=T:j=T,!(this instanceof Xr))return new Xr(j);Ge()(this,j);var ee=this.resolve().then(function(){return F.disableInterfaces||Ge()(F,Xr.makeApisTagOperation(F)),F});return ee.client=this,ee}Xr.makeHttp=function(T,F,j){return j=j||function(ee){return ee},F=F||function(ee){return ee},function(ee){return"string"==typeof ee&&(ee={url:ee}),wu.mergeInQueryOrForm(ee),ee=F(ee),j(T(ee))}}.bind(null,Xr.http=ic),Xr.resolve=Nu,Xr.resolveSubtree=function(T,F){return Oc.apply(this,arguments)},Xr.execute=function(T){var F=T.http,j=T.fetch,ee=T.spec,pe=T.operationId,Ye=T.pathName,ze=T.method,rt=T.parameters,St=T.securities,Mt=function(T,F){if(null==T)return{};var ee,pe,j=function(T,F){if(null==T)return{};var pe,Ye,j={},ee=e(T);for(Ye=0;Ye<ee.length;Ye++)pe=ee[Ye],!(qc(F).call(F,pe)>=0)&&(j[pe]=T[pe]);return j}(T,F);if(n){var Ye=n(T);for(pe=0;pe<Ye.length;pe++)ee=Ye[pe],!(qc(F).call(F,ee)>=0)&&(!Object.prototype.propertyIsEnumerable.call(T,ee)||(j[ee]=T[ee]))}return j}(T,sn),ri=F||j||ic;Ye&&ze&&!pe&&(pe=Wr(Ye,ze));var ai=Jn.buildRequest(se({spec:ee,operationId:pe,parameters:rt,securities:St,http:ri},Mt));return ai.body&&(Wl()(ai.body)||Array.isArray(ai.body))&&(ai.body=Je()(ai.body)),ri(ai)},Xr.serializeRes=ad,Xr.serializeHeaders=tu,Xr.clearCache=function(){Gl.refs.clearCache()},Xr.makeApisTagOperation=function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},F=fu_makeExecute(T);return{apis:fu_mapTagOperations({v2OperationIdCompatibilityMode:T.v2OperationIdCompatibilityMode,spec:T.spec,cb:F})}},Xr.buildRequest=br,Xr.helpers={opId:du},Xr.getBaseUrl=Es,(Xr.prototype={http:ic,execute:function(F){return this.applyDefaults(),Xr.execute(se({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},F))},resolve:function(){var F=this,j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xr.resolve(se({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},j)).then(function(ee){return F.originalSpec=F.spec,F.spec=ee.spec,F.errors=ee.errors,F})}}).applyDefaults=function(){var F=this.spec,j=this.url;if(j&&Le()(j).call(j,"http")){var ee=We.parse(j);F.host||(F.host=ee.host),F.schemes||(F.schemes=[ee.protocol.replace(":","")]),F.basePath||(F.basePath="/")}};var ks=Xr.helpers;const ls=Xr},31365:V=>{"use strict";var Z=String.prototype.replace,g=/%20/g;V.exports={default:"RFC3986",formatters:{RFC1738:function(m){return Z.call(m,g,"+")},RFC3986:function(m){return String(m)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},7029:(V,Z,g)=>{"use strict";var E=g(21333),m=g(62127),t=g(31365);V.exports={formats:t,parse:m,stringify:E}},62127:(V,Z,g)=>{"use strict";var E=g(7260),m=Object.prototype.hasOwnProperty,t=Array.isArray,e={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:E.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(be,se){return be&&"string"==typeof be&&se.comma&&be.indexOf(",")>-1?be.split(","):be},z=function(se,Ie,Ge,_e){if(se){var Le=Ge.allowDots?se.replace(/\.([^.[]+)/g,"[$1]"):se,$e=/(\[[^[\]]*])/g,Te=Ge.depth>0&&/(\[[^[\]]*])/.exec(Le),ye=Te?Le.slice(0,Te.index):Le,ne=[];if(ye){if(!Ge.plainObjects&&m.call(Object.prototype,ye)&&!Ge.allowPrototypes)return;ne.push(ye)}for(var ge=0;Ge.depth>0&&null!==(Te=$e.exec(Le))&&ge<Ge.depth;){if(ge+=1,!Ge.plainObjects&&m.call(Object.prototype,Te[1].slice(1,-1))&&!Ge.allowPrototypes)return;ne.push(Te[1])}return Te&&ne.push("["+Le.slice(Te.index)+"]"),function(be,se,Ie,Ge){for(var _e=Ge?se:a(se,Ie),Le=be.length-1;Le>=0;--Le){var We,$e=be[Le];if("[]"===$e&&Ie.parseArrays)We=[].concat(_e);else{We=Ie.plainObjects?Object.create(null):{};var Te="["===$e.charAt(0)&&"]"===$e.charAt($e.length-1)?$e.slice(1,-1):$e,ye=parseInt(Te,10);Ie.parseArrays||""!==Te?!isNaN(ye)&&$e!==Te&&String(ye)===Te&&ye>=0&&Ie.parseArrays&&ye<=Ie.arrayLimit?(We=[])[ye]=_e:We[Te]=_e:We={0:_e}}_e=We}return _e}(ne,Ie,Ge,_e)}};V.exports=function(be,se){var Ie=function(se){if(!se)return e;if(null!=se.decoder&&"function"!=typeof se.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==se.charset&&"utf-8"!==se.charset&&"iso-8859-1"!==se.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===se.allowDots?e.allowDots:!!se.allowDots,allowPrototypes:"boolean"==typeof se.allowPrototypes?se.allowPrototypes:e.allowPrototypes,allowSparse:"boolean"==typeof se.allowSparse?se.allowSparse:e.allowSparse,arrayLimit:"number"==typeof se.arrayLimit?se.arrayLimit:e.arrayLimit,charset:void 0===se.charset?e.charset:se.charset,charsetSentinel:"boolean"==typeof se.charsetSentinel?se.charsetSentinel:e.charsetSentinel,comma:"boolean"==typeof se.comma?se.comma:e.comma,decoder:"function"==typeof se.decoder?se.decoder:e.decoder,delimiter:"string"==typeof se.delimiter||E.isRegExp(se.delimiter)?se.delimiter:e.delimiter,depth:"number"==typeof se.depth||!1===se.depth?+se.depth:e.depth,ignoreQueryPrefix:!0===se.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof se.interpretNumericEntities?se.interpretNumericEntities:e.interpretNumericEntities,parameterLimit:"number"==typeof se.parameterLimit?se.parameterLimit:e.parameterLimit,parseArrays:!1!==se.parseArrays,plainObjects:"boolean"==typeof se.plainObjects?se.plainObjects:e.plainObjects,strictNullHandling:"boolean"==typeof se.strictNullHandling?se.strictNullHandling:e.strictNullHandling}}(se);if(""===be||null==be)return Ie.plainObjects?Object.create(null):{};for(var Ge="string"==typeof be?function(se,Ie){var Te,Ge={},We=(Ie.ignoreQueryPrefix?se.replace(/^\?/,""):se).split(Ie.delimiter,Ie.parameterLimit===1/0?void 0:Ie.parameterLimit),$e=-1,ye=Ie.charset;if(Ie.charsetSentinel)for(Te=0;Te<We.length;++Te)0===We[Te].indexOf("utf8=")&&("utf8=%E2%9C%93"===We[Te]?ye="utf-8":"utf8=%26%2310003%3B"===We[Te]&&(ye="iso-8859-1"),$e=Te,Te=We.length);for(Te=0;Te<We.length;++Te)if(Te!==$e){var He,Se,ne=We[Te],ge=ne.indexOf("]="),ae=-1===ge?ne.indexOf("="):ge+1;-1===ae?(He=Ie.decoder(ne,e.decoder,ye,"key"),Se=Ie.strictNullHandling?null:""):(He=Ie.decoder(ne.slice(0,ae),e.decoder,ye,"key"),Se=E.maybeMap(a(ne.slice(ae+1),Ie),function(Ee){return Ie.decoder(Ee,e.decoder,ye,"value")})),Se&&Ie.interpretNumericEntities&&"iso-8859-1"===ye&&(Se=Se.replace(/&#(\d+);/g,function(se,Ie){return String.fromCharCode(parseInt(Ie,10))})),ne.indexOf("[]=")>-1&&(Se=t(Se)?[Se]:Se),Ge[He]=m.call(Ge,He)?E.combine(Ge[He],Se):Se}return Ge}(be,Ie):be,_e=Ie.plainObjects?Object.create(null):{},Le=Object.keys(Ge),We=0;We<Le.length;++We){var $e=Le[We],Te=z($e,Ge[$e],Ie,"string"==typeof be);_e=E.merge(_e,Te,Ie)}return!0===Ie.allowSparse?_e:E.compact(_e)}},21333:(V,Z,g)=>{"use strict";var E=g(83030),m=g(7260),t=g(31365),e=Object.prototype.hasOwnProperty,n={brackets:function(Le){return Le+"[]"},comma:"comma",indices:function(Le,We){return Le+"["+We+"]"},repeat:function(Le){return Le}},a=Array.isArray,d=String.prototype.split,C=Array.prototype.push,D=function(_e,Le){C.apply(_e,a(Le)?Le:[Le])},B=Date.prototype.toISOString,z=t.default,oe={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:m.encode,encodeValuesOnly:!1,format:z,formatter:t.formatters[z],indices:!1,serializeDate:function(Le){return B.call(Le)},skipNulls:!1,strictNullHandling:!1},se={},Ie=function _e(Le,We,$e,Te,ye,ne,ge,ae,He,Se,Ee,ue,ie,ht,Oe){for(var ke=Le,dt=Oe,vt=0,lt=!1;void 0!==(dt=dt.get(se))&&!lt;){var Bt=dt.get(Le);if(vt+=1,void 0!==Bt){if(Bt===vt)throw new RangeError("Cyclic object value");lt=!0}void 0===dt.get(se)&&(vt=0)}if("function"==typeof ge?ke=ge(We,ke):ke instanceof Date?ke=Se(ke):"comma"===$e&&a(ke)&&(ke=m.maybeMap(ke,function(jt){return jt instanceof Date?Se(jt):jt})),null===ke){if(Te)return ne&&!ie?ne(We,oe.encoder,ht,"key",Ee):We;ke=""}if(function(Le){return"string"==typeof Le||"number"==typeof Le||"boolean"==typeof Le||"symbol"==typeof Le||"bigint"==typeof Le}(ke)||m.isBuffer(ke)){if(ne){var Pt=ie?We:ne(We,oe.encoder,ht,"key",Ee);if("comma"===$e&&ie){for(var Zt=d.call(String(ke),","),Di="",ii=0;ii<Zt.length;++ii)Di+=(0===ii?"":",")+ue(ne(Zt[ii],oe.encoder,ht,"value",Ee));return[ue(Pt)+"="+Di]}return[ue(Pt)+"="+ue(ne(ke,oe.encoder,ht,"value",Ee))]}return[ue(We)+"="+ue(String(ke))]}var gi,Ct=[];if(void 0===ke)return Ct;if("comma"===$e&&a(ke))gi=[{value:ke.length>0?ke.join(",")||null:void 0}];else if(a(ge))gi=ge;else{var Be=Object.keys(ke);gi=ae?Be.sort(ae):Be}for(var Tt=0;Tt<gi.length;++Tt){var Je=gi[Tt],_t="object"==typeof Je&&void 0!==Je.value?Je.value:ke[Je];if(!ye||null!==_t){var xe=a(ke)?"function"==typeof $e?$e(We,Je):We:We+(He?"."+Je:"["+Je+"]");Oe.set(Le,vt);var pt=E();pt.set(se,Oe),D(Ct,_e(_t,xe,$e,Te,ye,ne,ge,ae,He,Se,Ee,ue,ie,ht,pt))}}return Ct};V.exports=function(_e,Le){var Te,We=_e,$e=function(Le){if(!Le)return oe;if(null!=Le.encoder&&"function"!=typeof Le.encoder)throw new TypeError("Encoder has to be a function.");var We=Le.charset||oe.charset;if(void 0!==Le.charset&&"utf-8"!==Le.charset&&"iso-8859-1"!==Le.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var $e=t.default;if(void 0!==Le.format){if(!e.call(t.formatters,Le.format))throw new TypeError("Unknown format option provided.");$e=Le.format}var Te=t.formatters[$e],ye=oe.filter;return("function"==typeof Le.filter||a(Le.filter))&&(ye=Le.filter),{addQueryPrefix:"boolean"==typeof Le.addQueryPrefix?Le.addQueryPrefix:oe.addQueryPrefix,allowDots:void 0===Le.allowDots?oe.allowDots:!!Le.allowDots,charset:We,charsetSentinel:"boolean"==typeof Le.charsetSentinel?Le.charsetSentinel:oe.charsetSentinel,delimiter:void 0===Le.delimiter?oe.delimiter:Le.delimiter,encode:"boolean"==typeof Le.encode?Le.encode:oe.encode,encoder:"function"==typeof Le.encoder?Le.encoder:oe.encoder,encodeValuesOnly:"boolean"==typeof Le.encodeValuesOnly?Le.encodeValuesOnly:oe.encodeValuesOnly,filter:ye,format:$e,formatter:Te,serializeDate:"function"==typeof Le.serializeDate?Le.serializeDate:oe.serializeDate,skipNulls:"boolean"==typeof Le.skipNulls?Le.skipNulls:oe.skipNulls,sort:"function"==typeof Le.sort?Le.sort:null,strictNullHandling:"boolean"==typeof Le.strictNullHandling?Le.strictNullHandling:oe.strictNullHandling}}(Le);"function"==typeof $e.filter?We=(0,$e.filter)("",We):a($e.filter)&&(Te=$e.filter);var ne=[];if("object"!=typeof We||null===We)return"";var ae=n[Le&&Le.arrayFormat in n?Le.arrayFormat:Le&&"indices"in Le?Le.indices?"indices":"repeat":"indices"];Te||(Te=Object.keys(We)),$e.sort&&Te.sort($e.sort);for(var He=E(),Se=0;Se<Te.length;++Se){var Ee=Te[Se];$e.skipNulls&&null===We[Ee]||D(ne,Ie(We[Ee],Ee,ae,$e.strictNullHandling,$e.skipNulls,$e.encode?$e.encoder:null,$e.filter,$e.sort,$e.allowDots,$e.serializeDate,$e.format,$e.formatter,$e.encodeValuesOnly,$e.charset,He))}var ue=ne.join($e.delimiter),ie=!0===$e.addQueryPrefix?"?":"";return $e.charsetSentinel&&(ie+="iso-8859-1"===$e.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),ue.length>0?ie+ue:""}},7260:(V,Z,g)=>{"use strict";var E=g(31365),m=Object.prototype.hasOwnProperty,t=Array.isArray,e=function(){for(var Ge=[],_e=0;_e<256;++_e)Ge.push("%"+((_e<16?"0":"")+_e.toString(16)).toUpperCase());return Ge}(),a=function(_e,Le){for(var We=Le&&Le.plainObjects?Object.create(null):{},$e=0;$e<_e.length;++$e)void 0!==_e[$e]&&(We[$e]=_e[$e]);return We};V.exports={arrayToObject:a,assign:function(_e,Le){return Object.keys(Le).reduce(function(We,$e){return We[$e]=Le[$e],We},_e)},combine:function(_e,Le){return[].concat(_e,Le)},compact:function(_e){for(var Le=[{obj:{o:_e},prop:"o"}],We=[],$e=0;$e<Le.length;++$e)for(var Te=Le[$e],ye=Te.obj[Te.prop],ne=Object.keys(ye),ge=0;ge<ne.length;++ge){var ae=ne[ge],He=ye[ae];"object"==typeof He&&null!==He&&-1===We.indexOf(He)&&(Le.push({obj:ye,prop:ae}),We.push(He))}return function(_e){for(;_e.length>1;){var Le=_e.pop(),We=Le.obj[Le.prop];if(t(We)){for(var $e=[],Te=0;Te<We.length;++Te)void 0!==We[Te]&&$e.push(We[Te]);Le.obj[Le.prop]=$e}}}(Le),_e},decode:function(Ge,_e,Le){var We=Ge.replace(/\+/g," ");if("iso-8859-1"===Le)return We.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(We)}catch($e){return We}},encode:function(_e,Le,We,$e,Te){if(0===_e.length)return _e;var ye=_e;if("symbol"==typeof _e?ye=Symbol.prototype.toString.call(_e):"string"!=typeof _e&&(ye=String(_e)),"iso-8859-1"===We)return escape(ye).replace(/%u[0-9a-f]{4}/gi,function(He){return"%26%23"+parseInt(He.slice(2),16)+"%3B"});for(var ne="",ge=0;ge<ye.length;++ge){var ae=ye.charCodeAt(ge);45===ae||46===ae||95===ae||126===ae||ae>=48&&ae<=57||ae>=65&&ae<=90||ae>=97&&ae<=122||Te===E.RFC1738&&(40===ae||41===ae)?ne+=ye.charAt(ge):ae<128?ne+=e[ae]:ae<2048?ne+=e[192|ae>>6]+e[128|63&ae]:ae<55296||ae>=57344?ne+=e[224|ae>>12]+e[128|ae>>6&63]+e[128|63&ae]:(ae=65536+((1023&ae)<<10|1023&ye.charCodeAt(ge+=1)),ne+=e[240|ae>>18]+e[128|ae>>12&63]+e[128|ae>>6&63]+e[128|63&ae])}return ne},isBuffer:function(_e){return!(!_e||"object"!=typeof _e||!(_e.constructor&&_e.constructor.isBuffer&&_e.constructor.isBuffer(_e)))},isRegExp:function(_e){return"[object RegExp]"===Object.prototype.toString.call(_e)},maybeMap:function(_e,Le){if(t(_e)){for(var We=[],$e=0;$e<_e.length;$e+=1)We.push(Le(_e[$e]));return We}return Le(_e)},merge:function Ge(_e,Le,We){if(!Le)return _e;if("object"!=typeof Le){if(t(_e))_e.push(Le);else{if(!_e||"object"!=typeof _e)return[_e,Le];(We&&(We.plainObjects||We.allowPrototypes)||!m.call(Object.prototype,Le))&&(_e[Le]=!0)}return _e}if(!_e||"object"!=typeof _e)return[_e].concat(Le);var $e=_e;return t(_e)&&!t(Le)&&($e=a(_e,We)),t(_e)&&t(Le)?(Le.forEach(function(Te,ye){if(m.call(_e,ye)){var ne=_e[ye];ne&&"object"==typeof ne&&Te&&"object"==typeof Te?_e[ye]=Ge(ne,Te,We):_e.push(Te)}else _e[ye]=Te}),_e):Object.keys(Le).reduce(function(Te,ye){var ne=Le[ye];return Te[ye]=m.call(Te,ye)?Ge(Te[ye],ne,We):ne,Te},$e)}}},3394:V=>{var Z=V.exports=function(se){return new g(se)};function g(se){this.value=se}function E(se,Ie,Ge){var _e=[],Le=[],We=!0;return function $e(Te){var ye=Ge?m(Te):Te,ne={},ge=!0,ae={node:ye,node_:Te,path:[].concat(_e),parent:Le[Le.length-1],parents:Le,key:_e.slice(-1)[0],isRoot:0===_e.length,level:_e.length,circular:null,update:function(Ee,ue){ae.isRoot||(ae.parent.node[ae.key]=Ee),ae.node=Ee,ue&&(ge=!1)},delete:function(Ee){delete ae.parent.node[ae.key],Ee&&(ge=!1)},remove:function(Ee){z(ae.parent.node)?ae.parent.node.splice(ae.key,1):delete ae.parent.node[ae.key],Ee&&(ge=!1)},keys:null,before:function(Ee){ne.before=Ee},after:function(Ee){ne.after=Ee},pre:function(Ee){ne.pre=Ee},post:function(Ee){ne.post=Ee},stop:function(){We=!1},block:function(){ge=!1}};if(!We)return ae;function He(){if("object"==typeof ae.node&&null!==ae.node){(!ae.keys||ae.node_!==ae.node)&&(ae.keys=t(ae.node)),ae.isLeaf=0==ae.keys.length;for(var Ee=0;Ee<Le.length;Ee++)if(Le[Ee].node_===Te){ae.circular=Le[Ee];break}}else ae.isLeaf=!0,ae.keys=null;ae.notLeaf=!ae.isLeaf,ae.notRoot=!ae.isRoot}He();var Se=Ie.call(ae,ae.node);return void 0!==Se&&ae.update&&ae.update(Se),ne.before&&ne.before.call(ae,ae.node),ge&&("object"==typeof ae.node&&null!==ae.node&&!ae.circular&&(Le.push(ae),He(),oe(ae.keys,function(Ee,ue){_e.push(Ee),ne.pre&&ne.pre.call(ae,ae.node[Ee],Ee);var ie=$e(ae.node[Ee]);Ge&&be.call(ae.node,Ee)&&(ae.node[Ee]=ie.node),ie.isLast=ue==ae.keys.length-1,ie.isFirst=0==ue,ne.post&&ne.post.call(ae,ie),_e.pop()}),Le.pop()),ne.after&&ne.after.call(ae,ae.node)),ae}(se).node}function m(se){if("object"==typeof se&&null!==se){var Ie;if(z(se))Ie=[];else if(function(se){return"[object Date]"===e(se)}(se))Ie=new Date(se.getTime?se.getTime():se);else if(function(se){return"[object RegExp]"===e(se)}(se))Ie=new RegExp(se);else if(function(se){return"[object Error]"===e(se)}(se))Ie={message:se.message};else if(function(se){return"[object Boolean]"===e(se)}(se))Ie=new Boolean(se);else if(function(se){return"[object Number]"===e(se)}(se))Ie=new Number(se);else if(function(se){return"[object String]"===e(se)}(se))Ie=new String(se);else if(Object.create&&Object.getPrototypeOf)Ie=Object.create(Object.getPrototypeOf(se));else if(se.constructor===Object)Ie={};else{var _e=function(){};_e.prototype=se.constructor&&se.constructor.prototype||se.__proto__||{},Ie=new _e}return oe(t(se),function(Le){Ie[Le]=se[Le]}),Ie}return se}g.prototype.get=function(se){for(var Ie=this.value,Ge=0;Ge<se.length;Ge++){var _e=se[Ge];if(!Ie||!be.call(Ie,_e)){Ie=void 0;break}Ie=Ie[_e]}return Ie},g.prototype.has=function(se){for(var Ie=this.value,Ge=0;Ge<se.length;Ge++){var _e=se[Ge];if(!Ie||!be.call(Ie,_e))return!1;Ie=Ie[_e]}return!0},g.prototype.set=function(se,Ie){for(var Ge=this.value,_e=0;_e<se.length-1;_e++){var Le=se[_e];be.call(Ge,Le)||(Ge[Le]={}),Ge=Ge[Le]}return Ge[se[_e]]=Ie,Ie},g.prototype.map=function(se){return E(this.value,se,!0)},g.prototype.forEach=function(se){return this.value=E(this.value,se,!1),this.value},g.prototype.reduce=function(se,Ie){var Ge=1===arguments.length,_e=Ge?this.value:Ie;return this.forEach(function(Le){(!this.isRoot||!Ge)&&(_e=se.call(this,_e,Le))}),_e},g.prototype.paths=function(){var se=[];return this.forEach(function(Ie){se.push(this.path)}),se},g.prototype.nodes=function(){var se=[];return this.forEach(function(Ie){se.push(this.node)}),se},g.prototype.clone=function(){var se=[],Ie=[];return function Ge(_e){for(var Le=0;Le<se.length;Le++)if(se[Le]===_e)return Ie[Le];if("object"==typeof _e&&null!==_e){var We=m(_e);return se.push(_e),Ie.push(We),oe(t(_e),function($e){We[$e]=Ge(_e[$e])}),se.pop(),Ie.pop(),We}return _e}(this.value)};var t=Object.keys||function(Ie){var Ge=[];for(var _e in Ie)Ge.push(_e);return Ge};function e(se){return Object.prototype.toString.call(se)}var z=Array.isArray||function(Ie){return"[object Array]"===Object.prototype.toString.call(Ie)},oe=function(se,Ie){if(se.forEach)return se.forEach(Ie);for(var Ge=0;Ge<se.length;Ge++)Ie(se[Ge],Ge,se)};oe(t(g.prototype),function(se){Z[se]=function(Ie){var Ge=[].slice.call(arguments,1),_e=new g(Ie);return _e[se].apply(_e,Ge)}});var be=Object.hasOwnProperty||function(se,Ie){return Ie in se}},86370:function(V,Z,g){var E;V=g.nmd(V),function(m){"object"==typeof global&&global;var a,d=2147483647,C=36,Ge=/^xn--/,_e=/[^\x20-\x7E]/,Le=/[\x2E\u3002\uFF0E\uFF61]/g,We={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Te=Math.floor,ye=String.fromCharCode;function ge(lt){throw RangeError(We[lt])}function ae(lt,Bt){for(var Pt=lt.length,Zt=[];Pt--;)Zt[Pt]=Bt(lt[Pt]);return Zt}function He(lt,Bt){var Pt=lt.split("@"),Zt="";return Pt.length>1&&(Zt=Pt[0]+"@",lt=Pt[1]),Zt+ae((lt=lt.replace(Le,".")).split("."),Bt).join(".")}function Se(lt){for(var Di,ii,Bt=[],Pt=0,Zt=lt.length;Pt<Zt;)(Di=lt.charCodeAt(Pt++))>=55296&&Di<=56319&&Pt<Zt?56320==(64512&(ii=lt.charCodeAt(Pt++)))?Bt.push(((1023&Di)<<10)+(1023&ii)+65536):(Bt.push(Di),Pt--):Bt.push(Di);return Bt}function Ee(lt){return ae(lt,function(Bt){var Pt="";return Bt>65535&&(Pt+=ye((Bt-=65536)>>>10&1023|55296),Bt=56320|1023&Bt),Pt+ye(Bt)}).join("")}function ue(lt){return lt-48<10?lt-22:lt-65<26?lt-65:lt-97<26?lt-97:C}function ie(lt,Bt){return lt+22+75*(lt<26)-((0!=Bt)<<5)}function ht(lt,Bt,Pt){var Zt=0;for(lt=Pt?Te(lt/700):lt>>1,lt+=Te(lt/Bt);lt>455;Zt+=C)lt=Te(lt/35);return Te(Zt+36*lt/(lt+38))}function Oe(lt){var Zt,gi,Be,Tt,Je,_t,xe,pt,jt,di,Bt=[],Pt=lt.length,Di=0,ii=128,Ct=72;for((gi=lt.lastIndexOf("-"))<0&&(gi=0),Be=0;Be<gi;++Be)lt.charCodeAt(Be)>=128&&ge("not-basic"),Bt.push(lt.charCodeAt(Be));for(Tt=gi>0?gi+1:0;Tt<Pt;){for(Je=Di,_t=1,xe=C;Tt>=Pt&&ge("invalid-input"),((pt=ue(lt.charCodeAt(Tt++)))>=C||pt>Te((d-Di)/_t))&&ge("overflow"),Di+=pt*_t,!(pt<(jt=xe<=Ct?1:xe>=Ct+26?26:xe-Ct));xe+=C)_t>Te(d/(di=C-jt))&&ge("overflow"),_t*=di;Ct=ht(Di-Je,Zt=Bt.length+1,0==Je),Te(Di/Zt)>d-ii&&ge("overflow"),ii+=Te(Di/Zt),Di%=Zt,Bt.splice(Di++,0,ii)}return Ee(Bt)}function ke(lt){var Bt,Pt,Zt,Di,ii,Ct,gi,Be,Tt,Je,_t,pt,jt,di,Rt,xe=[];for(pt=(lt=Se(lt)).length,Bt=128,Pt=0,ii=72,Ct=0;Ct<pt;++Ct)(_t=lt[Ct])<128&&xe.push(ye(_t));for(Zt=Di=xe.length,Di&&xe.push("-");Zt<pt;){for(gi=d,Ct=0;Ct<pt;++Ct)(_t=lt[Ct])>=Bt&&_t<gi&&(gi=_t);for(gi-Bt>Te((d-Pt)/(jt=Zt+1))&&ge("overflow"),Pt+=(gi-Bt)*jt,Bt=gi,Ct=0;Ct<pt;++Ct)if((_t=lt[Ct])<Bt&&++Pt>d&&ge("overflow"),_t==Bt){for(Be=Pt,Tt=C;!(Be<(Je=Tt<=ii?1:Tt>=ii+26?26:Tt-ii));Tt+=C)xe.push(ye(ie(Je+(Rt=Be-Je)%(di=C-Je),0))),Be=Te(Rt/di);xe.push(ye(ie(Be,0))),ii=ht(Pt,jt,Zt==Di),Pt=0,++Zt}++Pt,++Bt}return xe.join("")}a={version:"1.3.2",ucs2:{decode:Se,encode:Ee},decode:Oe,encode:ke,toASCII:function(lt){return He(lt,function(Bt){return _e.test(Bt)?"xn--"+ke(Bt):Bt})},toUnicode:function(lt){return He(lt,function(Bt){return Ge.test(Bt)?Oe(Bt.slice(4).toLowerCase()):Bt})}},void 0!==(E=function(){return a}.call(Z,g,Z,V))&&(V.exports=E)}()},20434:(V,Z,g)=>{"use strict";var E=g(86370),m=g(16906);function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Z.parse=We,Z.resolve=function(ne,ge){return We(ne,!1,!0).resolve(ge)},Z.resolveObject=function(ne,ge){return ne?We(ne,!1,!0).resolveObject(ge):ge},Z.format=function(ne){return m.isString(ne)&&(ne=We(ne)),ne instanceof t?ne.format():t.prototype.format.call(ne)},Z.Url=t;var e=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,C=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),D=["'"].concat(C),B=["%","/","?",";","#"].concat(D),z=["/","?","#"],be=/^[+a-z0-9A-Z_-]{0,63}$/,se=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ie={javascript:!0,"javascript:":!0},Ge={javascript:!0,"javascript:":!0},_e={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Le=g(10569);function We(ne,ge,ae){if(ne&&m.isObject(ne)&&ne instanceof t)return ne;var He=new t;return He.parse(ne,ge,ae),He}t.prototype.parse=function(ne,ge,ae){if(!m.isString(ne))throw new TypeError("Parameter 'url' must be a string, not "+typeof ne);var He=ne.indexOf("?"),Se=-1!==He&&He<ne.indexOf("#")?"?":"#",Ee=ne.split(Se);Ee[0]=Ee[0].replace(/\\/g,"/");var ie=ne=Ee.join(Se);if(ie=ie.trim(),!ae&&1===ne.split("#").length){var ht=a.exec(ie);if(ht)return this.path=ie,this.href=ie,this.pathname=ht[1],ht[2]?(this.search=ht[2],this.query=ge?Le.parse(this.search.substr(1)):this.search.substr(1)):ge&&(this.search="",this.query={}),this}var Oe=e.exec(ie);if(Oe){var ke=(Oe=Oe[0]).toLowerCase();this.protocol=ke,ie=ie.substr(Oe.length)}if(ae||Oe||ie.match(/^\/\/[^@\/]+@[^@\/]+/)){var dt="//"===ie.substr(0,2);dt&&(!Oe||!Ge[Oe])&&(ie=ie.substr(2),this.slashes=!0)}if(!Ge[Oe]&&(dt||Oe&&!_e[Oe])){for(var vt=-1,lt=0;lt<z.length;lt++)-1!==(Bt=ie.indexOf(z[lt]))&&(-1===vt||Bt<vt)&&(vt=Bt);var Pt,Zt;for(-1!==(Zt=-1===vt?ie.lastIndexOf("@"):ie.lastIndexOf("@",vt))&&(Pt=ie.slice(0,Zt),ie=ie.slice(Zt+1),this.auth=decodeURIComponent(Pt)),vt=-1,lt=0;lt<B.length;lt++){var Bt;-1!==(Bt=ie.indexOf(B[lt]))&&(-1===vt||Bt<vt)&&(vt=Bt)}-1===vt&&(vt=ie.length),this.host=ie.slice(0,vt),ie=ie.slice(vt),this.parseHost(),this.hostname=this.hostname||"";var Di="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Di)for(var ii=this.hostname.split(/\./),Ct=(lt=0,ii.length);lt<Ct;lt++){var gi=ii[lt];if(gi&&!gi.match(be)){for(var Be="",Tt=0,Je=gi.length;Tt<Je;Tt++)gi.charCodeAt(Tt)>127?Be+="x":Be+=gi[Tt];if(!Be.match(be)){var _t=ii.slice(0,lt),xe=ii.slice(lt+1),pt=gi.match(se);pt&&(_t.push(pt[1]),xe.unshift(pt[2])),xe.length&&(ie="/"+xe.join(".")+ie),this.hostname=_t.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Di||(this.hostname=E.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Di&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ie[0]&&(ie="/"+ie))}if(!Ie[ke])for(lt=0,Ct=D.length;lt<Ct;lt++){var Rt=D[lt];if(-1!==ie.indexOf(Rt)){var et=encodeURIComponent(Rt);et===Rt&&(et=escape(Rt)),ie=ie.split(Rt).join(et)}}var tt=ie.indexOf("#");-1!==tt&&(this.hash=ie.substr(tt),ie=ie.slice(0,tt));var Lt=ie.indexOf("?");return-1!==Lt?(this.search=ie.substr(Lt),this.query=ie.substr(Lt+1),ge&&(this.query=Le.parse(this.query)),ie=ie.slice(0,Lt)):ge&&(this.search="",this.query={}),ie&&(this.pathname=ie),_e[ke]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},t.prototype.format=function(){var ne=this.auth||"";ne&&(ne=(ne=encodeURIComponent(ne)).replace(/%3A/i,":"),ne+="@");var ge=this.protocol||"",ae=this.pathname||"",He=this.hash||"",Se=!1,Ee="";this.host?Se=ne+this.host:this.hostname&&(Se=ne+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Se+=":"+this.port)),this.query&&m.isObject(this.query)&&Object.keys(this.query).length&&(Ee=Le.stringify(this.query));var ue=this.search||Ee&&"?"+Ee||"";return ge&&":"!==ge.substr(-1)&&(ge+=":"),this.slashes||(!ge||_e[ge])&&!1!==Se?(Se="//"+(Se||""),ae&&"/"!==ae.charAt(0)&&(ae="/"+ae)):Se||(Se=""),He&&"#"!==He.charAt(0)&&(He="#"+He),ue&&"?"!==ue.charAt(0)&&(ue="?"+ue),ge+Se+(ae=ae.replace(/[?#]/g,function(ie){return encodeURIComponent(ie)}))+(ue=ue.replace("#","%23"))+He},t.prototype.resolve=function(ne){return this.resolveObject(We(ne,!1,!0)).format()},t.prototype.resolveObject=function(ne){if(m.isString(ne)){var ge=new t;ge.parse(ne,!1,!0),ne=ge}for(var ae=new t,He=Object.keys(this),Se=0;Se<He.length;Se++){var Ee=He[Se];ae[Ee]=this[Ee]}if(ae.hash=ne.hash,""===ne.href)return ae.href=ae.format(),ae;if(ne.slashes&&!ne.protocol){for(var ue=Object.keys(ne),ie=0;ie<ue.length;ie++){var ht=ue[ie];"protocol"!==ht&&(ae[ht]=ne[ht])}return _e[ae.protocol]&&ae.hostname&&!ae.pathname&&(ae.path=ae.pathname="/"),ae.href=ae.format(),ae}if(ne.protocol&&ne.protocol!==ae.protocol){if(!_e[ne.protocol]){for(var Oe=Object.keys(ne),ke=0;ke<Oe.length;ke++){var dt=Oe[ke];ae[dt]=ne[dt]}return ae.href=ae.format(),ae}if(ae.protocol=ne.protocol,ne.host||Ge[ne.protocol])ae.pathname=ne.pathname;else{for(var Ct=(ne.pathname||"").split("/");Ct.length&&!(ne.host=Ct.shift()););ne.host||(ne.host=""),ne.hostname||(ne.hostname=""),""!==Ct[0]&&Ct.unshift(""),Ct.length<2&&Ct.unshift(""),ae.pathname=Ct.join("/")}return ae.search=ne.search,ae.query=ne.query,ae.host=ne.host||"",ae.auth=ne.auth,ae.hostname=ne.hostname||ne.host,ae.port=ne.port,(ae.pathname||ae.search)&&(ae.path=(ae.pathname||"")+(ae.search||"")),ae.slashes=ae.slashes||ne.slashes,ae.href=ae.format(),ae}var Bt=ae.pathname&&"/"===ae.pathname.charAt(0),Pt=ne.host||ne.pathname&&"/"===ne.pathname.charAt(0),Zt=Pt||Bt||ae.host&&ne.pathname,Di=Zt,ii=ae.pathname&&ae.pathname.split("/")||[],gi=(Ct=ne.pathname&&ne.pathname.split("/")||[],ae.protocol&&!_e[ae.protocol]);if(gi&&(ae.hostname="",ae.port=null,ae.host&&(""===ii[0]?ii[0]=ae.host:ii.unshift(ae.host)),ae.host="",ne.protocol&&(ne.hostname=null,ne.port=null,ne.host&&(""===Ct[0]?Ct[0]=ne.host:Ct.unshift(ne.host)),ne.host=null),Zt=Zt&&(""===Ct[0]||""===ii[0])),Pt)ae.host=ne.host||""===ne.host?ne.host:ae.host,ae.hostname=ne.hostname||""===ne.hostname?ne.hostname:ae.hostname,ae.search=ne.search,ae.query=ne.query,ii=Ct;else if(Ct.length)ii||(ii=[]),ii.pop(),ii=ii.concat(Ct),ae.search=ne.search,ae.query=ne.query;else if(!m.isNullOrUndefined(ne.search))return gi&&(ae.hostname=ae.host=ii.shift(),(Be=!!(ae.host&&ae.host.indexOf("@")>0)&&ae.host.split("@"))&&(ae.auth=Be.shift(),ae.host=ae.hostname=Be.shift())),ae.search=ne.search,ae.query=ne.query,(!m.isNull(ae.pathname)||!m.isNull(ae.search))&&(ae.path=(ae.pathname?ae.pathname:"")+(ae.search?ae.search:"")),ae.href=ae.format(),ae;if(!ii.length)return ae.pathname=null,ae.path=ae.search?"/"+ae.search:null,ae.href=ae.format(),ae;for(var Tt=ii.slice(-1)[0],Je=(ae.host||ne.host||ii.length>1)&&("."===Tt||".."===Tt)||""===Tt,_t=0,xe=ii.length;xe>=0;xe--)"."===(Tt=ii[xe])?ii.splice(xe,1):".."===Tt?(ii.splice(xe,1),_t++):_t&&(ii.splice(xe,1),_t--);if(!Zt&&!Di)for(;_t--;_t)ii.unshift("..");Zt&&""!==ii[0]&&(!ii[0]||"/"!==ii[0].charAt(0))&&ii.unshift(""),Je&&"/"!==ii.join("/").substr(-1)&&ii.push("");var Be,pt=""===ii[0]||ii[0]&&"/"===ii[0].charAt(0);return gi&&(ae.hostname=ae.host=pt?"":ii.length?ii.shift():"",(Be=!!(ae.host&&ae.host.indexOf("@")>0)&&ae.host.split("@"))&&(ae.auth=Be.shift(),ae.host=ae.hostname=Be.shift())),(Zt=Zt||ae.host&&ii.length)&&!pt&&ii.unshift(""),ii.length?ae.pathname=ii.join("/"):(ae.pathname=null,ae.path=null),(!m.isNull(ae.pathname)||!m.isNull(ae.search))&&(ae.path=(ae.pathname?ae.pathname:"")+(ae.search?ae.search:"")),ae.auth=ne.auth||ae.auth,ae.slashes=ae.slashes||ne.slashes,ae.href=ae.format(),ae},t.prototype.parseHost=function(){var ne=this.host,ge=n.exec(ne);ge&&(":"!==(ge=ge[0])&&(this.port=ge.substr(1)),ne=ne.substr(0,ne.length-ge.length)),ne&&(this.hostname=ne)}},16906:V=>{"use strict";V.exports={isString:function(Z){return"string"==typeof Z},isObject:function(Z){return"object"==typeof Z&&null!==Z},isNull:function(Z){return null===Z},isNullOrUndefined:function(Z){return null==Z}}},35987:(V,Z,g)=>{"use strict";function C(Se,Ee,ue,ie){return new(ue||(ue=Promise))(function(Oe,ke){function dt(Bt){try{lt(ie.next(Bt))}catch(Pt){ke(Pt)}}function vt(Bt){try{lt(ie.throw(Bt))}catch(Pt){ke(Pt)}}function lt(Bt){Bt.done?Oe(Bt.value):function(Oe){return Oe instanceof ue?Oe:new ue(function(ke){ke(Oe)})}(Bt.value).then(dt,vt)}lt((ie=ie.apply(Se,Ee||[])).next())})}function _e(Se){return this instanceof _e?(this.v=Se,this):new _e(Se)}function Le(Se,Ee,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ht,ie=ue.apply(Se,Ee||[]),Oe=[];return ht={},ke("next"),ke("throw"),ke("return"),ht[Symbol.asyncIterator]=function(){return this},ht;function ke(Zt){ie[Zt]&&(ht[Zt]=function(Di){return new Promise(function(ii,Ct){Oe.push([Zt,Di,ii,Ct])>1||dt(Zt,Di)})})}function dt(Zt,Di){try{!function(Zt){Zt.value instanceof _e?Promise.resolve(Zt.value.v).then(lt,Bt):Pt(Oe[0][2],Zt)}(ie[Zt](Di))}catch(ii){Pt(Oe[0][3],ii)}}function lt(Zt){dt("next",Zt)}function Bt(Zt){dt("throw",Zt)}function Pt(Zt,Di){Zt(Di),Oe.shift(),Oe.length&&dt(Oe[0][0],Oe[0][1])}}function $e(Se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,Ee=Se[Symbol.asyncIterator];return Ee?Ee.call(Se):(Se=function(Se){var Ee="function"==typeof Symbol&&Symbol.iterator,ue=Ee&&Se[Ee],ie=0;if(ue)return ue.call(Se);if(Se&&"number"==typeof Se.length)return{next:function(){return Se&&ie>=Se.length&&(Se=void 0),{value:Se&&Se[ie++],done:!Se}}};throw new TypeError(Ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Se),ue={},ie("next"),ie("throw"),ie("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function ie(Oe){ue[Oe]=Se[Oe]&&function(ke){return new Promise(function(dt,vt){!function(Oe,ke,dt,vt){Promise.resolve(vt).then(function(lt){Oe({value:lt,done:dt})},ke)}(dt,vt,(ke=Se[Oe](ke)).done,ke.value)})}}}g.d(Z,{mG:()=>C,qq:()=>_e,FC:()=>Le,KL:()=>$e})},70433:(V,Z,g)=>{V.exports=g(47471)},82476:(V,Z,g)=>{V.exports=g(21049)},20036:(V,Z,g)=>{V.exports=g(43175)},55672:(V,Z,g)=>{V.exports=g(3352)},77464:(V,Z,g)=>{V.exports=g(13566)},40750:(V,Z,g)=>{V.exports=g(70201)},55742:(V,Z,g)=>{V.exports=g(21570)},63759:(V,Z,g)=>{V.exports=g(46726)},67489:(V,Z,g)=>{V.exports=g(38366)},81836:(V,Z,g)=>{V.exports=g(63317)},25710:(V,Z,g)=>{V.exports=g(68687)},12782:(V,Z,g)=>{V.exports=g(15256)},27733:(V,Z,g)=>{V.exports=g(21929)},32472:(V,Z,g)=>{V.exports=g(70977)},78927:(V,Z,g)=>{V.exports=g(35019)},79921:(V,Z,g)=>{V.exports=g(24733)},74580:(V,Z,g)=>{V.exports=g(65623)},49067:(V,Z,g)=>{V.exports=g(4517)},10278:(V,Z,g)=>{V.exports=g(31584)},92909:(V,Z,g)=>{V.exports=g(46025)},40715:(V,Z,g)=>{V.exports=g(81613)},88577:(V,Z,g)=>{V.exports=g(19775)},25918:(V,Z,g)=>{V.exports=g(9483)},48735:(V,Z,g)=>{V.exports=g(60061)},46188:(V,Z,g)=>{V.exports=g(27254)},8797:(V,Z,g)=>{V.exports=g(62691)},77901:(V,Z,g)=>{V.exports=g(98244)},95942:(V,Z,g)=>{V.exports=g(79668)},96915:(V,Z,g)=>{V.exports=g(5797)},90986:(V,Z,g)=>{V.exports=g(35248)},62917:(V,Z,g)=>{V.exports=g(58316)},45698:(V,Z,g)=>{V.exports=g(51479)},48972:(V,Z,g)=>{V.exports=g(35392)},59680:(V,Z,g)=>{V.exports=g(43510)},52175:()=>{},41777:(V,Z,g)=>{"use strict";g.d(Z,{l3:()=>t,_j:()=>E,LC:()=>m,ZN:()=>Le,jt:()=>n,pV:()=>be,F4:()=>B,IO:()=>Ie,vP:()=>d,SB:()=>D,oB:()=>C,eR:()=>z,X$:()=>e,ZE:()=>We,k1:()=>$e});class E{}class m{}const t="*";function e(Te,ye){return{type:7,name:Te,definitions:ye,options:{}}}function n(Te,ye=null){return{type:4,styles:ye,timings:Te}}function d(Te,ye=null){return{type:2,steps:Te,options:ye}}function C(Te){return{type:6,styles:Te,offset:null}}function D(Te,ye,ne){return{type:0,name:Te,styles:ye,options:ne}}function B(Te){return{type:5,steps:Te}}function z(Te,ye,ne=null){return{type:1,expr:Te,animation:ye,options:ne}}function be(Te=null){return{type:9,options:Te}}function Ie(Te,ye,ne=null){return{type:11,selector:Te,animation:ye,options:ne}}function _e(Te){Promise.resolve(null).then(Te)}class Le{constructor(ye=0,ne=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ye+ne}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ye=>ye()),this._onDoneFns=[])}onStart(ye){this._onStartFns.push(ye)}onDone(ye){this._onDoneFns.push(ye)}onDestroy(ye){this._onDestroyFns.push(ye)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){_e(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ye=>ye()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ye=>ye()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(ye){this._position=this.totalTime?ye*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ye){const ne="start"==ye?this._onStartFns:this._onDoneFns;ne.forEach(ge=>ge()),ne.length=0}}class We{constructor(ye){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ye;let ne=0,ge=0,ae=0;const He=this.players.length;0==He?_e(()=>this._onFinish()):this.players.forEach(Se=>{Se.onDone(()=>{++ne==He&&this._onFinish()}),Se.onDestroy(()=>{++ge==He&&this._onDestroy()}),Se.onStart(()=>{++ae==He&&this._onStart()})}),this.totalTime=this.players.reduce((Se,Ee)=>Math.max(Se,Ee.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ye=>ye()),this._onDoneFns=[])}init(){this.players.forEach(ye=>ye.init())}onStart(ye){this._onStartFns.push(ye)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ye=>ye()),this._onStartFns=[])}onDone(ye){this._onDoneFns.push(ye)}onDestroy(ye){this._onDestroyFns.push(ye)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ye=>ye.play())}pause(){this.players.forEach(ye=>ye.pause())}restart(){this.players.forEach(ye=>ye.restart())}finish(){this._onFinish(),this.players.forEach(ye=>ye.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ye=>ye.destroy()),this._onDestroyFns.forEach(ye=>ye()),this._onDestroyFns=[])}reset(){this.players.forEach(ye=>ye.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ye){const ne=ye*this.totalTime;this.players.forEach(ge=>{const ae=ge.totalTime?Math.min(1,ne/ge.totalTime):1;ge.setPosition(ae)})}getPosition(){const ye=this.players.reduce((ne,ge)=>null===ne||ge.totalTime>ne.totalTime?ge:ne,null);return null!=ye?ye.getPosition():0}beforeDestroy(){this.players.forEach(ye=>{ye.beforeDestroy&&ye.beforeDestroy()})}triggerCallback(ye){const ne="start"==ye?this._onStartFns:this._onDoneFns;ne.forEach(ge=>ge()),ne.length=0}}const $e="!"},15664:(V,Z,g)=>{"use strict";g.d(Z,{rt:()=>ft,s1:()=>ke,kH:()=>zt,Em:()=>dt,tE:()=>Ci,qV:()=>jt,qm:()=>Jt,ic:()=>lt,Kd:()=>mi,X6:()=>mt,yG:()=>yt});var E=g(69808),m=g(5e3),t=g(77579),e=g(50727),n=g(61135),a=g(39646),d=g(91159),C=g(18505),D=g(78372),B=g(39300),z=g(54004),oe=g(95698),be=g(35684),se=g(71884),Ie=g(82722),Ge=g(63191),_e=g(70925),Le=g(17144);class Oe{constructor(le){this._items=le,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new t.x,this._typeaheadSubscription=e.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Pe=>Pe.disabled,this._pressedLetters=[],this.tabOut=new t.x,this.change=new t.x,le instanceof m.n_E&&le.changes.subscribe(Pe=>{if(this._activeItem){const It=Pe.toArray().indexOf(this._activeItem);It>-1&&It!==this._activeItemIndex&&(this._activeItemIndex=It)}})}skipPredicate(le){return this._skipPredicateFn=le,this}withWrap(le=!0){return this._wrap=le,this}withVerticalOrientation(le=!0){return this._vertical=le,this}withHorizontalOrientation(le){return this._horizontal=le,this}withAllowedModifierKeys(le){return this._allowedModifierKeys=le,this}withTypeAhead(le=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,C.b)(Pe=>this._pressedLetters.push(Pe)),(0,D.b)(le),(0,B.h)(()=>this._pressedLetters.length>0),(0,z.U)(()=>this._pressedLetters.join(""))).subscribe(Pe=>{const at=this._getItemsArray();for(let It=1;It<at.length+1;It++){const Gi=(this._activeItemIndex+It)%at.length,Zi=at[Gi];if(!this._skipPredicateFn(Zi)&&0===Zi.getLabel().toUpperCase().trim().indexOf(Pe)){this.setActiveItem(Gi);break}}this._pressedLetters=[]}),this}withHomeAndEnd(le=!0){return this._homeAndEnd=le,this}setActiveItem(le){const Pe=this._activeItem;this.updateActiveItem(le),this._activeItem!==Pe&&this.change.next(this._activeItemIndex)}onKeydown(le){const Pe=le.keyCode,It=["altKey","ctrlKey","metaKey","shiftKey"].every(Gi=>!le[Gi]||this._allowedModifierKeys.indexOf(Gi)>-1);switch(Pe){case d.Mf:return void this.tabOut.next();case d.JH:if(this._vertical&&It){this.setNextItemActive();break}return;case d.LH:if(this._vertical&&It){this.setPreviousItemActive();break}return;case d.SV:if(this._horizontal&&It){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case d.oh:if(this._horizontal&&It){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case d.Sd:if(this._homeAndEnd&&It){this.setFirstItemActive();break}return;case d.uR:if(this._homeAndEnd&&It){this.setLastItemActive();break}return;default:return void((It||(0,d.Vb)(le,"shiftKey"))&&(le.key&&1===le.key.length?this._letterKeyStream.next(le.key.toLocaleUpperCase()):(Pe>=d.A&&Pe<=d.Z||Pe>=d.xE&&Pe<=d.aO)&&this._letterKeyStream.next(String.fromCharCode(Pe))))}this._pressedLetters=[],le.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(le){const Pe=this._getItemsArray(),at="number"==typeof le?le:Pe.indexOf(le),It=Pe[at];this._activeItem=null==It?null:It,this._activeItemIndex=at}_setActiveItemByDelta(le){this._wrap?this._setActiveInWrapMode(le):this._setActiveInDefaultMode(le)}_setActiveInWrapMode(le){const Pe=this._getItemsArray();for(let at=1;at<=Pe.length;at++){const It=(this._activeItemIndex+le*at+Pe.length)%Pe.length;if(!this._skipPredicateFn(Pe[It]))return void this.setActiveItem(It)}}_setActiveInDefaultMode(le){this._setActiveItemByIndex(this._activeItemIndex+le,le)}_setActiveItemByIndex(le,Pe){const at=this._getItemsArray();if(at[le]){for(;this._skipPredicateFn(at[le]);)if(!at[le+=Pe])return;this.setActiveItem(le)}}_getItemsArray(){return this._items instanceof m.n_E?this._items.toArray():this._items}}class ke extends Oe{setActiveItem(le){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(le),this.activeItem&&this.activeItem.setActiveStyles()}}class dt extends Oe{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(le){return this._origin=le,this}setActiveItem(le){super.setActiveItem(le),this.activeItem&&this.activeItem.focus(this._origin)}}let lt=(()=>{class Ae{constructor(Pe){this._platform=Pe}isDisabled(Pe){return Pe.hasAttribute("disabled")}isVisible(Pe){return function(Ae){return!!(Ae.offsetWidth||Ae.offsetHeight||"function"==typeof Ae.getClientRects&&Ae.getClientRects().length)}(Pe)&&"visible"===getComputedStyle(Pe).visibility}isTabbable(Pe){if(!this._platform.isBrowser)return!1;const at=function(Ae){try{return Ae.frameElement}catch(le){return null}}(function(Ae){return Ae.ownerDocument&&Ae.ownerDocument.defaultView||window}(Pe));if(at&&(-1===Tt(at)||!this.isVisible(at)))return!1;let It=Pe.nodeName.toLowerCase(),Gi=Tt(Pe);return Pe.hasAttribute("contenteditable")?-1!==Gi:!("iframe"===It||"object"===It||this._platform.WEBKIT&&this._platform.IOS&&!function(Ae){let le=Ae.nodeName.toLowerCase(),Pe="input"===le&&Ae.type;return"text"===Pe||"password"===Pe||"select"===le||"textarea"===le}(Pe))&&("audio"===It?!!Pe.hasAttribute("controls")&&-1!==Gi:"video"===It?-1!==Gi&&(null!==Gi||this._platform.FIREFOX||Pe.hasAttribute("controls")):Pe.tabIndex>=0)}isFocusable(Pe,at){return function(Ae){return!function(Ae){return function(Ae){return"input"==Ae.nodeName.toLowerCase()}(Ae)&&"hidden"==Ae.type}(Ae)&&(function(Ae){let le=Ae.nodeName.toLowerCase();return"input"===le||"select"===le||"button"===le||"textarea"===le}(Ae)||function(Ae){return function(Ae){return"a"==Ae.nodeName.toLowerCase()}(Ae)&&Ae.hasAttribute("href")}(Ae)||Ae.hasAttribute("contenteditable")||Be(Ae))}(Pe)&&!this.isDisabled(Pe)&&((null==at?void 0:at.ignoreVisibility)||this.isVisible(Pe))}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(m.LFG(_e.t4))},Ae.\u0275prov=m.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})();function Be(Ae){if(!Ae.hasAttribute("tabindex")||void 0===Ae.tabIndex)return!1;let le=Ae.getAttribute("tabindex");return!(!le||isNaN(parseInt(le,10)))}function Tt(Ae){if(!Be(Ae))return null;const le=parseInt(Ae.getAttribute("tabindex")||"",10);return isNaN(le)?-1:le}class pt{constructor(le,Pe,at,It,Gi=!1){this._element=le,this._checker=Pe,this._ngZone=at,this._document=It,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Gi||this.attachAnchors()}get enabled(){return this._enabled}set enabled(le){this._enabled=le,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(le,this._startAnchor),this._toggleAnchorTabIndex(le,this._endAnchor))}destroy(){const le=this._startAnchor,Pe=this._endAnchor;le&&(le.removeEventListener("focus",this.startAnchorListener),le.remove()),Pe&&(Pe.removeEventListener("focus",this.endAnchorListener),Pe.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(le){return new Promise(Pe=>{this._executeOnStable(()=>Pe(this.focusInitialElement(le)))})}focusFirstTabbableElementWhenReady(le){return new Promise(Pe=>{this._executeOnStable(()=>Pe(this.focusFirstTabbableElement(le)))})}focusLastTabbableElementWhenReady(le){return new Promise(Pe=>{this._executeOnStable(()=>Pe(this.focusLastTabbableElement(le)))})}_getRegionBoundary(le){const Pe=this._element.querySelectorAll(`[cdk-focus-region-${le}], [cdkFocusRegion${le}], [cdk-focus-${le}]`);return"start"==le?Pe.length?Pe[0]:this._getFirstTabbableElement(this._element):Pe.length?Pe[Pe.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(le){const Pe=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Pe){if(!this._checker.isFocusable(Pe)){const at=this._getFirstTabbableElement(Pe);return null==at||at.focus(le),!!at}return Pe.focus(le),!0}return this.focusFirstTabbableElement(le)}focusFirstTabbableElement(le){const Pe=this._getRegionBoundary("start");return Pe&&Pe.focus(le),!!Pe}focusLastTabbableElement(le){const Pe=this._getRegionBoundary("end");return Pe&&Pe.focus(le),!!Pe}hasAttached(){return this._hasAttached}_getFirstTabbableElement(le){if(this._checker.isFocusable(le)&&this._checker.isTabbable(le))return le;const Pe=le.children;for(let at=0;at<Pe.length;at++){const It=Pe[at].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Pe[at]):null;if(It)return It}return null}_getLastTabbableElement(le){if(this._checker.isFocusable(le)&&this._checker.isTabbable(le))return le;const Pe=le.children;for(let at=Pe.length-1;at>=0;at--){const It=Pe[at].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Pe[at]):null;if(It)return It}return null}_createAnchor(){const le=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,le),le.classList.add("cdk-visually-hidden"),le.classList.add("cdk-focus-trap-anchor"),le.setAttribute("aria-hidden","true"),le}_toggleAnchorTabIndex(le,Pe){le?Pe.setAttribute("tabindex","0"):Pe.removeAttribute("tabindex")}toggleAnchors(le){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(le,this._startAnchor),this._toggleAnchorTabIndex(le,this._endAnchor))}_executeOnStable(le){this._ngZone.isStable?le():this._ngZone.onStable.pipe((0,oe.q)(1)).subscribe(le)}}let jt=(()=>{class Ae{constructor(Pe,at,It){this._checker=Pe,this._ngZone=at,this._document=It}create(Pe,at=!1){return new pt(Pe,this._checker,this._ngZone,this._document,at)}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(m.LFG(lt),m.LFG(m.R0b),m.LFG(E.K0))},Ae.\u0275prov=m.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})();function mt(Ae){return 0===Ae.offsetX&&0===Ae.offsetY}function yt(Ae){const le=Ae.touches&&Ae.touches[0]||Ae.changedTouches&&Ae.changedTouches[0];return!(!le||-1!==le.identifier||null!=le.radiusX&&1!==le.radiusX||null!=le.radiusY&&1!==le.radiusY)}const Ze=new m.OlP("cdk-input-modality-detector-options"),ut={ignoreKeys:[d.zL,d.jx,d.b2,d.MW,d.JU]},ni=(0,_e.i$)({passive:!0,capture:!0});let Ni=(()=>{class Ae{constructor(Pe,at,It,Gi){this._platform=Pe,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=Zi=>{var En,nr;(null===(nr=null===(En=this._options)||void 0===En?void 0:En.ignoreKeys)||void 0===nr?void 0:nr.some(li=>li===Zi.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,_e.sA)(Zi))},this._onMousedown=Zi=>{Date.now()-this._lastTouchMs<650||(this._modality.next(mt(Zi)?"keyboard":"mouse"),this._mostRecentTarget=(0,_e.sA)(Zi))},this._onTouchstart=Zi=>{yt(Zi)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,_e.sA)(Zi))},this._options=Object.assign(Object.assign({},ut),Gi),this.modalityDetected=this._modality.pipe((0,be.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,se.x)()),Pe.isBrowser&&at.runOutsideAngular(()=>{It.addEventListener("keydown",this._onKeydown,ni),It.addEventListener("mousedown",this._onMousedown,ni),It.addEventListener("touchstart",this._onTouchstart,ni)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ni),document.removeEventListener("mousedown",this._onMousedown,ni),document.removeEventListener("touchstart",this._onTouchstart,ni))}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(m.LFG(_e.t4),m.LFG(m.R0b),m.LFG(E.K0),m.LFG(Ze,8))},Ae.\u0275prov=m.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})();const wi=new m.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),pn=new m.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let mi=(()=>{class Ae{constructor(Pe,at,It,Gi){this._ngZone=at,this._defaultOptions=Gi,this._document=It,this._liveElement=Pe||this._createLiveElement()}announce(Pe,...at){const It=this._defaultOptions;let Gi,Zi;return 1===at.length&&"number"==typeof at[0]?Zi=at[0]:[Gi,Zi]=at,this.clear(),clearTimeout(this._previousTimeout),Gi||(Gi=It&&It.politeness?It.politeness:"polite"),null==Zi&&It&&(Zi=It.duration),this._liveElement.setAttribute("aria-live",Gi),this._ngZone.runOutsideAngular(()=>new Promise(En=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Pe,En(),"number"==typeof Zi&&(this._previousTimeout=setTimeout(()=>this.clear(),Zi))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var Pe;clearTimeout(this._previousTimeout),null===(Pe=this._liveElement)||void 0===Pe||Pe.remove(),this._liveElement=null}_createLiveElement(){const Pe="cdk-live-announcer-element",at=this._document.getElementsByClassName(Pe),It=this._document.createElement("div");for(let Gi=0;Gi<at.length;Gi++)at[Gi].remove();return It.classList.add(Pe),It.classList.add("cdk-visually-hidden"),It.setAttribute("aria-atomic","true"),It.setAttribute("aria-live","polite"),this._document.body.appendChild(It),It}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(m.LFG(wi,8),m.LFG(m.R0b),m.LFG(E.K0),m.LFG(pn,8))},Ae.\u0275prov=m.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})();const wt=new m.OlP("cdk-focus-monitor-default-options"),Ot=(0,_e.i$)({passive:!0,capture:!0});let Ci=(()=>{class Ae{constructor(Pe,at,It,Gi,Zi){this._ngZone=Pe,this._platform=at,this._inputModalityDetector=It,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new t.x,this._rootNodeFocusAndBlurListener=En=>{const nr=(0,_e.sA)(En),li="focus"===En.type?this._onFocus:this._onBlur;for(let $t=nr;$t;$t=$t.parentElement)li.call(this,En,$t)},this._document=Gi,this._detectionMode=(null==Zi?void 0:Zi.detectionMode)||0}monitor(Pe,at=!1){const It=(0,Ge.fI)(Pe);if(!this._platform.isBrowser||1!==It.nodeType)return(0,a.of)(null);const Gi=(0,_e.kV)(It)||this._getDocument(),Zi=this._elementInfo.get(It);if(Zi)return at&&(Zi.checkChildren=!0),Zi.subject;const En={checkChildren:at,subject:new t.x,rootNode:Gi};return this._elementInfo.set(It,En),this._registerGlobalListeners(En),En.subject}stopMonitoring(Pe){const at=(0,Ge.fI)(Pe),It=this._elementInfo.get(at);It&&(It.subject.complete(),this._setClasses(at),this._elementInfo.delete(at),this._removeGlobalListeners(It))}focusVia(Pe,at,It){const Gi=(0,Ge.fI)(Pe);Gi===this._getDocument().activeElement?this._getClosestElementsInfo(Gi).forEach(([En,nr])=>this._originChanged(En,at,nr)):(this._setOrigin(at),"function"==typeof Gi.focus&&Gi.focus(It))}ngOnDestroy(){this._elementInfo.forEach((Pe,at)=>this.stopMonitoring(at))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Pe){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Pe)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(Pe){return 1===this._detectionMode||!!(null==Pe?void 0:Pe.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(Pe,at){Pe.classList.toggle("cdk-focused",!!at),Pe.classList.toggle("cdk-touch-focused","touch"===at),Pe.classList.toggle("cdk-keyboard-focused","keyboard"===at),Pe.classList.toggle("cdk-mouse-focused","mouse"===at),Pe.classList.toggle("cdk-program-focused","program"===at)}_setOrigin(Pe,at=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Pe,this._originFromTouchInteraction="touch"===Pe&&at,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Pe,at){const It=this._elementInfo.get(at),Gi=(0,_e.sA)(Pe);!It||!It.checkChildren&&at!==Gi||this._originChanged(at,this._getFocusOrigin(Gi),It)}_onBlur(Pe,at){const It=this._elementInfo.get(at);!It||It.checkChildren&&Pe.relatedTarget instanceof Node&&at.contains(Pe.relatedTarget)||(this._setClasses(at),this._emitOrigin(It.subject,null))}_emitOrigin(Pe,at){this._ngZone.run(()=>Pe.next(at))}_registerGlobalListeners(Pe){if(!this._platform.isBrowser)return;const at=Pe.rootNode,It=this._rootNodeFocusListenerCount.get(at)||0;It||this._ngZone.runOutsideAngular(()=>{at.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ot),at.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ot)}),this._rootNodeFocusListenerCount.set(at,It+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Ie.R)(this._stopInputModalityDetector)).subscribe(Gi=>{this._setOrigin(Gi,!0)}))}_removeGlobalListeners(Pe){const at=Pe.rootNode;if(this._rootNodeFocusListenerCount.has(at)){const It=this._rootNodeFocusListenerCount.get(at);It>1?this._rootNodeFocusListenerCount.set(at,It-1):(at.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ot),at.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ot),this._rootNodeFocusListenerCount.delete(at))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Pe,at,It){this._setClasses(Pe,at),this._emitOrigin(It.subject,at),this._lastFocusOrigin=at}_getClosestElementsInfo(Pe){const at=[];return this._elementInfo.forEach((It,Gi)=>{(Gi===Pe||It.checkChildren&&Gi.contains(Pe))&&at.push([Gi,It])}),at}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(m.LFG(m.R0b),m.LFG(_e.t4),m.LFG(Ni),m.LFG(E.K0,8),m.LFG(wt,8))},Ae.\u0275prov=m.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})(),zt=(()=>{class Ae{constructor(Pe,at){this._elementRef=Pe,this._focusMonitor=at,this.cdkFocusChange=new m.vpe}ngAfterViewInit(){const Pe=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(Pe,1===Pe.nodeType&&Pe.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(at=>this.cdkFocusChange.emit(at))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(m.Y36(m.SBq),m.Y36(Ci))},Ae.\u0275dir=m.lG2({type:Ae,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),Ae})();const Mi="cdk-high-contrast-black-on-white",_i="cdk-high-contrast-white-on-black",Bi="cdk-high-contrast-active";let Jt=(()=>{class Ae{constructor(Pe,at){this._platform=Pe,this._document=at}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Pe=this._document.createElement("div");Pe.style.backgroundColor="rgb(1,2,3)",Pe.style.position="absolute",this._document.body.appendChild(Pe);const at=this._document.defaultView||window,It=at&&at.getComputedStyle?at.getComputedStyle(Pe):null,Gi=(It&&It.backgroundColor||"").replace(/ /g,"");switch(Pe.remove(),Gi){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Pe=this._document.body.classList;Pe.remove(Bi),Pe.remove(Mi),Pe.remove(_i),this._hasCheckedHighContrastMode=!0;const at=this.getHighContrastMode();1===at?(Pe.add(Bi),Pe.add(Mi)):2===at&&(Pe.add(Bi),Pe.add(_i))}}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(m.LFG(_e.t4),m.LFG(E.K0))},Ae.\u0275prov=m.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})(),ft=(()=>{class Ae{constructor(Pe){Pe._applyBodyHighContrastModeCssClasses()}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(m.LFG(Jt))},Ae.\u0275mod=m.oAB({type:Ae}),Ae.\u0275inj=m.cJS({imports:[[_e.ud,Le.Q8]]}),Ae})()},50226:(V,Z,g)=>{"use strict";g.d(Z,{vT:()=>D,Is:()=>d});var E=g(5e3),m=g(69808);const t=new E.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,E.f3M)(m.K0)}}),n=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let d=(()=>{class B{constructor(oe){if(this.value="ltr",this.change=new E.vpe,oe){const se=oe.documentElement?oe.documentElement.dir:null;this.value=function(B){const z=(null==B?void 0:B.toLowerCase())||"";return"auto"===z&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n.test(navigator.language)?"rtl":"ltr":"rtl"===z?"rtl":"ltr"}((oe.body?oe.body.dir:null)||se||"ltr")}}ngOnDestroy(){this.change.complete()}}return B.\u0275fac=function(oe){return new(oe||B)(E.LFG(t,8))},B.\u0275prov=E.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),D=(()=>{class B{}return B.\u0275fac=function(oe){return new(oe||B)},B.\u0275mod=E.oAB({type:B}),B.\u0275inj=E.cJS({}),B})()},63191:(V,Z,g)=>{"use strict";g.d(Z,{Eq:()=>n,Ig:()=>m,HM:()=>a,fI:()=>d,su:()=>t,du:()=>C});var E=g(5e3);function m(D){return null!=D&&"false"!=`${D}`}function t(D,B=0){return function(D){return!isNaN(parseFloat(D))&&!isNaN(Number(D))}(D)?Number(D):B}function n(D){return Array.isArray(D)?D:[D]}function a(D){return null==D?"":"string"==typeof D?D:`${D}px`}function d(D){return D instanceof E.SBq?D.nativeElement:D}function C(D,B=/\s+/){const z=[];if(null!=D){const oe=Array.isArray(D)?D:`${D}`.split(B);for(const be of oe){const se=`${be}`.trim();se&&z.push(se)}}return z}},91159:(V,Z,g)=>{"use strict";g.d(Z,{A:()=>Zt,zL:()=>C,ZH:()=>m,jx:()=>d,yY:()=>ge,JH:()=>$e,uR:()=>Ie,K5:()=>n,hY:()=>z,Sd:()=>Ge,oh:()=>_e,b2:()=>Zn,MW:()=>yi,aO:()=>dt,VM:()=>se,Ku:()=>be,SV:()=>We,JU:()=>a,L_:()=>oe,Mf:()=>t,LH:()=>Le,Z:()=>wi,xE:()=>ae,Vb:()=>Yn});const m=8,t=9,n=13,a=16,d=17,C=18,z=27,oe=32,be=33,se=34,Ie=35,Ge=36,_e=37,Le=38,We=39,$e=40,ge=46,ae=48,dt=57,Zt=65,wi=90,yi=91,Zn=224;function Yn(sr,...Bn){return Bn.length?Bn.some(Ao=>sr[Ao]):sr.altKey||sr.shiftKey||sr.ctrlKey||sr.metaKey}},95113:(V,Z,g)=>{"use strict";g.d(Z,{Yg:()=>$e,u3:()=>ye});var E=g(5e3),m=g(63191),t=g(77579),e=g(39841),n=g(97272),a=g(68306),d=g(95698),C=g(35684),D=g(78372),B=g(54004),z=g(68675),oe=g(82722),be=g(70925);const Ie=new Set;let Ge,_e=(()=>{class ne{constructor(ae){this._platform=ae,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):We}matchMedia(ae){return(this._platform.WEBKIT||this._platform.BLINK)&&function(ne){if(!Ie.has(ne))try{Ge||(Ge=document.createElement("style"),Ge.setAttribute("type","text/css"),document.head.appendChild(Ge)),Ge.sheet&&(Ge.sheet.insertRule(`@media ${ne} {body{ }}`,0),Ie.add(ne))}catch(ge){console.error(ge)}}(ae),this._matchMedia(ae)}}return ne.\u0275fac=function(ae){return new(ae||ne)(E.LFG(be.t4))},ne.\u0275prov=E.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();function We(ne){return{matches:"all"===ne||""===ne,media:ne,addListener:()=>{},removeListener:()=>{}}}let $e=(()=>{class ne{constructor(ae,He){this._mediaMatcher=ae,this._zone=He,this._queries=new Map,this._destroySubject=new t.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(ae){return Te((0,m.Eq)(ae)).some(Se=>this._registerQuery(Se).mql.matches)}observe(ae){const Se=Te((0,m.Eq)(ae)).map(ue=>this._registerQuery(ue).observable);let Ee=(0,e.a)(Se);return Ee=(0,n.z)(Ee.pipe((0,d.q)(1)),Ee.pipe((0,C.T)(1),(0,D.b)(0))),Ee.pipe((0,B.U)(ue=>{const ie={matches:!1,breakpoints:{}};return ue.forEach(({matches:ht,query:Oe})=>{ie.matches=ie.matches||ht,ie.breakpoints[Oe]=ht}),ie}))}_registerQuery(ae){if(this._queries.has(ae))return this._queries.get(ae);const He=this._mediaMatcher.matchMedia(ae),Ee={observable:new a.y(ue=>{const ie=ht=>this._zone.run(()=>ue.next(ht));return He.addListener(ie),()=>{He.removeListener(ie)}}).pipe((0,z.O)(He),(0,B.U)(({matches:ue})=>({query:ae,matches:ue})),(0,oe.R)(this._destroySubject)),mql:He};return this._queries.set(ae,Ee),Ee}}return ne.\u0275fac=function(ae){return new(ae||ne)(E.LFG(_e),E.LFG(E.R0b))},ne.\u0275prov=E.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();function Te(ne){return ne.map(ge=>ge.split(",")).reduce((ge,ae)=>ge.concat(ae)).map(ge=>ge.trim())}const ye={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},17144:(V,Z,g)=>{"use strict";g.d(Z,{wD:()=>C,Q8:()=>D});var E=g(63191),m=g(5e3),t=g(68306),e=g(77579),n=g(78372);let a=(()=>{class B{create(oe){return"undefined"==typeof MutationObserver?null:new MutationObserver(oe)}}return B.\u0275fac=function(oe){return new(oe||B)},B.\u0275prov=m.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),d=(()=>{class B{constructor(oe){this._mutationObserverFactory=oe,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((oe,be)=>this._cleanupObserver(be))}observe(oe){const be=(0,E.fI)(oe);return new t.y(se=>{const Ge=this._observeElement(be).subscribe(se);return()=>{Ge.unsubscribe(),this._unobserveElement(be)}})}_observeElement(oe){if(this._observedElements.has(oe))this._observedElements.get(oe).count++;else{const be=new e.x,se=this._mutationObserverFactory.create(Ie=>be.next(Ie));se&&se.observe(oe,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(oe,{observer:se,stream:be,count:1})}return this._observedElements.get(oe).stream}_unobserveElement(oe){this._observedElements.has(oe)&&(this._observedElements.get(oe).count--,this._observedElements.get(oe).count||this._cleanupObserver(oe))}_cleanupObserver(oe){if(this._observedElements.has(oe)){const{observer:be,stream:se}=this._observedElements.get(oe);be&&be.disconnect(),se.complete(),this._observedElements.delete(oe)}}}return B.\u0275fac=function(oe){return new(oe||B)(m.LFG(a))},B.\u0275prov=m.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),C=(()=>{class B{constructor(oe,be,se){this._contentObserver=oe,this._elementRef=be,this._ngZone=se,this.event=new m.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(oe){this._disabled=(0,E.Ig)(oe),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(oe){this._debounce=(0,E.su)(oe),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const oe=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?oe.pipe((0,n.b)(this.debounce)):oe).subscribe(this.event)})}_unsubscribe(){var oe;null===(oe=this._currentSubscription)||void 0===oe||oe.unsubscribe()}}return B.\u0275fac=function(oe){return new(oe||B)(m.Y36(d),m.Y36(m.SBq),m.Y36(m.R0b))},B.\u0275dir=m.lG2({type:B,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),B})(),D=(()=>{class B{}return B.\u0275fac=function(oe){return new(oe||B)},B.\u0275mod=m.oAB({type:B}),B.\u0275inj=m.cJS({providers:[a]}),B})()},91314:(V,Z,g)=>{"use strict";g.d(Z,{aV:()=>gi,X_:()=>ye,Xj:()=>ue,U8:()=>jt});var E=g(30495),m=g(69808),t=g(5e3),e=g(63191),n=g(70925),a=g(50226),d=g(47429),C=g(77579),D=g(50727),B=g(56451),z=g(95698),oe=g(82722);const be=(0,n.Mq)();class se{constructor(et,tt){this._viewportRuler=et,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=tt}attach(){}enable(){if(this._canBeEnabled()){const et=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=et.style.left||"",this._previousHTMLStyles.top=et.style.top||"",et.style.left=(0,e.HM)(-this._previousScrollPosition.left),et.style.top=(0,e.HM)(-this._previousScrollPosition.top),et.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const et=this._document.documentElement,Lt=et.style,nt=this._document.body.style,mt=Lt.scrollBehavior||"",yt=nt.scrollBehavior||"";this._isEnabled=!1,Lt.left=this._previousHTMLStyles.left,Lt.top=this._previousHTMLStyles.top,et.classList.remove("cdk-global-scrollblock"),be&&(Lt.scrollBehavior=nt.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),be&&(Lt.scrollBehavior=mt,nt.scrollBehavior=yt)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const tt=this._document.body,Lt=this._viewportRuler.getViewportSize();return tt.scrollHeight>Lt.height||tt.scrollWidth>Lt.width}}class Ge{constructor(et,tt,Lt,nt){this._scrollDispatcher=et,this._ngZone=tt,this._viewportRuler=Lt,this._config=nt,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(et){this._overlayRef=et}enable(){if(this._scrollSubscription)return;const et=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=et.subscribe(()=>{const tt=this._viewportRuler.getViewportScrollPosition().top;Math.abs(tt-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=et.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _e{enable(){}disable(){}attach(){}}function Le(Rt,et){return et.some(tt=>Rt.bottom<tt.top||Rt.top>tt.bottom||Rt.right<tt.left||Rt.left>tt.right)}function We(Rt,et){return et.some(tt=>Rt.top<tt.top||Rt.bottom>tt.bottom||Rt.left<tt.left||Rt.right>tt.right)}class $e{constructor(et,tt,Lt,nt){this._scrollDispatcher=et,this._viewportRuler=tt,this._ngZone=Lt,this._config=nt,this._scrollSubscription=null}attach(et){this._overlayRef=et}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const tt=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Lt,height:nt}=this._viewportRuler.getViewportSize();Le(tt,[{width:Lt,height:nt,bottom:nt,right:Lt,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Te=(()=>{class Rt{constructor(tt,Lt,nt,mt){this._scrollDispatcher=tt,this._viewportRuler=Lt,this._ngZone=nt,this.noop=()=>new _e,this.close=yt=>new Ge(this._scrollDispatcher,this._ngZone,this._viewportRuler,yt),this.block=()=>new se(this._viewportRuler,this._document),this.reposition=yt=>new $e(this._scrollDispatcher,this._viewportRuler,this._ngZone,yt),this._document=mt}}return Rt.\u0275fac=function(tt){return new(tt||Rt)(t.LFG(E.mF),t.LFG(E.rL),t.LFG(t.R0b),t.LFG(m.K0))},Rt.\u0275prov=t.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})();class ye{constructor(et){if(this.scrollStrategy=new _e,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,et){const tt=Object.keys(et);for(const Lt of tt)void 0!==et[Lt]&&(this[Lt]=et[Lt])}}}class ae{constructor(et,tt){this.connectionPair=et,this.scrollableViewProperties=tt}}class Ee{constructor(et,tt,Lt,nt,mt,yt,Ze,ut,ei){this._portalOutlet=et,this._host=tt,this._pane=Lt,this._config=nt,this._ngZone=mt,this._keyboardDispatcher=yt,this._document=Ze,this._location=ut,this._outsideClickDispatcher=ei,this._backdropElement=null,this._backdropClick=new C.x,this._attachments=new C.x,this._detachments=new C.x,this._locationChanges=D.w0.EMPTY,this._backdropClickHandler=ni=>this._backdropClick.next(ni),this._keydownEvents=new C.x,this._outsidePointerEvents=new C.x,nt.scrollStrategy&&(this._scrollStrategy=nt.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=nt.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(et){let tt=this._portalOutlet.attach(et);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,z.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),tt}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const et=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),et}dispose(){var et;const tt=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(et=this._host)||void 0===et||et.remove(),this._previousHostParent=this._pane=this._host=null,tt&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(et){et!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=et,this.hasAttached()&&(et.attach(this),this.updatePosition()))}updateSize(et){this._config=Object.assign(Object.assign({},this._config),et),this._updateElementSize()}setDirection(et){this._config=Object.assign(Object.assign({},this._config),{direction:et}),this._updateElementDirection()}addPanelClass(et){this._pane&&this._toggleClasses(this._pane,et,!0)}removePanelClass(et){this._pane&&this._toggleClasses(this._pane,et,!1)}getDirection(){const et=this._config.direction;return et?"string"==typeof et?et:et.value:"ltr"}updateScrollStrategy(et){et!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=et,this.hasAttached()&&(et.attach(this),et.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const et=this._pane.style;et.width=(0,e.HM)(this._config.width),et.height=(0,e.HM)(this._config.height),et.minWidth=(0,e.HM)(this._config.minWidth),et.minHeight=(0,e.HM)(this._config.minHeight),et.maxWidth=(0,e.HM)(this._config.maxWidth),et.maxHeight=(0,e.HM)(this._config.maxHeight)}_togglePointerEvents(et){this._pane.style.pointerEvents=et?"":"none"}_attachBackdrop(){const et="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(et)})}):this._backdropElement.classList.add(et)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const et=this._backdropElement;if(!et)return;let tt;const Lt=()=>{et&&(et.removeEventListener("click",this._backdropClickHandler),et.removeEventListener("transitionend",Lt),this._disposeBackdrop(et)),this._config.backdropClass&&this._toggleClasses(et,this._config.backdropClass,!1),clearTimeout(tt)};et.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{et.addEventListener("transitionend",Lt)}),et.style.pointerEvents="none",tt=this._ngZone.runOutsideAngular(()=>setTimeout(Lt,500))}_toggleClasses(et,tt,Lt){const nt=(0,e.Eq)(tt||[]).filter(mt=>!!mt);nt.length&&(Lt?et.classList.add(...nt):et.classList.remove(...nt))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const et=this._ngZone.onStable.pipe((0,oe.R)((0,B.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),et.unsubscribe())})})}_disposeScrollStrategy(){const et=this._scrollStrategy;et&&(et.disable(),et.detach&&et.detach())}_disposeBackdrop(et){et&&(et.remove(),this._backdropElement===et&&(this._backdropElement=null))}}let ue=(()=>{class Rt{constructor(tt,Lt){this._platform=Lt,this._document=tt}ngOnDestroy(){var tt;null===(tt=this._containerElement)||void 0===tt||tt.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const tt="cdk-overlay-container";if(this._platform.isBrowser||(0,n.Oy)()){const nt=this._document.querySelectorAll(`.${tt}[platform="server"], .${tt}[platform="test"]`);for(let mt=0;mt<nt.length;mt++)nt[mt].remove()}const Lt=this._document.createElement("div");Lt.classList.add(tt),(0,n.Oy)()?Lt.setAttribute("platform","test"):this._platform.isBrowser||Lt.setAttribute("platform","server"),this._document.body.appendChild(Lt),this._containerElement=Lt}}return Rt.\u0275fac=function(tt){return new(tt||Rt)(t.LFG(m.K0),t.LFG(n.t4))},Rt.\u0275prov=t.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})();const ie="cdk-overlay-connected-position-bounding-box",ht=/([A-Za-z%]+)$/;class Oe{constructor(et,tt,Lt,nt,mt){this._viewportRuler=tt,this._document=Lt,this._platform=nt,this._overlayContainer=mt,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new C.x,this._resizeSubscription=D.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(et)}get positions(){return this._preferredPositions}attach(et){this._validatePositions(),et.hostElement.classList.add(ie),this._overlayRef=et,this._boundingBox=et.hostElement,this._pane=et.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const et=this._originRect,tt=this._overlayRect,Lt=this._viewportRect,nt=[];let mt;for(let yt of this._preferredPositions){let Ze=this._getOriginPoint(et,yt),ut=this._getOverlayPoint(Ze,tt,yt),ei=this._getOverlayFit(ut,tt,Lt,yt);if(ei.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(yt,Ze);this._canFitWithFlexibleDimensions(ei,ut,Lt)?nt.push({position:yt,origin:Ze,overlayRect:tt,boundingBoxRect:this._calculateBoundingBoxRect(Ze,yt)}):(!mt||mt.overlayFit.visibleArea<ei.visibleArea)&&(mt={overlayFit:ei,overlayPoint:ut,originPoint:Ze,position:yt,overlayRect:tt})}if(nt.length){let yt=null,Ze=-1;for(const ut of nt){const ei=ut.boundingBoxRect.width*ut.boundingBoxRect.height*(ut.position.weight||1);ei>Ze&&(Ze=ei,yt=ut)}return this._isPushed=!1,void this._applyPosition(yt.position,yt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(mt.position,mt.originPoint);this._applyPosition(mt.position,mt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ke(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ie),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const et=this._lastPosition||this._preferredPositions[0],tt=this._getOriginPoint(this._originRect,et);this._applyPosition(et,tt)}}withScrollableContainers(et){return this._scrollables=et,this}withPositions(et){return this._preferredPositions=et,-1===et.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(et){return this._viewportMargin=et,this}withFlexibleDimensions(et=!0){return this._hasFlexibleDimensions=et,this}withGrowAfterOpen(et=!0){return this._growAfterOpen=et,this}withPush(et=!0){return this._canPush=et,this}withLockedPosition(et=!0){return this._positionLocked=et,this}setOrigin(et){return this._origin=et,this}withDefaultOffsetX(et){return this._offsetX=et,this}withDefaultOffsetY(et){return this._offsetY=et,this}withTransformOriginOn(et){return this._transformOriginSelector=et,this}_getOriginPoint(et,tt){let Lt,nt;if("center"==tt.originX)Lt=et.left+et.width/2;else{const mt=this._isRtl()?et.right:et.left,yt=this._isRtl()?et.left:et.right;Lt="start"==tt.originX?mt:yt}return nt="center"==tt.originY?et.top+et.height/2:"top"==tt.originY?et.top:et.bottom,{x:Lt,y:nt}}_getOverlayPoint(et,tt,Lt){let nt,mt;return nt="center"==Lt.overlayX?-tt.width/2:"start"===Lt.overlayX?this._isRtl()?-tt.width:0:this._isRtl()?0:-tt.width,mt="center"==Lt.overlayY?-tt.height/2:"top"==Lt.overlayY?0:-tt.height,{x:et.x+nt,y:et.y+mt}}_getOverlayFit(et,tt,Lt,nt){const mt=vt(tt);let{x:yt,y:Ze}=et,ut=this._getOffset(nt,"x"),ei=this._getOffset(nt,"y");ut&&(yt+=ut),ei&&(Ze+=ei);let wi=0-Ze,yi=Ze+mt.height-Lt.height,pn=this._subtractOverflows(mt.width,0-yt,yt+mt.width-Lt.width),mi=this._subtractOverflows(mt.height,wi,yi),Ji=pn*mi;return{visibleArea:Ji,isCompletelyWithinViewport:mt.width*mt.height===Ji,fitsInViewportVertically:mi===mt.height,fitsInViewportHorizontally:pn==mt.width}}_canFitWithFlexibleDimensions(et,tt,Lt){if(this._hasFlexibleDimensions){const nt=Lt.bottom-tt.y,mt=Lt.right-tt.x,yt=dt(this._overlayRef.getConfig().minHeight),Ze=dt(this._overlayRef.getConfig().minWidth),ei=et.fitsInViewportHorizontally||null!=Ze&&Ze<=mt;return(et.fitsInViewportVertically||null!=yt&&yt<=nt)&&ei}return!1}_pushOverlayOnScreen(et,tt,Lt){if(this._previousPushAmount&&this._positionLocked)return{x:et.x+this._previousPushAmount.x,y:et.y+this._previousPushAmount.y};const nt=vt(tt),mt=this._viewportRect,yt=Math.max(et.x+nt.width-mt.width,0),Ze=Math.max(et.y+nt.height-mt.height,0),ut=Math.max(mt.top-Lt.top-et.y,0),ei=Math.max(mt.left-Lt.left-et.x,0);let ni=0,Ni=0;return ni=nt.width<=mt.width?ei||-yt:et.x<this._viewportMargin?mt.left-Lt.left-et.x:0,Ni=nt.height<=mt.height?ut||-Ze:et.y<this._viewportMargin?mt.top-Lt.top-et.y:0,this._previousPushAmount={x:ni,y:Ni},{x:et.x+ni,y:et.y+Ni}}_applyPosition(et,tt){if(this._setTransformOrigin(et),this._setOverlayElementStyles(tt,et),this._setBoundingBoxStyles(tt,et),et.panelClass&&this._addPanelClasses(et.panelClass),this._lastPosition=et,this._positionChanges.observers.length){const Lt=this._getScrollVisibility(),nt=new ae(et,Lt);this._positionChanges.next(nt)}this._isInitialRender=!1}_setTransformOrigin(et){if(!this._transformOriginSelector)return;const tt=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Lt,nt=et.overlayY;Lt="center"===et.overlayX?"center":this._isRtl()?"start"===et.overlayX?"right":"left":"start"===et.overlayX?"left":"right";for(let mt=0;mt<tt.length;mt++)tt[mt].style.transformOrigin=`${Lt} ${nt}`}_calculateBoundingBoxRect(et,tt){const Lt=this._viewportRect,nt=this._isRtl();let mt,yt,Ze,ni,Ni,wi;if("top"===tt.overlayY)yt=et.y,mt=Lt.height-yt+this._viewportMargin;else if("bottom"===tt.overlayY)Ze=Lt.height-et.y+2*this._viewportMargin,mt=Lt.height-Ze+this._viewportMargin;else{const yi=Math.min(Lt.bottom-et.y+Lt.top,et.y),pn=this._lastBoundingBoxSize.height;mt=2*yi,yt=et.y-yi,mt>pn&&!this._isInitialRender&&!this._growAfterOpen&&(yt=et.y-pn/2)}if("end"===tt.overlayX&&!nt||"start"===tt.overlayX&&nt)wi=Lt.width-et.x+this._viewportMargin,ni=et.x-this._viewportMargin;else if("start"===tt.overlayX&&!nt||"end"===tt.overlayX&&nt)Ni=et.x,ni=Lt.right-et.x;else{const yi=Math.min(Lt.right-et.x+Lt.left,et.x),pn=this._lastBoundingBoxSize.width;ni=2*yi,Ni=et.x-yi,ni>pn&&!this._isInitialRender&&!this._growAfterOpen&&(Ni=et.x-pn/2)}return{top:yt,left:Ni,bottom:Ze,right:wi,width:ni,height:mt}}_setBoundingBoxStyles(et,tt){const Lt=this._calculateBoundingBoxRect(et,tt);!this._isInitialRender&&!this._growAfterOpen&&(Lt.height=Math.min(Lt.height,this._lastBoundingBoxSize.height),Lt.width=Math.min(Lt.width,this._lastBoundingBoxSize.width));const nt={};if(this._hasExactPosition())nt.top=nt.left="0",nt.bottom=nt.right=nt.maxHeight=nt.maxWidth="",nt.width=nt.height="100%";else{const mt=this._overlayRef.getConfig().maxHeight,yt=this._overlayRef.getConfig().maxWidth;nt.height=(0,e.HM)(Lt.height),nt.top=(0,e.HM)(Lt.top),nt.bottom=(0,e.HM)(Lt.bottom),nt.width=(0,e.HM)(Lt.width),nt.left=(0,e.HM)(Lt.left),nt.right=(0,e.HM)(Lt.right),nt.alignItems="center"===tt.overlayX?"center":"end"===tt.overlayX?"flex-end":"flex-start",nt.justifyContent="center"===tt.overlayY?"center":"bottom"===tt.overlayY?"flex-end":"flex-start",mt&&(nt.maxHeight=(0,e.HM)(mt)),yt&&(nt.maxWidth=(0,e.HM)(yt))}this._lastBoundingBoxSize=Lt,ke(this._boundingBox.style,nt)}_resetBoundingBoxStyles(){ke(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ke(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(et,tt){const Lt={},nt=this._hasExactPosition(),mt=this._hasFlexibleDimensions,yt=this._overlayRef.getConfig();if(nt){const ni=this._viewportRuler.getViewportScrollPosition();ke(Lt,this._getExactOverlayY(tt,et,ni)),ke(Lt,this._getExactOverlayX(tt,et,ni))}else Lt.position="static";let Ze="",ut=this._getOffset(tt,"x"),ei=this._getOffset(tt,"y");ut&&(Ze+=`translateX(${ut}px) `),ei&&(Ze+=`translateY(${ei}px)`),Lt.transform=Ze.trim(),yt.maxHeight&&(nt?Lt.maxHeight=(0,e.HM)(yt.maxHeight):mt&&(Lt.maxHeight="")),yt.maxWidth&&(nt?Lt.maxWidth=(0,e.HM)(yt.maxWidth):mt&&(Lt.maxWidth="")),ke(this._pane.style,Lt)}_getExactOverlayY(et,tt,Lt){let nt={top:"",bottom:""},mt=this._getOverlayPoint(tt,this._overlayRect,et);this._isPushed&&(mt=this._pushOverlayOnScreen(mt,this._overlayRect,Lt));let yt=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return mt.y-=yt,"bottom"===et.overlayY?nt.bottom=this._document.documentElement.clientHeight-(mt.y+this._overlayRect.height)+"px":nt.top=(0,e.HM)(mt.y),nt}_getExactOverlayX(et,tt,Lt){let yt,nt={left:"",right:""},mt=this._getOverlayPoint(tt,this._overlayRect,et);return this._isPushed&&(mt=this._pushOverlayOnScreen(mt,this._overlayRect,Lt)),yt=this._isRtl()?"end"===et.overlayX?"left":"right":"end"===et.overlayX?"right":"left","right"===yt?nt.right=this._document.documentElement.clientWidth-(mt.x+this._overlayRect.width)+"px":nt.left=(0,e.HM)(mt.x),nt}_getScrollVisibility(){const et=this._getOriginRect(),tt=this._pane.getBoundingClientRect(),Lt=this._scrollables.map(nt=>nt.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:We(et,Lt),isOriginOutsideView:Le(et,Lt),isOverlayClipped:We(tt,Lt),isOverlayOutsideView:Le(tt,Lt)}}_subtractOverflows(et,...tt){return tt.reduce((Lt,nt)=>Lt-Math.max(nt,0),et)}_getNarrowedViewportRect(){const et=this._document.documentElement.clientWidth,tt=this._document.documentElement.clientHeight,Lt=this._viewportRuler.getViewportScrollPosition();return{top:Lt.top+this._viewportMargin,left:Lt.left+this._viewportMargin,right:Lt.left+et-this._viewportMargin,bottom:Lt.top+tt-this._viewportMargin,width:et-2*this._viewportMargin,height:tt-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(et,tt){return"x"===tt?null==et.offsetX?this._offsetX:et.offsetX:null==et.offsetY?this._offsetY:et.offsetY}_validatePositions(){}_addPanelClasses(et){this._pane&&(0,e.Eq)(et).forEach(tt=>{""!==tt&&-1===this._appliedPanelClasses.indexOf(tt)&&(this._appliedPanelClasses.push(tt),this._pane.classList.add(tt))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(et=>{this._pane.classList.remove(et)}),this._appliedPanelClasses=[])}_getOriginRect(){const et=this._origin;if(et instanceof t.SBq)return et.nativeElement.getBoundingClientRect();if(et instanceof Element)return et.getBoundingClientRect();const tt=et.width||0,Lt=et.height||0;return{top:et.y,bottom:et.y+Lt,left:et.x,right:et.x+tt,height:Lt,width:tt}}}function ke(Rt,et){for(let tt in et)et.hasOwnProperty(tt)&&(Rt[tt]=et[tt]);return Rt}function dt(Rt){if("number"!=typeof Rt&&null!=Rt){const[et,tt]=Rt.split(ht);return tt&&"px"!==tt?null:parseFloat(et)}return Rt||null}function vt(Rt){return{top:Math.floor(Rt.top),right:Math.floor(Rt.right),bottom:Math.floor(Rt.bottom),left:Math.floor(Rt.left),width:Math.floor(Rt.width),height:Math.floor(Rt.height)}}const lt="cdk-global-overlay-wrapper";class Bt{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(et){const tt=et.getConfig();this._overlayRef=et,this._width&&!tt.width&&et.updateSize({width:this._width}),this._height&&!tt.height&&et.updateSize({height:this._height}),et.hostElement.classList.add(lt),this._isDisposed=!1}top(et=""){return this._bottomOffset="",this._topOffset=et,this._alignItems="flex-start",this}left(et=""){return this._rightOffset="",this._leftOffset=et,this._justifyContent="flex-start",this}bottom(et=""){return this._topOffset="",this._bottomOffset=et,this._alignItems="flex-end",this}right(et=""){return this._leftOffset="",this._rightOffset=et,this._justifyContent="flex-end",this}width(et=""){return this._overlayRef?this._overlayRef.updateSize({width:et}):this._width=et,this}height(et=""){return this._overlayRef?this._overlayRef.updateSize({height:et}):this._height=et,this}centerHorizontally(et=""){return this.left(et),this._justifyContent="center",this}centerVertically(et=""){return this.top(et),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const et=this._overlayRef.overlayElement.style,tt=this._overlayRef.hostElement.style,Lt=this._overlayRef.getConfig(),{width:nt,height:mt,maxWidth:yt,maxHeight:Ze}=Lt,ut=!("100%"!==nt&&"100vw"!==nt||yt&&"100%"!==yt&&"100vw"!==yt),ei=!("100%"!==mt&&"100vh"!==mt||Ze&&"100%"!==Ze&&"100vh"!==Ze);et.position=this._cssPosition,et.marginLeft=ut?"0":this._leftOffset,et.marginTop=ei?"0":this._topOffset,et.marginBottom=this._bottomOffset,et.marginRight=this._rightOffset,ut?tt.justifyContent="flex-start":"center"===this._justifyContent?tt.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?tt.justifyContent="flex-end":"flex-end"===this._justifyContent&&(tt.justifyContent="flex-start"):tt.justifyContent=this._justifyContent,tt.alignItems=ei?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const et=this._overlayRef.overlayElement.style,tt=this._overlayRef.hostElement,Lt=tt.style;tt.classList.remove(lt),Lt.justifyContent=Lt.alignItems=et.marginTop=et.marginBottom=et.marginLeft=et.marginRight=et.position="",this._overlayRef=null,this._isDisposed=!0}}let Pt=(()=>{class Rt{constructor(tt,Lt,nt,mt){this._viewportRuler=tt,this._document=Lt,this._platform=nt,this._overlayContainer=mt}global(){return new Bt}flexibleConnectedTo(tt){return new Oe(tt,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Rt.\u0275fac=function(tt){return new(tt||Rt)(t.LFG(E.rL),t.LFG(m.K0),t.LFG(n.t4),t.LFG(ue))},Rt.\u0275prov=t.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})(),Zt=(()=>{class Rt{constructor(tt){this._attachedOverlays=[],this._document=tt}ngOnDestroy(){this.detach()}add(tt){this.remove(tt),this._attachedOverlays.push(tt)}remove(tt){const Lt=this._attachedOverlays.indexOf(tt);Lt>-1&&this._attachedOverlays.splice(Lt,1),0===this._attachedOverlays.length&&this.detach()}}return Rt.\u0275fac=function(tt){return new(tt||Rt)(t.LFG(m.K0))},Rt.\u0275prov=t.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})(),Di=(()=>{class Rt extends Zt{constructor(tt){super(tt),this._keydownListener=Lt=>{const nt=this._attachedOverlays;for(let mt=nt.length-1;mt>-1;mt--)if(nt[mt]._keydownEvents.observers.length>0){nt[mt]._keydownEvents.next(Lt);break}}}add(tt){super.add(tt),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Rt.\u0275fac=function(tt){return new(tt||Rt)(t.LFG(m.K0))},Rt.\u0275prov=t.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})(),ii=(()=>{class Rt extends Zt{constructor(tt,Lt){super(tt),this._platform=Lt,this._cursorStyleIsSet=!1,this._pointerDownListener=nt=>{this._pointerDownEventTarget=(0,n.sA)(nt)},this._clickListener=nt=>{const mt=(0,n.sA)(nt),yt="click"===nt.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:mt;this._pointerDownEventTarget=null;const Ze=this._attachedOverlays.slice();for(let ut=Ze.length-1;ut>-1;ut--){const ei=Ze[ut];if(!(ei._outsidePointerEvents.observers.length<1)&&ei.hasAttached()){if(ei.overlayElement.contains(mt)||ei.overlayElement.contains(yt))break;ei._outsidePointerEvents.next(nt)}}}}add(tt){if(super.add(tt),!this._isAttached){const Lt=this._document.body;Lt.addEventListener("pointerdown",this._pointerDownListener,!0),Lt.addEventListener("click",this._clickListener,!0),Lt.addEventListener("auxclick",this._clickListener,!0),Lt.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Lt.style.cursor,Lt.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const tt=this._document.body;tt.removeEventListener("pointerdown",this._pointerDownListener,!0),tt.removeEventListener("click",this._clickListener,!0),tt.removeEventListener("auxclick",this._clickListener,!0),tt.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(tt.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Rt.\u0275fac=function(tt){return new(tt||Rt)(t.LFG(m.K0),t.LFG(n.t4))},Rt.\u0275prov=t.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})(),Ct=0,gi=(()=>{class Rt{constructor(tt,Lt,nt,mt,yt,Ze,ut,ei,ni,Ni,wi){this.scrollStrategies=tt,this._overlayContainer=Lt,this._componentFactoryResolver=nt,this._positionBuilder=mt,this._keyboardDispatcher=yt,this._injector=Ze,this._ngZone=ut,this._document=ei,this._directionality=ni,this._location=Ni,this._outsideClickDispatcher=wi}create(tt){const Lt=this._createHostElement(),nt=this._createPaneElement(Lt),mt=this._createPortalOutlet(nt),yt=new ye(tt);return yt.direction=yt.direction||this._directionality.value,new Ee(mt,Lt,nt,yt,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(tt){const Lt=this._document.createElement("div");return Lt.id="cdk-overlay-"+Ct++,Lt.classList.add("cdk-overlay-pane"),tt.appendChild(Lt),Lt}_createHostElement(){const tt=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(tt),tt}_createPortalOutlet(tt){return this._appRef||(this._appRef=this._injector.get(t.z2F)),new d.u0(tt,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Rt.\u0275fac=function(tt){return new(tt||Rt)(t.LFG(Te),t.LFG(ue),t.LFG(t._Vd),t.LFG(Pt),t.LFG(Di),t.LFG(t.zs3),t.LFG(t.R0b),t.LFG(m.K0),t.LFG(a.Is),t.LFG(m.Ye),t.LFG(ii))},Rt.\u0275prov=t.Yz7({token:Rt,factory:Rt.\u0275fac}),Rt})();const pt={provide:new t.OlP("cdk-connected-overlay-scroll-strategy"),deps:[gi],useFactory:function(Rt){return()=>Rt.scrollStrategies.reposition()}};let jt=(()=>{class Rt{}return Rt.\u0275fac=function(tt){return new(tt||Rt)},Rt.\u0275mod=t.oAB({type:Rt}),Rt.\u0275inj=t.cJS({providers:[gi,pt],imports:[[a.vT,d.eL,E.Cl],E.Cl]}),Rt})()},70925:(V,Z,g)=>{"use strict";g.d(Z,{t4:()=>e,ud:()=>n,sA:()=>$e,ht:()=>We,kV:()=>Le,Oy:()=>Te,_i:()=>Ie,qK:()=>C,i$:()=>z,Mq:()=>se});var E=g(5e3),m=g(69808);let t;try{t="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(ye){t=!1}let a,e=(()=>{class ye{constructor(ge){this._platformId=ge,this.isBrowser=this._platformId?(0,m.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!t)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return ye.\u0275fac=function(ge){return new(ge||ye)(E.LFG(E.Lbi))},ye.\u0275prov=E.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})(),n=(()=>{class ye{}return ye.\u0275fac=function(ge){return new(ge||ye)},ye.\u0275mod=E.oAB({type:ye}),ye.\u0275inj=E.cJS({}),ye})();const d=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function C(){if(a)return a;if("object"!=typeof document||!document)return a=new Set(d),a;let ye=document.createElement("input");return a=new Set(d.filter(ne=>(ye.setAttribute("type",ne),ye.type===ne))),a}let D,oe,be,Ge;function z(ye){return function(){if(null==D&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>D=!0}))}finally{D=D||!1}return D}()?ye:!!ye.capture}function se(){if(null==be){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return be=!1,be;if("scrollBehavior"in document.documentElement.style)be=!0;else{const ye=Element.prototype.scrollTo;be=!!ye&&!/\{\s*\[native code\]\s*\}/.test(ye.toString())}}return be}function Ie(){if("object"!=typeof document||!document)return 0;if(null==oe){const ye=document.createElement("div"),ne=ye.style;ye.dir="rtl",ne.width="1px",ne.overflow="auto",ne.visibility="hidden",ne.pointerEvents="none",ne.position="absolute";const ge=document.createElement("div"),ae=ge.style;ae.width="2px",ae.height="1px",ye.appendChild(ge),document.body.appendChild(ye),oe=0,0===ye.scrollLeft&&(ye.scrollLeft=1,oe=0===ye.scrollLeft?1:2),ye.remove()}return oe}function Le(ye){if(function(){if(null==Ge){const ye="undefined"!=typeof document?document.head:null;Ge=!(!ye||!ye.createShadowRoot&&!ye.attachShadow)}return Ge}()){const ne=ye.getRootNode?ye.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&ne instanceof ShadowRoot)return ne}return null}function We(){let ye="undefined"!=typeof document&&document?document.activeElement:null;for(;ye&&ye.shadowRoot;){const ne=ye.shadowRoot.activeElement;if(ne===ye)break;ye=ne}return ye}function $e(ye){return ye.composedPath?ye.composedPath()[0]:ye.target}function Te(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},47429:(V,Z,g)=>{"use strict";g.d(Z,{en:()=>be,ig:()=>_e,Pl:()=>We,C5:()=>B,u0:()=>Ie,eL:()=>Te,UE:()=>z});var E=g(5e3),m=g(69808);class D{attach(ge){return this._attachedHost=ge,ge.attach(this)}detach(){let ge=this._attachedHost;null!=ge&&(this._attachedHost=null,ge.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ge){this._attachedHost=ge}}class B extends D{constructor(ge,ae,He,Se){super(),this.component=ge,this.viewContainerRef=ae,this.injector=He,this.componentFactoryResolver=Se}}class z extends D{constructor(ge,ae,He){super(),this.templateRef=ge,this.viewContainerRef=ae,this.context=He}get origin(){return this.templateRef.elementRef}attach(ge,ae=this.context){return this.context=ae,super.attach(ge)}detach(){return this.context=void 0,super.detach()}}class oe extends D{constructor(ge){super(),this.element=ge instanceof E.SBq?ge.nativeElement:ge}}class be{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ge){return ge instanceof B?(this._attachedPortal=ge,this.attachComponentPortal(ge)):ge instanceof z?(this._attachedPortal=ge,this.attachTemplatePortal(ge)):this.attachDomPortal&&ge instanceof oe?(this._attachedPortal=ge,this.attachDomPortal(ge)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ge){this._disposeFn=ge}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ie extends be{constructor(ge,ae,He,Se,Ee){super(),this.outletElement=ge,this._componentFactoryResolver=ae,this._appRef=He,this._defaultInjector=Se,this.attachDomPortal=ue=>{const ie=ue.element,ht=this._document.createComment("dom-portal");ie.parentNode.insertBefore(ht,ie),this.outletElement.appendChild(ie),this._attachedPortal=ue,super.setDisposeFn(()=>{ht.parentNode&&ht.parentNode.replaceChild(ie,ht)})},this._document=Ee}attachComponentPortal(ge){const He=(ge.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ge.component);let Se;return ge.viewContainerRef?(Se=ge.viewContainerRef.createComponent(He,ge.viewContainerRef.length,ge.injector||ge.viewContainerRef.injector),this.setDisposeFn(()=>Se.destroy())):(Se=He.create(ge.injector||this._defaultInjector),this._appRef.attachView(Se.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Se.hostView),Se.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Se)),this._attachedPortal=ge,Se}attachTemplatePortal(ge){let ae=ge.viewContainerRef,He=ae.createEmbeddedView(ge.templateRef,ge.context);return He.rootNodes.forEach(Se=>this.outletElement.appendChild(Se)),He.detectChanges(),this.setDisposeFn(()=>{let Se=ae.indexOf(He);-1!==Se&&ae.remove(Se)}),this._attachedPortal=ge,He}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(ge){return ge.hostView.rootNodes[0]}}let _e=(()=>{class ne extends z{constructor(ae,He){super(ae,He)}}return ne.\u0275fac=function(ae){return new(ae||ne)(E.Y36(E.Rgc),E.Y36(E.s_b))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[E.qOj]}),ne})(),We=(()=>{class ne extends be{constructor(ae,He,Se){super(),this._componentFactoryResolver=ae,this._viewContainerRef=He,this._isInitialized=!1,this.attached=new E.vpe,this.attachDomPortal=Ee=>{const ue=Ee.element,ie=this._document.createComment("dom-portal");Ee.setAttachedHost(this),ue.parentNode.insertBefore(ie,ue),this._getRootNode().appendChild(ue),this._attachedPortal=Ee,super.setDisposeFn(()=>{ie.parentNode&&ie.parentNode.replaceChild(ue,ie)})},this._document=Se}get portal(){return this._attachedPortal}set portal(ae){this.hasAttached()&&!ae&&!this._isInitialized||(this.hasAttached()&&super.detach(),ae&&super.attach(ae),this._attachedPortal=ae||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(ae){ae.setAttachedHost(this);const He=null!=ae.viewContainerRef?ae.viewContainerRef:this._viewContainerRef,Ee=(ae.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ae.component),ue=He.createComponent(Ee,He.length,ae.injector||He.injector);return He!==this._viewContainerRef&&this._getRootNode().appendChild(ue.hostView.rootNodes[0]),super.setDisposeFn(()=>ue.destroy()),this._attachedPortal=ae,this._attachedRef=ue,this.attached.emit(ue),ue}attachTemplatePortal(ae){ae.setAttachedHost(this);const He=this._viewContainerRef.createEmbeddedView(ae.templateRef,ae.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=ae,this._attachedRef=He,this.attached.emit(He),He}_getRootNode(){const ae=this._viewContainerRef.element.nativeElement;return ae.nodeType===ae.ELEMENT_NODE?ae:ae.parentNode}}return ne.\u0275fac=function(ae){return new(ae||ne)(E.Y36(E._Vd),E.Y36(E.s_b),E.Y36(m.K0))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[E.qOj]}),ne})(),Te=(()=>{class ne{}return ne.\u0275fac=function(ae){return new(ae||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({}),ne})()},30495:(V,Z,g)=>{"use strict";g.d(Z,{PQ:()=>lt,ZD:()=>Be,mF:()=>vt,Cl:()=>Tt,rL:()=>Pt});var E=g(63191),m=g(5e3),t=g(84408),e=g(50727);const n={schedule(Je){let _t=requestAnimationFrame,xe=cancelAnimationFrame;const{delegate:pt}=n;pt&&(_t=pt.requestAnimationFrame,xe=pt.cancelAnimationFrame);const jt=_t(di=>{xe=void 0,Je(di)});return new e.w0(()=>null==xe?void 0:xe(jt))},requestAnimationFrame(...Je){const{delegate:_t}=n;return((null==_t?void 0:_t.requestAnimationFrame)||requestAnimationFrame)(...Je)},cancelAnimationFrame(...Je){const{delegate:_t}=n;return((null==_t?void 0:_t.cancelAnimationFrame)||cancelAnimationFrame)(...Je)},delegate:void 0};var d=g(97565);new class extends d.v{flush(_t){this._active=!0,this._scheduled=void 0;const{actions:xe}=this;let pt,jt=-1;_t=_t||xe.shift();const di=xe.length;do{if(pt=_t.execute(_t.state,_t.delay))break}while(++jt<di&&(_t=xe.shift()));if(this._active=!1,pt){for(;++jt<di&&(_t=xe.shift());)_t.unsubscribe();throw pt}}}(class extends t.o{constructor(_t,xe){super(_t,xe),this.scheduler=_t,this.work=xe}requestAsyncId(_t,xe,pt=0){return null!==pt&&pt>0?super.requestAsyncId(_t,xe,pt):(_t.actions.push(this),_t._scheduled||(_t._scheduled=n.requestAnimationFrame(()=>_t.flush(void 0))))}recycleAsyncId(_t,xe,pt=0){if(null!=pt&&pt>0||null==pt&&this.delay>0)return super.recycleAsyncId(_t,xe,pt);0===_t.actions.length&&(n.cancelAnimationFrame(xe),_t._scheduled=void 0)}});var z=g(77579),oe=g(39646),be=g(68306),se=g(54968),Ge=(g(53101),g(34986)),_e=g(54482),Le=g(38421),We=g(25403),Te=g(5963);function ye(Je,_t=Ge.P){return function(Je){return(0,_e.e)((_t,xe)=>{let pt=!1,jt=null,di=null,Rt=!1;const et=()=>{if(null==di||di.unsubscribe(),di=null,pt){pt=!1;const Lt=jt;jt=null,xe.next(Lt)}Rt&&xe.complete()},tt=()=>{di=null,Rt&&xe.complete()};_t.subscribe(new We.Q(xe,Lt=>{pt=!0,jt=Lt,di||(0,Le.Xf)(Je()).subscribe(di=new We.Q(xe,et,tt))},()=>{Rt=!0,(!pt||!di||di.closed)&&xe.complete()}))})}(()=>(0,Te.H)(Je,_t))}var ne=g(39300),ge=g(82722),ae=g(69808),He=g(70925),Se=g(50226);let vt=(()=>{class Je{constructor(xe,pt,jt){this._ngZone=xe,this._platform=pt,this._scrolled=new z.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=jt}register(xe){this.scrollContainers.has(xe)||this.scrollContainers.set(xe,xe.elementScrolled().subscribe(()=>this._scrolled.next(xe)))}deregister(xe){const pt=this.scrollContainers.get(xe);pt&&(pt.unsubscribe(),this.scrollContainers.delete(xe))}scrolled(xe=20){return this._platform.isBrowser?new be.y(pt=>{this._globalSubscription||this._addGlobalListener();const jt=xe>0?this._scrolled.pipe(ye(xe)).subscribe(pt):this._scrolled.subscribe(pt);return this._scrolledCount++,()=>{jt.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,oe.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((xe,pt)=>this.deregister(pt)),this._scrolled.complete()}ancestorScrolled(xe,pt){const jt=this.getAncestorScrollContainers(xe);return this.scrolled(pt).pipe((0,ne.h)(di=>!di||jt.indexOf(di)>-1))}getAncestorScrollContainers(xe){const pt=[];return this.scrollContainers.forEach((jt,di)=>{this._scrollableContainsElement(di,xe)&&pt.push(di)}),pt}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(xe,pt){let jt=(0,E.fI)(pt),di=xe.getElementRef().nativeElement;do{if(jt==di)return!0}while(jt=jt.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const xe=this._getWindow();return(0,se.R)(xe.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Je.\u0275fac=function(xe){return new(xe||Je)(m.LFG(m.R0b),m.LFG(He.t4),m.LFG(ae.K0,8))},Je.\u0275prov=m.Yz7({token:Je,factory:Je.\u0275fac,providedIn:"root"}),Je})(),lt=(()=>{class Je{constructor(xe,pt,jt,di){this.elementRef=xe,this.scrollDispatcher=pt,this.ngZone=jt,this.dir=di,this._destroyed=new z.x,this._elementScrolled=new be.y(Rt=>this.ngZone.runOutsideAngular(()=>(0,se.R)(this.elementRef.nativeElement,"scroll").pipe((0,ge.R)(this._destroyed)).subscribe(Rt)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(xe){const pt=this.elementRef.nativeElement,jt=this.dir&&"rtl"==this.dir.value;null==xe.left&&(xe.left=jt?xe.end:xe.start),null==xe.right&&(xe.right=jt?xe.start:xe.end),null!=xe.bottom&&(xe.top=pt.scrollHeight-pt.clientHeight-xe.bottom),jt&&0!=(0,He._i)()?(null!=xe.left&&(xe.right=pt.scrollWidth-pt.clientWidth-xe.left),2==(0,He._i)()?xe.left=xe.right:1==(0,He._i)()&&(xe.left=xe.right?-xe.right:xe.right)):null!=xe.right&&(xe.left=pt.scrollWidth-pt.clientWidth-xe.right),this._applyScrollToOptions(xe)}_applyScrollToOptions(xe){const pt=this.elementRef.nativeElement;(0,He.Mq)()?pt.scrollTo(xe):(null!=xe.top&&(pt.scrollTop=xe.top),null!=xe.left&&(pt.scrollLeft=xe.left))}measureScrollOffset(xe){const pt="left",di=this.elementRef.nativeElement;if("top"==xe)return di.scrollTop;if("bottom"==xe)return di.scrollHeight-di.clientHeight-di.scrollTop;const Rt=this.dir&&"rtl"==this.dir.value;return"start"==xe?xe=Rt?"right":pt:"end"==xe&&(xe=Rt?pt:"right"),Rt&&2==(0,He._i)()?xe==pt?di.scrollWidth-di.clientWidth-di.scrollLeft:di.scrollLeft:Rt&&1==(0,He._i)()?xe==pt?di.scrollLeft+di.scrollWidth-di.clientWidth:-di.scrollLeft:xe==pt?di.scrollLeft:di.scrollWidth-di.clientWidth-di.scrollLeft}}return Je.\u0275fac=function(xe){return new(xe||Je)(m.Y36(m.SBq),m.Y36(vt),m.Y36(m.R0b),m.Y36(Se.Is,8))},Je.\u0275dir=m.lG2({type:Je,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Je})(),Pt=(()=>{class Je{constructor(xe,pt,jt){this._platform=xe,this._change=new z.x,this._changeListener=di=>{this._change.next(di)},this._document=jt,pt.runOutsideAngular(()=>{if(xe.isBrowser){const di=this._getWindow();di.addEventListener("resize",this._changeListener),di.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const xe=this._getWindow();xe.removeEventListener("resize",this._changeListener),xe.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const xe={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),xe}getViewportRect(){const xe=this.getViewportScrollPosition(),{width:pt,height:jt}=this.getViewportSize();return{top:xe.top,left:xe.left,bottom:xe.top+jt,right:xe.left+pt,height:jt,width:pt}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const xe=this._document,pt=this._getWindow(),jt=xe.documentElement,di=jt.getBoundingClientRect();return{top:-di.top||xe.body.scrollTop||pt.scrollY||jt.scrollTop||0,left:-di.left||xe.body.scrollLeft||pt.scrollX||jt.scrollLeft||0}}change(xe=20){return xe>0?this._change.pipe(ye(xe)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const xe=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:xe.innerWidth,height:xe.innerHeight}:{width:0,height:0}}}return Je.\u0275fac=function(xe){return new(xe||Je)(m.LFG(He.t4),m.LFG(m.R0b),m.LFG(ae.K0,8))},Je.\u0275prov=m.Yz7({token:Je,factory:Je.\u0275fac,providedIn:"root"}),Je})(),Be=(()=>{class Je{}return Je.\u0275fac=function(xe){return new(xe||Je)},Je.\u0275mod=m.oAB({type:Je}),Je.\u0275inj=m.cJS({}),Je})(),Tt=(()=>{class Je{}return Je.\u0275fac=function(xe){return new(xe||Je)},Je.\u0275mod=m.oAB({type:Je}),Je.\u0275inj=m.cJS({imports:[[Se.vT,He.ud,Be],Se.vT,Be]}),Je})()},69808:(V,Z,g)=>{"use strict";g.d(Z,{mr:()=>We,Ov:()=>Ka,ez:()=>Eo,K0:()=>d,Do:()=>Te,V_:()=>B,Ye:()=>ye,S$:()=>_e,mk:()=>ot,sg:()=>Ki,O5:()=>Yn,PC:()=>$r,RF:()=>Yo,n9:()=>ro,b0:()=>$e,lw:()=>C,EM:()=>$o,JF:()=>va,NF:()=>la,w_:()=>a,bD:()=>Ms,q:()=>t,Mx:()=>Wn,HT:()=>n});var E=g(5e3);let m=null;function t(){return m}function n(Re){m||(m=Re)}class a{}const d=new E.OlP("DocumentToken");let C=(()=>{class Re{historyGo(H){throw new Error("Not implemented")}}return Re.\u0275fac=function(H){return new(H||Re)},Re.\u0275prov=E.Yz7({token:Re,factory:function(){return(0,E.LFG)(z)},providedIn:"platform"}),Re})();const B=new E.OlP("Location Initialized");let z=(()=>{class Re extends C{constructor(H){super(),this._doc=H,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return t().getBaseHref(this._doc)}onPopState(H){const W=t().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",H,!1),()=>W.removeEventListener("popstate",H)}onHashChange(H){const W=t().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",H,!1),()=>W.removeEventListener("hashchange",H)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(H){this.location.pathname=H}pushState(H,W,Me){oe()?this._history.pushState(H,W,Me):this.location.hash=Me}replaceState(H,W,Me){oe()?this._history.replaceState(H,W,Me):this.location.hash=Me}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}}return Re.\u0275fac=function(H){return new(H||Re)(E.LFG(d))},Re.\u0275prov=E.Yz7({token:Re,factory:function(){return new z((0,E.LFG)(d))},providedIn:"platform"}),Re})();function oe(){return!!window.history.pushState}function se(Re,J){if(0==Re.length)return J;if(0==J.length)return Re;let H=0;return Re.endsWith("/")&&H++,J.startsWith("/")&&H++,2==H?Re+J.substring(1):1==H?Re+J:Re+"/"+J}function Ie(Re){const J=Re.match(/#|\?|$/),H=J&&J.index||Re.length;return Re.slice(0,H-("/"===Re[H-1]?1:0))+Re.slice(H)}function Ge(Re){return Re&&"?"!==Re[0]?"?"+Re:Re}let _e=(()=>{class Re{historyGo(H){throw new Error("Not implemented")}}return Re.\u0275fac=function(H){return new(H||Re)},Re.\u0275prov=E.Yz7({token:Re,factory:function(){return function(Re){const J=(0,E.LFG)(d).location;return new $e((0,E.LFG)(C),J&&J.origin||"")}()},providedIn:"root"}),Re})();const We=new E.OlP("appBaseHref");let $e=(()=>{class Re extends _e{constructor(H,W){if(super(),this._platformLocation=H,this._removeListenerFns=[],null==W&&(W=this._platformLocation.getBaseHrefFromDOM()),null==W)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=W}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return se(this._baseHref,H)}path(H=!1){const W=this._platformLocation.pathname+Ge(this._platformLocation.search),Me=this._platformLocation.hash;return Me&&H?`${W}${Me}`:W}pushState(H,W,Me,Ft){const bi=this.prepareExternalUrl(Me+Ge(Ft));this._platformLocation.pushState(H,W,bi)}replaceState(H,W,Me,Ft){const bi=this.prepareExternalUrl(Me+Ge(Ft));this._platformLocation.replaceState(H,W,bi)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(H=0){var W,Me;null===(Me=(W=this._platformLocation).historyGo)||void 0===Me||Me.call(W,H)}}return Re.\u0275fac=function(H){return new(H||Re)(E.LFG(C),E.LFG(We,8))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),Te=(()=>{class Re extends _e{constructor(H,W){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(H){const W=se(this._baseHref,H);return W.length>0?"#"+W:W}pushState(H,W,Me,Ft){let bi=this.prepareExternalUrl(Me+Ge(Ft));0==bi.length&&(bi=this._platformLocation.pathname),this._platformLocation.pushState(H,W,bi)}replaceState(H,W,Me,Ft){let bi=this.prepareExternalUrl(Me+Ge(Ft));0==bi.length&&(bi=this._platformLocation.pathname),this._platformLocation.replaceState(H,W,bi)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(H=0){var W,Me;null===(Me=(W=this._platformLocation).historyGo)||void 0===Me||Me.call(W,H)}}return Re.\u0275fac=function(H){return new(H||Re)(E.LFG(C),E.LFG(We,8))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),ye=(()=>{class Re{constructor(H,W){this._subject=new E.vpe,this._urlChangeListeners=[],this._platformStrategy=H;const Me=this._platformStrategy.getBaseHref();this._platformLocation=W,this._baseHref=Ie(ae(Me)),this._platformStrategy.onPopState(Ft=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ft.state,type:Ft.type})})}path(H=!1){return this.normalize(this._platformStrategy.path(H))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(H,W=""){return this.path()==this.normalize(H+Ge(W))}normalize(H){return Re.stripTrailingSlash(function(Re,J){return Re&&J.startsWith(Re)?J.substring(Re.length):J}(this._baseHref,ae(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._platformStrategy.prepareExternalUrl(H)}go(H,W="",Me=null){this._platformStrategy.pushState(Me,"",H,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Ge(W)),Me)}replaceState(H,W="",Me=null){this._platformStrategy.replaceState(Me,"",H,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Ge(W)),Me)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(H=0){var W,Me;null===(Me=(W=this._platformStrategy).historyGo)||void 0===Me||Me.call(W,H)}onUrlChange(H){this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)}))}_notifyUrlChangeListeners(H="",W){this._urlChangeListeners.forEach(Me=>Me(H,W))}subscribe(H,W,Me){return this._subject.subscribe({next:H,error:W,complete:Me})}}return Re.normalizeQueryParams=Ge,Re.joinWithSlash=se,Re.stripTrailingSlash=Ie,Re.\u0275fac=function(H){return new(H||Re)(E.LFG(_e),E.LFG(C))},Re.\u0275prov=E.Yz7({token:Re,factory:function(){return new ye((0,E.LFG)(_e),(0,E.LFG)(C))},providedIn:"root"}),Re})();function ae(Re){return Re.replace(/\/index.html$/,"")}var Ee=(()=>((Ee=Ee||{})[Ee.Zero=0]="Zero",Ee[Ee.One=1]="One",Ee[Ee.Two=2]="Two",Ee[Ee.Few=3]="Few",Ee[Ee.Many=4]="Many",Ee[Ee.Other=5]="Other",Ee))();const jt=E.kL8;class Qr{}let Vi=(()=>{class Re extends Qr{constructor(H){super(),this.locale=H}getPluralCategory(H,W){switch(jt(W||this.locale)(H)){case Ee.Zero:return"zero";case Ee.One:return"one";case Ee.Two:return"two";case Ee.Few:return"few";case Ee.Many:return"many";default:return"other"}}}return Re.\u0275fac=function(H){return new(H||Re)(E.LFG(E.soG))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})();function Wn(Re,J){J=encodeURIComponent(J);for(const H of Re.split(";")){const W=H.indexOf("="),[Me,Ft]=-1==W?[H,""]:[H.slice(0,W),H.slice(W+1)];if(Me.trim()===J)return decodeURIComponent(Ft)}return null}let ot=(()=>{class Re{constructor(H,W,Me,Ft){this._iterableDiffers=H,this._keyValueDiffers=W,this._ngEl=Me,this._renderer=Ft,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(H){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof H?H.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(H){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof H?H.split(/\s+/):H,this._rawClass&&((0,E.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const H=this._iterableDiffer.diff(this._rawClass);H&&this._applyIterableChanges(H)}else if(this._keyValueDiffer){const H=this._keyValueDiffer.diff(this._rawClass);H&&this._applyKeyValueChanges(H)}}_applyKeyValueChanges(H){H.forEachAddedItem(W=>this._toggleClass(W.key,W.currentValue)),H.forEachChangedItem(W=>this._toggleClass(W.key,W.currentValue)),H.forEachRemovedItem(W=>{W.previousValue&&this._toggleClass(W.key,!1)})}_applyIterableChanges(H){H.forEachAddedItem(W=>{if("string"!=typeof W.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,E.AaK)(W.item)}`);this._toggleClass(W.item,!0)}),H.forEachRemovedItem(W=>this._toggleClass(W.item,!1))}_applyClasses(H){H&&(Array.isArray(H)||H instanceof Set?H.forEach(W=>this._toggleClass(W,!0)):Object.keys(H).forEach(W=>this._toggleClass(W,!!H[W])))}_removeClasses(H){H&&(Array.isArray(H)||H instanceof Set?H.forEach(W=>this._toggleClass(W,!1)):Object.keys(H).forEach(W=>this._toggleClass(W,!1)))}_toggleClass(H,W){(H=H.trim())&&H.split(/\s+/g).forEach(Me=>{W?this._renderer.addClass(this._ngEl.nativeElement,Me):this._renderer.removeClass(this._ngEl.nativeElement,Me)})}}return Re.\u0275fac=function(H){return new(H||Re)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},Re.\u0275dir=E.lG2({type:Re,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Re})();class Ai{constructor(J,H,W,Me){this.$implicit=J,this.ngForOf=H,this.index=W,this.count=Me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ki=(()=>{class Re{constructor(H,W,Me){this._viewContainer=H,this._template=W,this._differs=Me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(H){this._ngForOf=H,this._ngForOfDirty=!0}set ngForTrackBy(H){this._trackByFn=H}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(H){H&&(this._template=H)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const H=this._ngForOf;!this._differ&&H&&(this._differ=this._differs.find(H).create(this.ngForTrackBy))}if(this._differ){const H=this._differ.diff(this._ngForOf);H&&this._applyChanges(H)}}_applyChanges(H){const W=this._viewContainer;H.forEachOperation((Me,Ft,bi)=>{if(null==Me.previousIndex)W.createEmbeddedView(this._template,new Ai(Me.item,this._ngForOf,-1,-1),null===bi?void 0:bi);else if(null==bi)W.remove(null===Ft?void 0:Ft);else if(null!==Ft){const cn=W.get(Ft);W.move(cn,bi),zi(cn,Me)}});for(let Me=0,Ft=W.length;Me<Ft;Me++){const cn=W.get(Me).context;cn.index=Me,cn.count=Ft,cn.ngForOf=this._ngForOf}H.forEachIdentityChange(Me=>{zi(W.get(Me.currentIndex),Me)})}static ngTemplateContextGuard(H,W){return!0}}return Re.\u0275fac=function(H){return new(H||Re)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},Re.\u0275dir=E.lG2({type:Re,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Re})();function zi(Re,J){Re.context.$implicit=J.item}let Yn=(()=>{class Re{constructor(H,W){this._viewContainer=H,this._context=new sr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){Bn("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){Bn("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,W){return!0}}return Re.\u0275fac=function(H){return new(H||Re)(E.Y36(E.s_b),E.Y36(E.Rgc))},Re.\u0275dir=E.lG2({type:Re,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Re})();class sr{constructor(){this.$implicit=null,this.ngIf=null}}function Bn(Re,J){if(J&&!J.createEmbeddedView)throw new Error(`${Re} must be a TemplateRef, but received '${(0,E.AaK)(J)}'.`)}class Ao{constructor(J,H){this._viewContainerRef=J,this._templateRef=H,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(J){J&&!this._created?this.create():!J&&this._created&&this.destroy()}}let Yo=(()=>{class Re{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(H){this._ngSwitch=H,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(H){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(H)}_matchCase(H){const W=H==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||W,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),W}_updateDefaultCases(H){if(this._defaultViews&&H!==this._defaultUsed){this._defaultUsed=H;for(let W=0;W<this._defaultViews.length;W++)this._defaultViews[W].enforceState(H)}}}return Re.\u0275fac=function(H){return new(H||Re)},Re.\u0275dir=E.lG2({type:Re,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Re})(),ro=(()=>{class Re{constructor(H,W,Me){this.ngSwitch=Me,Me._addCase(),this._view=new Ao(H,W)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return Re.\u0275fac=function(H){return new(H||Re)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(Yo,9))},Re.\u0275dir=E.lG2({type:Re,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Re})(),$r=(()=>{class Re{constructor(H,W,Me){this._ngEl=H,this._differs=W,this._renderer=Me,this._ngStyle=null,this._differ=null}set ngStyle(H){this._ngStyle=H,!this._differ&&H&&(this._differ=this._differs.find(H).create())}ngDoCheck(){if(this._differ){const H=this._differ.diff(this._ngStyle);H&&this._applyChanges(H)}}_setStyle(H,W){const[Me,Ft]=H.split(".");null!=(W=null!=W&&Ft?`${W}${Ft}`:W)?this._renderer.setStyle(this._ngEl.nativeElement,Me,W):this._renderer.removeStyle(this._ngEl.nativeElement,Me)}_applyChanges(H){H.forEachRemovedItem(W=>this._setStyle(W.key,null)),H.forEachAddedItem(W=>this._setStyle(W.key,W.currentValue)),H.forEachChangedItem(W=>this._setStyle(W.key,W.currentValue))}}return Re.\u0275fac=function(H){return new(H||Re)(E.Y36(E.SBq),E.Y36(E.aQg),E.Y36(E.Qsj))},Re.\u0275dir=E.lG2({type:Re,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Re})();class Do{createSubscription(J,H){return J.subscribe({next:H,error:W=>{throw W}})}dispose(J){J.unsubscribe()}onDestroy(J){J.unsubscribe()}}class rs{createSubscription(J,H){return J.then(H,W=>{throw W})}dispose(J){}onDestroy(J){}}const Ho=new rs,Xa=new Do;let Ka=(()=>{class Re{constructor(H){this._ref=H,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(H){return this._obj?H!==this._obj?(this._dispose(),this.transform(H)):this._latestValue:(H&&this._subscribe(H),this._latestValue)}_subscribe(H){this._obj=H,this._strategy=this._selectStrategy(H),this._subscription=this._strategy.createSubscription(H,W=>this._updateLatestValue(H,W))}_selectStrategy(H){if((0,E.QGY)(H))return Ho;if((0,E.F4k)(H))return Xa;throw function(Re,J){return Error(`InvalidPipeArgument: '${J}' for pipe '${(0,E.AaK)(Re)}'`)}(Re,H)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(H,W){H===this._obj&&(this._latestValue=W,this._ref.markForCheck())}}return Re.\u0275fac=function(H){return new(H||Re)(E.Y36(E.sBO,16))},Re.\u0275pipe=E.Yjl({name:"async",type:Re,pure:!1}),Re})(),Eo=(()=>{class Re{}return Re.\u0275fac=function(H){return new(H||Re)},Re.\u0275mod=E.oAB({type:Re}),Re.\u0275inj=E.cJS({providers:[{provide:Qr,useClass:Vi}]}),Re})();const Ms="browser";function la(Re){return Re===Ms}let $o=(()=>{class Re{}return Re.\u0275prov=(0,E.Yz7)({token:Re,providedIn:"root",factory:()=>new ms((0,E.LFG)(d),window)}),Re})();class ms{constructor(J,H){this.document=J,this.window=H,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const H=function(Re,J){const H=Re.getElementById(J)||Re.getElementsByName(J)[0];if(H)return H;if("function"==typeof Re.createTreeWalker&&Re.body&&(Re.body.createShadowRoot||Re.body.attachShadow)){const W=Re.createTreeWalker(Re.body,NodeFilter.SHOW_ELEMENT);let Me=W.currentNode;for(;Me;){const Ft=Me.shadowRoot;if(Ft){const bi=Ft.getElementById(J)||Ft.querySelector(`[name="${J}"]`);if(bi)return bi}Me=W.nextNode()}}return null}(this.document,J);H&&(this.scrollToElement(H),this.attemptFocus(H))}setHistoryScrollRestoration(J){if(this.supportScrollRestoration()){const H=this.window.history;H&&H.scrollRestoration&&(H.scrollRestoration=J)}}scrollToElement(J){const H=J.getBoundingClientRect(),W=H.left+this.window.pageXOffset,Me=H.top+this.window.pageYOffset,Ft=this.offset();this.window.scrollTo(W-Ft[0],Me-Ft[1])}attemptFocus(J){return J.focus(),this.document.activeElement===J}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const J=yl(this.window.history)||yl(Object.getPrototypeOf(this.window.history));return!(!J||!J.writable&&!J.set)}catch(J){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(J){return!1}}}function yl(Re){return Object.getOwnPropertyDescriptor(Re,"scrollRestoration")}class va{}},40520:(V,Z,g)=>{"use strict";g.d(Z,{eN:()=>Oe,JF:()=>Lt});var E=g(69808),m=g(5e3),t=g(39646),e=g(68306),n=g(24351),a=g(39300),d=g(54004);class C{}class D{}class B{constructor(Ze){this.normalizedNames=new Map,this.lazyUpdate=null,Ze?this.lazyInit="string"==typeof Ze?()=>{this.headers=new Map,Ze.split("\n").forEach(ut=>{const ei=ut.indexOf(":");if(ei>0){const ni=ut.slice(0,ei),Ni=ni.toLowerCase(),wi=ut.slice(ei+1).trim();this.maybeSetNormalizedName(ni,Ni),this.headers.has(Ni)?this.headers.get(Ni).push(wi):this.headers.set(Ni,[wi])}})}:()=>{this.headers=new Map,Object.keys(Ze).forEach(ut=>{let ei=Ze[ut];const ni=ut.toLowerCase();"string"==typeof ei&&(ei=[ei]),ei.length>0&&(this.headers.set(ni,ei),this.maybeSetNormalizedName(ut,ni))})}:this.headers=new Map}has(Ze){return this.init(),this.headers.has(Ze.toLowerCase())}get(Ze){this.init();const ut=this.headers.get(Ze.toLowerCase());return ut&&ut.length>0?ut[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ze){return this.init(),this.headers.get(Ze.toLowerCase())||null}append(Ze,ut){return this.clone({name:Ze,value:ut,op:"a"})}set(Ze,ut){return this.clone({name:Ze,value:ut,op:"s"})}delete(Ze,ut){return this.clone({name:Ze,value:ut,op:"d"})}maybeSetNormalizedName(Ze,ut){this.normalizedNames.has(ut)||this.normalizedNames.set(ut,Ze)}init(){this.lazyInit&&(this.lazyInit instanceof B?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ze=>this.applyUpdate(Ze)),this.lazyUpdate=null))}copyFrom(Ze){Ze.init(),Array.from(Ze.headers.keys()).forEach(ut=>{this.headers.set(ut,Ze.headers.get(ut)),this.normalizedNames.set(ut,Ze.normalizedNames.get(ut))})}clone(Ze){const ut=new B;return ut.lazyInit=this.lazyInit&&this.lazyInit instanceof B?this.lazyInit:this,ut.lazyUpdate=(this.lazyUpdate||[]).concat([Ze]),ut}applyUpdate(Ze){const ut=Ze.name.toLowerCase();switch(Ze.op){case"a":case"s":let ei=Ze.value;if("string"==typeof ei&&(ei=[ei]),0===ei.length)return;this.maybeSetNormalizedName(Ze.name,ut);const ni=("a"===Ze.op?this.headers.get(ut):void 0)||[];ni.push(...ei),this.headers.set(ut,ni);break;case"d":const Ni=Ze.value;if(Ni){let wi=this.headers.get(ut);if(!wi)return;wi=wi.filter(yi=>-1===Ni.indexOf(yi)),0===wi.length?(this.headers.delete(ut),this.normalizedNames.delete(ut)):this.headers.set(ut,wi)}else this.headers.delete(ut),this.normalizedNames.delete(ut)}}forEach(Ze){this.init(),Array.from(this.normalizedNames.keys()).forEach(ut=>Ze(this.normalizedNames.get(ut),this.headers.get(ut)))}}class z{encodeKey(Ze){return Ie(Ze)}encodeValue(Ze){return Ie(Ze)}decodeKey(Ze){return decodeURIComponent(Ze)}decodeValue(Ze){return decodeURIComponent(Ze)}}const be=/%(\d[a-f0-9])/gi,se={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Ie(yt){return encodeURIComponent(yt).replace(be,(Ze,ut)=>{var ei;return null!==(ei=se[ut])&&void 0!==ei?ei:Ze})}function Ge(yt){return`${yt}`}class _e{constructor(Ze={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ze.encoder||new z,Ze.fromString){if(Ze.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(yt,Ze){const ut=new Map;return yt.length>0&&yt.replace(/^\?/,"").split("&").forEach(ni=>{const Ni=ni.indexOf("="),[wi,yi]=-1==Ni?[Ze.decodeKey(ni),""]:[Ze.decodeKey(ni.slice(0,Ni)),Ze.decodeValue(ni.slice(Ni+1))],pn=ut.get(wi)||[];pn.push(yi),ut.set(wi,pn)}),ut}(Ze.fromString,this.encoder)}else Ze.fromObject?(this.map=new Map,Object.keys(Ze.fromObject).forEach(ut=>{const ei=Ze.fromObject[ut];this.map.set(ut,Array.isArray(ei)?ei:[ei])})):this.map=null}has(Ze){return this.init(),this.map.has(Ze)}get(Ze){this.init();const ut=this.map.get(Ze);return ut?ut[0]:null}getAll(Ze){return this.init(),this.map.get(Ze)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ze,ut){return this.clone({param:Ze,value:ut,op:"a"})}appendAll(Ze){const ut=[];return Object.keys(Ze).forEach(ei=>{const ni=Ze[ei];Array.isArray(ni)?ni.forEach(Ni=>{ut.push({param:ei,value:Ni,op:"a"})}):ut.push({param:ei,value:ni,op:"a"})}),this.clone(ut)}set(Ze,ut){return this.clone({param:Ze,value:ut,op:"s"})}delete(Ze,ut){return this.clone({param:Ze,value:ut,op:"d"})}toString(){return this.init(),this.keys().map(Ze=>{const ut=this.encoder.encodeKey(Ze);return this.map.get(Ze).map(ei=>ut+"="+this.encoder.encodeValue(ei)).join("&")}).filter(Ze=>""!==Ze).join("&")}clone(Ze){const ut=new _e({encoder:this.encoder});return ut.cloneFrom=this.cloneFrom||this,ut.updates=(this.updates||[]).concat(Ze),ut}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ze=>this.map.set(Ze,this.cloneFrom.map.get(Ze))),this.updates.forEach(Ze=>{switch(Ze.op){case"a":case"s":const ut=("a"===Ze.op?this.map.get(Ze.param):void 0)||[];ut.push(Ge(Ze.value)),this.map.set(Ze.param,ut);break;case"d":if(void 0===Ze.value){this.map.delete(Ze.param);break}{let ei=this.map.get(Ze.param)||[];const ni=ei.indexOf(Ge(Ze.value));-1!==ni&&ei.splice(ni,1),ei.length>0?this.map.set(Ze.param,ei):this.map.delete(Ze.param)}}}),this.cloneFrom=this.updates=null)}}class We{constructor(){this.map=new Map}set(Ze,ut){return this.map.set(Ze,ut),this}get(Ze){return this.map.has(Ze)||this.map.set(Ze,Ze.defaultValue()),this.map.get(Ze)}delete(Ze){return this.map.delete(Ze),this}has(Ze){return this.map.has(Ze)}keys(){return this.map.keys()}}function Te(yt){return"undefined"!=typeof ArrayBuffer&&yt instanceof ArrayBuffer}function ye(yt){return"undefined"!=typeof Blob&&yt instanceof Blob}function ne(yt){return"undefined"!=typeof FormData&&yt instanceof FormData}class ae{constructor(Ze,ut,ei,ni){let Ni;if(this.url=ut,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ze.toUpperCase(),function(yt){switch(yt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ni?(this.body=void 0!==ei?ei:null,Ni=ni):Ni=ei,Ni&&(this.reportProgress=!!Ni.reportProgress,this.withCredentials=!!Ni.withCredentials,Ni.responseType&&(this.responseType=Ni.responseType),Ni.headers&&(this.headers=Ni.headers),Ni.context&&(this.context=Ni.context),Ni.params&&(this.params=Ni.params)),this.headers||(this.headers=new B),this.context||(this.context=new We),this.params){const wi=this.params.toString();if(0===wi.length)this.urlWithParams=ut;else{const yi=ut.indexOf("?");this.urlWithParams=ut+(-1===yi?"?":yi<ut.length-1?"&":"")+wi}}else this.params=new _e,this.urlWithParams=ut}serializeBody(){return null===this.body?null:Te(this.body)||ye(this.body)||ne(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof _e?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ne(this.body)?null:ye(this.body)?this.body.type||null:Te(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _e?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ze={}){var ut;const ei=Ze.method||this.method,ni=Ze.url||this.url,Ni=Ze.responseType||this.responseType,wi=void 0!==Ze.body?Ze.body:this.body,yi=void 0!==Ze.withCredentials?Ze.withCredentials:this.withCredentials,pn=void 0!==Ze.reportProgress?Ze.reportProgress:this.reportProgress;let mi=Ze.headers||this.headers,Ji=Ze.params||this.params;const wt=null!==(ut=Ze.context)&&void 0!==ut?ut:this.context;return void 0!==Ze.setHeaders&&(mi=Object.keys(Ze.setHeaders).reduce((Ot,Ci)=>Ot.set(Ci,Ze.setHeaders[Ci]),mi)),Ze.setParams&&(Ji=Object.keys(Ze.setParams).reduce((Ot,Ci)=>Ot.set(Ci,Ze.setParams[Ci]),Ji)),new ae(ei,ni,wi,{params:Ji,headers:mi,context:wt,reportProgress:pn,responseType:Ni,withCredentials:yi})}}var He=(()=>((He=He||{})[He.Sent=0]="Sent",He[He.UploadProgress=1]="UploadProgress",He[He.ResponseHeader=2]="ResponseHeader",He[He.DownloadProgress=3]="DownloadProgress",He[He.Response=4]="Response",He[He.User=5]="User",He))();class Se{constructor(Ze,ut=200,ei="OK"){this.headers=Ze.headers||new B,this.status=void 0!==Ze.status?Ze.status:ut,this.statusText=Ze.statusText||ei,this.url=Ze.url||null,this.ok=this.status>=200&&this.status<300}}class Ee extends Se{constructor(Ze={}){super(Ze),this.type=He.ResponseHeader}clone(Ze={}){return new Ee({headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class ue extends Se{constructor(Ze={}){super(Ze),this.type=He.Response,this.body=void 0!==Ze.body?Ze.body:null}clone(Ze={}){return new ue({body:void 0!==Ze.body?Ze.body:this.body,headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class ie extends Se{constructor(Ze){super(Ze,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ze.url||"(unknown url)"}`:`Http failure response for ${Ze.url||"(unknown url)"}: ${Ze.status} ${Ze.statusText}`,this.error=Ze.error||null}}function ht(yt,Ze){return{body:Ze,headers:yt.headers,context:yt.context,observe:yt.observe,params:yt.params,reportProgress:yt.reportProgress,responseType:yt.responseType,withCredentials:yt.withCredentials}}let Oe=(()=>{class yt{constructor(ut){this.handler=ut}request(ut,ei,ni={}){let Ni;if(ut instanceof ae)Ni=ut;else{let pn,mi;pn=ni.headers instanceof B?ni.headers:new B(ni.headers),ni.params&&(mi=ni.params instanceof _e?ni.params:new _e({fromObject:ni.params})),Ni=new ae(ut,ei,void 0!==ni.body?ni.body:null,{headers:pn,context:ni.context,params:mi,reportProgress:ni.reportProgress,responseType:ni.responseType||"json",withCredentials:ni.withCredentials})}const wi=(0,t.of)(Ni).pipe((0,n.b)(pn=>this.handler.handle(pn)));if(ut instanceof ae||"events"===ni.observe)return wi;const yi=wi.pipe((0,a.h)(pn=>pn instanceof ue));switch(ni.observe||"body"){case"body":switch(Ni.responseType){case"arraybuffer":return yi.pipe((0,d.U)(pn=>{if(null!==pn.body&&!(pn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return pn.body}));case"blob":return yi.pipe((0,d.U)(pn=>{if(null!==pn.body&&!(pn.body instanceof Blob))throw new Error("Response is not a Blob.");return pn.body}));case"text":return yi.pipe((0,d.U)(pn=>{if(null!==pn.body&&"string"!=typeof pn.body)throw new Error("Response is not a string.");return pn.body}));default:return yi.pipe((0,d.U)(pn=>pn.body))}case"response":return yi;default:throw new Error(`Unreachable: unhandled observe type ${ni.observe}}`)}}delete(ut,ei={}){return this.request("DELETE",ut,ei)}get(ut,ei={}){return this.request("GET",ut,ei)}head(ut,ei={}){return this.request("HEAD",ut,ei)}jsonp(ut,ei){return this.request("JSONP",ut,{params:(new _e).append(ei,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ut,ei={}){return this.request("OPTIONS",ut,ei)}patch(ut,ei,ni={}){return this.request("PATCH",ut,ht(ni,ei))}post(ut,ei,ni={}){return this.request("POST",ut,ht(ni,ei))}put(ut,ei,ni={}){return this.request("PUT",ut,ht(ni,ei))}}return yt.\u0275fac=function(ut){return new(ut||yt)(m.LFG(C))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})();class ke{constructor(Ze,ut){this.next=Ze,this.interceptor=ut}handle(Ze){return this.interceptor.intercept(Ze,this.next)}}const dt=new m.OlP("HTTP_INTERCEPTORS");let vt=(()=>{class yt{intercept(ut,ei){return ei.handle(ut)}}return yt.\u0275fac=function(ut){return new(ut||yt)},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})();const gi=/^\)\]\}',?\n/;let Tt=(()=>{class yt{constructor(ut){this.xhrFactory=ut}handle(ut){if("JSONP"===ut.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new e.y(ei=>{const ni=this.xhrFactory.build();if(ni.open(ut.method,ut.urlWithParams),ut.withCredentials&&(ni.withCredentials=!0),ut.headers.forEach((Ci,zt)=>ni.setRequestHeader(Ci,zt.join(","))),ut.headers.has("Accept")||ni.setRequestHeader("Accept","application/json, text/plain, */*"),!ut.headers.has("Content-Type")){const Ci=ut.detectContentTypeHeader();null!==Ci&&ni.setRequestHeader("Content-Type",Ci)}if(ut.responseType){const Ci=ut.responseType.toLowerCase();ni.responseType="json"!==Ci?Ci:"text"}const Ni=ut.serializeBody();let wi=null;const yi=()=>{if(null!==wi)return wi;const Ci=1223===ni.status?204:ni.status,zt=ni.statusText||"OK",Mi=new B(ni.getAllResponseHeaders()),_i=function(yt){return"responseURL"in yt&&yt.responseURL?yt.responseURL:/^X-Request-URL:/m.test(yt.getAllResponseHeaders())?yt.getResponseHeader("X-Request-URL"):null}(ni)||ut.url;return wi=new Ee({headers:Mi,status:Ci,statusText:zt,url:_i}),wi},pn=()=>{let{headers:Ci,status:zt,statusText:Mi,url:_i}=yi(),Bi=null;204!==zt&&(Bi=void 0===ni.response?ni.responseText:ni.response),0===zt&&(zt=Bi?200:0);let Jt=zt>=200&&zt<300;if("json"===ut.responseType&&"string"==typeof Bi){const ft=Bi;Bi=Bi.replace(gi,"");try{Bi=""!==Bi?JSON.parse(Bi):null}catch(Ae){Bi=ft,Jt&&(Jt=!1,Bi={error:Ae,text:Bi})}}Jt?(ei.next(new ue({body:Bi,headers:Ci,status:zt,statusText:Mi,url:_i||void 0})),ei.complete()):ei.error(new ie({error:Bi,headers:Ci,status:zt,statusText:Mi,url:_i||void 0}))},mi=Ci=>{const{url:zt}=yi(),Mi=new ie({error:Ci,status:ni.status||0,statusText:ni.statusText||"Unknown Error",url:zt||void 0});ei.error(Mi)};let Ji=!1;const wt=Ci=>{Ji||(ei.next(yi()),Ji=!0);let zt={type:He.DownloadProgress,loaded:Ci.loaded};Ci.lengthComputable&&(zt.total=Ci.total),"text"===ut.responseType&&!!ni.responseText&&(zt.partialText=ni.responseText),ei.next(zt)},Ot=Ci=>{let zt={type:He.UploadProgress,loaded:Ci.loaded};Ci.lengthComputable&&(zt.total=Ci.total),ei.next(zt)};return ni.addEventListener("load",pn),ni.addEventListener("error",mi),ni.addEventListener("timeout",mi),ni.addEventListener("abort",mi),ut.reportProgress&&(ni.addEventListener("progress",wt),null!==Ni&&ni.upload&&ni.upload.addEventListener("progress",Ot)),ni.send(Ni),ei.next({type:He.Sent}),()=>{ni.removeEventListener("error",mi),ni.removeEventListener("abort",mi),ni.removeEventListener("load",pn),ni.removeEventListener("timeout",mi),ut.reportProgress&&(ni.removeEventListener("progress",wt),null!==Ni&&ni.upload&&ni.upload.removeEventListener("progress",Ot)),ni.readyState!==ni.DONE&&ni.abort()}})}}return yt.\u0275fac=function(ut){return new(ut||yt)(m.LFG(E.JF))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})();const Je=new m.OlP("XSRF_COOKIE_NAME"),_t=new m.OlP("XSRF_HEADER_NAME");class xe{}let pt=(()=>{class yt{constructor(ut,ei,ni){this.doc=ut,this.platform=ei,this.cookieName=ni,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ut=this.doc.cookie||"";return ut!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,E.Mx)(ut,this.cookieName),this.lastCookieString=ut),this.lastToken}}return yt.\u0275fac=function(ut){return new(ut||yt)(m.LFG(E.K0),m.LFG(m.Lbi),m.LFG(Je))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})(),jt=(()=>{class yt{constructor(ut,ei){this.tokenService=ut,this.headerName=ei}intercept(ut,ei){const ni=ut.url.toLowerCase();if("GET"===ut.method||"HEAD"===ut.method||ni.startsWith("http://")||ni.startsWith("https://"))return ei.handle(ut);const Ni=this.tokenService.getToken();return null!==Ni&&!ut.headers.has(this.headerName)&&(ut=ut.clone({headers:ut.headers.set(this.headerName,Ni)})),ei.handle(ut)}}return yt.\u0275fac=function(ut){return new(ut||yt)(m.LFG(xe),m.LFG(_t))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})(),di=(()=>{class yt{constructor(ut,ei){this.backend=ut,this.injector=ei,this.chain=null}handle(ut){if(null===this.chain){const ei=this.injector.get(dt,[]);this.chain=ei.reduceRight((ni,Ni)=>new ke(ni,Ni),this.backend)}return this.chain.handle(ut)}}return yt.\u0275fac=function(ut){return new(ut||yt)(m.LFG(D),m.LFG(m.zs3))},yt.\u0275prov=m.Yz7({token:yt,factory:yt.\u0275fac}),yt})(),tt=(()=>{class yt{static disable(){return{ngModule:yt,providers:[{provide:jt,useClass:vt}]}}static withOptions(ut={}){return{ngModule:yt,providers:[ut.cookieName?{provide:Je,useValue:ut.cookieName}:[],ut.headerName?{provide:_t,useValue:ut.headerName}:[]]}}}return yt.\u0275fac=function(ut){return new(ut||yt)},yt.\u0275mod=m.oAB({type:yt}),yt.\u0275inj=m.cJS({providers:[jt,{provide:dt,useExisting:jt,multi:!0},{provide:xe,useClass:pt},{provide:Je,useValue:"XSRF-TOKEN"},{provide:_t,useValue:"X-XSRF-TOKEN"}]}),yt})(),Lt=(()=>{class yt{}return yt.\u0275fac=function(ut){return new(ut||yt)},yt.\u0275mod=m.oAB({type:yt}),yt.\u0275inj=m.cJS({providers:[Oe,{provide:C,useClass:di},Tt,{provide:D,useExisting:Tt}],imports:[[tt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),yt})()},5e3:(V,Z,g)=>{"use strict";g.d(Z,{deG:()=>Uc,tb:()=>wb,AFp:()=>Eb,ip1:()=>mm,CZH:()=>Qh,hGG:()=>iT,z2F:()=>kp,sBO:()=>I0,Sil:()=>vm,_Vd:()=>Dp,EJc:()=>Db,SBq:()=>Mp,qLn:()=>Zl,vpe:()=>Ed,tBr:()=>Hl,XFs:()=>tt,OlP:()=>Uo,zs3:()=>eu,ZZ4:()=>Bf,aQg:()=>Hf,soG:()=>Nf,YKP:()=>Ov,h0i:()=>$h,PXZ:()=>w0,R0b:()=>yu,FiY:()=>Xl,Lbi:()=>Tb,g9A:()=>Cb,n_E:()=>Af,Qsj:()=>sC,FYo:()=>xv,JOm:()=>Ce,q3G:()=>Qo,tp0:()=>pa,Rgc:()=>Ip,dDg:()=>Rb,GfV:()=>Rv,s_b:()=>Of,ifc:()=>wi,eFA:()=>Ob,G48:()=>A0,Gpc:()=>z,f3M:()=>il,_c5:()=>$0,VLi:()=>y0,c2e:()=>Sb,zSh:()=>rf,wAp:()=>Sr,vHH:()=>Ie,EiD:()=>ku,mCW:()=>ho,qzn:()=>Dt,JVY:()=>hi,pB0:()=>Ii,eBb:()=>si,L6k:()=>Qt,LAX:()=>ki,cg1:()=>Kg,kL8:()=>Q_,yhl:()=>Vt,dqk:()=>wt,sIi:()=>de,CqO:()=>l_,QGY:()=>Lg,F4k:()=>a_,RDi:()=>$o,AaK:()=>C,z3N:()=>it,qOj:()=>bp,TTD:()=>Ds,_Bn:()=>Sv,xp6:()=>Od,uIk:()=>Yi,Gre:()=>G_,ekj:()=>Ug,Suo:()=>qv,Xpm:()=>at,lG2:()=>kt,Yz7:()=>Ct,cJS:()=>Be,oAB:()=>nr,Yjl:()=>ui,Y36:()=>yp,_UZ:()=>r_,GkF:()=>o_,BQk:()=>kg,ynx:()=>Og,qZA:()=>Ig,TgZ:()=>Ag,EpF:()=>s_,n5z:()=>Ea,Ikx:()=>Yg,LFG:()=>Jo,$8M:()=>Cu,$Z:()=>n_,NdJ:()=>Pg,CRH:()=>eb,kcU:()=>El,O4$:()=>ta,oxw:()=>d_,ALo:()=>jv,lcZ:()=>zv,Hsn:()=>p_,F$t:()=>h_,Q6J:()=>xg,s9C:()=>Bg,DdM:()=>Nv,VKq:()=>Fv,WLB:()=>Bv,iGM:()=>Zv,MAs:()=>wh,CHM:()=>K,LSH:()=>Kc,Udp:()=>Vg,WFA:()=>Ng,d8E:()=>Xg,YNc:()=>id,W1O:()=>rb,_uU:()=>P_,Oqu:()=>Wg,hij:()=>Tf,AsE:()=>jg,lnq:()=>zg,Gf:()=>Qv});var E=g(77579),m=g(50727),t=g(68306),e=g(56451),n=g(13099);function a(c){for(let u in c)if(c[u]===a)return u;throw Error("Could not find renamed property on target object.")}function d(c,u){for(const _ in u)u.hasOwnProperty(_)&&!c.hasOwnProperty(_)&&(c[_]=u[_])}function C(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(C).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const u=c.toString();if(null==u)return""+u;const _=u.indexOf("\n");return-1===_?u:u.substring(0,_)}function D(c,u){return null==c||""===c?null===u?"":u:null==u||""===u?c:c+" "+u}const B=a({__forward_ref__:a});function z(c){return c.__forward_ref__=z,c.toString=function(){return C(this())},c}function oe(c){return be(c)?c():c}function be(c){return"function"==typeof c&&c.hasOwnProperty(B)&&c.__forward_ref__===z}class Ie extends Error{constructor(u,_){super(function(c,u){return`${c?`NG0${c}: `:""}${u}`}(u,_)),this.code=u}}function Le(c){return"string"==typeof c?c:null==c?"":String(c)}function We(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():Le(c)}function ne(c,u){const _=u?` in ${u}`:"";throw new Ie("201",`No provider for ${We(c)} found${_}`)}function Bt(c,u){null==c&&function(c,u,_,w){throw new Error(`ASSERTION ERROR: ${c}`+(null==w?"":` [Expected=> ${_} ${w} ${u} <=Actual]`))}(u,c,null,"!=")}function Ct(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Be(c){return{providers:c.providers||[],imports:c.imports||[]}}function Tt(c){return Je(c,jt)||Je(c,Rt)}function Je(c,u){return c.hasOwnProperty(u)?c[u]:null}function pt(c){return c&&(c.hasOwnProperty(di)||c.hasOwnProperty(et))?c[di]:null}const jt=a({\u0275prov:a}),di=a({\u0275inj:a}),Rt=a({ngInjectableDef:a}),et=a({ngInjectorDef:a});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let Lt;function mt(c){const u=Lt;return Lt=c,u}function yt(c,u,_){const w=Tt(c);return w&&"root"==w.providedIn?void 0===w.value?w.value=w.factory():w.value:_&tt.Optional?null:void 0!==u?u:void ne(C(c),"Injector")}function ut(c){return{toString:c}.toString()}var ei=(()=>((ei=ei||{})[ei.OnPush=0]="OnPush",ei[ei.Default=1]="Default",ei))(),wi=(()=>{return(c=wi||(wi={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",wi;var c})();const yi="undefined"!=typeof globalThis&&globalThis,pn="undefined"!=typeof window&&window,mi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wt=yi||"undefined"!=typeof global&&global||pn||mi,zt={},Mi=[],_i=a({\u0275cmp:a}),Bi=a({\u0275dir:a}),Jt=a({\u0275pipe:a}),ft=a({\u0275mod:a}),Ae=a({\u0275fac:a}),le=a({__NG_ELEMENT_ID__:a});let Pe=0;function at(c){return ut(()=>{const _={},w={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:_,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===ei.OnPush,directiveDefs:null,pipeDefs:null,selectors:c.selectors||Mi,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||wi.Emulated,id:"c",styles:c.styles||Mi,_:null,setInput:null,schemas:c.schemas||null,tView:null},R=c.directives,P=c.features,X=c.pipes;return w.id+=Pe++,w.inputs=$t(c.inputs,_),w.outputs=$t(c.outputs),P&&P.forEach(re=>re(w)),w.directiveDefs=R?()=>("function"==typeof R?R():R).map(Gi):null,w.pipeDefs=X?()=>("function"==typeof X?X():X).map(Zi):null,w})}function Gi(c){return Oi(c)||function(c){return c[Bi]||null}(c)}function Zi(c){return function(c){return c[Jt]||null}(c)}const En={};function nr(c){return ut(()=>{const u={type:c.type,bootstrap:c.bootstrap||Mi,declarations:c.declarations||Mi,imports:c.imports||Mi,exports:c.exports||Mi,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null};return null!=c.id&&(En[c.id]=c.type),u})}function $t(c,u){if(null==c)return zt;const _={};for(const w in c)if(c.hasOwnProperty(w)){let R=c[w],P=R;Array.isArray(R)&&(P=R[1],R=R[0]),_[R]=w,u&&(u[R]=P)}return _}const kt=at;function ui(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,onDestroy:c.type.prototype.ngOnDestroy||null}}function Oi(c){return c[_i]||null}function ur(c,u){const _=c[ft]||null;if(!_&&!0===u)throw new Error(`Type ${C(c)} does not have '\u0275mod' property.`);return _}function ro(c){return Array.isArray(c)&&"object"==typeof c[1]}function _o(c){return Array.isArray(c)&&!0===c[1]}function Qs(c){return 0!=(8&c.flags)}function dr(c){return 2==(2&c.flags)}function Xo(c){return 1==(1&c.flags)}function $r(c){return null!==c.template}function ws(c){return 0!=(512&c[2])}function Vs(c,u){return c.hasOwnProperty(Ae)?c[Ae]:null}class Ko{constructor(u,_,w){this.previousValue=u,this.currentValue=_,this.firstChange=w}isFirstChange(){return this.firstChange}}function Ds(){return zo}function zo(c){return c.type.prototype.ngOnChanges&&(c.setInput=Eo),Oo}function Oo(){const c=lo(this),u=null==c?void 0:c.current;if(u){const _=c.previous;if(_===zt)c.previous=u;else for(let w in u)_[w]=u[w];c.current=null,this.ngOnChanges(u)}}function Eo(c,u,_,w){const R=lo(c)||function(c,u){return c[Ms]=u}(c,{previous:zt,current:null}),P=R.current||(R.current={}),X=R.previous,re=this.declaredInputs[_],ve=X[re];P[re]=new Ko(ve&&ve.currentValue,u,X===zt),c[w]=u}Ds.ngInherit=!0;const Ms="__ngSimpleChanges__";function lo(c){return c[Ms]||null}const ca="http://www.w3.org/2000/svg";let us;function $o(c){us=c}function Nr(c){return!!c.listen}const kn={createRenderer:(c,u)=>void 0!==us?us:"undefined"!=typeof document?document:void 0};function Re(c){for(;Array.isArray(c);)c=c[0];return c}function W(c,u){return Re(u[c])}function Me(c,u){return Re(u[c.index])}function bi(c,u){return c.data[u]}function cn(c,u){return c[u]}function Xn(c,u){const _=u[c];return ro(_)?_:_[0]}function wr(c){return 4==(4&c[2])}function Vr(c){return 128==(128&c[2])}function to(c,u){return null==u?null:c[u]}function fr(c){c[18]=0}function es(c,u){c[5]+=u;let _=c,w=c[3];for(;null!==w&&(1===u&&1===_[5]||-1===u&&0===_[5]);)w[5]+=u,_=w,w=w[3]}const Vn={lFrame:co(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Gs(){return Vn.bindingsEnabled}function Ue(){return Vn.lFrame.lView}function G(){return Vn.lFrame.tView}function K(c){return Vn.lFrame.contextLView=c,c[8]}function fe(){let c=Qe();for(;null!==c&&64===c.type;)c=c.parent;return c}function Qe(){return Vn.lFrame.currentTNode}function Yt(c,u){const _=Vn.lFrame;_.currentTNode=c,_.isParent=u}function qt(){return Vn.lFrame.isParent}function vi(){Vn.lFrame.isParent=!1}function Cn(){return Vn.isInCheckNoChangesMode}function er(c){Vn.isInCheckNoChangesMode=c}function tr(){const c=Vn.lFrame;let u=c.bindingRootIndex;return-1===u&&(u=c.bindingRootIndex=c.tView.bindingStartIndex),u}function Pn(){return Vn.lFrame.bindingIndex}function ar(){return Vn.lFrame.bindingIndex++}function Dr(c){const u=Vn.lFrame,_=u.bindingIndex;return u.bindingIndex=u.bindingIndex+c,_}function ko(c,u){const _=Vn.lFrame;_.bindingIndex=_.bindingRootIndex=c,Ws(u)}function Ws(c){Vn.lFrame.currentDirectiveIndex=c}function Co(c){const u=Vn.lFrame.currentDirectiveIndex;return-1===u?null:c[u]}function xs(){return Vn.lFrame.currentQueryIndex}function os(c){Vn.lFrame.currentQueryIndex=c}function Rs(c){const u=c[1];return 2===u.type?u.declTNode:1===u.type?c[6]:null}function ul(c,u,_){if(_&tt.SkipSelf){let R=u,P=c;for(;!(R=R.parent,null!==R||_&tt.Host||(R=Rs(P),null===R||(P=P[15],10&R.type))););if(null===R)return!1;u=R,c=P}const w=Vn.lFrame=js();return w.currentTNode=u,w.lView=c,!0}function xa(c){const u=js(),_=c[1];Vn.lFrame=u,u.currentTNode=_.firstChild,u.lView=c,u.tView=_,u.contextLView=c,u.bindingIndex=_.bindingStartIndex,u.inI18n=!1}function js(){const c=Vn.lFrame,u=null===c?null:c.child;return null===u?co(c):u}function co(c){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=u),u}function Ja(){const c=Vn.lFrame;return Vn.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const xn=Ja;function On(){const c=Ja();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function Cr(){return Vn.lFrame.selectedIndex}function is(c){Vn.lFrame.selectedIndex=c}function Ar(){const c=Vn.lFrame;return bi(c.tView,c.selectedIndex)}function ta(){Vn.lFrame.currentNamespace=ca}function El(){Vn.lFrame.currentNamespace=null}function _s(c,u){for(let _=u.directiveStart,w=u.directiveEnd;_<w;_++){const P=c.data[_].type.prototype,{ngAfterContentInit:X,ngAfterContentChecked:re,ngAfterViewInit:ve,ngAfterViewChecked:Xe,ngOnDestroy:ct}=P;X&&(c.contentHooks||(c.contentHooks=[])).push(-_,X),re&&((c.contentHooks||(c.contentHooks=[])).push(_,re),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(_,re)),ve&&(c.viewHooks||(c.viewHooks=[])).push(-_,ve),Xe&&((c.viewHooks||(c.viewHooks=[])).push(_,Xe),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(_,Xe)),null!=ct&&(c.destroyHooks||(c.destroyHooks=[])).push(_,ct)}}function zs(c,u,_){Ol(c,u,3,_)}function As(c,u,_,w){(3&c[2])===_&&Ol(c,u,_,w)}function ba(c,u){let _=c[2];(3&_)===u&&(_&=2047,_+=1,c[2]=_)}function Ol(c,u,_,w){const P=null!=w?w:-1,X=u.length-1;let re=0;for(let ve=void 0!==w?65535&c[18]:0;ve<X;ve++)if("number"==typeof u[ve+1]){if(re=u[ve],null!=w&&re>=w)break}else u[ve]<0&&(c[18]+=65536),(re<P||-1==P)&&(dl(c,_,u,ve),c[18]=(4294901760&c[18])+ve+2),ve++}function dl(c,u,_,w){const R=_[w]<0,P=_[w+1],re=c[R?-_[w]:_[w]];if(R){if(c[2]>>11<c[18]>>16&&(3&c[2])===u){c[2]+=2048;try{P.call(re)}finally{}}}else try{P.call(re)}finally{}}class ns{constructor(u,_,w){this.factory=u,this.resolving=!1,this.canSeeViewProviders=_,this.injectImpl=w}}function qa(c,u,_){const w=Nr(c);let R=0;for(;R<_.length;){const P=_[R];if("number"==typeof P){if(0!==P)break;R++;const X=_[R++],re=_[R++],ve=_[R++];w?c.setAttribute(u,re,ve,X):u.setAttributeNS(X,re,ve)}else{const X=P,re=_[++R];zl(X)?w&&c.setProperty(u,X,re):w?c.setAttribute(u,X,re):u.setAttribute(X,re),R++}}return R}function _c(c){return 3===c||4===c||6===c}function zl(c){return 64===c.charCodeAt(0)}function da(c,u){if(null!==u&&0!==u.length)if(null===c||0===c.length)c=u.slice();else{let _=-1;for(let w=0;w<u.length;w++){const R=u[w];"number"==typeof R?_=R:0===_||Ua(c,_,R,null,-1===_||2===_?u[++w]:null)}}return c}function Ua(c,u,_,w,R){let P=0,X=c.length;if(-1===u)X=-1;else for(;P<c.length;){const re=c[P++];if("number"==typeof re){if(re===u){X=-1;break}if(re>u){X=P-1;break}}}for(;P<c.length;){const re=c[P];if("number"==typeof re)break;if(re===_){if(null===w)return void(null!==R&&(c[P+1]=R));if(w===c[P+1])return void(c[P+2]=R)}P++,null!==w&&P++,null!==R&&P++}-1!==X&&(c.splice(X,0,u),P=X+1),c.splice(P++,0,_),null!==w&&c.splice(P++,0,w),null!==R&&c.splice(P++,0,R)}function Ys(c){return-1!==c}function Ia(c){return 32767&c}function Oa(c,u){let _=function(c){return c>>16}(c),w=u;for(;_>0;)w=w[15],_--;return w}let Cl=!0;function ql(c){const u=Cl;return Cl=c,u}let he=0;function Q(c,u){const _=je(c,u);if(-1!==_)return _;const w=u[1];w.firstCreatePass&&(c.injectorIndex=u.length,De(w.data,c),De(u,null),De(w.blueprint,null));const R=gt(c,u),P=c.injectorIndex;if(Ys(R)){const X=Ia(R),re=Oa(R,u),ve=re[1].data;for(let Xe=0;Xe<8;Xe++)u[P+Xe]=re[X+Xe]|ve[X+Xe]}return u[P+8]=R,P}function De(c,u){c.push(0,0,0,0,0,0,0,0,u)}function je(c,u){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===u[c.injectorIndex+8]?-1:c.injectorIndex}function gt(c,u){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let _=0,w=null,R=u;for(;null!==R;){const P=R[1],X=P.type;if(w=2===X?P.declTNode:1===X?R[6]:null,null===w)return-1;if(_++,R=R[15],-1!==w.injectorIndex)return w.injectorIndex|_<<16}return-1}function Ut(c,u,_){!function(c,u,_){let w;"string"==typeof _?w=_.charCodeAt(0)||0:_.hasOwnProperty(le)&&(w=_[le]),null==w&&(w=_[le]=he++);const R=255&w;u.data[c+(R>>5)]|=1<<R}(c,u,_)}function Li(c,u,_){if(_&tt.Optional)return c;ne(u,"NodeInjector")}function wn(c,u,_,w){if(_&tt.Optional&&void 0===w&&(w=null),0==(_&(tt.Self|tt.Host))){const R=c[9],P=mt(void 0);try{return R?R.get(u,w,_&tt.Optional):yt(u,w,_&tt.Optional)}finally{mt(P)}}return Li(w,u,_)}function yr(c,u,_,w=tt.Default,R){if(null!==c){const P=function(c){if("string"==typeof c)return c.charCodeAt(0)||0;const u=c.hasOwnProperty(le)?c[le]:void 0;return"number"==typeof u?u>=0?255&u:Jr:u}(_);if("function"==typeof P){if(!ul(u,c,w))return w&tt.Host?Li(R,_,w):wn(u,_,w,R);try{const X=P(w);if(null!=X||w&tt.Optional)return X;ne(_)}finally{xn()}}else if("number"==typeof P){let X=null,re=je(c,u),ve=-1,Xe=w&tt.Host?u[16][6]:null;for((-1===re||w&tt.SkipSelf)&&(ve=-1===re?gt(c,u):u[re+8],-1!==ve&&el(w,!1)?(X=u[1],re=Ia(ve),u=Oa(ve,u)):re=-1);-1!==re;){const ct=u[1];if(Vo(P,re,ct.data)){const Nt=uo(re,u,_,X,w,Xe);if(Nt!==jn)return Nt}ve=u[re+8],-1!==ve&&el(w,u[1].data[re+8]===Xe)&&Vo(P,re,u)?(X=ct,re=Ia(ve),u=Oa(ve,u)):re=-1}}}return wn(u,_,w,R)}const jn={};function Jr(){return new Ks(fe(),Ue())}function uo(c,u,_,w,R,P){const X=u[1],re=X.data[c+8],ct=Tl(re,X,_,null==w?dr(re)&&Cl:w!=X&&0!=(3&re.type),R&tt.Host&&P===re);return null!==ct?Xs(u,X,ct,re):jn}function Tl(c,u,_,w,R){const P=c.providerIndexes,X=u.data,re=1048575&P,ve=c.directiveStart,ct=P>>20,oi=R?re+ct:c.directiveEnd;for(let Ei=w?re:re+ct;Ei<oi;Ei++){const $i=X[Ei];if(Ei<ve&&_===$i||Ei>=ve&&$i.type===_)return Ei}if(R){const Ei=X[ve];if(Ei&&$r(Ei)&&Ei.type===_)return ve}return null}function Xs(c,u,_,w){let R=c[_];const P=u.data;if(function(c){return c instanceof ns}(R)){const X=R;X.resolving&&function(c,u){throw new Ie("200",`Circular dependency in DI detected for ${c}`)}(We(P[_]));const re=ql(X.canSeeViewProviders);X.resolving=!0;const ve=X.injectImpl?mt(X.injectImpl):null;ul(c,w,tt.Default);try{R=c[_]=X.factory(void 0,P,c,w),u.firstCreatePass&&_>=w.directiveStart&&function(c,u,_){const{ngOnChanges:w,ngOnInit:R,ngDoCheck:P}=u.type.prototype;if(w){const X=zo(u);(_.preOrderHooks||(_.preOrderHooks=[])).push(c,X),(_.preOrderCheckHooks||(_.preOrderCheckHooks=[])).push(c,X)}R&&(_.preOrderHooks||(_.preOrderHooks=[])).push(0-c,R),P&&((_.preOrderHooks||(_.preOrderHooks=[])).push(c,P),(_.preOrderCheckHooks||(_.preOrderCheckHooks=[])).push(c,P))}(_,P[_],u)}finally{null!==ve&&mt(ve),ql(re),X.resolving=!1,xn()}}return R}function Vo(c,u,_){return!!(_[u+(c>>5)]&1<<c)}function el(c,u){return!(c&tt.Self||c&tt.Host&&u)}class Ks{constructor(u,_){this._tNode=u,this._lView=_}get(u,_,w){return yr(this._tNode,this._lView,u,w,_)}}function Ea(c){return ut(()=>{const u=c.prototype.constructor,_=u[Ae]||Ga(u),w=Object.prototype;let R=Object.getPrototypeOf(c.prototype).constructor;for(;R&&R!==w;){const P=R[Ae]||Ga(R);if(P&&P!==_)return P;R=Object.getPrototypeOf(R)}return P=>new P})}function Ga(c){return be(c)?()=>{const u=Ga(oe(c));return u&&u()}:Vs(c)}function Cu(c){return function(c,u){if("class"===u)return c.classes;if("style"===u)return c.styles;const _=c.attrs;if(_){const w=_.length;let R=0;for(;R<w;){const P=_[R];if(_c(P))break;if(0===P)R+=2;else if("number"==typeof P)for(R++;R<w&&"string"==typeof _[R];)R++;else{if(P===u)return _[R+1];R+=2}}}return null}(fe(),c)}const ec="__parameters__";function qr(c,u,_){return ut(()=>{const w=function(c){return function(..._){if(c){const w=c(..._);for(const R in w)this[R]=w[R]}}}(u);function R(...P){if(this instanceof R)return w.apply(this,P),this;const X=new R(...P);return re.annotation=X,re;function re(ve,Xe,ct){const Nt=ve.hasOwnProperty(ec)?ve[ec]:Object.defineProperty(ve,ec,{value:[]})[ec];for(;Nt.length<=ct;)Nt.push(null);return(Nt[ct]=Nt[ct]||[]).push(X),ve}}return _&&(R.prototype=Object.create(_.prototype)),R.prototype.ngMetadataName=c,R.annotationCls=R,R})}class Uo{constructor(u,_){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof _?this.__NG_ELEMENT_ID__=_:void 0!==_&&(this.\u0275prov=Ct({token:this,providedIn:_.providedIn||"root",factory:_.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Uc=new Uo("AnalyzeForEntryComponents");function ha(c,u){void 0===u&&(u=c);for(let _=0;_<c.length;_++){let w=c[_];Array.isArray(w)?(u===c&&(u=c.slice(0,_)),ha(w,u)):u!==c&&u.push(w)}return u}function wo(c,u){c.forEach(_=>Array.isArray(_)?wo(_,u):u(_))}function ka(c,u,_){u>=c.length?c.push(_):c.splice(u,0,_)}function Wa(c,u){return u>=c.length-1?c.pop():c.splice(u,1)[0]}function Nl(c,u){const _=[];for(let w=0;w<c;w++)_.push(u);return _}function bs(c,u,_){let w=oc(c,u);return w>=0?c[1|w]=_:(w=~w,function(c,u,_,w){let R=c.length;if(R==u)c.push(_,w);else if(1===R)c.push(w,c[0]),c[0]=_;else{for(R--,c.push(c[R-1],c[R]);R>u;)c[R]=c[R-2],R--;c[u]=_,c[u+1]=w}}(c,w,u,_)),w}function tl(c,u){const _=oc(c,u);if(_>=0)return c[1|_]}function oc(c,u){return function(c,u,_){let w=0,R=c.length>>_;for(;R!==w;){const P=w+(R-w>>1),X=c[P<<_];if(u===X)return P<<_;X>u?R=P:w=P+1}return~(R<<_)}(c,u,1)}const ra={},Cc="__NG_DI_FLAG__",No="ngTempTokenPath",cc=/\n/gm,uc="__source",ja=a({provide:String,useValue:a});let Js;function dc(c){const u=Js;return Js=c,u}function pl(c,u=tt.Default){if(void 0===Js)throw new Error("inject() must be called from an injection context");return null===Js?yt(c,void 0,u):Js.get(c,u&tt.Optional?null:void 0,u)}function Jo(c,u=tt.Default){return(Lt||pl)(oe(c),u)}const il=Jo;function hc(c){const u=[];for(let _=0;_<c.length;_++){const w=oe(c[_]);if(Array.isArray(w)){if(0===w.length)throw new Error("Arguments array must have arguments.");let R,P=tt.Default;for(let X=0;X<w.length;X++){const re=w[X],ve=Wc(re);"number"==typeof ve?-1===ve?R=re.token:P|=ve:R=re}u.push(Jo(R,P))}else u.push(Jo(w))}return u}function wc(c,u){return c[Cc]=u,c.prototype[Cc]=u,c}function Wc(c){return c[Cc]}const Hl=wc(qr("Inject",c=>({token:c})),-1),Xl=wc(qr("Optional"),8),pa=wc(qr("SkipSelf"),4);let wl;function Dl(c){var u;return(null===(u=function(){if(void 0===wl&&(wl=null,wt.trustedTypes))try{wl=wt.trustedTypes.createPolicy("angular",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch(c){}return wl}())||void 0===u?void 0:u.createHTML(c))||c}class Ul{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ld extends Ul{getTypeName(){return"HTML"}}class as extends Ul{getTypeName(){return"Style"}}class xc extends Ul{getTypeName(){return"Script"}}class me extends Ul{getTypeName(){return"URL"}}class we extends Ul{getTypeName(){return"ResourceURL"}}function it(c){return c instanceof Ul?c.changingThisBreaksApplicationSecurity:c}function Dt(c,u){const _=Vt(c);if(null!=_&&_!==u){if("ResourceURL"===_&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${_} (see https://g.co/ng/security#xss)`)}return _===u}function Vt(c){return c instanceof Ul&&c.getTypeName()||null}function hi(c){return new ld(c)}function Qt(c){return new as(c)}function si(c){return new xc(c)}function ki(c){return new me(c)}function Ii(c){return new we(c)}class Qn{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const _=(new window.DOMParser).parseFromString(Dl(u),"text/html").body;return null===_?this.inertDocumentHelper.getInertBodyElement(u):(_.removeChild(_.firstChild),_)}catch(_){return null}}}class Un{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const _=this.inertDocument.createElement("html");this.inertDocument.appendChild(_);const w=this.inertDocument.createElement("body");_.appendChild(w)}}getInertBodyElement(u){const _=this.inertDocument.createElement("template");if("content"in _)return _.innerHTML=Dl(u),_;const w=this.inertDocument.createElement("body");return w.innerHTML=Dl(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(w),w}stripCustomNsAttrs(u){const _=u.attributes;for(let R=_.length-1;0<R;R--){const X=_.item(R).name;("xmlns:ns1"===X||0===X.indexOf("ns1:"))&&u.removeAttribute(X)}let w=u.firstChild;for(;w;)w.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(w),w=w.nextSibling}}const Zo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Zr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ho(c){return(c=String(c)).match(Zo)||c.match(Zr)?c:"unsafe:"+c}function po(c){const u={};for(const _ of c.split(","))u[_]=!0;return u}function sa(...c){const u={};for(const _ of c)for(const w in _)_.hasOwnProperty(w)&&(u[w]=!0);return u}const ys=po("area,br,col,hr,img,wbr"),hs=po("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ml=po("rp,rt"),Au=sa(ys,sa(hs,po("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sa(ml,po("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sa(ml,hs)),ud=po("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rc=po("srcset"),zu=sa(ud,Rc,po("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),po("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ou=po("script,style,template");class Yu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let _=u.firstChild,w=!0;for(;_;)if(_.nodeType===Node.ELEMENT_NODE?w=this.startElement(_):_.nodeType===Node.TEXT_NODE?this.chars(_.nodeValue):this.sanitizedSomething=!0,w&&_.firstChild)_=_.firstChild;else for(;_;){_.nodeType===Node.ELEMENT_NODE&&this.endElement(_);let R=this.checkClobberedElement(_,_.nextSibling);if(R){_=R;break}_=this.checkClobberedElement(_,_.parentNode)}return this.buf.join("")}startElement(u){const _=u.nodeName.toLowerCase();if(!Au.hasOwnProperty(_))return this.sanitizedSomething=!0,!Ou.hasOwnProperty(_);this.buf.push("<"),this.buf.push(_);const w=u.attributes;for(let R=0;R<w.length;R++){const P=w.item(R),X=P.name,re=X.toLowerCase();if(!zu.hasOwnProperty(re)){this.sanitizedSomething=!0;continue}let ve=P.value;ud[re]&&(ve=ho(ve)),Rc[re]&&(c=ve,ve=(c=String(c)).split(",").map(u=>ho(u.trim())).join(", ")),this.buf.push(" ",X,'="',au(ve),'"')}var c;return this.buf.push(">"),!0}endElement(u){const _=u.nodeName.toLowerCase();Au.hasOwnProperty(_)&&!ys.hasOwnProperty(_)&&(this.buf.push("</"),this.buf.push(_),this.buf.push(">"))}chars(u){this.buf.push(au(u))}checkClobberedElement(u,_){if(_&&(u.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return _}}const gc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dd=/([^\#-~ |!])/g;function au(c){return c.replace(/&/g,"&amp;").replace(gc,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(dd,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xc;function ku(c,u){let _=null;try{Xc=Xc||function(c){const u=new Un(c);return function(){try{return!!(new window.DOMParser).parseFromString(Dl(""),"text/html")}catch(c){return!1}}()?new Qn(u):u}(c);let w=u?String(u):"";_=Xc.getInertBodyElement(w);let R=5,P=w;do{if(0===R)throw new Error("Failed to sanitize html because the input is unstable");R--,w=P,P=_.innerHTML,_=Xc.getInertBodyElement(w)}while(w!==P);return Dl((new Yu).sanitizeChildren(Xu(_)||_))}finally{if(_){const w=Xu(_)||_;for(;w.firstChild;)w.removeChild(w.firstChild)}}}function Xu(c){return"content"in c&&function(c){return c.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===c.nodeName}(c)?c.content:null}var Qo=(()=>((Qo=Qo||{})[Qo.NONE=0]="NONE",Qo[Qo.HTML=1]="HTML",Qo[Qo.STYLE=2]="STYLE",Qo[Qo.SCRIPT=3]="SCRIPT",Qo[Qo.URL=4]="URL",Qo[Qo.RESOURCE_URL=5]="RESOURCE_URL",Qo))();function Kc(c){const u=function(){const c=Ue();return c&&c[12]}();return u?u.sanitize(Qo.URL,c)||"":Dt(c,"URL")?it(c):ho(Le(c))}const Ju="__ngContext__";function aa(c,u){c[Ju]=u}function cu(c){const u=function(c){return c[Ju]||null}(c);return u?Array.isArray(u)?u:u.lView:null}function pu(c){return c.ngOriginalError}function xd(c,...u){c.error(...u)}class Zl{constructor(){this._console=console}handleError(u){const _=this._findOriginalError(u),w=(c=u)&&c.ngErrorLogger||xd;var c;w(this._console,"ERROR",u),_&&w(this._console,"ORIGINAL ERROR",_)}_findOriginalError(u){let _=u&&pu(u);for(;_&&pu(_);)_=pu(_);return _||null}}const md=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wt))();function x(c){return c instanceof Function?c():c}var Ce=(()=>((Ce=Ce||{})[Ce.Important=1]="Important",Ce[Ce.DashCase=2]="DashCase",Ce))();function Ke(c,u){return undefined(c,u)}function fi(c){const u=c[3];return _o(u)?u[3]:u}function Xi(c){return _n(c[13])}function sn(c){return _n(c[4])}function _n(c){for(;null!==c&&!_o(c);)c=c[4];return c}function hn(c,u,_,w,R){if(null!=w){let P,X=!1;_o(w)?P=w:ro(w)&&(X=!0,w=w[0]);const re=Re(w);0===c&&null!==_?null==R?ze(u,_,re):Ye(u,_,re,R||null,!0):1===c&&null!==_?Ye(u,_,re,R||null,!0):2===c?function(c,u,_){const w=Mt(c,u);w&&function(c,u,_,w){Nr(c)?c.removeChild(u,_,w):u.removeChild(_)}(c,w,u,_)}(u,re,X):3===c&&u.destroyNode(re),null!=P&&function(c,u,_,w,R){const P=_[7];P!==Re(_)&&hn(u,c,w,P,R);for(let re=10;re<_.length;re++){const ve=_[re];go(ve[1],ve,c,u,w,P)}}(u,c,P,_,R)}}function br(c,u,_){return Nr(c)?c.createElement(u,_):null===_?c.createElement(u):c.createElementNS(_,u)}function Xr(c,u){const _=c[9],w=_.indexOf(u),R=u[3];1024&u[2]&&(u[2]&=-1025,es(R,-1)),_.splice(w,1)}function ks(c,u){if(c.length<=10)return;const _=10+u,w=c[_];if(w){const R=w[17];null!==R&&R!==c&&Xr(R,w),u>0&&(c[_-1][4]=w[4]);const P=Wa(c,10+u);!function(c,u){go(c,u,u[11],2,null,null),u[0]=null,u[6]=null}(w[1],w);const X=P[19];null!==X&&X.detachView(P[1]),w[3]=null,w[4]=null,w[2]&=-129}return w}function ls(c,u){if(!(256&u[2])){const _=u[11];Nr(_)&&_.destroyNode&&go(c,u,_,3,null,null),function(c){let u=c[13];if(!u)return T(c[1],c);for(;u;){let _=null;if(ro(u))_=u[13];else{const w=u[10];w&&(_=w)}if(!_){for(;u&&!u[4]&&u!==c;)ro(u)&&T(u[1],u),u=u[3];null===u&&(u=c),ro(u)&&T(u[1],u),_=u&&u[4]}u=_}}(u)}}function T(c,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function(c,u){let _;if(null!=c&&null!=(_=c.destroyHooks))for(let w=0;w<_.length;w+=2){const R=u[_[w]];if(!(R instanceof ns)){const P=_[w+1];if(Array.isArray(P))for(let X=0;X<P.length;X+=2){const re=R[P[X]],ve=P[X+1];try{ve.call(re)}finally{}}else try{P.call(R)}finally{}}}}(c,u),function(c,u){const _=c.cleanup,w=u[7];let R=-1;if(null!==_)for(let P=0;P<_.length-1;P+=2)if("string"==typeof _[P]){const X=_[P+1],re="function"==typeof X?X(u):Re(u[X]),ve=w[R=_[P+2]],Xe=_[P+3];"boolean"==typeof Xe?re.removeEventListener(_[P],ve,Xe):Xe>=0?w[R=Xe]():w[R=-Xe].unsubscribe(),P+=2}else{const X=w[R=_[P+1]];_[P].call(X)}if(null!==w){for(let P=R+1;P<w.length;P++)w[P]();u[7]=null}}(c,u),1===u[1].type&&Nr(u[11])&&u[11].destroy();const _=u[17];if(null!==_&&_o(u[3])){_!==u[3]&&Xr(_,u);const w=u[19];null!==w&&w.detachView(c)}}}function ee(c,u,_){return function(c,u,_){let w=u;for(;null!==w&&40&w.type;)w=(u=w).parent;if(null===w)return _[0];if(2&w.flags){const R=c.data[w.directiveStart].encapsulation;if(R===wi.None||R===wi.Emulated)return null}return Me(w,_)}(c,u.parent,_)}function Ye(c,u,_,w,R){Nr(c)?c.insertBefore(u,_,w,R):u.insertBefore(_,w,R)}function ze(c,u,_){Nr(c)?c.appendChild(u,_):u.appendChild(_)}function rt(c,u,_,w,R){null!==w?Ye(c,u,_,w,R):ze(c,u,_)}function Mt(c,u){return Nr(c)?c.parentNode(u):u.parentNode}function ai(c,u,_){return Si(c,u,_)}let Si=function(c,u,_){return 40&c.type?Me(c,_):null};function nn(c,u,_,w){const R=ee(c,w,u),P=u[11],re=ai(w.parent||u[6],w,u);if(null!=R)if(Array.isArray(_))for(let ve=0;ve<_.length;ve++)rt(P,R,_[ve],re,!1);else rt(P,R,_,re,!1)}function An(c,u){if(null!==u){const _=u.type;if(3&_)return Me(u,c);if(4&_)return Or(-1,c[u.index]);if(8&_){const w=u.child;if(null!==w)return An(c,w);{const R=c[u.index];return _o(R)?Or(-1,R):Re(R)}}if(32&_)return Ke(u,c)()||Re(c[u.index]);{const w=rn(c,u);return null!==w?Array.isArray(w)?w[0]:An(fi(c[16]),w):An(c,u.next)}}return null}function rn(c,u){return null!==u?c[16][6].projection[u.projection]:null}function Or(c,u){const _=10+c+1;if(_<u.length){const w=u[_],R=w[1].firstChild;if(null!==R)return An(w,R)}return u[7]}function cs(c,u,_,w,R,P,X){for(;null!=_;){const re=w[_.index],ve=_.type;if(X&&0===u&&(re&&aa(Re(re),w),_.flags|=4),64!=(64&_.flags))if(8&ve)cs(c,u,_.child,w,R,P,!1),hn(u,c,R,re,P);else if(32&ve){const Xe=Ke(_,w);let ct;for(;ct=Xe();)hn(u,c,R,ct,P);hn(u,c,R,re,P)}else 16&ve?Fo(c,u,w,_,R,P):hn(u,c,R,re,P);_=X?_.projectionNext:_.next}}function go(c,u,_,w,R,P){cs(_,w,c.firstChild,u,R,P,!1)}function Fo(c,u,_,w,R,P){const X=_[16],ve=X[6].projection[w.projection];if(Array.isArray(ve))for(let Xe=0;Xe<ve.length;Xe++)hn(u,c,R,ve[Xe],P);else cs(c,u,ve,X[3],R,P,!0)}function st(c,u,_){Nr(c)?c.setAttribute(u,"style",_):u.style.cssText=_}function Br(c,u,_){Nr(c)?""===_?c.removeAttribute(u,"class"):c.setAttribute(u,"class",_):u.className=_}function Ps(c,u,_){let w=c.length;for(;;){const R=c.indexOf(u,_);if(-1===R)return R;if(0===R||c.charCodeAt(R-1)<=32){const P=u.length;if(R+P===w||c.charCodeAt(R+P)<=32)return R}_=R+1}}const kc="ng-template";function Lc(c,u,_){let w=0;for(;w<c.length;){let R=c[w++];if(_&&"class"===R){if(R=c[w],-1!==Ps(R.toLowerCase(),u,0))return!0}else if(1===R){for(;w<c.length&&"string"==typeof(R=c[w++]);)if(R.toLowerCase()===u)return!0;return!1}}return!1}function Hu(c){return 4===c.type&&c.value!==kc}function Qu(c,u,_){return u===(4!==c.type||_?c.value:kc)}function Ad(c,u,_){let w=4;const R=c.attrs||[],P=function(c){for(let u=0;u<c.length;u++)if(_c(c[u]))return u;return c.length}(R);let X=!1;for(let re=0;re<u.length;re++){const ve=u[re];if("number"!=typeof ve){if(!X)if(4&w){if(w=2|1&w,""!==ve&&!Qu(c,ve,_)||""===ve&&1===u.length){if(Rl(w))return!1;X=!0}}else{const Xe=8&w?ve:u[++re];if(8&w&&null!==c.attrs){if(!Lc(c.attrs,Xe,_)){if(Rl(w))return!1;X=!0}continue}const Nt=oh(8&w?"class":ve,R,Hu(c),_);if(-1===Nt){if(Rl(w))return!1;X=!0;continue}if(""!==Xe){let oi;oi=Nt>P?"":R[Nt+1].toLowerCase();const Ei=8&w?oi:null;if(Ei&&-1!==Ps(Ei,Xe,0)||2&w&&Xe!==oi){if(Rl(w))return!1;X=!0}}}}else{if(!X&&!Rl(w)&&!Rl(ve))return!1;if(X&&Rl(ve))continue;X=!1,w=ve|1&w}}return Rl(w)||X}function Rl(c){return 0==(1&c)}function oh(c,u,_,w){if(null===u)return-1;let R=0;if(w||!_){let P=!1;for(;R<u.length;){const X=u[R];if(X===c)return R;if(3===X||6===X)P=!0;else{if(1===X||2===X){let re=u[++R];for(;"string"==typeof re;)re=u[++R];continue}if(4===X)break;if(0===X){R+=4;continue}}R+=P?1:2}return-1}return function(c,u){let _=c.indexOf(4);if(_>-1)for(_++;_<c.length;){const w=c[_];if("number"==typeof w)return-1;if(w===u)return _;_++}return-1}(u,c)}function xh(c,u,_=!1){for(let w=0;w<u.length;w++)if(Ad(c,u[w],_))return!0;return!1}function Yd(c,u){e:for(let _=0;_<u.length;_++){const w=u[_];if(c.length===w.length){for(let R=0;R<c.length;R++)if(c[R]!==w[R])continue e;return!0}}return!1}function Id(c,u){return c?":not("+u.trim()+")":u}function Xd(c){let u=c[0],_=1,w=2,R="",P=!1;for(;_<c.length;){let X=c[_];if("string"==typeof X)if(2&w){const re=c[++_];R+="["+X+(re.length>0?'="'+re+'"':"")+"]"}else 8&w?R+="."+X:4&w&&(R+=" "+X);else""!==R&&!Rl(X)&&(u+=Id(P,R),R=""),w=X,P=P||!Rl(w);_++}return""!==R&&(u+=Id(P,R)),u}const Mr={};function Od(c){sh(G(),Ue(),Cr()+c,Cn())}function sh(c,u,_,w){if(!w)if(3==(3&u[2])){const P=c.preOrderCheckHooks;null!==P&&zs(u,P,_)}else{const P=c.preOrderHooks;null!==P&&As(u,P,0,_)}is(_)}function Kd(c,u){return c<<17|u<<2}function Pc(c){return c>>17&32767}function ah(c){return 2|c}function mu(c){return(131068&c)>>2}function lh(c,u){return-131069&c|u<<2}function $d(c){return 1|c}function vh(c,u){const _=c.contentQueries;if(null!==_)for(let w=0;w<_.length;w+=2){const R=_[w],P=_[w+1];if(-1!==P){const X=c.data[P];os(R),X.contentQueries(2,u[P],P)}}}function Nd(c,u,_,w,R,P,X,re,ve,Xe){const ct=u.blueprint.slice();return ct[0]=R,ct[2]=140|w,fr(ct),ct[3]=ct[15]=c,ct[8]=_,ct[10]=X||c&&c[10],ct[11]=re||c&&c[11],ct[12]=ve||c&&c[12]||null,ct[9]=Xe||c&&c[9]||null,ct[6]=P,ct[16]=2==u.type?c[16]:ct,ct}function Fd(c,u,_,w,R){let P=c.data[u];if(null===P)P=function(c,u,_,w,R){const P=Qe(),X=qt(),ve=c.data[u]=function(c,u,_,w,R,P){return{type:_,index:w,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:R,attrs:P,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,X?P:P&&P.parent,_,u,w,R);return null===c.firstChild&&(c.firstChild=ve),null!==P&&(X?null==P.child&&null!==ve.parent&&(P.child=ve):null===P.next&&(P.next=ve)),ve}(c,u,_,w,R),Vn.lFrame.inI18n&&(P.flags|=64);else if(64&P.type){P.type=_,P.value=w,P.attrs=R;const X=function(){const c=Vn.lFrame,u=c.currentTNode;return c.isParent?u:u.parent}();P.injectorIndex=null===X?-1:X.injectorIndex}return Yt(P,!0),P}function Bd(c,u,_,w){if(0===_)return-1;const R=u.length;for(let P=0;P<_;P++)u.push(w),c.blueprint.push(w),c.data.push(null);return R}function eh(c,u,_){xa(u);try{const w=c.viewQuery;null!==w&&fp(1,w,_);const R=c.template;null!==R&&Lh(c,u,R,1,_),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&vh(c,u),c.staticViewQueries&&fp(2,c.viewQuery,_);const P=c.components;null!==P&&function(c,u){for(let _=0;_<u.length;_++)eg(c,u[_])}(u,P)}catch(w){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),w}finally{u[2]&=-5,On()}}function Hd(c,u,_,w){const R=u[2];if(256==(256&R))return;xa(u);const P=Cn();try{fr(u),function(c){Vn.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==_&&Lh(c,u,_,2,w);const X=3==(3&R);if(!P)if(X){const Xe=c.preOrderCheckHooks;null!==Xe&&zs(u,Xe,null)}else{const Xe=c.preOrderHooks;null!==Xe&&As(u,Xe,0,null),ba(u,0)}if(function(c){for(let u=Xi(c);null!==u;u=sn(u)){if(!u[2])continue;const _=u[9];for(let w=0;w<_.length;w++){const R=_[w],P=R[3];0==(1024&R[2])&&es(P,1),R[2]|=1024}}}(u),function(c){for(let u=Xi(c);null!==u;u=sn(u))for(let _=10;_<u.length;_++){const w=u[_],R=w[1];Vr(w)&&Hd(R,w,R.template,w[8])}}(u),null!==c.contentQueries&&vh(c,u),!P)if(X){const Xe=c.contentCheckHooks;null!==Xe&&zs(u,Xe)}else{const Xe=c.contentHooks;null!==Xe&&As(u,Xe,1),ba(u,1)}!function(c,u){const _=c.hostBindingOpCodes;if(null!==_)try{for(let w=0;w<_.length;w++){const R=_[w];if(R<0)is(~R);else{const P=R,X=_[++w],re=_[++w];ko(X,P),re(2,u[P])}}}finally{is(-1)}}(c,u);const re=c.components;null!==re&&function(c,u){for(let _=0;_<u.length;_++)qf(c,u[_])}(u,re);const ve=c.viewQuery;if(null!==ve&&fp(2,ve,w),!P)if(X){const Xe=c.viewCheckHooks;null!==Xe&&zs(u,Xe)}else{const Xe=c.viewHooks;null!==Xe&&As(u,Xe,2),ba(u,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),P||(u[2]&=-73),1024&u[2]&&(u[2]&=-1025,es(u[3],-1))}finally{On()}}function cp(c,u,_,w){const R=u[10],P=!Cn(),X=wr(u);try{P&&!X&&R.begin&&R.begin(),X&&eh(c,u,w),Hd(c,u,_,w)}finally{P&&!X&&R.end&&R.end()}}function Lh(c,u,_,w,R){const P=Cr(),X=2&w;try{is(-1),X&&u.length>20&&sh(c,u,20,Cn()),_(w,R)}finally{is(P)}}function Ph(c,u,_){if(Qs(u)){const R=u.directiveEnd;for(let P=u.directiveStart;P<R;P++){const X=c.data[P];X.contentQueries&&X.contentQueries(1,_[P],P)}}}function yh(c,u,_){!Gs()||(function(c,u,_,w){const R=_.directiveStart,P=_.directiveEnd;c.firstCreatePass||Q(_,u),aa(w,u);const X=_.initialInputs;for(let re=R;re<P;re++){const ve=c.data[re],Xe=$r(ve);Xe&&Kf(u,_,ve);const ct=Xs(u,c,re,_);aa(ct,u),null!==X&&$f(0,re-R,ct,ve,0,X),Xe&&(Xn(_.index,u)[8]=ct)}}(c,u,_,Me(_,u)),128==(128&_.flags)&&function(c,u,_){const w=_.directiveStart,R=_.directiveEnd,X=_.index,re=Vn.lFrame.currentDirectiveIndex;try{is(X);for(let ve=w;ve<R;ve++){const Xe=c.data[ve],ct=u[ve];Ws(ve),(null!==Xe.hostBindings||0!==Xe.hostVars||null!==Xe.hostAttrs)&&zp(Xe,ct)}}finally{is(-1),Ws(re)}}(c,u,_))}function Eh(c,u,_=Me){const w=u.localNames;if(null!==w){let R=u.index+1;for(let P=0;P<w.length;P+=2){const X=w[P+1],re=-1===X?_(u,c):c[X];c[R++]=re}}}function k(c){const u=c.tView;return null===u||u.incompleteFirstPass?c.tView=U(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):u}function U(c,u,_,w,R,P,X,re,ve,Xe){const ct=20+w,Nt=ct+R,oi=function(c,u){const _=[];for(let w=0;w<u;w++)_.push(w<c?null:Mr);return _}(ct,Nt),Ei="function"==typeof Xe?Xe():Xe;return oi[1]={type:c,blueprint:oi,template:_,queries:null,viewQuery:re,declTNode:u,data:oi.slice().fill(null,ct),bindingStartIndex:ct,expandoStartIndex:Nt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof P?P():P,pipeRegistry:"function"==typeof X?X():X,firstChild:null,schemas:ve,consts:Ei,incompleteFirstPass:!1}}function Kt(c,u,_,w){const R=Qp(u);null===_?R.push(w):(R.push(_),c.firstCreatePass&&qp(c).push(w,R.length-1))}function en(c,u,_){for(let w in c)if(c.hasOwnProperty(w)){const R=c[w];(_=null===_?{}:_).hasOwnProperty(w)?_[w].push(u,R):_[w]=[u,R]}return _}function gr(c,u,_,w,R,P,X,re){const ve=Me(u,_);let ct,Xe=u.inputs;!re&&null!=Xe&&(ct=Xe[w])?(tf(c,_,ct,w,R),dr(u)&&function(c,u){const _=Xn(u,c);16&_[2]||(_[2]|=64)}(_,u.index)):3&u.type&&(w=function(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(w),R=null!=X?X(R,u.value||"",w):R,Nr(P)?P.setProperty(ve,w,R):zl(w)||(ve.setProperty?ve.setProperty(w,R):ve[w]=R))}function Vd(c,u,_,w){let R=!1;if(Gs()){const P=function(c,u,_){const w=c.directiveRegistry;let R=null;if(w)for(let P=0;P<w.length;P++){const X=w[P];xh(_,X.selectors,!1)&&(R||(R=[]),Ut(Q(_,u),c,X.type),$r(X)?(Xp(c,_),R.unshift(X)):R.push(X))}return R}(c,u,_),X=null===w?null:{"":-1};if(null!==P){R=!0,Ud(_,c.data.length,P.length);for(let ct=0;ct<P.length;ct++){const Nt=P[ct];Nt.providersResolver&&Nt.providersResolver(Nt)}let re=!1,ve=!1,Xe=Bd(c,u,P.length,null);for(let ct=0;ct<P.length;ct++){const Nt=P[ct];_.mergedAttrs=da(_.mergedAttrs,Nt.hostAttrs),Kp(c,_,u,Xe,Nt),Xf(Xe,Nt,X),null!==Nt.contentQueries&&(_.flags|=8),(null!==Nt.hostBindings||null!==Nt.hostAttrs||0!==Nt.hostVars)&&(_.flags|=128);const oi=Nt.type.prototype;!re&&(oi.ngOnChanges||oi.ngOnInit||oi.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(_.index),re=!0),!ve&&(oi.ngOnChanges||oi.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(_.index),ve=!0),Xe++}!function(c,u){const w=u.directiveEnd,R=c.data,P=u.attrs,X=[];let re=null,ve=null;for(let Xe=u.directiveStart;Xe<w;Xe++){const ct=R[Xe],Nt=ct.inputs,oi=null===P||Hu(u)?null:Jf(Nt,P);X.push(oi),re=en(Nt,Xe,re),ve=en(ct.outputs,Xe,ve)}null!==re&&(re.hasOwnProperty("class")&&(u.flags|=16),re.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=X,u.inputs=re,u.outputs=ve}(c,_)}X&&function(c,u,_){if(u){const w=c.localNames=[];for(let R=0;R<u.length;R+=2){const P=_[u[R+1]];if(null==P)throw new Ie("301",`Export of name '${u[R+1]}' not found!`);w.push(u[R],P)}}}(_,w,X)}return _.mergedAttrs=da(_.mergedAttrs,_.attrs),R}function Fh(c,u,_,w,R,P){const X=P.hostBindings;if(X){let re=c.hostBindingOpCodes;null===re&&(re=c.hostBindingOpCodes=[]);const ve=~u.index;(function(c){let u=c.length;for(;u>0;){const _=c[--u];if("number"==typeof _&&_<0)return _}return 0})(re)!=ve&&re.push(ve),re.push(w,R,X)}}function zp(c,u){null!==c.hostBindings&&c.hostBindings(1,u)}function Xp(c,u){u.flags|=2,(c.components||(c.components=[])).push(u.index)}function Xf(c,u,_){if(_){if(u.exportAs)for(let w=0;w<u.exportAs.length;w++)_[u.exportAs[w]]=c;$r(u)&&(_[""]=c)}}function Ud(c,u,_){c.flags|=1,c.directiveStart=u,c.directiveEnd=u+_,c.providerIndexes=u}function Kp(c,u,_,w,R){c.data[w]=R;const P=R.factory||(R.factory=Vs(R.type)),X=new ns(P,$r(R),null);c.blueprint[w]=X,_[w]=X,Fh(c,u,0,w,Bd(c,_,R.hostVars,Mr),R)}function Kf(c,u,_){const w=Me(u,c),R=k(_),P=c[10],X=Bh(c,Nd(c,R,null,_.onPush?64:16,w,u,P,P.createRenderer(w,_),null,null));c[u.index]=X}function Uu(c,u,_,w,R,P){const X=Me(c,u);!function(c,u,_,w,R,P,X){if(null==P)Nr(c)?c.removeAttribute(u,R,_):u.removeAttribute(R);else{const re=null==X?Le(P):X(P,w||"",R);Nr(c)?c.setAttribute(u,R,re,_):_?u.setAttributeNS(_,R,re):u.setAttribute(R,re)}}(u[11],X,P,c.value,_,w,R)}function $f(c,u,_,w,R,P){const X=P[u];if(null!==X){const re=w.setInput;for(let ve=0;ve<X.length;){const Xe=X[ve++],ct=X[ve++],Nt=X[ve++];null!==re?w.setInput(_,Nt,Xe,ct):_[ct]=Nt}}}function Jf(c,u){let _=null,w=0;for(;w<u.length;){const R=u[w];if(0!==R)if(5!==R){if("number"==typeof R)break;c.hasOwnProperty(R)&&(null===_&&(_=[]),_.push(R,c[R],u[w+1])),w+=2}else w+=2;else w+=4}return _}function $p(c,u,_,w){return new Array(c,!0,!1,u,null,0,w,_,null,null)}function qf(c,u){const _=Xn(u,c);if(Vr(_)){const w=_[1];80&_[2]?Hd(w,_,w.template,_[8]):_[5]>0&&ih(_)}}function ih(c){for(let w=Xi(c);null!==w;w=sn(w))for(let R=10;R<w.length;R++){const P=w[R];if(1024&P[2]){const X=P[1];Hd(X,P,X.template,P[8])}else P[5]>0&&ih(P)}const _=c[1].components;if(null!==_)for(let w=0;w<_.length;w++){const R=Xn(_[w],c);Vr(R)&&R[5]>0&&ih(R)}}function eg(c,u){const _=Xn(u,c),w=_[1];(function(c,u){for(let _=u.length;_<c.blueprint.length;_++)u.push(c.blueprint[_])})(w,_),eh(w,_,_[8])}function Bh(c,u){return c[13]?c[14][4]=u:c[13]=u,c[14]=u,u}function dp(c){for(;c;){c[2]|=64;const u=fi(c);if(ws(c)&&!u)return c;c=u}return null}function pp(c,u,_){const w=u[10];w.begin&&w.begin();try{Hd(c,u,c.template,_)}catch(R){throw ef(u,R),R}finally{w.end&&w.end()}}function Jp(c){!function(c){for(let u=0;u<c.components.length;u++){const _=c.components[u],w=cu(_),R=w[1];cp(R,w,R.template,_)}}(c[8])}function fp(c,u,_){os(0),u(c,_)}const Zp=(()=>Promise.resolve(null))();function Qp(c){return c[7]||(c[7]=[])}function qp(c){return c.cleanup||(c.cleanup=[])}function Hh(c,u,_){return(null===c||$r(c))&&(_=function(c){for(;Array.isArray(c);){if("object"==typeof c[1])return c;c=c[0]}return null}(_[u.index])),_[11]}function ef(c,u){const _=c[9],w=_?_.get(Zl,null):null;w&&w.handleError(u)}function tf(c,u,_,w,R){for(let P=0;P<_.length;){const X=_[P++],re=_[P++],ve=u[X],Xe=c.data[X];null!==Xe.setInput?Xe.setInput(ve,R,w,re):ve[re]=R}}function td(c,u,_){const w=W(u,c);!function(c,u,_){Nr(c)?c.setValue(u,_):u.textContent=_}(c[11],w,_)}function Vh(c,u,_){let w=_?c.styles:null,R=_?c.classes:null,P=0;if(null!==u)for(let X=0;X<u.length;X++){const re=u[X];"number"==typeof re?P=re:1==P?R=D(R,re):2==P&&(w=D(w,re+": "+u[++X]+";"))}_?c.styles=w:c.stylesWithoutHost=w,_?c.classes=R:c.classesWithoutHost=R}const gp=new Uo("INJECTOR",-1);class nf{get(u,_=ra){if(_===ra){const w=new Error(`NullInjectorError: No provider for ${C(u)}!`);throw w.name="NullInjectorError",w}return _}}const rf=new Uo("Set Injector scope."),Ch={},ag={};let Uh;function Th(){return void 0===Uh&&(Uh=new nf),Uh}function sf(c,u=null,_=null,w){const R=af(c,u,_,w);return R._resolveInjectorDefTypes(),R}function af(c,u=null,_=null,w){return new lg(c,_,u||Th(),w)}class lg{constructor(u,_,w,R=null){this.parent=w,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const P=[];_&&wo(_,re=>this.processProvider(re,u,_)),wo([u],re=>this.processInjectorType(re,[],P)),this.records.set(gp,nh(void 0,this));const X=this.records.get(rf);this.scope=null!=X?X.value:null,this.source=R||("object"==typeof u?null:C(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,_=ra,w=tt.Default){this.assertNotDestroyed();const R=dc(this),P=mt(void 0);try{if(!(w&tt.SkipSelf)){let re=this.records.get(u);if(void 0===re){const ve=("function"==typeof(c=u)||"object"==typeof c&&c instanceof Uo)&&Tt(u);re=ve&&this.injectableDefInScope(ve)?nh(mp(u),Ch):null,this.records.set(u,re)}if(null!=re)return this.hydrate(u,re)}return(w&tt.Self?Th():this.parent).get(u,_=w&tt.Optional&&_===ra?null:_)}catch(X){if("NullInjectorError"===X.name){if((X[No]=X[No]||[]).unshift(C(u)),R)throw X;return function(c,u,_,w){const R=c[No];throw u[uc]&&R.unshift(u[uc]),c.message=function(c,u,_,w=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.substr(2):c;let R=C(u);if(Array.isArray(u))R=u.map(C).join(" -> ");else if("object"==typeof u){let P=[];for(let X in u)if(u.hasOwnProperty(X)){let re=u[X];P.push(X+":"+("string"==typeof re?JSON.stringify(re):C(re)))}R=`{${P.join(", ")}}`}return`${_}${w?"("+w+")":""}[${R}]: ${c.replace(cc,"\n  ")}`}("\n"+c.message,R,_,w),c.ngTokenPath=R,c[No]=null,c}(X,u,"R3InjectorError",this.source)}throw X}finally{mt(P),dc(R)}var c}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((w,R)=>u.push(C(R))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(u,_,w){if(!(u=oe(u)))return!1;let R=pt(u);const P=null==R&&u.ngModule||void 0,X=void 0===P?u:P,re=-1!==w.indexOf(X);if(void 0!==P&&(R=pt(P)),null==R)return!1;if(null!=R.imports&&!re){let ct;w.push(X);try{wo(R.imports,Nt=>{this.processInjectorType(Nt,_,w)&&(void 0===ct&&(ct=[]),ct.push(Nt))})}finally{}if(void 0!==ct)for(let Nt=0;Nt<ct.length;Nt++){const{ngModule:oi,providers:Ei}=ct[Nt];wo(Ei,$i=>this.processProvider($i,oi,Ei||Mi))}}this.injectorDefTypes.add(X);const ve=Vs(X)||(()=>new X);this.records.set(X,nh(ve,Ch));const Xe=R.providers;if(null!=Xe&&!re){const ct=u;wo(Xe,Nt=>this.processProvider(Nt,ct,Xe))}return void 0!==P&&void 0!==u.providers}processProvider(u,_,w){let R=rh(u=oe(u))?u:oe(u&&u.provide);const P=(c=u,cf(c)?nh(void 0,c.useValue):nh(lf(c),Ch));var c;if(rh(u)||!0!==u.multi)this.records.get(R);else{let X=this.records.get(R);X||(X=nh(void 0,Ch,!0),X.factory=()=>hc(X.multi),this.records.set(R,X)),R=u,X.multi.push(u)}this.records.set(R,P)}hydrate(u,_){return _.value===Ch&&(_.value=ag,_.value=_.factory()),"object"==typeof _.value&&_.value&&null!==(c=_.value)&&"object"==typeof c&&"function"==typeof c.ngOnDestroy&&this.onDestroy.add(_.value),_.value;var c}injectableDefInScope(u){if(!u.providedIn)return!1;const _=oe(u.providedIn);return"string"==typeof _?"any"===_||_===this.scope:this.injectorDefTypes.has(_)}}function mp(c){const u=Tt(c),_=null!==u?u.factory:Vs(c);if(null!==_)return _;if(c instanceof Uo)throw new Error(`Token ${C(c)} is missing a \u0275prov definition.`);if(c instanceof Function)return function(c){const u=c.length;if(u>0){const w=Nl(u,"?");throw new Error(`Can't resolve all parameters for ${C(c)}: (${w.join(", ")}).`)}const _=function(c){const u=c&&(c[jt]||c[Rt]);if(u){const _=function(c){if(c.hasOwnProperty("name"))return c.name;const u=(""+c).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${_}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${_}" class.`),u}return null}(c);return null!==_?()=>_.factory(c):()=>new c}(c);throw new Error("unreachable")}function lf(c,u,_){let w;if(rh(c)){const R=oe(c);return Vs(R)||mp(R)}if(cf(c))w=()=>oe(c.useValue);else if(function(c){return!(!c||!c.useFactory)}(c))w=()=>c.useFactory(...hc(c.deps||[]));else if(function(c){return!(!c||!c.useExisting)}(c))w=()=>Jo(oe(c.useExisting));else{const R=oe(c&&(c.useClass||c.provide));if(!function(c){return!!c.deps}(c))return Vs(R)||mp(R);w=()=>new R(...hc(c.deps))}return w}function nh(c,u,_=!1){return{factory:c,value:u,multi:_?[]:void 0}}function cf(c){return null!==c&&"object"==typeof c&&ja in c}function rh(c){return"function"==typeof c}let eu=(()=>{class c{static create(_,w){var R;if(Array.isArray(_))return sf({name:""},w,_,"");{const P=null!==(R=_.name)&&void 0!==R?R:"";return sf({name:P},_.parent,_.providers,P)}}}return c.THROW_IF_NOT_FOUND=ra,c.NULL=new nf,c.\u0275prov=Ct({token:c,providedIn:"any",factory:()=>Jo(gp)}),c.__NG_ELEMENT_ID__=-1,c})();function Cg(c,u){_s(cu(c)[1],fe())}function bp(c){let u=function(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),_=!0;const w=[c];for(;u;){let R;if($r(c))R=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Error("Directives cannot inherit Components");R=u.\u0275dir}if(R){if(_){w.push(R);const X=c;X.inputs=s(c.inputs),X.declaredInputs=s(c.declaredInputs),X.outputs=s(c.outputs);const re=R.hostBindings;re&&l(c,re);const ve=R.viewQuery,Xe=R.contentQueries;if(ve&&r(c,ve),Xe&&o(c,Xe),d(c.inputs,R.inputs),d(c.declaredInputs,R.declaredInputs),d(c.outputs,R.outputs),$r(R)&&R.data.animation){const ct=c.data;ct.animation=(ct.animation||[]).concat(R.data.animation)}}const P=R.features;if(P)for(let X=0;X<P.length;X++){const re=P[X];re&&re.ngInherit&&re(c),re===bp&&(_=!1)}}u=Object.getPrototypeOf(u)}!function(c){let u=0,_=null;for(let w=c.length-1;w>=0;w--){const R=c[w];R.hostVars=u+=R.hostVars,R.hostAttrs=da(R.hostAttrs,_=da(_,R.hostAttrs))}}(w)}function s(c){return c===zt?{}:c===Mi?[]:c}function r(c,u){const _=c.viewQuery;c.viewQuery=_?(w,R)=>{u(w,R),_(w,R)}:u}function o(c,u){const _=c.contentQueries;c.contentQueries=_?(w,R,P)=>{u(w,R,P),_(w,R,P)}:u}function l(c,u){const _=c.hostBindings;c.hostBindings=_?(w,R)=>{u(w,R),_(w,R)}:u}let I=null;function N(){if(!I){const c=wt.Symbol;if(c&&c.iterator)I=c.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let _=0;_<u.length;++_){const w=u[_];"entries"!==w&&"size"!==w&&Map.prototype[w]===Map.prototype.entries&&(I=w)}}}return I}function de(c){return!!Et(c)&&(Array.isArray(c)||!(c instanceof Map)&&N()in c)}function Et(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function xt(c,u,_){return c[u]=_}function Wt(c,u,_){return!Object.is(c[u],_)&&(c[u]=_,!0)}function Ti(c,u,_,w){const R=Wt(c,u,_);return Wt(c,u+1,w)||R}function Yi(c,u,_,w){const R=Ue();return Wt(R,ar(),u)&&(G(),Uu(Ar(),R,c,u,_,w)),Yi}function vn(c,u,_,w){return Wt(c,ar(),_)?u+Le(_)+w:Mr}function Fn(c,u,_,w,R,P,X,re){const Xe=function(c,u,_,w,R){const P=Ti(c,u,_,w);return Wt(c,u+2,R)||P}(c,Pn(),_,R,X);return Dr(3),Xe?u+Le(_)+w+Le(R)+P+Le(X)+re:Mr}function id(c,u,_,w,R,P,X,re){const ve=Ue(),Xe=G(),ct=c+20,Nt=Xe.firstCreatePass?function(c,u,_,w,R,P,X,re,ve){const Xe=u.consts,ct=Fd(u,c,4,X||null,to(Xe,re));Vd(u,_,ct,to(Xe,ve)),_s(u,ct);const Nt=ct.tViews=U(2,ct,w,R,P,u.directiveRegistry,u.pipeRegistry,null,u.schemas,Xe);return null!==u.queries&&(u.queries.template(u,ct),Nt.queries=u.queries.embeddedTView(ct)),ct}(ct,Xe,ve,u,_,w,R,P,X):Xe.data[ct];Yt(Nt,!1);const oi=ve[11].createComment("");nn(Xe,ve,oi,Nt),aa(oi,ve),Bh(ve,ve[ct]=$p(oi,ve,oi,Nt)),Xo(Nt)&&yh(Xe,ve,Nt),null!=X&&Eh(ve,Nt,re)}function wh(c){return cn(Vn.lFrame.contextLView,20+c)}function yp(c,u=tt.Default){const _=Ue();return null===_?Jo(c,u):yr(fe(),_,oe(c),u)}function n_(){throw new Error("invalid")}function xg(c,u,_){const w=Ue();return Wt(w,ar(),u)&&gr(G(),Ar(),w,c,u,w[11],_,!1),xg}function Rg(c,u,_,w,R){const X=R?"class":"style";tf(c,_,u.inputs[X],X,w)}function Ag(c,u,_,w){const R=Ue(),P=G(),X=20+c,re=R[11],ve=R[X]=br(re,u,Vn.lFrame.currentNamespace),Xe=P.firstCreatePass?function(c,u,_,w,R,P,X){const re=u.consts,Xe=Fd(u,c,2,R,to(re,P));return Vd(u,_,Xe,to(re,X)),null!==Xe.attrs&&Vh(Xe,Xe.attrs,!1),null!==Xe.mergedAttrs&&Vh(Xe,Xe.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,Xe),Xe}(X,P,R,0,u,_,w):P.data[X];Yt(Xe,!0);const ct=Xe.mergedAttrs;null!==ct&&qa(re,ve,ct);const Nt=Xe.classes;null!==Nt&&Br(re,ve,Nt);const oi=Xe.styles;null!==oi&&st(re,ve,oi),64!=(64&Xe.flags)&&nn(P,R,ve,Xe),0===Vn.lFrame.elementDepthCount&&aa(ve,R),Vn.lFrame.elementDepthCount++,Xo(Xe)&&(yh(P,R,Xe),Ph(P,Xe,R)),null!==w&&Eh(R,Xe)}function Ig(){let c=fe();qt()?vi():(c=c.parent,Yt(c,!1));const u=c;Vn.lFrame.elementDepthCount--;const _=G();_.firstCreatePass&&(_s(_,c),Qs(c)&&_.queries.elementEnd(c)),null!=u.classesWithoutHost&&function(c){return 0!=(16&c.flags)}(u)&&Rg(_,u,Ue(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function(c){return 0!=(32&c.flags)}(u)&&Rg(_,u,Ue(),u.stylesWithoutHost,!1)}function r_(c,u,_,w){Ag(c,u,_,w),Ig()}function Og(c,u,_){const w=Ue(),R=G(),P=c+20,X=R.firstCreatePass?function(c,u,_,w,R){const P=u.consts,X=to(P,w),re=Fd(u,c,8,"ng-container",X);return null!==X&&Vh(re,X,!0),Vd(u,_,re,to(P,R)),null!==u.queries&&u.queries.elementStart(u,re),re}(P,R,w,u,_):R.data[P];Yt(X,!0);const re=w[P]=w[11].createComment("");nn(R,w,re,X),aa(re,w),Xo(X)&&(yh(R,w,X),Ph(R,X,w)),null!=_&&Eh(w,X)}function kg(){let c=fe();const u=G();qt()?vi():(c=c.parent,Yt(c,!1)),u.firstCreatePass&&(_s(u,c),Qs(c)&&u.queries.elementEnd(c))}function o_(c,u,_){Og(c,u,_),kg()}function s_(){return Ue()}function Lg(c){return!!c&&"function"==typeof c.then}function a_(c){return!!c&&"function"==typeof c.subscribe}const l_=a_;function Pg(c,u,_,w){const R=Ue(),P=G(),X=fe();return c_(P,R,R[11],X,c,u,!!_,w),Pg}function Ng(c,u){const _=fe(),w=Ue(),R=G();return c_(R,w,Hh(Co(R.data),_,w),_,c,u,!1),Ng}function c_(c,u,_,w,R,P,X,re){const ve=Xo(w),ct=c.firstCreatePass&&qp(c),Nt=u[8],oi=Qp(u);let Ei=!0;if(3&w.type||re){const Ln=Me(w,u),qn=re?re(Ln):Ln,on=oi.length,Er=re?xo=>re(Re(xo[w.index])):w.index;if(Nr(_)){let xo=null;if(!re&&ve&&(xo=function(c,u,_,w){const R=c.cleanup;if(null!=R)for(let P=0;P<R.length-1;P+=2){const X=R[P];if(X===_&&R[P+1]===w){const re=u[7],ve=R[P+2];return re.length>ve?re[ve]:null}"string"==typeof X&&(P+=2)}return null}(c,u,R,w.index)),null!==xo)(xo.__ngLastListenerFn__||xo).__ngNextListenerFn__=P,xo.__ngLastListenerFn__=P,Ei=!1;else{P=Fg(w,u,Nt,P,!1);const ps=_.listen(qn,R,P);oi.push(P,ps),ct&&ct.push(R,Er,on,on+1)}}else P=Fg(w,u,Nt,P,!0),qn.addEventListener(R,P,X),oi.push(P),ct&&ct.push(R,Er,on,X)}else P=Fg(w,u,Nt,P,!1);const $i=w.outputs;let bn;if(Ei&&null!==$i&&(bn=$i[R])){const Ln=bn.length;if(Ln)for(let qn=0;qn<Ln;qn+=2){const Eu=u[bn[qn]][bn[qn+1]].subscribe(P),Mh=oi.length;oi.push(P,Eu),ct&&ct.push(R,w.index,Mh,-(Mh+1))}}}function u_(c,u,_,w){try{return!1!==_(w)}catch(R){return ef(c,R),!1}}function Fg(c,u,_,w,R){return function P(X){if(X===Function)return w;const re=2&c.flags?Xn(c.index,u):u;0==(32&u[2])&&dp(re);let ve=u_(u,0,w,X),Xe=P.__ngNextListenerFn__;for(;Xe;)ve=u_(u,0,Xe,X)&&ve,Xe=Xe.__ngNextListenerFn__;return R&&!1===ve&&(X.preventDefault(),X.returnValue=!1),ve}}function d_(c=1){return function(c){return(Vn.lFrame.contextLView=function(c,u){for(;c>0;)u=u[15],c--;return u}(c,Vn.lFrame.contextLView))[8]}(c)}function vy(c,u){let _=null;const w=function(c){const u=c.attrs;if(null!=u){const _=u.indexOf(5);if(0==(1&_))return u[_+1]}return null}(c);for(let R=0;R<u.length;R++){const P=u[R];if("*"!==P){if(null===w?xh(c,P,!0):Yd(w,P))return R}else _=R}return _}function h_(c){const u=Ue()[16][6];if(!u.projection){const w=u.projection=Nl(c?c.length:1,null),R=w.slice();let P=u.child;for(;null!==P;){const X=c?vy(P,c):0;null!==X&&(R[X]?R[X].projectionNext=P:w[X]=P,R[X]=P),P=P.next}}}function p_(c,u=0,_){const w=Ue(),R=G(),P=Fd(R,20+c,16,null,_||null);null===P.projection&&(P.projection=u),vi(),64!=(64&P.flags)&&function(c,u,_){Fo(u[11],0,u,_,ee(c,_,u),ai(_.parent||u[6],_,u))}(R,w,P)}function Bg(c,u,_){return Hg(c,"",u,"",_),Bg}function Hg(c,u,_,w,R){const P=Ue(),X=vn(P,u,_,w);return X!==Mr&&gr(G(),Ar(),P,c,X,P[11],R,!1),Hg}function C_(c,u,_,w,R){const P=c[_+1],X=null===u;let re=w?Pc(P):mu(P),ve=!1;for(;0!==re&&(!1===ve||X);){const ct=c[re+1];Ey(c[re],u)&&(ve=!0,c[re+1]=w?$d(ct):ah(ct)),re=w?Pc(ct):mu(ct)}ve&&(c[_+1]=w?ah(P):$d(P))}function Ey(c,u){return null===c||null==u||(Array.isArray(c)?c[1]:c)===u||!(!Array.isArray(c)||"string"!=typeof u)&&oc(c,u)>=0}const Il={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function T_(c){return c.substring(Il.key,Il.keyEnd)}function w_(c,u){const _=Il.textEnd;return _===u?-1:(u=Il.keyEnd=function(c,u,_){for(;u<_&&c.charCodeAt(u)>32;)u++;return u}(c,Il.key=u,_),zh(c,u,_))}function zh(c,u,_){for(;u<_&&c.charCodeAt(u)<=32;)u++;return u}function Vg(c,u,_){return nd(c,u,_,!1),Vg}function Ug(c,u){return nd(c,u,null,!0),Ug}function yd(c,u){for(let _=function(c){return function(c){Il.key=0,Il.keyEnd=0,Il.value=0,Il.valueEnd=0,Il.textEnd=c.length}(c),w_(c,zh(c,0,Il.textEnd))}(u);_>=0;_=w_(u,_))bs(c,T_(u),!0)}function nd(c,u,_,w){const R=Ue(),P=G(),X=Dr(2);P.firstUpdatePass&&A_(P,c,X,w),u!==Mr&&Wt(R,X,u)&&O_(P,P.data[Cr()],R,R[11],c,R[X+1]=function(c,u){return null==c||("string"==typeof u?c+=u:"object"==typeof c&&(c=C(it(c)))),c}(u,_),w,X)}function R_(c,u){return u>=c.expandoStartIndex}function A_(c,u,_,w){const R=c.data;if(null===R[_+1]){const P=R[Cr()],X=R_(c,_);L_(P,w)&&null===u&&!X&&(u=!1),u=function(c,u,_,w){const R=Co(c);let P=w?u.residualClasses:u.residualStyles;if(null===R)0===(w?u.classBindings:u.styleBindings)&&(_=Ep(_=Gg(null,c,u,_,w),u.attrs,w),P=null);else{const X=u.directiveStylingLast;if(-1===X||c[X]!==R)if(_=Gg(R,c,u,_,w),null===P){let ve=function(c,u,_){const w=_?u.classBindings:u.styleBindings;if(0!==mu(w))return c[Pc(w)]}(c,u,w);void 0!==ve&&Array.isArray(ve)&&(ve=Gg(null,c,u,ve[1],w),ve=Ep(ve,u.attrs,w),function(c,u,_,w){c[Pc(_?u.classBindings:u.styleBindings)]=w}(c,u,w,ve))}else P=function(c,u,_){let w;const R=u.directiveEnd;for(let P=1+u.directiveStylingLast;P<R;P++)w=Ep(w,c[P].hostAttrs,_);return Ep(w,u.attrs,_)}(c,u,w)}return void 0!==P&&(w?u.residualClasses=P:u.residualStyles=P),_}(R,P,u,w),function(c,u,_,w,R,P){let X=P?u.classBindings:u.styleBindings,re=Pc(X),ve=mu(X);c[w]=_;let ct,Xe=!1;if(Array.isArray(_)){const Nt=_;ct=Nt[1],(null===ct||oc(Nt,ct)>0)&&(Xe=!0)}else ct=_;if(R)if(0!==ve){const oi=Pc(c[re+1]);c[w+1]=Kd(oi,re),0!==oi&&(c[oi+1]=lh(c[oi+1],w)),c[re+1]=function(c,u){return 131071&c|u<<17}(c[re+1],w)}else c[w+1]=Kd(re,0),0!==re&&(c[re+1]=lh(c[re+1],w)),re=w;else c[w+1]=Kd(ve,0),0===re?re=w:c[ve+1]=lh(c[ve+1],w),ve=w;Xe&&(c[w+1]=ah(c[w+1])),C_(c,ct,w,!0),C_(c,ct,w,!1),function(c,u,_,w,R){const P=R?c.residualClasses:c.residualStyles;null!=P&&"string"==typeof u&&oc(P,u)>=0&&(_[w+1]=$d(_[w+1]))}(u,ct,c,w,P),X=Kd(re,ve),P?u.classBindings=X:u.styleBindings=X}(R,P,u,_,X,w)}}function Gg(c,u,_,w,R){let P=null;const X=_.directiveEnd;let re=_.directiveStylingLast;for(-1===re?re=_.directiveStart:re++;re<X&&(P=u[re],w=Ep(w,P.hostAttrs,R),P!==c);)re++;return null!==c&&(_.directiveStylingLast=re),w}function Ep(c,u,_){const w=_?1:2;let R=-1;if(null!==u)for(let P=0;P<u.length;P++){const X=u[P];"number"==typeof X?R=X:R===w&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),bs(c,X,!!_||u[++P]))}return void 0===c?null:c}function O_(c,u,_,w,R,P,X,re){if(!(3&u.type))return;const ve=c.data,Xe=ve[re+1];Cf(function(c){return 1==(1&c)}(Xe)?k_(ve,u,_,R,mu(Xe),X):void 0)||(Cf(P)||function(c){return 2==(2&c)}(Xe)&&(P=k_(ve,null,_,R,re,X)),function(c,u,_,w,R){const P=Nr(c);if(u)R?P?c.addClass(_,w):_.classList.add(w):P?c.removeClass(_,w):_.classList.remove(w);else{let X=-1===w.indexOf("-")?void 0:Ce.DashCase;if(null==R)P?c.removeStyle(_,w,X):_.style.removeProperty(w);else{const re="string"==typeof R&&R.endsWith("!important");re&&(R=R.slice(0,-10),X|=Ce.Important),P?c.setStyle(_,w,R,X):_.style.setProperty(w,R,re?"important":"")}}}(w,X,W(Cr(),_),R,P))}function k_(c,u,_,w,R,P){const X=null===u;let re;for(;R>0;){const ve=c[R],Xe=Array.isArray(ve),ct=Xe?ve[1]:ve,Nt=null===ct;let oi=_[R+1];oi===Mr&&(oi=Nt?Mi:void 0);let Ei=Nt?tl(oi,w):ct===w?oi:void 0;if(Xe&&!Cf(Ei)&&(Ei=tl(ve,w)),Cf(Ei)&&(re=Ei,X))return re;const $i=c[R+1];R=X?Pc($i):mu($i)}if(null!==u){let ve=P?u.residualClasses:u.residualStyles;null!=ve&&(re=tl(ve,w))}return re}function Cf(c){return void 0!==c}function L_(c,u){return 0!=(c.flags&(u?16:32))}function P_(c,u=""){const _=Ue(),w=G(),R=c+20,P=w.firstCreatePass?Fd(w,R,1,u,null):w.data[R],X=_[R]=function(c,u){return Nr(c)?c.createText(u):c.createTextNode(u)}(_[11],u);nn(w,_,X,P),Yt(P,!1)}function Wg(c){return Tf("",c,""),Wg}function Tf(c,u,_){const w=Ue(),R=vn(w,c,u,_);return R!==Mr&&td(w,Cr(),R),Tf}function jg(c,u,_,w,R){const P=Ue(),X=function(c,u,_,w,R,P){const re=Ti(c,Pn(),_,R);return Dr(2),re?u+Le(_)+w+Le(R)+P:Mr}(P,c,u,_,w,R);return X!==Mr&&td(P,Cr(),X),jg}function zg(c,u,_,w,R,P,X){const re=Ue(),ve=Fn(re,c,u,_,w,R,P,X);return ve!==Mr&&td(re,Cr(),ve),zg}function G_(c,u,_){!function(c,u,_,w){const R=G(),P=Dr(2);R.firstUpdatePass&&A_(R,null,P,w);const X=Ue();if(_!==Mr&&Wt(X,P,_)){const re=R.data[Cr()];if(L_(re,w)&&!R_(R,P)){let ve=w?re.classesWithoutHost:re.stylesWithoutHost;null!==ve&&(_=D(ve,_||"")),Rg(R,re,X,_,w)}else!function(c,u,_,w,R,P,X,re){R===Mr&&(R=Mi);let ve=0,Xe=0,ct=0<R.length?R[0]:null,Nt=0<P.length?P[0]:null;for(;null!==ct||null!==Nt;){const oi=ve<R.length?R[ve+1]:void 0,Ei=Xe<P.length?P[Xe+1]:void 0;let bn,$i=null;ct===Nt?(ve+=2,Xe+=2,oi!==Ei&&($i=Nt,bn=Ei)):null===Nt||null!==ct&&ct<Nt?(ve+=2,$i=ct):(Xe+=2,$i=Nt,bn=Ei),null!==$i&&O_(c,u,_,w,$i,bn,X,re),ct=ve<R.length?R[ve]:null,Nt=Xe<P.length?P[Xe]:null}}(R,re,X,X[11],X[P+1],X[P+1]=function(c,u,_){if(null==_||""===_)return Mi;const w=[],R=it(_);if(Array.isArray(R))for(let P=0;P<R.length;P++)c(w,R[P],!0);else if("object"==typeof R)for(const P in R)R.hasOwnProperty(P)&&c(w,P,R[P]);else"string"==typeof R&&u(w,R);return w}(c,u,_),w,P)}}(bs,yd,vn(Ue(),c,u,_),!0)}function Yg(c,u,_){const w=Ue();return Wt(w,ar(),u)&&gr(G(),Ar(),w,c,u,w[11],_,!0),Yg}function Xg(c,u,_){const w=Ue();if(Wt(w,ar(),u)){const P=G(),X=Ar();gr(P,X,w,c,u,Hh(Co(P.data),X,w),_,!0)}return Xg}const Sh=void 0;var tE=["en",[["a","p"],["AM","PM"],Sh],[["AM","PM"],Sh,Sh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sh,"{1} 'at' {0}",Sh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(c){const _=Math.floor(Math.abs(c)),w=c.toString().replace(/^[^.]*\.?/,"").length;return 1===_&&0===w?1:5}];let Yh={};function Kg(c){const u=function(c){return c.toLowerCase().replace(/_/g,"-")}(c);let _=q_(u);if(_)return _;const w=u.split("-")[0];if(_=q_(w),_)return _;if("en"===w)return tE;throw new Error(`Missing locale data for the locale "${c}".`)}function Q_(c){return Kg(c)[Sr.PluralCase]}function q_(c){return c in Yh||(Yh[c]=wt.ng&&wt.ng.common&&wt.ng.common.locales&&wt.ng.common.locales[c]),Yh[c]}var Sr=(()=>((Sr=Sr||{})[Sr.LocaleId=0]="LocaleId",Sr[Sr.DayPeriodsFormat=1]="DayPeriodsFormat",Sr[Sr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Sr[Sr.DaysFormat=3]="DaysFormat",Sr[Sr.DaysStandalone=4]="DaysStandalone",Sr[Sr.MonthsFormat=5]="MonthsFormat",Sr[Sr.MonthsStandalone=6]="MonthsStandalone",Sr[Sr.Eras=7]="Eras",Sr[Sr.FirstDayOfWeek=8]="FirstDayOfWeek",Sr[Sr.WeekendRange=9]="WeekendRange",Sr[Sr.DateFormat=10]="DateFormat",Sr[Sr.TimeFormat=11]="TimeFormat",Sr[Sr.DateTimeFormat=12]="DateTimeFormat",Sr[Sr.NumberSymbols=13]="NumberSymbols",Sr[Sr.NumberFormats=14]="NumberFormats",Sr[Sr.CurrencyCode=15]="CurrencyCode",Sr[Sr.CurrencySymbol=16]="CurrencySymbol",Sr[Sr.CurrencyName=17]="CurrencyName",Sr[Sr.Currencies=18]="Currencies",Sr[Sr.Directionality=19]="Directionality",Sr[Sr.PluralCase=20]="PluralCase",Sr[Sr.ExtraData=21]="ExtraData",Sr))();const wf="en-US";let ev=wf;function Zg(c,u,_,w,R){if(c=oe(c),Array.isArray(c))for(let P=0;P<c.length;P++)Zg(c[P],u,_,w,R);else{const P=G(),X=Ue();let re=rh(c)?c:oe(c.provide),ve=lf(c);const Xe=fe(),ct=1048575&Xe.providerIndexes,Nt=Xe.directiveStart,oi=Xe.providerIndexes>>20;if(rh(c)||!c.multi){const Ei=new ns(ve,R,yp),$i=qg(re,u,R?ct:ct+oi,Nt);-1===$i?(Ut(Q(Xe,X),P,re),Qg(P,c,u.length),u.push(re),Xe.directiveStart++,Xe.directiveEnd++,R&&(Xe.providerIndexes+=1048576),_.push(Ei),X.push(Ei)):(_[$i]=Ei,X[$i]=Ei)}else{const Ei=qg(re,u,ct+oi,Nt),$i=qg(re,u,ct,ct+oi),bn=Ei>=0&&_[Ei],Ln=$i>=0&&_[$i];if(R&&!Ln||!R&&!bn){Ut(Q(Xe,X),P,re);const qn=function(c,u,_,w,R){const P=new ns(c,_,yp);return P.multi=[],P.index=u,P.componentProviders=0,wv(P,R,w&&!_),P}(R?qE:QE,_.length,R,w,ve);!R&&Ln&&(_[$i].providerFactory=qn),Qg(P,c,u.length,0),u.push(re),Xe.directiveStart++,Xe.directiveEnd++,R&&(Xe.providerIndexes+=1048576),_.push(qn),X.push(qn)}else Qg(P,c,Ei>-1?Ei:$i,wv(_[R?$i:Ei],ve,!R&&w));!R&&w&&Ln&&_[$i].componentProviders++}}}function Qg(c,u,_,w){const R=rh(u),P=function(c){return!!c.useClass}(u);if(R||P){const ve=(P?oe(u.useClass):u).prototype.ngOnDestroy;if(ve){const Xe=c.destroyHooks||(c.destroyHooks=[]);if(!R&&u.multi){const ct=Xe.indexOf(_);-1===ct?Xe.push(_,[w,ve]):Xe[ct+1].push(w,ve)}else Xe.push(_,ve)}}}function wv(c,u,_){return _&&c.componentProviders++,c.multi.push(u)-1}function qg(c,u,_,w){for(let R=_;R<w;R++)if(u[R]===c)return R;return-1}function QE(c,u,_,w){return em(this.multi,[])}function qE(c,u,_,w){const R=this.multi;let P;if(this.providerFactory){const X=this.providerFactory.componentProviders,re=Xs(_,_[1],this.providerFactory.index,w);P=re.slice(0,X),em(R,P);for(let ve=X;ve<re.length;ve++)P.push(re[ve])}else P=[],em(R,P);return P}function em(c,u){for(let _=0;_<c.length;_++)u.push((0,c[_])());return u}function Sv(c,u=[]){return _=>{_.providersResolver=(w,R)=>function(c,u,_){const w=G();if(w.firstCreatePass){const R=$r(c);Zg(_,w.data,w.blueprint,R,!0),Zg(u,w.data,w.blueprint,R,!1)}}(w,R?R(c):c,u)}}class Dv{}class nC{resolveComponentFactory(u){throw function(c){const u=Error(`No component factory found for ${C(c)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=c,u}(u)}}let Dp=(()=>{class c{}return c.NULL=new nC,c})();function rC(){return Kh(fe(),Ue())}function Kh(c,u){return new Mp(Me(c,u))}let Mp=(()=>{class c{constructor(_){this.nativeElement=_}}return c.__NG_ELEMENT_ID__=rC,c})();function oC(c){return c instanceof Mp?c.nativeElement:c}class xv{}let sC=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function(){const c=Ue(),_=Xn(fe().index,c);return function(c){return c[11]}(ro(_)?_:c)}(),c})(),cC=(()=>{class c{}return c.\u0275prov=Ct({token:c,providedIn:"root",factory:()=>null}),c})();class Rv{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const uC=new Rv("13.1.1"),tm={};function Rf(c,u,_,w,R=!1){for(;null!==_;){const P=u[_.index];if(null!==P&&w.push(Re(P)),_o(P))for(let re=10;re<P.length;re++){const ve=P[re],Xe=ve[1].firstChild;null!==Xe&&Rf(ve[1],ve,Xe,w)}const X=_.type;if(8&X)Rf(c,u,_.child,w);else if(32&X){const re=Ke(_,u);let ve;for(;ve=re();)w.push(ve)}else if(16&X){const re=rn(u,_);if(Array.isArray(re))w.push(...re);else{const ve=fi(u[16]);Rf(ve[1],ve,re,w,!0)}}_=R?_.projectionNext:_.next}return w}class xp{constructor(u,_){this._lView=u,this._cdRefInjectingView=_,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,_=u[1];return Rf(_,u,_.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(_o(u)){const _=u[8],w=_?_.indexOf(this):-1;w>-1&&(ks(u,w),Wa(_,w))}this._attachedToViewContainer=!1}ls(this._lView[1],this._lView)}onDestroy(u){Kt(this._lView[1],this._lView,null,u)}markForCheck(){dp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){pp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(c,u,_){er(!0);try{pp(c,u,_)}finally{er(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var u;this._appRef=null,go(this._lView[1],u=this._lView,u[11],2,null,null)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=u}}class dC extends xp{constructor(u){super(u),this._view=u}detectChanges(){Jp(this._view)}checkNoChanges(){!function(c){er(!0);try{Jp(c)}finally{er(!1)}}(this._view)}get context(){return null}}class Av extends Dp{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const _=Oi(u);return new im(_,this.ngModule)}}function Iv(c){const u=[];for(let _ in c)c.hasOwnProperty(_)&&u.push({propName:c[_],templateName:_});return u}const pC=new Uo("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>md});class im extends Dv{constructor(u,_){super(),this.componentDef=u,this.ngModule=_,this.componentType=u.type,this.selector=u.selectors.map(Xd).join(","),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!_}get inputs(){return Iv(this.componentDef.inputs)}get outputs(){return Iv(this.componentDef.outputs)}create(u,_,w,R){const P=(R=R||this.ngModule)?function(c,u){return{get:(_,w,R)=>{const P=c.get(_,tm,R);return P!==tm||w===tm?P:u.get(_,w,R)}}}(u,R.injector):u,X=P.get(xv,kn),re=P.get(cC,null),ve=X.createRenderer(null,this.componentDef),Xe=this.componentDef.selectors[0][0]||"div",ct=w?function(c,u,_){if(Nr(c))return c.selectRootElement(u,_===wi.ShadowDom);let w="string"==typeof u?c.querySelector(u):u;return w.textContent="",w}(ve,w,this.componentDef.encapsulation):br(X.createRenderer(null,this.componentDef),Xe,function(c){const u=c.toLowerCase();return"svg"===u?ca:"math"===u?"http://www.w3.org/1998/MathML/":null}(Xe)),Nt=this.componentDef.onPush?576:528,oi=function(c,u){return{components:[],scheduler:c||md,clean:Zp,playerHandler:u||null,flags:0}}(),Ei=U(0,null,null,1,0,null,null,null,null,null),$i=Nd(null,Ei,oi,Nt,null,null,X,ve,re,P);let bn,Ln;xa($i);try{const qn=function(c,u,_,w,R,P){const X=_[1];_[20]=c;const ve=Fd(X,20,2,"#host",null),Xe=ve.mergedAttrs=u.hostAttrs;null!==Xe&&(Vh(ve,Xe,!0),null!==c&&(qa(R,c,Xe),null!==ve.classes&&Br(R,c,ve.classes),null!==ve.styles&&st(R,c,ve.styles)));const ct=w.createRenderer(c,u),Nt=Nd(_,k(u),null,u.onPush?64:16,_[20],ve,w,ct,P||null,null);return X.firstCreatePass&&(Ut(Q(ve,_),X,u.type),Xp(X,ve),Ud(ve,_.length,1)),Bh(_,Nt),_[20]=Nt}(ct,this.componentDef,$i,X,ve);if(ct)if(w)qa(ve,ct,["ng-version",uC.full]);else{const{attrs:on,classes:Er}=function(c){const u=[],_=[];let w=1,R=2;for(;w<c.length;){let P=c[w];if("string"==typeof P)2===R?""!==P&&u.push(P,c[++w]):8===R&&_.push(P);else{if(!Rl(R))break;R=P}w++}return{attrs:u,classes:_}}(this.componentDef.selectors[0]);on&&qa(ve,ct,on),Er&&Er.length>0&&Br(ve,ct,Er.join(" "))}if(Ln=bi(Ei,20),void 0!==_){const on=Ln.projection=[];for(let Er=0;Er<this.ngContentSelectors.length;Er++){const xo=_[Er];on.push(null!=xo?Array.from(xo):null)}}bn=function(c,u,_,w,R){const P=_[1],X=function(c,u,_){const w=fe();c.firstCreatePass&&(_.providersResolver&&_.providersResolver(_),Kp(c,w,u,Bd(c,u,1,null),_));const R=Xs(u,c,w.directiveStart,w);aa(R,u);const P=Me(w,u);return P&&aa(P,u),R}(P,_,u);if(w.components.push(X),c[8]=X,R&&R.forEach(ve=>ve(X,u)),u.contentQueries){const ve=fe();u.contentQueries(1,X,ve.directiveStart)}const re=fe();return!P.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(is(re.index),Fh(_[1],re,0,re.directiveStart,re.directiveEnd,u),zp(u,X)),X}(qn,this.componentDef,$i,oi,[Cg]),eh(Ei,$i,null)}finally{On()}return new mC(this.componentType,bn,Kh(Ln,$i),$i,Ln)}}class mC extends class{}{constructor(u,_,w,R,P){super(),this.location=w,this._rootLView=R,this._tNode=P,this.instance=_,this.hostView=this.changeDetectorRef=new dC(R),this.componentType=u}get injector(){return new Ks(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}class $h{}class Ov{}const Jh=new Map;class Pv extends $h{constructor(u,_){super(),this._parent=_,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Av(this);const w=ur(u);this._bootstrapComponents=x(w.bootstrap),this._r3Injector=af(u,_,[{provide:$h,useValue:this},{provide:Dp,useValue:this.componentFactoryResolver}],C(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,_=eu.THROW_IF_NOT_FOUND,w=tt.Default){return u===eu||u===$h||u===gp?this:this._r3Injector.get(u,_,w)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(_=>_()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class nm extends Ov{constructor(u){super(),this.moduleType=u,null!==ur(u)&&function(c){const u=new Set;!function _(w){const R=ur(w,!0),P=R.id;null!==P&&(function(c,u,_){if(u&&u!==_)throw new Error(`Duplicate module registered for ${c} - ${C(u)} vs ${C(u.name)}`)}(P,Jh.get(P),w),Jh.set(P,w));const X=x(R.imports);for(const re of X)u.has(re)||(u.add(re),_(re))}(c)}(u)}create(u){return new Pv(this.moduleType,u)}}function Nv(c,u,_){const w=tr()+c,R=Ue();return R[w]===Mr?xt(R,w,_?u.call(_):u()):function(c,u){return c[u]}(R,w)}function Fv(c,u,_,w){return Hv(Ue(),tr(),c,u,_,w)}function Bv(c,u,_,w,R){return function(c,u,_,w,R,P,X){const re=u+_;return Ti(c,re,R,P)?xt(c,re+2,X?w.call(X,R,P):w(R,P)):Rp(c,re+2)}(Ue(),tr(),c,u,_,w,R)}function Rp(c,u){const _=c[u];return _===Mr?void 0:_}function Hv(c,u,_,w,R,P){const X=u+_;return Wt(c,X,R)?xt(c,X+1,P?w.call(P,R):w(R)):Rp(c,X+1)}function jv(c,u){const _=G();let w;const R=c+20;_.firstCreatePass?(w=function(c,u){if(u)for(let _=u.length-1;_>=0;_--){const w=u[_];if(c===w.name)return w}}(u,_.pipeRegistry),_.data[R]=w,w.onDestroy&&(_.destroyHooks||(_.destroyHooks=[])).push(R,w.onDestroy)):w=_.data[R];const P=w.factory||(w.factory=Vs(w.type)),X=mt(yp);try{const re=ql(!1),ve=P();return ql(re),function(c,u,_,w){_>=c.data.length&&(c.data[_]=null,c.blueprint[_]=null),u[_]=w}(_,Ue(),R,ve),ve}finally{mt(X)}}function zv(c,u,_){const w=c+20,R=Ue(),P=cn(R,w);return function(c,u){return c[1].data[u].pure}(R,w)?Hv(R,tr(),u,P.transform,_,P):P.transform(_)}function rm(c){return u=>{setTimeout(c,void 0,u)}}const Ed=class extends E.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,_,w){var R,P,X;let re=u,ve=_||(()=>null),Xe=w;if(u&&"object"==typeof u){const Nt=u;re=null===(R=Nt.next)||void 0===R?void 0:R.bind(Nt),ve=null===(P=Nt.error)||void 0===P?void 0:P.bind(Nt),Xe=null===(X=Nt.complete)||void 0===X?void 0:X.bind(Nt)}this.__isAsync&&(ve=rm(ve),re&&(re=rm(re)),Xe&&(Xe=rm(Xe)));const ct=super.subscribe({next:re,error:ve,complete:Xe});return u instanceof m.w0&&u.add(ct),ct}};function OC(){return this._results[N()]()}class Af{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const _=N(),w=Af.prototype;w[_]||(w[_]=OC)}get changes(){return this._changes||(this._changes=new Ed)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,_){return this._results.reduce(u,_)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,_){const w=this;w.dirty=!1;const R=ha(u);(this._changesDetected=!function(c,u,_){if(c.length!==u.length)return!1;for(let w=0;w<c.length;w++){let R=c[w],P=u[w];if(_&&(R=_(R),P=_(P)),P!==R)return!1}return!0}(w._results,R,_))&&(w._results=R,w.length=R.length,w.last=R[this.length-1],w.first=R[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ip=(()=>{class c{}return c.__NG_ELEMENT_ID__=PC,c})();const kC=Ip,LC=class extends kC{constructor(u,_,w){super(),this._declarationLView=u,this._declarationTContainer=_,this.elementRef=w}createEmbeddedView(u){const _=this._declarationTContainer.tViews,w=Nd(this._declarationLView,_,u,16,null,_.declTNode,null,null,null,null);w[17]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[19];return null!==P&&(w[19]=P.createEmbeddedView(_)),eh(_,w,u),new xp(w)}};function PC(){return If(fe(),Ue())}function If(c,u){return 4&c.type?new LC(u,c,Kh(c,u)):null}let Of=(()=>{class c{}return c.__NG_ELEMENT_ID__=NC,c})();function NC(){return Kv(fe(),Ue())}const FC=Of,Yv=class extends FC{constructor(u,_,w){super(),this._lContainer=u,this._hostTNode=_,this._hostLView=w}get element(){return Kh(this._hostTNode,this._hostLView)}get injector(){return new Ks(this._hostTNode,this._hostLView)}get parentInjector(){const u=gt(this._hostTNode,this._hostLView);if(Ys(u)){const _=Oa(u,this._hostLView),w=Ia(u);return new Ks(_[1].data[w+8],_)}return new Ks(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const _=Xv(this._lContainer);return null!==_&&_[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,_,w){const R=u.createEmbeddedView(_||{});return this.insert(R,w),R}createComponent(u,_,w,R,P){const X=u&&!("function"==typeof u);let re;if(X)re=_;else{const Nt=_||{};re=Nt.index,w=Nt.injector,R=Nt.projectableNodes,P=Nt.ngModuleRef}const ve=X?u:new im(Oi(u)),Xe=w||this.parentInjector;if(!P&&null==ve.ngModule&&Xe){const Nt=Xe.get($h,null);Nt&&(P=Nt)}const ct=ve.create(Xe,R,void 0,P);return this.insert(ct.hostView,re),ct}insert(u,_){const w=u._lView,R=w[1];if(_o(w[3])){const ct=this.indexOf(u);if(-1!==ct)this.detach(ct);else{const Nt=w[3],oi=new Yv(Nt,Nt[6],Nt[3]);oi.detach(oi.indexOf(u))}}const P=this._adjustIndex(_),X=this._lContainer;!function(c,u,_,w){const R=10+w,P=_.length;w>0&&(_[R-1][4]=u),w<P-10?(u[4]=_[R],ka(_,10+w,u)):(_.push(u),u[4]=null),u[3]=_;const X=u[17];null!==X&&_!==X&&function(c,u){const _=c[9];u[16]!==u[3][3][16]&&(c[2]=!0),null===_?c[9]=[u]:_.push(u)}(X,u);const re=u[19];null!==re&&re.insertView(c),u[2]|=128}(R,w,X,P);const re=Or(P,X),ve=w[11],Xe=Mt(ve,X[7]);return null!==Xe&&function(c,u,_,w,R,P){w[0]=R,w[6]=u,go(c,w,_,1,R,P)}(R,X[6],ve,w,Xe,re),u.attachToViewContainerRef(),ka(om(X),P,u),u}move(u,_){return this.insert(u,_)}indexOf(u){const _=Xv(this._lContainer);return null!==_?_.indexOf(u):-1}remove(u){const _=this._adjustIndex(u,-1),w=ks(this._lContainer,_);w&&(Wa(om(this._lContainer),_),ls(w[1],w))}detach(u){const _=this._adjustIndex(u,-1),w=ks(this._lContainer,_);return w&&null!=Wa(om(this._lContainer),_)?new xp(w):null}_adjustIndex(u,_=0){return null==u?this.length+_:u}};function Xv(c){return c[8]}function om(c){return c[8]||(c[8]=[])}function Kv(c,u){let _;const w=u[c.index];if(_o(w))_=w;else{let R;if(8&c.type)R=Re(w);else{const P=u[11];R=P.createComment("");const X=Me(c,u);Ye(P,Mt(P,X),R,function(c,u){return Nr(c)?c.nextSibling(u):u.nextSibling}(P,X),!1)}u[c.index]=_=$p(w,u,R,c),Bh(u,_)}return new Yv(_,c,u)}class sm{constructor(u){this.queryList=u,this.matches=null}clone(){return new sm(this.queryList)}setDirty(){this.queryList.setDirty()}}class am{constructor(u=[]){this.queries=u}createEmbeddedView(u){const _=u.queries;if(null!==_){const w=null!==u.contentQueries?u.contentQueries[0]:_.length,R=[];for(let P=0;P<w;P++){const X=_.getByIndex(P);R.push(this.queries[X.indexInDeclarationView].clone())}return new am(R)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let _=0;_<this.queries.length;_++)null!==nb(u,_).matches&&this.queries[_].setDirty()}}class $v{constructor(u,_,w=null){this.predicate=u,this.flags=_,this.read=w}}class lm{constructor(u=[]){this.queries=u}elementStart(u,_){for(let w=0;w<this.queries.length;w++)this.queries[w].elementStart(u,_)}elementEnd(u){for(let _=0;_<this.queries.length;_++)this.queries[_].elementEnd(u)}embeddedTView(u){let _=null;for(let w=0;w<this.length;w++){const R=null!==_?_.length:0,P=this.getByIndex(w).embeddedTView(u,R);P&&(P.indexInDeclarationView=w,null!==_?_.push(P):_=[P])}return null!==_?new lm(_):null}template(u,_){for(let w=0;w<this.queries.length;w++)this.queries[w].template(u,_)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class cm{constructor(u,_=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=_}elementStart(u,_){this.isApplyingToNode(_)&&this.matchTNode(u,_)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,_){this.elementStart(u,_)}embeddedTView(u,_){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,_),new cm(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const _=this._declarationNodeIndex;let w=u.parent;for(;null!==w&&8&w.type&&w.index!==_;)w=w.parent;return _===(null!==w?w.index:-1)}return this._appliesToNextNode}matchTNode(u,_){const w=this.metadata.predicate;if(Array.isArray(w))for(let R=0;R<w.length;R++){const P=w[R];this.matchTNodeWithReadOption(u,_,VC(_,P)),this.matchTNodeWithReadOption(u,_,Tl(_,u,P,!1,!1))}else w===Ip?4&_.type&&this.matchTNodeWithReadOption(u,_,-1):this.matchTNodeWithReadOption(u,_,Tl(_,u,w,!1,!1))}matchTNodeWithReadOption(u,_,w){if(null!==w){const R=this.metadata.read;if(null!==R)if(R===Mp||R===Of||R===Ip&&4&_.type)this.addMatch(_.index,-2);else{const P=Tl(_,u,R,!1,!1);null!==P&&this.addMatch(_.index,P)}else this.addMatch(_.index,w)}}addMatch(u,_){null===this.matches?this.matches=[u,_]:this.matches.push(u,_)}}function VC(c,u){const _=c.localNames;if(null!==_)for(let w=0;w<_.length;w+=2)if(_[w]===u)return _[w+1];return null}function GC(c,u,_,w){return-1===_?function(c,u){return 11&c.type?Kh(c,u):4&c.type?If(c,u):null}(u,c):-2===_?function(c,u,_){return _===Mp?Kh(u,c):_===Ip?If(u,c):_===Of?Kv(u,c):void 0}(c,u,w):Xs(c,c[1],_,u)}function Jv(c,u,_,w){const R=u[19].queries[w];if(null===R.matches){const P=c.data,X=_.matches,re=[];for(let ve=0;ve<X.length;ve+=2){const Xe=X[ve];re.push(Xe<0?null:GC(u,P[Xe],X[ve+1],_.metadata.read))}R.matches=re}return R.matches}function um(c,u,_,w){const R=c.queries.getByIndex(_),P=R.matches;if(null!==P){const X=Jv(c,u,R,_);for(let re=0;re<P.length;re+=2){const ve=P[re];if(ve>0)w.push(X[re/2]);else{const Xe=P[re+1],ct=u[-ve];for(let Nt=10;Nt<ct.length;Nt++){const oi=ct[Nt];oi[17]===oi[3]&&um(oi[1],oi,Xe,w)}if(null!==ct[9]){const Nt=ct[9];for(let oi=0;oi<Nt.length;oi++){const Ei=Nt[oi];um(Ei[1],Ei,Xe,w)}}}}}return w}function Zv(c){const u=Ue(),_=G(),w=xs();os(w+1);const R=nb(_,w);if(c.dirty&&wr(u)===(2==(2&R.metadata.flags))){if(null===R.matches)c.reset([]);else{const P=R.crossesNgTemplate?um(_,u,w,[]):Jv(_,u,R,w);c.reset(P,oC),c.notifyOnChanges()}return!0}return!1}function Qv(c,u,_){const w=G();w.firstCreatePass&&(ib(w,new $v(c,u,_),-1),2==(2&u)&&(w.staticViewQueries=!0)),tb(w,Ue(),u)}function qv(c,u,_,w){const R=G();if(R.firstCreatePass){const P=fe();ib(R,new $v(u,_,w),P.index),function(c,u){const _=c.contentQueries||(c.contentQueries=[]);u!==(_.length?_[_.length-1]:-1)&&_.push(c.queries.length-1,u)}(R,c),2==(2&_)&&(R.staticContentQueries=!0)}tb(R,Ue(),_)}function eb(){return c=Ue(),u=xs(),c[19].queries[u].queryList;var c,u}function tb(c,u,_){const w=new Af(4==(4&_));Kt(c,u,w,w.destroy),null===u[19]&&(u[19]=new am),u[19].queries.push(new sm(w))}function ib(c,u,_){null===c.queries&&(c.queries=new lm),c.queries.track(new cm(u,_))}function nb(c,u){return c.queries.getByIndex(u)}function rb(c,u){return If(c,u)}function Pf(...c){}const mm=new Uo("Application Initializer");let Qh=(()=>{class c{constructor(_){this.appInits=_,this.resolve=Pf,this.reject=Pf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((w,R)=>{this.resolve=w,this.reject=R})}runInitializers(){if(this.initialized)return;const _=[],w=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let R=0;R<this.appInits.length;R++){const P=this.appInits[R]();if(Lg(P))_.push(P);else if(l_(P)){const X=new Promise((re,ve)=>{P.subscribe({complete:re,error:ve})});_.push(X)}}Promise.all(_).then(()=>{w()}).catch(R=>{this.reject(R)}),0===_.length&&w(),this.initialized=!0}}return c.\u0275fac=function(_){return new(_||c)(Jo(mm,8))},c.\u0275prov=Ct({token:c,factory:c.\u0275fac}),c})();const Eb=new Uo("AppId"),u0={provide:Eb,useFactory:function(){return`${_m()}${_m()}${_m()}`},deps:[]};function _m(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cb=new Uo("Platform Initializer"),Tb=new Uo("Platform ID"),wb=new Uo("appBootstrapListener");let Sb=(()=>{class c{log(_){console.log(_)}warn(_){console.warn(_)}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275prov=Ct({token:c,factory:c.\u0275fac}),c})();const Nf=new Uo("LocaleId"),Db=new Uo("DefaultCurrencyCode");class d0{constructor(u,_){this.ngModuleFactory=u,this.componentFactories=_}}let vm=(()=>{class c{compileModuleSync(_){return new nm(_)}compileModuleAsync(_){return Promise.resolve(this.compileModuleSync(_))}compileModuleAndAllComponentsSync(_){const w=this.compileModuleSync(_),P=x(ur(_).declarations).reduce((X,re)=>{const ve=Oi(re);return ve&&X.push(new im(ve)),X},[]);return new d0(w,P)}compileModuleAndAllComponentsAsync(_){return Promise.resolve(this.compileModuleAndAllComponentsSync(_))}clearCache(){}clearCacheFor(_){}getModuleId(_){}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275prov=Ct({token:c,factory:c.\u0275fac}),c})();const p0=(()=>Promise.resolve(0))();function bm(c){"undefined"==typeof Zone?p0.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class yu{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:_=!1,shouldCoalesceRunChangeDetection:w=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ed(!1),this.onMicrotaskEmpty=new Ed(!1),this.onStable=new Ed(!1),this.onError=new Ed(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const R=this;R._nesting=0,R._outer=R._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(R._inner=R._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(R._inner=R._inner.fork(Zone.longStackTraceZoneSpec)),R.shouldCoalesceEventChangeDetection=!w&&_,R.shouldCoalesceRunChangeDetection=w,R.lastRequestAnimationFrameId=-1,R.nativeRequestAnimationFrame=function(){let c=wt.requestAnimationFrame,u=wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&c&&u){const _=c[Zone.__symbol__("OriginalDelegate")];_&&(c=_);const w=u[Zone.__symbol__("OriginalDelegate")];w&&(u=w)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function(c){const u=()=>{!function(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(wt,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,Em(c),c.isCheckStableRunning=!0,ym(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),Em(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(_,w,R,P,X,re)=>{try{return Mb(c),_.invokeTask(R,P,X,re)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===P.type||c.shouldCoalesceRunChangeDetection)&&u(),xb(c)}},onInvoke:(_,w,R,P,X,re,ve)=>{try{return Mb(c),_.invoke(R,P,X,re,ve)}finally{c.shouldCoalesceRunChangeDetection&&u(),xb(c)}},onHasTask:(_,w,R,P)=>{_.hasTask(R,P),w===R&&("microTask"==P.change?(c._hasPendingMicrotasks=P.microTask,Em(c),ym(c)):"macroTask"==P.change&&(c.hasPendingMacrotasks=P.macroTask))},onHandleError:(_,w,R,P)=>(_.handleError(R,P),c.runOutsideAngular(()=>c.onError.emit(P)),!1)})}(R)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(yu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,_,w){return this._inner.run(u,_,w)}runTask(u,_,w,R){const P=this._inner,X=P.scheduleEventTask("NgZoneEvent: "+R,u,g0,Pf,Pf);try{return P.runTask(X,_,w)}finally{P.cancelTask(X)}}runGuarded(u,_,w){return this._inner.runGuarded(u,_,w)}runOutsideAngular(u){return this._outer.run(u)}}const g0={};function ym(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function Em(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function Mb(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function xb(c){c._nesting--,ym(c)}class v0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ed,this.onMicrotaskEmpty=new Ed,this.onStable=new Ed,this.onError=new Ed}run(u,_,w){return u.apply(_,w)}runGuarded(u,_,w){return u.apply(_,w)}runOutsideAngular(u){return u()}runTask(u,_,w,R){return u.apply(_,w)}}let Rb=(()=>{class c{constructor(_){this._ngZone=_,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),_.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yu.assertNotInAngularZone(),bm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bm(()=>{for(;0!==this._callbacks.length;){let _=this._callbacks.pop();clearTimeout(_.timeoutId),_.doneCb(this._didWork)}this._didWork=!1});else{let _=this.getPendingTasks();this._callbacks=this._callbacks.filter(w=>!w.updateCb||!w.updateCb(_)||(clearTimeout(w.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(_=>({source:_.source,creationLocation:_.creationLocation,data:_.data})):[]}addCallback(_,w,R){let P=-1;w&&w>0&&(P=setTimeout(()=>{this._callbacks=this._callbacks.filter(X=>X.timeoutId!==P),_(this._didWork,this.getPendingTasks())},w)),this._callbacks.push({doneCb:_,timeoutId:P,updateCb:R})}whenStable(_,w,R){if(R&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(_,w,R),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(_,w,R){return[]}}return c.\u0275fac=function(_){return new(_||c)(Jo(yu))},c.\u0275prov=Ct({token:c,factory:c.\u0275fac}),c})(),Ab=(()=>{class c{constructor(){this._applications=new Map,Cm.addToWindow(this)}registerApplication(_,w){this._applications.set(_,w)}unregisterApplication(_){this._applications.delete(_)}unregisterAllApplications(){this._applications.clear()}getTestability(_){return this._applications.get(_)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(_,w=!0){return Cm.findTestabilityInTree(this,_,w)}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275prov=Ct({token:c,factory:c.\u0275fac}),c})();class b0{addToWindow(u){}findTestabilityInTree(u,_,w){return null}}function y0(c){Cm=c}let od,Cm=new b0;const Ib=new Uo("AllowMultipleToken");class w0{constructor(u,_){this.name=u,this.token=_}}function Ob(c,u,_=[]){const w=`Platform: ${u}`,R=new Uo(w);return(P=[])=>{let X=kb();if(!X||X.injector.get(Ib,!1))if(c)c(_.concat(P).concat({provide:R,useValue:!0}));else{const re=_.concat(P).concat({provide:R,useValue:!0},{provide:rf,useValue:"platform"});!function(c){if(od&&!od.destroyed&&!od.injector.get(Ib,!1))throw new Ie("400","");od=c.get(Lb);const u=c.get(Cb,null);u&&u.forEach(_=>_())}(eu.create({providers:re,name:w}))}return function(c){const u=kb();if(!u)throw new Ie("401","");return u}()}}function kb(){return od&&!od.destroyed?od:null}let Lb=(()=>{class c{constructor(_){this._injector=_,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(_,w){const re=function(c,u){let _;return _="noop"===c?new v0:("zone.js"===c?void 0:c)||new yu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),_}(w?w.ngZone:void 0,{ngZoneEventCoalescing:w&&w.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:w&&w.ngZoneRunCoalescing||!1}),ve=[{provide:yu,useValue:re}];return re.run(()=>{const Xe=eu.create({providers:ve,parent:this.injector,name:_.moduleType.name}),ct=_.create(Xe),Nt=ct.injector.get(Zl,null);if(!Nt)throw new Ie("402","");return re.runOutsideAngular(()=>{const oi=re.onError.subscribe({next:Ei=>{Nt.handleError(Ei)}});ct.onDestroy(()=>{Tm(this._modules,ct),oi.unsubscribe()})}),function(c,u,_){try{const w=_();return Lg(w)?w.catch(R=>{throw u.runOutsideAngular(()=>c.handleError(R)),R}):w}catch(w){throw u.runOutsideAngular(()=>c.handleError(w)),w}}(Nt,re,()=>{const oi=ct.injector.get(Qh);return oi.runInitializers(),oi.donePromise.then(()=>(function(c){Bt(c,"Expected localeId to be defined"),"string"==typeof c&&(ev=c.toLowerCase().replace(/_/g,"-"))}(ct.injector.get(Nf,wf)||wf),this._moduleDoBootstrap(ct),ct))})})}bootstrapModule(_,w=[]){const R=Pb({},w);return function(c,u,_){const w=new nm(_);return Promise.resolve(w)}(0,0,_).then(P=>this.bootstrapModuleFactory(P,R))}_moduleDoBootstrap(_){const w=_.injector.get(kp);if(_._bootstrapComponents.length>0)_._bootstrapComponents.forEach(R=>w.bootstrap(R));else{if(!_.instance.ngDoBootstrap)throw new Ie("403","");_.instance.ngDoBootstrap(w)}this._modules.push(_)}onDestroy(_){this._destroyListeners.push(_)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie("404","");this._modules.slice().forEach(_=>_.destroy()),this._destroyListeners.forEach(_=>_()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(_){return new(_||c)(Jo(eu))},c.\u0275prov=Ct({token:c,factory:c.\u0275fac}),c})();function Pb(c,u){return Array.isArray(u)?u.reduce(Pb,c):Object.assign(Object.assign({},c),u)}let kp=(()=>{class c{constructor(_,w,R,P,X){this._zone=_,this._injector=w,this._exceptionHandler=R,this._componentFactoryResolver=P,this._initStatus=X,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const re=new t.y(Xe=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Xe.next(this._stable),Xe.complete()})}),ve=new t.y(Xe=>{let ct;this._zone.runOutsideAngular(()=>{ct=this._zone.onStable.subscribe(()=>{yu.assertNotInAngularZone(),bm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Xe.next(!0))})})});const Nt=this._zone.onUnstable.subscribe(()=>{yu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Xe.next(!1)}))});return()=>{ct.unsubscribe(),Nt.unsubscribe()}});this.isStable=(0,e.T)(re,ve.pipe((0,n.B)()))}bootstrap(_,w){if(!this._initStatus.done)throw new Ie("405","");let R;R=_ instanceof Dv?_:this._componentFactoryResolver.resolveComponentFactory(_),this.componentTypes.push(R.componentType);const P=function(c){return c.isBoundToModule}(R)?void 0:this._injector.get($h),re=R.create(eu.NULL,[],w||R.selector,P),ve=re.location.nativeElement,Xe=re.injector.get(Rb,null),ct=Xe&&re.injector.get(Ab);return Xe&&ct&&ct.registerApplication(ve,Xe),re.onDestroy(()=>{this.detachView(re.hostView),Tm(this.components,re),ct&&ct.unregisterApplication(ve)}),this._loadComponent(re),re}tick(){if(this._runningTick)throw new Ie("101","");try{this._runningTick=!0;for(let _ of this._views)_.detectChanges()}catch(_){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(_))}finally{this._runningTick=!1}}attachView(_){const w=_;this._views.push(w),w.attachToAppRef(this)}detachView(_){const w=_;Tm(this._views,w),w.detachFromAppRef()}_loadComponent(_){this.attachView(_.hostView),this.tick(),this.components.push(_),this._injector.get(wb,[]).concat(this._bootstrapListeners).forEach(R=>R(_))}ngOnDestroy(){this._views.slice().forEach(_=>_.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return c.\u0275fac=function(_){return new(_||c)(Jo(yu),Jo(eu),Jo(Zl),Jo(Dp),Jo(Qh))},c.\u0275prov=Ct({token:c,factory:c.\u0275fac}),c})();function Tm(c,u){const _=c.indexOf(u);_>-1&&c.splice(_,1)}let Fb=!0;function A0(){Fb=!1}let I0=(()=>{class c{}return c.__NG_ELEMENT_ID__=O0,c})();function O0(c){return function(c,u,_){if(dr(c)&&!_){const w=Xn(c.index,u);return new xp(w,w)}return 47&c.type?new xp(u[16],u):null}(fe(),Ue(),16==(16&c))}class jb{constructor(){}supports(u){return de(u)}create(u){return new H0(u)}}const B0=(c,u)=>u;class H0{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||B0}forEachItem(u){let _;for(_=this._itHead;null!==_;_=_._next)u(_)}forEachOperation(u){let _=this._itHead,w=this._removalsHead,R=0,P=null;for(;_||w;){const X=!w||_&&_.currentIndex<Yb(w,R,P)?_:w,re=Yb(X,R,P),ve=X.currentIndex;if(X===w)R--,w=w._nextRemoved;else if(_=_._next,null==X.previousIndex)R++;else{P||(P=[]);const Xe=re-R,ct=ve-R;if(Xe!=ct){for(let oi=0;oi<Xe;oi++){const Ei=oi<P.length?P[oi]:P[oi]=0,$i=Ei+oi;ct<=$i&&$i<Xe&&(P[oi]=Ei+1)}P[X.previousIndex]=ct-Xe}}re!==ve&&u(X,re,ve)}}forEachPreviousItem(u){let _;for(_=this._previousItHead;null!==_;_=_._nextPrevious)u(_)}forEachAddedItem(u){let _;for(_=this._additionsHead;null!==_;_=_._nextAdded)u(_)}forEachMovedItem(u){let _;for(_=this._movesHead;null!==_;_=_._nextMoved)u(_)}forEachRemovedItem(u){let _;for(_=this._removalsHead;null!==_;_=_._nextRemoved)u(_)}forEachIdentityChange(u){let _;for(_=this._identityChangesHead;null!==_;_=_._nextIdentityChange)u(_)}diff(u){if(null==u&&(u=[]),!de(u))throw new Error(`Error trying to diff '${C(u)}'. Only arrays and iterables are allowed`);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let R,P,X,_=this._itHead,w=!1;if(Array.isArray(u)){this.length=u.length;for(let re=0;re<this.length;re++)P=u[re],X=this._trackByFn(re,P),null!==_&&Object.is(_.trackById,X)?(w&&(_=this._verifyReinsertion(_,P,X,re)),Object.is(_.item,P)||this._addIdentityChange(_,P)):(_=this._mismatch(_,P,X,re),w=!0),_=_._next}else R=0,function(c,u){if(Array.isArray(c))for(let _=0;_<c.length;_++)u(c[_]);else{const _=c[N()]();let w;for(;!(w=_.next()).done;)u(w.value)}}(u,re=>{X=this._trackByFn(R,re),null!==_&&Object.is(_.trackById,X)?(w&&(_=this._verifyReinsertion(_,re,X,R)),Object.is(_.item,re)||this._addIdentityChange(_,re)):(_=this._mismatch(_,re,X,R),w=!0),_=_._next,R++}),this.length=R;return this._truncate(_),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,_,w,R){let P;return null===u?P=this._itTail:(P=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null))?(Object.is(u.item,_)||this._addIdentityChange(u,_),this._reinsertAfter(u,P,R)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(w,R))?(Object.is(u.item,_)||this._addIdentityChange(u,_),this._moveAfter(u,P,R)):u=this._addAfter(new V0(_,w),P,R),u}_verifyReinsertion(u,_,w,R){let P=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null);return null!==P?u=this._reinsertAfter(P,u._prev,R):u.currentIndex!=R&&(u.currentIndex=R,this._addToMoves(u,R)),u}_truncate(u){for(;null!==u;){const _=u._next;this._addToRemovals(this._unlink(u)),u=_}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,_,w){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const R=u._prevRemoved,P=u._nextRemoved;return null===R?this._removalsHead=P:R._nextRemoved=P,null===P?this._removalsTail=R:P._prevRemoved=R,this._insertAfter(u,_,w),this._addToMoves(u,w),u}_moveAfter(u,_,w){return this._unlink(u),this._insertAfter(u,_,w),this._addToMoves(u,w),u}_addAfter(u,_,w){return this._insertAfter(u,_,w),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,_,w){const R=null===_?this._itHead:_._next;return u._next=R,u._prev=_,null===R?this._itTail=u:R._prev=u,null===_?this._itHead=u:_._next=u,null===this._linkedRecords&&(this._linkedRecords=new zb),this._linkedRecords.put(u),u.currentIndex=w,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const _=u._prev,w=u._next;return null===_?this._itHead=w:_._next=w,null===w?this._itTail=_:w._prev=_,u}_addToMoves(u,_){return u.previousIndex===_||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zb),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,_){return u.item=_,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class V0{constructor(u,_){this.item=u,this.trackById=_,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class U0{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,_){let w;for(w=this._head;null!==w;w=w._nextDup)if((null===_||_<=w.currentIndex)&&Object.is(w.trackById,u))return w;return null}remove(u){const _=u._prevDup,w=u._nextDup;return null===_?this._head=w:_._nextDup=w,null===w?this._tail=_:w._prevDup=_,null===this._head}}class zb{constructor(){this.map=new Map}put(u){const _=u.trackById;let w=this.map.get(_);w||(w=new U0,this.map.set(_,w)),w.add(u)}get(u,_){const R=this.map.get(u);return R?R.get(u,_):null}remove(u){const _=u.trackById;return this.map.get(_).remove(u)&&this.map.delete(_),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yb(c,u,_){const w=c.previousIndex;if(null===w)return w;let R=0;return _&&w<_.length&&(R=_[w]),w+u+R}class Xb{constructor(){}supports(u){return u instanceof Map||Et(u)}create(){return new G0}}class G0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let _;for(_=this._mapHead;null!==_;_=_._next)u(_)}forEachPreviousItem(u){let _;for(_=this._previousMapHead;null!==_;_=_._nextPrevious)u(_)}forEachChangedItem(u){let _;for(_=this._changesHead;null!==_;_=_._nextChanged)u(_)}forEachAddedItem(u){let _;for(_=this._additionsHead;null!==_;_=_._nextAdded)u(_)}forEachRemovedItem(u){let _;for(_=this._removalsHead;null!==_;_=_._nextRemoved)u(_)}diff(u){if(u){if(!(u instanceof Map||Et(u)))throw new Error(`Error trying to diff '${C(u)}'. Only maps and objects are allowed`)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let _=this._mapHead;if(this._appendAfter=null,this._forEach(u,(w,R)=>{if(_&&_.key===R)this._maybeAddToChanges(_,w),this._appendAfter=_,_=_._next;else{const P=this._getOrCreateRecordForKey(R,w);_=this._insertBeforeOrAppend(_,P)}}),_){_._prev&&(_._prev._next=null),this._removalsHead=_;for(let w=_;null!==w;w=w._nextRemoved)w===this._mapHead&&(this._mapHead=null),this._records.delete(w.key),w._nextRemoved=w._next,w.previousValue=w.currentValue,w.currentValue=null,w._prev=null,w._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,_){if(u){const w=u._prev;return _._next=u,_._prev=w,u._prev=_,w&&(w._next=_),u===this._mapHead&&(this._mapHead=_),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=_,_._prev=this._appendAfter):this._mapHead=_,this._appendAfter=_,null}_getOrCreateRecordForKey(u,_){if(this._records.has(u)){const R=this._records.get(u);this._maybeAddToChanges(R,_);const P=R._prev,X=R._next;return P&&(P._next=X),X&&(X._prev=P),R._next=null,R._prev=null,R}const w=new W0(u);return this._records.set(u,w),w.currentValue=_,this._addToAdditions(w),w}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,_){Object.is(_,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=_,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,_){u instanceof Map?u.forEach(_):Object.keys(u).forEach(w=>_(u[w],w))}}class W0{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kb(){return new Bf([new jb])}let Bf=(()=>{class c{constructor(_){this.factories=_}static create(_,w){if(null!=w){const R=w.factories.slice();_=_.concat(R)}return new c(_)}static extend(_){return{provide:c,useFactory:w=>c.create(_,w||Kb()),deps:[[c,new pa,new Xl]]}}find(_){const w=this.factories.find(R=>R.supports(_));if(null!=w)return w;throw new Error(`Cannot find a differ supporting object '${_}' of type '${function(c){return c.name||typeof c}(_)}'`)}}return c.\u0275prov=Ct({token:c,providedIn:"root",factory:Kb}),c})();function $b(){return new Hf([new Xb])}let Hf=(()=>{class c{constructor(_){this.factories=_}static create(_,w){if(w){const R=w.factories.slice();_=_.concat(R)}return new c(_)}static extend(_){return{provide:c,useFactory:w=>c.create(_,w||$b()),deps:[[c,new pa,new Xl]]}}find(_){const w=this.factories.find(R=>R.supports(_));if(w)return w;throw new Error(`Cannot find a differ supporting object '${_}'`)}}return c.\u0275prov=Ct({token:c,providedIn:"root",factory:$b}),c})();const z0=[new Xb],X0=new Bf([new jb]),K0=new Hf(z0),$0=Ob(null,"core",[{provide:Tb,useValue:"unknown"},{provide:Lb,deps:[eu]},{provide:Ab,deps:[]},{provide:Sb,deps:[]}]),eT=[{provide:kp,useClass:kp,deps:[yu,eu,Zl,Dp,Qh]},{provide:pC,deps:[yu],useFactory:function(c){let u=[];return c.onStable.subscribe(()=>{for(;u.length;)u.pop()()}),function(_){u.push(_)}}},{provide:Qh,useClass:Qh,deps:[[new Xl,mm]]},{provide:vm,useClass:vm,deps:[]},u0,{provide:Bf,useFactory:function(){return X0},deps:[]},{provide:Hf,useFactory:function(){return K0},deps:[]},{provide:Nf,useFactory:function(c){return c||"undefined"!=typeof $localize&&$localize.locale||wf},deps:[[new Hl(Nf),new Xl,new pa]]},{provide:Db,useValue:"USD"}];let iT=(()=>{class c{constructor(_){}}return c.\u0275fac=function(_){return new(_||c)(Jo(kp))},c.\u0275mod=nr({type:c}),c.\u0275inj=Be({providers:eT}),c})()},93075:(V,Z,g)=>{"use strict";g.d(Z,{Zs:()=>Oo,Fj:()=>se,NI:()=>Lr,oH:()=>Qs,sg:()=>Xo,u5:()=>yl,Cf:()=>_e,JU:()=>C,a5:()=>xe,JJ:()=>et,JL:()=>tt,F:()=>Gn,On:()=>ot,UX:()=>Nr,kI:()=>$e,_Y:()=>Ht});var E=g(5e3),m=g(69808),t=g(32076),e=g(4128),n=g(54004);let a=(()=>{class J{constructor(W,Me){this._renderer=W,this._elementRef=Me,this.onChange=Ft=>{},this.onTouched=()=>{}}setProperty(W,Me){this._renderer.setProperty(this._elementRef.nativeElement,W,Me)}registerOnTouched(W){this.onTouched=W}registerOnChange(W){this.onChange=W}setDisabledState(W){this.setProperty("disabled",W)}}return J.\u0275fac=function(W){return new(W||J)(E.Y36(E.Qsj),E.Y36(E.SBq))},J.\u0275dir=E.lG2({type:J}),J})(),d=(()=>{class J extends a{}return J.\u0275fac=function(){let H;return function(Me){return(H||(H=E.n5z(J)))(Me||J)}}(),J.\u0275dir=E.lG2({type:J,features:[E.qOj]}),J})();const C=new E.OlP("NgValueAccessor"),z={provide:C,useExisting:(0,E.Gpc)(()=>se),multi:!0},be=new E.OlP("CompositionEventMode");let se=(()=>{class J extends a{constructor(W,Me,Ft){super(W,Me),this._compositionMode=Ft,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const J=(0,m.q)()?(0,m.q)().getUserAgent():"";return/android (\d+)/.test(J.toLowerCase())}())}writeValue(W){this.setProperty("value",null==W?"":W)}_handleInput(W){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(W)}_compositionStart(){this._composing=!0}_compositionEnd(W){this._composing=!1,this._compositionMode&&this.onChange(W)}}return J.\u0275fac=function(W){return new(W||J)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(be,8))},J.\u0275dir=E.lG2({type:J,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(W,Me){1&W&&E.NdJ("input",function(bi){return Me._handleInput(bi.target.value)})("blur",function(){return Me.onTouched()})("compositionstart",function(){return Me._compositionStart()})("compositionend",function(bi){return Me._compositionEnd(bi.target.value)})},features:[E._Bn([z]),E.qOj]}),J})();function Ie(J){return null==J||0===J.length}function Ge(J){return null!=J&&"number"==typeof J.length}const _e=new E.OlP("NgValidators"),Le=new E.OlP("NgAsyncValidators"),We=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $e{static min(H){return J=H,H=>{if(Ie(H.value)||Ie(J))return null;const W=parseFloat(H.value);return!isNaN(W)&&W<J?{min:{min:J,actual:H.value}}:null};var J}static max(H){return J=H,H=>{if(Ie(H.value)||Ie(J))return null;const W=parseFloat(H.value);return!isNaN(W)&&W>J?{max:{max:J,actual:H.value}}:null};var J}static required(H){return ne(H)}static requiredTrue(H){return ge(H)}static email(H){return Ie((J=H).value)||We.test(J.value)?null:{email:!0};var J}static minLength(H){return J=H,H=>Ie(H.value)||!Ge(H.value)?null:H.value.length<J?{minlength:{requiredLength:J,actualLength:H.value.length}}:null;var J}static maxLength(H){return J=H,H=>Ge(H.value)&&H.value.length>J?{maxlength:{requiredLength:J,actualLength:H.value.length}}:null;var J}static pattern(H){return function(J){if(!J)return ue;let H,W;return"string"==typeof J?(W="","^"!==J.charAt(0)&&(W+="^"),W+=J,"$"!==J.charAt(J.length-1)&&(W+="$"),H=new RegExp(W)):(W=J.toString(),H=J),Me=>{if(Ie(Me.value))return null;const Ft=Me.value;return H.test(Ft)?null:{pattern:{requiredPattern:W,actualValue:Ft}}}}(H)}static nullValidator(H){return null}static compose(H){return lt(H)}static composeAsync(H){return Pt(H)}}function ne(J){return Ie(J.value)?{required:!0}:null}function ge(J){return!0===J.value?null:{required:!0}}function ue(J){return null}function ie(J){return null!=J}function ht(J){const H=(0,E.QGY)(J)?(0,t.D)(J):J;return(0,E.CqO)(H),H}function Oe(J){let H={};return J.forEach(W=>{H=null!=W?Object.assign(Object.assign({},H),W):H}),0===Object.keys(H).length?null:H}function ke(J,H){return H.map(W=>W(J))}function vt(J){return J.map(H=>function(J){return!J.validate}(H)?H:W=>H.validate(W))}function lt(J){if(!J)return null;const H=J.filter(ie);return 0==H.length?null:function(W){return Oe(ke(W,H))}}function Bt(J){return null!=J?lt(vt(J)):null}function Pt(J){if(!J)return null;const H=J.filter(ie);return 0==H.length?null:function(W){const Me=ke(W,H).map(ht);return(0,e.D)(Me).pipe((0,n.U)(Oe))}}function Zt(J){return null!=J?Pt(vt(J)):null}function Di(J,H){return null===J?[H]:Array.isArray(J)?[...J,H]:[J,H]}function ii(J){return J._rawValidators}function Ct(J){return J._rawAsyncValidators}function gi(J){return J?Array.isArray(J)?J:[J]:[]}function Be(J,H){return Array.isArray(J)?J.includes(H):J===H}function Tt(J,H){const W=gi(H);return gi(J).forEach(Ft=>{Be(W,Ft)||W.push(Ft)}),W}function Je(J,H){return gi(H).filter(W=>!Be(J,W))}class _t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(H){this._rawValidators=H||[],this._composedValidatorFn=Bt(this._rawValidators)}_setAsyncValidators(H){this._rawAsyncValidators=H||[],this._composedAsyncValidatorFn=Zt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(H){this._onDestroyCallbacks.push(H)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(H=>H()),this._onDestroyCallbacks=[]}reset(H){this.control&&this.control.reset(H)}hasError(H,W){return!!this.control&&this.control.hasError(H,W)}getError(H,W){return this.control?this.control.getError(H,W):null}}class xe extends _t{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pt extends _t{get formDirective(){return null}get path(){return null}}class jt{constructor(H){this._cd=H}is(H){var W,Me,Ft;return"submitted"===H?!!(null===(W=this._cd)||void 0===W?void 0:W.submitted):!!(null===(Ft=null===(Me=this._cd)||void 0===Me?void 0:Me.control)||void 0===Ft?void 0:Ft[H])}}let et=(()=>{class J extends jt{constructor(W){super(W)}}return J.\u0275fac=function(W){return new(W||J)(E.Y36(xe,2))},J.\u0275dir=E.lG2({type:J,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(W,Me){2&W&&E.ekj("ng-untouched",Me.is("untouched"))("ng-touched",Me.is("touched"))("ng-pristine",Me.is("pristine"))("ng-dirty",Me.is("dirty"))("ng-valid",Me.is("valid"))("ng-invalid",Me.is("invalid"))("ng-pending",Me.is("pending"))},features:[E.qOj]}),J})(),tt=(()=>{class J extends jt{constructor(W){super(W)}}return J.\u0275fac=function(W){return new(W||J)(E.Y36(pt,10))},J.\u0275dir=E.lG2({type:J,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(W,Me){2&W&&E.ekj("ng-untouched",Me.is("untouched"))("ng-touched",Me.is("touched"))("ng-pristine",Me.is("pristine"))("ng-dirty",Me.is("dirty"))("ng-valid",Me.is("valid"))("ng-invalid",Me.is("invalid"))("ng-pending",Me.is("pending"))("ng-submitted",Me.is("submitted"))},features:[E.qOj]}),J})();function Ji(J,H){zt(J,H),H.valueAccessor.writeValue(J.value),function(J,H){H.valueAccessor.registerOnChange(W=>{J._pendingValue=W,J._pendingChange=!0,J._pendingDirty=!0,"change"===J.updateOn&&Jt(J,H)})}(J,H),function(J,H){const W=(Me,Ft)=>{H.valueAccessor.writeValue(Me),Ft&&H.viewToModelUpdate(Me)};J.registerOnChange(W),H._registerOnDestroy(()=>{J._unregisterOnChange(W)})}(J,H),function(J,H){H.valueAccessor.registerOnTouched(()=>{J._pendingTouched=!0,"blur"===J.updateOn&&J._pendingChange&&Jt(J,H),"submit"!==J.updateOn&&J.markAsTouched()})}(J,H),function(J,H){if(H.valueAccessor.setDisabledState){const W=Me=>{H.valueAccessor.setDisabledState(Me)};J.registerOnDisabledChange(W),H._registerOnDestroy(()=>{J._unregisterOnDisabledChange(W)})}}(J,H)}function wt(J,H,W=!0){const Me=()=>{};H.valueAccessor&&(H.valueAccessor.registerOnChange(Me),H.valueAccessor.registerOnTouched(Me)),Mi(J,H),J&&(H._invokeOnDestroyCallbacks(),J._registerOnCollectionChange(()=>{}))}function Ot(J,H){J.forEach(W=>{W.registerOnValidatorChange&&W.registerOnValidatorChange(H)})}function zt(J,H){const W=ii(J);null!==H.validator?J.setValidators(Di(W,H.validator)):"function"==typeof W&&J.setValidators([W]);const Me=Ct(J);null!==H.asyncValidator?J.setAsyncValidators(Di(Me,H.asyncValidator)):"function"==typeof Me&&J.setAsyncValidators([Me]);const Ft=()=>J.updateValueAndValidity();Ot(H._rawValidators,Ft),Ot(H._rawAsyncValidators,Ft)}function Mi(J,H){let W=!1;if(null!==J){if(null!==H.validator){const Ft=ii(J);if(Array.isArray(Ft)&&Ft.length>0){const bi=Ft.filter(cn=>cn!==H.validator);bi.length!==Ft.length&&(W=!0,J.setValidators(bi))}}if(null!==H.asyncValidator){const Ft=Ct(J);if(Array.isArray(Ft)&&Ft.length>0){const bi=Ft.filter(cn=>cn!==H.asyncValidator);bi.length!==Ft.length&&(W=!0,J.setAsyncValidators(bi))}}}const Me=()=>{};return Ot(H._rawValidators,Me),Ot(H._rawAsyncValidators,Me),W}function Jt(J,H){J._pendingDirty&&J.markAsDirty(),J.setValue(J._pendingValue,{emitModelToViewChange:!1}),H.viewToModelUpdate(J._pendingValue),J._pendingChange=!1}function Ae(J,H){zt(J,H)}function It(J,H){if(!J.hasOwnProperty("model"))return!1;const W=J.model;return!!W.isFirstChange()||!Object.is(H,W.currentValue)}function Zi(J,H){J._syncPendingControls(),H.forEach(W=>{const Me=W.control;"submit"===Me.updateOn&&Me._pendingChange&&(W.viewToModelUpdate(Me._pendingValue),Me._pendingChange=!1)})}function En(J,H){if(!H)return null;let W,Me,Ft;return Array.isArray(H),H.forEach(bi=>{bi.constructor===se?W=bi:function(J){return Object.getPrototypeOf(J.constructor)===d}(bi)?Me=bi:Ft=bi}),Ft||Me||W||null}function nr(J,H){const W=J.indexOf(H);W>-1&&J.splice(W,1)}const $t="VALID",kt="INVALID",ui="PENDING",Oi="DISABLED";function In(J){return(no(J)?J.validators:J)||null}function ur(J){return Array.isArray(J)?Bt(J):J||null}function Tr(J,H){return(no(H)?H.asyncValidators:J)||null}function eo(J){return Array.isArray(J)?Zt(J):J||null}function no(J){return null!=J&&!Array.isArray(J)&&"object"==typeof J}class mo{constructor(H,W){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=H,this._rawAsyncValidators=W,this._composedValidatorFn=ur(this._rawValidators),this._composedAsyncValidatorFn=eo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(H){this._rawValidators=this._composedValidatorFn=H}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(H){this._rawAsyncValidators=this._composedAsyncValidatorFn=H}get parent(){return this._parent}get valid(){return this.status===$t}get invalid(){return this.status===kt}get pending(){return this.status==ui}get disabled(){return this.status===Oi}get enabled(){return this.status!==Oi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(H){this._rawValidators=H,this._composedValidatorFn=ur(H)}setAsyncValidators(H){this._rawAsyncValidators=H,this._composedAsyncValidatorFn=eo(H)}addValidators(H){this.setValidators(Tt(H,this._rawValidators))}addAsyncValidators(H){this.setAsyncValidators(Tt(H,this._rawAsyncValidators))}removeValidators(H){this.setValidators(Je(H,this._rawValidators))}removeAsyncValidators(H){this.setAsyncValidators(Je(H,this._rawAsyncValidators))}hasValidator(H){return Be(this._rawValidators,H)}hasAsyncValidator(H){return Be(this._rawAsyncValidators,H)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(H={}){this.touched=!0,this._parent&&!H.onlySelf&&this._parent.markAsTouched(H)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(H=>H.markAllAsTouched())}markAsUntouched(H={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(W=>{W.markAsUntouched({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}markAsDirty(H={}){this.pristine=!1,this._parent&&!H.onlySelf&&this._parent.markAsDirty(H)}markAsPristine(H={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(W=>{W.markAsPristine({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}markAsPending(H={}){this.status=ui,!1!==H.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!H.onlySelf&&this._parent.markAsPending(H)}disable(H={}){const W=this._parentMarkedDirty(H.onlySelf);this.status=Oi,this.errors=null,this._forEachChild(Me=>{Me.disable(Object.assign(Object.assign({},H),{onlySelf:!0}))}),this._updateValue(),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},H),{skipPristineCheck:W})),this._onDisabledChange.forEach(Me=>Me(!0))}enable(H={}){const W=this._parentMarkedDirty(H.onlySelf);this.status=$t,this._forEachChild(Me=>{Me.enable(Object.assign(Object.assign({},H),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},H),{skipPristineCheck:W})),this._onDisabledChange.forEach(Me=>Me(!1))}_updateAncestors(H){this._parent&&!H.onlySelf&&(this._parent.updateValueAndValidity(H),H.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(H){this._parent=H}updateValueAndValidity(H={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$t||this.status===ui)&&this._runAsyncValidator(H.emitEvent)),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!H.onlySelf&&this._parent.updateValueAndValidity(H)}_updateTreeValidity(H={emitEvent:!0}){this._forEachChild(W=>W._updateTreeValidity(H)),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oi:$t}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(H){if(this.asyncValidator){this.status=ui,this._hasOwnPendingAsyncValidator=!0;const W=ht(this.asyncValidator(this));this._asyncValidationSubscription=W.subscribe(Me=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Me,{emitEvent:H})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(H,W={}){this.errors=H,this._updateControlsErrors(!1!==W.emitEvent)}get(H){return function(J,H,W){if(null==H||(Array.isArray(H)||(H=H.split(".")),Array.isArray(H)&&0===H.length))return null;let Me=J;return H.forEach(Ft=>{Me=Me instanceof pr?Me.controls.hasOwnProperty(Ft)?Me.controls[Ft]:null:Me instanceof Ro&&Me.at(Ft)||null}),Me}(this,H)}getError(H,W){const Me=W?this.get(W):this;return Me&&Me.errors?Me.errors[H]:null}hasError(H,W){return!!this.getError(H,W)}get root(){let H=this;for(;H._parent;)H=H._parent;return H}_updateControlsErrors(H){this.status=this._calculateStatus(),H&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(H)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?Oi:this.errors?kt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ui)?ui:this._anyControlsHaveStatus(kt)?kt:$t}_anyControlsHaveStatus(H){return this._anyControls(W=>W.status===H)}_anyControlsDirty(){return this._anyControls(H=>H.dirty)}_anyControlsTouched(){return this._anyControls(H=>H.touched)}_updatePristine(H={}){this.pristine=!this._anyControlsDirty(),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}_updateTouched(H={}){this.touched=this._anyControlsTouched(),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}_isBoxedValue(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}_registerOnCollectionChange(H){this._onCollectionChange=H}_setUpdateStrategy(H){no(H)&&null!=H.updateOn&&(this._updateOn=H.updateOn)}_parentMarkedDirty(H){return!H&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Lr extends mo{constructor(H=null,W,Me){super(In(W),Tr(Me,W)),this._onChange=[],this._pendingChange=!1,this._applyFormState(H),this._setUpdateStrategy(W),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(H,W={}){this.value=this._pendingValue=H,this._onChange.length&&!1!==W.emitModelToViewChange&&this._onChange.forEach(Me=>Me(this.value,!1!==W.emitViewToModelChange)),this.updateValueAndValidity(W)}patchValue(H,W={}){this.setValue(H,W)}reset(H=null,W={}){this._applyFormState(H),this.markAsPristine(W),this.markAsUntouched(W),this.setValue(this.value,W),this._pendingChange=!1}_updateValue(){}_anyControls(H){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(H){this._onChange.push(H)}_unregisterOnChange(H){nr(this._onChange,H)}registerOnDisabledChange(H){this._onDisabledChange.push(H)}_unregisterOnDisabledChange(H){nr(this._onDisabledChange,H)}_forEachChild(H){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(H){this._isBoxedValue(H)?(this.value=this._pendingValue=H.value,H.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=H}}class pr extends mo{constructor(H,W,Me){super(In(W),Tr(Me,W)),this.controls=H,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(H,W){return this.controls[H]?this.controls[H]:(this.controls[H]=W,W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange),W)}addControl(H,W,Me={}){this.registerControl(H,W),this.updateValueAndValidity({emitEvent:Me.emitEvent}),this._onCollectionChange()}removeControl(H,W={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}setControl(H,W,Me={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],W&&this.registerControl(H,W),this.updateValueAndValidity({emitEvent:Me.emitEvent}),this._onCollectionChange()}contains(H){return this.controls.hasOwnProperty(H)&&this.controls[H].enabled}setValue(H,W={}){this._checkAllValuesPresent(H),Object.keys(H).forEach(Me=>{this._throwIfControlMissing(Me),this.controls[Me].setValue(H[Me],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(H,W={}){null!=H&&(Object.keys(H).forEach(Me=>{this.controls[Me]&&this.controls[Me].patchValue(H[Me],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(H={},W={}){this._forEachChild((Me,Ft)=>{Me.reset(H[Ft],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this._reduceChildren({},(H,W,Me)=>(H[Me]=W instanceof Lr?W.value:W.getRawValue(),H))}_syncPendingControls(){let H=this._reduceChildren(!1,(W,Me)=>!!Me._syncPendingControls()||W);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_throwIfControlMissing(H){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[H])throw new Error(`Cannot find form control with name: ${H}.`)}_forEachChild(H){Object.keys(this.controls).forEach(W=>{const Me=this.controls[W];Me&&H(Me,W)})}_setUpControls(){this._forEachChild(H=>{H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(H){for(const W of Object.keys(this.controls)){const Me=this.controls[W];if(this.contains(W)&&H(Me))return!0}return!1}_reduceValue(){return this._reduceChildren({},(H,W,Me)=>((W.enabled||this.disabled)&&(H[Me]=W.value),H))}_reduceChildren(H,W){let Me=H;return this._forEachChild((Ft,bi)=>{Me=W(Me,Ft,bi)}),Me}_allControlsDisabled(){for(const H of Object.keys(this.controls))if(this.controls[H].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(H){this._forEachChild((W,Me)=>{if(void 0===H[Me])throw new Error(`Must supply a value for form control with name: '${Me}'.`)})}}class Ro extends mo{constructor(H,W,Me){super(In(W),Tr(Me,W)),this.controls=H,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(H){return this.controls[H]}push(H,W={}){this.controls.push(H),this._registerControl(H),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}insert(H,W,Me={}){this.controls.splice(H,0,W),this._registerControl(W),this.updateValueAndValidity({emitEvent:Me.emitEvent})}removeAt(H,W={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),this.controls.splice(H,1),this.updateValueAndValidity({emitEvent:W.emitEvent})}setControl(H,W,Me={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),this.controls.splice(H,1),W&&(this.controls.splice(H,0,W),this._registerControl(W)),this.updateValueAndValidity({emitEvent:Me.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(H,W={}){this._checkAllValuesPresent(H),H.forEach((Me,Ft)=>{this._throwIfControlMissing(Ft),this.at(Ft).setValue(Me,{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(H,W={}){null!=H&&(H.forEach((Me,Ft)=>{this.at(Ft)&&this.at(Ft).patchValue(Me,{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(H=[],W={}){this._forEachChild((Me,Ft)=>{Me.reset(H[Ft],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this.controls.map(H=>H instanceof Lr?H.value:H.getRawValue())}clear(H={}){this.controls.length<1||(this._forEachChild(W=>W._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:H.emitEvent}))}_syncPendingControls(){let H=this.controls.reduce((W,Me)=>!!Me._syncPendingControls()||W,!1);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_throwIfControlMissing(H){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(H))throw new Error(`Cannot find form control at index ${H}`)}_forEachChild(H){this.controls.forEach((W,Me)=>{H(W,Me)})}_updateValue(){this.value=this.controls.filter(H=>H.enabled||this.disabled).map(H=>H.value)}_anyControls(H){return this.controls.some(W=>W.enabled&&H(W))}_setUpControls(){this._forEachChild(H=>this._registerControl(H))}_checkAllValuesPresent(H){this._forEachChild((W,Me)=>{if(void 0===H[Me])throw new Error(`Must supply a value for form control at index: ${Me}.`)})}_allControlsDisabled(){for(const H of this.controls)if(H.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(H){H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)}}const cr={provide:pt,useExisting:(0,E.Gpc)(()=>Gn)},Ri=(()=>Promise.resolve(null))();let Gn=(()=>{class J extends pt{constructor(W,Me){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new E.vpe,this.form=new pr({},Bt(W),Zt(Me))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(W){Ri.then(()=>{const Me=this._findContainer(W.path);W.control=Me.registerControl(W.name,W.control),Ji(W.control,W),W.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(W)})}getControl(W){return this.form.get(W.path)}removeControl(W){Ri.then(()=>{const Me=this._findContainer(W.path);Me&&Me.removeControl(W.name),nr(this._directives,W)})}addFormGroup(W){Ri.then(()=>{const Me=this._findContainer(W.path),Ft=new pr({});Ae(Ft,W),Me.registerControl(W.name,Ft),Ft.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(W){Ri.then(()=>{const Me=this._findContainer(W.path);Me&&Me.removeControl(W.name)})}getFormGroup(W){return this.form.get(W.path)}updateModel(W,Me){Ri.then(()=>{this.form.get(W.path).setValue(Me)})}setValue(W){this.control.setValue(W)}onSubmit(W){return this.submitted=!0,Zi(this.form,this._directives),this.ngSubmit.emit(W),!1}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(W){return W.pop(),W.length?this.form.get(W):this.form}}return J.\u0275fac=function(W){return new(W||J)(E.Y36(_e,10),E.Y36(Le,10))},J.\u0275dir=E.lG2({type:J,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(W,Me){1&W&&E.NdJ("submit",function(bi){return Me.onSubmit(bi)})("reset",function(){return Me.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([cr]),E.qOj]}),J})();const Dn={provide:xe,useExisting:(0,E.Gpc)(()=>ot)},Wn=(()=>Promise.resolve(null))();let ot=(()=>{class J extends xe{constructor(W,Me,Ft,bi){super(),this.control=new Lr,this._registered=!1,this.update=new E.vpe,this._parent=W,this._setValidators(Me),this._setAsyncValidators(Ft),this.valueAccessor=En(0,bi)}ngOnChanges(W){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in W&&this._updateDisabled(W),It(W,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(J,H){return[...H.path,J]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ji(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(W){Wn.then(()=>{this.control.setValue(W,{emitViewToModelChange:!1})})}_updateDisabled(W){const Me=W.isDisabled.currentValue,Ft=""===Me||Me&&"false"!==Me;Wn.then(()=>{Ft&&!this.control.disabled?this.control.disable():!Ft&&this.control.disabled&&this.control.enable()})}}return J.\u0275fac=function(W){return new(W||J)(E.Y36(pt,9),E.Y36(_e,10),E.Y36(Le,10),E.Y36(C,10))},J.\u0275dir=E.lG2({type:J,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([Dn]),E.qOj,E.TTD]}),J})(),Ht=(()=>{class J{}return J.\u0275fac=function(W){return new(W||J)},J.\u0275dir=E.lG2({type:J,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),J})(),Yn=(()=>{class J{}return J.\u0275fac=function(W){return new(W||J)},J.\u0275mod=E.oAB({type:J}),J.\u0275inj=E.cJS({}),J})();const ro=new E.OlP("NgModelWithFormControlWarning"),_o={provide:xe,useExisting:(0,E.Gpc)(()=>Qs)};let Qs=(()=>{class J extends xe{constructor(W,Me,Ft,bi){super(),this._ngModelWarningConfig=bi,this.update=new E.vpe,this._ngModelWarningSent=!1,this._setValidators(W),this._setAsyncValidators(Me),this.valueAccessor=En(0,Ft)}set isDisabled(W){}ngOnChanges(W){if(this._isControlChanged(W)){const Me=W.form.previousValue;Me&&wt(Me,this,!1),Ji(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}It(W,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&wt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_isControlChanged(W){return W.hasOwnProperty("form")}}return J._ngModelWarningSentOnce=!1,J.\u0275fac=function(W){return new(W||J)(E.Y36(_e,10),E.Y36(Le,10),E.Y36(C,10),E.Y36(ro,8))},J.\u0275dir=E.lG2({type:J,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[E._Bn([_o]),E.qOj,E.TTD]}),J})();const dr={provide:pt,useExisting:(0,E.Gpc)(()=>Xo)};let Xo=(()=>{class J extends pt{constructor(W,Me){super(),this.validators=W,this.asyncValidators=Me,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(W),this._setAsyncValidators(Me)}ngOnChanges(W){this._checkFormPresent(),W.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(W){const Me=this.form.get(W.path);return Ji(Me,W),Me.updateValueAndValidity({emitEvent:!1}),this.directives.push(W),Me}getControl(W){return this.form.get(W.path)}removeControl(W){wt(W.control||null,W,!1),nr(this.directives,W)}addFormGroup(W){this._setUpFormContainer(W)}removeFormGroup(W){this._cleanUpFormContainer(W)}getFormGroup(W){return this.form.get(W.path)}addFormArray(W){this._setUpFormContainer(W)}removeFormArray(W){this._cleanUpFormContainer(W)}getFormArray(W){return this.form.get(W.path)}updateModel(W,Me){this.form.get(W.path).setValue(Me)}onSubmit(W){return this.submitted=!0,Zi(this.form,this.directives),this.ngSubmit.emit(W),!1}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_updateDomValue(){this.directives.forEach(W=>{const Me=W.control,Ft=this.form.get(W.path);Me!==Ft&&(wt(Me||null,W),Ft instanceof Lr&&(Ji(Ft,W),W.control=Ft))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(W){const Me=this.form.get(W.path);Ae(Me,W),Me.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(W){if(this.form){const Me=this.form.get(W.path);Me&&function(J,H){return Mi(J,H)}(Me,W)&&Me.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zt(this.form,this),this._oldForm&&Mi(this._oldForm,this)}_checkFormPresent(){}}return J.\u0275fac=function(W){return new(W||J)(E.Y36(_e,10),E.Y36(Le,10))},J.\u0275dir=E.lG2({type:J,selectors:[["","formGroup",""]],hostBindings:function(W,Me){1&W&&E.NdJ("submit",function(bi){return Me.onSubmit(bi)})("reset",function(){return Me.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([dr]),E.qOj,E.TTD]}),J})();const Ko={provide:_e,useExisting:(0,E.Gpc)(()=>zo),multi:!0},Ds={provide:_e,useExisting:(0,E.Gpc)(()=>Oo),multi:!0};let zo=(()=>{class J{constructor(){this._required=!1}get required(){return this._required}set required(W){this._required=null!=W&&!1!==W&&"false"!=`${W}`,this._onChange&&this._onChange()}validate(W){return this.required?ne(W):null}registerOnValidatorChange(W){this._onChange=W}}return J.\u0275fac=function(W){return new(W||J)},J.\u0275dir=E.lG2({type:J,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(W,Me){2&W&&E.uIk("required",Me.required?"":null)},inputs:{required:"required"},features:[E._Bn([Ko])]}),J})(),Oo=(()=>{class J extends zo{validate(W){return this.required?ge(W):null}}return J.\u0275fac=function(){let H;return function(Me){return(H||(H=E.n5z(J)))(Me||J)}}(),J.\u0275dir=E.lG2({type:J,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(W,Me){2&W&&E.uIk("required",Me.required?"":null)},features:[E._Bn([Ds]),E.qOj]}),J})(),ms=(()=>{class J{}return J.\u0275fac=function(W){return new(W||J)},J.\u0275mod=E.oAB({type:J}),J.\u0275inj=E.cJS({imports:[[Yn]]}),J})(),yl=(()=>{class J{}return J.\u0275fac=function(W){return new(W||J)},J.\u0275mod=E.oAB({type:J}),J.\u0275inj=E.cJS({imports:[ms]}),J})(),Nr=(()=>{class J{static withConfig(W){return{ngModule:J,providers:[{provide:ro,useValue:W.warnOnNgModelWithFormControl}]}}}return J.\u0275fac=function(W){return new(W||J)},J.\u0275mod=E.oAB({type:J}),J.\u0275inj=E.cJS({imports:[ms]}),J})()},91079:(V,Z,g)=>{"use strict";g.d(Z,{XC:()=>vt,Bb:()=>Tt,ZL:()=>Ct});var E=g(15664),m=g(63191),t=g(5e3),e=g(90508),n=g(50727),a=g(77579),d=g(49770),C=g(56451),D=g(39646),B=g(54968),z=g(70925),oe=g(69808),be=g(91314),se=g(30495),Ie=g(91159),Ge=g(47429),_e=g(93075),Le=g(67322),We=g(95698),$e=g(63900),Te=g(39300),ye=g(54004),ne=g(18505),ge=g(91005),ae=g(50226);const He=["panel"];function Se(Je,_t){if(1&Je&&(t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&Je){const xe=_t.id,pt=t.oxw();t.Q6J("id",pt.id)("ngClass",pt._classList),t.uIk("aria-label",pt.ariaLabel||null)("aria-labelledby",pt._getPanelAriaLabelledby(xe))}}const Ee=["*"];let ue=0;class ie{constructor(_t,xe){this.source=_t,this.option=xe}}const ht=(0,e.Kr)(class{}),Oe=new t.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}});let dt=(()=>{class Je extends ht{constructor(xe,pt,jt,di){super(),this._changeDetectorRef=xe,this._elementRef=pt,this._activeOptionChanges=n.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.optionActivated=new t.vpe,this._classList={},this.id="mat-autocomplete-"+ue++,this.inertGroups=(null==di?void 0:di.SAFARI)||!1,this._autoActiveFirstOption=!!jt.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(xe){this._autoActiveFirstOption=(0,m.Ig)(xe)}set classList(xe){this._classList=xe&&xe.length?(0,m.du)(xe).reduce((pt,jt)=>(pt[jt]=!0,pt),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new E.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(xe=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[xe]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(xe){this.panel&&(this.panel.nativeElement.scrollTop=xe)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(xe){const pt=new ie(this,xe);this.optionSelected.emit(pt)}_getPanelAriaLabelledby(xe){return this.ariaLabel?null:this.ariaLabelledby?(xe?xe+" ":"")+this.ariaLabelledby:xe}_setVisibilityClasses(xe){xe[this._visibleClass]=this.showPanel,xe[this._hiddenClass]=!this.showPanel}}return Je.\u0275fac=function(xe){return new(xe||Je)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(Oe),t.Y36(z.t4))},Je.\u0275dir=t.lG2({type:Je,viewQuery:function(xe,pt){if(1&xe&&(t.Gf(t.Rgc,7),t.Gf(He,5)),2&xe){let jt;t.iGM(jt=t.CRH())&&(pt.template=jt.first),t.iGM(jt=t.CRH())&&(pt.panel=jt.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[t.qOj]}),Je})(),vt=(()=>{class Je extends dt{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return Je.\u0275fac=function(){let _t;return function(pt){return(_t||(_t=t.n5z(Je)))(pt||Je)}}(),Je.\u0275cmp=t.Xpm({type:Je,selectors:[["mat-autocomplete"]],contentQueries:function(xe,pt,jt){if(1&xe&&(t.Suo(jt,e.K7,5),t.Suo(jt,e.ey,5)),2&xe){let di;t.iGM(di=t.CRH())&&(pt.optionGroups=di),t.iGM(di=t.CRH())&&(pt.options=di)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[t._Bn([{provide:e.HF,useExisting:Je}]),t.qOj],ngContentSelectors:Ee,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(xe,pt){1&xe&&(t.F$t(),t.YNc(0,Se,3,4,"ng-template"))},directives:[oe.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),Je})();const lt=new t.OlP("mat-autocomplete-scroll-strategy"),Pt={provide:lt,deps:[be.aV],useFactory:function(Je){return()=>Je.scrollStrategies.reposition()}},Zt={provide:_e.JU,useExisting:(0,t.Gpc)(()=>Ct),multi:!0};let ii=(()=>{class Je{constructor(xe,pt,jt,di,Rt,et,tt,Lt,nt,mt,yt){this._element=xe,this._overlay=pt,this._viewContainerRef=jt,this._zone=di,this._changeDetectorRef=Rt,this._dir=tt,this._formField=Lt,this._document=nt,this._viewportRuler=mt,this._defaults=yt,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=n.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new a.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,d.P)(()=>this.autocomplete&&this.autocomplete.options?(0,C.T)(...this.autocomplete.options.map(Ze=>Ze.onSelectionChange)):this._zone.onStable.pipe((0,We.q)(1),(0,$e.w)(()=>this.optionSelections))),this._scrollStrategy=et}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(xe){this._autocompleteDisabled=(0,m.Ig)(xe)}ngAfterViewInit(){const xe=this._getWindow();void 0!==xe&&this._zone.runOutsideAngular(()=>xe.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(xe){xe.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const xe=this._getWindow();void 0!==xe&&xe.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,C.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,Te.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,Te.h)(()=>this._overlayAttached)):(0,D.of)()).pipe((0,ye.U)(xe=>xe instanceof e.rN?xe:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,C.T)((0,B.R)(this._document,"click"),(0,B.R)(this._document,"auxclick"),(0,B.R)(this._document,"touchend")).pipe((0,Te.h)(xe=>{const pt=(0,z.sA)(xe),jt=this._formField?this._formField._elementRef.nativeElement:null,di=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&pt!==this._element.nativeElement&&(!jt||!jt.contains(pt))&&(!di||!di.contains(pt))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(pt)}))}writeValue(xe){Promise.resolve(null).then(()=>this._setTriggerValue(xe))}registerOnChange(xe){this._onChange=xe}registerOnTouched(xe){this._onTouched=xe}setDisabledState(xe){this._element.nativeElement.disabled=xe}_handleKeydown(xe){const pt=xe.keyCode;if(pt===Ie.hY&&!(0,Ie.Vb)(xe)&&xe.preventDefault(),this.activeOption&&pt===Ie.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),xe.preventDefault();else if(this.autocomplete){const jt=this.autocomplete._keyManager.activeItem,di=pt===Ie.LH||pt===Ie.JH;this.panelOpen||pt===Ie.Mf?this.autocomplete._keyManager.onKeydown(xe):di&&this._canOpen()&&this.openPanel(),(di||this.autocomplete._keyManager.activeItem!==jt)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(xe){let pt=xe.target,jt=pt.value;"number"===pt.type&&(jt=""==jt?null:parseFloat(jt)),this._previousValue!==jt&&(this._previousValue=jt,this._onChange(jt),this._canOpen()&&this._document.activeElement===xe.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(xe=!1){this._formField&&"auto"===this._formField.floatLabel&&(xe?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const xe=this._zone.onStable.pipe((0,We.q)(1)),pt=this.autocomplete.options.changes.pipe((0,ne.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,ge.g)(0));return(0,C.T)(xe,pt).pipe((0,$e.w)(()=>{const jt=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),jt!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),(0,We.q)(1)).subscribe(jt=>this._setValueAndClose(jt))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(xe){const pt=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(xe):xe,jt=null!=pt?pt:"";this._formField?this._formField._control.value=jt:this._element.nativeElement.value=jt,this._previousValue=jt}_setValueAndClose(xe){xe&&xe.source&&(this._clearPreviousSelectedOption(xe.source),this._setTriggerValue(xe.source.value),this._onChange(xe.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(xe.source)),this.closePanel()}_clearPreviousSelectedOption(xe){this.autocomplete.options.forEach(pt=>{pt!==xe&&pt.selected&&pt.deselect()})}_attachOverlay(){var xe;let pt=this._overlayRef;pt?(this._positionStrategy.setOrigin(this._getConnectedElement()),pt.updateSize({width:this._getPanelWidth()})):(this._portal=new Ge.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(xe=this._formField)||void 0===xe?void 0:xe.getLabelId()}),pt=this._overlay.create(this._getOverlayConfig()),this._overlayRef=pt,pt.keydownEvents().subscribe(di=>{(di.keyCode===Ie.hY&&!(0,Ie.Vb)(di)||di.keyCode===Ie.LH&&(0,Ie.Vb)(di,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),di.stopPropagation(),di.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&pt&&pt.updateSize({width:this._getPanelWidth()})})),pt&&!pt.hasAttached()&&(pt.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const jt=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&jt!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var xe;return new be.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(xe=this._defaults)||void 0===xe?void 0:xe.overlayPanelClass})}_getOverlayPosition(){const xe=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(xe),this._positionStrategy=xe,xe}_setStrategyPositions(xe){const pt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],jt=this._aboveClass,di=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:jt},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:jt}];let Rt;Rt="above"===this.position?di:"below"===this.position?pt:[...pt,...di],xe.withPositions(Rt)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const xe=this.autocomplete;xe.autoActiveFirstOption?xe._keyManager.setFirstItemActive():xe._keyManager.setActiveItem(-1)}_canOpen(){const xe=this._element.nativeElement;return!xe.readOnly&&!xe.disabled&&!this._autocompleteDisabled}_getWindow(){var xe;return(null===(xe=this._document)||void 0===xe?void 0:xe.defaultView)||window}_scrollToOption(xe){const pt=this.autocomplete,jt=(0,e.CB)(xe,pt.options,pt.optionGroups);if(0===xe&&1===jt)pt._setScrollTop(0);else if(pt.panel){const di=pt.options.toArray()[xe];if(di){const Rt=di._getHostElement(),et=(0,e.jH)(Rt.offsetTop,Rt.offsetHeight,pt._getScrollTop(),pt.panel.nativeElement.offsetHeight);pt._setScrollTop(et)}}}}return Je.\u0275fac=function(xe){return new(xe||Je)(t.Y36(t.SBq),t.Y36(be.aV),t.Y36(t.s_b),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(lt),t.Y36(ae.Is,8),t.Y36(Le.G_,9),t.Y36(oe.K0,8),t.Y36(se.rL),t.Y36(Oe,8))},Je.\u0275dir=t.lG2({type:Je,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[t.TTD]}),Je})(),Ct=(()=>{class Je extends ii{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return Je.\u0275fac=function(){let _t;return function(pt){return(_t||(_t=t.n5z(Je)))(pt||Je)}}(),Je.\u0275dir=t.lG2({type:Je,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(xe,pt){1&xe&&t.NdJ("focusin",function(){return pt._handleFocus()})("blur",function(){return pt._onTouched()})("input",function(di){return pt._handleInput(di)})("keydown",function(di){return pt._handleKeydown(di)}),2&xe&&t.uIk("autocomplete",pt.autocompleteAttribute)("role",pt.autocompleteDisabled?null:"combobox")("aria-autocomplete",pt.autocompleteDisabled?null:"list")("aria-activedescendant",pt.panelOpen&&pt.activeOption?pt.activeOption.id:null)("aria-expanded",pt.autocompleteDisabled?null:pt.panelOpen.toString())("aria-owns",pt.autocompleteDisabled||!pt.panelOpen||null==pt.autocomplete?null:pt.autocomplete.id)("aria-haspopup",!pt.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[t._Bn([Zt]),t.qOj]}),Je})(),Tt=(()=>{class Je{}return Je.\u0275fac=function(xe){return new(xe||Je)},Je.\u0275mod=t.oAB({type:Je}),Je.\u0275inj=t.cJS({providers:[Pt],imports:[[be.U8,e.Ng,e.BQ,oe.ez],se.ZD,e.Ng,e.BQ]}),Je})()},47423:(V,Z,g)=>{"use strict";g.d(Z,{zs:()=>oe,lW:()=>z,ot:()=>be});var E=g(5e3),m=g(90508),t=g(76360),e=g(15664);const n=["mat-button",""],a=["*"],D=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],B=(0,m.pj)((0,m.Id)((0,m.Kr)(class{constructor(se){this._elementRef=se}})));let z=(()=>{class se extends B{constructor(Ge,_e,Le){super(Ge),this._focusMonitor=_e,this._animationMode=Le,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const We of D)this._hasHostAttributes(We)&&this._getHostElement().classList.add(We);Ge.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Ge,_e){Ge?this._focusMonitor.focusVia(this._getHostElement(),Ge,_e):this._getHostElement().focus(_e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Ge){return Ge.some(_e=>this._getHostElement().hasAttribute(_e))}}return se.\u0275fac=function(Ge){return new(Ge||se)(E.Y36(E.SBq),E.Y36(e.tE),E.Y36(t.Qb,8))},se.\u0275cmp=E.Xpm({type:se,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Ge,_e){if(1&Ge&&E.Gf(m.wG,5),2&Ge){let Le;E.iGM(Le=E.CRH())&&(_e.ripple=Le.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Ge,_e){2&Ge&&(E.uIk("disabled",_e.disabled||null),E.ekj("_mat-animation-noopable","NoopAnimations"===_e._animationMode)("mat-button-disabled",_e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[E.qOj],attrs:n,ngContentSelectors:a,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Ge,_e){1&Ge&&(E.F$t(),E.TgZ(0,"span",0),E.Hsn(1),E.qZA(),E._UZ(2,"span",1),E._UZ(3,"span",2)),2&Ge&&(E.xp6(2),E.ekj("mat-button-ripple-round",_e.isRoundButton||_e.isIconButton),E.Q6J("matRippleDisabled",_e._isRippleDisabled())("matRippleCentered",_e.isIconButton)("matRippleTrigger",_e._getHostElement()))},directives:[m.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),se})(),oe=(()=>{class se extends z{constructor(Ge,_e,Le){super(_e,Ge,Le)}_haltDisabledEvents(Ge){this.disabled&&(Ge.preventDefault(),Ge.stopImmediatePropagation())}}return se.\u0275fac=function(Ge){return new(Ge||se)(E.Y36(e.tE),E.Y36(E.SBq),E.Y36(t.Qb,8))},se.\u0275cmp=E.Xpm({type:se,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(Ge,_e){1&Ge&&E.NdJ("click",function(We){return _e._haltDisabledEvents(We)}),2&Ge&&(E.uIk("tabindex",_e.disabled?-1:_e.tabIndex||0)("disabled",_e.disabled||null)("aria-disabled",_e.disabled.toString()),E.ekj("_mat-animation-noopable","NoopAnimations"===_e._animationMode)("mat-button-disabled",_e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[E.qOj],attrs:n,ngContentSelectors:a,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Ge,_e){1&Ge&&(E.F$t(),E.TgZ(0,"span",0),E.Hsn(1),E.qZA(),E._UZ(2,"span",1),E._UZ(3,"span",2)),2&Ge&&(E.xp6(2),E.ekj("mat-button-ripple-round",_e.isRoundButton||_e.isIconButton),E.Q6J("matRippleDisabled",_e._isRippleDisabled())("matRippleCentered",_e.isIconButton)("matRippleTrigger",_e._getHostElement()))},directives:[m.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),se})(),be=(()=>{class se{}return se.\u0275fac=function(Ge){return new(Ge||se)},se.\u0275mod=E.oAB({type:se}),se.\u0275inj=E.cJS({imports:[[m.si,m.BQ],m.BQ]}),se})()},90508:(V,Z,g)=>{"use strict";g.d(Z,{yN:()=>Le,mZ:()=>We,_A:()=>vt,rD:()=>Be,sG:()=>lt,K7:()=>mi,HF:()=>Ni,Y2:()=>yt,BQ:()=>ne,X2:()=>Tt,uc:()=>xe,XK:()=>Ct,ey:()=>zt,Ng:()=>Bi,rN:()=>Ot,nP:()=>ei,us:()=>ni,wG:()=>Ze,si:()=>ut,IR:()=>Lt,CB:()=>Mi,jH:()=>_i,pj:()=>Ee,Kr:()=>ue,Id:()=>Se,FD:()=>ht,sb:()=>ie,E0:()=>Je});var E=g(5e3),m=g(50226),e=g(69808),n=g(70925),a=g(15664),d=g(63191),C=g(77579),D=g(68675),B=g(76360),z=g(91159);function se(Jt,ft){if(1&Jt&&E._UZ(0,"mat-pseudo-checkbox",4),2&Jt){const Ae=E.oxw();E.Q6J("state",Ae.selected?"checked":"unchecked")("disabled",Ae.disabled)}}function Ie(Jt,ft){if(1&Jt&&(E.TgZ(0,"span",5),E._uU(1),E.qZA()),2&Jt){const Ae=E.oxw();E.xp6(1),E.hij("(",Ae.group.label,")")}}const Ge=["*"];let Le=(()=>{class Jt{}return Jt.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",Jt.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",Jt.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",Jt.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",Jt})(),We=(()=>{class Jt{}return Jt.COMPLEX="375ms",Jt.ENTERING="225ms",Jt.EXITING="195ms",Jt})();const ye=new E.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let ne=(()=>{class Jt{constructor(Ae,le,Pe){this._sanityChecks=le,this._document=Pe,this._hasDoneGlobalChecks=!1,Ae._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(Ae){return!(0,n.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[Ae])}}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)(E.LFG(a.qm),E.LFG(ye,8),E.LFG(e.K0))},Jt.\u0275mod=E.oAB({type:Jt}),Jt.\u0275inj=E.cJS({imports:[[m.vT],m.vT]}),Jt})();function Se(Jt){return class extends Jt{constructor(...ft){super(...ft),this._disabled=!1}get disabled(){return this._disabled}set disabled(ft){this._disabled=(0,d.Ig)(ft)}}}function Ee(Jt,ft){return class extends Jt{constructor(...Ae){super(...Ae),this.defaultColor=ft,this.color=ft}get color(){return this._color}set color(Ae){const le=Ae||this.defaultColor;le!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),le&&this._elementRef.nativeElement.classList.add(`mat-${le}`),this._color=le)}}}function ue(Jt){return class extends Jt{constructor(...ft){super(...ft),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(ft){this._disableRipple=(0,d.Ig)(ft)}}}function ie(Jt,ft=0){return class extends Jt{constructor(...Ae){super(...Ae),this._tabIndex=ft,this.defaultTabIndex=ft}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(Ae){this._tabIndex=null!=Ae?(0,d.su)(Ae):this.defaultTabIndex}}}function ht(Jt){return class extends Jt{constructor(...ft){super(...ft),this.stateChanges=new C.x,this.errorState=!1}updateErrorState(){const ft=this.errorState,at=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);at!==ft&&(this.errorState=at,this.stateChanges.next())}}}const ke=new E.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,E.f3M)(E.soG)}});class vt{constructor(){this._localeChanges=new C.x,this.localeChanges=this._localeChanges}getValidDateOrNull(ft){return this.isDateInstance(ft)&&this.isValid(ft)?ft:null}deserialize(ft){return null==ft||this.isDateInstance(ft)&&this.isValid(ft)?ft:this.invalid()}setLocale(ft){this.locale=ft,this._localeChanges.next()}compareDate(ft,Ae){return this.getYear(ft)-this.getYear(Ae)||this.getMonth(ft)-this.getMonth(Ae)||this.getDate(ft)-this.getDate(Ae)}sameDate(ft,Ae){if(ft&&Ae){let le=this.isValid(ft),Pe=this.isValid(Ae);return le&&Pe?!this.compareDate(ft,Ae):le==Pe}return ft==Ae}clampDate(ft,Ae,le){return Ae&&this.compareDate(ft,Ae)<0?Ae:le&&this.compareDate(ft,le)>0?le:ft}}const lt=new E.OlP("mat-date-formats"),Bt=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Pt(Jt,ft){const Ae=Array(Jt);for(let le=0;le<Jt;le++)Ae[le]=ft(le);return Ae}let Zt=(()=>{class Jt extends vt{constructor(Ae,le){super(),this.useUtcForDisplay=!1,super.setLocale(Ae)}getYear(Ae){return Ae.getFullYear()}getMonth(Ae){return Ae.getMonth()}getDate(Ae){return Ae.getDate()}getDayOfWeek(Ae){return Ae.getDay()}getMonthNames(Ae){const le=new Intl.DateTimeFormat(this.locale,{month:Ae,timeZone:"utc"});return Pt(12,Pe=>this._format(le,new Date(2017,Pe,1)))}getDateNames(){const Ae=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Pt(31,le=>this._format(Ae,new Date(2017,0,le+1)))}getDayOfWeekNames(Ae){const le=new Intl.DateTimeFormat(this.locale,{weekday:Ae,timeZone:"utc"});return Pt(7,Pe=>this._format(le,new Date(2017,0,Pe+1)))}getYearName(Ae){const le=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(le,Ae)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(Ae){return this.getDate(this._createDateWithOverflow(this.getYear(Ae),this.getMonth(Ae)+1,0))}clone(Ae){return new Date(Ae.getTime())}createDate(Ae,le,Pe){let at=this._createDateWithOverflow(Ae,le,Pe);return at.getMonth(),at}today(){return new Date}parse(Ae){return"number"==typeof Ae?new Date(Ae):Ae?new Date(Date.parse(Ae)):null}format(Ae,le){if(!this.isValid(Ae))throw Error("NativeDateAdapter: Cannot format invalid date.");const Pe=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},le),{timeZone:"utc"}));return this._format(Pe,Ae)}addCalendarYears(Ae,le){return this.addCalendarMonths(Ae,12*le)}addCalendarMonths(Ae,le){let Pe=this._createDateWithOverflow(this.getYear(Ae),this.getMonth(Ae)+le,this.getDate(Ae));return this.getMonth(Pe)!=((this.getMonth(Ae)+le)%12+12)%12&&(Pe=this._createDateWithOverflow(this.getYear(Pe),this.getMonth(Pe),0)),Pe}addCalendarDays(Ae,le){return this._createDateWithOverflow(this.getYear(Ae),this.getMonth(Ae),this.getDate(Ae)+le)}toIso8601(Ae){return[Ae.getUTCFullYear(),this._2digit(Ae.getUTCMonth()+1),this._2digit(Ae.getUTCDate())].join("-")}deserialize(Ae){if("string"==typeof Ae){if(!Ae)return null;if(Bt.test(Ae)){let le=new Date(Ae);if(this.isValid(le))return le}}return super.deserialize(Ae)}isDateInstance(Ae){return Ae instanceof Date}isValid(Ae){return!isNaN(Ae.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(Ae,le,Pe){const at=new Date;return at.setFullYear(Ae,le,Pe),at.setHours(0,0,0,0),at}_2digit(Ae){return("00"+Ae).slice(-2)}_format(Ae,le){const Pe=new Date;return Pe.setUTCFullYear(le.getFullYear(),le.getMonth(),le.getDate()),Pe.setUTCHours(le.getHours(),le.getMinutes(),le.getSeconds(),le.getMilliseconds()),Ae.format(Pe)}}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)(E.LFG(ke,8),E.LFG(n.t4))},Jt.\u0275prov=E.Yz7({token:Jt,factory:Jt.\u0275fac}),Jt})();const Di={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let ii=(()=>{class Jt{}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)},Jt.\u0275mod=E.oAB({type:Jt}),Jt.\u0275inj=E.cJS({providers:[{provide:vt,useClass:Zt}],imports:[[n.ud]]}),Jt})(),Ct=(()=>{class Jt{}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)},Jt.\u0275mod=E.oAB({type:Jt}),Jt.\u0275inj=E.cJS({providers:[{provide:lt,useValue:Di}],imports:[[ii]]}),Jt})(),Be=(()=>{class Jt{isErrorState(Ae,le){return!!(Ae&&Ae.invalid&&(Ae.touched||le&&le.submitted))}}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)},Jt.\u0275prov=E.Yz7({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt})(),Tt=(()=>{class Jt{}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)},Jt.\u0275dir=E.lG2({type:Jt,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),Jt})();function Je(Jt,ft,Ae="mat"){Jt.changes.pipe((0,D.O)(Jt)).subscribe(({length:le})=>{_t(ft,`${Ae}-2-line`,!1),_t(ft,`${Ae}-3-line`,!1),_t(ft,`${Ae}-multi-line`,!1),2===le||3===le?_t(ft,`${Ae}-${le}-line`,!0):le>3&&_t(ft,`${Ae}-multi-line`,!0)})}function _t(Jt,ft,Ae){Jt.nativeElement.classList.toggle(ft,Ae)}let xe=(()=>{class Jt{}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)},Jt.\u0275mod=E.oAB({type:Jt}),Jt.\u0275inj=E.cJS({imports:[[ne],ne]}),Jt})();class pt{constructor(ft,Ae,le){this._renderer=ft,this.element=Ae,this.config=le,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const jt={enterDuration:225,exitDuration:150},Rt=(0,n.i$)({passive:!0}),et=["mousedown","touchstart"],tt=["mouseup","mouseleave","touchend","touchcancel"];class Lt{constructor(ft,Ae,le,Pe){this._target=ft,this._ngZone=Ae,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,Pe.isBrowser&&(this._containerElement=(0,d.fI)(le))}fadeInRipple(ft,Ae,le={}){const Pe=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),at=Object.assign(Object.assign({},jt),le.animation);le.centered&&(ft=Pe.left+Pe.width/2,Ae=Pe.top+Pe.height/2);const It=le.radius||function(Jt,ft,Ae){const le=Math.max(Math.abs(Jt-Ae.left),Math.abs(Jt-Ae.right)),Pe=Math.max(Math.abs(ft-Ae.top),Math.abs(ft-Ae.bottom));return Math.sqrt(le*le+Pe*Pe)}(ft,Ae,Pe),Gi=ft-Pe.left,Zi=Ae-Pe.top,En=at.enterDuration,nr=document.createElement("div");nr.classList.add("mat-ripple-element"),nr.style.left=Gi-It+"px",nr.style.top=Zi-It+"px",nr.style.height=2*It+"px",nr.style.width=2*It+"px",null!=le.color&&(nr.style.backgroundColor=le.color),nr.style.transitionDuration=`${En}ms`,this._containerElement.appendChild(nr),window.getComputedStyle(nr).getPropertyValue("opacity"),nr.style.transform="scale(1)";const li=new pt(this,nr,le);return li.state=0,this._activeRipples.add(li),le.persistent||(this._mostRecentTransientRipple=li),this._runTimeoutOutsideZone(()=>{const $t=li===this._mostRecentTransientRipple;li.state=1,!le.persistent&&(!$t||!this._isPointerDown)&&li.fadeOut()},En),li}fadeOutRipple(ft){const Ae=this._activeRipples.delete(ft);if(ft===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!Ae)return;const le=ft.element,Pe=Object.assign(Object.assign({},jt),ft.config.animation);le.style.transitionDuration=`${Pe.exitDuration}ms`,le.style.opacity="0",ft.state=2,this._runTimeoutOutsideZone(()=>{ft.state=3,le.remove()},Pe.exitDuration)}fadeOutAll(){this._activeRipples.forEach(ft=>ft.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(ft=>{ft.config.persistent||ft.fadeOut()})}setupTriggerEvents(ft){const Ae=(0,d.fI)(ft);!Ae||Ae===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=Ae,this._registerEvents(et))}handleEvent(ft){"mousedown"===ft.type?this._onMousedown(ft):"touchstart"===ft.type?this._onTouchStart(ft):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(tt),this._pointerUpEventsRegistered=!0)}_onMousedown(ft){const Ae=(0,a.X6)(ft),le=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!Ae&&!le&&(this._isPointerDown=!0,this.fadeInRipple(ft.clientX,ft.clientY,this._target.rippleConfig))}_onTouchStart(ft){if(!this._target.rippleDisabled&&!(0,a.yG)(ft)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const Ae=ft.changedTouches;for(let le=0;le<Ae.length;le++)this.fadeInRipple(Ae[le].clientX,Ae[le].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(ft=>{!ft.config.persistent&&(1===ft.state||ft.config.terminateOnPointerUp&&0===ft.state)&&ft.fadeOut()}))}_runTimeoutOutsideZone(ft,Ae=0){this._ngZone.runOutsideAngular(()=>setTimeout(ft,Ae))}_registerEvents(ft){this._ngZone.runOutsideAngular(()=>{ft.forEach(Ae=>{this._triggerElement.addEventListener(Ae,this,Rt)})})}_removeTriggerEvents(){this._triggerElement&&(et.forEach(ft=>{this._triggerElement.removeEventListener(ft,this,Rt)}),this._pointerUpEventsRegistered&&tt.forEach(ft=>{this._triggerElement.removeEventListener(ft,this,Rt)}))}}const yt=new E.OlP("mat-ripple-global-options");let Ze=(()=>{class Jt{constructor(Ae,le,Pe,at,It){this._elementRef=Ae,this._animationMode=It,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=at||{},this._rippleRenderer=new Lt(this,le,Ae,Pe)}get disabled(){return this._disabled}set disabled(Ae){Ae&&this.fadeOutAllNonPersistent(),this._disabled=Ae,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(Ae){this._trigger=Ae,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(Ae,le=0,Pe){return"number"==typeof Ae?this._rippleRenderer.fadeInRipple(Ae,le,Object.assign(Object.assign({},this.rippleConfig),Pe)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),Ae))}}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)(E.Y36(E.SBq),E.Y36(E.R0b),E.Y36(n.t4),E.Y36(yt,8),E.Y36(B.Qb,8))},Jt.\u0275dir=E.lG2({type:Jt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(Ae,le){2&Ae&&E.ekj("mat-ripple-unbounded",le.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),Jt})(),ut=(()=>{class Jt{}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)},Jt.\u0275mod=E.oAB({type:Jt}),Jt.\u0275inj=E.cJS({imports:[[ne,n.ud],ne]}),Jt})(),ei=(()=>{class Jt{constructor(Ae){this._animationMode=Ae,this.state="unchecked",this.disabled=!1}}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)(E.Y36(B.Qb,8))},Jt.\u0275cmp=E.Xpm({type:Jt,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(Ae,le){2&Ae&&E.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===le.state)("mat-pseudo-checkbox-checked","checked"===le.state)("mat-pseudo-checkbox-disabled",le.disabled)("_mat-animation-noopable","NoopAnimations"===le._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(Ae,le){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),Jt})(),ni=(()=>{class Jt{}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)},Jt.\u0275mod=E.oAB({type:Jt}),Jt.\u0275inj=E.cJS({imports:[[ne]]}),Jt})();const Ni=new E.OlP("MAT_OPTION_PARENT_COMPONENT"),mi=new E.OlP("MatOptgroup");let wt=0;class Ot{constructor(ft,Ae=!1){this.source=ft,this.isUserInput=Ae}}let Ci=(()=>{class Jt{constructor(Ae,le,Pe,at){this._element=Ae,this._changeDetectorRef=le,this._parent=Pe,this.group=at,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+wt++,this.onSelectionChange=new E.vpe,this._stateChanges=new C.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(Ae){this._disabled=(0,d.Ig)(Ae)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(Ae,le){const Pe=this._getHostElement();"function"==typeof Pe.focus&&Pe.focus(le)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(Ae){(Ae.keyCode===z.K5||Ae.keyCode===z.L_)&&!(0,z.Vb)(Ae)&&(this._selectViaInteraction(),Ae.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const Ae=this.viewValue;Ae!==this._mostRecentViewValue&&(this._mostRecentViewValue=Ae,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(Ae=!1){this.onSelectionChange.emit(new Ot(this,Ae))}}return Jt.\u0275fac=function(Ae){E.$Z()},Jt.\u0275dir=E.lG2({type:Jt,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),Jt})(),zt=(()=>{class Jt extends Ci{constructor(Ae,le,Pe,at){super(Ae,le,Pe,at)}}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)(E.Y36(E.SBq),E.Y36(E.sBO),E.Y36(Ni,8),E.Y36(mi,8))},Jt.\u0275cmp=E.Xpm({type:Jt,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(Ae,le){1&Ae&&E.NdJ("click",function(){return le._selectViaInteraction()})("keydown",function(at){return le._handleKeydown(at)}),2&Ae&&(E.Ikx("id",le.id),E.uIk("tabindex",le._getTabIndex())("aria-selected",le._getAriaSelected())("aria-disabled",le.disabled.toString()),E.ekj("mat-selected",le.selected)("mat-option-multiple",le.multiple)("mat-active",le.active)("mat-option-disabled",le.disabled))},exportAs:["matOption"],features:[E.qOj],ngContentSelectors:Ge,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(Ae,le){1&Ae&&(E.F$t(),E.YNc(0,se,1,2,"mat-pseudo-checkbox",0),E.TgZ(1,"span",1),E.Hsn(2),E.qZA(),E.YNc(3,Ie,2,1,"span",2),E._UZ(4,"div",3)),2&Ae&&(E.Q6J("ngIf",le.multiple),E.xp6(3),E.Q6J("ngIf",le.group&&le.group._inert),E.xp6(1),E.Q6J("matRippleTrigger",le._getHostElement())("matRippleDisabled",le.disabled||le.disableRipple))},directives:[e.O5,Ze,ei],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),Jt})();function Mi(Jt,ft,Ae){if(Ae.length){let le=ft.toArray(),Pe=Ae.toArray(),at=0;for(let It=0;It<Jt+1;It++)le[It].group&&le[It].group===Pe[at]&&at++;return at}return 0}function _i(Jt,ft,Ae,le){return Jt<Ae?Jt:Jt+ft>Ae+le?Math.max(0,Jt-le+ft):Ae}let Bi=(()=>{class Jt{}return Jt.\u0275fac=function(Ae){return new(Ae||Jt)},Jt.\u0275mod=E.oAB({type:Jt}),Jt.\u0275inj=E.cJS({imports:[[ut,e.ez,ne,ni]]}),Jt})()},48966:(V,Z,g)=>{"use strict";g.d(Z,{uw:()=>vt,Is:()=>gi,so:()=>He});var E=g(91314),m=g(47429),t=g(5e3),e=g(90508),n=g(50226),a=g(77579),d=g(49770),C=g(50727),D=g(39646),B=g(39300),z=g(95698),oe=g(68675),be=g(70925),se=g(69808),Ie=g(41777),Ge=g(15664),_e=g(91159),Le=g(76360);function We(Be,Tt){}class $e{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const Te={dialogContainer:(0,Ie.X$)("dialogContainer",[(0,Ie.SB)("void, exit",(0,Ie.oB)({opacity:0,transform:"scale(0.7)"})),(0,Ie.SB)("enter",(0,Ie.oB)({transform:"none"})),(0,Ie.eR)("* => enter",(0,Ie.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,Ie.oB)({transform:"none",opacity:1}))),(0,Ie.eR)("* => void, * => exit",(0,Ie.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,Ie.oB)({opacity:0})))])};let ne=(()=>{class Be extends m.en{constructor(Je,_t,xe,pt,jt,di,Rt,et){super(),this._elementRef=Je,this._focusTrapFactory=_t,this._changeDetectorRef=xe,this._config=jt,this._interactivityChecker=di,this._ngZone=Rt,this._focusMonitor=et,this._animationStateChanged=new t.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=tt=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(tt)),this._ariaLabelledBy=jt.ariaLabelledBy||null,this._document=pt}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(Je){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(Je)}attachTemplatePortal(Je){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(Je)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(Je,_t){this._interactivityChecker.isFocusable(Je)||(Je.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{Je.addEventListener("blur",()=>Je.removeAttribute("tabindex")),Je.addEventListener("mousedown",()=>Je.removeAttribute("tabindex"))})),Je.focus(_t)}_focusByCssSelector(Je,_t){let xe=this._elementRef.nativeElement.querySelector(Je);xe&&this._forceFocus(xe,_t)}_trapFocus(){const Je=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||Je.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(_t=>{_t||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const Je=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&Je&&"function"==typeof Je.focus){const _t=(0,be.ht)(),xe=this._elementRef.nativeElement;(!_t||_t===this._document.body||_t===xe||xe.contains(_t))&&(this._focusMonitor?(this._focusMonitor.focusVia(Je,this._closeInteractionType),this._closeInteractionType=null):Je.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,be.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const Je=this._elementRef.nativeElement,_t=(0,be.ht)();return Je===_t||Je.contains(_t)}}return Be.\u0275fac=function(Je){return new(Je||Be)(t.Y36(t.SBq),t.Y36(Ge.qV),t.Y36(t.sBO),t.Y36(se.K0,8),t.Y36($e),t.Y36(Ge.ic),t.Y36(t.R0b),t.Y36(Ge.tE))},Be.\u0275dir=t.lG2({type:Be,viewQuery:function(Je,_t){if(1&Je&&t.Gf(m.Pl,7),2&Je){let xe;t.iGM(xe=t.CRH())&&(_t._portalOutlet=xe.first)}},features:[t.qOj]}),Be})(),ge=(()=>{class Be extends ne{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:Je,totalTime:_t}){"enter"===Je?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:_t})):"exit"===Je&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:_t}))}_onAnimationStart({toState:Je,totalTime:_t}){"enter"===Je?this._animationStateChanged.next({state:"opening",totalTime:_t}):("exit"===Je||"void"===Je)&&this._animationStateChanged.next({state:"closing",totalTime:_t})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return Be.\u0275fac=function(){let Tt;return function(_t){return(Tt||(Tt=t.n5z(Be)))(_t||Be)}}(),Be.\u0275cmp=t.Xpm({type:Be,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(Je,_t){1&Je&&t.WFA("@dialogContainer.start",function(pt){return _t._onAnimationStart(pt)})("@dialogContainer.done",function(pt){return _t._onAnimationDone(pt)}),2&Je&&(t.Ikx("id",_t._id),t.uIk("role",_t._config.role)("aria-labelledby",_t._config.ariaLabel?null:_t._ariaLabelledBy)("aria-label",_t._config.ariaLabel)("aria-describedby",_t._config.ariaDescribedBy||null),t.d8E("@dialogContainer",_t._state))},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(Je,_t){1&Je&&t.YNc(0,We,0,0,"ng-template",0)},directives:[m.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Te.dialogContainer]}}),Be})(),ae=0;class He{constructor(Tt,Je,_t="mat-dialog-"+ae++){this._overlayRef=Tt,this._containerInstance=Je,this.id=_t,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new a.x,this._afterClosed=new a.x,this._beforeClosed=new a.x,this._state=0,Je._id=_t,Je._animationStateChanged.pipe((0,B.h)(xe=>"opened"===xe.state),(0,z.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Je._animationStateChanged.pipe((0,B.h)(xe=>"closed"===xe.state),(0,z.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),Tt.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),Tt.keydownEvents().pipe((0,B.h)(xe=>xe.keyCode===_e.hY&&!this.disableClose&&!(0,_e.Vb)(xe))).subscribe(xe=>{xe.preventDefault(),Se(this,"keyboard")}),Tt.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Se(this,"mouse")})}close(Tt){this._result=Tt,this._containerInstance._animationStateChanged.pipe((0,B.h)(Je=>"closing"===Je.state),(0,z.q)(1)).subscribe(Je=>{this._beforeClosed.next(Tt),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),Je.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(Tt){let Je=this._getPositionStrategy();return Tt&&(Tt.left||Tt.right)?Tt.left?Je.left(Tt.left):Je.right(Tt.right):Je.centerHorizontally(),Tt&&(Tt.top||Tt.bottom)?Tt.top?Je.top(Tt.top):Je.bottom(Tt.bottom):Je.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(Tt="",Je=""){return this._overlayRef.updateSize({width:Tt,height:Je}),this._overlayRef.updatePosition(),this}addPanelClass(Tt){return this._overlayRef.addPanelClass(Tt),this}removePanelClass(Tt){return this._overlayRef.removePanelClass(Tt),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Se(Be,Tt,Je){return void 0!==Be._containerInstance&&(Be._containerInstance._closeInteractionType=Tt),Be.close(Je)}const Ee=new t.OlP("MatDialogData"),ue=new t.OlP("mat-dialog-default-options"),ie=new t.OlP("mat-dialog-scroll-strategy"),ke={provide:ie,deps:[E.aV],useFactory:function(Be){return()=>Be.scrollStrategies.block()}};let dt=(()=>{class Be{constructor(Je,_t,xe,pt,jt,di,Rt,et,tt,Lt){this._overlay=Je,this._injector=_t,this._defaultOptions=xe,this._parentDialog=pt,this._overlayContainer=jt,this._dialogRefConstructor=Rt,this._dialogContainerType=et,this._dialogDataToken=tt,this._animationMode=Lt,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new a.x,this._afterOpenedAtThisLevel=new a.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,d.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,oe.O)(void 0))),this._scrollStrategy=di}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const Je=this._parentDialog;return Je?Je._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(Je,_t){if(_t=function(Be,Tt){return Object.assign(Object.assign({},Tt),Be)}(_t,this._defaultOptions||new $e),_t.id&&this.getDialogById(_t.id),this._dialogAnimatingOpen)return this._lastDialogRef;const xe=this._createOverlay(_t),pt=this._attachDialogContainer(xe,_t);if("NoopAnimations"!==this._animationMode){const di=pt._animationStateChanged.subscribe(Rt=>{"opening"===Rt.state&&(this._dialogAnimatingOpen=!0),"opened"===Rt.state&&(this._dialogAnimatingOpen=!1,di.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new C.w0),this._animationStateSubscriptions.add(di)}const jt=this._attachDialogContent(Je,pt,xe,_t);return this._lastDialogRef=jt,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(jt),jt.afterClosed().subscribe(()=>this._removeOpenDialog(jt)),this.afterOpened.next(jt),pt._initializeWithAttachedContent(),jt}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(Je){return this.openDialogs.find(_t=>_t.id===Je)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(Je){const _t=this._getOverlayConfig(Je);return this._overlay.create(_t)}_getOverlayConfig(Je){const _t=new E.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:Je.scrollStrategy||this._scrollStrategy(),panelClass:Je.panelClass,hasBackdrop:Je.hasBackdrop,direction:Je.direction,minWidth:Je.minWidth,minHeight:Je.minHeight,maxWidth:Je.maxWidth,maxHeight:Je.maxHeight,disposeOnNavigation:Je.closeOnNavigation});return Je.backdropClass&&(_t.backdropClass=Je.backdropClass),_t}_attachDialogContainer(Je,_t){const pt=t.zs3.create({parent:_t&&_t.viewContainerRef&&_t.viewContainerRef.injector||this._injector,providers:[{provide:$e,useValue:_t}]}),jt=new m.C5(this._dialogContainerType,_t.viewContainerRef,pt,_t.componentFactoryResolver);return Je.attach(jt).instance}_attachDialogContent(Je,_t,xe,pt){const jt=new this._dialogRefConstructor(xe,_t,pt.id);if(Je instanceof t.Rgc)_t.attachTemplatePortal(new m.UE(Je,null,{$implicit:pt.data,dialogRef:jt}));else{const di=this._createInjector(pt,jt,_t),Rt=_t.attachComponentPortal(new m.C5(Je,pt.viewContainerRef,di));jt.componentInstance=Rt.instance}return jt.updateSize(pt.width,pt.height).updatePosition(pt.position),jt}_createInjector(Je,_t,xe){const pt=Je&&Je.viewContainerRef&&Je.viewContainerRef.injector,jt=[{provide:this._dialogContainerType,useValue:xe},{provide:this._dialogDataToken,useValue:Je.data},{provide:this._dialogRefConstructor,useValue:_t}];return Je.direction&&(!pt||!pt.get(n.Is,null,t.XFs.Optional))&&jt.push({provide:n.Is,useValue:{value:Je.direction,change:(0,D.of)()}}),t.zs3.create({parent:pt||this._injector,providers:jt})}_removeOpenDialog(Je){const _t=this.openDialogs.indexOf(Je);_t>-1&&(this.openDialogs.splice(_t,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((xe,pt)=>{xe?pt.setAttribute("aria-hidden",xe):pt.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const Je=this._overlayContainer.getContainerElement();if(Je.parentElement){const _t=Je.parentElement.children;for(let xe=_t.length-1;xe>-1;xe--){let pt=_t[xe];pt!==Je&&"SCRIPT"!==pt.nodeName&&"STYLE"!==pt.nodeName&&!pt.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(pt,pt.getAttribute("aria-hidden")),pt.setAttribute("aria-hidden","true"))}}}_closeDialogs(Je){let _t=Je.length;for(;_t--;)Je[_t].close()}}return Be.\u0275fac=function(Je){t.$Z()},Be.\u0275dir=t.lG2({type:Be}),Be})(),vt=(()=>{class Be extends dt{constructor(Je,_t,xe,pt,jt,di,Rt,et){super(Je,_t,pt,di,Rt,jt,He,ge,Ee,et)}}return Be.\u0275fac=function(Je){return new(Je||Be)(t.LFG(E.aV),t.LFG(t.zs3),t.LFG(se.Ye,8),t.LFG(ue,8),t.LFG(ie),t.LFG(Be,12),t.LFG(E.Xj),t.LFG(Le.Qb,8))},Be.\u0275prov=t.Yz7({token:Be,factory:Be.\u0275fac}),Be})(),gi=(()=>{class Be{}return Be.\u0275fac=function(Je){return new(Je||Be)},Be.\u0275mod=t.oAB({type:Be}),Be.\u0275inj=t.cJS({providers:[vt,ke],imports:[[E.U8,m.eL,e.BQ],e.BQ]}),Be})()},4834:(V,Z,g)=>{"use strict";g.d(Z,{d:()=>e,t:()=>n});var E=g(5e3),m=g(63191),t=g(90508);let e=(()=>{class a{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(C){this._vertical=(0,m.Ig)(C)}get inset(){return this._inset}set inset(C){this._inset=(0,m.Ig)(C)}}return a.\u0275fac=function(C){return new(C||a)},a.\u0275cmp=E.Xpm({type:a,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(C,D){2&C&&(E.uIk("aria-orientation",D.vertical?"vertical":"horizontal"),E.ekj("mat-divider-vertical",D.vertical)("mat-divider-horizontal",!D.vertical)("mat-divider-inset",D.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(C,D){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),a})(),n=(()=>{class a{}return a.\u0275fac=function(C){return new(C||a)},a.\u0275mod=E.oAB({type:a}),a.\u0275inj=E.cJS({imports:[[t.BQ],t.BQ]}),a})()},67322:(V,Z,g)=>{"use strict";g.d(Z,{G_:()=>tt,KE:()=>Lt,Eo:()=>lt,lN:()=>nt,hX:()=>gi});var E=g(17144),m=g(69808),t=g(5e3),e=g(90508),n=g(63191),a=g(77579),d=g(56451),C=g(54968),D=g(68675),B=g(82722),z=g(95698),oe=g(41777),be=g(76360),se=g(50226),Ie=g(70925);const Ge=["connectionContainer"],_e=["inputContainer"],Le=["label"];function We(mt,yt){1&mt&&(t.ynx(0),t.TgZ(1,"div",14),t._UZ(2,"div",15),t._UZ(3,"div",16),t._UZ(4,"div",17),t.qZA(),t.TgZ(5,"div",18),t._UZ(6,"div",15),t._UZ(7,"div",16),t._UZ(8,"div",17),t.qZA(),t.BQk())}function $e(mt,yt){if(1&mt){const Ze=t.EpF();t.TgZ(0,"div",19),t.NdJ("cdkObserveContent",function(){return t.CHM(Ze),t.oxw().updateOutlineGap()}),t.Hsn(1,1),t.qZA()}if(2&mt){const Ze=t.oxw();t.Q6J("cdkObserveContentDisabled","outline"!=Ze.appearance)}}function Te(mt,yt){if(1&mt&&(t.ynx(0),t.Hsn(1,2),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.BQk()),2&mt){const Ze=t.oxw(2);t.xp6(3),t.Oqu(Ze._control.placeholder)}}function ye(mt,yt){1&mt&&t.Hsn(0,3,["*ngSwitchCase","true"])}function ne(mt,yt){1&mt&&(t.TgZ(0,"span",23),t._uU(1," *"),t.qZA())}function ge(mt,yt){if(1&mt){const Ze=t.EpF();t.TgZ(0,"label",20,21),t.NdJ("cdkObserveContent",function(){return t.CHM(Ze),t.oxw().updateOutlineGap()}),t.YNc(2,Te,4,1,"ng-container",12),t.YNc(3,ye,1,0,"ng-content",12),t.YNc(4,ne,2,0,"span",22),t.qZA()}if(2&mt){const Ze=t.oxw();t.ekj("mat-empty",Ze._control.empty&&!Ze._shouldAlwaysFloat())("mat-form-field-empty",Ze._control.empty&&!Ze._shouldAlwaysFloat())("mat-accent","accent"==Ze.color)("mat-warn","warn"==Ze.color),t.Q6J("cdkObserveContentDisabled","outline"!=Ze.appearance)("id",Ze._labelId)("ngSwitch",Ze._hasLabel()),t.uIk("for",Ze._control.id)("aria-owns",Ze._control.id),t.xp6(2),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngIf",!Ze.hideRequiredMarker&&Ze._control.required&&!Ze._control.disabled)}}function ae(mt,yt){1&mt&&(t.TgZ(0,"div",24),t.Hsn(1,4),t.qZA())}function He(mt,yt){if(1&mt&&(t.TgZ(0,"div",25),t._UZ(1,"span",26),t.qZA()),2&mt){const Ze=t.oxw();t.xp6(1),t.ekj("mat-accent","accent"==Ze.color)("mat-warn","warn"==Ze.color)}}function Se(mt,yt){if(1&mt&&(t.TgZ(0,"div"),t.Hsn(1,5),t.qZA()),2&mt){const Ze=t.oxw();t.Q6J("@transitionMessages",Ze._subscriptAnimationState)}}function Ee(mt,yt){if(1&mt&&(t.TgZ(0,"div",30),t._uU(1),t.qZA()),2&mt){const Ze=t.oxw(2);t.Q6J("id",Ze._hintLabelId),t.xp6(1),t.Oqu(Ze.hintLabel)}}function ue(mt,yt){if(1&mt&&(t.TgZ(0,"div",27),t.YNc(1,Ee,2,2,"div",28),t.Hsn(2,6),t._UZ(3,"div",29),t.Hsn(4,7),t.qZA()),2&mt){const Ze=t.oxw();t.Q6J("@transitionMessages",Ze._subscriptAnimationState),t.xp6(1),t.Q6J("ngIf",Ze.hintLabel)}}const ie=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],ht=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],ke=new t.OlP("MatError"),vt={transitionMessages:(0,oe.X$)("transitionMessages",[(0,oe.SB)("enter",(0,oe.oB)({opacity:1,transform:"translateY(0%)"})),(0,oe.eR)("void => enter",[(0,oe.oB)({opacity:0,transform:"translateY(-5px)"}),(0,oe.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let lt=(()=>{class mt{}return mt.\u0275fac=function(Ze){return new(Ze||mt)},mt.\u0275dir=t.lG2({type:mt}),mt})();const ii=new t.OlP("MatHint");let gi=(()=>{class mt{}return mt.\u0275fac=function(Ze){return new(Ze||mt)},mt.\u0275dir=t.lG2({type:mt,selectors:[["mat-label"]]}),mt})(),Be=(()=>{class mt{}return mt.\u0275fac=function(Ze){return new(Ze||mt)},mt.\u0275dir=t.lG2({type:mt,selectors:[["mat-placeholder"]]}),mt})();const Tt=new t.OlP("MatPrefix"),_t=new t.OlP("MatSuffix");let pt=0;const Rt=(0,e.pj)(class{constructor(mt){this._elementRef=mt}},"primary"),et=new t.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),tt=new t.OlP("MatFormField");let Lt=(()=>{class mt extends Rt{constructor(Ze,ut,ei,ni,Ni,wi,yi){super(Ze),this._changeDetectorRef=ut,this._dir=ei,this._defaults=ni,this._platform=Ni,this._ngZone=wi,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new a.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+pt++,this._labelId="mat-form-field-label-"+pt++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==yi,this.appearance=ni&&ni.appearance?ni.appearance:"legacy",this._hideRequiredMarker=!(!ni||null==ni.hideRequiredMarker)&&ni.hideRequiredMarker}get appearance(){return this._appearance}set appearance(Ze){const ut=this._appearance;this._appearance=Ze||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&ut!==Ze&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Ze){this._hideRequiredMarker=(0,n.Ig)(Ze)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(Ze){this._hintLabel=Ze,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(Ze){Ze!==this._floatLabel&&(this._floatLabel=Ze||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(Ze){this._explicitFormFieldControl=Ze}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const Ze=this._control;Ze.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${Ze.controlType}`),Ze.stateChanges.pipe((0,D.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Ze.ngControl&&Ze.ngControl.valueChanges&&Ze.ngControl.valueChanges.pipe((0,B.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,B.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,d.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,D.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,D.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,B.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(Ze){const ut=this._control?this._control.ngControl:null;return ut&&ut[Ze]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,C.R)(this._label.nativeElement,"transitionend").pipe((0,z.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let Ze=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Ze.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const ut=this._hintChildren?this._hintChildren.find(ni=>"start"===ni.align):null,ei=this._hintChildren?this._hintChildren.find(ni=>"end"===ni.align):null;ut?Ze.push(ut.id):this._hintLabel&&Ze.push(this._hintLabelId),ei&&Ze.push(ei.id)}else this._errorChildren&&Ze.push(...this._errorChildren.map(ut=>ut.id));this._control.setDescribedByIds(Ze)}}_validateControlChild(){}updateOutlineGap(){const Ze=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&Ze&&Ze.children.length&&Ze.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let ut=0,ei=0;const ni=this._connectionContainerRef.nativeElement,Ni=ni.querySelectorAll(".mat-form-field-outline-start"),wi=ni.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const yi=ni.getBoundingClientRect();if(0===yi.width&&0===yi.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const pn=this._getStartEnd(yi),mi=Ze.children,Ji=this._getStartEnd(mi[0].getBoundingClientRect());let wt=0;for(let Ot=0;Ot<mi.length;Ot++)wt+=mi[Ot].offsetWidth;ut=Math.abs(Ji-pn)-5,ei=wt>0?.75*wt+10:0}for(let yi=0;yi<Ni.length;yi++)Ni[yi].style.width=`${ut}px`;for(let yi=0;yi<wi.length;yi++)wi[yi].style.width=`${ei}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(Ze){return this._dir&&"rtl"===this._dir.value?Ze.right:Ze.left}_isAttachedToDOM(){const Ze=this._elementRef.nativeElement;if(Ze.getRootNode){const ut=Ze.getRootNode();return ut&&ut!==Ze}return document.documentElement.contains(Ze)}}return mt.\u0275fac=function(Ze){return new(Ze||mt)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(se.Is,8),t.Y36(et,8),t.Y36(Ie.t4),t.Y36(t.R0b),t.Y36(be.Qb,8))},mt.\u0275cmp=t.Xpm({type:mt,selectors:[["mat-form-field"]],contentQueries:function(Ze,ut,ei){if(1&Ze&&(t.Suo(ei,lt,5),t.Suo(ei,lt,7),t.Suo(ei,gi,5),t.Suo(ei,gi,7),t.Suo(ei,Be,5),t.Suo(ei,ke,5),t.Suo(ei,ii,5),t.Suo(ei,Tt,5),t.Suo(ei,_t,5)),2&Ze){let ni;t.iGM(ni=t.CRH())&&(ut._controlNonStatic=ni.first),t.iGM(ni=t.CRH())&&(ut._controlStatic=ni.first),t.iGM(ni=t.CRH())&&(ut._labelChildNonStatic=ni.first),t.iGM(ni=t.CRH())&&(ut._labelChildStatic=ni.first),t.iGM(ni=t.CRH())&&(ut._placeholderChild=ni.first),t.iGM(ni=t.CRH())&&(ut._errorChildren=ni),t.iGM(ni=t.CRH())&&(ut._hintChildren=ni),t.iGM(ni=t.CRH())&&(ut._prefixChildren=ni),t.iGM(ni=t.CRH())&&(ut._suffixChildren=ni)}},viewQuery:function(Ze,ut){if(1&Ze&&(t.Gf(Ge,7),t.Gf(_e,5),t.Gf(Le,5)),2&Ze){let ei;t.iGM(ei=t.CRH())&&(ut._connectionContainerRef=ei.first),t.iGM(ei=t.CRH())&&(ut._inputContainerRef=ei.first),t.iGM(ei=t.CRH())&&(ut._label=ei.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(Ze,ut){2&Ze&&t.ekj("mat-form-field-appearance-standard","standard"==ut.appearance)("mat-form-field-appearance-fill","fill"==ut.appearance)("mat-form-field-appearance-outline","outline"==ut.appearance)("mat-form-field-appearance-legacy","legacy"==ut.appearance)("mat-form-field-invalid",ut._control.errorState)("mat-form-field-can-float",ut._canLabelFloat())("mat-form-field-should-float",ut._shouldLabelFloat())("mat-form-field-has-label",ut._hasFloatingLabel())("mat-form-field-hide-placeholder",ut._hideControlPlaceholder())("mat-form-field-disabled",ut._control.disabled)("mat-form-field-autofilled",ut._control.autofilled)("mat-focused",ut._control.focused)("ng-untouched",ut._shouldForward("untouched"))("ng-touched",ut._shouldForward("touched"))("ng-pristine",ut._shouldForward("pristine"))("ng-dirty",ut._shouldForward("dirty"))("ng-valid",ut._shouldForward("valid"))("ng-invalid",ut._shouldForward("invalid"))("ng-pending",ut._shouldForward("pending"))("_mat-animation-noopable",!ut._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[t._Bn([{provide:tt,useExisting:mt}]),t.qOj],ngContentSelectors:ht,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(Ze,ut){1&Ze&&(t.F$t(ie),t.TgZ(0,"div",0),t.TgZ(1,"div",1,2),t.NdJ("click",function(ni){return ut._control.onContainerClick&&ut._control.onContainerClick(ni)}),t.YNc(3,We,9,0,"ng-container",3),t.YNc(4,$e,2,1,"div",4),t.TgZ(5,"div",5,6),t.Hsn(7),t.TgZ(8,"span",7),t.YNc(9,ge,5,16,"label",8),t.qZA(),t.qZA(),t.YNc(10,ae,2,0,"div",9),t.qZA(),t.YNc(11,He,2,4,"div",10),t.TgZ(12,"div",11),t.YNc(13,Se,2,1,"div",12),t.YNc(14,ue,5,2,"div",13),t.qZA(),t.qZA()),2&Ze&&(t.xp6(3),t.Q6J("ngIf","outline"==ut.appearance),t.xp6(1),t.Q6J("ngIf",ut._prefixChildren.length),t.xp6(5),t.Q6J("ngIf",ut._hasFloatingLabel()),t.xp6(1),t.Q6J("ngIf",ut._suffixChildren.length),t.xp6(1),t.Q6J("ngIf","outline"!=ut.appearance),t.xp6(1),t.Q6J("ngSwitch",ut._getDisplayedMessages()),t.xp6(1),t.Q6J("ngSwitchCase","error"),t.xp6(1),t.Q6J("ngSwitchCase","hint"))},directives:[m.O5,m.RF,m.n9,E.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[vt.transitionMessages]},changeDetection:0}),mt})(),nt=(()=>{class mt{}return mt.\u0275fac=function(Ze){return new(Ze||mt)},mt.\u0275mod=t.oAB({type:mt}),mt.\u0275inj=t.cJS({imports:[[m.ez,e.BQ,E.Q8],e.BQ]}),mt})()},43954:(V,Z,g)=>{"use strict";g.d(Z,{Il:()=>ae,N6:()=>He,DX:()=>oe,jo:()=>Ie,$H:()=>be});var E=g(5e3),m=g(90508),t=g(63191),e=g(50226);const n=["*"],a=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],d=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class D{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const ue=Math.max(...this.tracker);return ue>1?this.rowCount+ue-1:this.rowCount}update(ue,ie){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(ue),this.tracker.fill(0,0,this.tracker.length),this.positions=ie.map(ht=>this._trackTile(ht))}_trackTile(ue){const ie=this._findMatchingGap(ue.colspan);return this._markTilePosition(ie,ue),this.columnIndex=ie+ue.colspan,new B(this.rowIndex,ie)}_findMatchingGap(ue){let ie=-1,ht=-1;do{this.columnIndex+ue>this.tracker.length?(this._nextRow(),ie=this.tracker.indexOf(0,this.columnIndex),ht=this._findGapEndIndex(ie)):(ie=this.tracker.indexOf(0,this.columnIndex),-1!=ie?(ht=this._findGapEndIndex(ie),this.columnIndex=ie+1):(this._nextRow(),ie=this.tracker.indexOf(0,this.columnIndex),ht=this._findGapEndIndex(ie)))}while(ht-ie<ue||0==ht);return Math.max(ie,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let ue=0;ue<this.tracker.length;ue++)this.tracker[ue]=Math.max(0,this.tracker[ue]-1)}_findGapEndIndex(ue){for(let ie=ue+1;ie<this.tracker.length;ie++)if(0!=this.tracker[ie])return ie;return this.tracker.length}_markTilePosition(ue,ie){for(let ht=0;ht<ie.colspan;ht++)this.tracker[ue+ht]=ie.rowspan}}class B{constructor(ue,ie){this.row=ue,this.col=ie}}const z=new E.OlP("MAT_GRID_LIST");let oe=(()=>{class Ee{constructor(ie,ht){this._element=ie,this._gridList=ht,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(ie){this._rowspan=Math.round((0,t.su)(ie))}get colspan(){return this._colspan}set colspan(ie){this._colspan=Math.round((0,t.su)(ie))}_setStyle(ie,ht){this._element.nativeElement.style[ie]=ht}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(E.Y36(E.SBq),E.Y36(z,8))},Ee.\u0275cmp=E.Xpm({type:Ee,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(ie,ht){2&ie&&E.uIk("rowspan",ht.rowspan)("colspan",ht.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(ie,ht){1&ie&&(E.F$t(),E.TgZ(0,"div",0),E.Hsn(1),E.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Ee})(),be=(()=>{class Ee{constructor(ie){this._element=ie}ngAfterContentInit(){(0,m.E0)(this._lines,this._element)}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(E.Y36(E.SBq))},Ee.\u0275cmp=E.Xpm({type:Ee,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(ie,ht,Oe){if(1&ie&&E.Suo(Oe,m.X2,5),2&ie){let ke;E.iGM(ke=E.CRH())&&(ht._lines=ke)}},ngContentSelectors:d,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(ie,ht){1&ie&&(E.F$t(a),E.Hsn(0),E.TgZ(1,"div",0),E.Hsn(2,1),E.qZA(),E.Hsn(3,2))},encapsulation:2,changeDetection:0}),Ee})(),Ie=(()=>{class Ee{}return Ee.\u0275fac=function(ie){return new(ie||Ee)},Ee.\u0275dir=E.lG2({type:Ee,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),Ee})();const _e=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class Le{constructor(){this._rows=0,this._rowspan=0}init(ue,ie,ht,Oe){this._gutterSize=ne(ue),this._rows=ie.rowCount,this._rowspan=ie.rowspan,this._cols=ht,this._direction=Oe}getBaseTileSize(ue,ie){return`(${ue}% - (${this._gutterSize} * ${ie}))`}getTilePosition(ue,ie){return 0===ie?"0":ye(`(${ue} + ${this._gutterSize}) * ${ie}`)}getTileSize(ue,ie){return`(${ue} * ${ie}) + (${ie-1} * ${this._gutterSize})`}setStyle(ue,ie,ht){let Oe=100/this._cols,ke=(this._cols-1)/this._cols;this.setColStyles(ue,ht,Oe,ke),this.setRowStyles(ue,ie,Oe,ke)}setColStyles(ue,ie,ht,Oe){let ke=this.getBaseTileSize(ht,Oe);ue._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(ke,ie)),ue._setStyle("width",ye(this.getTileSize(ke,ue.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(ue){return`${this._rowspan} * ${this.getTileSize(ue,1)}`}getComputedHeight(){return null}}class We extends Le{constructor(ue){super(),this.fixedRowHeight=ue}init(ue,ie,ht,Oe){super.init(ue,ie,ht,Oe),this.fixedRowHeight=ne(this.fixedRowHeight),_e.test(this.fixedRowHeight)}setRowStyles(ue,ie){ue._setStyle("top",this.getTilePosition(this.fixedRowHeight,ie)),ue._setStyle("height",ye(this.getTileSize(this.fixedRowHeight,ue.rowspan)))}getComputedHeight(){return["height",ye(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(ue){ue._setListStyle(["height",null]),ue._tiles&&ue._tiles.forEach(ie=>{ie._setStyle("top",null),ie._setStyle("height",null)})}}class $e extends Le{constructor(ue){super(),this._parseRatio(ue)}setRowStyles(ue,ie,ht,Oe){this.baseTileHeight=this.getBaseTileSize(ht/this.rowHeightRatio,Oe),ue._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,ie)),ue._setStyle("paddingTop",ye(this.getTileSize(this.baseTileHeight,ue.rowspan)))}getComputedHeight(){return["paddingBottom",ye(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(ue){ue._setListStyle(["paddingBottom",null]),ue._tiles.forEach(ie=>{ie._setStyle("marginTop",null),ie._setStyle("paddingTop",null)})}_parseRatio(ue){const ie=ue.split(":");this.rowHeightRatio=parseFloat(ie[0])/parseFloat(ie[1])}}class Te extends Le{setRowStyles(ue,ie){let ke=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);ue._setStyle("top",this.getTilePosition(ke,ie)),ue._setStyle("height",ye(this.getTileSize(ke,ue.rowspan)))}reset(ue){ue._tiles&&ue._tiles.forEach(ie=>{ie._setStyle("top",null),ie._setStyle("height",null)})}}function ye(Ee){return`calc(${Ee})`}function ne(Ee){return Ee.match(/([A-Za-z%]+)$/)?Ee:`${Ee}px`}let ae=(()=>{class Ee{constructor(ie,ht){this._element=ie,this._dir=ht,this._gutter="1px"}get cols(){return this._cols}set cols(ie){this._cols=Math.max(1,Math.round((0,t.su)(ie)))}get gutterSize(){return this._gutter}set gutterSize(ie){this._gutter=`${null==ie?"":ie}`}get rowHeight(){return this._rowHeight}set rowHeight(ie){const ht=`${null==ie?"":ie}`;ht!==this._rowHeight&&(this._rowHeight=ht,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(ie){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===ie?new Te:ie&&ie.indexOf(":")>-1?new $e(ie):new We(ie)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new D);const ie=this._tileCoordinator,ht=this._tiles.filter(ke=>!ke._gridList||ke._gridList===this),Oe=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,ht),this._tileStyler.init(this.gutterSize,ie,this.cols,Oe),ht.forEach((ke,dt)=>{const vt=ie.positions[dt];this._tileStyler.setStyle(ke,vt.row,vt.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(ie){ie&&(this._element.nativeElement.style[ie[0]]=ie[1])}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(E.Y36(E.SBq),E.Y36(e.Is,8))},Ee.\u0275cmp=E.Xpm({type:Ee,selectors:[["mat-grid-list"]],contentQueries:function(ie,ht,Oe){if(1&ie&&E.Suo(Oe,oe,5),2&ie){let ke;E.iGM(ke=E.CRH())&&(ht._tiles=ke)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(ie,ht){2&ie&&E.uIk("cols",ht.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[E._Bn([{provide:z,useExisting:Ee}])],ngContentSelectors:n,decls:2,vars:0,template:function(ie,ht){1&ie&&(E.F$t(),E.TgZ(0,"div"),E.Hsn(1),E.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Ee})(),He=(()=>{class Ee{}return Ee.\u0275fac=function(ie){return new(ie||Ee)},Ee.\u0275mod=E.oAB({type:Ee}),Ee.\u0275inj=E.cJS({imports:[[m.uc,m.BQ],m.uc,m.BQ]}),Ee})()},63874:(V,Z,g)=>{"use strict";g.d(Z,{Hw:()=>Di,Ps:()=>ii});var E=g(5e3),m=g(90508),t=g(63191),e=g(69808),n=g(68306),a=g(30576),C=g(39646),D=g(4128),B=g(50727),z=g(18505),oe=g(54004),be=g(70262),se=g(28746),Ie=g(13099),Ge=g(95698),_e=g(40520),Le=g(22313);const We=["*"];let $e;function ye(Ct){var gi;return(null===(gi=function(){if(void 0===$e&&($e=null,"undefined"!=typeof window)){const Ct=window;void 0!==Ct.trustedTypes&&($e=Ct.trustedTypes.createPolicy("angular#components",{createHTML:gi=>gi}))}return $e}())||void 0===gi?void 0:gi.createHTML(Ct))||Ct}function ne(Ct){return Error(`Unable to find icon with the name "${Ct}"`)}function ae(Ct){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Ct}".`)}function He(Ct){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Ct}".`)}class Se{constructor(gi,Be,Tt){this.url=gi,this.svgText=Be,this.options=Tt}}let Ee=(()=>{class Ct{constructor(Be,Tt,Je,_t){this._httpClient=Be,this._sanitizer=Tt,this._errorHandler=_t,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Je}addSvgIcon(Be,Tt,Je){return this.addSvgIconInNamespace("",Be,Tt,Je)}addSvgIconLiteral(Be,Tt,Je){return this.addSvgIconLiteralInNamespace("",Be,Tt,Je)}addSvgIconInNamespace(Be,Tt,Je,_t){return this._addSvgIconConfig(Be,Tt,new Se(Je,null,_t))}addSvgIconResolver(Be){return this._resolvers.push(Be),this}addSvgIconLiteralInNamespace(Be,Tt,Je,_t){const xe=this._sanitizer.sanitize(E.q3G.HTML,Je);if(!xe)throw He(Je);const pt=ye(xe);return this._addSvgIconConfig(Be,Tt,new Se("",pt,_t))}addSvgIconSet(Be,Tt){return this.addSvgIconSetInNamespace("",Be,Tt)}addSvgIconSetLiteral(Be,Tt){return this.addSvgIconSetLiteralInNamespace("",Be,Tt)}addSvgIconSetInNamespace(Be,Tt,Je){return this._addSvgIconSetConfig(Be,new Se(Tt,null,Je))}addSvgIconSetLiteralInNamespace(Be,Tt,Je){const _t=this._sanitizer.sanitize(E.q3G.HTML,Tt);if(!_t)throw He(Tt);const xe=ye(_t);return this._addSvgIconSetConfig(Be,new Se("",xe,Je))}registerFontClassAlias(Be,Tt=Be){return this._fontCssClassesByAlias.set(Be,Tt),this}classNameForFontAlias(Be){return this._fontCssClassesByAlias.get(Be)||Be}setDefaultFontSetClass(Be){return this._defaultFontSetClass=Be,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Be){const Tt=this._sanitizer.sanitize(E.q3G.RESOURCE_URL,Be);if(!Tt)throw ae(Be);const Je=this._cachedIconsByUrl.get(Tt);return Je?(0,C.of)(ht(Je)):this._loadSvgIconFromConfig(new Se(Be,null)).pipe((0,z.b)(_t=>this._cachedIconsByUrl.set(Tt,_t)),(0,oe.U)(_t=>ht(_t)))}getNamedSvgIcon(Be,Tt=""){const Je=Oe(Tt,Be);let _t=this._svgIconConfigs.get(Je);if(_t)return this._getSvgFromConfig(_t);if(_t=this._getIconConfigFromResolvers(Tt,Be),_t)return this._svgIconConfigs.set(Je,_t),this._getSvgFromConfig(_t);const xe=this._iconSetConfigs.get(Tt);return xe?this._getSvgFromIconSetConfigs(Be,xe):function(Ct,gi){const Be=(0,a.m)(Ct)?Ct:()=>Ct,Tt=Je=>Je.error(Be());return new n.y(Tt)}(ne(Je))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Be){return Be.svgText?(0,C.of)(ht(this._svgElementFromConfig(Be))):this._loadSvgIconFromConfig(Be).pipe((0,oe.U)(Tt=>ht(Tt)))}_getSvgFromIconSetConfigs(Be,Tt){const Je=this._extractIconWithNameFromAnySet(Be,Tt);if(Je)return(0,C.of)(Je);const _t=Tt.filter(xe=>!xe.svgText).map(xe=>this._loadSvgIconSetFromConfig(xe).pipe((0,be.K)(pt=>{const di=`Loading icon set URL: ${this._sanitizer.sanitize(E.q3G.RESOURCE_URL,xe.url)} failed: ${pt.message}`;return this._errorHandler.handleError(new Error(di)),(0,C.of)(null)})));return(0,D.D)(_t).pipe((0,oe.U)(()=>{const xe=this._extractIconWithNameFromAnySet(Be,Tt);if(!xe)throw ne(Be);return xe}))}_extractIconWithNameFromAnySet(Be,Tt){for(let Je=Tt.length-1;Je>=0;Je--){const _t=Tt[Je];if(_t.svgText&&_t.svgText.toString().indexOf(Be)>-1){const xe=this._svgElementFromConfig(_t),pt=this._extractSvgIconFromSet(xe,Be,_t.options);if(pt)return pt}}return null}_loadSvgIconFromConfig(Be){return this._fetchIcon(Be).pipe((0,z.b)(Tt=>Be.svgText=Tt),(0,oe.U)(()=>this._svgElementFromConfig(Be)))}_loadSvgIconSetFromConfig(Be){return Be.svgText?(0,C.of)(null):this._fetchIcon(Be).pipe((0,z.b)(Tt=>Be.svgText=Tt))}_extractSvgIconFromSet(Be,Tt,Je){const _t=Be.querySelector(`[id="${Tt}"]`);if(!_t)return null;const xe=_t.cloneNode(!0);if(xe.removeAttribute("id"),"svg"===xe.nodeName.toLowerCase())return this._setSvgAttributes(xe,Je);if("symbol"===xe.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(xe),Je);const pt=this._svgElementFromString(ye("<svg></svg>"));return pt.appendChild(xe),this._setSvgAttributes(pt,Je)}_svgElementFromString(Be){const Tt=this._document.createElement("DIV");Tt.innerHTML=Be;const Je=Tt.querySelector("svg");if(!Je)throw Error("<svg> tag not found");return Je}_toSvgElement(Be){const Tt=this._svgElementFromString(ye("<svg></svg>")),Je=Be.attributes;for(let _t=0;_t<Je.length;_t++){const{name:xe,value:pt}=Je[_t];"id"!==xe&&Tt.setAttribute(xe,pt)}for(let _t=0;_t<Be.childNodes.length;_t++)Be.childNodes[_t].nodeType===this._document.ELEMENT_NODE&&Tt.appendChild(Be.childNodes[_t].cloneNode(!0));return Tt}_setSvgAttributes(Be,Tt){return Be.setAttribute("fit",""),Be.setAttribute("height","100%"),Be.setAttribute("width","100%"),Be.setAttribute("preserveAspectRatio","xMidYMid meet"),Be.setAttribute("focusable","false"),Tt&&Tt.viewBox&&Be.setAttribute("viewBox",Tt.viewBox),Be}_fetchIcon(Be){var Tt;const{url:Je,options:_t}=Be,xe=null!==(Tt=null==_t?void 0:_t.withCredentials)&&void 0!==Tt&&Tt;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==Je)throw Error(`Cannot fetch icon from URL "${Je}".`);const pt=this._sanitizer.sanitize(E.q3G.RESOURCE_URL,Je);if(!pt)throw ae(Je);const jt=this._inProgressUrlFetches.get(pt);if(jt)return jt;const di=this._httpClient.get(pt,{responseType:"text",withCredentials:xe}).pipe((0,oe.U)(Rt=>ye(Rt)),(0,se.x)(()=>this._inProgressUrlFetches.delete(pt)),(0,Ie.B)());return this._inProgressUrlFetches.set(pt,di),di}_addSvgIconConfig(Be,Tt,Je){return this._svgIconConfigs.set(Oe(Be,Tt),Je),this}_addSvgIconSetConfig(Be,Tt){const Je=this._iconSetConfigs.get(Be);return Je?Je.push(Tt):this._iconSetConfigs.set(Be,[Tt]),this}_svgElementFromConfig(Be){if(!Be.svgElement){const Tt=this._svgElementFromString(Be.svgText);this._setSvgAttributes(Tt,Be.options),Be.svgElement=Tt}return Be.svgElement}_getIconConfigFromResolvers(Be,Tt){for(let Je=0;Je<this._resolvers.length;Je++){const _t=this._resolvers[Je](Tt,Be);if(_t)return ke(_t)?new Se(_t.url,null,_t.options):new Se(_t,null)}}}return Ct.\u0275fac=function(Be){return new(Be||Ct)(E.LFG(_e.eN,8),E.LFG(Le.H7),E.LFG(e.K0,8),E.LFG(E.qLn))},Ct.\u0275prov=E.Yz7({token:Ct,factory:Ct.\u0275fac,providedIn:"root"}),Ct})();function ht(Ct){return Ct.cloneNode(!0)}function Oe(Ct,gi){return Ct+":"+gi}function ke(Ct){return!(!Ct.url||!Ct.options)}const dt=(0,m.pj)(class{constructor(Ct){this._elementRef=Ct}}),vt=new E.OlP("mat-icon-location",{providedIn:"root",factory:function(){const Ct=(0,E.f3M)(e.K0),gi=Ct?Ct.location:null;return{getPathname:()=>gi?gi.pathname+gi.search:""}}}),Bt=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Pt=Bt.map(Ct=>`[${Ct}]`).join(", "),Zt=/^url\(['"]?#(.*?)['"]?\)$/;let Di=(()=>{class Ct extends dt{constructor(Be,Tt,Je,_t,xe){super(Be),this._iconRegistry=Tt,this._location=_t,this._errorHandler=xe,this._inline=!1,this._currentIconFetch=B.w0.EMPTY,Je||Be.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(Be){this._inline=(0,t.Ig)(Be)}get svgIcon(){return this._svgIcon}set svgIcon(Be){Be!==this._svgIcon&&(Be?this._updateSvgIcon(Be):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Be)}get fontSet(){return this._fontSet}set fontSet(Be){const Tt=this._cleanupFontValue(Be);Tt!==this._fontSet&&(this._fontSet=Tt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Be){const Tt=this._cleanupFontValue(Be);Tt!==this._fontIcon&&(this._fontIcon=Tt,this._updateFontIconClasses())}_splitIconName(Be){if(!Be)return["",""];const Tt=Be.split(":");switch(Tt.length){case 1:return["",Tt[0]];case 2:return Tt;default:throw Error(`Invalid icon name: "${Be}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Be=this._elementsWithExternalReferences;if(Be&&Be.size){const Tt=this._location.getPathname();Tt!==this._previousPath&&(this._previousPath=Tt,this._prependPathToReferences(Tt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Be){this._clearSvgElement();const Tt=Be.querySelectorAll("style");for(let _t=0;_t<Tt.length;_t++)Tt[_t].textContent+=" ";const Je=this._location.getPathname();this._previousPath=Je,this._cacheChildrenWithExternalReferences(Be),this._prependPathToReferences(Je),this._elementRef.nativeElement.appendChild(Be)}_clearSvgElement(){const Be=this._elementRef.nativeElement;let Tt=Be.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Tt--;){const Je=Be.childNodes[Tt];(1!==Je.nodeType||"svg"===Je.nodeName.toLowerCase())&&Je.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Be=this._elementRef.nativeElement,Tt=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Tt!=this._previousFontSetClass&&(this._previousFontSetClass&&Be.classList.remove(this._previousFontSetClass),Tt&&Be.classList.add(Tt),this._previousFontSetClass=Tt),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&Be.classList.remove(this._previousFontIconClass),this.fontIcon&&Be.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Be){return"string"==typeof Be?Be.trim().split(" ")[0]:Be}_prependPathToReferences(Be){const Tt=this._elementsWithExternalReferences;Tt&&Tt.forEach((Je,_t)=>{Je.forEach(xe=>{_t.setAttribute(xe.name,`url('${Be}#${xe.value}')`)})})}_cacheChildrenWithExternalReferences(Be){const Tt=Be.querySelectorAll(Pt),Je=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let _t=0;_t<Tt.length;_t++)Bt.forEach(xe=>{const pt=Tt[_t],jt=pt.getAttribute(xe),di=jt?jt.match(Zt):null;if(di){let Rt=Je.get(pt);Rt||(Rt=[],Je.set(pt,Rt)),Rt.push({name:xe,value:di[1]})}})}_updateSvgIcon(Be){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Be){const[Tt,Je]=this._splitIconName(Be);Tt&&(this._svgNamespace=Tt),Je&&(this._svgName=Je),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Je,Tt).pipe((0,Ge.q)(1)).subscribe(_t=>this._setSvgElement(_t),_t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Tt}:${Je}! ${_t.message}`))})}}}return Ct.\u0275fac=function(Be){return new(Be||Ct)(E.Y36(E.SBq),E.Y36(Ee),E.$8M("aria-hidden"),E.Y36(vt),E.Y36(E.qLn))},Ct.\u0275cmp=E.Xpm({type:Ct,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(Be,Tt){2&Be&&(E.uIk("data-mat-icon-type",Tt._usingFontIcon()?"font":"svg")("data-mat-icon-name",Tt._svgName||Tt.fontIcon)("data-mat-icon-namespace",Tt._svgNamespace||Tt.fontSet),E.ekj("mat-icon-inline",Tt.inline)("mat-icon-no-color","primary"!==Tt.color&&"accent"!==Tt.color&&"warn"!==Tt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[E.qOj],ngContentSelectors:We,decls:1,vars:0,template:function(Be,Tt){1&Be&&(E.F$t(),E.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Ct})(),ii=(()=>{class Ct{}return Ct.\u0275fac=function(Be){return new(Be||Ct)},Ct.\u0275mod=E.oAB({type:Ct}),Ct.\u0275inj=E.cJS({imports:[[m.BQ],m.BQ]}),Ct})()},77531:(V,Z,g)=>{"use strict";g.d(Z,{Jk:()=>Ie,Nt:()=>We,c:()=>$e});var E=g(63191),m=g(70925),t=g(5e3),e=g(93075),n=g(90508),a=g(67322),d=g(77579),C=g(60515);const D=(0,m.i$)({passive:!0});let B=(()=>{class Te{constructor(ne,ge){this._platform=ne,this._ngZone=ge,this._monitoredElements=new Map}monitor(ne){if(!this._platform.isBrowser)return C.E;const ge=(0,E.fI)(ne),ae=this._monitoredElements.get(ge);if(ae)return ae.subject;const He=new d.x,Se="cdk-text-field-autofilled",Ee=ue=>{"cdk-text-field-autofill-start"!==ue.animationName||ge.classList.contains(Se)?"cdk-text-field-autofill-end"===ue.animationName&&ge.classList.contains(Se)&&(ge.classList.remove(Se),this._ngZone.run(()=>He.next({target:ue.target,isAutofilled:!1}))):(ge.classList.add(Se),this._ngZone.run(()=>He.next({target:ue.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{ge.addEventListener("animationstart",Ee,D),ge.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(ge,{subject:He,unlisten:()=>{ge.removeEventListener("animationstart",Ee,D)}}),He}stopMonitoring(ne){const ge=(0,E.fI)(ne),ae=this._monitoredElements.get(ge);ae&&(ae.unlisten(),ae.subject.complete(),ge.classList.remove("cdk-text-field-autofill-monitored"),ge.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(ge))}ngOnDestroy(){this._monitoredElements.forEach((ne,ge)=>this.stopMonitoring(ge))}}return Te.\u0275fac=function(ne){return new(ne||Te)(t.LFG(m.t4),t.LFG(t.R0b))},Te.\u0275prov=t.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),be=(()=>{class Te{}return Te.\u0275fac=function(ne){return new(ne||Te)},Te.\u0275mod=t.oAB({type:Te}),Te.\u0275inj=t.cJS({imports:[[m.ud]]}),Te})();const Ie=new t.OlP("MAT_INPUT_VALUE_ACCESSOR"),Ge=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let _e=0;const Le=(0,n.FD)(class{constructor(Te,ye,ne,ge){this._defaultErrorStateMatcher=Te,this._parentForm=ye,this._parentFormGroup=ne,this.ngControl=ge}});let We=(()=>{class Te extends Le{constructor(ne,ge,ae,He,Se,Ee,ue,ie,ht,Oe){super(Ee,He,Se,ae),this._elementRef=ne,this._platform=ge,this._autofillMonitor=ie,this._formField=Oe,this._uid="mat-input-"+_e++,this.focused=!1,this.stateChanges=new d.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(vt=>(0,m.qK)().has(vt));const ke=this._elementRef.nativeElement,dt=ke.nodeName.toLowerCase();this._inputValueAccessor=ue||ke,this._previousNativeValue=this.value,this.id=this.id,ge.IOS&&ht.runOutsideAngular(()=>{ne.nativeElement.addEventListener("keyup",vt=>{const lt=vt.target;!lt.value&&0===lt.selectionStart&&0===lt.selectionEnd&&(lt.setSelectionRange(1,1),lt.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===dt,this._isTextarea="textarea"===dt,this._isInFormField=!!Oe,this._isNativeSelect&&(this.controlType=ke.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(ne){this._disabled=(0,E.Ig)(ne),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(ne){this._id=ne||this._uid}get required(){var ne,ge,ae,He;return null!==(He=null!==(ne=this._required)&&void 0!==ne?ne:null===(ae=null===(ge=this.ngControl)||void 0===ge?void 0:ge.control)||void 0===ae?void 0:ae.hasValidator(e.kI.required))&&void 0!==He&&He}set required(ne){this._required=(0,E.Ig)(ne)}get type(){return this._type}set type(ne){this._type=ne||"text",this._validateType(),!this._isTextarea&&(0,m.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(ne){ne!==this.value&&(this._inputValueAccessor.value=ne,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(ne){this._readonly=(0,E.Ig)(ne)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(ne=>{this.autofilled=ne.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(ne){this._elementRef.nativeElement.focus(ne)}_focusChanged(ne){ne!==this.focused&&(this.focused=ne,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var ne,ge;const ae=(null===(ge=null===(ne=this._formField)||void 0===ne?void 0:ne._hideControlPlaceholder)||void 0===ge?void 0:ge.call(ne))?null:this.placeholder;if(ae!==this._previousPlaceholder){const He=this._elementRef.nativeElement;this._previousPlaceholder=ae,ae?He.setAttribute("placeholder",ae):He.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const ne=this._elementRef.nativeElement.value;this._previousNativeValue!==ne&&(this._previousNativeValue=ne,this.stateChanges.next())}_validateType(){Ge.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let ne=this._elementRef.nativeElement.validity;return ne&&ne.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const ne=this._elementRef.nativeElement,ge=ne.options[0];return this.focused||ne.multiple||!this.empty||!!(ne.selectedIndex>-1&&ge&&ge.label)}return this.focused||!this.empty}setDescribedByIds(ne){ne.length?this._elementRef.nativeElement.setAttribute("aria-describedby",ne.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const ne=this._elementRef.nativeElement;return this._isNativeSelect&&(ne.multiple||ne.size>1)}}return Te.\u0275fac=function(ne){return new(ne||Te)(t.Y36(t.SBq),t.Y36(m.t4),t.Y36(e.a5,10),t.Y36(e.F,8),t.Y36(e.sg,8),t.Y36(n.rD),t.Y36(Ie,10),t.Y36(B),t.Y36(t.R0b),t.Y36(a.G_,8))},Te.\u0275dir=t.lG2({type:Te,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(ne,ge){1&ne&&t.NdJ("focus",function(){return ge._focusChanged(!0)})("blur",function(){return ge._focusChanged(!1)})("input",function(){return ge._onInput()}),2&ne&&(t.Ikx("disabled",ge.disabled)("required",ge.required),t.uIk("id",ge.id)("data-placeholder",ge.placeholder)("readonly",ge.readonly&&!ge._isNativeSelect||null)("aria-invalid",ge.empty&&ge.required?null:ge.errorState)("aria-required",ge.required),t.ekj("mat-input-server",ge._isServer)("mat-native-select-inline",ge._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[t._Bn([{provide:a.Eo,useExisting:Te}]),t.qOj,t.TTD]}),Te})(),$e=(()=>{class Te{}return Te.\u0275fac=function(ne){return new(ne||Te)},Te.\u0275mod=t.oAB({type:Te}),Te.\u0275inj=t.cJS({providers:[n.rD],imports:[[be,a.lN,n.BQ],be,a.lN]}),Te})()},92181:(V,Z,g)=>{"use strict";g.d(Z,{VK:()=>Tt,Tx:()=>et,p6:()=>Rt});var E=g(15664),m=g(63191),t=g(91159),e=g(5e3),n=g(77579),a=g(50727),d=g(56451),C=g(39646),D=g(53101),B=g(68675),z=g(63900),oe=g(95698),be=g(39300),se=g(82722),Ie=g(91005),Ge=g(41777),_e=g(47429),Le=g(69808),We=g(90508),$e=g(91314),Te=g(70925),ye=g(50226),ne=g(30495);const ge=["mat-menu-item",""];function ae(tt,Lt){1&tt&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"polygon",3),e.qZA())}const He=["*"];function Se(tt,Lt){if(1&tt){const nt=e.EpF();e.TgZ(0,"div",0),e.NdJ("keydown",function(yt){return e.CHM(nt),e.oxw()._handleKeydown(yt)})("click",function(){return e.CHM(nt),e.oxw().closed.emit("click")})("@transformMenu.start",function(yt){return e.CHM(nt),e.oxw()._onAnimationStart(yt)})("@transformMenu.done",function(yt){return e.CHM(nt),e.oxw()._onAnimationDone(yt)}),e.TgZ(1,"div",1),e.Hsn(2),e.qZA(),e.qZA()}if(2&tt){const nt=e.oxw();e.Q6J("id",nt.panelId)("ngClass",nt._classList)("@transformMenu",nt._panelAnimationState),e.uIk("aria-label",nt.ariaLabel||null)("aria-labelledby",nt.ariaLabelledby||null)("aria-describedby",nt.ariaDescribedby||null)}}const Ee={transformMenu:(0,Ge.X$)("transformMenu",[(0,Ge.SB)("void",(0,Ge.oB)({opacity:0,transform:"scale(0.8)"})),(0,Ge.eR)("void => enter",(0,Ge.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Ge.oB)({opacity:1,transform:"scale(1)"}))),(0,Ge.eR)("* => void",(0,Ge.jt)("100ms 25ms linear",(0,Ge.oB)({opacity:0})))]),fadeInItems:(0,Ge.X$)("fadeInItems",[(0,Ge.SB)("showing",(0,Ge.oB)({opacity:1})),(0,Ge.eR)("void => *",[(0,Ge.oB)({opacity:0}),(0,Ge.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},ht=new e.OlP("MatMenuContent"),Pt=new e.OlP("MAT_MENU_PANEL"),Zt=(0,We.Kr)((0,We.Id)(class{}));let Di=(()=>{class tt extends Zt{constructor(nt,mt,yt,Ze,ut){super(),this._elementRef=nt,this._focusMonitor=yt,this._parentMenu=Ze,this._changeDetectorRef=ut,this.role="menuitem",this._hovered=new n.x,this._focused=new n.x,this._highlighted=!1,this._triggersSubmenu=!1,Ze&&Ze.addItem&&Ze.addItem(this)}focus(nt,mt){this._focusMonitor&&nt?this._focusMonitor.focusVia(this._getHostElement(),nt,mt):this._getHostElement().focus(mt),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(nt){this.disabled&&(nt.preventDefault(),nt.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var nt;const mt=this._elementRef.nativeElement.cloneNode(!0),yt=mt.querySelectorAll("mat-icon, .material-icons");for(let Ze=0;Ze<yt.length;Ze++)yt[Ze].remove();return(null===(nt=mt.textContent)||void 0===nt?void 0:nt.trim())||""}_setHighlighted(nt){var mt;this._highlighted=nt,null===(mt=this._changeDetectorRef)||void 0===mt||mt.markForCheck()}}return tt.\u0275fac=function(nt){return new(nt||tt)(e.Y36(e.SBq),e.Y36(Le.K0),e.Y36(E.tE),e.Y36(Pt,8),e.Y36(e.sBO))},tt.\u0275cmp=e.Xpm({type:tt,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(nt,mt){1&nt&&e.NdJ("click",function(Ze){return mt._checkDisabled(Ze)})("mouseenter",function(){return mt._handleMouseEnter()}),2&nt&&(e.uIk("role",mt.role)("tabindex",mt._getTabIndex())("aria-disabled",mt.disabled.toString())("disabled",mt.disabled||null),e.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",mt._highlighted)("mat-menu-item-submenu-trigger",mt._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[e.qOj],attrs:ge,ngContentSelectors:He,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(nt,mt){1&nt&&(e.F$t(),e.Hsn(0),e._UZ(1,"div",0),e.YNc(2,ae,2,0,"svg",1)),2&nt&&(e.xp6(1),e.Q6J("matRippleDisabled",mt.disableRipple||mt.disabled)("matRippleTrigger",mt._getHostElement()),e.xp6(1),e.Q6J("ngIf",mt._triggersSubmenu))},directives:[We.wG,Le.O5],encapsulation:2,changeDetection:0}),tt})();const ii=new e.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let gi=0,Be=(()=>{class tt{constructor(nt,mt,yt){this._elementRef=nt,this._ngZone=mt,this._defaultOptions=yt,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new e.n_E,this._tabSubscription=a.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new e.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+gi++}get xPosition(){return this._xPosition}set xPosition(nt){this._xPosition=nt,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(nt){this._yPosition=nt,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(nt){this._overlapTrigger=(0,m.Ig)(nt)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(nt){this._hasBackdrop=(0,m.Ig)(nt)}set panelClass(nt){const mt=this._previousPanelClass;mt&&mt.length&&mt.split(" ").forEach(yt=>{this._classList[yt]=!1}),this._previousPanelClass=nt,nt&&nt.length&&(nt.split(" ").forEach(yt=>{this._classList[yt]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(nt){this.panelClass=nt}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new E.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,B.O)(this._directDescendantItems),(0,z.w)(nt=>(0,d.T)(...nt.map(mt=>mt._focused)))).subscribe(nt=>this._keyManager.updateActiveItem(nt))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,B.O)(this._directDescendantItems),(0,z.w)(mt=>(0,d.T)(...mt.map(yt=>yt._hovered))))}addItem(nt){}removeItem(nt){}_handleKeydown(nt){const mt=nt.keyCode,yt=this._keyManager;switch(mt){case t.hY:(0,t.Vb)(nt)||(nt.preventDefault(),this.closed.emit("keydown"));break;case t.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case t.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(mt===t.LH||mt===t.JH)&&yt.setFocusOrigin("keyboard"),yt.onKeydown(nt)}}focusFirstItem(nt="program"){this.lazyContent?this._ngZone.onStable.pipe((0,oe.q)(1)).subscribe(()=>this._focusFirstItem(nt)):this._focusFirstItem(nt)}_focusFirstItem(nt){const mt=this._keyManager;if(mt.setFocusOrigin(nt).setFirstItemActive(),!mt.activeItem&&this._directDescendantItems.length){let yt=this._directDescendantItems.first._getHostElement().parentElement;for(;yt;){if("menu"===yt.getAttribute("role")){yt.focus();break}yt=yt.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(nt){const mt=Math.min(this._baseElevation+nt,24),yt=`${this._elevationPrefix}${mt}`,Ze=Object.keys(this._classList).find(ut=>ut.startsWith(this._elevationPrefix));(!Ze||Ze===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[yt]=!0,this._previousElevation=yt)}setPositionClasses(nt=this.xPosition,mt=this.yPosition){const yt=this._classList;yt["mat-menu-before"]="before"===nt,yt["mat-menu-after"]="after"===nt,yt["mat-menu-above"]="above"===mt,yt["mat-menu-below"]="below"===mt}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(nt){this._animationDone.next(nt),this._isAnimating=!1}_onAnimationStart(nt){this._isAnimating=!0,"enter"===nt.toState&&0===this._keyManager.activeItemIndex&&(nt.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,B.O)(this._allItems)).subscribe(nt=>{this._directDescendantItems.reset(nt.filter(mt=>mt._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return tt.\u0275fac=function(nt){return new(nt||tt)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(ii))},tt.\u0275dir=e.lG2({type:tt,contentQueries:function(nt,mt,yt){if(1&nt&&(e.Suo(yt,ht,5),e.Suo(yt,Di,5),e.Suo(yt,Di,4)),2&nt){let Ze;e.iGM(Ze=e.CRH())&&(mt.lazyContent=Ze.first),e.iGM(Ze=e.CRH())&&(mt._allItems=Ze),e.iGM(Ze=e.CRH())&&(mt.items=Ze)}},viewQuery:function(nt,mt){if(1&nt&&e.Gf(e.Rgc,5),2&nt){let yt;e.iGM(yt=e.CRH())&&(mt.templateRef=yt.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),tt})(),Tt=(()=>{class tt extends Be{constructor(nt,mt,yt){super(nt,mt,yt),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return tt.\u0275fac=function(nt){return new(nt||tt)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(ii))},tt.\u0275cmp=e.Xpm({type:tt,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(nt,mt){2&nt&&e.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[e._Bn([{provide:Pt,useExisting:tt}]),e.qOj],ngContentSelectors:He,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(nt,mt){1&nt&&(e.F$t(),e.YNc(0,Se,3,6,"ng-template"))},directives:[Le.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[Ee.transformMenu,Ee.fadeInItems]},changeDetection:0}),tt})();const Je=new e.OlP("mat-menu-scroll-strategy"),xe={provide:Je,deps:[$e.aV],useFactory:function(tt){return()=>tt.scrollStrategies.reposition()}},jt=(0,Te.i$)({passive:!0});let di=(()=>{class tt{constructor(nt,mt,yt,Ze,ut,ei,ni,Ni){this._overlay=nt,this._element=mt,this._viewContainerRef=yt,this._menuItemInstance=ei,this._dir=ni,this._focusMonitor=Ni,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=a.w0.EMPTY,this._hoverSubscription=a.w0.EMPTY,this._menuCloseSubscription=a.w0.EMPTY,this._handleTouchStart=wi=>{(0,E.yG)(wi)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new e.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new e.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=Ze,this._parentMaterialMenu=ut instanceof Be?ut:void 0,mt.nativeElement.addEventListener("touchstart",this._handleTouchStart,jt),ei&&(ei._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(nt){this.menu=nt}get menu(){return this._menu}set menu(nt){nt!==this._menu&&(this._menu=nt,this._menuCloseSubscription.unsubscribe(),nt&&(this._menuCloseSubscription=nt.close.subscribe(mt=>{this._destroyMenu(mt),("click"===mt||"tab"===mt)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(mt)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,jt),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const nt=this._createOverlay(),mt=nt.getConfig();this._setPosition(mt.positionStrategy),mt.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,nt.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Be&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(nt,mt){this._focusMonitor&&nt?this._focusMonitor.focusVia(this._element,nt,mt):this._element.nativeElement.focus(mt)}updatePosition(){var nt;null===(nt=this._overlayRef)||void 0===nt||nt.updatePosition()}_destroyMenu(nt){if(!this._overlayRef||!this.menuOpen)return;const mt=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===nt||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,mt instanceof Be?(mt._resetAnimation(),mt.lazyContent?mt._animationDone.pipe((0,be.h)(yt=>"void"===yt.toState),(0,oe.q)(1),(0,se.R)(mt.lazyContent._attached)).subscribe({next:()=>mt.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),mt.lazyContent&&mt.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let nt=0,mt=this.menu.parentMenu;for(;mt;)nt++,mt=mt.parentMenu;this.menu.setElevation(nt)}}_setIsMenuOpen(nt){this._menuOpen=nt,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(nt)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const nt=this._getOverlayConfig();this._subscribeToPositions(nt.positionStrategy),this._overlayRef=this._overlay.create(nt),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new $e.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(nt){this.menu.setPositionClasses&&nt.positionChanges.subscribe(mt=>{this.menu.setPositionClasses("start"===mt.connectionPair.overlayX?"after":"before","top"===mt.connectionPair.overlayY?"below":"above")})}_setPosition(nt){let[mt,yt]="before"===this.menu.xPosition?["end","start"]:["start","end"],[Ze,ut]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[ei,ni]=[Ze,ut],[Ni,wi]=[mt,yt],yi=0;this.triggersSubmenu()?(wi=mt="before"===this.menu.xPosition?"start":"end",yt=Ni="end"===mt?"start":"end",yi="bottom"===Ze?8:-8):this.menu.overlapTrigger||(ei="top"===Ze?"bottom":"top",ni="top"===ut?"bottom":"top"),nt.withPositions([{originX:mt,originY:ei,overlayX:Ni,overlayY:Ze,offsetY:yi},{originX:yt,originY:ei,overlayX:wi,overlayY:Ze,offsetY:yi},{originX:mt,originY:ni,overlayX:Ni,overlayY:ut,offsetY:-yi},{originX:yt,originY:ni,overlayX:wi,overlayY:ut,offsetY:-yi}])}_menuClosingActions(){const nt=this._overlayRef.backdropClick(),mt=this._overlayRef.detachments(),yt=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,C.of)(),Ze=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,be.h)(ut=>ut!==this._menuItemInstance),(0,be.h)(()=>this._menuOpen)):(0,C.of)();return(0,d.T)(nt,yt,Ze,mt)}_handleMousedown(nt){(0,E.X6)(nt)||(this._openedBy=0===nt.button?"mouse":void 0,this.triggersSubmenu()&&nt.preventDefault())}_handleKeydown(nt){const mt=nt.keyCode;(mt===t.K5||mt===t.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(mt===t.SV&&"ltr"===this.dir||mt===t.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(nt){this.triggersSubmenu()?(nt.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,be.h)(nt=>nt===this._menuItemInstance&&!nt.disabled),(0,Ie.g)(0,D.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Be&&this.menu._isAnimating?this.menu._animationDone.pipe((0,oe.q)(1),(0,Ie.g)(0,D.E),(0,se.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new _e.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return tt.\u0275fac=function(nt){return new(nt||tt)(e.Y36($e.aV),e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(Je),e.Y36(Pt,8),e.Y36(Di,10),e.Y36(ye.Is,8),e.Y36(E.tE))},tt.\u0275dir=e.lG2({type:tt,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(nt,mt){1&nt&&e.NdJ("click",function(Ze){return mt._handleClick(Ze)})("mousedown",function(Ze){return mt._handleMousedown(Ze)})("keydown",function(Ze){return mt._handleKeydown(Ze)}),2&nt&&e.uIk("aria-expanded",mt.menuOpen||null)("aria-controls",mt.menuOpen?mt.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),tt})(),Rt=(()=>{class tt extends di{}return tt.\u0275fac=function(){let Lt;return function(mt){return(Lt||(Lt=e.n5z(tt)))(mt||tt)}}(),tt.\u0275dir=e.lG2({type:tt,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[e.qOj]}),tt})(),et=(()=>{class tt{}return tt.\u0275fac=function(nt){return new(nt||tt)},tt.\u0275mod=e.oAB({type:tt}),tt.\u0275inj=e.cJS({providers:[xe],imports:[[Le.ez,We.BQ,We.si,$e.U8],ne.ZD,We.BQ]}),tt})()},20773:(V,Z,g)=>{"use strict";g.d(Z,{Cq:()=>$e,$g:()=>We});var E=g(5e3),m=g(69808),t=g(90508),e=g(63191),n=g(70925),a=g(76360);function d(Te,ye){if(1&Te&&(E.O4$(),E._UZ(0,"circle",3)),2&Te){const ne=E.oxw();E.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+ne._spinnerAnimationLabel)("stroke-dashoffset",ne._getStrokeDashOffset(),"px")("stroke-dasharray",ne._getStrokeCircumference(),"px")("stroke-width",ne._getCircleStrokeWidth(),"%"),E.uIk("r",ne._getCircleRadius())}}function C(Te,ye){if(1&Te&&(E.O4$(),E._UZ(0,"circle",3)),2&Te){const ne=E.oxw();E.Udp("stroke-dashoffset",ne._getStrokeDashOffset(),"px")("stroke-dasharray",ne._getStrokeCircumference(),"px")("stroke-width",ne._getCircleStrokeWidth(),"%"),E.uIk("r",ne._getCircleRadius())}}function D(Te,ye){if(1&Te&&(E.O4$(),E._UZ(0,"circle",3)),2&Te){const ne=E.oxw();E.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+ne._spinnerAnimationLabel)("stroke-dashoffset",ne._getStrokeDashOffset(),"px")("stroke-dasharray",ne._getStrokeCircumference(),"px")("stroke-width",ne._getCircleStrokeWidth(),"%"),E.uIk("r",ne._getCircleRadius())}}function B(Te,ye){if(1&Te&&(E.O4$(),E._UZ(0,"circle",3)),2&Te){const ne=E.oxw();E.Udp("stroke-dashoffset",ne._getStrokeDashOffset(),"px")("stroke-dasharray",ne._getStrokeCircumference(),"px")("stroke-width",ne._getCircleStrokeWidth(),"%"),E.uIk("r",ne._getCircleRadius())}}const se=(0,t.pj)(class{constructor(Te){this._elementRef=Te}},"primary"),Ie=new E.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Le extends se{constructor(ye,ne,ge,ae,He){super(ye),this._document=ge,this._diameter=100,this._value=0,this.mode="determinate";const Se=Le._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),Se.has(ge.head)||Se.set(ge.head,new Set([100])),this._noopAnimations="NoopAnimations"===ae&&!!He&&!He._forceAnimations,He&&(He.diameter&&(this.diameter=He.diameter),He.strokeWidth&&(this.strokeWidth=He.strokeWidth))}get diameter(){return this._diameter}set diameter(ye){this._diameter=(0,e.su)(ye),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(ye){this._strokeWidth=(0,e.su)(ye)}get value(){return"determinate"===this.mode?this._value:0}set value(ye){this._value=Math.max(0,Math.min(100,(0,e.su)(ye)))}ngOnInit(){const ye=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(ye)||this._document.head,this._attachStyleNode(),ye.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const ye=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${ye} ${ye}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const ye=this._styleRoot,ne=this._diameter,ge=Le._diameters;let ae=ge.get(ye);if(!ae||!ae.has(ne)){const He=this._document.createElement("style");He.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),He.textContent=this._getAnimationText(),ye.appendChild(He),ae||(ae=new Set,ge.set(ye,ae)),ae.add(ne)}}_getAnimationText(){const ye=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*ye).replace(/END_VALUE/g,""+.2*ye).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Le._diameters=new WeakMap,Le.\u0275fac=function(ye){return new(ye||Le)(E.Y36(E.SBq),E.Y36(n.t4),E.Y36(m.K0,8),E.Y36(a.Qb,8),E.Y36(Ie))},Le.\u0275cmp=E.Xpm({type:Le,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(ye,ne){2&ye&&(E.uIk("aria-valuemin","determinate"===ne.mode?0:null)("aria-valuemax","determinate"===ne.mode?100:null)("aria-valuenow","determinate"===ne.mode?ne.value:null)("mode",ne.mode),E.Udp("width",ne.diameter,"px")("height",ne.diameter,"px"),E.ekj("_mat-animation-noopable",ne._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[E.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(ye,ne){1&ye&&(E.O4$(),E.TgZ(0,"svg",0),E.YNc(1,d,1,9,"circle",1),E.YNc(2,C,1,7,"circle",2),E.qZA()),2&ye&&(E.Udp("width",ne.diameter,"px")("height",ne.diameter,"px"),E.Q6J("ngSwitch","indeterminate"===ne.mode),E.uIk("viewBox",ne._getViewBox()),E.xp6(1),E.Q6J("ngSwitchCase",!0),E.xp6(1),E.Q6J("ngSwitchCase",!1))},directives:[m.RF,m.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let We=(()=>{class Te extends Le{constructor(ne,ge,ae,He,Se){super(ne,ge,ae,He,Se),this.mode="indeterminate"}}return Te.\u0275fac=function(ne){return new(ne||Te)(E.Y36(E.SBq),E.Y36(n.t4),E.Y36(m.K0,8),E.Y36(a.Qb,8),E.Y36(Ie))},Te.\u0275cmp=E.Xpm({type:Te,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(ne,ge){2&ne&&(E.Udp("width",ge.diameter,"px")("height",ge.diameter,"px"),E.ekj("_mat-animation-noopable",ge._noopAnimations))},inputs:{color:"color"},features:[E.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(ne,ge){1&ne&&(E.O4$(),E.TgZ(0,"svg",0),E.YNc(1,D,1,9,"circle",1),E.YNc(2,B,1,7,"circle",2),E.qZA()),2&ne&&(E.Udp("width",ge.diameter,"px")("height",ge.diameter,"px"),E.Q6J("ngSwitch","indeterminate"===ge.mode),E.uIk("viewBox",ge._getViewBox()),E.xp6(1),E.Q6J("ngSwitchCase",!0),E.xp6(1),E.Q6J("ngSwitchCase",!1))},directives:[m.RF,m.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),Te})(),$e=(()=>{class Te{}return Te.\u0275fac=function(ne){return new(ne||Te)},Te.\u0275mod=E.oAB({type:Te}),Te.\u0275inj=E.cJS({imports:[[t.BQ,m.ez],t.BQ]}),Te})()},57261:(V,Z,g)=>{"use strict";g.d(Z,{ux:()=>He,ZX:()=>ne});var E=g(91314),m=g(47429),t=g(69808),e=g(5e3),n=g(90508),a=g(47423),d=g(77579),C=g(95698),D=g(82722),B=g(41777),z=g(70925),oe=g(95113),be=g(15664);function se(Se,Ee){if(1&Se){const ue=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"button",2),e.NdJ("click",function(){return e.CHM(ue),e.oxw().action()}),e._uU(2),e.qZA(),e.qZA()}if(2&Se){const ue=e.oxw();e.xp6(2),e.Oqu(ue.data.action)}}function Ie(Se,Ee){}const Ge=new e.OlP("MatSnackBarData");class _e{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const Le=Math.pow(2,31)-1;class We{constructor(Ee,ue){this._overlayRef=ue,this._afterDismissed=new d.x,this._afterOpened=new d.x,this._onAction=new d.x,this._dismissedByAction=!1,this.containerInstance=Ee,this.onAction().subscribe(()=>this.dismiss()),Ee._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(Ee){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(Ee,Le))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let $e=(()=>{class Se{constructor(ue,ie){this.snackBarRef=ue,this.data=ie}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Se.\u0275fac=function(ue){return new(ue||Se)(e.Y36(We),e.Y36(Ge))},Se.\u0275cmp=e.Xpm({type:Se,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(ue,ie){1&ue&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.YNc(2,se,3,1,"div",0)),2&ue&&(e.xp6(1),e.Oqu(ie.data.message),e.xp6(1),e.Q6J("ngIf",ie.hasAction))},directives:[t.O5,a.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Se})();const Te={snackBarState:(0,B.X$)("state",[(0,B.SB)("void, hidden",(0,B.oB)({transform:"scale(0.8)",opacity:0})),(0,B.SB)("visible",(0,B.oB)({transform:"scale(1)",opacity:1})),(0,B.eR)("* => visible",(0,B.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,B.eR)("* => void, * => hidden",(0,B.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,B.oB)({opacity:0})))])};let ye=(()=>{class Se extends m.en{constructor(ue,ie,ht,Oe,ke){super(),this._ngZone=ue,this._elementRef=ie,this._changeDetectorRef=ht,this._platform=Oe,this.snackBarConfig=ke,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new d.x,this._onExit=new d.x,this._onEnter=new d.x,this._animationState="void",this.attachDomPortal=dt=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(dt)),this._live="assertive"!==ke.politeness||ke.announcementMessage?"off"===ke.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(ue){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(ue)}attachTemplatePortal(ue){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(ue)}onAnimationEnd(ue){const{fromState:ie,toState:ht}=ue;if(("void"===ht&&"void"!==ie||"hidden"===ht)&&this._completeExit(),"visible"===ht){const Oe=this._onEnter;this._ngZone.run(()=>{Oe.next(),Oe.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,C.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const ue=this._elementRef.nativeElement,ie=this.snackBarConfig.panelClass;ie&&(Array.isArray(ie)?ie.forEach(ht=>ue.classList.add(ht)):ue.classList.add(ie)),"center"===this.snackBarConfig.horizontalPosition&&ue.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&ue.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const ue=this._elementRef.nativeElement.querySelector("[aria-hidden]"),ie=this._elementRef.nativeElement.querySelector("[aria-live]");if(ue&&ie){let ht=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&ue.contains(document.activeElement)&&(ht=document.activeElement),ue.removeAttribute("aria-hidden"),ie.appendChild(ue),null==ht||ht.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Se.\u0275fac=function(ue){return new(ue||Se)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(z.t4),e.Y36(_e))},Se.\u0275cmp=e.Xpm({type:Se,selectors:[["snack-bar-container"]],viewQuery:function(ue,ie){if(1&ue&&e.Gf(m.Pl,7),2&ue){let ht;e.iGM(ht=e.CRH())&&(ie._portalOutlet=ht.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(ue,ie){1&ue&&e.WFA("@state.done",function(Oe){return ie.onAnimationEnd(Oe)}),2&ue&&e.d8E("@state",ie._animationState)},features:[e.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(ue,ie){1&ue&&(e.TgZ(0,"div",0),e.YNc(1,Ie,0,0,"ng-template",1),e.qZA(),e._UZ(2,"div")),2&ue&&(e.xp6(2),e.uIk("aria-live",ie._live)("role",ie._role))},directives:[m.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Te.snackBarState]}}),Se})(),ne=(()=>{class Se{}return Se.\u0275fac=function(ue){return new(ue||Se)},Se.\u0275mod=e.oAB({type:Se}),Se.\u0275inj=e.cJS({imports:[[E.U8,m.eL,t.ez,a.ot,n.BQ],n.BQ]}),Se})();const ge=new e.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new _e}});let He=(()=>{class Se{constructor(ue,ie,ht,Oe,ke,dt){this._overlay=ue,this._live=ie,this._injector=ht,this._breakpointObserver=Oe,this._parentSnackBar=ke,this._defaultConfig=dt,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=$e,this.snackBarContainerComponent=ye,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const ue=this._parentSnackBar;return ue?ue._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(ue){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=ue:this._snackBarRefAtThisLevel=ue}openFromComponent(ue,ie){return this._attach(ue,ie)}openFromTemplate(ue,ie){return this._attach(ue,ie)}open(ue,ie="",ht){const Oe=Object.assign(Object.assign({},this._defaultConfig),ht);return Oe.data={message:ue,action:ie},Oe.announcementMessage===ue&&(Oe.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,Oe)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(ue,ie){const Oe=e.zs3.create({parent:ie&&ie.viewContainerRef&&ie.viewContainerRef.injector||this._injector,providers:[{provide:_e,useValue:ie}]}),ke=new m.C5(this.snackBarContainerComponent,ie.viewContainerRef,Oe),dt=ue.attach(ke);return dt.instance.snackBarConfig=ie,dt.instance}_attach(ue,ie){const ht=Object.assign(Object.assign(Object.assign({},new _e),this._defaultConfig),ie),Oe=this._createOverlay(ht),ke=this._attachSnackBarContainer(Oe,ht),dt=new We(ke,Oe);if(ue instanceof e.Rgc){const vt=new m.UE(ue,null,{$implicit:ht.data,snackBarRef:dt});dt.instance=ke.attachTemplatePortal(vt)}else{const vt=this._createInjector(ht,dt),lt=new m.C5(ue,void 0,vt),Bt=ke.attachComponentPortal(lt);dt.instance=Bt.instance}return this._breakpointObserver.observe(oe.u3.HandsetPortrait).pipe((0,D.R)(Oe.detachments())).subscribe(vt=>{Oe.overlayElement.classList.toggle(this.handsetCssClass,vt.matches)}),ht.announcementMessage&&ke._onAnnounce.subscribe(()=>{this._live.announce(ht.announcementMessage,ht.politeness)}),this._animateSnackBar(dt,ht),this._openedSnackBarRef=dt,this._openedSnackBarRef}_animateSnackBar(ue,ie){ue.afterDismissed().subscribe(()=>{this._openedSnackBarRef==ue&&(this._openedSnackBarRef=null),ie.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{ue.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):ue.containerInstance.enter(),ie.duration&&ie.duration>0&&ue.afterOpened().subscribe(()=>ue._dismissAfter(ie.duration))}_createOverlay(ue){const ie=new E.X_;ie.direction=ue.direction;let ht=this._overlay.position().global();const Oe="rtl"===ue.direction,ke="left"===ue.horizontalPosition||"start"===ue.horizontalPosition&&!Oe||"end"===ue.horizontalPosition&&Oe,dt=!ke&&"center"!==ue.horizontalPosition;return ke?ht.left("0"):dt?ht.right("0"):ht.centerHorizontally(),"top"===ue.verticalPosition?ht.top("0"):ht.bottom("0"),ie.positionStrategy=ht,this._overlay.create(ie)}_createInjector(ue,ie){return e.zs3.create({parent:ue&&ue.viewContainerRef&&ue.viewContainerRef.injector||this._injector,providers:[{provide:We,useValue:ie},{provide:Ge,useValue:ue.data}]})}}return Se.\u0275fac=function(ue){return new(ue||Se)(e.LFG(E.aV),e.LFG(be.Kd),e.LFG(e.zs3),e.LFG(oe.Yg),e.LFG(Se,12),e.LFG(ge))},Se.\u0275prov=e.Yz7({token:Se,factory:Se.\u0275fac,providedIn:ne}),Se})()},53251:(V,Z,g)=>{"use strict";g.d(Z,{uX:()=>di,SP:()=>Ot,uD:()=>xe,Nh:()=>Jt});var E=g(15664),m=g(17144),t=g(47429),e=g(69808),n=g(5e3),a=g(90508),d=g(76360),C=g(77579),D=g(50727),B=g(54968),z=g(39646),oe=g(56451),be=g(5963),se=g(41777),Ie=g(68675),Ge=g(71884),_e=g(82722),Le=g(50226),We=g(63191),$e=g(91159),Te=g(70925),ye=g(30495);function ne(ft,Ae){1&ft&&n.Hsn(0)}const ge=["*"];function ae(ft,Ae){}const He=function(ft){return{animationDuration:ft}},Se=function(ft,Ae){return{value:ft,params:Ae}},Ee=["tabListContainer"],ue=["tabList"],ie=["tabListInner"],ht=["nextPaginator"],Oe=["previousPaginator"],ke=["tabBodyWrapper"],dt=["tabHeader"];function vt(ft,Ae){}function lt(ft,Ae){if(1&ft&&n.YNc(0,vt,0,0,"ng-template",9),2&ft){const le=n.oxw().$implicit;n.Q6J("cdkPortalOutlet",le.templateLabel)}}function Bt(ft,Ae){if(1&ft&&n._uU(0),2&ft){const le=n.oxw().$implicit;n.Oqu(le.textLabel)}}function Pt(ft,Ae){if(1&ft){const le=n.EpF();n.TgZ(0,"div",6),n.NdJ("click",function(){const at=n.CHM(le),It=at.$implicit,Gi=at.index,Zi=n.oxw(),En=n.MAs(1);return Zi._handleClick(It,En,Gi)})("cdkFocusChange",function(at){const Gi=n.CHM(le).index;return n.oxw()._tabFocusChanged(at,Gi)}),n.TgZ(1,"div",7),n.YNc(2,lt,1,1,"ng-template",8),n.YNc(3,Bt,1,1,"ng-template",8),n.qZA(),n.qZA()}if(2&ft){const le=Ae.$implicit,Pe=Ae.index,at=n.oxw();n.ekj("mat-tab-label-active",at.selectedIndex==Pe),n.Q6J("id",at._getTabLabelId(Pe))("disabled",le.disabled)("matRippleDisabled",le.disabled||at.disableRipple),n.uIk("tabIndex",at._getTabIndex(le,Pe))("aria-posinset",Pe+1)("aria-setsize",at._tabs.length)("aria-controls",at._getTabContentId(Pe))("aria-selected",at.selectedIndex==Pe)("aria-label",le.ariaLabel||null)("aria-labelledby",!le.ariaLabel&&le.ariaLabelledby?le.ariaLabelledby:null),n.xp6(2),n.Q6J("ngIf",le.templateLabel),n.xp6(1),n.Q6J("ngIf",!le.templateLabel)}}function Zt(ft,Ae){if(1&ft){const le=n.EpF();n.TgZ(0,"mat-tab-body",10),n.NdJ("_onCentered",function(){return n.CHM(le),n.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(at){return n.CHM(le),n.oxw()._setTabBodyWrapperHeight(at)}),n.qZA()}if(2&ft){const le=Ae.$implicit,Pe=Ae.index,at=n.oxw();n.ekj("mat-tab-body-active",at.selectedIndex===Pe),n.Q6J("id",at._getTabContentId(Pe))("content",le.content)("position",le.position)("origin",le.origin)("animationDuration",at.animationDuration),n.uIk("tabindex",null!=at.contentTabIndex&&at.selectedIndex===Pe?at.contentTabIndex:null)("aria-labelledby",at._getTabLabelId(Pe))}}const ii=new n.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return Ae=>({left:Ae?(Ae.offsetLeft||0)+"px":"0",width:Ae?(Ae.offsetWidth||0)+"px":"0"})}});let gi=(()=>{class ft{constructor(le,Pe,at,It){this._elementRef=le,this._ngZone=Pe,this._inkBarPositioner=at,this._animationMode=It}alignToElement(le){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(le))}):this._setStyles(le)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(le){const Pe=this._inkBarPositioner(le),at=this._elementRef.nativeElement;at.style.left=Pe.left,at.style.width=Pe.width}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq),n.Y36(n.R0b),n.Y36(ii),n.Y36(d.Qb,8))},ft.\u0275dir=n.lG2({type:ft,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(le,Pe){2&le&&n.ekj("_mat-animation-noopable","NoopAnimations"===Pe._animationMode)}}),ft})();const Be=new n.OlP("MatTabContent"),Je=new n.OlP("MatTabLabel"),_t=new n.OlP("MAT_TAB");let xe=(()=>{class ft extends t.ig{constructor(le,Pe,at){super(le,Pe),this._closestTab=at}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.Rgc),n.Y36(n.s_b),n.Y36(_t,8))},ft.\u0275dir=n.lG2({type:ft,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[n._Bn([{provide:Je,useExisting:ft}]),n.qOj]}),ft})();const pt=(0,a.Id)(class{}),jt=new n.OlP("MAT_TAB_GROUP");let di=(()=>{class ft extends pt{constructor(le,Pe){super(),this._viewContainerRef=le,this._closestTabGroup=Pe,this.textLabel="",this._contentPortal=null,this._stateChanges=new C.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(le){this._setTemplateLabelInput(le)}get content(){return this._contentPortal}ngOnChanges(le){(le.hasOwnProperty("textLabel")||le.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new t.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(le){le&&le._closestTab===this&&(this._templateLabel=le)}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.s_b),n.Y36(jt,8))},ft.\u0275cmp=n.Xpm({type:ft,selectors:[["mat-tab"]],contentQueries:function(le,Pe,at){if(1&le&&(n.Suo(at,Je,5),n.Suo(at,Be,7,n.Rgc)),2&le){let It;n.iGM(It=n.CRH())&&(Pe.templateLabel=It.first),n.iGM(It=n.CRH())&&(Pe._explicitContent=It.first)}},viewQuery:function(le,Pe){if(1&le&&n.Gf(n.Rgc,7),2&le){let at;n.iGM(at=n.CRH())&&(Pe._implicitContent=at.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[n._Bn([{provide:_t,useExisting:ft}]),n.qOj,n.TTD],ngContentSelectors:ge,decls:1,vars:0,template:function(le,Pe){1&le&&(n.F$t(),n.YNc(0,ne,1,0,"ng-template"))},encapsulation:2}),ft})();const Rt={translateTab:(0,se.X$)("translateTab",[(0,se.SB)("center, void, left-origin-center, right-origin-center",(0,se.oB)({transform:"none"})),(0,se.SB)("left",(0,se.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,se.SB)("right",(0,se.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,se.eR)("* => left, * => right, left => center, right => center",(0,se.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,se.eR)("void => left-origin-center",[(0,se.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,se.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,se.eR)("void => right-origin-center",[(0,se.oB)({transform:"translate3d(100%, 0, 0)"}),(0,se.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let et=(()=>{class ft extends t.Pl{constructor(le,Pe,at,It){super(le,Pe,It),this._host=at,this._centeringSub=D.w0.EMPTY,this._leavingSub=D.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,Ie.O)(this._host._isCenterPosition(this._host._position))).subscribe(le=>{le&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n._Vd),n.Y36(n.s_b),n.Y36((0,n.Gpc)(()=>Lt)),n.Y36(e.K0))},ft.\u0275dir=n.lG2({type:ft,selectors:[["","matTabBodyHost",""]],features:[n.qOj]}),ft})(),tt=(()=>{class ft{constructor(le,Pe,at){this._elementRef=le,this._dir=Pe,this._dirChangeSubscription=D.w0.EMPTY,this._translateTabComplete=new C.x,this._onCentering=new n.vpe,this._beforeCentering=new n.vpe,this._afterLeavingCenter=new n.vpe,this._onCentered=new n.vpe(!0),this.animationDuration="500ms",Pe&&(this._dirChangeSubscription=Pe.change.subscribe(It=>{this._computePositionAnimationState(It),at.markForCheck()})),this._translateTabComplete.pipe((0,Ge.x)((It,Gi)=>It.fromState===Gi.fromState&&It.toState===Gi.toState)).subscribe(It=>{this._isCenterPosition(It.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(It.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(le){this._positionIndex=le,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(le){const Pe=this._isCenterPosition(le.toState);this._beforeCentering.emit(Pe),Pe&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(le){return"center"==le||"left-origin-center"==le||"right-origin-center"==le}_computePositionAnimationState(le=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==le?"left":"right":this._positionIndex>0?"ltr"==le?"right":"left":"center"}_computePositionFromOrigin(le){const Pe=this._getLayoutDirection();return"ltr"==Pe&&le<=0||"rtl"==Pe&&le>0?"left-origin-center":"right-origin-center"}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq),n.Y36(Le.Is,8),n.Y36(n.sBO))},ft.\u0275dir=n.lG2({type:ft,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),ft})(),Lt=(()=>{class ft extends tt{constructor(le,Pe,at){super(le,Pe,at)}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq),n.Y36(Le.Is,8),n.Y36(n.sBO))},ft.\u0275cmp=n.Xpm({type:ft,selectors:[["mat-tab-body"]],viewQuery:function(le,Pe){if(1&le&&n.Gf(t.Pl,5),2&le){let at;n.iGM(at=n.CRH())&&(Pe._portalHost=at.first)}},hostAttrs:[1,"mat-tab-body"],features:[n.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(le,Pe){1&le&&(n.TgZ(0,"div",0,1),n.NdJ("@translateTab.start",function(It){return Pe._onTranslateTabStarted(It)})("@translateTab.done",function(It){return Pe._translateTabComplete.next(It)}),n.YNc(2,ae,0,0,"ng-template",2),n.qZA()),2&le&&n.Q6J("@translateTab",n.WLB(3,Se,Pe._position,n.VKq(1,He,Pe.animationDuration)))},directives:[et],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Rt.translateTab]}}),ft})();const nt=new n.OlP("MAT_TABS_CONFIG"),mt=(0,a.Id)(class{});let yt=(()=>{class ft extends mt{constructor(le){super(),this.elementRef=le}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq))},ft.\u0275dir=n.lG2({type:ft,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(le,Pe){2&le&&(n.uIk("aria-disabled",!!Pe.disabled),n.ekj("mat-tab-disabled",Pe.disabled))},inputs:{disabled:"disabled"},features:[n.qOj]}),ft})();const Ze=(0,Te.i$)({passive:!0});let Ni=(()=>{class ft{constructor(le,Pe,at,It,Gi,Zi,En){this._elementRef=le,this._changeDetectorRef=Pe,this._viewportRuler=at,this._dir=It,this._ngZone=Gi,this._platform=Zi,this._animationMode=En,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new C.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new C.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new n.vpe,this.indexFocused=new n.vpe,Gi.runOutsideAngular(()=>{(0,B.R)(le.nativeElement,"mouseleave").pipe((0,_e.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(le){le=(0,We.su)(le),this._selectedIndex!=le&&(this._selectedIndexChanged=!0,this._selectedIndex=le,this._keyManager&&this._keyManager.updateActiveItem(le))}ngAfterViewInit(){(0,B.R)(this._previousPaginator.nativeElement,"touchstart",Ze).pipe((0,_e.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,B.R)(this._nextPaginator.nativeElement,"touchstart",Ze).pipe((0,_e.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const le=this._dir?this._dir.change:(0,z.of)("ltr"),Pe=this._viewportRuler.change(150),at=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new E.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(at):at(),(0,oe.T)(le,Pe,this._items.changes).pipe((0,_e.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(at)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,_e.R)(this._destroyed)).subscribe(It=>{this.indexFocused.emit(It),this._setTabFocus(It)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(le){if(!(0,$e.Vb)(le))switch(le.keyCode){case $e.K5:case $e.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(le));break;default:this._keyManager.onKeydown(le)}}_onContentChanges(){const le=this._elementRef.nativeElement.textContent;le!==this._currentTextContent&&(this._currentTextContent=le||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(le){!this._isValidIndex(le)||this.focusIndex===le||!this._keyManager||this._keyManager.setActiveItem(le)}_isValidIndex(le){if(!this._items)return!0;const Pe=this._items?this._items.toArray()[le]:null;return!!Pe&&!Pe.disabled}_setTabFocus(le){if(this._showPaginationControls&&this._scrollToLabel(le),this._items&&this._items.length){this._items.toArray()[le].focus();const Pe=this._tabListContainer.nativeElement;Pe.scrollLeft="ltr"==this._getLayoutDirection()?0:Pe.scrollWidth-Pe.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const le=this.scrollDistance,Pe="ltr"===this._getLayoutDirection()?-le:le;this._tabList.nativeElement.style.transform=`translateX(${Math.round(Pe)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(le){this._scrollTo(le)}_scrollHeader(le){return this._scrollTo(this._scrollDistance+("before"==le?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(le){this._stopInterval(),this._scrollHeader(le)}_scrollToLabel(le){if(this.disablePagination)return;const Pe=this._items?this._items.toArray()[le]:null;if(!Pe)return;const at=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:It,offsetWidth:Gi}=Pe.elementRef.nativeElement;let Zi,En;"ltr"==this._getLayoutDirection()?(Zi=It,En=Zi+Gi):(En=this._tabListInner.nativeElement.offsetWidth-It,Zi=En-Gi);const nr=this.scrollDistance,li=this.scrollDistance+at;Zi<nr?this.scrollDistance-=nr-Zi+60:En>li&&(this.scrollDistance+=En-li+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const le=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;le||(this.scrollDistance=0),le!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=le}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const le=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,Pe=le?le.elementRef.nativeElement:null;Pe?this._inkBar.alignToElement(Pe):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(le,Pe){Pe&&null!=Pe.button&&0!==Pe.button||(this._stopInterval(),(0,be.H)(650,100).pipe((0,_e.R)((0,oe.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:at,distance:It}=this._scrollHeader(le);(0===It||It>=at)&&this._stopInterval()}))}_scrollTo(le){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const Pe=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(Pe,le)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:Pe,distance:this._scrollDistance}}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ye.rL),n.Y36(Le.Is,8),n.Y36(n.R0b),n.Y36(Te.t4),n.Y36(d.Qb,8))},ft.\u0275dir=n.lG2({type:ft,inputs:{disablePagination:"disablePagination"}}),ft})(),wi=(()=>{class ft extends Ni{constructor(le,Pe,at,It,Gi,Zi,En){super(le,Pe,at,It,Gi,Zi,En),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(le){this._disableRipple=(0,We.Ig)(le)}_itemSelected(le){le.preventDefault()}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ye.rL),n.Y36(Le.Is,8),n.Y36(n.R0b),n.Y36(Te.t4),n.Y36(d.Qb,8))},ft.\u0275dir=n.lG2({type:ft,inputs:{disableRipple:"disableRipple"},features:[n.qOj]}),ft})(),yi=(()=>{class ft extends wi{constructor(le,Pe,at,It,Gi,Zi,En){super(le,Pe,at,It,Gi,Zi,En)}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ye.rL),n.Y36(Le.Is,8),n.Y36(n.R0b),n.Y36(Te.t4),n.Y36(d.Qb,8))},ft.\u0275cmp=n.Xpm({type:ft,selectors:[["mat-tab-header"]],contentQueries:function(le,Pe,at){if(1&le&&n.Suo(at,yt,4),2&le){let It;n.iGM(It=n.CRH())&&(Pe._items=It)}},viewQuery:function(le,Pe){if(1&le&&(n.Gf(gi,7),n.Gf(Ee,7),n.Gf(ue,7),n.Gf(ie,7),n.Gf(ht,5),n.Gf(Oe,5)),2&le){let at;n.iGM(at=n.CRH())&&(Pe._inkBar=at.first),n.iGM(at=n.CRH())&&(Pe._tabListContainer=at.first),n.iGM(at=n.CRH())&&(Pe._tabList=at.first),n.iGM(at=n.CRH())&&(Pe._tabListInner=at.first),n.iGM(at=n.CRH())&&(Pe._nextPaginator=at.first),n.iGM(at=n.CRH())&&(Pe._previousPaginator=at.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(le,Pe){2&le&&n.ekj("mat-tab-header-pagination-controls-enabled",Pe._showPaginationControls)("mat-tab-header-rtl","rtl"==Pe._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[n.qOj],ngContentSelectors:ge,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(le,Pe){1&le&&(n.F$t(),n.TgZ(0,"div",0,1),n.NdJ("click",function(){return Pe._handlePaginatorClick("before")})("mousedown",function(It){return Pe._handlePaginatorPress("before",It)})("touchend",function(){return Pe._stopInterval()}),n._UZ(2,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.NdJ("keydown",function(It){return Pe._handleKeydown(It)}),n.TgZ(5,"div",5,6),n.NdJ("cdkObserveContent",function(){return Pe._onContentChanges()}),n.TgZ(7,"div",7,8),n.Hsn(9),n.qZA(),n._UZ(10,"mat-ink-bar"),n.qZA(),n.qZA(),n.TgZ(11,"div",9,10),n.NdJ("mousedown",function(It){return Pe._handlePaginatorPress("after",It)})("click",function(){return Pe._handlePaginatorClick("after")})("touchend",function(){return Pe._stopInterval()}),n._UZ(13,"div",2),n.qZA()),2&le&&(n.ekj("mat-tab-header-pagination-disabled",Pe._disableScrollBefore),n.Q6J("matRippleDisabled",Pe._disableScrollBefore||Pe.disableRipple),n.xp6(5),n.ekj("_mat-animation-noopable","NoopAnimations"===Pe._animationMode),n.xp6(6),n.ekj("mat-tab-header-pagination-disabled",Pe._disableScrollAfter),n.Q6J("matRippleDisabled",Pe._disableScrollAfter||Pe.disableRipple))},directives:[a.wG,m.wD,gi],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),ft})(),pn=0;class mi{}const Ji=(0,a.pj)((0,a.Kr)(class{constructor(ft){this._elementRef=ft}}),"primary");let wt=(()=>{class ft extends Ji{constructor(le,Pe,at,It){var Gi;super(le),this._changeDetectorRef=Pe,this._animationMode=It,this._tabs=new n.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=D.w0.EMPTY,this._tabLabelSubscription=D.w0.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new n.vpe,this.focusChange=new n.vpe,this.animationDone=new n.vpe,this.selectedTabChange=new n.vpe(!0),this._groupId=pn++,this.animationDuration=at&&at.animationDuration?at.animationDuration:"500ms",this.disablePagination=!(!at||null==at.disablePagination)&&at.disablePagination,this.dynamicHeight=!(!at||null==at.dynamicHeight)&&at.dynamicHeight,this.contentTabIndex=null!==(Gi=null==at?void 0:at.contentTabIndex)&&void 0!==Gi?Gi:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(le){this._dynamicHeight=(0,We.Ig)(le)}get selectedIndex(){return this._selectedIndex}set selectedIndex(le){this._indexToSelect=(0,We.su)(le,null)}get animationDuration(){return this._animationDuration}set animationDuration(le){this._animationDuration=/^\d+$/.test(le+"")?le+"ms":le}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(le){this._contentTabIndex=(0,We.su)(le,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(le){const Pe=this._elementRef.nativeElement;Pe.classList.remove(`mat-background-${this.backgroundColor}`),le&&Pe.classList.add(`mat-background-${le}`),this._backgroundColor=le}ngAfterContentChecked(){const le=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=le){const Pe=null==this._selectedIndex;if(!Pe){this.selectedTabChange.emit(this._createChangeEvent(le));const at=this._tabBodyWrapper.nativeElement;at.style.minHeight=at.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((at,It)=>at.isActive=It===le),Pe||(this.selectedIndexChange.emit(le),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((Pe,at)=>{Pe.position=at-le,null!=this._selectedIndex&&0==Pe.position&&!Pe.origin&&(Pe.origin=le-this._selectedIndex)}),this._selectedIndex!==le&&(this._selectedIndex=le,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const Pe=this._tabs.toArray();for(let at=0;at<Pe.length;at++)if(Pe[at].isActive){this._indexToSelect=this._selectedIndex=at;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,Ie.O)(this._allTabs)).subscribe(le=>{this._tabs.reset(le.filter(Pe=>Pe._closestTabGroup===this||!Pe._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(le){const Pe=this._tabHeader;Pe&&(Pe.focusIndex=le)}_focusChanged(le){this.focusChange.emit(this._createChangeEvent(le))}_createChangeEvent(le){const Pe=new mi;return Pe.index=le,this._tabs&&this._tabs.length&&(Pe.tab=this._tabs.toArray()[le]),Pe}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,oe.T)(...this._tabs.map(le=>le._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(le){return Math.min(this._tabs.length-1,Math.max(le||0,0))}_getTabLabelId(le){return`mat-tab-label-${this._groupId}-${le}`}_getTabContentId(le){return`mat-tab-content-${this._groupId}-${le}`}_setTabBodyWrapperHeight(le){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const Pe=this._tabBodyWrapper.nativeElement;Pe.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(Pe.style.height=le+"px")}_removeTabBodyWrapperHeight(){const le=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=le.clientHeight,le.style.height="",this.animationDone.emit()}_handleClick(le,Pe,at){le.disabled||(this.selectedIndex=Pe.focusIndex=at)}_getTabIndex(le,Pe){return le.disabled?null:this.selectedIndex===Pe?0:-1}_tabFocusChanged(le,Pe){le&&"mouse"!==le&&"touch"!==le&&(this._tabHeader.focusIndex=Pe)}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(nt,8),n.Y36(d.Qb,8))},ft.\u0275dir=n.lG2({type:ft,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[n.qOj]}),ft})(),Ot=(()=>{class ft extends wt{constructor(le,Pe,at,It){super(le,Pe,at,It)}}return ft.\u0275fac=function(le){return new(le||ft)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(nt,8),n.Y36(d.Qb,8))},ft.\u0275cmp=n.Xpm({type:ft,selectors:[["mat-tab-group"]],contentQueries:function(le,Pe,at){if(1&le&&n.Suo(at,di,5),2&le){let It;n.iGM(It=n.CRH())&&(Pe._allTabs=It)}},viewQuery:function(le,Pe){if(1&le&&(n.Gf(ke,5),n.Gf(dt,5)),2&le){let at;n.iGM(at=n.CRH())&&(Pe._tabBodyWrapper=at.first),n.iGM(at=n.CRH())&&(Pe._tabHeader=at.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(le,Pe){2&le&&n.ekj("mat-tab-group-dynamic-height",Pe.dynamicHeight)("mat-tab-group-inverted-header","below"===Pe.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[n._Bn([{provide:jt,useExisting:ft}]),n.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(le,Pe){1&le&&(n.TgZ(0,"mat-tab-header",0,1),n.NdJ("indexFocused",function(It){return Pe._focusChanged(It)})("selectFocusedIndex",function(It){return Pe.selectedIndex=It}),n.YNc(2,Pt,4,14,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.YNc(5,Zt,1,9,"mat-tab-body",5),n.qZA()),2&le&&(n.Q6J("selectedIndex",Pe.selectedIndex||0)("disableRipple",Pe.disableRipple)("disablePagination",Pe.disablePagination),n.xp6(2),n.Q6J("ngForOf",Pe._tabs),n.xp6(1),n.ekj("_mat-animation-noopable","NoopAnimations"===Pe._animationMode),n.xp6(2),n.Q6J("ngForOf",Pe._tabs))},directives:[yi,e.sg,yt,a.wG,E.kH,e.O5,t.Pl,Lt],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),ft})(),Jt=(()=>{class ft{}return ft.\u0275fac=function(le){return new(le||ft)},ft.\u0275mod=n.oAB({type:ft}),ft.\u0275inj=n.cJS({imports:[[e.ez,a.BQ,t.eL,a.si,m.Q8,E.rt],a.BQ]}),ft})()},76360:(V,Z,g)=>{"use strict";g.d(Z,{Qb:()=>Ba,PW:()=>ea});var E=g(5e3),m=g(22313),t=g(41777);function e(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function a(Ue){switch(Ue.length){case 0:return new t.ZN;case 1:return Ue[0];default:return new t.ZE(Ue)}}function d(Ue,G,K,fe,Qe={},bt={}){const Yt=[],qt=[];let vi=-1,Fi=null;if(fe.forEach(un=>{const Cn=un.offset,er=Cn==vi,tr=er&&Fi||{};Object.keys(un).forEach(Pn=>{let rr=Pn,ar=un[Pn];if("offset"!==Pn)switch(rr=G.normalizePropertyName(rr,Yt),ar){case t.k1:ar=Qe[Pn];break;case t.l3:ar=bt[Pn];break;default:ar=G.normalizeStyleValue(Pn,rr,ar,Yt)}tr[rr]=ar}),er||qt.push(tr),Fi=tr,vi=Cn}),Yt.length){const un="\n - ";throw new Error(`Unable to animate due to the following errors:${un}${Yt.join(un)}`)}return qt}function C(Ue,G,K,fe){switch(G){case"start":Ue.onStart(()=>fe(K&&D(K,"start",Ue)));break;case"done":Ue.onDone(()=>fe(K&&D(K,"done",Ue)));break;case"destroy":Ue.onDestroy(()=>fe(K&&D(K,"destroy",Ue)))}}function D(Ue,G,K){const fe=K.totalTime,bt=B(Ue.element,Ue.triggerName,Ue.fromState,Ue.toState,G||Ue.phaseName,null==fe?Ue.totalTime:fe,!!K.disabled),Yt=Ue._data;return null!=Yt&&(bt._data=Yt),bt}function B(Ue,G,K,fe,Qe="",bt=0,Yt){return{element:Ue,triggerName:G,fromState:K,toState:fe,phaseName:Qe,totalTime:bt,disabled:!!Yt}}function z(Ue,G,K){let fe;return Ue instanceof Map?(fe=Ue.get(G),fe||Ue.set(G,fe=K)):(fe=Ue[G],fe||(fe=Ue[G]=K)),fe}function oe(Ue){const G=Ue.indexOf(":");return[Ue.substring(1,G),Ue.substr(G+1)]}let be=(Ue,G)=>!1,se=(Ue,G,K)=>[];(n()||"undefined"!=typeof Element)&&(be=e()?(Ue,G)=>{for(;G&&G!==document.documentElement;){if(G===Ue)return!0;G=G.parentNode||G.host}return!1}:(Ue,G)=>Ue.contains(G),se=(Ue,G,K)=>{let fe=[];if(K){const Qe=Ue.querySelectorAll(G);for(let bt=0;bt<Qe.length;bt++)fe.push(Qe[bt])}else{const Qe=Ue.querySelector(G);Qe&&fe.push(Qe)}return fe});let _e=null,Le=!1;function We(Ue){_e||(_e=("undefined"!=typeof document?document.body:null)||{},Le=!!_e.style&&"WebkitAppearance"in _e.style);let G=!0;return _e.style&&!function(Ue){return"ebkit"==Ue.substring(1,6)}(Ue)&&(G=Ue in _e.style,!G&&Le&&(G="Webkit"+Ue.charAt(0).toUpperCase()+Ue.substr(1)in _e.style)),G}const Te=be,ye=se;function ne(Ue){const G={};return Object.keys(Ue).forEach(K=>{const fe=K.replace(/([a-z])([A-Z])/g,"$1-$2");G[fe]=Ue[K]}),G}let ge=(()=>{class Ue{validateStyleProperty(K){return We(K)}matchesElement(K,fe){return!1}containsElement(K,fe){return Te(K,fe)}query(K,fe,Qe){return ye(K,fe,Qe)}computeStyle(K,fe,Qe){return Qe||""}animate(K,fe,Qe,bt,Yt,qt=[],vi){return new t.ZN(Qe,bt)}}return Ue.\u0275fac=function(K){return new(K||Ue)},Ue.\u0275prov=E.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})(),ae=(()=>{class Ue{}return Ue.NOOP=new ge,Ue})();const ue="ng-enter",ie="ng-leave",ht="ng-trigger",Oe=".ng-trigger",ke="ng-animating",dt=".ng-animating";function vt(Ue){if("number"==typeof Ue)return Ue;const G=Ue.match(/^(-?[\.\d]+)(m?s)/);return!G||G.length<2?0:lt(parseFloat(G[1]),G[2])}function lt(Ue,G){return"s"===G?1e3*Ue:Ue}function Bt(Ue,G,K){return Ue.hasOwnProperty("duration")?Ue:function(Ue,G,K){let Qe,bt=0,Yt="";if("string"==typeof Ue){const qt=Ue.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===qt)return G.push(`The provided timing value "${Ue}" is invalid.`),{duration:0,delay:0,easing:""};Qe=lt(parseFloat(qt[1]),qt[2]);const vi=qt[3];null!=vi&&(bt=lt(parseFloat(vi),qt[4]));const Fi=qt[5];Fi&&(Yt=Fi)}else Qe=Ue;if(!K){let qt=!1,vi=G.length;Qe<0&&(G.push("Duration values below 0 are not allowed for this animation step."),qt=!0),bt<0&&(G.push("Delay values below 0 are not allowed for this animation step."),qt=!0),qt&&G.splice(vi,0,`The provided timing value "${Ue}" is invalid.`)}return{duration:Qe,delay:bt,easing:Yt}}(Ue,G,K)}function Zt(Ue,G={}){return Object.keys(Ue).forEach(K=>{G[K]=Ue[K]}),G}function ii(Ue,G,K={}){if(G)for(let fe in Ue)K[fe]=Ue[fe];else Zt(Ue,K);return K}function Ct(Ue,G,K){return K?G+":"+K+";":""}function gi(Ue){let G="";for(let K=0;K<Ue.style.length;K++){const fe=Ue.style.item(K);G+=Ct(0,fe,Ue.style.getPropertyValue(fe))}for(const K in Ue.style)Ue.style.hasOwnProperty(K)&&!K.startsWith("_")&&(G+=Ct(0,tt(K),Ue.style[K]));Ue.setAttribute("style",G)}function Be(Ue,G,K){Ue.style&&(Object.keys(G).forEach(fe=>{const Qe=et(fe);K&&!K.hasOwnProperty(fe)&&(K[fe]=Ue.style[Qe]),Ue.style[Qe]=G[fe]}),n()&&gi(Ue))}function Tt(Ue,G){Ue.style&&(Object.keys(G).forEach(K=>{const fe=et(K);Ue.style[fe]=""}),n()&&gi(Ue))}function Je(Ue){return Array.isArray(Ue)?1==Ue.length?Ue[0]:(0,t.vP)(Ue):Ue}const xe=new RegExp("{{\\s*(.+?)\\s*}}","g");function pt(Ue){let G=[];if("string"==typeof Ue){let K;for(;K=xe.exec(Ue);)G.push(K[1]);xe.lastIndex=0}return G}function jt(Ue,G,K){const fe=Ue.toString(),Qe=fe.replace(xe,(bt,Yt)=>{let qt=G[Yt];return G.hasOwnProperty(Yt)||(K.push(`Please provide a value for the animation param ${Yt}`),qt=""),qt.toString()});return Qe==fe?Ue:Qe}function di(Ue){const G=[];let K=Ue.next();for(;!K.done;)G.push(K.value),K=Ue.next();return G}const Rt=/-+([a-z0-9])/g;function et(Ue){return Ue.replace(Rt,(...G)=>G[1].toUpperCase())}function tt(Ue){return Ue.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Lt(Ue,G){return 0===Ue||0===G}function nt(Ue,G,K){const fe=Object.keys(K);if(fe.length&&G.length){let bt=G[0],Yt=[];if(fe.forEach(qt=>{bt.hasOwnProperty(qt)||Yt.push(qt),bt[qt]=K[qt]}),Yt.length)for(var Qe=1;Qe<G.length;Qe++){let qt=G[Qe];Yt.forEach(function(vi){qt[vi]=yt(Ue,vi)})}}return G}function mt(Ue,G,K){switch(G.type){case 7:return Ue.visitTrigger(G,K);case 0:return Ue.visitState(G,K);case 1:return Ue.visitTransition(G,K);case 2:return Ue.visitSequence(G,K);case 3:return Ue.visitGroup(G,K);case 4:return Ue.visitAnimate(G,K);case 5:return Ue.visitKeyframes(G,K);case 6:return Ue.visitStyle(G,K);case 8:return Ue.visitReference(G,K);case 9:return Ue.visitAnimateChild(G,K);case 10:return Ue.visitAnimateRef(G,K);case 11:return Ue.visitQuery(G,K);case 12:return Ue.visitStagger(G,K);default:throw new Error(`Unable to resolve animation metadata node #${G.type}`)}}function yt(Ue,G){return window.getComputedStyle(Ue)[G]}function ut(Ue,G){const K=[];return"string"==typeof Ue?Ue.split(/\s*,\s*/).forEach(fe=>function(Ue,G,K){if(":"==Ue[0]){const vi=function(Ue,G){switch(Ue){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(K,fe)=>parseFloat(fe)>parseFloat(K);case":decrement":return(K,fe)=>parseFloat(fe)<parseFloat(K);default:return G.push(`The transition alias value "${Ue}" is not supported`),"* => *"}}(Ue,K);if("function"==typeof vi)return void G.push(vi);Ue=vi}const fe=Ue.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==fe||fe.length<4)return K.push(`The provided transition expression "${Ue}" is not supported`),G;const Qe=fe[1],bt=fe[2],Yt=fe[3];G.push(yi(Qe,Yt));"<"==bt[0]&&!("*"==Qe&&"*"==Yt)&&G.push(yi(Yt,Qe))}(fe,K,G)):K.push(Ue),K}const Ni=new Set(["true","1"]),wi=new Set(["false","0"]);function yi(Ue,G){const K=Ni.has(Ue)||wi.has(Ue),fe=Ni.has(G)||wi.has(G);return(Qe,bt)=>{let Yt="*"==Ue||Ue==Qe,qt="*"==G||G==bt;return!Yt&&K&&"boolean"==typeof Qe&&(Yt=Qe?Ni.has(Ue):wi.has(Ue)),!qt&&fe&&"boolean"==typeof bt&&(qt=bt?Ni.has(G):wi.has(G)),Yt&&qt}}const mi=new RegExp("s*:selfs*,?","g");function Ji(Ue,G,K){return new Ot(Ue).build(G,K)}class Ot{constructor(G){this._driver=G}build(G,K){const fe=new Mi(K);return this._resetContextStyleTimingState(fe),mt(this,Je(G),fe)}_resetContextStyleTimingState(G){G.currentQuerySelector="",G.collectedStyles={},G.collectedStyles[""]={},G.currentTime=0}visitTrigger(G,K){let fe=K.queryCount=0,Qe=K.depCount=0;const bt=[],Yt=[];return"@"==G.name.charAt(0)&&K.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),G.definitions.forEach(qt=>{if(this._resetContextStyleTimingState(K),0==qt.type){const vi=qt,Fi=vi.name;Fi.toString().split(/\s*,\s*/).forEach(un=>{vi.name=un,bt.push(this.visitState(vi,K))}),vi.name=Fi}else if(1==qt.type){const vi=this.visitTransition(qt,K);fe+=vi.queryCount,Qe+=vi.depCount,Yt.push(vi)}else K.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:G.name,states:bt,transitions:Yt,queryCount:fe,depCount:Qe,options:null}}visitState(G,K){const fe=this.visitStyle(G.styles,K),Qe=G.options&&G.options.params||null;if(fe.containsDynamicStyles){const bt=new Set,Yt=Qe||{};if(fe.styles.forEach(qt=>{if(Bi(qt)){const vi=qt;Object.keys(vi).forEach(Fi=>{pt(vi[Fi]).forEach(un=>{Yt.hasOwnProperty(un)||bt.add(un)})})}}),bt.size){const qt=di(bt.values());K.errors.push(`state("${G.name}", ...) must define default values for all the following style substitutions: ${qt.join(", ")}`)}}return{type:0,name:G.name,style:fe,options:Qe?{params:Qe}:null}}visitTransition(G,K){K.queryCount=0,K.depCount=0;const fe=mt(this,Je(G.animation),K);return{type:1,matchers:ut(G.expr,K.errors),animation:fe,queryCount:K.queryCount,depCount:K.depCount,options:ft(G.options)}}visitSequence(G,K){return{type:2,steps:G.steps.map(fe=>mt(this,fe,K)),options:ft(G.options)}}visitGroup(G,K){const fe=K.currentTime;let Qe=0;const bt=G.steps.map(Yt=>{K.currentTime=fe;const qt=mt(this,Yt,K);return Qe=Math.max(Qe,K.currentTime),qt});return K.currentTime=Qe,{type:3,steps:bt,options:ft(G.options)}}visitAnimate(G,K){const fe=function(Ue,G){let K=null;if(Ue.hasOwnProperty("duration"))K=Ue;else if("number"==typeof Ue)return Ae(Bt(Ue,G).duration,0,"");const fe=Ue;if(fe.split(/\s+/).some(bt=>"{"==bt.charAt(0)&&"{"==bt.charAt(1))){const bt=Ae(0,0,"");return bt.dynamic=!0,bt.strValue=fe,bt}return K=K||Bt(fe,G),Ae(K.duration,K.delay,K.easing)}(G.timings,K.errors);K.currentAnimateTimings=fe;let Qe,bt=G.styles?G.styles:(0,t.oB)({});if(5==bt.type)Qe=this.visitKeyframes(bt,K);else{let Yt=G.styles,qt=!1;if(!Yt){qt=!0;const Fi={};fe.easing&&(Fi.easing=fe.easing),Yt=(0,t.oB)(Fi)}K.currentTime+=fe.duration+fe.delay;const vi=this.visitStyle(Yt,K);vi.isEmptyStep=qt,Qe=vi}return K.currentAnimateTimings=null,{type:4,timings:fe,style:Qe,options:null}}visitStyle(G,K){const fe=this._makeStyleAst(G,K);return this._validateStyleAst(fe,K),fe}_makeStyleAst(G,K){const fe=[];Array.isArray(G.styles)?G.styles.forEach(Yt=>{"string"==typeof Yt?Yt==t.l3?fe.push(Yt):K.errors.push(`The provided style string value ${Yt} is not allowed.`):fe.push(Yt)}):fe.push(G.styles);let Qe=!1,bt=null;return fe.forEach(Yt=>{if(Bi(Yt)){const qt=Yt,vi=qt.easing;if(vi&&(bt=vi,delete qt.easing),!Qe)for(let Fi in qt)if(qt[Fi].toString().indexOf("{{")>=0){Qe=!0;break}}}),{type:6,styles:fe,easing:bt,offset:G.offset,containsDynamicStyles:Qe,options:null}}_validateStyleAst(G,K){const fe=K.currentAnimateTimings;let Qe=K.currentTime,bt=K.currentTime;fe&&bt>0&&(bt-=fe.duration+fe.delay),G.styles.forEach(Yt=>{"string"!=typeof Yt&&Object.keys(Yt).forEach(qt=>{if(!this._driver.validateStyleProperty(qt))return void K.errors.push(`The provided animation property "${qt}" is not a supported CSS property for animations`);const vi=K.collectedStyles[K.currentQuerySelector],Fi=vi[qt];let un=!0;Fi&&(bt!=Qe&&bt>=Fi.startTime&&Qe<=Fi.endTime&&(K.errors.push(`The CSS property "${qt}" that exists between the times of "${Fi.startTime}ms" and "${Fi.endTime}ms" is also being animated in a parallel animation between the times of "${bt}ms" and "${Qe}ms"`),un=!1),bt=Fi.startTime),un&&(vi[qt]={startTime:bt,endTime:Qe}),K.options&&function(Ue,G,K){const fe=G.params||{},Qe=pt(Ue);Qe.length&&Qe.forEach(bt=>{fe.hasOwnProperty(bt)||K.push(`Unable to resolve the local animation param ${bt} in the given list of values`)})}(Yt[qt],K.options,K.errors)})})}visitKeyframes(G,K){const fe={type:5,styles:[],options:null};if(!K.currentAnimateTimings)return K.errors.push("keyframes() must be placed inside of a call to animate()"),fe;let bt=0;const Yt=[];let qt=!1,vi=!1,Fi=0;const un=G.steps.map(Dr=>{const Yr=this._makeStyleAst(Dr,K);let oo=null!=Yr.offset?Yr.offset:function(Ue){if("string"==typeof Ue)return null;let G=null;if(Array.isArray(Ue))Ue.forEach(K=>{if(Bi(K)&&K.hasOwnProperty("offset")){const fe=K;G=parseFloat(fe.offset),delete fe.offset}});else if(Bi(Ue)&&Ue.hasOwnProperty("offset")){const K=Ue;G=parseFloat(K.offset),delete K.offset}return G}(Yr.styles),ko=0;return null!=oo&&(bt++,ko=Yr.offset=oo),vi=vi||ko<0||ko>1,qt=qt||ko<Fi,Fi=ko,Yt.push(ko),Yr});vi&&K.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),qt&&K.errors.push("Please ensure that all keyframe offsets are in order");const Cn=G.steps.length;let er=0;bt>0&&bt<Cn?K.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==bt&&(er=1/(Cn-1));const tr=Cn-1,Pn=K.currentTime,rr=K.currentAnimateTimings,ar=rr.duration;return un.forEach((Dr,Yr)=>{const oo=er>0?Yr==tr?1:er*Yr:Yt[Yr],ko=oo*ar;K.currentTime=Pn+rr.delay+ko,rr.duration=ko,this._validateStyleAst(Dr,K),Dr.offset=oo,fe.styles.push(Dr)}),fe}visitReference(G,K){return{type:8,animation:mt(this,Je(G.animation),K),options:ft(G.options)}}visitAnimateChild(G,K){return K.depCount++,{type:9,options:ft(G.options)}}visitAnimateRef(G,K){return{type:10,animation:this.visitReference(G.animation,K),options:ft(G.options)}}visitQuery(G,K){const fe=K.currentQuerySelector,Qe=G.options||{};K.queryCount++,K.currentQuery=G;const[bt,Yt]=function(Ue){const G=!!Ue.split(/\s*,\s*/).find(K=>":self"==K);return G&&(Ue=Ue.replace(mi,"")),Ue=Ue.replace(/@\*/g,Oe).replace(/@\w+/g,K=>Oe+"-"+K.substr(1)).replace(/:animating/g,dt),[Ue,G]}(G.selector);K.currentQuerySelector=fe.length?fe+" "+bt:bt,z(K.collectedStyles,K.currentQuerySelector,{});const qt=mt(this,Je(G.animation),K);return K.currentQuery=null,K.currentQuerySelector=fe,{type:11,selector:bt,limit:Qe.limit||0,optional:!!Qe.optional,includeSelf:Yt,animation:qt,originalSelector:G.selector,options:ft(G.options)}}visitStagger(G,K){K.currentQuery||K.errors.push("stagger() can only be used inside of query()");const fe="full"===G.timings?{duration:0,delay:0,easing:"full"}:Bt(G.timings,K.errors,!0);return{type:12,animation:mt(this,Je(G.animation),K),timings:fe,options:null}}}class Mi{constructor(G){this.errors=G,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Bi(Ue){return!Array.isArray(Ue)&&"object"==typeof Ue}function ft(Ue){return Ue?(Ue=Zt(Ue)).params&&(Ue.params=function(Ue){return Ue?Zt(Ue):null}(Ue.params)):Ue={},Ue}function Ae(Ue,G,K){return{duration:Ue,delay:G,easing:K}}function le(Ue,G,K,fe,Qe,bt,Yt=null,qt=!1){return{type:1,element:Ue,keyframes:G,preStyleProps:K,postStyleProps:fe,duration:Qe,delay:bt,totalTime:Qe+bt,easing:Yt,subTimeline:qt}}class Pe{constructor(){this._map=new Map}get(G){return this._map.get(G)||[]}append(G,K){let fe=this._map.get(G);fe||this._map.set(G,fe=[]),fe.push(...K)}has(G){return this._map.has(G)}clear(){this._map.clear()}}const Gi=new RegExp(":enter","g"),En=new RegExp(":leave","g");function nr(Ue,G,K,fe,Qe,bt={},Yt={},qt,vi,Fi=[]){return(new li).buildKeyframes(Ue,G,K,fe,Qe,bt,Yt,qt,vi,Fi)}class li{buildKeyframes(G,K,fe,Qe,bt,Yt,qt,vi,Fi,un=[]){Fi=Fi||new Pe;const Cn=new kt(G,K,Fi,Qe,bt,un,[]);Cn.options=vi,Cn.currentTimeline.setStyles([Yt],null,Cn.errors,vi),mt(this,fe,Cn);const er=Cn.timelines.filter(tr=>tr.containsAnimation());if(er.length&&Object.keys(qt).length){const tr=er[er.length-1];tr.allowOnlyTimelineStyles()||tr.setStyles([qt],null,Cn.errors,vi)}return er.length?er.map(tr=>tr.buildKeyframes()):[le(K,[],[],[],0,0,"",!1)]}visitTrigger(G,K){}visitState(G,K){}visitTransition(G,K){}visitAnimateChild(G,K){const fe=K.subInstructions.get(K.element);if(fe){const Qe=K.createSubContext(G.options),bt=K.currentTimeline.currentTime,Yt=this._visitSubInstructions(fe,Qe,Qe.options);bt!=Yt&&K.transformIntoNewTimeline(Yt)}K.previousNode=G}visitAnimateRef(G,K){const fe=K.createSubContext(G.options);fe.transformIntoNewTimeline(),this.visitReference(G.animation,fe),K.transformIntoNewTimeline(fe.currentTimeline.currentTime),K.previousNode=G}_visitSubInstructions(G,K,fe){let bt=K.currentTimeline.currentTime;const Yt=null!=fe.duration?vt(fe.duration):null,qt=null!=fe.delay?vt(fe.delay):null;return 0!==Yt&&G.forEach(vi=>{const Fi=K.appendInstructionToTimeline(vi,Yt,qt);bt=Math.max(bt,Fi.duration+Fi.delay)}),bt}visitReference(G,K){K.updateOptions(G.options,!0),mt(this,G.animation,K),K.previousNode=G}visitSequence(G,K){const fe=K.subContextCount;let Qe=K;const bt=G.options;if(bt&&(bt.params||bt.delay)&&(Qe=K.createSubContext(bt),Qe.transformIntoNewTimeline(),null!=bt.delay)){6==Qe.previousNode.type&&(Qe.currentTimeline.snapshotCurrentStyles(),Qe.previousNode=$t);const Yt=vt(bt.delay);Qe.delayNextStep(Yt)}G.steps.length&&(G.steps.forEach(Yt=>mt(this,Yt,Qe)),Qe.currentTimeline.applyStylesToKeyframe(),Qe.subContextCount>fe&&Qe.transformIntoNewTimeline()),K.previousNode=G}visitGroup(G,K){const fe=[];let Qe=K.currentTimeline.currentTime;const bt=G.options&&G.options.delay?vt(G.options.delay):0;G.steps.forEach(Yt=>{const qt=K.createSubContext(G.options);bt&&qt.delayNextStep(bt),mt(this,Yt,qt),Qe=Math.max(Qe,qt.currentTimeline.currentTime),fe.push(qt.currentTimeline)}),fe.forEach(Yt=>K.currentTimeline.mergeTimelineCollectedStyles(Yt)),K.transformIntoNewTimeline(Qe),K.previousNode=G}_visitTiming(G,K){if(G.dynamic){const fe=G.strValue;return Bt(K.params?jt(fe,K.params,K.errors):fe,K.errors)}return{duration:G.duration,delay:G.delay,easing:G.easing}}visitAnimate(G,K){const fe=K.currentAnimateTimings=this._visitTiming(G.timings,K),Qe=K.currentTimeline;fe.delay&&(K.incrementTime(fe.delay),Qe.snapshotCurrentStyles());const bt=G.style;5==bt.type?this.visitKeyframes(bt,K):(K.incrementTime(fe.duration),this.visitStyle(bt,K),Qe.applyStylesToKeyframe()),K.currentAnimateTimings=null,K.previousNode=G}visitStyle(G,K){const fe=K.currentTimeline,Qe=K.currentAnimateTimings;!Qe&&fe.getCurrentStyleProperties().length&&fe.forwardFrame();const bt=Qe&&Qe.easing||G.easing;G.isEmptyStep?fe.applyEmptyStep(bt):fe.setStyles(G.styles,bt,K.errors,K.options),K.previousNode=G}visitKeyframes(G,K){const fe=K.currentAnimateTimings,Qe=K.currentTimeline.duration,bt=fe.duration,qt=K.createSubContext().currentTimeline;qt.easing=fe.easing,G.styles.forEach(vi=>{qt.forwardTime((vi.offset||0)*bt),qt.setStyles(vi.styles,vi.easing,K.errors,K.options),qt.applyStylesToKeyframe()}),K.currentTimeline.mergeTimelineCollectedStyles(qt),K.transformIntoNewTimeline(Qe+bt),K.previousNode=G}visitQuery(G,K){const fe=K.currentTimeline.currentTime,Qe=G.options||{},bt=Qe.delay?vt(Qe.delay):0;bt&&(6===K.previousNode.type||0==fe&&K.currentTimeline.getCurrentStyleProperties().length)&&(K.currentTimeline.snapshotCurrentStyles(),K.previousNode=$t);let Yt=fe;const qt=K.invokeQuery(G.selector,G.originalSelector,G.limit,G.includeSelf,!!Qe.optional,K.errors);K.currentQueryTotal=qt.length;let vi=null;qt.forEach((Fi,un)=>{K.currentQueryIndex=un;const Cn=K.createSubContext(G.options,Fi);bt&&Cn.delayNextStep(bt),Fi===K.element&&(vi=Cn.currentTimeline),mt(this,G.animation,Cn),Cn.currentTimeline.applyStylesToKeyframe(),Yt=Math.max(Yt,Cn.currentTimeline.currentTime)}),K.currentQueryIndex=0,K.currentQueryTotal=0,K.transformIntoNewTimeline(Yt),vi&&(K.currentTimeline.mergeTimelineCollectedStyles(vi),K.currentTimeline.snapshotCurrentStyles()),K.previousNode=G}visitStagger(G,K){const fe=K.parentContext,Qe=K.currentTimeline,bt=G.timings,Yt=Math.abs(bt.duration),qt=Yt*(K.currentQueryTotal-1);let vi=Yt*K.currentQueryIndex;switch(bt.duration<0?"reverse":bt.easing){case"reverse":vi=qt-vi;break;case"full":vi=fe.currentStaggerTime}const un=K.currentTimeline;vi&&un.delayNextStep(vi);const Cn=un.currentTime;mt(this,G.animation,K),K.previousNode=G,fe.currentStaggerTime=Qe.currentTime-Cn+(Qe.startTime-fe.currentTimeline.startTime)}}const $t={};class kt{constructor(G,K,fe,Qe,bt,Yt,qt,vi){this._driver=G,this.element=K,this.subInstructions=fe,this._enterClassName=Qe,this._leaveClassName=bt,this.errors=Yt,this.timelines=qt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$t,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=vi||new ui(this._driver,K,0),qt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(G,K){if(!G)return;const fe=G;let Qe=this.options;null!=fe.duration&&(Qe.duration=vt(fe.duration)),null!=fe.delay&&(Qe.delay=vt(fe.delay));const bt=fe.params;if(bt){let Yt=Qe.params;Yt||(Yt=this.options.params={}),Object.keys(bt).forEach(qt=>{(!K||!Yt.hasOwnProperty(qt))&&(Yt[qt]=jt(bt[qt],Yt,this.errors))})}}_copyOptions(){const G={};if(this.options){const K=this.options.params;if(K){const fe=G.params={};Object.keys(K).forEach(Qe=>{fe[Qe]=K[Qe]})}}return G}createSubContext(G=null,K,fe){const Qe=K||this.element,bt=new kt(this._driver,Qe,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Qe,fe||0));return bt.previousNode=this.previousNode,bt.currentAnimateTimings=this.currentAnimateTimings,bt.options=this._copyOptions(),bt.updateOptions(G),bt.currentQueryIndex=this.currentQueryIndex,bt.currentQueryTotal=this.currentQueryTotal,bt.parentContext=this,this.subContextCount++,bt}transformIntoNewTimeline(G){return this.previousNode=$t,this.currentTimeline=this.currentTimeline.fork(this.element,G),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(G,K,fe){const Qe={duration:null!=K?K:G.duration,delay:this.currentTimeline.currentTime+(null!=fe?fe:0)+G.delay,easing:""},bt=new Oi(this._driver,G.element,G.keyframes,G.preStyleProps,G.postStyleProps,Qe,G.stretchStartingKeyframe);return this.timelines.push(bt),Qe}incrementTime(G){this.currentTimeline.forwardTime(this.currentTimeline.duration+G)}delayNextStep(G){G>0&&this.currentTimeline.delayNextStep(G)}invokeQuery(G,K,fe,Qe,bt,Yt){let qt=[];if(Qe&&qt.push(this.element),G.length>0){G=(G=G.replace(Gi,"."+this._enterClassName)).replace(En,"."+this._leaveClassName);let Fi=this._driver.query(this.element,G,1!=fe);0!==fe&&(Fi=fe<0?Fi.slice(Fi.length+fe,Fi.length):Fi.slice(0,fe)),qt.push(...Fi)}return!bt&&0==qt.length&&Yt.push(`\`query("${K}")\` returned zero elements. (Use \`query("${K}", { optional: true })\` if you wish to allow this.)`),qt}}class ui{constructor(G,K,fe,Qe){this._driver=G,this.element=K,this.startTime=fe,this._elementTimelineStylesLookup=Qe,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(K),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(K,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(G){const K=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||K?(this.forwardTime(this.currentTime+G),K&&this.snapshotCurrentStyles()):this.startTime+=G}fork(G,K){return this.applyStylesToKeyframe(),new ui(this._driver,G,K||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(G){this.applyStylesToKeyframe(),this.duration=G,this._loadKeyframe()}_updateStyle(G,K){this._localTimelineStyles[G]=K,this._globalTimelineStyles[G]=K,this._styleSummary[G]={time:this.currentTime,value:K}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(G){G&&(this._previousKeyframe.easing=G),Object.keys(this._globalTimelineStyles).forEach(K=>{this._backFill[K]=this._globalTimelineStyles[K]||t.l3,this._currentKeyframe[K]=t.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(G,K,fe,Qe){K&&(this._previousKeyframe.easing=K);const bt=Qe&&Qe.params||{},Yt=function(Ue,G){const K={};let fe;return Ue.forEach(Qe=>{"*"===Qe?(fe=fe||Object.keys(G),fe.forEach(bt=>{K[bt]=t.l3})):ii(Qe,!1,K)}),K}(G,this._globalTimelineStyles);Object.keys(Yt).forEach(qt=>{const vi=jt(Yt[qt],bt,fe);this._pendingStyles[qt]=vi,this._localTimelineStyles.hasOwnProperty(qt)||(this._backFill[qt]=this._globalTimelineStyles.hasOwnProperty(qt)?this._globalTimelineStyles[qt]:t.l3),this._updateStyle(qt,vi)})}applyStylesToKeyframe(){const G=this._pendingStyles,K=Object.keys(G);0!=K.length&&(this._pendingStyles={},K.forEach(fe=>{this._currentKeyframe[fe]=G[fe]}),Object.keys(this._localTimelineStyles).forEach(fe=>{this._currentKeyframe.hasOwnProperty(fe)||(this._currentKeyframe[fe]=this._localTimelineStyles[fe])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(G=>{const K=this._localTimelineStyles[G];this._pendingStyles[G]=K,this._updateStyle(G,K)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const G=[];for(let K in this._currentKeyframe)G.push(K);return G}mergeTimelineCollectedStyles(G){Object.keys(G._styleSummary).forEach(K=>{const fe=this._styleSummary[K],Qe=G._styleSummary[K];(!fe||Qe.time>fe.time)&&this._updateStyle(K,Qe.value)})}buildKeyframes(){this.applyStylesToKeyframe();const G=new Set,K=new Set,fe=1===this._keyframes.size&&0===this.duration;let Qe=[];this._keyframes.forEach((qt,vi)=>{const Fi=ii(qt,!0);Object.keys(Fi).forEach(un=>{const Cn=Fi[un];Cn==t.k1?G.add(un):Cn==t.l3&&K.add(un)}),fe||(Fi.offset=vi/this.duration),Qe.push(Fi)});const bt=G.size?di(G.values()):[],Yt=K.size?di(K.values()):[];if(fe){const qt=Qe[0],vi=Zt(qt);qt.offset=0,vi.offset=1,Qe=[qt,vi]}return le(this.element,Qe,bt,Yt,this.duration,this.startTime,this.easing,!1)}}class Oi extends ui{constructor(G,K,fe,Qe,bt,Yt,qt=!1){super(G,K,Yt.delay),this.keyframes=fe,this.preStyleProps=Qe,this.postStyleProps=bt,this._stretchStartingKeyframe=qt,this.timings={duration:Yt.duration,delay:Yt.delay,easing:Yt.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let G=this.keyframes,{delay:K,duration:fe,easing:Qe}=this.timings;if(this._stretchStartingKeyframe&&K){const bt=[],Yt=fe+K,qt=K/Yt,vi=ii(G[0],!1);vi.offset=0,bt.push(vi);const Fi=ii(G[0],!1);Fi.offset=fn(qt),bt.push(Fi);const un=G.length-1;for(let Cn=1;Cn<=un;Cn++){let er=ii(G[Cn],!1);er.offset=fn((K+er.offset*fe)/Yt),bt.push(er)}fe=Yt,K=0,Qe="",G=bt}return le(this.element,G,this.preStyleProps,this.postStyleProps,fe,K,Qe,!0)}}function fn(Ue,G=3){const K=Math.pow(10,G-1);return Math.round(Ue*K)/K}class Tr{}class no extends Tr{normalizePropertyName(G,K){return et(G)}normalizeStyleValue(G,K,fe,Qe){let bt="";const Yt=fe.toString().trim();if(mo[K]&&0!==fe&&"0"!==fe)if("number"==typeof fe)bt="px";else{const qt=fe.match(/^[+-]?[\d\.]+([a-z]*)$/);qt&&0==qt[1].length&&Qe.push(`Please provide a CSS unit value for ${G}:${fe}`)}return Yt+bt}}const mo=(()=>function(Ue){const G={};return Ue.forEach(K=>G[K]=!0),G}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function pr(Ue,G,K,fe,Qe,bt,Yt,qt,vi,Fi,un,Cn,er){return{type:0,element:Ue,triggerName:G,isRemovalTransition:Qe,fromState:K,fromStyles:bt,toState:fe,toStyles:Yt,timelines:qt,queriedElements:vi,preStyleProps:Fi,postStyleProps:un,totalTime:Cn,errors:er}}const Ro={};class cr{constructor(G,K,fe){this._triggerName=G,this.ast=K,this._stateStyles=fe}match(G,K,fe,Qe){return function(Ue,G,K,fe,Qe){return Ue.some(bt=>bt(G,K,fe,Qe))}(this.ast.matchers,G,K,fe,Qe)}buildStyles(G,K,fe){const Qe=this._stateStyles["*"],bt=this._stateStyles[G],Yt=Qe?Qe.buildStyles(K,fe):{};return bt?bt.buildStyles(K,fe):Yt}build(G,K,fe,Qe,bt,Yt,qt,vi,Fi,un){const Cn=[],er=this.ast.options&&this.ast.options.params||Ro,Pn=this.buildStyles(fe,qt&&qt.params||Ro,Cn),rr=vi&&vi.params||Ro,ar=this.buildStyles(Qe,rr,Cn),Dr=new Set,Yr=new Map,oo=new Map,ko="void"===Qe,Ha={params:Object.assign(Object.assign({},er),rr)},Ws=un?[]:nr(G,K,this.ast.animation,bt,Yt,Pn,ar,Ha,Fi,Cn);let Co=0;if(Ws.forEach(os=>{Co=Math.max(os.duration+os.delay,Co)}),Cn.length)return pr(K,this._triggerName,fe,Qe,ko,Pn,ar,[],[],Yr,oo,Co,Cn);Ws.forEach(os=>{const Rs=os.element,ul=z(Yr,Rs,{});os.preStyleProps.forEach(js=>ul[js]=!0);const xa=z(oo,Rs,{});os.postStyleProps.forEach(js=>xa[js]=!0),Rs!==K&&Dr.add(Rs)});const xs=di(Dr.values());return pr(K,this._triggerName,fe,Qe,ko,Pn,ar,Ws,xs,Yr,oo,Co)}}class Gn{constructor(G,K,fe){this.styles=G,this.defaultParams=K,this.normalizer=fe}buildStyles(G,K){const fe={},Qe=Zt(this.defaultParams);return Object.keys(G).forEach(bt=>{const Yt=G[bt];null!=Yt&&(Qe[bt]=Yt)}),this.styles.styles.forEach(bt=>{if("string"!=typeof bt){const Yt=bt;Object.keys(Yt).forEach(qt=>{let vi=Yt[qt];vi.length>1&&(vi=jt(vi,Qe,K));const Fi=this.normalizer.normalizePropertyName(qt,K);vi=this.normalizer.normalizeStyleValue(qt,Fi,vi,K),fe[Fi]=vi})}}),fe}}class Hr{constructor(G,K,fe){this.name=G,this.ast=K,this._normalizer=fe,this.transitionFactories=[],this.states={},K.states.forEach(Qe=>{this.states[Qe.name]=new Gn(Qe.style,Qe.options&&Qe.options.params||{},fe)}),xr(this.states,"true","1"),xr(this.states,"false","0"),K.transitions.forEach(Qe=>{this.transitionFactories.push(new cr(G,Qe,this.states))}),this.fallbackTransition=function(Ue,G,K){return new cr(Ue,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Yt,qt)=>!0],options:null,queryCount:0,depCount:0},G)}(G,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(G,K,fe,Qe){return this.transitionFactories.find(Yt=>Yt.match(G,K,fe,Qe))||null}matchStyles(G,K,fe){return this.fallbackTransition.buildStyles(G,K,fe)}}function xr(Ue,G,K){Ue.hasOwnProperty(G)?Ue.hasOwnProperty(K)||(Ue[K]=Ue[G]):Ue.hasOwnProperty(K)&&(Ue[G]=Ue[K])}const Qr=new Pe;class Rr{constructor(G,K,fe){this.bodyNode=G,this._driver=K,this._normalizer=fe,this._animations={},this._playersById={},this.players=[]}register(G,K){const fe=[],Qe=Ji(this._driver,K,fe);if(fe.length)throw new Error(`Unable to build the animation due to the following errors: ${fe.join("\n")}`);this._animations[G]=Qe}_buildPlayer(G,K,fe){const Qe=G.element,bt=d(0,this._normalizer,0,G.keyframes,K,fe);return this._driver.animate(Qe,bt,G.duration,G.delay,G.easing,[],!0)}create(G,K,fe={}){const Qe=[],bt=this._animations[G];let Yt;const qt=new Map;if(bt?(Yt=nr(this._driver,K,bt,ue,ie,{},{},fe,Qr,Qe),Yt.forEach(un=>{const Cn=z(qt,un.element,{});un.postStyleProps.forEach(er=>Cn[er]=null)})):(Qe.push("The requested animation doesn't exist or has already been destroyed"),Yt=[]),Qe.length)throw new Error(`Unable to create the animation due to the following errors: ${Qe.join("\n")}`);qt.forEach((un,Cn)=>{Object.keys(un).forEach(er=>{un[er]=this._driver.computeStyle(Cn,er,t.l3)})});const Fi=a(Yt.map(un=>{const Cn=qt.get(un.element);return this._buildPlayer(un,{},Cn)}));return this._playersById[G]=Fi,Fi.onDestroy(()=>this.destroy(G)),this.players.push(Fi),Fi}destroy(G){const K=this._getPlayer(G);K.destroy(),delete this._playersById[G];const fe=this.players.indexOf(K);fe>=0&&this.players.splice(fe,1)}_getPlayer(G){const K=this._playersById[G];if(!K)throw new Error(`Unable to find the timeline player referenced by ${G}`);return K}listen(G,K,fe,Qe){const bt=B(K,"","","");return C(this._getPlayer(G),fe,bt,Qe),()=>{}}command(G,K,fe,Qe){if("register"==fe)return void this.register(G,Qe[0]);if("create"==fe)return void this.create(G,K,Qe[0]||{});const bt=this._getPlayer(G);switch(fe){case"play":bt.play();break;case"pause":bt.pause();break;case"reset":bt.reset();break;case"restart":bt.restart();break;case"finish":bt.finish();break;case"init":bt.init();break;case"setPosition":bt.setPosition(parseFloat(Qe[0]));break;case"destroy":this.destroy(G)}}}const Vi="ng-animate-queued",Wn="ng-animate-disabled",Ki=[],zi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Zn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Yn="__ng_removed";class sr{constructor(G,K=""){this.namespaceId=K;const fe=G&&G.hasOwnProperty("value");if(this.value=null!=(Ue=fe?G.value:G)?Ue:null,fe){const bt=Zt(G);delete bt.value,this.options=bt}else this.options={};var Ue;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(G){const K=G.params;if(K){const fe=this.options.params;Object.keys(K).forEach(Qe=>{null==fe[Qe]&&(fe[Qe]=K[Qe])})}}}const Bn="void",Ao=new sr(Bn);class Yo{constructor(G,K,fe){this.id=G,this.hostElement=K,this._engine=fe,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+G,Do(K,this._hostClassName)}listen(G,K,fe,Qe){if(!this._triggers.hasOwnProperty(K))throw new Error(`Unable to listen on the animation trigger event "${fe}" because the animation trigger "${K}" doesn't exist!`);if(null==fe||0==fe.length)throw new Error(`Unable to listen on the animation trigger "${K}" because the provided event is undefined!`);if("start"!=(Ue=fe)&&"done"!=Ue)throw new Error(`The provided animation trigger event "${fe}" for the animation trigger "${K}" is not supported!`);var Ue;const bt=z(this._elementListeners,G,[]),Yt={name:K,phase:fe,callback:Qe};bt.push(Yt);const qt=z(this._engine.statesByElement,G,{});return qt.hasOwnProperty(K)||(Do(G,ht),Do(G,ht+"-"+K),qt[K]=Ao),()=>{this._engine.afterFlush(()=>{const vi=bt.indexOf(Yt);vi>=0&&bt.splice(vi,1),this._triggers[K]||delete qt[K]})}}register(G,K){return!this._triggers[G]&&(this._triggers[G]=K,!0)}_getTrigger(G){const K=this._triggers[G];if(!K)throw new Error(`The provided animation trigger "${G}" has not been registered!`);return K}trigger(G,K,fe,Qe=!0){const bt=this._getTrigger(K),Yt=new _o(this.id,K,G);let qt=this._engine.statesByElement.get(G);qt||(Do(G,ht),Do(G,ht+"-"+K),this._engine.statesByElement.set(G,qt={}));let vi=qt[K];const Fi=new sr(fe,this.id);if(!(fe&&fe.hasOwnProperty("value"))&&vi&&Fi.absorbOptions(vi.options),qt[K]=Fi,vi||(vi=Ao),Fi.value!==Bn&&vi.value===Fi.value){if(!function(Ue,G){const K=Object.keys(Ue),fe=Object.keys(G);if(K.length!=fe.length)return!1;for(let Qe=0;Qe<K.length;Qe++){const bt=K[Qe];if(!G.hasOwnProperty(bt)||Ue[bt]!==G[bt])return!1}return!0}(vi.params,Fi.params)){const rr=[],ar=bt.matchStyles(vi.value,vi.params,rr),Dr=bt.matchStyles(Fi.value,Fi.params,rr);rr.length?this._engine.reportError(rr):this._engine.afterFlush(()=>{Tt(G,ar),Be(G,Dr)})}return}const er=z(this._engine.playersByElement,G,[]);er.forEach(rr=>{rr.namespaceId==this.id&&rr.triggerName==K&&rr.queued&&rr.destroy()});let tr=bt.matchTransition(vi.value,Fi.value,G,Fi.params),Pn=!1;if(!tr){if(!Qe)return;tr=bt.fallbackTransition,Pn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:G,triggerName:K,transition:tr,fromState:vi,toState:Fi,player:Yt,isFallbackTransition:Pn}),Pn||(Do(G,Vi),Yt.onStart(()=>{rs(G,Vi)})),Yt.onDone(()=>{let rr=this.players.indexOf(Yt);rr>=0&&this.players.splice(rr,1);const ar=this._engine.playersByElement.get(G);if(ar){let Dr=ar.indexOf(Yt);Dr>=0&&ar.splice(Dr,1)}}),this.players.push(Yt),er.push(Yt),Yt}deregister(G){delete this._triggers[G],this._engine.statesByElement.forEach((K,fe)=>{delete K[G]}),this._elementListeners.forEach((K,fe)=>{this._elementListeners.set(fe,K.filter(Qe=>Qe.name!=G))})}clearElementCache(G){this._engine.statesByElement.delete(G),this._elementListeners.delete(G);const K=this._engine.playersByElement.get(G);K&&(K.forEach(fe=>fe.destroy()),this._engine.playersByElement.delete(G))}_signalRemovalForInnerTriggers(G,K){const fe=this._engine.driver.query(G,Oe,!0);fe.forEach(Qe=>{if(Qe[Yn])return;const bt=this._engine.fetchNamespacesByElement(Qe);bt.size?bt.forEach(Yt=>Yt.triggerLeaveAnimation(Qe,K,!1,!0)):this.clearElementCache(Qe)}),this._engine.afterFlushAnimationsDone(()=>fe.forEach(Qe=>this.clearElementCache(Qe)))}triggerLeaveAnimation(G,K,fe,Qe){const bt=this._engine.statesByElement.get(G);if(bt){const Yt=[];if(Object.keys(bt).forEach(qt=>{if(this._triggers[qt]){const vi=this.trigger(G,qt,Bn,Qe);vi&&Yt.push(vi)}}),Yt.length)return this._engine.markElementAsRemoved(this.id,G,!0,K),fe&&a(Yt).onDone(()=>this._engine.processLeaveNode(G)),!0}return!1}prepareLeaveAnimationListeners(G){const K=this._elementListeners.get(G),fe=this._engine.statesByElement.get(G);if(K&&fe){const Qe=new Set;K.forEach(bt=>{const Yt=bt.name;if(Qe.has(Yt))return;Qe.add(Yt);const vi=this._triggers[Yt].fallbackTransition,Fi=fe[Yt]||Ao,un=new sr(Bn),Cn=new _o(this.id,Yt,G);this._engine.totalQueuedPlayers++,this._queue.push({element:G,triggerName:Yt,transition:vi,fromState:Fi,toState:un,player:Cn,isFallbackTransition:!0})})}}removeNode(G,K){const fe=this._engine;if(G.childElementCount&&this._signalRemovalForInnerTriggers(G,K),this.triggerLeaveAnimation(G,K,!0))return;let Qe=!1;if(fe.totalAnimations){const bt=fe.players.length?fe.playersByQueriedElement.get(G):[];if(bt&&bt.length)Qe=!0;else{let Yt=G;for(;Yt=Yt.parentNode;)if(fe.statesByElement.get(Yt)){Qe=!0;break}}}if(this.prepareLeaveAnimationListeners(G),Qe)fe.markElementAsRemoved(this.id,G,!1,K);else{const bt=G[Yn];(!bt||bt===zi)&&(fe.afterFlush(()=>this.clearElementCache(G)),fe.destroyInnerAnimations(G),fe._onRemovalComplete(G,K))}}insertNode(G,K){Do(G,this._hostClassName)}drainQueuedTransitions(G){const K=[];return this._queue.forEach(fe=>{const Qe=fe.player;if(Qe.destroyed)return;const bt=fe.element,Yt=this._elementListeners.get(bt);Yt&&Yt.forEach(qt=>{if(qt.name==fe.triggerName){const vi=B(bt,fe.triggerName,fe.fromState.value,fe.toState.value);vi._data=G,C(fe.player,qt.phase,vi,qt.callback)}}),Qe.markedForDestroy?this._engine.afterFlush(()=>{Qe.destroy()}):K.push(fe)}),this._queue=[],K.sort((fe,Qe)=>{const bt=fe.transition.ast.depCount,Yt=Qe.transition.ast.depCount;return 0==bt||0==Yt?bt-Yt:this._engine.driver.containsElement(fe.element,Qe.element)?1:-1})}destroy(G){this.players.forEach(K=>K.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,G)}elementContainsData(G){let K=!1;return this._elementListeners.has(G)&&(K=!0),K=!!this._queue.find(fe=>fe.element===G)||K,K}}class ro{constructor(G,K,fe){this.bodyNode=G,this.driver=K,this._normalizer=fe,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Qe,bt)=>{}}_onRemovalComplete(G,K){this.onRemovalComplete(G,K)}get queuedPlayers(){const G=[];return this._namespaceList.forEach(K=>{K.players.forEach(fe=>{fe.queued&&G.push(fe)})}),G}createNamespace(G,K){const fe=new Yo(G,K,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,K)?this._balanceNamespaceList(fe,K):(this.newHostElements.set(K,fe),this.collectEnterElement(K)),this._namespaceLookup[G]=fe}_balanceNamespaceList(G,K){const fe=this._namespaceList.length-1;if(fe>=0){let Qe=!1;for(let bt=fe;bt>=0;bt--)if(this.driver.containsElement(this._namespaceList[bt].hostElement,K)){this._namespaceList.splice(bt+1,0,G),Qe=!0;break}Qe||this._namespaceList.splice(0,0,G)}else this._namespaceList.push(G);return this.namespacesByHostElement.set(K,G),G}register(G,K){let fe=this._namespaceLookup[G];return fe||(fe=this.createNamespace(G,K)),fe}registerTrigger(G,K,fe){let Qe=this._namespaceLookup[G];Qe&&Qe.register(K,fe)&&this.totalAnimations++}destroy(G,K){if(!G)return;const fe=this._fetchNamespace(G);this.afterFlush(()=>{this.namespacesByHostElement.delete(fe.hostElement),delete this._namespaceLookup[G];const Qe=this._namespaceList.indexOf(fe);Qe>=0&&this._namespaceList.splice(Qe,1)}),this.afterFlushAnimationsDone(()=>fe.destroy(K))}_fetchNamespace(G){return this._namespaceLookup[G]}fetchNamespacesByElement(G){const K=new Set,fe=this.statesByElement.get(G);if(fe){const Qe=Object.keys(fe);for(let bt=0;bt<Qe.length;bt++){const Yt=fe[Qe[bt]].namespaceId;if(Yt){const qt=this._fetchNamespace(Yt);qt&&K.add(qt)}}}return K}trigger(G,K,fe,Qe){if(Xo(K)){const bt=this._fetchNamespace(G);if(bt)return bt.trigger(K,fe,Qe),!0}return!1}insertNode(G,K,fe,Qe){if(!Xo(K))return;const bt=K[Yn];if(bt&&bt.setForRemoval){bt.setForRemoval=!1,bt.setForMove=!0;const Yt=this.collectedLeaveElements.indexOf(K);Yt>=0&&this.collectedLeaveElements.splice(Yt,1)}if(G){const Yt=this._fetchNamespace(G);Yt&&Yt.insertNode(K,fe)}Qe&&this.collectEnterElement(K)}collectEnterElement(G){this.collectedEnterElements.push(G)}markElementAsDisabled(G,K){K?this.disabledNodes.has(G)||(this.disabledNodes.add(G),Do(G,Wn)):this.disabledNodes.has(G)&&(this.disabledNodes.delete(G),rs(G,Wn))}removeNode(G,K,fe,Qe){if(Xo(K)){const bt=G?this._fetchNamespace(G):null;if(bt?bt.removeNode(K,Qe):this.markElementAsRemoved(G,K,!1,Qe),fe){const Yt=this.namespacesByHostElement.get(K);Yt&&Yt.id!==G&&Yt.removeNode(K,Qe)}}else this._onRemovalComplete(K,Qe)}markElementAsRemoved(G,K,fe,Qe){this.collectedLeaveElements.push(K),K[Yn]={namespaceId:G,setForRemoval:Qe,hasAnimation:fe,removedBeforeQueried:!1}}listen(G,K,fe,Qe,bt){return Xo(K)?this._fetchNamespace(G).listen(K,fe,Qe,bt):()=>{}}_buildInstruction(G,K,fe,Qe,bt){return G.transition.build(this.driver,G.element,G.fromState.value,G.toState.value,fe,Qe,G.fromState.options,G.toState.options,K,bt)}destroyInnerAnimations(G){let K=this.driver.query(G,Oe,!0);K.forEach(fe=>this.destroyActiveAnimationsForElement(fe)),0!=this.playersByQueriedElement.size&&(K=this.driver.query(G,dt,!0),K.forEach(fe=>this.finishActiveQueriedAnimationOnElement(fe)))}destroyActiveAnimationsForElement(G){const K=this.playersByElement.get(G);K&&K.forEach(fe=>{fe.queued?fe.markedForDestroy=!0:fe.destroy()})}finishActiveQueriedAnimationOnElement(G){const K=this.playersByQueriedElement.get(G);K&&K.forEach(fe=>fe.finish())}whenRenderingDone(){return new Promise(G=>{if(this.players.length)return a(this.players).onDone(()=>G());G()})}processLeaveNode(G){var K;const fe=G[Yn];if(fe&&fe.setForRemoval){if(G[Yn]=zi,fe.namespaceId){this.destroyInnerAnimations(G);const Qe=this._fetchNamespace(fe.namespaceId);Qe&&Qe.clearElementCache(G)}this._onRemovalComplete(G,fe.setForRemoval)}(null===(K=G.classList)||void 0===K?void 0:K.contains(Wn))&&this.markElementAsDisabled(G,!1),this.driver.query(G,".ng-animate-disabled",!0).forEach(Qe=>{this.markElementAsDisabled(Qe,!1)})}flush(G=-1){let K=[];if(this.newHostElements.size&&(this.newHostElements.forEach((fe,Qe)=>this._balanceNamespaceList(fe,Qe)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let fe=0;fe<this.collectedEnterElements.length;fe++)Do(this.collectedEnterElements[fe],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const fe=[];try{K=this._flushAnimations(fe,G)}finally{for(let Qe=0;Qe<fe.length;Qe++)fe[Qe]()}}else for(let fe=0;fe<this.collectedLeaveElements.length;fe++)this.processLeaveNode(this.collectedLeaveElements[fe]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(fe=>fe()),this._flushFns=[],this._whenQuietFns.length){const fe=this._whenQuietFns;this._whenQuietFns=[],K.length?a(K).onDone(()=>{fe.forEach(Qe=>Qe())}):fe.forEach(Qe=>Qe())}}reportError(G){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${G.join("\n")}`)}_flushAnimations(G,K){const fe=new Pe,Qe=[],bt=new Map,Yt=[],qt=new Map,vi=new Map,Fi=new Map,un=new Set;this.disabledNodes.forEach(xn=>{un.add(xn);const On=this.driver.query(xn,".ng-animate-queued",!0);for(let lr=0;lr<On.length;lr++)un.add(On[lr])});const Cn=this.bodyNode,er=Array.from(this.statesByElement.keys()),tr=Bo(er,this.collectedEnterElements),Pn=new Map;let rr=0;tr.forEach((xn,On)=>{const lr=ue+rr++;Pn.set(On,lr),xn.forEach(hr=>Do(hr,lr))});const ar=[],Dr=new Set,Yr=new Set;for(let xn=0;xn<this.collectedLeaveElements.length;xn++){const On=this.collectedLeaveElements[xn],lr=On[Yn];lr&&lr.setForRemoval&&(ar.push(On),Dr.add(On),lr.hasAnimation?this.driver.query(On,".ng-star-inserted",!0).forEach(hr=>Dr.add(hr)):Yr.add(On))}const oo=new Map,ko=Bo(er,Array.from(Dr));ko.forEach((xn,On)=>{const lr=ie+rr++;oo.set(On,lr),xn.forEach(hr=>Do(hr,lr))}),G.push(()=>{tr.forEach((xn,On)=>{const lr=Pn.get(On);xn.forEach(hr=>rs(hr,lr))}),ko.forEach((xn,On)=>{const lr=oo.get(On);xn.forEach(hr=>rs(hr,lr))}),ar.forEach(xn=>{this.processLeaveNode(xn)})});const Ha=[],Ws=[];for(let xn=this._namespaceList.length-1;xn>=0;xn--)this._namespaceList[xn].drainQueuedTransitions(K).forEach(lr=>{const hr=lr.player,Cr=lr.element;if(Ha.push(hr),this.collectedEnterElements.length){const Ur=Cr[Yn];if(Ur&&Ur.setForMove)return void hr.destroy()}const is=!Cn||!this.driver.containsElement(Cn,Cr),Ar=oo.get(Cr),ta=Pn.get(Cr),To=this._buildInstruction(lr,fe,ta,Ar,is);if(To.errors&&To.errors.length)return void Ws.push(To);if(is)return hr.onStart(()=>Tt(Cr,To.fromStyles)),hr.onDestroy(()=>Be(Cr,To.toStyles)),void Qe.push(hr);if(lr.isFallbackTransition)return hr.onStart(()=>Tt(Cr,To.fromStyles)),hr.onDestroy(()=>Be(Cr,To.toStyles)),void Qe.push(hr);const El=[];To.timelines.forEach(Ur=>{Ur.stretchStartingKeyframe=!0,this.disabledNodes.has(Ur.element)||El.push(Ur)}),To.timelines=El,fe.append(Cr,To.timelines),Yt.push({instruction:To,player:hr,element:Cr}),To.queriedElements.forEach(Ur=>z(qt,Ur,[]).push(hr)),To.preStyleProps.forEach((Ur,ua)=>{const _s=Object.keys(Ur);if(_s.length){let zs=vi.get(ua);zs||vi.set(ua,zs=new Set),_s.forEach(As=>zs.add(As))}}),To.postStyleProps.forEach((Ur,ua)=>{const _s=Object.keys(Ur);let zs=Fi.get(ua);zs||Fi.set(ua,zs=new Set),_s.forEach(As=>zs.add(As))})});if(Ws.length){const xn=[];Ws.forEach(On=>{xn.push(`@${On.triggerName} has failed due to:\n`),On.errors.forEach(lr=>xn.push(`- ${lr}\n`))}),Ha.forEach(On=>On.destroy()),this.reportError(xn)}const Co=new Map,xs=new Map;Yt.forEach(xn=>{const On=xn.element;fe.has(On)&&(xs.set(On,On),this._beforeAnimationBuild(xn.player.namespaceId,xn.instruction,Co))}),Qe.forEach(xn=>{const On=xn.element;this._getPreviousPlayers(On,!1,xn.namespaceId,xn.triggerName,null).forEach(hr=>{z(Co,On,[]).push(hr),hr.destroy()})});const os=ar.filter(xn=>qo(xn,vi,Fi)),Rs=new Map;Ss(Rs,this.driver,Yr,Fi,t.l3).forEach(xn=>{qo(xn,vi,Fi)&&os.push(xn)});const xa=new Map;tr.forEach((xn,On)=>{Ss(xa,this.driver,new Set(xn),vi,t.k1)}),os.forEach(xn=>{const On=Rs.get(xn),lr=xa.get(xn);Rs.set(xn,Object.assign(Object.assign({},On),lr))});const js=[],co=[],Ja={};Yt.forEach(xn=>{const{element:On,player:lr,instruction:hr}=xn;if(fe.has(On)){if(un.has(On))return lr.onDestroy(()=>Be(On,hr.toStyles)),lr.disabled=!0,lr.overrideTotalTime(hr.totalTime),void Qe.push(lr);let Cr=Ja;if(xs.size>1){let Ar=On;const ta=[];for(;Ar=Ar.parentNode;){const To=xs.get(Ar);if(To){Cr=To;break}ta.push(Ar)}ta.forEach(To=>xs.set(To,Cr))}const is=this._buildAnimation(lr.namespaceId,hr,Co,bt,xa,Rs);if(lr.setRealPlayer(is),Cr===Ja)js.push(lr);else{const Ar=this.playersByElement.get(Cr);Ar&&Ar.length&&(lr.parentPlayer=a(Ar)),Qe.push(lr)}}else Tt(On,hr.fromStyles),lr.onDestroy(()=>Be(On,hr.toStyles)),co.push(lr),un.has(On)&&Qe.push(lr)}),co.forEach(xn=>{const On=bt.get(xn.element);if(On&&On.length){const lr=a(On);xn.setRealPlayer(lr)}}),Qe.forEach(xn=>{xn.parentPlayer?xn.syncPlayerEvents(xn.parentPlayer):xn.destroy()});for(let xn=0;xn<ar.length;xn++){const On=ar[xn],lr=On[Yn];if(rs(On,ie),lr&&lr.hasAnimation)continue;let hr=[];if(qt.size){let is=qt.get(On);is&&is.length&&hr.push(...is);let Ar=this.driver.query(On,dt,!0);for(let ta=0;ta<Ar.length;ta++){let To=qt.get(Ar[ta]);To&&To.length&&hr.push(...To)}}const Cr=hr.filter(is=>!is.destroyed);Cr.length?Ho(this,On,Cr):this.processLeaveNode(On)}return ar.length=0,js.forEach(xn=>{this.players.push(xn),xn.onDone(()=>{xn.destroy();const On=this.players.indexOf(xn);this.players.splice(On,1)}),xn.play()}),js}elementContainsData(G,K){let fe=!1;const Qe=K[Yn];return Qe&&Qe.setForRemoval&&(fe=!0),this.playersByElement.has(K)&&(fe=!0),this.playersByQueriedElement.has(K)&&(fe=!0),this.statesByElement.has(K)&&(fe=!0),this._fetchNamespace(G).elementContainsData(K)||fe}afterFlush(G){this._flushFns.push(G)}afterFlushAnimationsDone(G){this._whenQuietFns.push(G)}_getPreviousPlayers(G,K,fe,Qe,bt){let Yt=[];if(K){const qt=this.playersByQueriedElement.get(G);qt&&(Yt=qt)}else{const qt=this.playersByElement.get(G);if(qt){const vi=!bt||bt==Bn;qt.forEach(Fi=>{Fi.queued||!vi&&Fi.triggerName!=Qe||Yt.push(Fi)})}}return(fe||Qe)&&(Yt=Yt.filter(qt=>!(fe&&fe!=qt.namespaceId||Qe&&Qe!=qt.triggerName))),Yt}_beforeAnimationBuild(G,K,fe){const bt=K.element,Yt=K.isRemovalTransition?void 0:G,qt=K.isRemovalTransition?void 0:K.triggerName;for(const vi of K.timelines){const Fi=vi.element,un=Fi!==bt,Cn=z(fe,Fi,[]);this._getPreviousPlayers(Fi,un,Yt,qt,K.toState).forEach(tr=>{const Pn=tr.getRealPlayer();Pn.beforeDestroy&&Pn.beforeDestroy(),tr.destroy(),Cn.push(tr)})}Tt(bt,K.fromStyles)}_buildAnimation(G,K,fe,Qe,bt,Yt){const qt=K.triggerName,vi=K.element,Fi=[],un=new Set,Cn=new Set,er=K.timelines.map(Pn=>{const rr=Pn.element;un.add(rr);const ar=rr[Yn];if(ar&&ar.removedBeforeQueried)return new t.ZN(Pn.duration,Pn.delay);const Dr=rr!==vi,Yr=function(Ue){const G=[];return Ka(Ue,G),G}((fe.get(rr)||Ki).map(Co=>Co.getRealPlayer())).filter(Co=>!!Co.element&&Co.element===rr),oo=bt.get(rr),ko=Yt.get(rr),Ha=d(0,this._normalizer,0,Pn.keyframes,oo,ko),Ws=this._buildPlayer(Pn,Ha,Yr);if(Pn.subTimeline&&Qe&&Cn.add(rr),Dr){const Co=new _o(G,qt,rr);Co.setRealPlayer(Ws),Fi.push(Co)}return Ws});Fi.forEach(Pn=>{z(this.playersByQueriedElement,Pn.element,[]).push(Pn),Pn.onDone(()=>function(Ue,G,K){let fe;if(Ue instanceof Map){if(fe=Ue.get(G),fe){if(fe.length){const Qe=fe.indexOf(K);fe.splice(Qe,1)}0==fe.length&&Ue.delete(G)}}else if(fe=Ue[G],fe){if(fe.length){const Qe=fe.indexOf(K);fe.splice(Qe,1)}0==fe.length&&delete Ue[G]}return fe}(this.playersByQueriedElement,Pn.element,Pn))}),un.forEach(Pn=>Do(Pn,ke));const tr=a(er);return tr.onDestroy(()=>{un.forEach(Pn=>rs(Pn,ke)),Be(vi,K.toStyles)}),Cn.forEach(Pn=>{z(Qe,Pn,[]).push(tr)}),tr}_buildPlayer(G,K,fe){return K.length>0?this.driver.animate(G.element,K,G.duration,G.delay,G.easing,fe):new t.ZN(G.duration,G.delay)}}class _o{constructor(G,K,fe){this.namespaceId=G,this.triggerName=K,this.element=fe,this._player=new t.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(G){this._containsRealPlayer||(this._player=G,Object.keys(this._queuedCallbacks).forEach(K=>{this._queuedCallbacks[K].forEach(fe=>C(G,K,void 0,fe))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(G.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(G){this.totalTime=G}syncPlayerEvents(G){const K=this._player;K.triggerCallback&&G.onStart(()=>K.triggerCallback("start")),G.onDone(()=>this.finish()),G.onDestroy(()=>this.destroy())}_queueEvent(G,K){z(this._queuedCallbacks,G,[]).push(K)}onDone(G){this.queued&&this._queueEvent("done",G),this._player.onDone(G)}onStart(G){this.queued&&this._queueEvent("start",G),this._player.onStart(G)}onDestroy(G){this.queued&&this._queueEvent("destroy",G),this._player.onDestroy(G)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(G){this.queued||this._player.setPosition(G)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(G){const K=this._player;K.triggerCallback&&K.triggerCallback(G)}}function Xo(Ue){return Ue&&1===Ue.nodeType}function ws(Ue,G){const K=Ue.style.display;return Ue.style.display=null!=G?G:"none",K}function Ss(Ue,G,K,fe,Qe){const bt=[];K.forEach(vi=>bt.push(ws(vi)));const Yt=[];fe.forEach((vi,Fi)=>{const un={};vi.forEach(Cn=>{const er=un[Cn]=G.computeStyle(Fi,Cn,Qe);(!er||0==er.length)&&(Fi[Yn]=Zn,Yt.push(Fi))}),Ue.set(Fi,un)});let qt=0;return K.forEach(vi=>ws(vi,bt[qt++])),Yt}function Bo(Ue,G){const K=new Map;if(Ue.forEach(qt=>K.set(qt,[])),0==G.length)return K;const Qe=new Set(G),bt=new Map;function Yt(qt){if(!qt)return 1;let vi=bt.get(qt);if(vi)return vi;const Fi=qt.parentNode;return vi=K.has(Fi)?Fi:Qe.has(Fi)?1:Yt(Fi),bt.set(qt,vi),vi}return G.forEach(qt=>{const vi=Yt(qt);1!==vi&&K.get(vi).push(qt)}),K}function Do(Ue,G){var K;null===(K=Ue.classList)||void 0===K||K.add(G)}function rs(Ue,G){var K;null===(K=Ue.classList)||void 0===K||K.remove(G)}function Ho(Ue,G,K){a(K).onDone(()=>Ue.processLeaveNode(G))}function Ka(Ue,G){for(let K=0;K<Ue.length;K++){const fe=Ue[K];fe instanceof t.ZE?Ka(fe.players,G):G.push(fe)}}function qo(Ue,G,K){const fe=K.get(Ue);if(!fe)return!1;let Qe=G.get(Ue);return Qe?fe.forEach(bt=>Qe.add(bt)):G.set(Ue,fe),K.delete(Ue),!0}class ma{constructor(G,K,fe){this.bodyNode=G,this._driver=K,this._normalizer=fe,this._triggerCache={},this.onRemovalComplete=(Qe,bt)=>{},this._transitionEngine=new ro(G,K,fe),this._timelineEngine=new Rr(G,K,fe),this._transitionEngine.onRemovalComplete=(Qe,bt)=>this.onRemovalComplete(Qe,bt)}registerTrigger(G,K,fe,Qe,bt){const Yt=G+"-"+Qe;let qt=this._triggerCache[Yt];if(!qt){const vi=[],Fi=Ji(this._driver,bt,vi);if(vi.length)throw new Error(`The animation trigger "${Qe}" has failed to build due to the following errors:\n - ${vi.join("\n - ")}`);qt=function(Ue,G,K){return new Hr(Ue,G,K)}(Qe,Fi,this._normalizer),this._triggerCache[Yt]=qt}this._transitionEngine.registerTrigger(K,Qe,qt)}register(G,K){this._transitionEngine.register(G,K)}destroy(G,K){this._transitionEngine.destroy(G,K)}onInsert(G,K,fe,Qe){this._transitionEngine.insertNode(G,K,fe,Qe)}onRemove(G,K,fe,Qe){this._transitionEngine.removeNode(G,K,Qe||!1,fe)}disableAnimations(G,K){this._transitionEngine.markElementAsDisabled(G,K)}process(G,K,fe,Qe){if("@"==fe.charAt(0)){const[bt,Yt]=oe(fe);this._timelineEngine.command(bt,K,Yt,Qe)}else this._transitionEngine.trigger(G,K,fe,Qe)}listen(G,K,fe,Qe,bt){if("@"==fe.charAt(0)){const[Yt,qt]=oe(fe);return this._timelineEngine.listen(Yt,K,qt,bt)}return this._transitionEngine.listen(G,K,fe,Qe,bt)}flush(G=-1){this._transitionEngine.flush(G)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function vl(Ue,G){let K=null,fe=null;return Array.isArray(G)&&G.length?(K=Fa(G[0]),G.length>1&&(fe=Fa(G[G.length-1]))):G&&(K=Fa(G)),K||fe?new Bs(Ue,K,fe):null}let Bs=(()=>{class Ue{constructor(K,fe,Qe){this._element=K,this._startStyles=fe,this._endStyles=Qe,this._state=0;let bt=Ue.initialStylesByElement.get(K);bt||Ue.initialStylesByElement.set(K,bt={}),this._initialStyles=bt}start(){this._state<1&&(this._startStyles&&Be(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Be(this._element,this._initialStyles),this._endStyles&&(Be(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Ue.initialStylesByElement.delete(this._element),this._startStyles&&(Tt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Tt(this._element,this._endStyles),this._endStyles=null),Be(this._element,this._initialStyles),this._state=3)}}return Ue.initialStylesByElement=new WeakMap,Ue})();function Fa(Ue){let G=null;const K=Object.keys(Ue);for(let fe=0;fe<K.length;fe++){const Qe=K[fe];Hs(Qe)&&(G=G||{},G[Qe]=Ue[Qe])}return G}function Hs(Ue){return"display"===Ue||"position"===Ue}const ll="animation",_a="animationend";class Io{constructor(G,K,fe,Qe,bt,Yt,qt){this._element=G,this._name=K,this._duration=fe,this._delay=Qe,this._easing=bt,this._fillMode=Yt,this._onDoneFn=qt,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=vi=>this._handleCallback(vi)}apply(){(function(Ue,G){const K=Oo(Ue,"").trim();let fe=0;K.length&&(function(Ue,G){let K=0;for(let fe=0;fe<Ue.length;fe++)","===Ue.charAt(fe)&&K++;return K}(K)+1,G=`${K}, ${G}`),zo(Ue,"",G)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Ds(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){jr(this._element,this._name,"paused")}resume(){jr(this._element,this._name,"running")}setPosition(G){const K=Vs(this._element,this._name);this._position=G*this._duration,zo(this._element,"Delay",`-${this._position}ms`,K)}getPosition(){return this._position}_handleCallback(G){const K=G._ngTestManualTimestamp||Date.now(),fe=1e3*parseFloat(G.elapsedTime.toFixed(3));G.animationName==this._name&&Math.max(K-this._startTime,0)>=this._delay&&fe>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Ds(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(Ue,G){const fe=Oo(Ue,"").split(","),Qe=Ko(fe,G);Qe>=0&&(fe.splice(Qe,1),zo(Ue,"",fe.join(",")))}(this._element,this._name))}}function jr(Ue,G,K){zo(Ue,"PlayState",K,Vs(Ue,G))}function Vs(Ue,G){const K=Oo(Ue,"");return K.indexOf(",")>0?Ko(K.split(","),G):Ko([K],G)}function Ko(Ue,G){for(let K=0;K<Ue.length;K++)if(Ue[K].indexOf(G)>=0)return K;return-1}function Ds(Ue,G,K){K?Ue.removeEventListener(_a,G):Ue.addEventListener(_a,G)}function zo(Ue,G,K,fe){const Qe=ll+G;if(null!=fe){const bt=Ue.style[Qe];if(bt.length){const Yt=bt.split(",");Yt[fe]=K,K=Yt.join(",")}}Ue.style[Qe]=K}function Oo(Ue,G){return Ue.style[ll+G]||""}class gs{constructor(G,K,fe,Qe,bt,Yt,qt,vi){this.element=G,this.keyframes=K,this.animationName=fe,this._duration=Qe,this._delay=bt,this._finalStyles=qt,this._specialStyles=vi,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Yt||"linear",this.totalTime=Qe+bt,this._buildStyler()}onStart(G){this._onStartFns.push(G)}onDone(G){this._onDoneFns.push(G)}onDestroy(G){this._onDestroyFns.push(G)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(G=>G()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(G=>G()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(G=>G()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(G){this._styler.setPosition(G)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Io(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(G){const K="start"==G?this._onStartFns:this._onDoneFns;K.forEach(fe=>fe()),K.length=0}beforeDestroy(){this.init();const G={};if(this.hasStarted()){const K=this._state>=3;Object.keys(this._finalStyles).forEach(fe=>{"offset"!=fe&&(G[fe]=K?this._finalStyles[fe]:yt(this.element,fe))})}this.currentSnapshot=G}}class Pr extends t.ZN{constructor(G,K){super(),this.element=G,this._startingStyles={},this.__initialized=!1,this._styles=ne(K)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(G=>{this._startingStyles[G]=this.element.style[G]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(G=>this.element.style.setProperty(G,this._styles[G])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(G=>{const K=this._startingStyles[G];K?this.element.style.setProperty(G,K):this.element.style.removeProperty(G)}),this._startingStyles=null,super.destroy())}}class ca{constructor(){this._count=0}validateStyleProperty(G){return We(G)}matchesElement(G,K){return!1}containsElement(G,K){return Te(G,K)}query(G,K,fe){return ye(G,K,fe)}computeStyle(G,K,fe){return window.getComputedStyle(G)[K]}buildKeyframeElement(G,K,fe){fe=fe.map(qt=>ne(qt));let Qe=`@keyframes ${K} {\n`,bt="";fe.forEach(qt=>{bt=" ";const vi=parseFloat(qt.offset);Qe+=`${bt}${100*vi}% {\n`,bt+=" ",Object.keys(qt).forEach(Fi=>{const un=qt[Fi];switch(Fi){case"offset":return;case"easing":return void(un&&(Qe+=`${bt}animation-timing-function: ${un};\n`));default:return void(Qe+=`${bt}${Fi}: ${un};\n`)}}),Qe+=`${bt}}\n`}),Qe+="}\n";const Yt=document.createElement("style");return Yt.textContent=Qe,Yt}animate(G,K,fe,Qe,bt,Yt=[],qt){const vi=Yt.filter(ar=>ar instanceof gs),Fi={};Lt(fe,Qe)&&vi.forEach(ar=>{let Dr=ar.currentSnapshot;Object.keys(Dr).forEach(Yr=>Fi[Yr]=Dr[Yr])});const un=function(Ue){let G={};return Ue&&(Array.isArray(Ue)?Ue:[Ue]).forEach(fe=>{Object.keys(fe).forEach(Qe=>{"offset"==Qe||"easing"==Qe||(G[Qe]=fe[Qe])})}),G}(K=nt(G,K,Fi));if(0==fe)return new Pr(G,un);const Cn="gen_css_kf_"+this._count++,er=this.buildKeyframeElement(G,Cn,K);(function(Ue){var G;const K=null===(G=Ue.getRootNode)||void 0===G?void 0:G.call(Ue);return"undefined"!=typeof ShadowRoot&&K instanceof ShadowRoot?K:document.head})(G).appendChild(er);const Pn=vl(G,K),rr=new gs(G,K,Cn,fe,Qe,bt,un,Pn);return rr.onDestroy(()=>{var Ue;(Ue=er).parentNode.removeChild(Ue)}),rr}}class Nr{constructor(G,K,fe,Qe){this.element=G,this.keyframes=K,this.options=fe,this._specialStyles=Qe,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=fe.duration,this._delay=fe.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(G=>G()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const G=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,G,this.options),this._finalKeyframe=G.length?G[G.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(G,K,fe){return G.animate(K,fe)}onStart(G){this._onStartFns.push(G)}onDone(G){this._onDoneFns.push(G)}onDestroy(G){this._onDestroyFns.push(G)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(G=>G()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(G=>G()),this._onDestroyFns=[])}setPosition(G){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=G*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const G={};if(this.hasStarted()){const K=this._finalKeyframe;Object.keys(K).forEach(fe=>{"offset"!=fe&&(G[fe]=this._finished?K[fe]:yt(this.element,fe))})}this.currentSnapshot=G}triggerCallback(G){const K="start"==G?this._onStartFns:this._onDoneFns;K.forEach(fe=>fe()),K.length=0}}class kn{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Re().toString()),this._cssKeyframesDriver=new ca}validateStyleProperty(G){return We(G)}matchesElement(G,K){return!1}containsElement(G,K){return Te(G,K)}query(G,K,fe){return ye(G,K,fe)}computeStyle(G,K,fe){return window.getComputedStyle(G)[K]}overrideWebAnimationsSupport(G){this._isNativeImpl=G}animate(G,K,fe,Qe,bt,Yt=[],qt){if(!qt&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(G,K,fe,Qe,bt,Yt);const un={duration:fe,delay:Qe,fill:0==Qe?"both":"forwards"};bt&&(un.easing=bt);const Cn={},er=Yt.filter(Pn=>Pn instanceof Nr);Lt(fe,Qe)&&er.forEach(Pn=>{let rr=Pn.currentSnapshot;Object.keys(rr).forEach(ar=>Cn[ar]=rr[ar])});const tr=vl(G,K=nt(G,K=K.map(Pn=>ii(Pn,!1)),Cn));return new Nr(G,K,un,tr)}}function Re(){return e()&&Element.prototype.animate||{}}var J=g(69808);let H=(()=>{class Ue extends t._j{constructor(K,fe){super(),this._nextAnimationId=0,this._renderer=K.createRenderer(fe.body,{id:"0",encapsulation:E.ifc.None,styles:[],data:{animation:[]}})}build(K){const fe=this._nextAnimationId.toString();this._nextAnimationId++;const Qe=Array.isArray(K)?(0,t.vP)(K):K;return Ft(this._renderer,null,fe,"register",[Qe]),new W(fe,this._renderer)}}return Ue.\u0275fac=function(K){return new(K||Ue)(E.LFG(E.FYo),E.LFG(J.K0))},Ue.\u0275prov=E.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();class W extends t.LC{constructor(G,K){super(),this._id=G,this._renderer=K}create(G,K){return new Me(this._id,G,K||{},this._renderer)}}class Me{constructor(G,K,fe,Qe){this.id=G,this.element=K,this._renderer=Qe,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",fe)}_listen(G,K){return this._renderer.listen(this.element,`@@${this.id}:${G}`,K)}_command(G,...K){return Ft(this._renderer,this.element,this.id,G,K)}onDone(G){this._listen("done",G)}onStart(G){this._listen("start",G)}onDestroy(G){this._listen("destroy",G)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(G){this._command("setPosition",G)}getPosition(){var G,K;return null!==(K=null===(G=this._renderer.engine.players[+this.id])||void 0===G?void 0:G.getPosition())&&void 0!==K?K:0}}function Ft(Ue,G,K,fe,Qe){return Ue.setProperty(G,`@@${K}:${fe}`,Qe)}const cn="@.disabled";let Xn=(()=>{class Ue{constructor(K,fe,Qe){this.delegate=K,this.engine=fe,this._zone=Qe,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),fe.onRemovalComplete=(bt,Yt)=>{const qt=null==Yt?void 0:Yt.parentNode(bt);qt&&Yt.removeChild(qt,bt)}}createRenderer(K,fe){const bt=this.delegate.createRenderer(K,fe);if(!(K&&fe&&fe.data&&fe.data.animation)){let un=this._rendererCache.get(bt);return un||(un=new wr("",bt,this.engine),this._rendererCache.set(bt,un)),un}const Yt=fe.id,qt=fe.id+"-"+this._currentId;this._currentId++,this.engine.register(qt,K);const vi=un=>{Array.isArray(un)?un.forEach(vi):this.engine.registerTrigger(Yt,qt,K,un.name,un)};return fe.data.animation.forEach(vi),new Vr(this,qt,bt,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(K,fe,Qe){K>=0&&K<this._microtaskId?this._zone.run(()=>fe(Qe)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(bt=>{const[Yt,qt]=bt;Yt(qt)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([fe,Qe]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Ue.\u0275fac=function(K){return new(K||Ue)(E.LFG(E.FYo),E.LFG(ma),E.LFG(E.R0b))},Ue.\u0275prov=E.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();class wr{constructor(G,K,fe){this.namespaceId=G,this.delegate=K,this.engine=fe,this.destroyNode=this.delegate.destroyNode?Qe=>K.destroyNode(Qe):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(G,K){return this.delegate.createElement(G,K)}createComment(G){return this.delegate.createComment(G)}createText(G){return this.delegate.createText(G)}appendChild(G,K){this.delegate.appendChild(G,K),this.engine.onInsert(this.namespaceId,K,G,!1)}insertBefore(G,K,fe,Qe=!0){this.delegate.insertBefore(G,K,fe),this.engine.onInsert(this.namespaceId,K,G,Qe)}removeChild(G,K,fe){this.engine.onRemove(this.namespaceId,K,this.delegate,fe)}selectRootElement(G,K){return this.delegate.selectRootElement(G,K)}parentNode(G){return this.delegate.parentNode(G)}nextSibling(G){return this.delegate.nextSibling(G)}setAttribute(G,K,fe,Qe){this.delegate.setAttribute(G,K,fe,Qe)}removeAttribute(G,K,fe){this.delegate.removeAttribute(G,K,fe)}addClass(G,K){this.delegate.addClass(G,K)}removeClass(G,K){this.delegate.removeClass(G,K)}setStyle(G,K,fe,Qe){this.delegate.setStyle(G,K,fe,Qe)}removeStyle(G,K,fe){this.delegate.removeStyle(G,K,fe)}setProperty(G,K,fe){"@"==K.charAt(0)&&K==cn?this.disableAnimations(G,!!fe):this.delegate.setProperty(G,K,fe)}setValue(G,K){this.delegate.setValue(G,K)}listen(G,K,fe){return this.delegate.listen(G,K,fe)}disableAnimations(G,K){this.engine.disableAnimations(G,K)}}class Vr extends wr{constructor(G,K,fe,Qe){super(K,fe,Qe),this.factory=G,this.namespaceId=K}setProperty(G,K,fe){"@"==K.charAt(0)?"."==K.charAt(1)&&K==cn?this.disableAnimations(G,fe=void 0===fe||!!fe):this.engine.process(this.namespaceId,G,K.substr(1),fe):this.delegate.setProperty(G,K,fe)}listen(G,K,fe){if("@"==K.charAt(0)){const Qe=function(Ue){switch(Ue){case"body":return document.body;case"document":return document;case"window":return window;default:return Ue}}(G);let bt=K.substr(1),Yt="";return"@"!=bt.charAt(0)&&([bt,Yt]=function(Ue){const G=Ue.indexOf(".");return[Ue.substring(0,G),Ue.substr(G+1)]}(bt)),this.engine.listen(this.namespaceId,Qe,bt,Yt,qt=>{this.factory.scheduleListenerCallback(qt._data||-1,fe,qt)})}return this.delegate.listen(G,K,fe)}}let fr=(()=>{class Ue extends ma{constructor(K,fe,Qe){super(K.body,fe,Qe)}ngOnDestroy(){this.flush()}}return Ue.\u0275fac=function(K){return new(K||Ue)(E.LFG(J.K0),E.LFG(ae),E.LFG(Tr))},Ue.\u0275prov=E.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();const Ba=new E.OlP("AnimationModuleType"),ts=[{provide:t._j,useClass:H},{provide:Tr,useFactory:function(){return new no}},{provide:ma,useClass:fr},{provide:E.FYo,useFactory:function(Ue,G,K){return new Xn(Ue,G,K)},deps:[m.se,ma,E.R0b]}],cl=[{provide:ae,useFactory:function(){return"function"==typeof Re()?new kn:new ca}},{provide:Ba,useValue:"BrowserAnimations"},...ts],Gs=[{provide:ae,useClass:ge},{provide:Ba,useValue:"NoopAnimations"},...ts];let ea=(()=>{class Ue{static withConfig(K){return{ngModule:Ue,providers:K.disableAnimations?Gs:cl}}}return Ue.\u0275fac=function(K){return new(K||Ue)},Ue.\u0275mod=E.oAB({type:Ue}),Ue.\u0275inj=E.cJS({providers:cl,imports:[m.b2]}),Ue})()},22313:(V,Z,g)=>{"use strict";g.d(Z,{b2:()=>di,H7:()=>Gi,Dx:()=>nt,q6:()=>pt,se:()=>ht});var E=g(69808),m=g(5e3);class t extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class e extends t{static makeCurrent(){(0,E.HT)(new e)}onAndCancel($t,kt,ui){return $t.addEventListener(kt,ui,!1),()=>{$t.removeEventListener(kt,ui,!1)}}dispatchEvent($t,kt){$t.dispatchEvent(kt)}remove($t){$t.parentNode&&$t.parentNode.removeChild($t)}createElement($t,kt){return(kt=kt||this.getDefaultDocument()).createElement($t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($t){return $t.nodeType===Node.ELEMENT_NODE}isShadowRoot($t){return $t instanceof DocumentFragment}getGlobalEventTarget($t,kt){return"window"===kt?window:"document"===kt?$t:"body"===kt?$t.body:null}getBaseHref($t){const kt=(n=n||document.querySelector("base"),n?n.getAttribute("href"):null);return null==kt?null:function(li){d=d||document.createElement("a"),d.setAttribute("href",li);const $t=d.pathname;return"/"===$t.charAt(0)?$t:`/${$t}`}(kt)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie($t){return(0,E.Mx)(document.cookie,$t)}}let d,n=null;const D=new m.OlP("TRANSITION_ID"),z=[{provide:m.ip1,useFactory:function(li,$t,kt){return()=>{kt.get(m.CZH).donePromise.then(()=>{const ui=(0,E.q)(),Oi=$t.querySelectorAll(`style[ng-transition="${li}"]`);for(let fn=0;fn<Oi.length;fn++)ui.remove(Oi[fn])})}},deps:[D,E.K0,m.zs3],multi:!0}];class oe{static init(){(0,m.VLi)(new oe)}addToWindow($t){m.dqk.getAngularTestability=(ui,Oi=!0)=>{const fn=$t.findTestabilityInTree(ui,Oi);if(null==fn)throw new Error("Could not find testability for element.");return fn},m.dqk.getAllAngularTestabilities=()=>$t.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>$t.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(ui=>{const Oi=m.dqk.getAllAngularTestabilities();let fn=Oi.length,In=!1;const ur=function(Tr){In=In||Tr,fn--,0==fn&&ui(In)};Oi.forEach(function(Tr){Tr.whenStable(ur)})})}findTestabilityInTree($t,kt,ui){if(null==kt)return null;const Oi=$t.getTestability(kt);return null!=Oi?Oi:ui?(0,E.q)().isShadowRoot(kt)?this.findTestabilityInTree($t,kt.host,!0):this.findTestabilityInTree($t,kt.parentElement,!0):null}}let be=(()=>{class li{build(){return new XMLHttpRequest}}return li.\u0275fac=function(kt){return new(kt||li)},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();const se=new m.OlP("EventManagerPlugins");let Ie=(()=>{class li{constructor(kt,ui){this._zone=ui,this._eventNameToPlugin=new Map,kt.forEach(Oi=>Oi.manager=this),this._plugins=kt.slice().reverse()}addEventListener(kt,ui,Oi){return this._findPluginFor(ui).addEventListener(kt,ui,Oi)}addGlobalEventListener(kt,ui,Oi){return this._findPluginFor(ui).addGlobalEventListener(kt,ui,Oi)}getZone(){return this._zone}_findPluginFor(kt){const ui=this._eventNameToPlugin.get(kt);if(ui)return ui;const Oi=this._plugins;for(let fn=0;fn<Oi.length;fn++){const In=Oi[fn];if(In.supports(kt))return this._eventNameToPlugin.set(kt,In),In}throw new Error(`No event manager plugin found for event ${kt}`)}}return li.\u0275fac=function(kt){return new(kt||li)(m.LFG(se),m.LFG(m.R0b))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();class Ge{constructor($t){this._doc=$t}addGlobalEventListener($t,kt,ui){const Oi=(0,E.q)().getGlobalEventTarget(this._doc,$t);if(!Oi)throw new Error(`Unsupported event target ${Oi} for event ${kt}`);return this.addEventListener(Oi,kt,ui)}}let _e=(()=>{class li{constructor(){this._stylesSet=new Set}addStyles(kt){const ui=new Set;kt.forEach(Oi=>{this._stylesSet.has(Oi)||(this._stylesSet.add(Oi),ui.add(Oi))}),this.onStylesAdded(ui)}onStylesAdded(kt){}getAllStyles(){return Array.from(this._stylesSet)}}return li.\u0275fac=function(kt){return new(kt||li)},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})(),Le=(()=>{class li extends _e{constructor(kt){super(),this._doc=kt,this._hostNodes=new Map,this._hostNodes.set(kt.head,[])}_addStylesToHost(kt,ui,Oi){kt.forEach(fn=>{const In=this._doc.createElement("style");In.textContent=fn,Oi.push(ui.appendChild(In))})}addHost(kt){const ui=[];this._addStylesToHost(this._stylesSet,kt,ui),this._hostNodes.set(kt,ui)}removeHost(kt){const ui=this._hostNodes.get(kt);ui&&ui.forEach(We),this._hostNodes.delete(kt)}onStylesAdded(kt){this._hostNodes.forEach((ui,Oi)=>{this._addStylesToHost(kt,Oi,ui)})}ngOnDestroy(){this._hostNodes.forEach(kt=>kt.forEach(We))}}return li.\u0275fac=function(kt){return new(kt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();function We(li){(0,E.q)().remove(li)}const $e={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Te=/%COMP%/g;function Ee(li,$t,kt){for(let ui=0;ui<$t.length;ui++){let Oi=$t[ui];Array.isArray(Oi)?Ee(li,Oi,kt):(Oi=Oi.replace(Te,li),kt.push(Oi))}return kt}function ue(li){return $t=>{if("__ngUnwrap__"===$t)return li;!1===li($t)&&($t.preventDefault(),$t.returnValue=!1)}}let ht=(()=>{class li{constructor(kt,ui,Oi){this.eventManager=kt,this.sharedStylesHost=ui,this.appId=Oi,this.rendererByCompId=new Map,this.defaultRenderer=new Oe(kt)}createRenderer(kt,ui){if(!kt||!ui)return this.defaultRenderer;switch(ui.encapsulation){case m.ifc.Emulated:{let Oi=this.rendererByCompId.get(ui.id);return Oi||(Oi=new vt(this.eventManager,this.sharedStylesHost,ui,this.appId),this.rendererByCompId.set(ui.id,Oi)),Oi.applyToHost(kt),Oi}case 1:case m.ifc.ShadowDom:return new lt(this.eventManager,this.sharedStylesHost,kt,ui);default:if(!this.rendererByCompId.has(ui.id)){const Oi=Ee(ui.id,ui.styles,[]);this.sharedStylesHost.addStyles(Oi),this.rendererByCompId.set(ui.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return li.\u0275fac=function(kt){return new(kt||li)(m.LFG(Ie),m.LFG(Le),m.LFG(m.AFp))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();class Oe{constructor($t){this.eventManager=$t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement($t,kt){return kt?document.createElementNS($e[kt]||kt,$t):document.createElement($t)}createComment($t){return document.createComment($t)}createText($t){return document.createTextNode($t)}appendChild($t,kt){$t.appendChild(kt)}insertBefore($t,kt,ui){$t&&$t.insertBefore(kt,ui)}removeChild($t,kt){$t&&$t.removeChild(kt)}selectRootElement($t,kt){let ui="string"==typeof $t?document.querySelector($t):$t;if(!ui)throw new Error(`The selector "${$t}" did not match any elements`);return kt||(ui.textContent=""),ui}parentNode($t){return $t.parentNode}nextSibling($t){return $t.nextSibling}setAttribute($t,kt,ui,Oi){if(Oi){kt=Oi+":"+kt;const fn=$e[Oi];fn?$t.setAttributeNS(fn,kt,ui):$t.setAttribute(kt,ui)}else $t.setAttribute(kt,ui)}removeAttribute($t,kt,ui){if(ui){const Oi=$e[ui];Oi?$t.removeAttributeNS(Oi,kt):$t.removeAttribute(`${ui}:${kt}`)}else $t.removeAttribute(kt)}addClass($t,kt){$t.classList.add(kt)}removeClass($t,kt){$t.classList.remove(kt)}setStyle($t,kt,ui,Oi){Oi&(m.JOm.DashCase|m.JOm.Important)?$t.style.setProperty(kt,ui,Oi&m.JOm.Important?"important":""):$t.style[kt]=ui}removeStyle($t,kt,ui){ui&m.JOm.DashCase?$t.style.removeProperty(kt):$t.style[kt]=""}setProperty($t,kt,ui){$t[kt]=ui}setValue($t,kt){$t.nodeValue=kt}listen($t,kt,ui){return"string"==typeof $t?this.eventManager.addGlobalEventListener($t,kt,ue(ui)):this.eventManager.addEventListener($t,kt,ue(ui))}}class vt extends Oe{constructor($t,kt,ui,Oi){super($t),this.component=ui;const fn=Ee(Oi+"-"+ui.id,ui.styles,[]);kt.addStyles(fn),this.contentAttr="_ngcontent-%COMP%".replace(Te,Oi+"-"+ui.id),this.hostAttr="_nghost-%COMP%".replace(Te,Oi+"-"+ui.id)}applyToHost($t){super.setAttribute($t,this.hostAttr,"")}createElement($t,kt){const ui=super.createElement($t,kt);return super.setAttribute(ui,this.contentAttr,""),ui}}class lt extends Oe{constructor($t,kt,ui,Oi){super($t),this.sharedStylesHost=kt,this.hostEl=ui,this.shadowRoot=ui.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const fn=Ee(Oi.id,Oi.styles,[]);for(let In=0;In<fn.length;In++){const ur=document.createElement("style");ur.textContent=fn[In],this.shadowRoot.appendChild(ur)}}nodeOrShadowRoot($t){return $t===this.hostEl?this.shadowRoot:$t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild($t,kt){return super.appendChild(this.nodeOrShadowRoot($t),kt)}insertBefore($t,kt,ui){return super.insertBefore(this.nodeOrShadowRoot($t),kt,ui)}removeChild($t,kt){return super.removeChild(this.nodeOrShadowRoot($t),kt)}parentNode($t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($t)))}}let Bt=(()=>{class li extends Ge{constructor(kt){super(kt)}supports(kt){return!0}addEventListener(kt,ui,Oi){return kt.addEventListener(ui,Oi,!1),()=>this.removeEventListener(kt,ui,Oi)}removeEventListener(kt,ui,Oi){return kt.removeEventListener(ui,Oi)}}return li.\u0275fac=function(kt){return new(kt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();const Pt=["alt","control","meta","shift"],Di={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ii={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ct={alt:li=>li.altKey,control:li=>li.ctrlKey,meta:li=>li.metaKey,shift:li=>li.shiftKey};let gi=(()=>{class li extends Ge{constructor(kt){super(kt)}supports(kt){return null!=li.parseEventName(kt)}addEventListener(kt,ui,Oi){const fn=li.parseEventName(ui),In=li.eventCallback(fn.fullKey,Oi,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(kt,fn.domEventName,In))}static parseEventName(kt){const ui=kt.toLowerCase().split("."),Oi=ui.shift();if(0===ui.length||"keydown"!==Oi&&"keyup"!==Oi)return null;const fn=li._normalizeKey(ui.pop());let In="";if(Pt.forEach(Tr=>{const eo=ui.indexOf(Tr);eo>-1&&(ui.splice(eo,1),In+=Tr+".")}),In+=fn,0!=ui.length||0===fn.length)return null;const ur={};return ur.domEventName=Oi,ur.fullKey=In,ur}static getEventFullKey(kt){let ui="",Oi=function(li){let $t=li.key;if(null==$t){if($t=li.keyIdentifier,null==$t)return"Unidentified";$t.startsWith("U+")&&($t=String.fromCharCode(parseInt($t.substring(2),16)),3===li.location&&ii.hasOwnProperty($t)&&($t=ii[$t]))}return Di[$t]||$t}(kt);return Oi=Oi.toLowerCase()," "===Oi?Oi="space":"."===Oi&&(Oi="dot"),Pt.forEach(fn=>{fn!=Oi&&Ct[fn](kt)&&(ui+=fn+".")}),ui+=Oi,ui}static eventCallback(kt,ui,Oi){return fn=>{li.getEventFullKey(fn)===kt&&Oi.runGuarded(()=>ui(fn))}}static _normalizeKey(kt){return"esc"===kt?"escape":kt}}return li.\u0275fac=function(kt){return new(kt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:li.\u0275fac}),li})();const pt=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:E.bD},{provide:m.g9A,useValue:function(){e.makeCurrent(),oe.init()},multi:!0},{provide:E.K0,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),jt=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:se,useClass:Bt,multi:!0,deps:[E.K0,m.R0b,m.Lbi]},{provide:se,useClass:gi,multi:!0,deps:[E.K0]},{provide:ht,useClass:ht,deps:[Ie,Le,m.AFp]},{provide:m.FYo,useExisting:ht},{provide:_e,useExisting:Le},{provide:Le,useClass:Le,deps:[E.K0]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:Ie,useClass:Ie,deps:[se,m.R0b]},{provide:E.JF,useClass:be,deps:[]}];let di=(()=>{class li{constructor(kt){if(kt)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(kt){return{ngModule:li,providers:[{provide:m.AFp,useValue:kt.appId},{provide:D,useExisting:m.AFp},z]}}}return li.\u0275fac=function(kt){return new(kt||li)(m.LFG(li,12))},li.\u0275mod=m.oAB({type:li}),li.\u0275inj=m.cJS({providers:jt,imports:[E.ez,m.hGG]}),li})(),nt=(()=>{class li{constructor(kt){this._doc=kt}getTitle(){return this._doc.title}setTitle(kt){this._doc.title=kt||""}}return li.\u0275fac=function(kt){return new(kt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:function(kt){let ui=null;return ui=kt?new kt:new nt((0,m.LFG)(E.K0)),ui},providedIn:"root"}),li})();"undefined"!=typeof window&&window;let Gi=(()=>{class li{}return li.\u0275fac=function(kt){return new(kt||li)},li.\u0275prov=m.Yz7({token:li,factory:function(kt){let ui=null;return ui=kt?new(kt||li):m.LFG(En),ui},providedIn:"root"}),li})(),En=(()=>{class li extends Gi{constructor(kt){super(),this._doc=kt}sanitize(kt,ui){if(null==ui)return null;switch(kt){case m.q3G.NONE:return ui;case m.q3G.HTML:return(0,m.qzn)(ui,"HTML")?(0,m.z3N)(ui):(0,m.EiD)(this._doc,String(ui)).toString();case m.q3G.STYLE:return(0,m.qzn)(ui,"Style")?(0,m.z3N)(ui):ui;case m.q3G.SCRIPT:if((0,m.qzn)(ui,"Script"))return(0,m.z3N)(ui);throw new Error("unsafe value used in a script context");case m.q3G.URL:return(0,m.yhl)(ui),(0,m.qzn)(ui,"URL")?(0,m.z3N)(ui):(0,m.mCW)(String(ui));case m.q3G.RESOURCE_URL:if((0,m.qzn)(ui,"ResourceURL"))return(0,m.z3N)(ui);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${kt} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(kt){return(0,m.JVY)(kt)}bypassSecurityTrustStyle(kt){return(0,m.L6k)(kt)}bypassSecurityTrustScript(kt){return(0,m.eBb)(kt)}bypassSecurityTrustUrl(kt){return(0,m.LAX)(kt)}bypassSecurityTrustResourceUrl(kt){return(0,m.pB0)(kt)}}return li.\u0275fac=function(kt){return new(kt||li)(m.LFG(E.K0))},li.\u0275prov=m.Yz7({token:li,factory:function(kt){let ui=null;return ui=kt?new kt:function(li){return new En(li.get(E.K0))}(m.LFG(m.zs3)),ui},providedIn:"root"}),li})()},91083:(V,Z,g)=>{"use strict";g.d(Z,{gz:()=>Ai,sz:()=>$t,yS:()=>As,Bz:()=>qa,lC:()=>gs,Hx:()=>li});var E=g(5e3);const t=(0,g(83888).d)(he=>function(){he(this),this.name="EmptyError",this.message="no elements in sequence"});var e=g(68306),n=g(50727),a=g(54482),d=g(25403);function C(){return(0,a.e)((he,te)=>{let Q=null;he._refCount++;const De=new d.Q(te,void 0,void 0,void 0,()=>{if(!he||he._refCount<=0||0<--he._refCount)return void(Q=null);const je=he._connection,gt=Q;Q=null,je&&(!gt||je===gt)&&je.unsubscribe(),te.unsubscribe()});he.subscribe(De),De.closed||(Q=he.connect())})}class D extends e.y{constructor(te,Q){super(),this.source=te,this.subjectFactory=Q,this._subject=null,this._refCount=0,this._connection=null,(0,a.A)(te)&&(this.lift=te.lift)}_subscribe(te){return this.getSubject().subscribe(te)}getSubject(){const te=this._subject;return(!te||te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:te}=this;this._subject=this._connection=null,null==te||te.unsubscribe()}connect(){let te=this._connection;if(!te){te=this._connection=new n.w0;const Q=this.getSubject();te.add(this.source.subscribe(new d.Q(Q,void 0,()=>{this._teardown(),Q.complete()},De=>{this._teardown(),Q.error(De)},()=>this._teardown()))),te.closed&&(this._connection=null,te=n.w0.EMPTY)}return te}refCount(){return C()(this)}}var B=g(32076),z=g(39646),oe=g(61135),be=g(39841),se=g(97272),Ie=g(49770),Ge=g(60515),_e=g(77579);function Le(he,te,Q,De,je){return(gt,Ut)=>{let ti=Q,Li=te,wn=0;gt.subscribe(new d.Q(Ut,yr=>{const jn=wn++;Li=ti?he(Li,yr,jn):(ti=!0,yr),De&&Ut.next(Li)},je&&(()=>{ti&&Ut.next(Li),Ut.complete()})))}}function We(he,te){return(0,a.e)(Le(he,te,arguments.length>=2,!0))}var $e=g(39300);function Te(he){return he<=0?()=>Ge.E:(0,a.e)((te,Q)=>{let De=[];te.subscribe(new d.Q(Q,je=>{De.push(je),he<De.length&&De.shift()},()=>{for(const je of De)Q.next(je);Q.complete()},void 0,()=>{De=null}))})}function ye(he=ne){return(0,a.e)((te,Q)=>{let De=!1;te.subscribe(new d.Q(Q,je=>{De=!0,Q.next(je)},()=>De?Q.complete():Q.error(he())))})}function ne(){return new t}function ge(he){return(0,a.e)((te,Q)=>{let De=!1;te.subscribe(new d.Q(Q,je=>{De=!0,Q.next(je)},()=>{De||Q.next(he),Q.complete()}))})}var ae=g(44671),Se=g(95698);function Ee(he,te){const Q=arguments.length>=2;return De=>De.pipe(he?(0,$e.h)((je,gt)=>he(je,gt,De)):ae.y,(0,Se.q)(1),Q?ge(te):ye(()=>new t))}var ue=g(54004),ie=g(63900),ht=g(68675),Oe=g(70262),ke=g(24351),dt=g(95577),vt=g(18505),lt=g(28746),Bt=g(8189),Pt=g(69808);class Zt{constructor(te,Q){this.id=te,this.url=Q}}class Di extends Zt{constructor(te,Q,De="imperative",je=null){super(te,Q),this.navigationTrigger=De,this.restoredState=je}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ii extends Zt{constructor(te,Q,De){super(te,Q),this.urlAfterRedirects=De}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ct extends Zt{constructor(te,Q,De){super(te,Q),this.reason=De}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gi extends Zt{constructor(te,Q,De){super(te,Q),this.error=De}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Be extends Zt{constructor(te,Q,De,je){super(te,Q),this.urlAfterRedirects=De,this.state=je}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tt extends Zt{constructor(te,Q,De,je){super(te,Q),this.urlAfterRedirects=De,this.state=je}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Je extends Zt{constructor(te,Q,De,je,gt){super(te,Q),this.urlAfterRedirects=De,this.state=je,this.shouldActivate=gt}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _t extends Zt{constructor(te,Q,De,je){super(te,Q),this.urlAfterRedirects=De,this.state=je}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xe extends Zt{constructor(te,Q,De,je){super(te,Q),this.urlAfterRedirects=De,this.state=je}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pt{constructor(te){this.route=te}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jt{constructor(te){this.route=te}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class di{constructor(te){this.snapshot=te}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rt{constructor(te){this.snapshot=te}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class et{constructor(te){this.snapshot=te}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tt{constructor(te){this.snapshot=te}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lt{constructor(te,Q,De){this.routerEvent=te,this.position=Q,this.anchor=De}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const nt="primary";class mt{constructor(te){this.params=te||{}}has(te){return Object.prototype.hasOwnProperty.call(this.params,te)}get(te){if(this.has(te)){const Q=this.params[te];return Array.isArray(Q)?Q[0]:Q}return null}getAll(te){if(this.has(te)){const Q=this.params[te];return Array.isArray(Q)?Q:[Q]}return[]}get keys(){return Object.keys(this.params)}}function yt(he){return new mt(he)}const Ze="ngNavigationCancelingError";function ut(he){const te=Error("NavigationCancelingError: "+he);return te[Ze]=!0,te}function ni(he,te,Q){const De=Q.path.split("/");if(De.length>he.length||"full"===Q.pathMatch&&(te.hasChildren()||De.length<he.length))return null;const je={};for(let gt=0;gt<De.length;gt++){const Ut=De[gt],ti=he[gt];if(Ut.startsWith(":"))je[Ut.substring(1)]=ti;else if(Ut!==ti.path)return null}return{consumed:he.slice(0,De.length),posParams:je}}function wi(he,te){const Q=he?Object.keys(he):void 0,De=te?Object.keys(te):void 0;if(!Q||!De||Q.length!=De.length)return!1;let je;for(let gt=0;gt<Q.length;gt++)if(je=Q[gt],!yi(he[je],te[je]))return!1;return!0}function yi(he,te){if(Array.isArray(he)&&Array.isArray(te)){if(he.length!==te.length)return!1;const Q=[...he].sort(),De=[...te].sort();return Q.every((je,gt)=>De[gt]===je)}return he===te}function pn(he){return Array.prototype.concat.apply([],he)}function mi(he){return he.length>0?he[he.length-1]:null}function wt(he,te){for(const Q in he)he.hasOwnProperty(Q)&&te(he[Q],Q)}function Ot(he){return(0,E.CqO)(he)?he:(0,E.QGY)(he)?(0,B.D)(Promise.resolve(he)):(0,z.of)(he)}const zt={exact:function Jt(he,te,Q){if(!En(he.segments,te.segments)||!Pe(he.segments,te.segments,Q)||he.numberOfChildren!==te.numberOfChildren)return!1;for(const De in te.children)if(!he.children[De]||!Jt(he.children[De],te.children[De],Q))return!1;return!0},subset:Ae},Mi={exact:function(he,te){return wi(he,te)},subset:function(he,te){return Object.keys(te).length<=Object.keys(he).length&&Object.keys(te).every(Q=>yi(he[Q],te[Q]))},ignored:()=>!0};function _i(he,te,Q){return zt[Q.paths](he.root,te.root,Q.matrixParams)&&Mi[Q.queryParams](he.queryParams,te.queryParams)&&!("exact"===Q.fragment&&he.fragment!==te.fragment)}function Ae(he,te,Q){return le(he,te,te.segments,Q)}function le(he,te,Q,De){if(he.segments.length>Q.length){const je=he.segments.slice(0,Q.length);return!(!En(je,Q)||te.hasChildren()||!Pe(je,Q,De))}if(he.segments.length===Q.length){if(!En(he.segments,Q)||!Pe(he.segments,Q,De))return!1;for(const je in te.children)if(!he.children[je]||!Ae(he.children[je],te.children[je],De))return!1;return!0}{const je=Q.slice(0,he.segments.length),gt=Q.slice(he.segments.length);return!!(En(he.segments,je)&&Pe(he.segments,je,De)&&he.children[nt])&&le(he.children[nt],te,gt,De)}}function Pe(he,te,Q){return te.every((De,je)=>Mi[Q](he[je].parameters,De.parameters))}class at{constructor(te,Q,De){this.root=te,this.queryParams=Q,this.fragment=De}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yt(this.queryParams)),this._queryParamMap}toString(){return kt.serialize(this)}}class It{constructor(te,Q){this.segments=te,this.children=Q,this.parent=null,wt(Q,(De,je)=>De.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ui(this)}}class Gi{constructor(te,Q){this.path=te,this.parameters=Q}get parameterMap(){return this._parameterMap||(this._parameterMap=yt(this.parameters)),this._parameterMap}toString(){return mo(this)}}function En(he,te){return he.length===te.length&&he.every((Q,De)=>Q.path===te[De].path)}class li{}class $t{parse(te){const Q=new _r(te);return new at(Q.parseRootSegment(),Q.parseQueryParams(),Q.parseFragment())}serialize(te){const Q=`/${Oi(te.root,!0)}`,De=function(he){const te=Object.keys(he).map(Q=>{const De=he[Q];return Array.isArray(De)?De.map(je=>`${In(Q)}=${In(je)}`).join("&"):`${In(Q)}=${In(De)}`}).filter(Q=>!!Q);return te.length?`?${te.join("&")}`:""}(te.queryParams);var he;return`${Q}${De}${"string"==typeof te.fragment?`#${he=te.fragment,encodeURI(he)}`:""}`}}const kt=new $t;function ui(he){return he.segments.map(te=>mo(te)).join("/")}function Oi(he,te){if(!he.hasChildren())return ui(he);if(te){const Q=he.children[nt]?Oi(he.children[nt],!1):"",De=[];return wt(he.children,(je,gt)=>{gt!==nt&&De.push(`${gt}:${Oi(je,!1)}`)}),De.length>0?`${Q}(${De.join("//")})`:Q}{const Q=function(he,te){let Q=[];return wt(he.children,(De,je)=>{je===nt&&(Q=Q.concat(te(De,je)))}),wt(he.children,(De,je)=>{je!==nt&&(Q=Q.concat(te(De,je)))}),Q}(he,(De,je)=>je===nt?[Oi(he.children[nt],!1)]:[`${je}:${Oi(De,!1)}`]);return 1===Object.keys(he.children).length&&null!=he.children[nt]?`${ui(he)}/${Q[0]}`:`${ui(he)}/(${Q.join("//")})`}}function fn(he){return encodeURIComponent(he).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function In(he){return fn(he).replace(/%3B/gi,";")}function Tr(he){return fn(he).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eo(he){return decodeURIComponent(he)}function no(he){return eo(he.replace(/\+/g,"%20"))}function mo(he){return`${Tr(he.path)}${function(he){return Object.keys(he).map(te=>`;${Tr(te)}=${Tr(he[te])}`).join("")}(he.parameters)}`}const Ro=/^[^\/()?;=#]+/;function cr(he){const te=he.match(Ro);return te?te[0]:""}const Ri=/^[^=?&#]+/,vr=/^[^&#]+/;class _r{constructor(te){this.url=te,this.remaining=te}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new It([],{}):new It([],this.parseChildren())}parseQueryParams(){const te={};if(this.consumeOptional("?"))do{this.parseQueryParam(te)}while(this.consumeOptional("&"));return te}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const te=[];for(this.peekStartsWith("(")||te.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),te.push(this.parseSegment());let Q={};this.peekStartsWith("/(")&&(this.capture("/"),Q=this.parseParens(!0));let De={};return this.peekStartsWith("(")&&(De=this.parseParens(!1)),(te.length>0||Object.keys(Q).length>0)&&(De[nt]=new It(te,Q)),De}parseSegment(){const te=cr(this.remaining);if(""===te&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(te),new Gi(eo(te),this.parseMatrixParams())}parseMatrixParams(){const te={};for(;this.consumeOptional(";");)this.parseParam(te);return te}parseParam(te){const Q=cr(this.remaining);if(!Q)return;this.capture(Q);let De="";if(this.consumeOptional("=")){const je=cr(this.remaining);je&&(De=je,this.capture(De))}te[eo(Q)]=eo(De)}parseQueryParam(te){const Q=function(he){const te=he.match(Ri);return te?te[0]:""}(this.remaining);if(!Q)return;this.capture(Q);let De="";if(this.consumeOptional("=")){const Ut=function(he){const te=he.match(vr);return te?te[0]:""}(this.remaining);Ut&&(De=Ut,this.capture(De))}const je=no(Q),gt=no(De);if(te.hasOwnProperty(je)){let Ut=te[je];Array.isArray(Ut)||(Ut=[Ut],te[je]=Ut),Ut.push(gt)}else te[je]=gt}parseParens(te){const Q={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const De=cr(this.remaining),je=this.remaining[De.length];if("/"!==je&&")"!==je&&";"!==je)throw new Error(`Cannot parse url '${this.url}'`);let gt;De.indexOf(":")>-1?(gt=De.substr(0,De.indexOf(":")),this.capture(gt),this.capture(":")):te&&(gt=nt);const Ut=this.parseChildren();Q[gt]=1===Object.keys(Ut).length?Ut[nt]:new It([],Ut),this.consumeOptional("//")}return Q}peekStartsWith(te){return this.remaining.startsWith(te)}consumeOptional(te){return!!this.peekStartsWith(te)&&(this.remaining=this.remaining.substring(te.length),!0)}capture(te){if(!this.consumeOptional(te))throw new Error(`Expected "${te}".`)}}class xr{constructor(te){this._root=te}get root(){return this._root.value}parent(te){const Q=this.pathFromRoot(te);return Q.length>1?Q[Q.length-2]:null}children(te){const Q=Qr(te,this._root);return Q?Q.children.map(De=>De.value):[]}firstChild(te){const Q=Qr(te,this._root);return Q&&Q.children.length>0?Q.children[0].value:null}siblings(te){const Q=Rr(te,this._root);return Q.length<2?[]:Q[Q.length-2].children.map(je=>je.value).filter(je=>je!==te)}pathFromRoot(te){return Rr(te,this._root).map(Q=>Q.value)}}function Qr(he,te){if(he===te.value)return te;for(const Q of te.children){const De=Qr(he,Q);if(De)return De}return null}function Rr(he,te){if(he===te.value)return[te];for(const Q of te.children){const De=Rr(he,Q);if(De.length)return De.unshift(te),De}return[]}class Vi{constructor(te,Q){this.value=te,this.children=Q}toString(){return`TreeNode(${this.value})`}}function Dn(he){const te={};return he&&he.children.forEach(Q=>te[Q.value.outlet]=Q),te}class Wn extends xr{constructor(te,Q){super(te),this.snapshot=Q,sr(this,te)}toString(){return this.snapshot.toString()}}function ot(he,te){const Q=function(he,te){const Ut=new Zn([],{},{},"",{},nt,te,null,he.root,-1,{});return new Yn("",new Vi(Ut,[]))}(he,te),De=new oe.X([new Gi("",{})]),je=new oe.X({}),gt=new oe.X({}),Ut=new oe.X({}),ti=new oe.X(""),Li=new Ai(De,je,Ut,ti,gt,nt,te,Q.root);return Li.snapshot=Q.root,new Wn(new Vi(Li,[]),Q)}class Ai{constructor(te,Q,De,je,gt,Ut,ti,Li){this.url=te,this.params=Q,this.queryParams=De,this.fragment=je,this.data=gt,this.outlet=Ut,this.component=ti,this._futureSnapshot=Li}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ue.U)(te=>yt(te)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ue.U)(te=>yt(te)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ki(he,te="emptyOnly"){const Q=he.pathFromRoot;let De=0;if("always"!==te)for(De=Q.length-1;De>=1;){const je=Q[De],gt=Q[De-1];if(je.routeConfig&&""===je.routeConfig.path)De--;else{if(gt.component)break;De--}}return function(he){return he.reduce((te,Q)=>({params:Object.assign(Object.assign({},te.params),Q.params),data:Object.assign(Object.assign({},te.data),Q.data),resolve:Object.assign(Object.assign({},te.resolve),Q._resolvedData)}),{params:{},data:{},resolve:{}})}(Q.slice(De))}class Zn{constructor(te,Q,De,je,gt,Ut,ti,Li,wn,yr,jn){this.url=te,this.params=Q,this.queryParams=De,this.fragment=je,this.data=gt,this.outlet=Ut,this.component=ti,this.routeConfig=Li,this._urlSegment=wn,this._lastPathIndex=yr,this._resolve=jn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(De=>De.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yn extends xr{constructor(te,Q){super(Q),this.url=te,sr(this,Q)}toString(){return Bn(this._root)}}function sr(he,te){te.value._routerState=he,te.children.forEach(Q=>sr(he,Q))}function Bn(he){const te=he.children.length>0?` { ${he.children.map(Bn).join(", ")} } `:"";return`${he.value}${te}`}function Ao(he){if(he.snapshot){const te=he.snapshot,Q=he._futureSnapshot;he.snapshot=Q,wi(te.queryParams,Q.queryParams)||he.queryParams.next(Q.queryParams),te.fragment!==Q.fragment&&he.fragment.next(Q.fragment),wi(te.params,Q.params)||he.params.next(Q.params),function(he,te){if(he.length!==te.length)return!1;for(let Q=0;Q<he.length;++Q)if(!wi(he[Q],te[Q]))return!1;return!0}(te.url,Q.url)||he.url.next(Q.url),wi(te.data,Q.data)||he.data.next(Q.data)}else he.snapshot=he._futureSnapshot,he.data.next(he._futureSnapshot.data)}function Yo(he,te){const Q=wi(he.params,te.params)&&function(he,te){return En(he,te)&&he.every((Q,De)=>wi(Q.parameters,te[De].parameters))}(he.url,te.url);return Q&&!(!he.parent!=!te.parent)&&(!he.parent||Yo(he.parent,te.parent))}function _o(he,te,Q){if(Q&&he.shouldReuseRoute(te.value,Q.value.snapshot)){const De=Q.value;De._futureSnapshot=te.value;const je=function(he,te,Q){return te.children.map(De=>{for(const je of Q.children)if(he.shouldReuseRoute(De.value,je.value.snapshot))return _o(he,De,je);return _o(he,De)})}(he,te,Q);return new Vi(De,je)}{if(he.shouldAttach(te.value)){const gt=he.retrieve(te.value);if(null!==gt){const Ut=gt.route;return Ut.value._futureSnapshot=te.value,Ut.children=te.children.map(ti=>_o(he,ti)),Ut}}const De=function(he){return new Ai(new oe.X(he.url),new oe.X(he.params),new oe.X(he.queryParams),new oe.X(he.fragment),new oe.X(he.data),he.outlet,he.component,he)}(te.value),je=te.children.map(gt=>_o(he,gt));return new Vi(De,je)}}function $r(he){return"object"==typeof he&&null!=he&&!he.outlets&&!he.segmentPath}function ws(he){return"object"==typeof he&&null!=he&&he.outlets}function Ss(he,te,Q,De,je){let gt={};return De&&wt(De,(Ut,ti)=>{gt[ti]=Array.isArray(Ut)?Ut.map(Li=>`${Li}`):`${Ut}`}),new at(Q.root===he?te:Bo(Q.root,he,te),gt,je)}function Bo(he,te,Q){const De={};return wt(he.children,(je,gt)=>{De[gt]=je===te?Q:Bo(je,te,Q)}),new It(he.segments,De)}class Do{constructor(te,Q,De){if(this.isAbsolute=te,this.numberOfDoubleDots=Q,this.commands=De,te&&De.length>0&&$r(De[0]))throw new Error("Root segment cannot have matrix parameters");const je=De.find(ws);if(je&&je!==mi(De))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ho{constructor(te,Q,De){this.segmentGroup=te,this.processChildren=Q,this.index=De}}function qo(he,te,Q){if(he||(he=new It([],{})),0===he.segments.length&&he.hasChildren())return ma(he,te,Q);const De=function(he,te,Q){let De=0,je=te;const gt={match:!1,pathIndex:0,commandIndex:0};for(;je<he.segments.length;){if(De>=Q.length)return gt;const Ut=he.segments[je],ti=Q[De];if(ws(ti))break;const Li=`${ti}`,wn=De<Q.length-1?Q[De+1]:null;if(je>0&&void 0===Li)break;if(Li&&wn&&"object"==typeof wn&&void 0===wn.outlets){if(!fs(Li,wn,Ut))return gt;De+=2}else{if(!fs(Li,{},Ut))return gt;De++}je++}return{match:!0,pathIndex:je,commandIndex:De}}(he,te,Q),je=Q.slice(De.commandIndex);if(De.match&&De.pathIndex<he.segments.length){const gt=new It(he.segments.slice(0,De.pathIndex),{});return gt.children[nt]=new It(he.segments.slice(De.pathIndex),he.children),ma(gt,0,je)}return De.match&&0===je.length?new It(he.segments,{}):De.match&&!he.hasChildren()?Bs(he,te,Q):De.match?ma(he,0,je):Bs(he,te,Q)}function ma(he,te,Q){if(0===Q.length)return new It(he.segments,{});{const De=function(he){return ws(he[0])?he[0].outlets:{[nt]:he}}(Q),je={};return wt(De,(gt,Ut)=>{"string"==typeof gt&&(gt=[gt]),null!==gt&&(je[Ut]=qo(he.children[Ut],te,gt))}),wt(he.children,(gt,Ut)=>{void 0===De[Ut]&&(je[Ut]=gt)}),new It(he.segments,je)}}function Bs(he,te,Q){const De=he.segments.slice(0,te);let je=0;for(;je<Q.length;){const gt=Q[je];if(ws(gt)){const Li=Fa(gt.outlets);return new It(De,Li)}if(0===je&&$r(Q[0])){De.push(new Gi(he.segments[te].path,Hs(Q[0]))),je++;continue}const Ut=ws(gt)?gt.outlets[nt]:`${gt}`,ti=je<Q.length-1?Q[je+1]:null;Ut&&ti&&$r(ti)?(De.push(new Gi(Ut,Hs(ti))),je+=2):(De.push(new Gi(Ut,{})),je++)}return new It(De,{})}function Fa(he){const te={};return wt(he,(Q,De)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(te[De]=Bs(new It([],{}),0,Q))}),te}function Hs(he){const te={};return wt(he,(Q,De)=>te[De]=`${Q}`),te}function fs(he,te,Q){return he==Q.path&&wi(te,Q.parameters)}class _a{constructor(te,Q,De,je){this.routeReuseStrategy=te,this.futureState=Q,this.currState=De,this.forwardEvent=je}activate(te){const Q=this.futureState._root,De=this.currState?this.currState._root:null;this.deactivateChildRoutes(Q,De,te),Ao(this.futureState.root),this.activateChildRoutes(Q,De,te)}deactivateChildRoutes(te,Q,De){const je=Dn(Q);te.children.forEach(gt=>{const Ut=gt.value.outlet;this.deactivateRoutes(gt,je[Ut],De),delete je[Ut]}),wt(je,(gt,Ut)=>{this.deactivateRouteAndItsChildren(gt,De)})}deactivateRoutes(te,Q,De){const je=te.value,gt=Q?Q.value:null;if(je===gt)if(je.component){const Ut=De.getContext(je.outlet);Ut&&this.deactivateChildRoutes(te,Q,Ut.children)}else this.deactivateChildRoutes(te,Q,De);else gt&&this.deactivateRouteAndItsChildren(Q,De)}deactivateRouteAndItsChildren(te,Q){te.value.component&&this.routeReuseStrategy.shouldDetach(te.value.snapshot)?this.detachAndStoreRouteSubtree(te,Q):this.deactivateRouteAndOutlet(te,Q)}detachAndStoreRouteSubtree(te,Q){const De=Q.getContext(te.value.outlet),je=De&&te.value.component?De.children:Q,gt=Dn(te);for(const Ut of Object.keys(gt))this.deactivateRouteAndItsChildren(gt[Ut],je);if(De&&De.outlet){const Ut=De.outlet.detach(),ti=De.children.onOutletDeactivated();this.routeReuseStrategy.store(te.value.snapshot,{componentRef:Ut,route:te,contexts:ti})}}deactivateRouteAndOutlet(te,Q){const De=Q.getContext(te.value.outlet),je=De&&te.value.component?De.children:Q,gt=Dn(te);for(const Ut of Object.keys(gt))this.deactivateRouteAndItsChildren(gt[Ut],je);De&&De.outlet&&(De.outlet.deactivate(),De.children.onOutletDeactivated(),De.attachRef=null,De.resolver=null,De.route=null)}activateChildRoutes(te,Q,De){const je=Dn(Q);te.children.forEach(gt=>{this.activateRoutes(gt,je[gt.value.outlet],De),this.forwardEvent(new tt(gt.value.snapshot))}),te.children.length&&this.forwardEvent(new Rt(te.value.snapshot))}activateRoutes(te,Q,De){const je=te.value,gt=Q?Q.value:null;if(Ao(je),je===gt)if(je.component){const Ut=De.getOrCreateContext(je.outlet);this.activateChildRoutes(te,Q,Ut.children)}else this.activateChildRoutes(te,Q,De);else if(je.component){const Ut=De.getOrCreateContext(je.outlet);if(this.routeReuseStrategy.shouldAttach(je.snapshot)){const ti=this.routeReuseStrategy.retrieve(je.snapshot);this.routeReuseStrategy.store(je.snapshot,null),Ut.children.onOutletReAttached(ti.contexts),Ut.attachRef=ti.componentRef,Ut.route=ti.route.value,Ut.outlet&&Ut.outlet.attach(ti.componentRef,ti.route.value),Ao(ti.route.value),this.activateChildRoutes(te,null,Ut.children)}else{const ti=function(he){for(let te=he.parent;te;te=te.parent){const Q=te.routeConfig;if(Q&&Q._loadedConfig)return Q._loadedConfig;if(Q&&Q.component)return null}return null}(je.snapshot),Li=ti?ti.module.componentFactoryResolver:null;Ut.attachRef=null,Ut.route=je,Ut.resolver=Li,Ut.outlet&&Ut.outlet.activateWith(je,Li),this.activateChildRoutes(te,null,Ut.children)}}else this.activateChildRoutes(te,null,De)}}class Io{constructor(te,Q){this.routes=te,this.module=Q}}function jr(he){return"function"==typeof he}function yo(he){return he instanceof at}const Oo=Symbol("INITIAL_VALUE");function Eo(){return(0,ie.w)(he=>(0,be.a)(he.map(te=>te.pipe((0,Se.q)(1),(0,ht.O)(Oo)))).pipe(We((te,Q)=>{let De=!1;return Q.reduce((je,gt,Ut)=>je!==Oo?je:(gt===Oo&&(De=!0),De||!1!==gt&&Ut!==Q.length-1&&!yo(gt)?je:gt),te)},Oo),(0,$e.h)(te=>te!==Oo),(0,ue.U)(te=>yo(te)?te:!0===te),(0,Se.q)(1)))}class Ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new lo,this.attachRef=null}}class lo{constructor(){this.contexts=new Map}onChildOutletCreated(te,Q){const De=this.getOrCreateContext(te);De.outlet=Q,this.contexts.set(te,De)}onChildOutletDestroyed(te){const Q=this.getContext(te);Q&&(Q.outlet=null,Q.attachRef=null)}onOutletDeactivated(){const te=this.contexts;return this.contexts=new Map,te}onOutletReAttached(te){this.contexts=te}getOrCreateContext(te){let Q=this.getContext(te);return Q||(Q=new Ms,this.contexts.set(te,Q)),Q}getContext(te){return this.contexts.get(te)||null}}let gs=(()=>{class he{constructor(Q,De,je,gt,Ut){this.parentContexts=Q,this.location=De,this.resolver=je,this.changeDetector=Ut,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.name=gt||nt,Q.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const Q=this.parentContexts.getContext(this.name);Q&&Q.route&&(Q.attachRef?this.attach(Q.attachRef,Q.route):this.activateWith(Q.route,Q.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const Q=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(Q.instance),Q}attach(Q,De){this.activated=Q,this._activatedRoute=De,this.location.insert(Q.hostView),this.attachEvents.emit(Q.instance)}deactivate(){if(this.activated){const Q=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(Q)}}activateWith(Q,De){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=Q;const Ut=(De=De||this.resolver).resolveComponentFactory(Q._futureSnapshot.routeConfig.component),ti=this.parentContexts.getOrCreateContext(this.name).children,Li=new Pr(Q,ti,this.location.injector);this.activated=this.location.createComponent(Ut,this.location.length,Li),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return he.\u0275fac=function(Q){return new(Q||he)(E.Y36(lo),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.Y36(E.sBO))},he.\u0275dir=E.lG2({type:he,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),he})();class Pr{constructor(te,Q,De){this.route=te,this.childContexts=Q,this.parent=De}get(te,Q){return te===Ai?this.route:te===lo?this.childContexts:this.parent.get(te,Q)}}let la=(()=>{class he{}return he.\u0275fac=function(Q){return new(Q||he)},he.\u0275cmp=E.Xpm({type:he,selectors:[["ng-component"]],decls:1,vars:0,template:function(Q,De){1&Q&&E._UZ(0,"router-outlet")},directives:[gs],encapsulation:2}),he})();function zr(he,te=""){for(let Q=0;Q<he.length;Q++){const De=he[Q];ca(De,bl(te,De))}}function ca(he,te){he.children&&zr(he.children,te)}function bl(he,te){return te?he||te.path?he&&!te.path?`${he}/`:!he&&te.path?te.path:`${he}/${te.path}`:"":he}function us(he){const te=he.children&&he.children.map(us),Q=te?Object.assign(Object.assign({},he),{children:te}):Object.assign({},he);return!Q.component&&(te||Q.loadChildren)&&Q.outlet&&Q.outlet!==nt&&(Q.component=la),Q}function $o(he){return he.outlet||nt}function ms(he,te){const Q=he.filter(De=>$o(De)===te);return Q.push(...he.filter(De=>$o(De)!==te)),Q}const yl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Nr(he,te,Q){var De;if(""===te.path)return"full"===te.pathMatch&&(he.hasChildren()||Q.length>0)?Object.assign({},yl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const gt=(te.matcher||ni)(Q,he,te);if(!gt)return Object.assign({},yl);const Ut={};wt(gt.posParams,(Li,wn)=>{Ut[wn]=Li.path});const ti=gt.consumed.length>0?Object.assign(Object.assign({},Ut),gt.consumed[gt.consumed.length-1].parameters):Ut;return{matched:!0,consumedSegments:gt.consumed,lastChild:gt.consumed.length,parameters:ti,positionalParamSegments:null!==(De=gt.posParams)&&void 0!==De?De:{}}}function kn(he,te,Q,De,je="corrected"){if(Q.length>0&&function(he,te,Q){return Q.some(De=>W(he,te,De)&&$o(De)!==nt)}(he,Q,De)){const Ut=new It(te,function(he,te,Q,De){const je={};je[nt]=De,De._sourceSegment=he,De._segmentIndexShift=te.length;for(const gt of Q)if(""===gt.path&&$o(gt)!==nt){const Ut=new It([],{});Ut._sourceSegment=he,Ut._segmentIndexShift=te.length,je[$o(gt)]=Ut}return je}(he,te,De,new It(Q,he.children)));return Ut._sourceSegment=he,Ut._segmentIndexShift=te.length,{segmentGroup:Ut,slicedSegments:[]}}if(0===Q.length&&function(he,te,Q){return Q.some(De=>W(he,te,De))}(he,Q,De)){const Ut=new It(he.segments,function(he,te,Q,De,je,gt){const Ut={};for(const ti of De)if(W(he,Q,ti)&&!je[$o(ti)]){const Li=new It([],{});Li._sourceSegment=he,Li._segmentIndexShift="legacy"===gt?he.segments.length:te.length,Ut[$o(ti)]=Li}return Object.assign(Object.assign({},je),Ut)}(he,te,Q,De,he.children,je));return Ut._sourceSegment=he,Ut._segmentIndexShift=te.length,{segmentGroup:Ut,slicedSegments:Q}}const gt=new It(he.segments,he.children);return gt._sourceSegment=he,gt._segmentIndexShift=te.length,{segmentGroup:gt,slicedSegments:Q}}function W(he,te,Q){return(!(he.hasChildren()||te.length>0)||"full"!==Q.pathMatch)&&""===Q.path}function Me(he,te,Q,De){return!!($o(he)===De||De!==nt&&W(te,Q,he))&&("**"===he.path||Nr(te,he,Q).matched)}function Ft(he,te,Q){return 0===te.length&&!he.children[Q]}class bi{constructor(te){this.segmentGroup=te||null}}class cn{constructor(te){this.urlTree=te}}function Xn(he){return new e.y(te=>te.error(new bi(he)))}function wr(he){return new e.y(te=>te.error(new cn(he)))}function Vr(he){return new e.y(te=>te.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${he}'`)))}class fr{constructor(te,Q,De,je,gt){this.configLoader=Q,this.urlSerializer=De,this.urlTree=je,this.config=gt,this.allowRedirects=!0,this.ngModule=te.get(E.h0i)}apply(){const te=kn(this.urlTree.root,[],[],this.config).segmentGroup,Q=new It(te.segments,te.children);return this.expandSegmentGroup(this.ngModule,this.config,Q,nt).pipe((0,ue.U)(gt=>this.createUrlTree(Vn(gt),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Oe.K)(gt=>{if(gt instanceof cn)return this.allowRedirects=!1,this.match(gt.urlTree);throw gt instanceof bi?this.noMatchError(gt):gt}))}match(te){return this.expandSegmentGroup(this.ngModule,this.config,te.root,nt).pipe((0,ue.U)(je=>this.createUrlTree(Vn(je),te.queryParams,te.fragment))).pipe((0,Oe.K)(je=>{throw je instanceof bi?this.noMatchError(je):je}))}noMatchError(te){return new Error(`Cannot match any routes. URL Segment: '${te.segmentGroup}'`)}createUrlTree(te,Q,De){const je=te.segments.length>0?new It([],{[nt]:te}):te;return new at(je,Q,De)}expandSegmentGroup(te,Q,De,je){return 0===De.segments.length&&De.hasChildren()?this.expandChildren(te,Q,De).pipe((0,ue.U)(gt=>new It([],gt))):this.expandSegment(te,De,Q,De.segments,je,!0)}expandChildren(te,Q,De){const je=[];for(const gt of Object.keys(De.children))"primary"===gt?je.unshift(gt):je.push(gt);return(0,B.D)(je).pipe((0,ke.b)(gt=>{const Ut=De.children[gt],ti=ms(Q,gt);return this.expandSegmentGroup(te,ti,Ut,gt).pipe((0,ue.U)(Li=>({segment:Li,outlet:gt})))}),We((gt,Ut)=>(gt[Ut.outlet]=Ut.segment,gt),{}),function(he,te){const Q=arguments.length>=2;return De=>De.pipe(he?(0,$e.h)((je,gt)=>he(je,gt,De)):ae.y,Te(1),Q?ge(te):ye(()=>new t))}())}expandSegment(te,Q,De,je,gt,Ut){return(0,B.D)(De).pipe((0,ke.b)(ti=>this.expandSegmentAgainstRoute(te,Q,De,ti,je,gt,Ut).pipe((0,Oe.K)(wn=>{if(wn instanceof bi)return(0,z.of)(null);throw wn}))),Ee(ti=>!!ti),(0,Oe.K)((ti,Li)=>{if(ti instanceof t||"EmptyError"===ti.name){if(Ft(Q,je,gt))return(0,z.of)(new It([],{}));throw new bi(Q)}throw ti}))}expandSegmentAgainstRoute(te,Q,De,je,gt,Ut,ti){return Me(je,Q,gt,Ut)?void 0===je.redirectTo?this.matchSegmentAgainstRoute(te,Q,je,gt,Ut):ti&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(te,Q,De,je,gt,Ut):Xn(Q):Xn(Q)}expandSegmentAgainstRouteUsingRedirect(te,Q,De,je,gt,Ut){return"**"===je.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(te,De,je,Ut):this.expandRegularSegmentAgainstRouteUsingRedirect(te,Q,De,je,gt,Ut)}expandWildCardWithParamsAgainstRouteUsingRedirect(te,Q,De,je){const gt=this.applyRedirectCommands([],De.redirectTo,{});return De.redirectTo.startsWith("/")?wr(gt):this.lineralizeSegments(De,gt).pipe((0,dt.z)(Ut=>{const ti=new It(Ut,{});return this.expandSegment(te,ti,Q,Ut,je,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(te,Q,De,je,gt,Ut){const{matched:ti,consumedSegments:Li,lastChild:wn,positionalParamSegments:yr}=Nr(Q,je,gt);if(!ti)return Xn(Q);const jn=this.applyRedirectCommands(Li,je.redirectTo,yr);return je.redirectTo.startsWith("/")?wr(jn):this.lineralizeSegments(je,jn).pipe((0,dt.z)(Jr=>this.expandSegment(te,Q,De,Jr.concat(gt.slice(wn)),Ut,!1)))}matchSegmentAgainstRoute(te,Q,De,je,gt){if("**"===De.path)return De.loadChildren?(De._loadedConfig?(0,z.of)(De._loadedConfig):this.configLoader.load(te.injector,De)).pipe((0,ue.U)(Jr=>(De._loadedConfig=Jr,new It(je,{})))):(0,z.of)(new It(je,{}));const{matched:Ut,consumedSegments:ti,lastChild:Li}=Nr(Q,De,je);if(!Ut)return Xn(Q);const wn=je.slice(Li);return this.getChildConfig(te,De,je).pipe((0,dt.z)(jn=>{const Jr=jn.module,uo=jn.routes,{segmentGroup:Tl,slicedSegments:Xs}=kn(Q,ti,wn,uo),ya=new It(Tl.segments,Tl.children);if(0===Xs.length&&ya.hasChildren())return this.expandChildren(Jr,uo,ya).pipe((0,ue.U)(Ea=>new It(ti,Ea)));if(0===uo.length&&0===Xs.length)return(0,z.of)(new It(ti,{}));const Vo=$o(De)===gt;return this.expandSegment(Jr,ya,uo,Xs,Vo?nt:gt,!0).pipe((0,ue.U)(Ks=>new It(ti.concat(Ks.segments),Ks.children)))}))}getChildConfig(te,Q,De){return Q.children?(0,z.of)(new Io(Q.children,te)):Q.loadChildren?void 0!==Q._loadedConfig?(0,z.of)(Q._loadedConfig):this.runCanLoadGuards(te.injector,Q,De).pipe((0,dt.z)(je=>{return je?this.configLoader.load(te.injector,Q).pipe((0,ue.U)(gt=>(Q._loadedConfig=gt,gt))):(he=Q,new e.y(te=>te.error(ut(`Cannot load children because the guard of the route "path: '${he.path}'" returned false`))));var he})):(0,z.of)(new Io([],te))}runCanLoadGuards(te,Q,De){const je=Q.canLoad;if(!je||0===je.length)return(0,z.of)(!0);const gt=je.map(Ut=>{const ti=te.get(Ut);let Li;if((he=ti)&&jr(he.canLoad))Li=ti.canLoad(Q,De);else{if(!jr(ti))throw new Error("Invalid CanLoad guard");Li=ti(Q,De)}var he;return Ot(Li)});return(0,z.of)(gt).pipe(Eo(),(0,vt.b)(Ut=>{if(!yo(Ut))return;const ti=ut(`Redirecting to "${this.urlSerializer.serialize(Ut)}"`);throw ti.url=Ut,ti}),(0,ue.U)(Ut=>!0===Ut))}lineralizeSegments(te,Q){let De=[],je=Q.root;for(;;){if(De=De.concat(je.segments),0===je.numberOfChildren)return(0,z.of)(De);if(je.numberOfChildren>1||!je.children[nt])return Vr(te.redirectTo);je=je.children[nt]}}applyRedirectCommands(te,Q,De){return this.applyRedirectCreatreUrlTree(Q,this.urlSerializer.parse(Q),te,De)}applyRedirectCreatreUrlTree(te,Q,De,je){const gt=this.createSegmentGroup(te,Q.root,De,je);return new at(gt,this.createQueryParams(Q.queryParams,this.urlTree.queryParams),Q.fragment)}createQueryParams(te,Q){const De={};return wt(te,(je,gt)=>{if("string"==typeof je&&je.startsWith(":")){const ti=je.substring(1);De[gt]=Q[ti]}else De[gt]=je}),De}createSegmentGroup(te,Q,De,je){const gt=this.createSegments(te,Q.segments,De,je);let Ut={};return wt(Q.children,(ti,Li)=>{Ut[Li]=this.createSegmentGroup(te,ti,De,je)}),new It(gt,Ut)}createSegments(te,Q,De,je){return Q.map(gt=>gt.path.startsWith(":")?this.findPosParam(te,gt,je):this.findOrReturn(gt,De))}findPosParam(te,Q,De){const je=De[Q.path.substring(1)];if(!je)throw new Error(`Cannot redirect to '${te}'. Cannot find '${Q.path}'.`);return je}findOrReturn(te,Q){let De=0;for(const je of Q){if(je.path===te.path)return Q.splice(De),je;De++}return te}}function Vn(he){const te={};for(const De of Object.keys(he.children)){const gt=Vn(he.children[De]);(gt.segments.length>0||gt.hasChildren())&&(te[De]=gt)}return function(he){if(1===he.numberOfChildren&&he.children[nt]){const te=he.children[nt];return new It(he.segments.concat(te.segments),te.children)}return he}(new It(he.segments,te))}class Ba{constructor(te){this.path=te,this.route=this.path[this.path.length-1]}}class ts{constructor(te,Q){this.component=te,this.route=Q}}function cl(he,te,Q){const De=he._root;return Ue(De,te?te._root:null,Q,[De.value])}function ea(he,te,Q){const De=function(he){if(!he)return null;for(let te=he.parent;te;te=te.parent){const Q=te.routeConfig;if(Q&&Q._loadedConfig)return Q._loadedConfig}return null}(te);return(De?De.module.injector:Q).get(he)}function Ue(he,te,Q,De,je={canDeactivateChecks:[],canActivateChecks:[]}){const gt=Dn(te);return he.children.forEach(Ut=>{(function(he,te,Q,De,je={canDeactivateChecks:[],canActivateChecks:[]}){const gt=he.value,Ut=te?te.value:null,ti=Q?Q.getContext(he.value.outlet):null;if(Ut&&gt.routeConfig===Ut.routeConfig){const Li=function(he,te,Q){if("function"==typeof Q)return Q(he,te);switch(Q){case"pathParamsChange":return!En(he.url,te.url);case"pathParamsOrQueryParamsChange":return!En(he.url,te.url)||!wi(he.queryParams,te.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yo(he,te)||!wi(he.queryParams,te.queryParams);default:return!Yo(he,te)}}(Ut,gt,gt.routeConfig.runGuardsAndResolvers);Li?je.canActivateChecks.push(new Ba(De)):(gt.data=Ut.data,gt._resolvedData=Ut._resolvedData),Ue(he,te,gt.component?ti?ti.children:null:Q,De,je),Li&&ti&&ti.outlet&&ti.outlet.isActivated&&je.canDeactivateChecks.push(new ts(ti.outlet.component,Ut))}else Ut&&fe(te,ti,je),je.canActivateChecks.push(new Ba(De)),Ue(he,null,gt.component?ti?ti.children:null:Q,De,je)})(Ut,gt[Ut.value.outlet],Q,De.concat([Ut.value]),je),delete gt[Ut.value.outlet]}),wt(gt,(Ut,ti)=>fe(Ut,Q.getContext(ti),je)),je}function fe(he,te,Q){const De=Dn(he),je=he.value;wt(De,(gt,Ut)=>{fe(gt,je.component?te?te.children.getContext(Ut):null:te,Q)}),Q.canDeactivateChecks.push(new ts(je.component&&te&&te.outlet&&te.outlet.isActivated?te.outlet.component:null,je))}class er{}function tr(he){return new e.y(te=>te.error(he))}class rr{constructor(te,Q,De,je,gt,Ut){this.rootComponentType=te,this.config=Q,this.urlTree=De,this.url=je,this.paramsInheritanceStrategy=gt,this.relativeLinkResolution=Ut}recognize(){const te=kn(this.urlTree.root,[],[],this.config.filter(Ut=>void 0===Ut.redirectTo),this.relativeLinkResolution).segmentGroup,Q=this.processSegmentGroup(this.config,te,nt);if(null===Q)return null;const De=new Zn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},nt,this.rootComponentType,null,this.urlTree.root,-1,{}),je=new Vi(De,Q),gt=new Yn(this.url,je);return this.inheritParamsAndData(gt._root),gt}inheritParamsAndData(te){const Q=te.value,De=Ki(Q,this.paramsInheritanceStrategy);Q.params=Object.freeze(De.params),Q.data=Object.freeze(De.data),te.children.forEach(je=>this.inheritParamsAndData(je))}processSegmentGroup(te,Q,De){return 0===Q.segments.length&&Q.hasChildren()?this.processChildren(te,Q):this.processSegment(te,Q,Q.segments,De)}processChildren(te,Q){const De=[];for(const gt of Object.keys(Q.children)){const Ut=Q.children[gt],ti=ms(te,gt),Li=this.processSegmentGroup(ti,Ut,gt);if(null===Li)return null;De.push(...Li)}const je=oo(De);return je.sort((te,Q)=>te.value.outlet===nt?-1:Q.value.outlet===nt?1:te.value.outlet.localeCompare(Q.value.outlet)),je}processSegment(te,Q,De,je){for(const gt of te){const Ut=this.processSegmentAgainstRoute(gt,Q,De,je);if(null!==Ut)return Ut}return Ft(Q,De,je)?[]:null}processSegmentAgainstRoute(te,Q,De,je){if(te.redirectTo||!Me(te,Q,De,je))return null;let gt,Ut=[],ti=[];if("**"===te.path){const uo=De.length>0?mi(De).parameters:{};gt=new Zn(De,uo,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Co(te),$o(te),te.component,te,Ha(Q),Ws(Q)+De.length,xs(te))}else{const uo=Nr(Q,te,De);if(!uo.matched)return null;Ut=uo.consumedSegments,ti=De.slice(uo.lastChild),gt=new Zn(Ut,uo.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Co(te),$o(te),te.component,te,Ha(Q),Ws(Q)+Ut.length,xs(te))}const Li=(he=te).children?he.children:he.loadChildren?he._loadedConfig.routes:[],{segmentGroup:wn,slicedSegments:yr}=kn(Q,Ut,ti,Li.filter(uo=>void 0===uo.redirectTo),this.relativeLinkResolution);var he;if(0===yr.length&&wn.hasChildren()){const uo=this.processChildren(Li,wn);return null===uo?null:[new Vi(gt,uo)]}if(0===Li.length&&0===yr.length)return[new Vi(gt,[])];const jn=$o(te)===je,Jr=this.processSegment(Li,wn,yr,jn?nt:je);return null===Jr?null:[new Vi(gt,Jr)]}}function Yr(he){const te=he.value.routeConfig;return te&&""===te.path&&void 0===te.redirectTo}function oo(he){const te=[],Q=new Set;for(const De of he){if(!Yr(De)){te.push(De);continue}const je=te.find(gt=>De.value.routeConfig===gt.value.routeConfig);void 0!==je?(je.children.push(...De.children),Q.add(je)):te.push(De)}for(const De of Q){const je=oo(De.children);te.push(new Vi(De.value,je))}return te.filter(De=>!Q.has(De))}function Ha(he){let te=he;for(;te._sourceSegment;)te=te._sourceSegment;return te}function Ws(he){let te=he,Q=te._segmentIndexShift?te._segmentIndexShift:0;for(;te._sourceSegment;)te=te._sourceSegment,Q+=te._segmentIndexShift?te._segmentIndexShift:0;return Q-1}function Co(he){return he.data||{}}function xs(he){return he.resolve||{}}function co(he){return(0,ie.w)(te=>{const Q=he(te);return Q?(0,B.D)(Q).pipe((0,ue.U)(()=>te)):(0,z.of)(te)})}class On extends class{shouldDetach(te){return!1}store(te,Q){}shouldAttach(te){return!1}retrieve(te){return null}shouldReuseRoute(te,Q){return te.routeConfig===Q.routeConfig}}{}const lr=new E.OlP("ROUTES");class hr{constructor(te,Q,De,je){this.injector=te,this.compiler=Q,this.onLoadStartListener=De,this.onLoadEndListener=je}load(te,Q){if(Q._loader$)return Q._loader$;this.onLoadStartListener&&this.onLoadStartListener(Q);const je=this.loadModuleFactory(Q.loadChildren).pipe((0,ue.U)(gt=>{this.onLoadEndListener&&this.onLoadEndListener(Q);const Ut=gt.create(te);return new Io(pn(Ut.injector.get(lr,void 0,E.XFs.Self|E.XFs.Optional)).map(us),Ut)}),(0,Oe.K)(gt=>{throw Q._loader$=void 0,gt}));return Q._loader$=new D(je,()=>new _e.x).pipe(C()),Q._loader$}loadModuleFactory(te){return Ot(te()).pipe((0,dt.z)(Q=>Q instanceof E.YKP?(0,z.of)(Q):(0,B.D)(this.compiler.compileModuleAsync(Q))))}}class is{shouldProcessUrl(te){return!0}extract(te){return te}merge(te,Q){return te}}function Ar(he){throw he}function ta(he,te,Q){return te.parse("/")}function To(he,te){return(0,z.of)(null)}const El={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Za={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ur=(()=>{class he{constructor(Q,De,je,gt,Ut,ti,Li){this.rootComponentType=Q,this.urlSerializer=De,this.rootContexts=je,this.location=gt,this.config=Li,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _e.x,this.errorHandler=Ar,this.malformedUriErrorHandler=ta,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:To,afterPreactivation:To},this.urlHandlingStrategy=new is,this.routeReuseStrategy=new On,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ut.get(E.h0i),this.console=Ut.get(E.c2e);const jn=Ut.get(E.R0b);this.isNgZoneEnabled=jn instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(Li),this.currentUrlTree=new at(new It([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hr(Ut,ti,Jr=>this.triggerEvent(new pt(Jr)),Jr=>this.triggerEvent(new jt(Jr))),this.routerState=ot(this.currentUrlTree,this.rootComponentType),this.transitions=new oe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var Q;return null===(Q=this.location.getState())||void 0===Q?void 0:Q.\u0275routerPageId}setupNavigations(Q){const De=this.events;return Q.pipe((0,$e.h)(je=>0!==je.id),(0,ue.U)(je=>Object.assign(Object.assign({},je),{extractedUrl:this.urlHandlingStrategy.extract(je.rawUrl)})),(0,ie.w)(je=>{let gt=!1,Ut=!1;return(0,z.of)(je).pipe((0,vt.b)(ti=>{this.currentNavigation={id:ti.id,initialUrl:ti.currentRawUrl,extractedUrl:ti.extractedUrl,trigger:ti.source,extras:ti.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ie.w)(ti=>{const Li=this.browserUrlTree.toString(),wn=!this.navigated||ti.extractedUrl.toString()!==Li||Li!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||wn)&&this.urlHandlingStrategy.shouldProcessUrl(ti.rawUrl))return _s(ti.source)&&(this.browserUrlTree=ti.extractedUrl),(0,z.of)(ti).pipe((0,ie.w)(jn=>{const Jr=this.transitions.getValue();return De.next(new Di(jn.id,this.serializeUrl(jn.extractedUrl),jn.source,jn.restoredState)),Jr!==this.transitions.getValue()?Ge.E:Promise.resolve(jn)}),function(he,te,Q,De){return(0,ie.w)(je=>function(he,te,Q,De,je){return new fr(he,te,Q,De,je).apply()}(he,te,Q,je.extractedUrl,De).pipe((0,ue.U)(gt=>Object.assign(Object.assign({},je),{urlAfterRedirects:gt}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vt.b)(jn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:jn.urlAfterRedirects})}),function(he,te,Q,De,je){return(0,dt.z)(gt=>function(he,te,Q,De,je="emptyOnly",gt="legacy"){try{const Ut=new rr(he,te,Q,De,je,gt).recognize();return null===Ut?tr(new er):(0,z.of)(Ut)}catch(Ut){return tr(Ut)}}(he,te,gt.urlAfterRedirects,Q(gt.urlAfterRedirects),De,je).pipe((0,ue.U)(Ut=>Object.assign(Object.assign({},gt),{targetSnapshot:Ut}))))}(this.rootComponentType,this.config,jn=>this.serializeUrl(jn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vt.b)(jn=>{if("eager"===this.urlUpdateStrategy){if(!jn.extras.skipLocationChange){const uo=this.urlHandlingStrategy.merge(jn.urlAfterRedirects,jn.rawUrl);this.setBrowserUrl(uo,jn)}this.browserUrlTree=jn.urlAfterRedirects}const Jr=new Be(jn.id,this.serializeUrl(jn.extractedUrl),this.serializeUrl(jn.urlAfterRedirects),jn.targetSnapshot);De.next(Jr)}));if(wn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Jr,extractedUrl:uo,source:Tl,restoredState:Xs,extras:ya}=ti,Vo=new Di(Jr,this.serializeUrl(uo),Tl,Xs);De.next(Vo);const el=ot(uo,this.rootComponentType).snapshot;return(0,z.of)(Object.assign(Object.assign({},ti),{targetSnapshot:el,urlAfterRedirects:uo,extras:Object.assign(Object.assign({},ya),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ti.rawUrl,ti.resolve(null),Ge.E}),co(ti=>{const{targetSnapshot:Li,id:wn,extractedUrl:yr,rawUrl:jn,extras:{skipLocationChange:Jr,replaceUrl:uo}}=ti;return this.hooks.beforePreactivation(Li,{navigationId:wn,appliedUrlTree:yr,rawUrlTree:jn,skipLocationChange:!!Jr,replaceUrl:!!uo})}),(0,vt.b)(ti=>{const Li=new Tt(ti.id,this.serializeUrl(ti.extractedUrl),this.serializeUrl(ti.urlAfterRedirects),ti.targetSnapshot);this.triggerEvent(Li)}),(0,ue.U)(ti=>Object.assign(Object.assign({},ti),{guards:cl(ti.targetSnapshot,ti.currentSnapshot,this.rootContexts)})),function(he,te){return(0,dt.z)(Q=>{const{targetSnapshot:De,currentSnapshot:je,guards:{canActivateChecks:gt,canDeactivateChecks:Ut}}=Q;return 0===Ut.length&&0===gt.length?(0,z.of)(Object.assign(Object.assign({},Q),{guardsResult:!0})):function(he,te,Q,De){return(0,B.D)(he).pipe((0,dt.z)(je=>function(he,te,Q,De,je){const gt=te&&te.routeConfig?te.routeConfig.canDeactivate:null;if(!gt||0===gt.length)return(0,z.of)(!0);const Ut=gt.map(ti=>{const Li=ea(ti,te,je);let wn;if(function(he){return he&&jr(he.canDeactivate)}(Li))wn=Ot(Li.canDeactivate(he,te,Q,De));else{if(!jr(Li))throw new Error("Invalid CanDeactivate guard");wn=Ot(Li(he,te,Q,De))}return wn.pipe(Ee())});return(0,z.of)(Ut).pipe(Eo())}(je.component,je.route,Q,te,De)),Ee(je=>!0!==je,!0))}(Ut,De,je,he).pipe((0,dt.z)(ti=>ti&&function(he){return"boolean"==typeof he}(ti)?function(he,te,Q,De){return(0,B.D)(te).pipe((0,ke.b)(je=>(0,se.z)(function(he,te){return null!==he&&te&&te(new di(he)),(0,z.of)(!0)}(je.route.parent,De),function(he,te){return null!==he&&te&&te(new et(he)),(0,z.of)(!0)}(je.route,De),function(he,te,Q){const De=te[te.length-1],gt=te.slice(0,te.length-1).reverse().map(Ut=>function(he){const te=he.routeConfig?he.routeConfig.canActivateChild:null;return te&&0!==te.length?{node:he,guards:te}:null}(Ut)).filter(Ut=>null!==Ut).map(Ut=>(0,Ie.P)(()=>{const ti=Ut.guards.map(Li=>{const wn=ea(Li,Ut.node,Q);let yr;if(function(he){return he&&jr(he.canActivateChild)}(wn))yr=Ot(wn.canActivateChild(De,he));else{if(!jr(wn))throw new Error("Invalid CanActivateChild guard");yr=Ot(wn(De,he))}return yr.pipe(Ee())});return(0,z.of)(ti).pipe(Eo())}));return(0,z.of)(gt).pipe(Eo())}(he,je.path,Q),function(he,te,Q){const De=te.routeConfig?te.routeConfig.canActivate:null;if(!De||0===De.length)return(0,z.of)(!0);const je=De.map(gt=>(0,Ie.P)(()=>{const Ut=ea(gt,te,Q);let ti;if(function(he){return he&&jr(he.canActivate)}(Ut))ti=Ot(Ut.canActivate(te,he));else{if(!jr(Ut))throw new Error("Invalid CanActivate guard");ti=Ot(Ut(te,he))}return ti.pipe(Ee())}));return(0,z.of)(je).pipe(Eo())}(he,je.route,Q))),Ee(je=>!0!==je,!0))}(De,gt,he,te):(0,z.of)(ti)),(0,ue.U)(ti=>Object.assign(Object.assign({},Q),{guardsResult:ti})))})}(this.ngModule.injector,ti=>this.triggerEvent(ti)),(0,vt.b)(ti=>{if(yo(ti.guardsResult)){const wn=ut(`Redirecting to "${this.serializeUrl(ti.guardsResult)}"`);throw wn.url=ti.guardsResult,wn}const Li=new Je(ti.id,this.serializeUrl(ti.extractedUrl),this.serializeUrl(ti.urlAfterRedirects),ti.targetSnapshot,!!ti.guardsResult);this.triggerEvent(Li)}),(0,$e.h)(ti=>!!ti.guardsResult||(this.restoreHistory(ti),this.cancelNavigationTransition(ti,""),!1)),co(ti=>{if(ti.guards.canActivateChecks.length)return(0,z.of)(ti).pipe((0,vt.b)(Li=>{const wn=new _t(Li.id,this.serializeUrl(Li.extractedUrl),this.serializeUrl(Li.urlAfterRedirects),Li.targetSnapshot);this.triggerEvent(wn)}),(0,ie.w)(Li=>{let wn=!1;return(0,z.of)(Li).pipe(function(he,te){return(0,dt.z)(Q=>{const{targetSnapshot:De,guards:{canActivateChecks:je}}=Q;if(!je.length)return(0,z.of)(Q);let gt=0;return(0,B.D)(je).pipe((0,ke.b)(Ut=>function(he,te,Q,De){return function(he,te,Q,De){const je=Object.keys(he);if(0===je.length)return(0,z.of)({});const gt={};return(0,B.D)(je).pipe((0,dt.z)(Ut=>function(he,te,Q,De){const je=ea(he,te,De);return Ot(je.resolve?je.resolve(te,Q):je(te,Q))}(he[Ut],te,Q,De).pipe((0,vt.b)(ti=>{gt[Ut]=ti}))),Te(1),(0,dt.z)(()=>Object.keys(gt).length===je.length?(0,z.of)(gt):Ge.E))}(he._resolve,he,te,De).pipe((0,ue.U)(gt=>(he._resolvedData=gt,he.data=Object.assign(Object.assign({},he.data),Ki(he,Q).resolve),null)))}(Ut.route,De,he,te)),(0,vt.b)(()=>gt++),Te(1),(0,dt.z)(Ut=>gt===je.length?(0,z.of)(Q):Ge.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vt.b)({next:()=>wn=!0,complete:()=>{wn||(this.restoreHistory(Li),this.cancelNavigationTransition(Li,"At least one route resolver didn't emit any value."))}}))}),(0,vt.b)(Li=>{const wn=new xe(Li.id,this.serializeUrl(Li.extractedUrl),this.serializeUrl(Li.urlAfterRedirects),Li.targetSnapshot);this.triggerEvent(wn)}))}),co(ti=>{const{targetSnapshot:Li,id:wn,extractedUrl:yr,rawUrl:jn,extras:{skipLocationChange:Jr,replaceUrl:uo}}=ti;return this.hooks.afterPreactivation(Li,{navigationId:wn,appliedUrlTree:yr,rawUrlTree:jn,skipLocationChange:!!Jr,replaceUrl:!!uo})}),(0,ue.U)(ti=>{const Li=function(he,te,Q){const De=_o(he,te._root,Q?Q._root:void 0);return new Wn(De,te)}(this.routeReuseStrategy,ti.targetSnapshot,ti.currentRouterState);return Object.assign(Object.assign({},ti),{targetRouterState:Li})}),(0,vt.b)(ti=>{this.currentUrlTree=ti.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ti.urlAfterRedirects,ti.rawUrl),this.routerState=ti.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ti.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ti),this.browserUrlTree=ti.urlAfterRedirects)}),((he,te,Q)=>(0,ue.U)(De=>(new _a(te,De.targetRouterState,De.currentRouterState,Q).activate(he),De)))(this.rootContexts,this.routeReuseStrategy,ti=>this.triggerEvent(ti)),(0,vt.b)({next(){gt=!0},complete(){gt=!0}}),(0,lt.x)(()=>{var ti;gt||Ut||this.cancelNavigationTransition(je,`Navigation ID ${je.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ti=this.currentNavigation)||void 0===ti?void 0:ti.id)===je.id&&(this.currentNavigation=null)}),(0,Oe.K)(ti=>{if(Ut=!0,function(he){return he&&he[Ze]}(ti)){const Li=yo(ti.url);Li||(this.navigated=!0,this.restoreHistory(je,!0));const wn=new Ct(je.id,this.serializeUrl(je.extractedUrl),ti.message);De.next(wn),Li?setTimeout(()=>{const yr=this.urlHandlingStrategy.merge(ti.url,this.rawUrlTree),jn={skipLocationChange:je.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_s(je.source)};this.scheduleNavigation(yr,"imperative",null,jn,{resolve:je.resolve,reject:je.reject,promise:je.promise})},0):je.resolve(!1)}else{this.restoreHistory(je,!0);const Li=new gi(je.id,this.serializeUrl(je.extractedUrl),ti);De.next(Li);try{je.resolve(this.errorHandler(ti))}catch(wn){je.reject(wn)}}return Ge.E}))}))}resetRootComponentType(Q){this.rootComponentType=Q,this.routerState.root.component=this.rootComponentType}setTransition(Q){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),Q))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(Q=>{const De="popstate"===Q.type?"popstate":"hashchange";"popstate"===De&&setTimeout(()=>{var je;const gt={replaceUrl:!0},Ut=(null===(je=Q.state)||void 0===je?void 0:je.navigationId)?Q.state:null;if(Ut){const Li=Object.assign({},Ut);delete Li.navigationId,delete Li.\u0275routerPageId,0!==Object.keys(Li).length&&(gt.state=Li)}const ti=this.parseUrl(Q.url);this.scheduleNavigation(ti,De,Ut,gt)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(Q){this.events.next(Q)}resetConfig(Q){zr(Q),this.config=Q.map(us),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(Q,De={}){const{relativeTo:je,queryParams:gt,fragment:Ut,queryParamsHandling:ti,preserveFragment:Li}=De,wn=je||this.routerState.root,yr=Li?this.currentUrlTree.fragment:Ut;let jn=null;switch(ti){case"merge":jn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),gt);break;case"preserve":jn=this.currentUrlTree.queryParams;break;default:jn=gt||null}return null!==jn&&(jn=this.removeEmptyProps(jn)),function(he,te,Q,De,je){if(0===Q.length)return Ss(te.root,te.root,te,De,je);const gt=function(he){if("string"==typeof he[0]&&1===he.length&&"/"===he[0])return new Do(!0,0,he);let te=0,Q=!1;const De=he.reduce((je,gt,Ut)=>{if("object"==typeof gt&&null!=gt){if(gt.outlets){const ti={};return wt(gt.outlets,(Li,wn)=>{ti[wn]="string"==typeof Li?Li.split("/"):Li}),[...je,{outlets:ti}]}if(gt.segmentPath)return[...je,gt.segmentPath]}return"string"!=typeof gt?[...je,gt]:0===Ut?(gt.split("/").forEach((ti,Li)=>{0==Li&&"."===ti||(0==Li&&""===ti?Q=!0:".."===ti?te++:""!=ti&&je.push(ti))}),je):[...je,gt]},[]);return new Do(Q,te,De)}(Q);if(gt.toRoot())return Ss(te.root,new It([],{}),te,De,je);const Ut=function(he,te,Q){if(he.isAbsolute)return new Ho(te.root,!0,0);if(-1===Q.snapshot._lastPathIndex){const gt=Q.snapshot._urlSegment;return new Ho(gt,gt===te.root,0)}const De=$r(he.commands[0])?0:1;return function(he,te,Q){let De=he,je=te,gt=Q;for(;gt>je;){if(gt-=je,De=De.parent,!De)throw new Error("Invalid number of '../'");je=De.segments.length}return new Ho(De,!1,je-gt)}(Q.snapshot._urlSegment,Q.snapshot._lastPathIndex+De,he.numberOfDoubleDots)}(gt,te,he),ti=Ut.processChildren?ma(Ut.segmentGroup,Ut.index,gt.commands):qo(Ut.segmentGroup,Ut.index,gt.commands);return Ss(Ut.segmentGroup,ti,te,De,je)}(wn,this.currentUrlTree,Q,jn,null!=yr?yr:null)}navigateByUrl(Q,De={skipLocationChange:!1}){const je=yo(Q)?Q:this.parseUrl(Q),gt=this.urlHandlingStrategy.merge(je,this.rawUrlTree);return this.scheduleNavigation(gt,"imperative",null,De)}navigate(Q,De={skipLocationChange:!1}){return function(he){for(let te=0;te<he.length;te++){const Q=he[te];if(null==Q)throw new Error(`The requested path contains ${Q} segment at index ${te}`)}}(Q),this.navigateByUrl(this.createUrlTree(Q,De),De)}serializeUrl(Q){return this.urlSerializer.serialize(Q)}parseUrl(Q){let De;try{De=this.urlSerializer.parse(Q)}catch(je){De=this.malformedUriErrorHandler(je,this.urlSerializer,Q)}return De}isActive(Q,De){let je;if(je=!0===De?Object.assign({},El):!1===De?Object.assign({},Za):De,yo(Q))return _i(this.currentUrlTree,Q,je);const gt=this.parseUrl(Q);return _i(this.currentUrlTree,gt,je)}removeEmptyProps(Q){return Object.keys(Q).reduce((De,je)=>{const gt=Q[je];return null!=gt&&(De[je]=gt),De},{})}processNavigations(){this.navigations.subscribe(Q=>{this.navigated=!0,this.lastSuccessfulId=Q.id,this.currentPageId=Q.targetPageId,this.events.next(new ii(Q.id,this.serializeUrl(Q.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,Q.resolve(!0)},Q=>{this.console.warn(`Unhandled Navigation Error: ${Q}`)})}scheduleNavigation(Q,De,je,gt,Ut){var ti,Li,wn;if(this.disposed)return Promise.resolve(!1);const yr=this.transitions.value,jn=_s(De)&&yr&&!_s(yr.source),Jr=yr.rawUrl.toString()===Q.toString(),uo=yr.id===(null===(ti=this.currentNavigation)||void 0===ti?void 0:ti.id);if(jn&&Jr&&uo)return Promise.resolve(!0);let Xs,ya,Vo;Ut?(Xs=Ut.resolve,ya=Ut.reject,Vo=Ut.promise):Vo=new Promise((Ea,Ga)=>{Xs=Ea,ya=Ga});const el=++this.navigationId;let Ks;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(je=this.location.getState()),Ks=je&&je.\u0275routerPageId?je.\u0275routerPageId:gt.replaceUrl||gt.skipLocationChange?null!==(Li=this.browserPageId)&&void 0!==Li?Li:0:(null!==(wn=this.browserPageId)&&void 0!==wn?wn:0)+1):Ks=0,this.setTransition({id:el,targetPageId:Ks,source:De,restoredState:je,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:Q,extras:gt,resolve:Xs,reject:ya,promise:Vo,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Vo.catch(Ea=>Promise.reject(Ea))}setBrowserUrl(Q,De){const je=this.urlSerializer.serialize(Q),gt=Object.assign(Object.assign({},De.extras.state),this.generateNgRouterState(De.id,De.targetPageId));this.location.isCurrentPathEqualTo(je)||De.extras.replaceUrl?this.location.replaceState(je,"",gt):this.location.go(je,"",gt)}restoreHistory(Q,De=!1){var je,gt;if("computed"===this.canceledNavigationResolution){const Ut=this.currentPageId-Q.targetPageId;"popstate"!==Q.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(je=this.currentNavigation)||void 0===je?void 0:je.finalUrl)||0===Ut?this.currentUrlTree===(null===(gt=this.currentNavigation)||void 0===gt?void 0:gt.finalUrl)&&0===Ut&&(this.resetState(Q),this.browserUrlTree=Q.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ut)}else"replace"===this.canceledNavigationResolution&&(De&&this.resetState(Q),this.resetUrlToCurrentUrlTree())}resetState(Q){this.routerState=Q.currentRouterState,this.currentUrlTree=Q.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,Q.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(Q,De){const je=new Ct(Q.id,this.serializeUrl(Q.extractedUrl),De);this.triggerEvent(je),Q.resolve(!1)}generateNgRouterState(Q,De){return"computed"===this.canceledNavigationResolution?{navigationId:Q,\u0275routerPageId:De}:{navigationId:Q}}}return he.\u0275fac=function(Q){E.$Z()},he.\u0275prov=E.Yz7({token:he,factory:he.\u0275fac}),he})();function _s(he){return"imperative"!==he}let As=(()=>{class he{constructor(Q,De,je){this.router=Q,this.route=De,this.locationStrategy=je,this.commands=null,this.href=null,this.onChanges=new _e.x,this.subscription=Q.events.subscribe(gt=>{gt instanceof ii&&this.updateTargetUrlAndHref()})}set routerLink(Q){this.commands=null!=Q?Array.isArray(Q)?Q:[Q]:null}ngOnChanges(Q){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(Q,De,je,gt,Ut){if(0!==Q||De||je||gt||Ut||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ti={skipLocationChange:ba(this.skipLocationChange),replaceUrl:ba(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ti),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ba(this.preserveFragment)})}}return he.\u0275fac=function(Q){return new(Q||he)(E.Y36(Ur),E.Y36(Ai),E.Y36(Pt.S$))},he.\u0275dir=E.lG2({type:he,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(Q,De){1&Q&&E.NdJ("click",function(gt){return De.onClick(gt.button,gt.ctrlKey,gt.shiftKey,gt.altKey,gt.metaKey)}),2&Q&&E.uIk("target",De.target)("href",De.href,E.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[E.TTD]}),he})();function ba(he){return""===he||!!he}class vs{}class ia{preload(te,Q){return(0,z.of)(null)}}let Qa=(()=>{class he{constructor(Q,De,je,gt){this.router=Q,this.injector=je,this.preloadingStrategy=gt,this.loader=new hr(je,De,Li=>Q.triggerEvent(new pt(Li)),Li=>Q.triggerEvent(new jt(Li)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,$e.h)(Q=>Q instanceof ii),(0,ke.b)(()=>this.preload())).subscribe(()=>{})}preload(){const Q=this.injector.get(E.h0i);return this.processRoutes(Q,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(Q,De){const je=[];for(const gt of De)if(gt.loadChildren&&!gt.canLoad&&gt._loadedConfig){const Ut=gt._loadedConfig;je.push(this.processRoutes(Ut.module,Ut.routes))}else gt.loadChildren&&!gt.canLoad?je.push(this.preloadConfig(Q,gt)):gt.children&&je.push(this.processRoutes(Q,gt.children));return(0,B.D)(je).pipe((0,Bt.J)(),(0,ue.U)(gt=>{}))}preloadConfig(Q,De){return this.preloadingStrategy.preload(De,()=>(De._loadedConfig?(0,z.of)(De._loadedConfig):this.loader.load(Q.injector,De)).pipe((0,dt.z)(gt=>(De._loadedConfig=gt,this.processRoutes(gt.module,gt.routes)))))}}return he.\u0275fac=function(Q){return new(Q||he)(E.LFG(Ur),E.LFG(E.Sil),E.LFG(E.zs3),E.LFG(vs))},he.\u0275prov=E.Yz7({token:he,factory:he.\u0275fac}),he})(),Ra=(()=>{class he{constructor(Q,De,je={}){this.router=Q,this.viewportScroller=De,this.options=je,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},je.scrollPositionRestoration=je.scrollPositionRestoration||"disabled",je.anchorScrolling=je.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(Q=>{Q instanceof Di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=Q.navigationTrigger,this.restoredId=Q.restoredState?Q.restoredState.navigationId:0):Q instanceof ii&&(this.lastId=Q.id,this.scheduleScrollEvent(Q,this.router.parseUrl(Q.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(Q=>{Q instanceof Lt&&(Q.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(Q.position):Q.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(Q.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(Q,De){this.router.triggerEvent(new Lt(Q,"popstate"===this.lastSource?this.store[this.restoredId]:null,De))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return he.\u0275fac=function(Q){E.$Z()},he.\u0275prov=E.Yz7({token:he,factory:he.\u0275fac}),he})();const Aa=new E.OlP("ROUTER_CONFIGURATION"),kl=new E.OlP("ROUTER_FORROOT_GUARD"),jl=[Pt.Ye,{provide:li,useClass:$t},{provide:Ur,useFactory:function(he,te,Q,De,je,gt,Ut={},ti,Li){const wn=new Ur(null,he,te,Q,De,je,pn(gt));return ti&&(wn.urlHandlingStrategy=ti),Li&&(wn.routeReuseStrategy=Li),function(he,te){he.errorHandler&&(te.errorHandler=he.errorHandler),he.malformedUriErrorHandler&&(te.malformedUriErrorHandler=he.malformedUriErrorHandler),he.onSameUrlNavigation&&(te.onSameUrlNavigation=he.onSameUrlNavigation),he.paramsInheritanceStrategy&&(te.paramsInheritanceStrategy=he.paramsInheritanceStrategy),he.relativeLinkResolution&&(te.relativeLinkResolution=he.relativeLinkResolution),he.urlUpdateStrategy&&(te.urlUpdateStrategy=he.urlUpdateStrategy),he.canceledNavigationResolution&&(te.canceledNavigationResolution=he.canceledNavigationResolution)}(Ut,wn),Ut.enableTracing&&wn.events.subscribe(yr=>{var jn,Jr;null===(jn=console.group)||void 0===jn||jn.call(console,`Router Event: ${yr.constructor.name}`),console.log(yr.toString()),console.log(yr),null===(Jr=console.groupEnd)||void 0===Jr||Jr.call(console)}),wn},deps:[li,lo,Pt.Ye,E.zs3,E.Sil,lr,Aa,[class{},new E.FiY],[class{},new E.FiY]]},lo,{provide:Ai,useFactory:function(he){return he.routerState.root},deps:[Ur]},Qa,ia,class{preload(te,Q){return Q().pipe((0,Oe.K)(()=>(0,z.of)(null)))}},{provide:Aa,useValue:{enableTracing:!1}}];function Va(){return new E.PXZ("Router",Ur)}let qa=(()=>{class he{constructor(Q,De){}static forRoot(Q,De){return{ngModule:he,providers:[jl,Ua(Q),{provide:kl,useFactory:da,deps:[[Ur,new E.FiY,new E.tp0]]},{provide:Aa,useValue:De||{}},{provide:Pt.S$,useFactory:zl,deps:[Pt.lw,[new E.tBr(Pt.mr),new E.FiY],Aa]},{provide:Ra,useFactory:_c,deps:[Ur,Pt.EM,Aa]},{provide:vs,useExisting:De&&De.preloadingStrategy?De.preloadingStrategy:ia},{provide:E.PXZ,multi:!0,useFactory:Va},[Oa,{provide:E.ip1,multi:!0,useFactory:Cl,deps:[Oa]},{provide:Ll,useFactory:ql,deps:[Oa]},{provide:E.tb,multi:!0,useExisting:Ll}]]}}static forChild(Q){return{ngModule:he,providers:[Ua(Q)]}}}return he.\u0275fac=function(Q){return new(Q||he)(E.LFG(kl,8),E.LFG(Ur,8))},he.\u0275mod=E.oAB({type:he}),he.\u0275inj=E.cJS({}),he})();function _c(he,te,Q){return Q.scrollOffset&&te.setOffset(Q.scrollOffset),new Ra(he,te,Q)}function zl(he,te,Q={}){return Q.useHash?new Pt.Do(he,te):new Pt.b0(he,te)}function da(he){return"guarded"}function Ua(he){return[{provide:E.deG,multi:!0,useValue:he},{provide:lr,multi:!0,useValue:he}]}let Oa=(()=>{class he{constructor(Q){this.injector=Q,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _e.x}appInitializer(){return this.injector.get(Pt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let De=null;const je=new Promise(ti=>De=ti),gt=this.injector.get(Ur),Ut=this.injector.get(Aa);return"disabled"===Ut.initialNavigation?(gt.setUpLocationChangeListener(),De(!0)):"enabled"===Ut.initialNavigation||"enabledBlocking"===Ut.initialNavigation?(gt.hooks.afterPreactivation=()=>this.initNavigation?(0,z.of)(null):(this.initNavigation=!0,De(!0),this.resultOfPreactivationDone),gt.initialNavigation()):De(!0),je})}bootstrapListener(Q){const De=this.injector.get(Aa),je=this.injector.get(Qa),gt=this.injector.get(Ra),Ut=this.injector.get(Ur),ti=this.injector.get(E.z2F);Q===ti.components[0]&&(("enabledNonBlocking"===De.initialNavigation||void 0===De.initialNavigation)&&Ut.initialNavigation(),je.setUpPreloading(),gt.init(),Ut.resetRootComponentType(ti.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return he.\u0275fac=function(Q){return new(Q||he)(E.LFG(E.zs3))},he.\u0275prov=E.Yz7({token:he,factory:he.\u0275fac}),he})();function Cl(he){return he.appInitializer.bind(he)}function ql(he){return he.bootstrapListener.bind(he)}const Ll=new E.OlP("Router Initializer")},33:(V,Z,g)=>{"use strict";g.d(Z,{C:()=>ht,k:()=>Oe});var Se=g(5e3),Ee=g(93075);const ue=["ref"];function ie(ke){return ke&&ke.replace(/\r\n|\r/g,"\n")}let ht=(()=>{class ke{constructor(vt,lt){this._differs=vt,this._ngZone=lt,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new Se.vpe,this.focusChange=new Se.vpe,this.scroll=new Se.vpe,this.drop=new Se.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=Bt=>{},this.onTouched=()=>{}}set options(vt){this._options=vt,!this._differ&&vt&&(this._differ=this._differs.find(vt).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror="undefined"!=typeof CodeMirror?CodeMirror:Promise.resolve().then(g.t.bind(g,68266,19))),this._codeMirror}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>function(ke,dt,vt,lt){return new(vt||(vt=Promise))(function(Pt,Zt){function Di(gi){try{Ct(lt.next(gi))}catch(Be){Zt(Be)}}function ii(gi){try{Ct(lt.throw(gi))}catch(Be){Zt(Be)}}function Ct(gi){gi.done?Pt(gi.value):function(Pt){return Pt instanceof vt?Pt:new vt(function(Zt){Zt(Pt)})}(gi.value).then(Di,ii)}Ct((lt=lt.apply(ke,dt||[])).next())})}(this,void 0,void 0,function*(){const vt=yield this.codeMirrorGlobal;this.codeMirror=((null==vt?void 0:vt.default)?vt.default:vt).fromTextArea(this.ref.nativeElement,this._options),this.codeMirror.on("cursorActivity",Bt=>this._ngZone.run(()=>this.cursorActive(Bt))),this.codeMirror.on("scroll",this.scrollChanged.bind(this)),this.codeMirror.on("blur",()=>this._ngZone.run(()=>this.focusChanged(!1))),this.codeMirror.on("focus",()=>this._ngZone.run(()=>this.focusChanged(!0))),this.codeMirror.on("change",(Bt,Pt)=>this._ngZone.run(()=>this.codemirrorValueChanged(Bt,Pt))),this.codeMirror.on("drop",(Bt,Pt)=>{this._ngZone.run(()=>this.dropFiles(Bt,Pt))}),this.codeMirror.setValue(this.value)}))}ngDoCheck(){if(!this._differ)return;const vt=this._differ.diff(this._options);vt&&(vt.forEachChangedItem(lt=>this.setOptionIfChanged(lt.key,lt.currentValue)),vt.forEachAddedItem(lt=>this.setOptionIfChanged(lt.key,lt.currentValue)),vt.forEachRemovedItem(lt=>this.setOptionIfChanged(lt.key,lt.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(vt,lt){const Bt=vt.getValue();this.value!==Bt&&(this.value=Bt,this.onChange(this.value))}setOptionIfChanged(vt,lt){!this.codeMirror||this.codeMirror.setOption(vt,lt)}focusChanged(vt){this.onTouched(),this.isFocused=vt,this.focusChange.emit(vt)}scrollChanged(vt){this.scroll.emit(vt.getScrollInfo())}cursorActive(vt){this.cursorActivity.emit(vt)}dropFiles(vt,lt){this.drop.emit([vt,lt])}writeValue(vt){if(null==vt)return;if(!this.codeMirror)return void(this.value=vt);const lt=this.codeMirror.getValue();if(vt!==lt&&ie(lt)!==ie(vt))if(this.value=vt,this.preserveScrollPosition){const Bt=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(Bt.left,Bt.top)}else this.codeMirror.setValue(this.value)}registerOnChange(vt){this.onChange=vt}registerOnTouched(vt){this.onTouched=vt}setDisabledState(vt){this.disabled=vt,this.setOptionIfChanged("readOnly",this.disabled)}}return ke.\u0275fac=function(vt){return new(vt||ke)(Se.Y36(Se.aQg),Se.Y36(Se.R0b))},ke.\u0275cmp=Se.Xpm({type:ke,selectors:[["ngx-codemirror"]],viewQuery:function(vt,lt){if(1&vt&&Se.Gf(ue,5),2&vt){let Bt;Se.iGM(Bt=Se.CRH())&&(lt.ref=Bt.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop"},features:[Se._Bn([{provide:Ee.JU,useExisting:(0,Se.Gpc)(()=>ke),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(vt,lt){1&vt&&(Se.TgZ(0,"textarea",0,1),Se._uU(2,"    "),Se.qZA()),2&vt&&(Se.Gre("ngx-codemirror ",lt.className,""),Se.ekj("ngx-codemirror--focused",lt.isFocused),Se.Q6J("name",lt.name)("autofocus",lt.autoFocus))},encapsulation:2,changeDetection:0}),ke})(),Oe=(()=>{class ke{}return ke.\u0275fac=function(vt){return new(vt||ke)},ke.\u0275mod=Se.oAB({type:ke}),ke.\u0275inj=Se.cJS({}),ke})()},15861:(V,Z,g)=>{"use strict";function E(t,e,n,a,d,C,D){try{var B=t[C](D),z=B.value}catch(oe){return void n(oe)}B.done?e(z):Promise.resolve(z).then(a,d)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(a,d){var C=t.apply(e,n);function D(z){E(C,a,d,D,B,"next",z)}function B(z){E(C,a,d,D,B,"throw",z)}D(void 0)})}}g.d(Z,{Z:()=>m})}},V=>{V(V.s=91677)}]);